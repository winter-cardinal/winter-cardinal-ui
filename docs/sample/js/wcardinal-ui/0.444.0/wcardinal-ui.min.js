/*
 Winter Cardinal UI v0.444.0
 Copyright (C) 2019 Toshiba Corporation
 SPDX-License-Identifier: Apache-2.0

 Material Design icons by Google
 Apache license version 2.0.
*/
!function(t){"use strict";var n={},i={},r={CIRCLE:0,RECTANGLE:1,RECTANGLE_ROUNDED:2,TRIANGLE:3,TRIANGLE_ROUNDED:4,LINE:5,IMAGE:6,IMAGE_SDF:7,GROUP:8,BAR:9,LABEL:10,NULL:11,GROUP_SHADOWED:12,LINE_OF_CIRCLES:13,LINE_OF_RECTANGLES:14,LINE_OF_RECTANGLE_ROUNDEDS:15,LINE_OF_TRIANGLES:16,LINE_OF_TRIANGLE_ROUNDEDS:17,EMBEDDED:18,EMBEDDED_LAYER:19,BUTTON:20,RECTANGLE_PIVOTED:21,CONNECTOR_LINE:22,CONNECTOR_ELBOW:23,SEMICIRCLE:24,EMBEDDED_ACCEPTOR_EDGE:25,EXTENSION:1e3},e={},u=function(){function t(t,n,i,r,e,u){this.i=u,this.u=n,this.h=i,this.o=r,this.l=e}return t.prototype.init=function(t){t.uploaded=this;for(var n=this.i,i=0,r=n.length;i<r;++i)n[i].init();return this.update(t),this},t.prototype.reinit=function(t,n,i,r){for(var e=this.i,u=i,s=r,h=0,o=e.length;h<o;++h){var a=e[h];if(!a.reinit(t,n,u,s))return!1;u+=a.vertexCount,s+=a.indexCount}return this.o=u-i,this.l=s-r,this.update(n),!0},t.prototype.update=function(t){for(var n=this.i,i=0,r=n.length;i<r;++i)n[i].update(t);return this},t.prototype.isCompatible=function(t){for(var n=this.i,i=0,r=n.length;i<r;++i)if(!n[i].isCompatible(t))return!1;return!0},t.prototype.getVertexOffset=function(){return this.u},t.prototype.getVertexCount=function(){return this.o},t.prototype.getIndexOffset=function(){return this.h},t.prototype.getIndexCount=function(){return this.l},t.prototype.buildUnit=function(t){for(var n=this.i,i=0,r=n.length;i<r;++i)n[i].buildUnit(t)},t}(),s={NONE:0,NON_EXPANDING_WIDTH:2,NON_SHRINKING_WIDTH:4,NON_SCALING_DOT_AND_DASH:8,NON_SCALING:14,NON_SCALING_MASK:14,DOTTED:16,DOTTED_DENSELY:32,DOTTED_LOOSELY:64,DOTTED_MASK:112,DASHED:128,DASHED_DENSELY:256,DASHED_LOOSELY:512,DASHED_MASK:896},h=function(t){return t&s.DOTTED_MASK?t&s.DOTTED?1:t&s.DOTTED_DENSELY?2:3:t&s.DASHED_MASK?t&s.DASHED?4:t&s.DASHED_DENSELY?5:6:0},o=function(t){var n=t&s.NON_EXPANDING_WIDTH?1:0,i=t&s.NON_SHRINKING_WIDTH?2:0;return t&(s.DOTTED_MASK||s.DASHED_MASK)?n|i|(t&s.NON_SCALING_DOT_AND_DASH?4:0):n|i},a=function(t,n,i,r,e){return e[0]=i-t,e[1]=r-n,e},c=function(t,n){if(1e-5<n){var i=1/n,r=t[0]*i,e=t[1]*i;t[0]=-e,t[1]=+r}else t[0]=0,t[1]=1;return t},f=function(t,n){return Math.round(511.5*(1+t[0]))+(Math.round(511.5*(1+n[0]))<<10)+((0<=t[1]?1:0)+(0<=n[1]?2:0)<<20)},l=function(t,n,i,r){return t+(n<<6)+(i<<12)+(r<<18)},v=function(t,n){return Math.round(1023*t)+(Math.round(1023*n)<<10)},b=[0,1],d=[0,1],g=function(t,n,i){var r=3*i-1;t[++r]=n,t[++r]=n+2,t[++r]=n+1,t[++r]=n+1,t[++r]=n+2,t[++r]=n+3},m=function(t,n,i,r,e,u,s,v){var g=v.a,m=v.b,w=v.c,O=v.d,p=v.tx,D=v.ty,E=r[0],M=r[1],S=g*E+w*M+p,j=m*E+O*M+D,T=r[2],I=r[3],C=g*T+w*I+p,N=m*T+O*I+D,A=C-S,R=N-j,y=Math.sqrt(A*A+R*R),k=y;if(0<=e&&1e-5<y){var L=e/y;C=S+(A*=L),N=j+(R*=L),k=e}var x=b,B=d;a(S-A,j-R,S,j,x),a(S,j,C,N,B),c(x,k),c(B,k);var _=f(x,B),P=o(s),U=h(s),F=l(3,P,U,0),G=l(5,P,U,0),H=(i<<1)-1,z=6*i-1;t[++H]=S,t[++H]=j,t[++H]=S,t[++H]=j,n[++z]=u,n[++z]=F,n[++z]=_,n[++z]=0,n[++z]=k,n[++z]=0,n[++z]=u,n[++z]=G,n[++z]=_,n[++z]=0,n[++z]=k,n[++z]=0,t[++H]=C,t[++H]=N,t[++H]=C,t[++H]=N,n[++z]=u,n[++z]=F,n[++z]=_,n[++z]=k,n[++z]=k,n[++z]=0,n[++z]=u,n[++z]=G,n[++z]=_,n[++z]=k,n[++z]=k,n[++z]=0},w=function(t,n,i){var r=(n<<1)-1;t[++r]=i.x0,t[++r]=i.y0,t[++r]=i.x3,t[++r]=i.y3,t[++r]=i.x1,t[++r]=i.y1,t[++r]=i.x2,t[++r]=i.y2},O={NORMAL:0,BOLD:1},p={NORMAL:0,ITALIC:1},D={LEFT:0,CENTER:1,RIGHT:2,OUTSIDE_LEFT:3,OUTSIDE_RIGHT:4},E={TOP:0,MIDDLE:1,BOTTOM:2,OUTSIDE_TOP:3,OUTSIDE_BOTTOM:4},M={LEFT_TO_RIGHT:0,TOP_TO_BOTTOM:1,BOTTOM_TO_TOP:2,RIGHT_TO_LEFT:3},S=function(t,n,i,r){var e=i-t,u=r-n;return Math.sqrt(e*e+u*u)},j={ASCII:"!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",SPACE:" ",TAB:"\t",SOFT_TAB:"    ",DOTS:"...",NEW_LINE:"\n"},T=1e-5,I=new t.Point,C=function(t){var n=t.text.plength;return(n>>3)+(0<(7&n)?1:0)<<3},N=function(t,n,i,r){for(var e=3*i-1,u=3*(i+r)-1,s=n;e<u;)t[++e]=s,t[++e]=s+1,t[++e]=s+3,t[++e]=s+1,t[++e]=s+2,t[++e]=s+3,s+=4},A=function(t,n,i,r,e,u,h,a,c){var f=6*n-1,v=6*(n+i)-1,b=o(s.NONE),d=l(2,b,1,1);if(null!=r)for(var g=r.font.size/(e*(a+c)*.5),m=h===O.NORMAL?0:.05;f<v;)t[++f]=u,t[++f]=d,t[++f]=g,t[++f]=0,t[++f]=m,t[++f]=0;else for(;f<v;)t[++f]=0,t[++f]=d,t[++f]=0,t[++f]=0,t[++f]=0,t[++f]=0},R=function(t,n,i,r,e,u,s,h,o,a,c,f,l,v,b,d,g,m,w,O,p){switch(t){case D.LEFT:switch(n){case E.TOP:p.x=o+g*(i+e)+w*(r+u),p.y=a+m*(i+e)+O*(r+u);break;case E.MIDDLE:p.x=.5*(o+b)+g*(i+e)+w*(r-.5*h),p.y=.5*(a+d)+m*(i+e)+O*(r-.5*h);break;case E.BOTTOM:p.x=b+g*(i+e)+w*(r-u-h),p.y=d+m*(i+e)+O*(r-u-h);break;case E.OUTSIDE_TOP:p.x=o+g*(i+e)+w*(r-u-h),p.y=a+m*(i+e)+O*(r-u-h);break;case E.OUTSIDE_BOTTOM:p.x=b+g*(i+e)+w*(r+u),p.y=d+m*(i+e)+O*(r+u)}break;case D.CENTER:switch(n){case E.TOP:p.x=.5*(o+c)+g*(i-.5*s)+w*(r+u),p.y=.5*(a+f)+m*(i-.5*s)+O*(r+u);break;case E.MIDDLE:p.x=.5*(o+l)+g*(i-.5*s)+w*(r-.5*h),p.y=.5*(a+v)+m*(i-.5*s)+O*(r-.5*h);break;case E.BOTTOM:p.x=.5*(b+l)+g*(i-.5*s)+w*(r-u-h),p.y=.5*(d+v)+m*(i-.5*s)+O*(r-u-h);break;case E.OUTSIDE_TOP:p.x=.5*(o+c)+g*(i-.5*s)+w*(r-u-h),p.y=.5*(a+f)+m*(i-.5*s)+O*(r-u-h);break;case E.OUTSIDE_BOTTOM:p.x=.5*(b+l)+g*(i-.5*s)+w*(r+u),p.y=.5*(d+v)+m*(i-.5*s)+O*(r+u)}break;case D.RIGHT:switch(n){case E.TOP:p.x=c+g*(i-e-s)+w*(r+u),p.y=f+m*(i-e-s)+O*(r+u);break;case E.MIDDLE:p.x=.5*(c+l)+g*(i-e-s)+w*(r-.5*h),p.y=.5*(f+v)+m*(i-e-s)+O*(r-.5*h);break;case E.BOTTOM:p.x=l+g*(i-e-s)+w*(r-u-h),p.y=v+m*(i-e-s)+O*(r-u-h);break;case E.OUTSIDE_TOP:p.x=c+g*(i-e-s)+w*(r-u-h),p.y=f+m*(i-e-s)+O*(r-u-h);break;case E.OUTSIDE_BOTTOM:p.x=l+g*(i-e-s)+w*(r+u),p.y=v+m*(i-e-s)+O*(r+u)}break;case D.OUTSIDE_LEFT:switch(n){case E.TOP:p.x=o+g*(i-e-s)+w*(r+u),p.y=a+m*(i-e-s)+O*(r+u);break;case E.MIDDLE:p.x=.5*(o+b)+g*(i-e-s)+w*(r-.5*h),p.y=.5*(a+d)+m*(i-e-s)+O*(r-.5*h);break;case E.BOTTOM:p.x=b+g*(i-e-s)+w*(r-u-h),p.y=d+m*(i-e-s)+O*(r-u-h);break;case E.OUTSIDE_TOP:p.x=o+g*(i-e-s)+w*(r-u-h),p.y=a+m*(i-e-s)+O*(r-u-h);break;case E.OUTSIDE_BOTTOM:p.x=b+g*(i-e-s)+w*(r+u),p.y=d+m*(i-e-s)+O*(r+u)}break;case D.OUTSIDE_RIGHT:switch(n){case E.TOP:p.x=c+g*(i+e)+w*(r+u),p.y=f+m*(i+e)+O*(r+u);break;case E.MIDDLE:p.x=.5*(c+l)+g*(i+e)+w*(r-.5*h),p.y=.5*(f+v)+m*(i+e)+O*(r-.5*h);break;case E.BOTTOM:p.x=l+g*(i+e)+w*(r-u-h),p.y=v+m*(i+e)+O*(r-u-h);break;case E.OUTSIDE_TOP:p.x=c+g*(i+e)+w*(r-u-h),p.y=f+m*(i+e)+O*(r-u-h);break;case E.OUTSIDE_BOTTOM:p.x=l+g*(i+e)+w*(r+u),p.y=v+m*(i+e)+O*(r+u)}}},y=function(t,n,i,r,e,u,s,h,o,a,c,f,l,v,b,d,g,m,w,O,C,N,A,y,B,_){var P=.5*s,F=.5*h,G=_.a,H=_.b,z=_.c,V=_.d,W=_.tx,X=_.ty,K=e-P,Y=u-F,J=e+P,Z=u-F,q=e+P,Q=u+F,$=G*K+z*Y+W,tt=H*K+V*Y+X,nt=G*J+z*Z+W,it=H*J+V*Z+X,rt=G*q+z*Q+W,et=H*q+V*Q+X,ut=$+(rt-nt),st=tt+(et-it),ht=S($,tt,nt,it),ot=S(0,0,G,H),at=1,ct=0;if(T<ot){var ft=1/ot;at=G*ft,ct=H*ft}var lt=S($,tt,ut,st),vt=S(0,0,z,V),bt=0,dt=1;if(T<ot){var gt=1/vt;bt=z*gt,dt=V*gt}var mt=I;switch(w){case M.LEFT_TO_RIGHT:break;case M.TOP_TO_BOTTOM:mt.set(bt,dt),bt=-at,dt=-ct,at=mt.x,ct=mt.y,mt.x=vt,vt=ot,ot=mt.x;break;case M.BOTTOM_TO_TOP:mt.set(bt,dt),bt=at,dt=ct,at=-mt.x,ct=-mt.y,mt.x=vt,vt=ot,ot=mt.x;break;case M.RIGHT_TO_LEFT:at=-at,ct=-ct,bt=-bt,dt=-dt}for(var wt=0,Ot=0,pt=0,Dt=a*vt,Et=Math.max(0,a+m)*vt,Mt=0,St=1,jt=o.characters,Tt=0,It=0,Ct=c.length;It<Ct;++It)(bn=c[It])!==j.NEW_LINE?(0<Tt&&(Mt+=Math.max(0,Tt+g)),(gn=jt.get(bn))?(Tt=gn.advance,pt=gn.height):Tt=0):(Mt+=Tt,Tt=0,wt=Math.max(wt,Mt),Mt=0,Ot+=Et,St+=1);if(Mt+=Tt,wt=Math.max(wt,Mt),Ot+=Dt,Mt=0,A&&k(l,v)){var Nt=0,At=0;switch(w){case M.LEFT_TO_RIGHT:case M.RIGHT_TO_LEFT:Nt=Math.max(0,ht-2*O),At=Math.max(0,lt-2*C);break;case M.TOP_TO_BOTTOM:case M.BOTTOM_TO_TOP:Nt=Math.max(0,lt-2*C),At=Math.max(0,ht-2*O)}var Rt=wt*ot*(a/o.font.size),yt=Ot,kt=Math.min(1,Math.min(Nt/Rt,At/yt));a*=kt,Dt*=kt,Et*=kt,Ot*=kt}var Lt=a/o.font.size,xt=ot*Lt;pt*=vt*Lt;var Bt=0,_t=0,Pt=wt*=xt;switch(w){case M.LEFT_TO_RIGHT:R(l,v,b,d,O,C,wt,Ot,$,tt,nt,it,rt,et,ut,st,at,ct,bt,dt,mt),Bt=mt.x,_t=mt.y,N&&k(l,v)&&(Pt=ht-2*O);break;case M.TOP_TO_BOTTOM:R(function(t){switch(t){case E.TOP:return D.LEFT;case E.MIDDLE:return D.CENTER;case E.BOTTOM:return D.RIGHT;case E.OUTSIDE_TOP:return D.OUTSIDE_LEFT;case E.OUTSIDE_BOTTOM:return D.OUTSIDE_RIGHT}}(v),function(t){switch(t){case D.LEFT:return E.BOTTOM;case D.CENTER:return E.MIDDLE;case D.RIGHT:return E.TOP;case D.OUTSIDE_LEFT:return E.OUTSIDE_BOTTOM;case D.OUTSIDE_RIGHT:return E.OUTSIDE_TOP}}(l),d,b,C,O,wt,Ot,nt,it,rt,et,ut,st,$,tt,at,ct,bt,dt,mt),Bt=mt.x,_t=mt.y,N&&k(l,v)&&(Pt=lt-2*C);break;case M.BOTTOM_TO_TOP:R(function(t){switch(t){case E.TOP:return D.RIGHT;case E.MIDDLE:return D.CENTER;case E.BOTTOM:return D.LEFT;case E.OUTSIDE_TOP:return D.OUTSIDE_RIGHT;case E.OUTSIDE_BOTTOM:return D.OUTSIDE_LEFT}}(v),function(t){switch(t){case D.LEFT:return E.TOP;case D.CENTER:return E.MIDDLE;case D.RIGHT:return E.BOTTOM;case D.OUTSIDE_LEFT:return E.OUTSIDE_TOP;case D.OUTSIDE_RIGHT:return E.OUTSIDE_BOTTOM}}(l),d,b,C,O,wt,Ot,ut,st,$,tt,nt,it,rt,et,at,ct,bt,dt,mt),Bt=mt.x,_t=mt.y,N&&k(l,v)&&(Pt=lt-2*C);break;case M.RIGHT_TO_LEFT:R(function(t){switch(t){case D.LEFT:return D.RIGHT;case D.CENTER:return D.CENTER;case D.RIGHT:return D.LEFT;case D.OUTSIDE_LEFT:return D.OUTSIDE_RIGHT;case D.OUTSIDE_RIGHT:return D.OUTSIDE_LEFT}}(l),function(t){switch(t){case E.TOP:return E.BOTTOM;case E.MIDDLE:return E.MIDDLE;case E.BOTTOM:return E.TOP;case E.OUTSIDE_TOP:return E.OUTSIDE_BOTTOM;case E.OUTSIDE_BOTTOM:return E.OUTSIDE_TOP}}(v),b,d,O,C,wt,Ot,rt,et,ut,st,$,tt,nt,it,at,ct,bt,dt,mt),Bt=mt.x,_t=mt.y,N&&k(l,v)&&(Pt=ht-2*O)}if(Pt<wt){var Ut=.5*(wt-Pt);y[0]=Bt+at*Ut,y[1]=_t+ct*Ut,y[2]=at,y[3]=ct,y[4]=bt,y[5]=dt,y[6]=Pt,y[7]=Ot,y[8]=ot,y[9]=vt}else y[0]=Bt,y[1]=_t,y[2]=at,y[3]=ct,y[4]=bt,y[5]=dt,y[6]=wt,y[7]=Ot,y[8]=ot,y[9]=vt;var Ft=B.x0,Gt=B.x1,Ht=B.x3,zt=B.y0,Vt=B.y1,Wt=B.y3,Xt=Gt-Ft,Kt=Vt-zt,Yt=Ht-Ft,Jt=Wt-zt,Zt=Et*bt,qt=Et*dt,Qt=xt*at,$t=xt*ct,tn=.5*(pt-Dt),nn=tn*bt,rn=tn*dt,en=f===p.NORMAL?0:.25*a,un=Bt-nn+en*Qt,sn=_t-rn+en*$t,hn=Bt+nn+Dt*bt,on=_t+rn+Dt*dt,an=un,cn=sn,fn=hn,ln=on;Mt=0,Tt=0,St=0;var vn=2*i;for(It=0,Ct=c.length;It<Ct;It+=1,vn+=8){var bn;if((bn=c[It])!==j.NEW_LINE){var dn=Mt;0<Tt&&(Mt+=Math.max(0,Tt+g));var gn,mn=Mt*Qt,wn=Mt*$t;if(an=un+mn,cn=sn+wn,fn=hn+mn,ln=on+wn,St+=1,gn=jt.get(bn)){var On=gn.advance;if(Pt<(Mt+On)*xt){var pn=jt.get(j.DOTS);if(pn){if(1<St&&Pt<(Mt+pn.advance)*xt){vn-=8,St-=1;var Dn=(Mt=dn)*Qt,En=Mt*$t;an=un+Dn,cn=sn+En,fn=hn+Dn,ln=on+En}for(Tt=pn.advance,x(t,n,vn,pn,o,Qt,$t,an,cn,fn,ln,Xt,Kt,Yt,Jt,Ft,zt),vn+=8;;vn+=8){if(!(It+1<Ct&&c[It+1]!==j.NEW_LINE)){vn-=8;break}L(t,n,vn,an,cn,fn,ln,Ft,zt,Ht,Wt),St+=1,It+=1}}else Tt=On,L(t,n,vn,an,cn,fn,ln,Ft,zt,Ht,Wt)}else Tt=On,x(t,n,vn,gn,o,Qt,$t,an,cn,fn,ln,Xt,Kt,Yt,Jt,Ft,zt)}else Tt=0,L(t,n,vn,an,cn,fn,ln,Ft,zt,Ht,Wt)}else Mt+=Tt,Tt=0,L(t,n,vn,an=un+=Zt,cn=sn+=qt,fn=hn+=Zt,ln=on+=qt,Ft,zt,Ht,Wt),U(t,at,ct,St,vn,wt-Mt*xt,w,l,v),Mt=0,St=0}U(t,at,ct,St,vn,wt-(Mt+=Tt)*xt,w,l,v);for(var Mn=2*(i+r);vn<Mn;vn+=2)t[vn+0]=Bt,t[vn+1]=_t,n[vn+0]=Ft,n[vn+1]=zt},k=function(t,n){switch(t){case D.LEFT:case D.CENTER:case D.RIGHT:switch(n){case E.TOP:case E.MIDDLE:case E.BOTTOM:return!0}}return!1},L=function(t,n,i,r,e,u,s,h,o,a,c){t[i+0]=r,t[i+1]=e,t[i+2]=r,t[i+3]=e,t[i+4]=u,t[i+5]=s,t[i+6]=u,t[i+7]=s,n[i+0]=h,n[i+1]=o,n[i+2]=h,n[i+3]=o,n[i+4]=a,n[i+5]=c,n[i+6]=a,n[i+7]=c},x=function(t,n,i,r,e,u,s,h,o,a,c,f,l,v,b,d,g){var m=r.x-r.origin.x,w=r.width,O=m*u,p=m*s,D=(m+w)*u,E=(m+w)*s;t[i+0]=h+O,t[i+1]=o+p,t[i+2]=h+D,t[i+3]=o+E,t[i+4]=a+D,t[i+5]=c+E,t[i+6]=a+O,t[i+7]=c+p;var M=r.x/e.width,S=r.y/e.height,j=(r.x+r.width)/e.width,T=(r.y+r.height)/e.height,I=f*M,C=l*M,N=f*j,A=l*j,R=v*S,y=b*S,k=v*T,L=b*T;n[i+0]=d+I+R,n[i+1]=g+C+y,n[i+2]=d+N+R,n[i+3]=g+A+y,n[i+4]=d+N+k,n[i+5]=g+A+L,n[i+6]=d+I+k,n[i+7]=g+C+L},B=function(t,n,i,r,e){for(var u=n-8*i-1,s=0;s<i;++s)t[++u]+=r,t[++u]+=e,t[++u]+=r,t[++u]+=e,t[++u]+=r,t[++u]+=e,t[++u]+=r,t[++u]+=e},_=function(t,n,i,r,e,u){B(t,n,i,(r*=.5)*e,r*u)},P=function(t,n,i,r,e,u){B(t,n,i,r*e,r*u)},U=function(t,n,i,r,e,u,s,h,o){if(T<u)switch(s){case M.LEFT_TO_RIGHT:switch(h){case D.OUTSIDE_RIGHT:case D.LEFT:break;case D.CENTER:_(t,e,r,u,n,i);break;case D.OUTSIDE_LEFT:case D.RIGHT:P(t,e,r,u,n,i)}break;case M.TOP_TO_BOTTOM:switch(o){case E.OUTSIDE_BOTTOM:case E.TOP:break;case E.MIDDLE:_(t,e,r,u,n,i);break;case E.OUTSIDE_TOP:case E.BOTTOM:P(t,e,r,u,n,i)}break;case M.BOTTOM_TO_TOP:switch(o){case E.OUTSIDE_BOTTOM:case E.TOP:P(t,e,r,u,n,i);break;case E.MIDDLE:_(t,e,r,u,n,i)}break;case M.RIGHT_TO_LEFT:switch(h){case D.OUTSIDE_RIGHT:case D.LEFT:P(t,e,r,u,n,i);break;case D.CENTER:_(t,e,r,u,n,i)}}},F=function(t,n){return(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(t,n)};function G(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}F(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}"function"==typeof SuppressedError&&SuppressedError;var H,z,V,W,X,K={NONE:0,CLOSED:1,NON_EXPANDING_WIDTH:2,NON_SHRINKING_WIDTH:4,NON_SCALING_DOT_AND_DASH:8,NON_SCALING_MASK:14,DOTTED:16,DOTTED_DENSELY:32,DOTTED_LOOSELY:64,DOTTED_MASK:112,DASHED:128,DASHED_DENSELY:256,DASHED_LOOSELY:512,DASHED_MASK:896,CURVE:1024,CURVE_SPLINE:1024,CURVE_BEZIER_QUADRATIC:2048,FORMATTER_SHIFT:10,FORMATTER_MASK:1047552,FORMATTER_EXTENSION_LOWEST:512,FORMATTER_EXTENSION_HIGHEST:1023,FORMATTER_CURVE:1,FORMATTER_CURVE_SPLINE:1,FORMATTER_CURVE_BEZIER_QUADRATIC:2},Y={NONE:0,VERTEX:1,STEP:2,COLOR:4,UV:8,INDEX:16,VERTEX_AND_STEP:3,VERTEX_STEP_AND_UV:11,ALL:31},J=function(t,n,i,r,e,u,s){for(var h=v(Math.max(0,Math.min(1,n)),Math.max(0,Math.min(1,r))),o=3*e-1,a=3*(e+u)-1;o<a;)s[++o]=t,s[++o]=i,s[++o]=h},Z={NONE:0,TOP:1,RIGHT:2,BOTTOM:4,LEFT:8,TOP_OR_LEFT:9,TOP_OR_RIGHT:3,BOTTOM_OR_LEFT:12,BOTTOM_OR_RIGHT:6,ALL:15},q=function(){function n(t,n,i,r,e){this.buffer=t,this.vertexOffset=n,this.indexOffset=i,this.vertexCount=r,this.indexCount=e,this.inited=Y.NONE,this.sizeX=0,this.sizeY=0,this.transformLocalId=-1,this.strokeAlign=0,this.strokeWidth=0,this.strokeSide=Z.NONE,this.strokeStyle=s.NONE,this.colorFill=0,this.alphaFill=0,this.colorStroke=0,this.alphaStroke=0,this.texture=null,this.textureTransformId=-1}return n.prototype.reinit=function(t,n,i,r){return this.buffer===t&&this.vertexOffset===i&&this.indexOffset===r||!!t.check(i,r,this.vertexCount,this.indexCount)&&(this.inited=Y.NONE,this.buffer=t,this.vertexOffset=i,this.indexOffset=r,this.init(),!0)},n.prototype.isCompatible=function(t){return!0},n.prototype.updateColor=function(t,n){var i=n.fill,r=i.color,e=n.visible&&i.enable?i.alpha:0,u=n.stroke,s=u.color,h=n.visible&&u.enable&&0<u.width?u.alpha:0;(!(this.inited&Y.COLOR)||r!==this.colorFill||e!==this.alphaFill||s!==this.colorStroke||h!==this.alphaStroke)&&(this.inited|=Y.COLOR,this.colorFill=r,this.alphaFill=e,this.colorStroke=s,this.alphaStroke=h,t.updateColors(),J(r,e,s,h,this.vertexOffset,this.vertexCount,t.colors))},n.prototype.buildUnit=function(n){var i=this.texture||t.Texture.WHITE,r=i.baseTexture;if(r!==n.baseTexture){n.baseTexture=r;var e=this.indexOffset;n.push(i,e)}},n}(),Q=function(t){return t.updateTransform(),t.transform.getLocalId()},$=function(n){return n.texture||t.Texture.WHITE},tt=function(t){var n=t;return null==n._uvs&&t.updateUvs(),n._updateID},nt=function(t){return t._uvs},it=function(){function t(){}return t.setDefaultThemeClass=function(t){this.DEFAULT_THEME_CLASS=t},t.getDefaultThemeClass=function(){return this.DEFAULT_THEME_CLASS},t.getInstance=function(){if(null==this.INSTANCE){var t=this.getDefaultThemeClass();if(null==t)throw new Error("No default theme class found");this.INSTANCE=new t}return this.INSTANCE},t.setInstance=function(t){var n=this.INSTANCE;return this.INSTANCE=t,n},t.get=function(t){return this.getInstance().get(t)},t.set=function(t,n){this.getInstance().set(t,n)},t.getClass=function(t){return this.getInstance().getClass(t)},t.setClass=function(t,n){this.getInstance().setClass(t,n)},t.getAtlas=function(){return this.getInstance().getAtlas()},t.DEFAULT_THEME_CLASS=null,t.INSTANCE=null,t}(),rt=function(){function t(){}return Object.defineProperty(t,"THEME",{get:function(){var t=this.v;if(null!=t)return t;var n=it.getInstance().get("EShape");return this.v=n,n},enumerable:!1,configurable:!0}),Object.defineProperty(t,"FILL_COLOR",{get:function(){return this.THEME.getFillColor()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"FILL_ALPHA",{get:function(){return this.THEME.getFillAlpha()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"STROKE_COLOR",{get:function(){return this.THEME.getStrokeColor()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"STROKE_ALPHA",{get:function(){return this.THEME.getStrokeAlpha()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"STROKE_WIDTH",{get:function(){return this.THEME.getStrokeWidth()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"STROKE_ALIGN",{get:function(){return this.THEME.getStrokeAlign()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"STROKE_SIDE",{get:function(){return this.THEME.getStrokeSide()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"STROKE_STYLE",{get:function(){return this.THEME.getStrokeStyle()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEXT_VALUE",{get:function(){return this.THEME.getTextValue()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEXT_COLOR",{get:function(){return this.THEME.getTextColor()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEXT_ALPHA",{get:function(){return this.THEME.getTextAlpha()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEXT_FAMILY",{get:function(){return this.THEME.getTextFamily()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEXT_SIZE",{get:function(){return this.THEME.getTextSize()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"RADIUS",{get:function(){return this.THEME.getRadius()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SIZE_X",{get:function(){return this.THEME.getSizeX()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SIZE_Y",{get:function(){return this.THEME.getSizeY()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"HIGHLIGHT_COLOR",{get:function(){return this.THEME.getHighlightColor()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CURVE_SEGMENT_COUNT",{get:function(){return this.THEME.getCurveSegmentCount()},enumerable:!1,configurable:!0}),t}(),et={NONE:0,CIRCLE:1,TRIANGLE:2,RECTANGLE:3},ut=function(){function t(t,n,i,r){this.g=t,this.O=n,this.p=i,this.S=r}return Object.defineProperty(t.prototype,"enable",{get:function(){return this.O},set:function(t){this.O!==t&&(this.O=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.p},set:function(t){this.p!==t&&(this.p=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.S},set:function(t){this.S!==t&&(this.S=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){t&&this.set(t.enable,t.color,t.alpha)},t.prototype.set=function(t,n,i){var r=!1;void 0!==t&&this.O!==t&&(this.O=t,r=!0),void 0!==n&&this.p!==n&&(this.p=n,r=!0),void 0!==i&&this.S!==i&&(this.S=i,r=!0),r&&this.g.updateUploaded()},t.prototype.clone=function(){return new t(this.g,this.O,this.p,this.S)},t.prototype.toObject=function(){return{enable:this.O,color:this.p,alpha:this.S}},t.prototype.serialize=function(t){var n="[".concat(this.O?1:0,",").concat(this.p,",").concat(this.S,"]");return t.addResource(n)},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getFill(t);if(null!=r)this.set(!!r[0],r[1],r[2]);else{var e=JSON.parse(i[t]);n.setFill(t,e),this.set(!!e[0],e[1],e[2])}}},t}(),st=function(){function n(){}return n.prototype.lock=function(){return this},n.prototype.unlock=function(){return this},Object.defineProperty(n.prototype,"type",{get:function(){return et.NONE},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){var n=this.j;return null==n&&(n=new t.Point,this.j=n),n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"transform",{get:function(){var n=this.T;return null==n&&(n=new t.Matrix,this.T=n),n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fill",{get:function(){var t=this.I;return null==t&&(t=new ut(this,!0,rt.FILL_COLOR,1),this.I=t),t},enumerable:!1,configurable:!0}),n.prototype.updateUploaded=function(){},n.prototype.copy=function(t){return this},n.prototype.set=function(t,n,i){return this},n.prototype.serialize=function(t){return-1},n.prototype.deserialize=function(t,n){},n}(),ht=function(){function t(){this.C=new st}return t.prototype.lock=function(){return this},t.prototype.unlock=function(){return this},Object.defineProperty(t.prototype,"head",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tail",{get:function(){return this.C},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){return this},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t.getInstance=function(){var n=this.INSTANCE;return null==n&&(n=new t,this.INSTANCE=n),n},t}(),ot={TOP:0,LEFT:1,RIGHT:2,BOTTOM:3},at=function(){function n(t){this.g=t,this.A=0,this.R=[0,0,0,0],this.k=[],this.L=K.NONE,this.j=-1,this.B=ot.TOP,this._=NaN,this.P=NaN,this.U=NaN,this.F=NaN}return n.prototype.getComputedSize=function(t,n,i,r){if(0<=t)return t;switch(n){case ot.TOP:case ot.BOTTOM:return Math.abs(r);case ot.RIGHT:case ot.LEFT:return Math.abs(i)}return 0},n.prototype.onSizeChange=function(){this.update()},n.prototype.update=function(){var t=this.g.size,n=t.x,i=t.y,r=this.B,e=this.j;if(this._!==e||this.P!==n||this.U!==i||this.F!==r){this.A+=1,this._=e,this.P=n,this.U=i,this.F=r;var u=.5*n,s=.5*i,h=this.getComputedSize(e,r,n,i),o=this.R;switch(r){case ot.TOP:o[0]=0,o[1]=-s,o[2]=0,o[3]=-s+h;break;case ot.RIGHT:o[0]=u,o[1]=0,o[2]=u-h,o[3]=0;break;case ot.BOTTOM:o[0]=0,o[1]=s,o[2]=0,o[3]=s-h;break;case ot.LEFT:o[0]=-u,o[1]=0,o[2]=-u+h,o[3]=0}}},Object.defineProperty(n.prototype,"length",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"plength",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this.update(),this.A},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"values",{get:function(){return this.update(),this.R},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"segments",{get:function(){return this.k},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this.j},set:function(t){this.moveTo(void 0,t,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"position",{get:function(){return this.B},set:function(t){this.moveTo(t,void 0,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"style",{get:function(){return this.L},set:function(t){this.moveTo(void 0,void 0,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"marker",{get:function(){var t=this.C;return null==t&&(t=ht.getInstance(),this.C=t),t},enumerable:!1,configurable:!0}),n.prototype.getMarker=function(){},Object.defineProperty(n.prototype,"formatter",{get:function(){return null},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"formatted",{get:function(){return this},enumerable:!1,configurable:!0}),n.prototype.copy=function(t){return t instanceof n?this.moveTo(t.position,t.size,t.style):this.moveTo(void 0,void 0,t.style)},n.prototype.set=function(t,n,i){var r,e;if(null!=t){var u=t[0];if(0===u){var s=t[1];r=s<=0?ot.TOP:ot.BOTTOM,e=Math.abs(t[3]-s)}else r=u<=0?ot.LEFT:ot.RIGHT,e=Math.abs(t[2]-u)}return this.moveTo(r,e,i)},n.prototype.moveTo=function(t,n,i){var r=!1;return null!=i&&this.L!==i&&(this.L=i,r=!0),null!=t&&this.B!==t&&(this.B=t,r=!0),null!=n&&this.j!==n&&(this.j=n,r=!0),r&&this.g.updateUploaded(),this},n.prototype.clone=function(t){return new n(t).copy(this)},n.prototype.toPoints=function(n){for(var i=[],r=this.values,e=0,u=r.length;e<u;e+=2){var s=new t.Point(r[e+0],r[e+1]);i.push(n.apply(s,s))}return i},n.prototype.serialize=function(t){return t.addResource("[".concat(this.B,",").concat(this.j,",").concat(this.L,"]"))},n.prototype.deserialize=function(t,n){if(0<=t&&t<n.resources.length){var i=n.resources[t],r=JSON.parse(i);this.moveTo(r[0],r[1],r[2])}},n.prototype.calcHitPointAbs=function(t,n,i,r,e,u,s,h){if(2<=this.length){var o=this.R;if(s(t,n,o[0],o[1],o[2],o[3],0,e,h))return!0}return!1},n}(),ct={NONE:0,LINE:1,MARKER_TAIL:2,MARKER_HEAD:3,TEXT:4,CHILDREN:5},ft={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_LEFT:4,BOTTOM_RIGHT:8,TOP:3,BOTTOM:12,LEFT:5,RIGHT:10,ALL:15},lt=function(){function t(){}return t.add=function(n){t.INSTANCES.push(n)},t.first=function(){var n=t.INSTANCES;if(0<n.length)return n[0];throw new Error("No application found.")},t.last=function(){var n=t.INSTANCES;if(0<n.length)return n[n.length-1];throw new Error("No application found.")},t.get=function(n){var i=t.INSTANCES;return 0<=n&&n<i.length?i[n]:null},t.indexOf=function(n){return t.INSTANCES.indexOf(n)},t.size=function(){return t.INSTANCES.length},t.getStage=function(t){for(var n=t;n.parent;)n=n.parent;return"application"in n&&"layer"in n?n:null},t.find=function(t){var n=this.getStage(t);return n?n.layer.application:null},t.getLayerBase=function(t){var n=this.getStage(t);return n?n.layer.application.getLayerBase():null},t.getLayerOverlay=function(t){var n=this.getStage(t);return n?n.layer.application.getLayerOverlay():null},t.getLayer=function(t){var n=this.getStage(t);return n?n.layer:null},t.getResolution=function(t){var n,i=this.getLayer(t);return i?i.renderer.resolution:null!==(n=window.devicePixelRatio)&&void 0!==n?n:1},t.update=function(n){if(n){var i=this.getStage(n);i&&i.layer.update()}else for(var r=t.INSTANCES,e=0,u=r.length;e<u;++e)r[e].update()},t.render=function(n){if(n){var i=this.getStage(n);i&&i.layer.render()}else for(var r=t.INSTANCES,e=0,u=r.length;e<u;++e)r[e].render()},t.INSTANCES=[],t}(),vt=function(){function t(){this.values=[]}return t.prototype.add=function(t,n){var i=this.values;return null!=n?i.splice(n,0,t):i.push(t),this},t.prototype.addAll=function(t){for(var n=this.values,i=0,r=t.length;i<r;++i)n.push(t[i]);return this},t.prototype.clearAndAdd=function(t){return this.clear(),this.add(t),this},t.prototype.clearAndAddAll=function(t){return this.clear(),this.addAll(t),this},t.prototype.indexOf=function(t){for(var n=this.values,i=0,r=n.length;i<r;++i)if(n[i]===t)return i;for(i=0,r=n.length;i<r;++i)if(n[i].isEquals(t))return i;return-1},t.prototype.get=function(t){var n=this.values;return 0<=t||t<n.length?n[t]:null},t.prototype.set=function(t,n){var i=this.values;if(0<=t||t<i.length){var r=i[t];return i[t]=n,r}return null},t.prototype.remove=function(t){var n=this.values;return 0<=t||t<n.length?n.splice(t,1)[0]:null},t.prototype.clear=function(){return this.values.length=0,this},t.prototype.size=function(){return this.values.length},t.prototype.swap=function(t,n){var i=this.values,r=i[n];return i[n]=i[t],i[t]=r,this},t.prototype.serialize=function(t){for(var n=[],i=this.values,r=0,e=i.length;r<e;++r)n.push(i[r].serialize(t));return n},t}(),bt=function(){function t(t){this.g=t,this.G=new Set}return t.prototype.add=function(t){var n=this.G;return!n.has(t)&&(n.add(t),!0)},t.prototype.contains=function(t){return this.G.has(t)},t.prototype.size=function(){return this.G.size},t.prototype.remove=function(t){return this.G.delete(t)},t.prototype.clear=function(){return 0<this.G.size&&(this.G.clear(),!0)},t.prototype.copy=function(t){var n=this.G;return n.clear(),t.each((function(t){n.add(t)})),this},t.prototype.each=function(t){return this.G.forEach(t),this},t.prototype.fit=function(t){this.G.forEach(this.toOnFitBound(t))},t.prototype.toOnFitBound=function(t){var n;return t?(null==(n=this.V)&&(n=this.newOnFitBound(!0),this.V=n),n):(null==(n=this.W)&&(n=this.newOnFitBound(!1),this.W=n),n)},t.prototype.newOnFitBound=function(t){var n=this;return function(i){n.onFit(i,t)}},t.prototype.onFit=function(t,n){t.fit(n)},t.prototype.attach=function(){var t=this.g;return this.G.forEach((function(n){n.set(t)})),this},t.prototype.detach=function(t){return this.G.forEach((function(n){null!=t&&t.has(n.parent)||n.set(null)})),this},t}(),dt={NONE:0,TRANSFORM:1,SIZE:2,STYLE:4,ACTION:8,POINTS:16,STATE:32,IMAGE:64,DATA:128,TAG:128,CONNECTOR:256,CAPABILITY:512,ALL:1023},gt={HOVERED:"HOVERED",ACTIVE:"ACTIVE",FOCUSED:"FOCUSED",UNFOCUSABLE:"UNFOCUSABLE",FOCUS_ROOT:"FOCUS_ROOT",FOCUS_REVERSE:"FOCUS_REVERSE",READ_ONLY:"READ_ONLY",DISABLED:"DISABLED",GESTURING:"GESTURING",PRESSED:"PRESSED",INVALID:"INVALID",PROCESSING:"PROCESSING",SUCCEEDED:"SUCCEEDED",FAILED:"FAILED",WARNED:"WARNED",CHANGED:"CHANGED",ALTERNATED:"ALTERNATED",NEW_WINDOW:"NEW_WINDOW"},mt=function(){function t(t){var n=this;this.K=new Map,this.J=t,this.Z=function(){return n.onTime()}}return Object.defineProperty(t.prototype,"interval",{get:function(){return this.J},enumerable:!1,configurable:!0}),t.prototype.add=function(t,n){var i=this.K,r=i.get(t);return null==r?((r=new Set).add(n),i.set(t,r),i.size<=1&&this.start()):r.add(n),this},t.prototype.remove=function(t,n){var i=this.K,r=i.get(t);return null!=r&&r.has(n)&&(r.delete(n),n.remove(t),r.size<=0&&i.delete(t),i.size<=0&&this.stop()),this},t.prototype.start=function(){return null==this.q&&this.onTime(),this},t.prototype.stop=function(){var t=this.q;return null!=t&&(clearTimeout(t),this.q=void 0),this},t.prototype.onTime=function(){var t=Date.now(),n=this.interval,i=this.newValue(t,n),r=this.newOn(t,n);this.K.forEach((function(t,n){t.forEach((function(t){t.set(n,i,r)}))})),this.q=window.setTimeout(this.Z,Math.max(0,n-t%n))},t}(),wt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newValue=function(t,n){return null},n.prototype.newOn=function(t,n){return Math.round(t/n)%2==0},n}(mt),Ot=function(){function t(t,n){this.g=t,this.$=new Map,this.tt=n}return t.prototype.add=function(t,n){var i=this.$,r=i.get(t);if(r===n)return this;if(null!=r){i.delete(t);var e=this.tt.get(r);null!=e&&e.remove(t,this.g)}i.set(t,n);var u=this.tt.get(n);return null==u&&(u=this.newDatum(n),this.tt.set(n,u)),u.add(t,this.g),this},t.prototype.remove=function(t){var n=this.$.get(t);if(null==n)return this;this.$.delete(t);var i=this.tt.get(n);return null==i||i.remove(t,this.g),this},t.prototype.set=function(t,n,i){return i?this.add(t,n):this.remove(t)},t.prototype.has=function(t){return this.$.has(t)},t.prototype.clear=function(){var t=this,n=this.g,i=this.$;return i.forEach((function(i,r){var e=t.tt.get(i);null!=e&&e.remove(r,n)})),i.clear(),this},t}(),pt=function(t){function n(n){return t.call(this,n,null!=H?H:H=new Map)||this}return G(n,t),n.prototype.newDatum=function(t){return new wt(t)},n}(Ot),Dt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newValue=function(t,n){return Math.round(t/n)},n.prototype.newOn=function(t,n){return!0},n}(mt),Et=function(t){function n(n){return t.call(this,n,null!=z?z:z=new Map)||this}return G(n,t),n.prototype.newDatum=function(t){return new Dt(t)},n}(Ot),Mt=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},St=function(t){return"function"==typeof t},jt=function(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)},Tt=function(t){return"string"==typeof t||"[object String]"===Object.prototype.toString.call(t)},It=function(){function t(){this.nt=new Map,this.g=null}return Object.defineProperty(t.prototype,"local",{get:function(){return this.nt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.g},set:function(t){this.g!==t&&(this.begin(),this.g=t,this.end())},enumerable:!1,configurable:!0}),t.prototype.onParentChange=function(t,n){this.g=n,this.begin(),this.g=t,this.end()},Object.defineProperty(t.prototype,"blinker",{get:function(){var t=this.it;return null==t&&(t=this.newBlinker(),this.it=t),t},enumerable:!1,configurable:!0}),t.prototype.newBlinker=function(){return new pt(this)},Object.defineProperty(t.prototype,"ticker",{get:function(){var t=this.rt;return null==t&&(t=this.newTicker(),this.rt=t),t},enumerable:!1,configurable:!0}),t.prototype.newTicker=function(){return new Et(this)},t.prototype.is=function(t,n){var i=this.nt.get(t);return void 0!==i&&(void 0===n||n===i)},t.prototype.in=function(t,n){return this.is(t,n)||this.under(t,n)},t.prototype.on=function(t,n){var i=this.g;return null!=i&&i.is(t,n)},t.prototype.under=function(t,n){var i=this.g;return null!=i&&i.in(t,n)},t.prototype.lock=function(t){return this},t.prototype.unlock=function(){return this},t.prototype.begin=function(){return this},t.prototype.end=function(){return this},t.prototype.checkAdded=function(t,n){var i=this.nt.get(t);return void 0===i||i!==n},t.prototype.add=function(t,n){return void 0===n&&(n=null),this.checkAdded(t,n)&&(this.begin(),this.nt.set(t,n),this.end()),this},t.prototype.checkAddedsString=function(t){for(var n=this.nt,i=0,r=t.length;i<r;++i){var e=n.get(t[i]);if(void 0===e||null!==e)return!0}return!1},t.prototype.checkAddedsObject=function(t){for(var n=this.nt,i=0,r=t.length;i<r;++i){var e=t[i],u=n.get(e.state);if(void 0===u||u!==e.value)return!0}return!1},t.prototype.addAll=function(t){if(Tt(t))return this.addAllString(arguments);if(Mt(t)){if(0<t.length){var n=t[0];return Tt(n)?this.addAllString(t):this.addAllObject(t)}return this}return this.addAllObject(arguments)},t.prototype.addAllString=function(t){if(this.checkAddedsString(t)){this.begin();for(var n=this.nt,i=0,r=t.length;i<r;++i)n.set(t[i],null);this.end()}return this},t.prototype.addAllObject=function(t){if(this.checkAddedsObject(t)){this.begin();for(var n=this.nt,i=0,r=t.length;i<r;++i){var e=t[i];n.set(e.state,e.value)}this.end()}return this},t.prototype.checkRemoved=function(t){return this.nt.has(t)},t.prototype.remove=function(t){return this.checkRemoved(t)&&(this.begin(),this.nt.delete(t),this.end()),this},t.prototype.checkRemovedsString=function(t){for(var n=this.nt,i=0,r=t.length;i<r;++i)if(n.has(t[i]))return!0;return!1},t.prototype.checkRemovedsObject=function(t){for(var n=this.nt,i=0,r=t.length;i<r;++i)if(n.has(t[i].state))return!0;return!1},t.prototype.removeAll=function(t){if(St(t))return this.removeAllMatcher(t);if(Tt(t))return this.removeAllString(arguments);if(Mt(t)){if(0<t.length){var n=t[0];return Tt(n)?this.removeAllString(t):this.removeAllObject(t)}return this}return this.removeAllObject(arguments)},t.prototype.removeAllMatcher=function(t){var n=this,i=!1,r=this.nt;return r.forEach((function(e,u){t(u)&&(i||(i=!0,n.begin()),r.delete(u))})),i&&this.end(),this},t.prototype.removeAllString=function(t){if(this.checkRemovedsString(t)){this.begin();for(var n=this.nt,i=0,r=t.length;i<r;++i)n.delete(t[i]);this.end()}return this},t.prototype.removeAllObject=function(t){if(this.checkRemovedsObject(t)){this.begin();for(var n=this.nt,i=0,r=t.length;i<r;++i)n.delete(t[i].state);this.end()}return this},t.prototype.set=function(t,n,i){if(!0===n)null!=t&&this.add(t);else if(!1===n)null!=t&&this.remove(t);else{if(null!=n&&!jt(n))return this.doSet(t,null,n);if(!0===i)null!=t&&this.add(t,n);else{if(!1!==i)return this.doSet(t,n,i);null!=t&&this.remove(t)}}return this},t.prototype.doSet=function(t,n,i){return null!=t?null!=i?(this.checkAdded(t,n)||this.checkRemoved(i))&&(this.begin(),this.nt.set(t,n).delete(i),this.end()):this.add(t,n):null!=i&&this.remove(i),this},t.prototype.setAll=function(t,n){if(!0===n)null!=t&&this.addAll(t);else if(!1===n)null!=t&&this.removeAll(t);else if(null!=t&&0<t.length){if(null!=n&&0<n.length){var i=t[0];return Tt(i)?this.setAllString(t,n):this.setAllObject(t,n)}this.addAll(t)}else null!=n&&this.removeAll(n);return this},t.prototype.setAllString=function(t,n){if(this.checkAddedsString(t)||this.checkRemovedsString(n)){this.begin();for(var i=this.nt,r=0,e=t.length;r<e;++r)i.set(t[r],null);for(r=0,e=n.length;r<e;++r)i.delete(n[r]);this.end()}return this},t.prototype.setAllObject=function(t,n){if(this.checkAddedsObject(t)||this.checkRemovedsString(n)){this.begin();for(var i=this.nt,r=0,e=t.length;r<e;++r){var u=t[r];i.set(u.state,u.value)}for(r=0,e=n.length;r<e;++r)i.delete(n[r]);this.end()}return this},t.prototype.clear=function(){var t=this.nt;return 0<t.size&&(this.begin(),t.clear(),this.end()),this},t.prototype.valueOf=function(t,n){var i=this.nt.get(t);if(void 0!==i)return i;var r=this.g;return null!=r?r.valueOf(t,n):n},t.prototype.each=function(t){return this.nt.forEach((function(n,i){t(i,n)})),this},t.prototype.size=function(){return this.nt.size},t.prototype.copy=function(n){if(n instanceof t){this.begin();var i=this.nt;i.clear(),n.local.forEach((function(t,n){i.set(n,t)})),this.g=n.parent,this.end()}return this},Object.defineProperty(t.prototype,"isHovered",{get:function(){return this.is(gt.HOVERED)},set:function(t){this.set(gt.HOVERED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inHovered",{get:function(){return this.in(gt.HOVERED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHovered",{get:function(){return this.on(gt.HOVERED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underHovered",{get:function(){return this.under(gt.HOVERED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isActive",{get:function(){return this.is(gt.ACTIVE)},set:function(t){this.set(gt.ACTIVE,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inActive",{get:function(){return this.in(gt.ACTIVE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onActive",{get:function(){return this.on(gt.ACTIVE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underActive",{get:function(){return this.under(gt.ACTIVE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPressed",{get:function(){return this.is(gt.PRESSED)},set:function(t){this.set(gt.PRESSED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inPressed",{get:function(){return this.in(gt.PRESSED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onPressed",{get:function(){return this.on(gt.PRESSED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underPressed",{get:function(){return this.under(gt.PRESSED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this.is(gt.READ_ONLY)},set:function(t){this.set(gt.READ_ONLY,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inReadOnly",{get:function(){return this.in(gt.READ_ONLY)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onReadOnly",{get:function(){return this.on(gt.READ_ONLY)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underReadOnly",{get:function(){return this.under(gt.READ_ONLY)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return!this.is(gt.DISABLED)},set:function(t){this.set(gt.DISABLED,!t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inEnabled",{get:function(){return!this.in(gt.DISABLED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onEnabled",{get:function(){return!this.on(gt.DISABLED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underEnabled",{get:function(){return!this.under(gt.DISABLED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDisabled",{get:function(){return this.is(gt.DISABLED)},set:function(t){this.set(gt.DISABLED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inDisabled",{get:function(){return this.in(gt.DISABLED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onDisabled",{get:function(){return this.on(gt.DISABLED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underDisabled",{get:function(){return this.under(gt.DISABLED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isActionable",{get:function(){return!this.in(gt.DISABLED)&&!this.in(gt.READ_ONLY)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isGesturing",{get:function(){return this.is(gt.GESTURING)},set:function(t){this.set(gt.GESTURING,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inGesturing",{get:function(){return this.in(gt.GESTURING)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onGesturing",{get:function(){return this.on(gt.GESTURING)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underGesturing",{get:function(){return this.under(gt.GESTURING)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFocused",{get:function(){return this.is(gt.FOCUSED)},set:function(t){this.set(gt.FOCUSED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inFocused",{get:function(){return this.in(gt.FOCUSED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onFocused",{get:function(){return this.on(gt.FOCUSED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underFocused",{get:function(){return this.under(gt.FOCUSED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFocusRoot",{get:function(){return this.is(gt.FOCUS_ROOT)},set:function(t){this.set(gt.FOCUS_ROOT,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inFocusRoot",{get:function(){return this.in(gt.FOCUS_ROOT)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onFocusRoot",{get:function(){return this.on(gt.FOCUS_ROOT)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underFocusRoot",{get:function(){return this.under(gt.FOCUS_ROOT)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFocusReverse",{get:function(){return this.is(gt.FOCUS_REVERSE)},set:function(t){this.set(gt.FOCUS_REVERSE,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inFocusReverse",{get:function(){return this.in(gt.FOCUS_REVERSE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onFocusReverse",{get:function(){return this.on(gt.FOCUS_REVERSE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underFocusReverse",{get:function(){return this.under(gt.FOCUS_REVERSE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFocusable",{get:function(){return!this.is(gt.UNFOCUSABLE)},set:function(t){this.set(gt.UNFOCUSABLE,!t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inFocusable",{get:function(){return!this.in(gt.UNFOCUSABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onFocusable",{get:function(){return!this.on(gt.UNFOCUSABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underFocusable",{get:function(){return!this.under(gt.UNFOCUSABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUnfocusable",{get:function(){return this.is(gt.UNFOCUSABLE)},set:function(t){this.set(gt.UNFOCUSABLE,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inUnfocusable",{get:function(){return this.in(gt.UNFOCUSABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onUnfocusable",{get:function(){return this.on(gt.UNFOCUSABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underUnfocusable",{get:function(){return this.under(gt.UNFOCUSABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInvalid",{get:function(){return this.is(gt.INVALID)},set:function(t){this.set(gt.INVALID,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inInvalid",{get:function(){return this.in(gt.INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onInvalid",{get:function(){return this.on(gt.INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underInvalid",{get:function(){return this.on(gt.INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isProcessing",{get:function(){return this.is(gt.PROCESSING)},set:function(t){this.set(gt.PROCESSING,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inProcessing",{get:function(){return this.in(gt.PROCESSING)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onProcessing",{get:function(){return this.on(gt.PROCESSING)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underProcessing",{get:function(){return this.under(gt.PROCESSING)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSucceeded",{get:function(){return this.is(gt.SUCCEEDED)},set:function(t){this.set(gt.SUCCEEDED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inSucceeded",{get:function(){return this.in(gt.SUCCEEDED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSucceeded",{get:function(){return this.on(gt.SUCCEEDED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underSucceeded",{get:function(){return this.under(gt.SUCCEEDED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFailed",{get:function(){return this.is(gt.FAILED)},set:function(t){this.set(gt.FAILED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inFailed",{get:function(){return this.in(gt.FAILED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onFailed",{get:function(){return this.on(gt.FAILED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underFailed",{get:function(){return this.under(gt.FAILED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isWarned",{get:function(){return this.is(gt.WARNED)},set:function(t){this.set(gt.WARNED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inWarned",{get:function(){return this.in(gt.WARNED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onWarned",{get:function(){return this.on(gt.WARNED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underWarned",{get:function(){return this.on(gt.WARNED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isChanged",{get:function(){return this.is(gt.CHANGED)},set:function(t){this.set(gt.CHANGED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inChanged",{get:function(){return this.in(gt.CHANGED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onChanged",{get:function(){return this.on(gt.CHANGED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underChanged",{get:function(){return this.on(gt.CHANGED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAlternated",{get:function(){return this.is(gt.ALTERNATED)},set:function(t){this.set(gt.ALTERNATED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inAlternated",{get:function(){return this.in(gt.ALTERNATED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onAlternated",{get:function(){return this.on(gt.ALTERNATED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underAlternated",{get:function(){return this.on(gt.ALTERNATED)},enumerable:!1,configurable:!0}),t.prototype.toObject=function(){var t=[];return this.nt.forEach((function(n,i){t.push(i)})),{local:t}},t.prototype.toString=function(){return JSON.stringify(this.toObject())},t}(),Ct=function(t){function n(n){var i=t.call(this)||this;return i.et=n,i.ut=0,i.st=!1,i.ht=!0,i}return G(n,t),n.prototype.lock=function(t){return this.ut+=1,!1===t&&(this.ht=!1),this},n.prototype.unlock=function(){return this.ut-=1,this.end()},Object.defineProperty(n.prototype,"saved",{get:function(){var t=this.ot;return null==t&&(t=new It,this.ot=t),t},enumerable:!1,configurable:!0}),n.prototype.begin=function(){return this.ht&&!this.st&&(this.st=!0,this.saved.copy(this)),this},n.prototype.end=function(){return this.ut<=0&&(this.ht=!0,this.st&&(this.st=!1,this.onChange(this,this.saved))),this},n.prototype.onChange=function(t,n){this.et(t,n)},n}(It),Nt={CLICKED:"CLICKED",DBL_CLICKED:"DBL_CLICKED",DOWN:"DOWN",UP:"UP",UP_OUTSIDE:"UP_OUTSIDE",RIGHT_CLICKED:"RIGHT_CLICKED",RIGHT_DOWN:"RIGHT_DOWN",RIGHT_UP:"RIGHT_UP",RIGHT_UP_OUTSIDE:"RIGHT_UP_OUTSIDE",RIGHT_PRESSED:"RIGHT_PRESSED",ACTIVATED:"ACTIVATED",DEACTIVATED:"DEACTIVATED"},At=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.onChange=function(n,i){n.isActive?i.isActive||this.nt.set(Nt.ACTIVATED,null).delete(Nt.DEACTIVATED):i.isActive&&this.nt.set(Nt.DEACTIVATED,null).delete(Nt.ACTIVATED),t.prototype.onChange.call(this,n,i)},Object.defineProperty(n.prototype,"isClicked",{get:function(){return this.is(Nt.CLICKED)},set:function(t){this.set(Nt.CLICKED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inClicked",{get:function(){return this.in(Nt.CLICKED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onClicked",{get:function(){return this.on(Nt.CLICKED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"underClicked",{get:function(){return this.under(Nt.CLICKED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDblClicked",{get:function(){return this.is(Nt.DBL_CLICKED)},set:function(t){this.set(Nt.DBL_CLICKED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inDblClicked",{get:function(){return this.in(Nt.DBL_CLICKED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onDblClicked",{get:function(){return this.on(Nt.DBL_CLICKED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"underDblClicked",{get:function(){return this.under(Nt.DBL_CLICKED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDown",{get:function(){return this.is(Nt.DOWN)},set:function(t){this.set(Nt.DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inDown",{get:function(){return this.in(Nt.DOWN)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onDown",{get:function(){return this.on(Nt.DOWN)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"underDown",{get:function(){return this.under(Nt.DOWN)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isUp",{get:function(){return this.is(Nt.UP)},set:function(t){this.set(Nt.UP,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inUp",{get:function(){return this.in(Nt.UP)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onUp",{get:function(){return this.on(Nt.UP)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"underUp",{get:function(){return this.under(Nt.UP)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isUpOutside",{get:function(){return this.is(Nt.UP_OUTSIDE)},set:function(t){this.set(Nt.UP_OUTSIDE,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inUpOutside",{get:function(){return this.in(Nt.UP_OUTSIDE)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onUpOutside",{get:function(){return this.on(Nt.UP_OUTSIDE)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"underUpOutside",{get:function(){return this.under(Nt.UP_OUTSIDE)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRightClicked",{get:function(){return this.is(Nt.RIGHT_CLICKED)},set:function(t){this.set(Nt.RIGHT_CLICKED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inRightClicked",{get:function(){return this.in(Nt.RIGHT_CLICKED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onRightClicked",{get:function(){return this.on(Nt.RIGHT_CLICKED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"underRightClicked",{get:function(){return this.under(Nt.RIGHT_CLICKED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRightDown",{get:function(){return this.is(Nt.RIGHT_DOWN)},set:function(t){this.set(Nt.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inRightDown",{get:function(){return this.in(Nt.RIGHT_DOWN)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onRightDown",{get:function(){return this.on(Nt.RIGHT_DOWN)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"underRightDown",{get:function(){return this.under(Nt.RIGHT_DOWN)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRightUp",{get:function(){return this.is(Nt.RIGHT_UP)},set:function(t){this.set(Nt.RIGHT_UP,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inRightUp",{get:function(){return this.in(Nt.RIGHT_UP)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onRightUp",{get:function(){return this.on(Nt.RIGHT_UP)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"underRightUp",{get:function(){return this.under(Nt.RIGHT_UP)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRightUpOutside",{get:function(){return this.is(Nt.RIGHT_UP_OUTSIDE)},set:function(t){this.set(Nt.RIGHT_UP_OUTSIDE,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inRightUpOutside",{get:function(){return this.in(Nt.RIGHT_UP_OUTSIDE)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onRightUpOutside",{get:function(){return this.on(Nt.RIGHT_UP_OUTSIDE)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"underRightUpOutside",{get:function(){return this.under(Nt.RIGHT_UP_OUTSIDE)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRightPressed",{get:function(){return this.is(Nt.RIGHT_PRESSED)},set:function(t){this.set(Nt.RIGHT_PRESSED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inRightPressed",{get:function(){return this.in(Nt.RIGHT_PRESSED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onRightPressed",{get:function(){return this.on(Nt.RIGHT_PRESSED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"underRightPressed",{get:function(){return this.under(Nt.RIGHT_PRESSED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isActivated",{get:function(){return this.is(Nt.ACTIVATED)},set:function(t){this.set(Nt.ACTIVATED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inActivated",{get:function(){return this.in(Nt.ACTIVATED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onActivated",{get:function(){return this.on(Nt.ACTIVATED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"underActivated",{get:function(){return this.under(Nt.ACTIVATED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDeactivated",{get:function(){return this.is(Nt.DEACTIVATED)},set:function(t){this.set(Nt.DEACTIVATED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inDeactivated",{get:function(){return this.in(Nt.DEACTIVATED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onDeactivated",{get:function(){return this.on(Nt.DEACTIVATED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"underDeactivated",{get:function(){return this.under(Nt.DEACTIVATED)},enumerable:!1,configurable:!0}),n}(Ct),Rt=function(n){function i(i){var r=n.call(this)||this;return r.internalTransform=new t.Matrix,r.g=i,r}return G(i,n),i.prototype.onChange=function(){n.prototype.onChange.call(this),this.g.onTransformChange()},i.prototype.updateSkew=function(){n.prototype.updateSkew.call(this),this.g.onTransformChange()},i.prototype.getLocalIdCurrent=function(){return this._currentLocalID},i.prototype.getLocalId=function(){return this._localID},i.prototype.getParentId=function(){return this._parentID},i.prototype.getWorldId=function(){return this._worldID},i.prototype.updateTransform=function(t){var r=this._currentLocalID,e=this._worldID;n.prototype.updateTransform.call(this,t);var u=this._currentLocalID,s=this._worldID;if(r!==u){var h=this.localTransform,o=this.internalTransform;h.copyTo(o),t instanceof i&&o.prepend(t.internalTransform)}else e!==s&&(h=this.localTransform,o=this.internalTransform,t instanceof i&&(h.copyTo(o).prepend(t.internalTransform),this._currentLocalID+=1,this._localID=this._currentLocalID))},i}(t.Transform),yt=function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0,this.strokeWidth=0,this.strokeScale=1,this.strokeAlign=0}return t.prototype.set=function(t,n,i,r,e,u,s){return this.x=t,this.y=n,this.width=i,this.height=r,this.strokeWidth=e,this.strokeScale=u,this.strokeAlign=s,this},t}(),kt=function(t,n,i,r){return-i<=t&&t<=+i&&-r<=n&&n<=+r},Lt={NONE:0,ID:1,POSITION:2,WIDTH:4,HEIGHT:8,ROTATION:16,SKEW:32,ALIGN:0,REPLACING:64,GROUPING:128,UNGROUPING:256,FILL:512,STROKE:1024,STROKE_SIDE:2048,BORDER_RADIUS:4096,TEXT:8192,TEXTURE:16384,TAG:32768,DATA:32768,DATA_MAPPING:1048576,ACTION:65536,CURSOR:131072,ORDER_IN_LAYER:262144,CHILDREN:524288,LINE:2097152,LINE_TAIL:4194304,LINE_HEAD:8388608,COORDINATE:62,SHAPE:14681792,LAYER:262144,PRIMITIVE:15722239,GROUP:15722495,EMBEDDED:1417471,EMBEDDED_ACCEPTOR_EDGE:517759,CONNECTOR:15722177,ALL:16777215},xt=function(){function t(){this.added=Lt.NONE,this.removed=Lt.NONE,this.locked=Lt.NONE}return t.prototype.add=function(t){return this.removed&=~t,this.added|=t,this},t.prototype.remove=function(t){return this.added&=~t,this.removed|=t,this},t.prototype.lock=function(t){return this.locked|=t,this},t.prototype.unlock=function(t){return this.locked&=~t,this},t.prototype.clear=function(){return this.added=Lt.NONE,this.removed=Lt.NONE,this.locked=Lt.NONE,this},t.prototype.set=function(t,n,i){return null!=t&&(this.added=t),null!=n&&(this.removed=n),null!=i&&(this.locked=i),this},t.prototype.copy=function(t){return this.added=t.added,this.removed=t.removed,this.locked=t.locked,this},t}(),Bt=function(){function t(){this.ct=0,this.ft=0}return t.prototype.lock=function(){return this.ct+=1,1===this.ct&&(this.ft=0,!0)},t.prototype.unlock=function(){return this.ct-=1,this.ct<=0&&0!==this.ft},t.prototype.isLocked=function(t){return 0<this.ct&&(this.ft|=t?3:1,!0)},t.prototype.isHigh=function(){return 1<this.ft},t}(),_t={TRANSFORM_CHILD:1,TRANSFORM_THIS:2,TRANSFORM_PARENT:4,TRANSFORM:7,UPLOADED:8,TRANSFORM_AND_UPLOADED:15,CONNECTOR:16,ALL:31},Pt=function(n){function i(t){var i=n.call(this)||this;return i.id="",i.uuid=0,i.type=t,i.transform=i.newTransform(),i.action=new vt,i.lt=!0,i.vt=new Bt,i.bt=new Bt,i.gt=new Bt,i.wt=new Bt,i.Ot=-1,i.Dt=-1,i.Et=-1,i.interactive=!1,i.parent=null,i.children=[],i.selected=!1,i.index=0,i.reference=0,i}return G(i,n),i.prototype.newTransform=function(){return new Rt(this)},i.prototype.onSizeChange=function(){this.Ot=-1,this.Dt=-1,this.Et=-1,this.vt.isLocked()||this.callChildTransformChange();var t=this.Mt;null!=t&&t.onSizeChange(),this.updateUploaded();var n=this.St;null!=n&&n.fit(!0);var i=this.runtime;null!=i&&i.onResize(this)},i.prototype.onTransformChange=function(){this.vt.isLocked()||this.callChildTransformChange(),this.bt.isLocked()||this.onThisTransformChange(),this.gt.isLocked()||this.callParentTransformChange()},i.prototype.callChildTransformChange=function(){var t=this.parent;null!=t&&t.onChildTransformChange()},i.prototype.onThisTransformChange=function(){this.updateUploaded();var t=this.St;null!=t&&t.fit(!0)},i.prototype.callParentTransformChange=function(){for(var t=this.children,n=0,i=t.length;n<i;++n)t[n].onParentTransformChange()},i.prototype.onParentTransformChange=function(){this.bt.isLocked()||this.onThisTransformChange(),this.gt.isLocked()||this.callParentTransformChange()},i.prototype.lock=function(t){return t&_t.UPLOADED&&this.wt.lock(),t&_t.TRANSFORM_PARENT&&this.gt.lock(),t&_t.TRANSFORM_THIS&&this.bt.lock(),t&_t.TRANSFORM_CHILD&&this.vt.lock(),this},i.prototype.unlock=function(t,n){if(t&_t.TRANSFORM_CHILD&&this.vt.unlock()&&n){var i=this.parent;null!=i&&i.onChildTransformChange()}if(t&_t.TRANSFORM_THIS&&this.bt.unlock()&&n&&this.onThisTransformChange(),t&_t.TRANSFORM_PARENT&&this.gt.unlock()&&n)for(var r=this.children,e=0,u=r.length;e<u;++e)r[e].onParentTransformChange();if(t&_t.UPLOADED){var s=this.wt;s.unlock()&&n&&this.updateUploaded(s.isHigh())}return this},i.prototype.onChildTransformChange=function(){},i.prototype.updateUploaded=function(t){if(!this.wt.isLocked(t)){var n=this.uploaded;if(null!=n&&n.update(this),!0===t)for(var i=this.children,r=0,e=i.length;r<e;++r)i[r].updateUploaded(!0)}},Object.defineProperty(i.prototype,"points",{get:function(){return this.Mt},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"root",{get:function(){for(var t=this;t.parent instanceof i;)t=t.parent;return t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"connector",{get:function(){var t=this.St;return null==t&&(t=new bt(this),this.St=t),t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){if(this.lt){var t=this.parent;return!(t instanceof i)||t.visible}return!1},set:function(t){this.lt!==t&&(this.lt=t,this.updateUploaded(!0))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"worldVisible",{get:function(){if(this.lt){var t=this.parent;return!t||t.worldVisible}return!1},enumerable:!1,configurable:!0}),i.prototype.toDirty=function(){var t=this.parent;null!=t&&t.toDirty()},i.prototype.attach=function(t,n){this.detach(),this.parent=t;var i=t.children;return null!=n&&0<=n&&n<i.length?i.splice(n,0,this):i.push(this),t.onChildTransformChange(),t.toDirty(),this.onAttach(),this},i.prototype.onAttach=function(){this.uploaded=void 0;var t=this.St;t&&(t.attach(),t.fit(!0));for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].onAttach()},i.prototype.detach=function(t){var n=this.parent;if(n){this.parent=null;var i=n.children,r=i.indexOf(this);0<=r&&(i.splice(r,1),n.onChildTransformChange(),n.toDirty(),this.onDetach(t))}return this},i.prototype.onDetach=function(t){this.uploaded=void 0;var n=this.St;n&&n.detach(t);for(var i=this.children,r=0,e=i.length;r<e;++r)i[r].onDetach(t)},i.prototype.updateTransform=function(){var n=this.parent;n?(n.parent&&n.updateTransform(),this.transform.updateTransform(n.transform)):this.transform.updateTransform(t.Transform.IDENTITY)},i.prototype.serializeChildren=function(t){for(var n=this.children,i=[],r=0,e=n.length;r<e;++r){var u=n[r];i.push(u.serialize(t))}return i},i.prototype.serializeState=function(t){var n=this.state;return(this.interactive?1:0)|(n.isFocusable?0:2)|(n.isActive?4:0)},i.prototype.serialize=function(t){var n=this.transform,i=n.position,r=n.pivot,e=this.size,u=this.shortcut,s=null!=u?t.addResource(u):-1,h=this.cursor,o=null!=h?t.addResource(h):-1,a=this.title,c=null!=a?t.addResource(a):-1,f=Lt.NONE,l=Lt.NONE,v=Lt.NONE,b=this.jt;return null!=b&&(f=b.added,l=b.removed,v=b.locked),[this.type,t.addResource(this.id),i.x,i.y,e.x,e.y,n.rotation,n.skew.x,this.fill.serialize(t),this.stroke.serialize(t),o,this.text.serialize(t),this.data.serialize(t),this.radius,this.corner,-1,-1,this.action.serialize(t),this.serializeImage(t),this.serializeGradient(t),this.serializeChildren(t),r.x,r.y,this.serializeState(t),s,c,this.uuid,f,l,v]},i.prototype.addUuid=function(t){this.uuid=t.addUuid(this.uuid);for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].addUuid(t)},i.prototype.updateUuid=function(t){this.uuid=t.updateUuid(this.uuid);for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].updateUuid(t)},i.prototype.getShapeScale=function(){var t=this.root.parent;return null!=t&&null!=t.getShapeScale?t.getShapeScale():1},i.prototype.getStrokeWidthScale=function(t){return t&s.NON_EXPANDING_WIDTH?t&s.NON_SHRINKING_WIDTH?this.getShapeScale():Math.min(1,this.getShapeScale()):t&s.NON_SHRINKING_WIDTH?Math.max(1,this.getShapeScale()):1},i.prototype.getHitTestSize=function(t){var n=this.size;return t.width=.5*n.x,t.height=.5*n.y,t},i.prototype.toHitTestData=function(t,n){var r,e=this.getHitTestSize(null!==(r=i.WORK_HIT_TEST_DATA)&&void 0!==r?r:i.WORK_HIT_TEST_DATA=new yt),u=e.width,s=e.height,h=this.transform.pivot,o=t-h.x,a=n-h.y,c=this.stroke,f=c.enable?c.width:0,l=this.getStrokeWidthScale(c.style),v=c.align,b=f*l*v;return e.set(0<=u?+o:-o,0<=s?+a:-a,Math.abs(u)+b,Math.abs(s)+b,f,l,v)},i.prototype.contains=function(t,n){var i=this.toHitTestData(t,n);return this.containsAbs(i.x,i.y,i.width,i.height,i.strokeWidth,i.strokeScale,i.strokeAlign)?this:this.containsText(t,n)||this.containsChildren(t,n)},i.prototype.containsText=function(t,n){var i=this.text;if(null!=i.atlas){var r=i.world;if(null!=r){var e=this.transform.internalTransform,u=e.a*t+e.c*n+e.tx-r[0],s=e.b*t+e.d*n+e.ty-r[1],h=r[2]*u+r[3]*s,o=r[4]*u+r[5]*s,a=r[6],c=r[7];if(0<=h&&h<=a&&0<=o&&o<=c)return this}}return null},i.prototype.containsChildren=function(t,n){for(var i=this.children,r=i.length-1;0<=r;--r){var e=i[r];e.updateTransform();var u=e.transform.localTransform,s=u.a,h=u.b,o=u.c,a=u.d,c=u.tx,f=u.ty,l=1/(s*a-o*h),v=(a*t-o*n+f*o-c*a)*l,b=(s*n-h*t-f*s+c*h)*l,d=e.contains(v,b);if(null!=d)return d}return null},i.prototype.containsBBox=function(t,n){var i=this.toHitTestData(t,n);return this.containsAbsBBox(i.x,i.y,i.width,i.height)},i.prototype.containsAbs=function(t,n,i,r,e,u,s){return this.containsAbsBBox(t,n,i,r)},i.prototype.containsAbsBBox=function(t,n,i,r){return kt(t,n,i,r)},i.prototype.select=function(t){return!1},i.prototype.toGlobal=function(t,n,i){return!0!==i&&this.updateTransform(),n.copyFrom(t),this.transform.worldTransform.apply(n,n),n},i.prototype.toLocal=function(n,i,r,e){return!0!==e&&this.updateTransform(),void 0===r&&(r=new t.Point),r.copyFrom(n),this.transform.worldTransform.applyInverse(r,r),r},i.prototype.getBounds=function(n,i){!0!==n&&this.updateTransform();var r=this._bounds||new t.Rectangle;this._bounds=r;var e=this.transform.getWorldId();return e!==this.Ot&&(this.Ot=e,this.Tt(this.transform.worldTransform,r)),null!=i||(i=new t.Rectangle),i.copyFrom(r),i},i.prototype.getBoundsInternal=function(n,i){!0!==n&&this.updateTransform();var r=this.It||new t.Rectangle;this.It=r;var e=this.transform.getLocalIdCurrent();return e!==this.Dt&&(this.Dt=e,this.Tt(this.transform.internalTransform,r)),null!=i||(i=new t.Rectangle),i.copyFrom(r),i},i.prototype.getBoundsLocal=function(n,i){!0!==n&&this.updateTransform();var r=this.Ct||new t.Rectangle;this.Ct=r;var e=this.transform.getLocalIdCurrent();return e!==this.Et&&(this.Et=e,this.Tt(this.transform.localTransform,r)),null!=i||(i=new t.Rectangle),i.copyFrom(r),i},i.prototype.getBoundsSize=function(){return this.size},i.prototype.Tt=function(t,n){var i=this.transform.pivot,r=i.x,e=i.y,u=this.getBoundsSize(),s=.5*u.x,h=.5*u.y,o=t.a,a=t.b,c=t.c,f=t.d,l=-s+r,v=-h+e,b=o*l+c*v,d=a*l+f*v,g=o*(l=+s+r)+c*(v=-h+e),m=a*l+f*v,w=o*(l=-s+r)+c*(v=+h+e),O=a*l+f*v,p=o*(l=+s+r)+c*(v=+h+e),D=a*l+f*v,E=Math.min(b,g,w,p),M=Math.min(d,m,O,D),S=Math.max(b,g,w,p),j=Math.max(d,m,O,D);return n.x=E+t.tx,n.y=M+t.ty,n.width=S-E,n.height=j-M,n},i.prototype.destroy=function(){for(var t=this.children,n=t.length-1;0<=n;--n)t[n].destroy();t.length=0},i.prototype.onStateChange=function(t,n){var r=this.runtime;null!=r&&r.onStateChange(this,t,n);for(var e=this.children,u=0,s=e.length;u<s;++u){var h=e[u];h instanceof i&&h.state.onParentChange(t,n)}},Object.defineProperty(i.prototype,"state",{get:function(){var t=this,n=this.Nt;return null==n&&(n=new At((function(n,i){t.onStateChange(n,i)})),this.Nt=n),n},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"capability",{get:function(){var t=this.jt;return null==t&&(t=new xt,this.jt=t),t},enumerable:!1,configurable:!0}),i.prototype.getCapability=function(){return this.jt},i.prototype.focus=function(){return this.setFocused(!0),this},i.prototype.blur=function(){return this.setFocused(!1),this},i.prototype.setFocused=function(t){if(this.state.isFocused!==t){var n=lt.getLayer(this);n&&n.getFocusController().set(this,t)}},i.prototype.onKeyDown=function(t){var n=this.runtime;return!!n&&n.onKeyDown(this,t)},i.prototype.onKeyUp=function(t){var n=this.runtime;return!!n&&n.onKeyUp(this,t)},i.prototype.update=function(t){var n=this.runtime;n&&n.update(this,t)},i.prototype.onRender=function(t,n){var i=this.runtime;i&&i.onRender(this,t,n)},i.prototype.copy=function(t,n){if(void 0===n&&(n=dt.ALL),this.lock(_t.ALL),this.id=t.id,this.uuid=t.uuid,this.visible=t.visible,n&dt.TRANSFORM){var r=this.transform,e=t.transform;r.position.copyFrom(e.position),r.rotation=e.rotation,r.skew.copyFrom(e.skew),r.pivot.copyFrom(e.pivot),r.scale.copyFrom(e.scale)}if(n&dt.SIZE&&this.size.copyFrom(t.size),n&dt.STYLE&&(this.fill.copy(t.fill),this.stroke.copy(t.stroke),this.text.copy(t.text),this.radius=t.radius,this.corner=t.corner),n&dt.DATA&&this.data.copy(t.data),n&dt.IMAGE&&(this.image=t.image),n&dt.ACTION&&(this.action.clearAndAddAll(t.action.values),this.interactive=t.interactive,this.cursor=t.cursor,this.shortcut=t.shortcut),n&dt.POINTS){var u=t.points;if(null!=u){var s=this.points;null!=s&&s.copy(u)}}if(n&dt.STATE&&this.state.lock(!1).copy(t.state).unlock(),n&dt.CONNECTOR)if(t instanceof i){var h=t.St;h?this.connector.copy(h):(o=this.St)&&o.clear()}else{var o;(o=this.St)&&o.clear()}if(n&dt.CAPABILITY){var a=t.getCapability();if(null!=a)this.capability.copy(a);else{var c=this.jt;null!=c&&c.clear()}}return this.unlock(_t.ALL,!0),this},i}(t.utils.EventEmitter),Ut=function(){function t(t,n,i,r,e,u,s,h){this.g=t,this.O=n,this.p=i,this.S=r,this.At=e,this.Rt=u,this.yt=s,this.L=h}return Object.defineProperty(t.prototype,"enable",{get:function(){return this.O},set:function(t){this.O!==t&&(this.O=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.p},set:function(t){this.p!==t&&(this.p=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.S},set:function(t){this.S!==t&&(this.S=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.At},set:function(t){this.At!==t&&(this.At=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this.Rt},set:function(t){this.Rt!==t&&(this.Rt=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"side",{get:function(){return this.yt},set:function(t){this.yt!==t&&(this.yt=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this.L},set:function(t){this.L!==t&&(this.L=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){t&&this.set(t.enable,t.color,t.alpha,t.width,t.align,t.side,t.style)},t.prototype.set=function(t,n,i,r,e,u,s){var h=!1;void 0!==t&&this.O!==t&&(this.O=t,h=!0),void 0!==n&&this.p!==n&&(this.p=n,h=!0),void 0!==i&&this.S!==i&&(this.S=i,h=!0),void 0!==r&&this.At!==r&&(this.At=r,h=!0),void 0!==e&&this.Rt!==e&&(this.Rt=e,h=!0),void 0!==u&&this.yt!==u&&(this.yt=u,h=!0),void 0!==s&&this.L!==s&&(this.L=s,h=!0),h&&this.g.updateUploaded()},t.prototype.clone=function(){return new t(this.g,this.O,this.p,this.S,this.At,this.Rt,this.yt,this.L)},t.prototype.toObject=function(){return{enable:this.O,color:this.p,alpha:this.S,width:this.At,align:this.Rt,side:this.yt,style:this.L}},t.prototype.serialize=function(t){var n=this.O?1:0,i="[".concat(n,",").concat(this.p,",").concat(this.S,",").concat(this.At,",").concat(this.Rt,",").concat(this.yt,",").concat(this.L,"]");return t.addResource(i)},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getStroke(t);if(null!=r)this.set(!!r[0],r[1],r[2],r[3],r[4],r[5],r[6]);else{var e=JSON.parse(i[t]);n.setStroke(t,e),this.set(!!e[0],e[1],e[2],e[3],e[4],e[5],e[6])}}},t}(),Ft={NONE:0,FROM:1,TO:2,FROM_TO:3},Gt=function(){function t(){this.kt=Ft.NONE,this.Lt=0,this.xt=1}return Object.defineProperty(t.prototype,"type",{get:function(){return this.kt},set:function(t){if(this.kt!==t){this.kt=t;var n=this.parent;null!=n&&(n.isChanged=!0)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"from",{get:function(){return this.Lt},set:function(t){if(this.Lt!==t){this.Lt=t;var n=this.parent;null!=n&&(n.isChanged=!0)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.xt},set:function(t){if(this.xt!==t){this.xt=t;var n=this.parent;null!=n&&(n.isChanged=!0)}},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){var i=!1;if(void 0!==t&&void 0!==n)if(null!==t&&null!==n){var r=this.kt|Ft.FROM|Ft.TO;this.kt===r&&this.Lt===t&&this.xt===n||(this.kt=r,this.Lt=t,this.xt=n,i=!0)}else null!==t?(r=(this.kt|Ft.FROM)&~Ft.TO,this.kt===r&&this.Lt===t||(this.kt=r,this.Lt=t,i=!0)):null!==n?(r=(this.kt|Ft.TO)&~Ft.FROM,this.kt===r&&this.Lt===t||(this.kt=r,this.xt=n,i=!0)):(r=this.kt&~(Ft.TO|Ft.FROM),this.kt!==r&&(this.kt=r,i=!0));else void 0!==t?null!==t?(r=this.kt|Ft.FROM,this.kt===r&&this.Lt===t||(this.kt=r,this.Lt=t,i=!0)):(r=this.kt&~Ft.FROM,this.kt!==r&&(this.kt=r,i=!0)):void 0!==n&&(null!==n?(r=this.kt|Ft.TO,this.kt===r&&this.xt===n||(this.kt=r,this.xt=n,i=!0)):(r=this.kt&~Ft.TO,this.kt!==r&&(this.kt=r,i=!0)));if(i){var e=this.parent;null!=e&&(e.isChanged=!0)}return i},t.prototype.normalize=function(t){var n=this.kt,i=this.Lt,r=this.xt;switch(n){case Ft.FROM_TO:return(t-i)/(r-i);case Ft.FROM:return t-i;case Ft.TO:return r-t;case Ft.NONE:default:return t}},t.prototype.isEquals=function(t){return this.kt===t.type&&this.Lt===t.from&&this.xt===t.to},t.prototype.copy=function(t){return this.Bt(t.type,t.from,t.to)},t.prototype.Bt=function(t,n,i){var r=!1;if(this.kt!==t&&(this.kt=t,r=!0),this.Lt!==n&&(this.Lt=n,r=!0),this.xt!==i&&(this.xt=i,r=!0),r){var e=this.parent;null!=e&&(e.isChanged=!0)}return this},t.prototype.toObject=function(){return{type:this.type,from:this.from,to:this.to}},t.prototype.serialize=function(t){var n="[".concat(this.kt,",").concat(this.Lt,",").concat(this.xt,"]");return t.addResource(n)},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getRange(t);if(null!=r)this.Bt(r[0],r[1],r[2]);else{var e=JSON.parse(i[t]);n.setRange(t,e),this.Bt(e[0],e[1],e[2])}}},t}(),Ht={ASCENDING:0,DESCENDING:1},zt={BOOLEAN:7,BOOLEAN_ARRAY:8,NUMBER:0,NUMBER_ARRAY:1,STRING:2,STRING_ARRAY:3,OBJECT:4,OBJECT_ARRAY:5,TICKER:6,EXTENSION:1e3},Vt={PRIVATE:0,PUBLIC:1,PROTECTED:2},Wt={UNKNOWN:-1,FOUND:0,NOT_FOUND:1,BAD_REQUEST:2,SERVER_ERROR:3,SERVICE_UNAVAILABLE:4,FORBIDDEN:5,NOT_DEFINED:6},Xt=function(t,n){return t-n},Kt=function(){function t(){this.id="",this.as="",this.type=zt.NUMBER,this.scope=Vt.PUBLIC,this.initial="",this.format="",this.range=new Gt,this.Pt=0,this.Ut=0,this.Nt=Wt.UNKNOWN,this.Ft=0,this.Gt=Ht.ASCENDING}return Object.defineProperty(t.prototype,"parent",{get:function(){return this.g},set:function(t){this.g!==t&&(this.g=t,this.range.parent=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.Pt},set:function(t){var n=this.formatter;null!=n&&(t=n(t));var i=this.Ft;if(i<=0){if(this.Pt!==t){this.Pt=t;var r=this.parent;null!=r&&(r.isChanged=!0)}}else{var e=this.R;null==e&&(e=[],this.R=e),this.Pt=t;var u=this.Gt;u===Ht.ASCENDING?e.push(t):e.unshift(t);var s=e.length-i;if(0<s)if(u===Ht.ASCENDING)for(var h=0;h<s;++h)e.shift();else e.length=i;var o=this.parent;null!=o&&(o.isChanged=!0)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nvalue",{get:function(){return this.range.normalize(this.Pt)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){var t=this.R;return null==t&&(t=[],this.R=t),t},set:function(t){var n=t.length;if(0<n){var i=this.Ft;if(i<=0){var r=t[n-1];if(null!=(s=this.formatter)&&(r=s(r)),this.Pt!==r){this.Pt=r;var e=this.parent;null!=e&&(e.isChanged=!0)}}else{var u=this.R;null==u&&(u=[],this.R=u);var s,h=this.Gt;if(null!=(s=this.formatter))if(this.Pt=s(t[n-1]),h===Ht.ASCENDING)for(var o=0;o<n;++o)u.push(s(t[o]));else for(o=0;o<n;++o)u.unshift(s(t[o]));else if(this.Pt=t[n-1],h===Ht.ASCENDING)for(o=0;o<n;++o)u.push(t[o]);else for(o=0;o<n;++o)u.unshift(t[o]);var a=u.length-i;if(0<a)if(h===Ht.ASCENDING)for(o=0;o<a;++o)u.shift();else u.length=i;var c=this.parent;null!=c&&(c.isChanged=!0)}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return this.Ut},set:function(t){var n=this.Ft;if(n<=0){if(this.Ut!==t){this.Ut=t;var i=this.parent;null!=i&&(i.isChanged=!0)}}else{var r=this.Ht;null==r&&(r=[],this.Ht=r),this.Ut=t;var e=this.Gt;e===Ht.ASCENDING?r.push(t):r.unshift(t);var u=r.length-n;if(0<u)if(e===Ht.ASCENDING)for(var s=0;s<u;++s)r.shift();else r.length=n;var h=this.parent;null!=h&&(h.isChanged=!0)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"times",{get:function(){var t=this.Ht;return null==t&&(t=[],this.Ht=t),t},set:function(t){var n=t.length;if(0<n){var i=this.Ft;if(i<=0){var r=t[n-1];if(this.Ut!==r){this.Ut=r;var e=this.parent;null!=e&&(e.isChanged=!0)}}else{var u=this.Ht;null==u&&(u=[],this.Ht=u),this.Ut=t[n-1];var s=this.Gt;if(s===Ht.ASCENDING)for(var h=0;h<n;++h)u.push(t[h]);else for(h=0;h<n;++h)u.unshift(t[h]);var o=u.length-i;if(0<o)if(s===Ht.ASCENDING)for(h=0;h<o;++h)u.shift();else u.length=i;var a=this.parent;null!=a&&(a.isChanged=!0)}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.Nt},set:function(t){var n=this.Ft;if(n<=0){if(this.Nt!==t){this.Nt=t;var i=this.parent;null!=i&&(i.isChanged=!0)}}else{var r=this.zt;null==r&&(r=[],this.zt=r),this.Nt=t;var e=this.Gt;e===Ht.ASCENDING?r.push(t):r.unshift(t);var u=r.length-n;if(0<u)if(e===Ht.ASCENDING)for(var s=0;s<u;++s)r.shift();else r.length=n;var h=this.parent;null!=h&&(h.isChanged=!0)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"states",{get:function(){var t=this.zt;return null==t&&(t=[],this.zt=t),t},set:function(t){var n=t.length;if(0<n){var i=this.Ft;if(i<=0){var r=t[n-1];if(this.Nt!==r){this.Nt=r;var e=this.parent;null!=e&&(e.isChanged=!0)}}else{var u=this.zt;null==u&&(u=[],this.zt=u),this.Nt=t[n-1];var s=this.Gt;if(s===Ht.ASCENDING)for(var h=0;h<n;++h)u.push(t[h]);else for(h=0;h<n;++h)u.unshift(t[h]);var o=u.length-i;if(0<o)if(s===Ht.ASCENDING)for(h=0;h<o;++h)u.shift();else u.length=i;var a=this.parent;null!=a&&(a.isChanged=!0)}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"capacity",{get:function(){return this.Ft},set:function(t){if(this.Ft<t)this.Ft=t;else if(t<this.Ft){this.Ft=t;var n=!1,i=this.Gt,r=this.R;if(null!=r&&0<(s=r.length-t)){if(i===Ht.ASCENDING)for(var e=0;e<s;++e)r.shift();else r.length=t;n=!0}var u=this.Ht;if(null!=u&&0<(s=u.length-t)){if(i===Ht.ASCENDING)for(e=0;e<s;++e)u.shift();else u.length=t;n=!0}var s,h=this.zt;if(null!=h&&0<(s=h.length-t)){if(i===Ht.ASCENDING)for(e=0;e<s;++e)h.shift();else h.length=t;n=!0}if(n){var o=this.parent;null!=o&&(o.isChanged=!0)}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"order",{get:function(){return this.Gt},set:function(t){this.Gt=t},enumerable:!1,configurable:!0}),t.prototype.remove=function(t){var n=!1,i=this.R;null!=i&&0<=t&&t<i.length&&(i.splice(t,1),n=!0);var r=this.Ht;null!=r&&0<=t&&t<r.length&&(r.splice(t,1),n=!0);var e=this.zt;if(null!=e&&0<=t&&t<e.length&&(e.splice(t,1),n=!0),n){var u=this.parent;null!=u&&(u.isChanged=!0)}},t.prototype.removeAll=function(t){var n=!1,i=t.slice(0).sort(Xt),r=i.length,e=this.R;if(null!=e)for(var u=r-1;0<=u;--u)0<=(o=i[u])&&o<e.length&&(e.splice(o,1),n=!0);var s=this.Ht;if(null!=s)for(u=r-1;0<=u;--u)0<=(o=i[u])&&o<s.length&&(s.splice(o,1),n=!0);var h=this.zt;if(null!=h)for(u=r-1;0<=u;--u){var o;0<=(o=i[u])&&o<h.length&&(h.splice(o,1),n=!0)}if(n){var a=this.parent;null!=a&&(a.isChanged=!0)}},t.prototype.clear=function(){var t=!1,n=this.R;null!=n&&(n.length=0,t=!0);var i=this.Ht;null!=i&&(i.length=0,t=!0);var r=this.zt;if(null!=r&&(r.length=0,t=!0),t){var e=this.parent;null!=e&&(e.isChanged=!0)}},t.prototype.toDirty=function(){var t=this.parent;null!=t&&(t.isChanged=!0)},t.prototype.copy=function(t){return this.id=t.id,this.as=t.as,this.type=t.type,this.scope=t.scope,this.initial=t.initial,this.format=t.format,this.formatter=t.formatter,this.range.copy(t.range),this.Pt=t.value,this.Ut=t.time,this.Nt=t.state,this.Ft=t.capacity,this},t.prototype.isEquals=function(t){return this.id===t.id&&this.as===t.as&&this.type===t.type&&this.scope===t.scope&&this.initial===t.initial&&this.formatter===t.formatter&&this.range.isEquals(t.range)},t.prototype.serialize=function(t){var n=t.addData(this.id),i=t.addResource(this.as),r=t.addResource(this.initial),e=t.addResource(this.format.trim()),u=this.range.serialize(t);return t.addResource("[".concat(n,",").concat(r,",").concat(e,",").concat(u,",").concat(this.Ft,",").concat(this.Gt,",").concat(this.type,",").concat(this.scope,",").concat(i,"]"))},t.prototype.deserialize=function(t,n){var i,r,e=n.resources;if(0<=t&&t<e.length){var u=n.getDataValue(t);null==u&&(u=JSON.parse(e[t]),n.setDataValue(t,u)),this.id=n.data[u[0]]||"";var s=u[8];this.as=null!=s&&e[s]||"",this.type=null!==(i=u[6])&&void 0!==i?i:zt.NUMBER,this.scope=null!==(r=u[7])&&void 0!==r?r:Vt.PUBLIC,this.initial=e[u[1]]||"",this.format=e[u[2]]||"",this.range.deserialize(u[3],n),this.Ft=u[4],this.Gt=u[5]}return this},t}(),Yt=function(){function t(){this.values=[]}return t.prototype.add=function(t,n){var i=this.values;return null!=n?i.splice(n,0,t):i.push(t),this},t.prototype.addAll=function(t){for(var n=this.values,i=0,r=t.length;i<r;++i)n.push(t[i]);return this},t.prototype.clearAndAdd=function(t){return this.clear(),this.add(t),this},t.prototype.clearAndAddAll=function(t){return this.clear(),this.addAll(t),this},t.prototype.indexOf=function(t){for(var n=this.values,i=0,r=n.length;i<r;++i)if((e=n[i])===t)return i;for(i=0,r=n.length;i<r;++i){var e;if((e=n[i])[0]===t[0]&&e[1]===t[1]&&e[2]===t[2])return i}return-1},t.prototype.get=function(t){var n=this.values;return 0<=t||t<n.length?n[t]:null},t.prototype.set=function(t,n){var i=this.values;if(0<=t||t<i.length){var r=i[t];return i[t]=n,r}return null},t.prototype.remove=function(t){var n=this.values;return 0<=t||t<n.length?n.splice(t,1)[0]:null},t.prototype.clear=function(){return this.values.length=0,this},t.prototype.size=function(){return this.values.length},t.prototype.swap=function(t,n){var i=this.values,r=i[n];return i[n]=i[t],i[t]=r,this},t.prototype.copy=function(t){this.clearAndAddAll(t.values)},t.prototype.serialize=function(t){var n=this.values;if(n.length<=0)return-1;for(var i="[",r="",e=0,u=n.length;e<u;++e){var s=n[e],h=t.addResource(s[0]),o=t.addResource(s[1]),a=t.addResource(s[2]);i+="".concat(r).concat(h,",").concat(o,",").concat(a),r=","}return i+="]",t.addResource(i)},t.prototype.deserialize=function(t,n){var i=this.values;i.length=0;var r=n.resources,e=r.length;if(0<=t&&t<e){var u=n.getDataMapping(t);null==u&&(u=JSON.parse(r[t]),n.setDataMapping(t,u));for(var s=0,h=u.length;s<h;s+=3){var o=u[s],a=u[s+1],c=u[s+2];i.push([0<=o&&o<e?r[o]:"",0<=a&&a<e?r[a]:"",0<=c&&c<e?r[c]:""])}}},t}(),Jt=function(){function t(){}return Object.defineProperty(t.prototype,"ids",{get:function(){var t=this.Vt;if(null==t)return[];var n=[];return t.forEach((function(t,i){n.push(i)})),n},enumerable:!1,configurable:!0}),t.prototype.add=function(t,n){var i,r=null!==(i=this.Vt)&&void 0!==i?i:this.Vt=new Map,e=r.get(t);null==e?r.set(t,[n]):e.push(n)},t.prototype.set=function(t,n,i,r,e,u){var s=this.Vt;if(null==s)return!1;var h=s.get(t);if(null==h)return!1;var o=h.length;if(o<=0)return!1;for(var a=0;a<o;++a){var c=h[a];c.range.set(e,u),void 0!==i&&(c.time=i),void 0!==r&&(c.state=r),c.value=n}return!0},t.prototype.toDirty=function(t){var n=this.Vt;if(null==n)return!1;var i=n.get(t);if(null==i)return!1;var r=i.length;if(r<=0)return!1;for(var e=0;e<r;++e)i[e].toDirty();return!0},t.prototype.each=function(t){var n=this.Vt;if(null==n)return null;var i=null;return n.forEach((function(n,r){null==i&&!1===t(r)&&(i=r)})),i},t}(),Zt=function(){function t(){this.Vt=new Map}return t.prototype.set=function(t,n){return this.Vt.set(t,n),this},t.prototype.get=function(t){var n;return null!==(n=this.Vt.get(t))&&void 0!==n?n:null},t.prototype.contains=function(t){return this.Vt.has(t)},t.prototype.remove=function(t){var n=this.Vt,i=n.get(t);return n.delete(t),null!=i?i:null},t.prototype.clear=function(){return this.Vt.clear(),this},t.prototype.size=function(){return this.Vt.size},t.prototype.each=function(t){var n=!1;return this.Vt.forEach((function(i,r){n||!1===t(i,r)&&(n=!0)})),this},t.prototype.copy=function(t){var n=this.Vt;return n.clear(),t.each((function(t,i){n.set(i,t)})),this},t.prototype.serialize=function(t){var n=this.Vt;if(n.size<=0)return-1;var i=[];return n.forEach((function(n,r){var e=t.addResource(n),u=t.addResource(r);i.push(u,e)})),t.addResource(JSON.stringify(i))},t.prototype.deserialize=function(t,n){var i=this.Vt;i.clear();var r=n.resources,e=r.length;if(0<=t&&t<e){var u=n.getDataSystem(t);null==u&&(u=JSON.parse(r[t]),n.setDataSystem(t,u));for(var s=0,h=u.length;s<h;s+=2){var o=u[s];if(0<=o&&o<e){var a=r[o],c=u[s+1];0<=c&&c<e&&i.set(a,r[c])}}}},t}(),qt=function(){function t(){this.R=[],this.Wt=!0}return Object.defineProperty(t.prototype,"values",{get:function(){return this.R},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isChanged",{get:function(){return this.Wt},set:function(t){this.Wt=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){var t=this.R;return 0<t.length?t[0].id:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"as",{get:function(){var t=this.R;return 0<t.length?t[0].as:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){var t=this.R;return 0<t.length?t[0].type:zt.NUMBER},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scope",{get:function(){var t=this.R;return 0<t.length?t[0].scope:Vt.PRIVATE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"initial",{get:function(){var t=this.R;return 0<t.length?t[0].initial:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){var t=this.R;return 0<t.length?t[0].format:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"range",{get:function(){var t=this.R;return 0<t.length?t[0].range:null!=V?V:V=new Gt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var t=this.R;return 0<t.length?t[0].value:0},set:function(t){var n=this.R;0<n.length&&(n[0].value=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nvalue",{get:function(){var t=this.R;return 0<t.length?t[0].nvalue:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){var t=this.R;return 0<t.length?t[0].time:0},set:function(t){var n=this.R;0<n.length&&(n[0].time=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){var t=this.R;return 0<t.length?t[0].state:Wt.UNKNOWN},set:function(t){var n=this.R;0<n.length&&(n[0].state=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"capacity",{get:function(){var t=this.R;return 0<t.length?t[0].capacity:0},set:function(t){var n=this.R;0<n.length&&(n[0].capacity=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alias",{get:function(){var t=this.Xt;return null==t&&(t=this.newAlias(),this.Xt=t),t},enumerable:!1,configurable:!0}),t.prototype.newAlias=function(){var t=this.R,n=t.length;if(0<n){for(var i={},r=0;r<n;++r){var e=t[r];i[e.as||e.id]=e}return i}return null!=W?W:W={}},Object.defineProperty(t.prototype,"mapping",{get:function(){var t=this.Kt;return null==t&&(t=this.newMapping(),this.Kt=t),t},enumerable:!1,configurable:!0}),t.prototype.newMapping=function(){return new Yt},t.prototype.getMapping=function(){return this.Kt},Object.defineProperty(t.prototype,"private",{get:function(){var t=this.Yt;return null==t&&(t=this.newPrivate(),this.Yt=t),t},enumerable:!1,configurable:!0}),t.prototype.newPrivate=function(){return new Jt},t.prototype.getPrivate=function(){return this.Yt},Object.defineProperty(t.prototype,"system",{get:function(){var t=this.Jt;return null==t&&(t=this.newSystem(),this.Jt=t),t},enumerable:!1,configurable:!0}),t.prototype.newSystem=function(){return new Zt},t.prototype.getSystem=function(){return this.Jt},t.prototype.add=function(t,n){var i=this.R;t.parent=this,void 0===n?i.push(t):i.splice(n,0,t)},t.prototype.set=function(t,n){var i=this.R;if(0<=t&&t<i.length){var r=i[t];return n.parent=this,i[t]=n,r.parent=void 0,r}return null},t.prototype.remove=function(t){var n=this.R;0<=t&&t<n.length&&(n.splice(t,1)[0].parent=void 0)},t.prototype.indexOf=function(t){for(var n=this.R,i=n.length,r=0;r<i;++r)if(n[r]===t)return r;for(r=0;r<i;++r)if(n[r].isEquals(t))return r;for(r=0;r<i;++r)if(n[r].id===t.id)return r;return-1},t.prototype.get=function(t){var n=this.R;return 0<=t&&t<n.length?n[t]:null},t.prototype.size=function(){return this.R.length},t.prototype.swap=function(t,n){var i=this.R,r=i[n];i[n]=i[t],i[t]=r},t.prototype.copy=function(t){var n=this.R;n.length=0;for(var i=0,r=t.size();i<r;++i){var e=t.get(i);if(null!=e){var u=(new Kt).copy(e);u.parent=this,n.push(u)}}var s=t.getMapping();s&&this.mapping.copy(s);var h=t.getSystem();return h&&this.system.copy(h),this},t.prototype.serialize=function(t){for(var n=this.R,i=[],r=0,e=n.length;r<e;++r)i.push(n[r].serialize(t));var u,s=this.Kt;return null!=s?(i.push(s.serialize(t)),null!=(u=this.Jt)?t.addResource("[".concat(JSON.stringify(i),",").concat(u.serialize(t),"]")):t.addResource("[".concat(JSON.stringify(i),"]"))):null!=(u=this.Jt)?(i.push(-1),t.addResource("[".concat(JSON.stringify(i),",").concat(u.serialize(t),"]"))):t.addResource(JSON.stringify(i))},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getData(t);null==r&&(r=JSON.parse(i[t]),n.setData(t,r));var e=this.R;if(e.length=0,this.isMapped(r)){for(var u=r[0],s=u.length,h=0,o=s-1;h<o;++h){var a=u[h];(l=new Kt).parent=this,l.deserialize(a,n),e.push(l)}var c=u[s-1];0<=c&&this.mapping.deserialize(c,n);var f=r[1];null!=f&&0<=f&&this.system.deserialize(f,n)}else for(h=0,o=r.length;h<o;++h){var l;a=r[h],(l=new Kt).parent=this,l.deserialize(a,n),e.push(l)}}},t.prototype.isMapped=function(t){return 0<t.length&&Mt(t[0])},t}(),Qt=function(){function t(t,n,i){this.g=t,this.Zt=n,this.qt=i}return Object.defineProperty(t.prototype,"horizontal",{get:function(){return this.Zt},set:function(t){this.Zt!==t&&(this.Zt=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){return this.qt},set:function(t){this.qt!==t&&(this.qt=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){t&&this.set(t.horizontal,t.vertical)},t.prototype.set=function(t,n){var i=!1;null!=t&&this.Zt!==t&&(this.Zt=t,i=!0),null!=n&&this.qt!==n&&(this.qt=n,i=!0),i&&this.g.updateUploaded()},t.prototype.toObject=function(){return{horizontal:this.Zt,vertical:this.qt}},t.prototype.serialize=function(t){return t.addResource("[".concat(this.Zt,",").concat(this.qt,"]"))},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getAlign(t);if(null!=r)this.set(r[0],r[1]);else{var e=JSON.parse(i[t]);n.setAlign(t,e),this.set(e[0],e[1])}}},t}(),$t=function(){function t(t,n,i){this.g=t,this.Zt=n,this.qt=i}return Object.defineProperty(t.prototype,"horizontal",{get:function(){return this.Zt},set:function(t){this.Zt!==t&&(this.Zt=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){return this.qt},set:function(t){this.qt!==t&&(this.qt=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){t&&this.set(t.horizontal,t.vertical)},t.prototype.set=function(t,n){var i=!1;null!=t&&this.Zt!==t&&(this.Zt=t,i=!0),null!=n&&this.qt!==n&&(this.qt=n,i=!0),i&&this.g.updateUploaded()},t.prototype.toObject=function(){return{horizontal:this.Zt,vertical:this.qt}},t.prototype.serialize=function(t){return t.addResource("[".concat(this.Zt,",").concat(this.qt,"]"))},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getMargin(t);if(null!=r)this.set(r[0],r[1]);else{var e=JSON.parse(i[t]);n.setMargin(t,e),this.set(e[0],e[1])}}},t}(),tn=function(){function t(t,n,i,r,e){this.g=t,this.O=n,this.p=i,this.S=r,this.At=e}return Object.defineProperty(t.prototype,"enable",{get:function(){return this.O},set:function(t){this.O!==t&&(this.O=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.p},set:function(t){this.p!==t&&(this.p=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.S},set:function(t){this.S!==t&&(this.S=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.At},set:function(t){this.At!==t&&(this.At=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){t&&this.set(t.enable,t.color,t.alpha,t.width)},t.prototype.set=function(t,n,i,r){var e=!1;void 0!==t&&this.O!==t&&(this.O=t,e=!0),void 0!==n&&this.p!==n&&(this.p=n,e=!0),void 0!==i&&this.S!==i&&(this.S=i,e=!0),void 0!==r&&this.At!==r&&(this.At=r,e=!0),e&&this.g.updateUploaded()},t.prototype.clone=function(){return new t(this.g,this.O,this.p,this.S,this.At)},t.prototype.toObject=function(){return{enable:this.O,color:this.p,alpha:this.S,width:this.At}},t.prototype.serialize=function(t){var n="[".concat(this.O?1:0,",").concat(this.p,",").concat(this.S,",").concat(this.At,"]");return t.addResource(n)},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getTextOutline(t);if(null!=r)this.set(!!r[0],r[1],r[2],r[3]);else{var e=JSON.parse(i[t]);n.setTextOutline(t,e),this.set(!!e[0],e[1],e[2],e[3])}}},t}(),nn=function(){function t(t,n,i,r,e,u){this.g=t,this.O=!0,this.Pt=n,this.Qt=this.$t=n.length,this.p=i,this.S=r,this.tn=e,this.j=u,this.nn=O.NORMAL,this.align=new Qt(t,D.CENTER,E.MIDDLE),this.offset=new $t(t,0,0),this.L=p.NORMAL,this.spacing=new $t(t,0,0),this.outline=new tn(t,!1,16777215,1,.5),this.rn=M.LEFT_TO_RIGHT,this.padding=new $t(t,10,10),this.en=!1,this.un=!1,this.sn=[],this.hn=[],this.updateCharacters(n)}return Object.defineProperty(t.prototype,"enable",{get:function(){return this.O},set:function(t){this.O!==t&&(this.O=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.Pt},set:function(t){if(this.Pt!==t){this.Pt=t;var n=t.length;this.$t=n,this.Qt<n&&(this.Qt=n),this.updateCharacters(t),this.isCompatible()?this.g.updateUploaded():(this.atlas=void 0,this.g.toDirty())}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"characters",{get:function(){return this.sn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nacharacters",{get:function(){return this.hn},enumerable:!1,configurable:!0}),t.prototype.updateCharacters=function(t){for(var n=this.sn,i=n.length,r=0,e=this.hn,u=e.length,s=0,h=0,o=t.length;h<o;)if(t.charCodeAt(h)<=255){var a=t.substring(h,h+1);r<i?n[r]=a:n.push(a),r+=1,h+=1}else{for(var c=h+1;c<o;++c){var f=t.charCodeAt(c);if(!(56320<=f&&f<=57343||65024<=f&&f<=65039))break}var l=t.substring(h,c);r<i?n[r]=l:n.push(l),r+=1,s<u?e[s]=l:e.push(l),s+=1,h=c}r<i&&(n.length=r),s<u&&(e.length=s)},t.prototype.isCompatible=function(){var t=this.g,n=t.uploaded;if(null==n||!n.isCompatible(t))return!1;var i=this.atlas;if(null==i)return!1;for(var r=i.characters,e=this.hn,u=0,s=e.length;u<s;++u)if(!r.has(e[u]))return!1;return!0},Object.defineProperty(t.prototype,"length",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"plength",{get:function(){return this.Qt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){return this.tn},set:function(t){this.tn!==t&&(this.tn=t,this.g.toDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.p},set:function(t){this.p!==t&&(this.p=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.S},set:function(t){this.S!==t&&(this.S=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weight",{get:function(){return this.nn},set:function(t){this.nn!==t&&(this.nn=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this.L},set:function(t){this.L!==t&&(this.L=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this.rn},set:function(t){this.rn!==t&&(this.rn=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clipping",{get:function(){return this.en},set:function(t){this.en!==t&&(this.en=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fitting",{get:function(){return this.un},set:function(t){this.un!==t&&(this.un=t,this.g.updateUploaded())},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){return t&&(this.set(t.value,t.color,t.alpha,t.family,t.size,t.weight,t.style,t.direction,t.clipping,t.fitting),this.align.copy(t.align),this.offset.copy(t.offset),this.outline.copy(t.outline),this.spacing.copy(t.spacing),this.padding.copy(t.padding)),this},t.prototype.set=function(t,n,i,r,e,u,s,h,o,a){var c=!1,f=!1;if(null!=t&&this.Pt!==t){this.Pt=t;var l=t.length;this.$t=l,this.Qt<l&&(this.Qt=l),this.updateCharacters(t),this.isCompatible()?f=!0:(this.atlas=void 0,c=!0)}return null!=n&&this.p!==n&&(this.p=n,f=!0),null!=i&&this.S!==i&&(this.S=i,f=!0),null!=r&&this.tn!==r&&(this.tn=r,c=!0),null!=e&&this.j!==e&&(this.j=e,f=!0),null!=u&&this.nn!==u&&(this.nn=u,f=!0),null!=s&&this.L!==s&&(this.L=s,f=!0),null!=h&&this.rn!==h&&(this.rn=h,f=!0),null!=o&&this.en!==o&&(this.en=o,f=!0),null!=a&&this.un!==a&&(this.un=a,f=!0),c?this.g.toDirty():f&&this.g.updateUploaded(),this},t.prototype.toObject=function(){return{value:this.Pt,color:this.p,alpha:this.S,family:this.tn,size:this.j,weight:this.nn,align:this.align.toObject(),offset:this.offset.toObject(),style:this.L,outline:this.outline.toObject(),direction:this.rn,spacing:this.spacing.toObject(),padding:this.padding.toObject(),clipping:this.en,fitting:this.un}},t.prototype.serialize=function(t){var n=t.addResource(this.Pt),i=t.addResource(this.tn),r=this.align.serialize(t),e=this.offset.serialize(t),u=this.outline.serialize(t),s=this.spacing.serialize(t),h=this.padding.serialize(t),o=this.en?1:0,a=this.un?1:0,c="[".concat(n,",").concat(this.p,",").concat(this.S,",").concat(i,",").concat(this.j,",")+"".concat(this.nn,",").concat(r,",").concat(e,",").concat(this.L,",").concat(u,",")+"".concat(s,",").concat(this.rn,",").concat(h,",").concat(o,",").concat(a,"]");return t.addResource(c)},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getText(t);null==r&&(r=JSON.parse(i[t]),n.setText(t,r)),this.set(i[r[0]]||"",r[1],r[2],i[r[3]]||"auto",r[4],r[5],r[8],r[11],!!r[13],!!r[14]),this.align.deserialize(r[6],n),this.offset.deserialize(r[7],n),this.outline.deserialize(r[9],n),this.spacing.deserialize(r[10],n),this.padding.deserialize(r[12],n)}},t}(),rn=function(t){for(var n=t.points,i="[".concat(t.direction),r=0,e=n.length,u=1;r<e;r+=1,u+=3){var s=n[r];i+=",".concat(s.color,",").concat(s.alpha,",").concat(s.position)}return i+"]"},en=function(n){function i(t){var i=n.call(this,t)||this;i.size=i.newSize(),i.fill=i.newFill(),i.stroke=i.newStroke(),i.an=rt.RADIUS,i.cn=ft.ALL;var r=new qt;return i.data=r,i.tag=r,i.text=i.newText(),i}return G(i,n),i.prototype.newSize=function(){var n=this;return new t.ObservablePoint((function(){n.onSizeChange()}),void 0,rt.SIZE_X,rt.SIZE_Y)},i.prototype.newFill=function(){return new ut(this,!0,rt.FILL_COLOR,rt.FILL_ALPHA)},i.prototype.newStroke=function(){return new Ut(this,!0,rt.STROKE_COLOR,rt.STROKE_ALPHA,rt.STROKE_WIDTH,rt.STROKE_ALIGN,rt.STROKE_SIDE,rt.STROKE_STYLE)},i.prototype.newText=function(){return new nn(this,rt.TEXT_VALUE,rt.TEXT_COLOR,rt.TEXT_ALPHA,rt.TEXT_FAMILY,rt.TEXT_SIZE)},Object.defineProperty(i.prototype,"corner",{get:function(){return this.cn},set:function(t){this.cn!==t&&(this.cn=t,this.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"radius",{get:function(){return this.an},set:function(t){this.an!==t&&(this.an=t,this.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"image",{get:function(){return this.fn},set:function(t){if(this.fn!==t){this.fn=null!=t?t:void 0;var n=this.parent;null!=n&&n.toDirty()}},enumerable:!1,configurable:!0}),i.prototype.serializeImage=function(t){var n=this.fn;return null!=n?t.addResource(n.url):-1},i.prototype.serializeGradient=function(t){var n=this.gradient;return null!=n?(null==n.serialized&&(n.serialized=rn(n)),t.addResource(n.serialized)):-1},i}(Pt),un=function(t,n,i,r,e,u,s){if(t.fill.enable){if((c=n*n)*(o=e*e)+(f=i*i)*(h=r*r)<=h*o)return!0}else if(0<u){var h,o,a=u*s,c=n*n,f=i*i,l=Math.max(0,r-a),v=Math.max(0,e-a),b=l*l,d=v*v;if(b*d<=c*d+f*b&&c*(o=e*e)+f*(h=r*r)<=h*o)return!0}return!1},sn=function(t,n,i,r,e,u,s){if(kt(n,i,r,e)){if(t.fill.enable)return!0;var h=t.stroke.side;if(0<u&&h!==Z.NONE){var o=u*s,a=Math.max(0,r-o),c=Math.max(0,e-o);if(!kt(n,i,a,c))return!(h!==Z.ALL&&!(n<=-a?i<=-c?h&Z.TOP_OR_LEFT:+c<=i?h&Z.BOTTOM_OR_LEFT:h&Z.LEFT:+a<=n?i<=-c?h&Z.TOP_OR_RIGHT:+c<=i?h&Z.BOTTOM_OR_RIGHT:h&Z.RIGHT:i<=-c?h&Z.TOP:+c<=i&&h&Z.BOTTOM))}}return!1},hn=function(t,n,i,r,e){return+i*t+r-n<=0&&-i*t+r-n<=0&&n<=e},on=function(t,n,i,r,e,u,s){var h=2*e/r;if(t.fill.enable){if(hn(n,i,h,-e,+e))return!0}else if(0<u){var o=u*s;if(hn(n,i,h,-e,+e)){var a=2*r*e/(r+Math.sqrt(r*r+4*e*e)),c=e-a,f=c+(-e-c)*Math.max(0,a-o)/a;if(!hn(n,i,h,f,e-o))return!0}}return!1},an=function(t,n,i){return.5*(i+t*n)},cn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getHitTestSize=function(n){var i=this.Mt.formatted;if("boundary"in i){var r=i.boundary;n.width=Math.max(Math.abs(r[0]),Math.abs(r[2])),n.height=Math.max(Math.abs(r[1]),Math.abs(r[3]))}else t.prototype.getHitTestSize.call(this,n);return n},n.prototype.toMarkerSize=function(t){var n=0,i=t.getMarker();if(i){var r=i.head;if(r.type!==et.NONE){var e=r.size;n=Math.max(n,2*Math.max(Math.abs(e.x),Math.abs(e.y)))}var u=i.tail;u.type!==et.NONE&&(e=u.size,n=Math.max(n,2*Math.max(Math.abs(e.x),Math.abs(e.y))))}return n},n.prototype.containsAbsMarker=function(t,n,i,r,e,u){var s=t.type;if(s!==et.NONE){var h=t.transform,o=h.a,a=h.b,c=h.c,f=h.d,l=h.tx,v=h.ty,b=1/(o*f-c*a),d=(f*n-c*i+v*c-l*f)*b,g=(o*i-a*n-v*o+l*a)*b,m=t.size,w=.5*m.x,O=.5*m.y;w<0&&(w=-w,n=-n),O<0&&(O=-O,i=-i);var p=r*e*u;switch(w+=p,O+=p,s){case et.CIRCLE:return un(this,d,g,w,O,r,e);case et.TRIANGLE:return on(this,d,g,w,O,r,e);case et.RECTANGLE:return sn(this,d,g,w,O,r,e)}}return!1},n.prototype.containsAbs=function(t,n,i,r,e,u,s){var h=this.Mt,o=an(e,u,0),a=o+this.toMarkerSize(h);if(this.containsAbsBBox(t,n,i+a,r+a)){var c=h.getMarker();if(c){if(this.containsAbsMarker(c.head,t,n,e,u,s))return!0;if(this.containsAbsMarker(c.tail,t,n,e,u,s))return!0}var f=this.calcHitPointAbsHitTester;return h.calcHitPointAbs(t,n,i,r,o,null,f,null)}return!1},n.prototype.calcHitPart=function(t,n){var i=this.toHitTestData(t,n),r=i.strokeWidth,e=i.strokeScale,u=an(r,e,0),s=this.Mt,h=u+this.toMarkerSize(s),o=i.x,a=i.y,c=i.width,f=i.height;if(this.containsAbsBBox(o,a,c+h,f+h)){var l=s.getMarker();if(l){var v=i.strokeAlign;if(this.containsAbsMarker(l.head,o,a,r,e,v))return ct.MARKER_HEAD;if(this.containsAbsMarker(l.tail,o,a,r,e,v))return ct.MARKER_TAIL}var b=this.calcHitPointAbsHitTester;if(s.calcHitPointAbs(o,a,c,f,u,null,b,null))return ct.LINE}return this.containsText(t,n)?ct.TEXT:this.containsChildren(t,n)?ct.CHILDREN:ct.NONE},n.prototype.calcHitPoint=function(t,n,i,r,e,u){var s=this.Mt,h=this.toHitTestData(t,n),o=(i||an)(h.strokeWidth,h.strokeScale,0);return!!this.containsAbsBBox(h.x,h.y,h.width+o,h.height+o)&&s.calcHitPointAbs(h.x,h.y,h.width,h.height,o,r,e,u)},n.prototype.calcHitPointAbsHitTester=function(t,n,i,r,e,u,s,h,o){var a=e-i,c=u-r,f=t-i,l=n-r,v=a*a+c*c,b=a*f+c*l,d=f*f+l*l;if(1e-4<v){var g=Math.max(0,Math.min(1,b/v));if(v*g*g-2*b*g+d<h*h)return!0}return!1},n}(en),fn=function(t){function n(n){void 0===n&&(n=r.BAR);var i=t.call(this,n)||this;return i.Mt=new at(i),i}return G(n,t),Object.defineProperty(n.prototype,"points",{get:function(){return this.Mt},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbsBBox=function(n,i,r,e){var u=Math.max(0,this.Mt.size);return t.prototype.containsAbsBBox.call(this,n,i,r+u,e+u)},n.prototype.serialize=function(n){var i=t.prototype.serialize.call(this,n);return i[15]=this.Mt.serialize(n),i},n}(cn),ln=function(t){function n(n,i,r){var e=t.call(this,n,i,r,4,2)||this;return e.pointsId=-1,e.pointsStyle=K.NONE,e}return G(n,t),n.prototype.init=function(){var t=this.vertexOffset,n=this.indexOffset,i=this.buffer;i.updateIndices(),g(i.indices,t,n),this.inited|=Y.INDEX},n.prototype.update=function(t){var n=this.buffer;this.updateVertexStep(n,t),this.updateColor(n,t),this.updateUv(n,t)},n.prototype.updateVertexStep=function(t,n){if(n instanceof fn){var i=n.size,r=i.x,e=i.y,u=r!==this.sizeX||e!==this.sizeY,s=n.stroke,h=s.enable?s.width:0,o=s.style,a=h!==this.strokeWidth||o!==this.strokeStyle,c=Q(n),f=this.transformLocalId!==c,l=n.points,v=l.id,b=v!==this.pointsId,d=l.style,g=d!==this.pointsStyle;(!(this.inited&Y.VERTEX_AND_STEP)||u||f||a||b||g)&&(this.inited|=Y.VERTEX_AND_STEP,this.sizeX=r,this.sizeY=e,this.strokeWidth=h,this.strokeStyle=o,this.transformLocalId=c,this.pointsId=v,this.pointsStyle=d,b&&(this.inited&=~Y.UV),t.updateVertices(),t.updateSteps(),m(t.vertices,t.steps,this.vertexOffset,l.values,l.size,h,o,n.transform.internalTransform))}},n.prototype.updateUv=function(t,n){var i=$(n),r=tt(i);(!(this.inited&Y.UV)||i!==this.texture||r!==this.textureTransformId)&&(this.inited|=Y.UV,this.texture=i,this.textureTransformId=r,t.updateUvs(),w(t.uvs,this.vertexOffset,nt(i)))},n}(q),vn=function(){function n(t,n,i,r,e){this.buffer=t,this.vertexOffset=n,this.indexOffset=i,this.vertexCount=r,this.indexCount=e,this.inited=Y.NONE,this.sizeX=0,this.sizeY=0,this.transformLocalId=0,this.scaleX=1,this.scaleY=1,this.size=0,this.family="auto",this.value="",this.texture=null,this.textureTransformId=0,this.color=0,this.alpha=0,this.weight=0,this.style=0,this.alignHorizontal=0,this.alignVertical=0,this.offsetHorizontal=0,this.offsetVertical=0,this.outlineWidth=0,this.outlineColor=0,this.outlineAlpha=0,this.spacingHorizontal=0,this.spacingVertical=0,this.direction=0,this.paddingHorizontal=0,this.paddingVertical=0,this.clipping=!1,this.fitting=!1}return n.prototype.init=function(){if(0<this.vertexCount){var t=this.buffer,n=this.vertexOffset;t.updateIndices(),N(t.indices,n,this.indexOffset,this.indexCount)}return this.inited|=Y.INDEX,this},n.prototype.reinit=function(t,n,i,r){var e=C(n),u=e<<2,s=e<<1;return this.buffer===t&&this.vertexOffset===i&&this.indexOffset===r&&this.vertexCount===u&&this.indexCount===s||!!t.check(i,r,u,s)&&(this.inited=Y.NONE,this.buffer=t,this.vertexOffset=i,this.indexOffset=r,this.vertexCount=u,this.indexCount=s,this.init(),!0)},n.prototype.isCompatible=function(t){return C(t)<<2===this.vertexCount},n.prototype.update=function(t){if(0<this.vertexCount){var n=t.text.atlas;if(null!=n){var i=this.buffer;this.updateVertex(i,t,n),this.updateColor(i,t),this.updateStep(i,t)}}return this},n.prototype.updateVertex=function(n,i,r){var e=i.size,u=e.x,s=e.y,h=u!==this.sizeX||s!==this.sizeY,o=Q(i),a=this.transformLocalId!==o,c=i.text,f=c.size,l=c.family,v=c.value,b=c.style,d=c.align.horizontal,g=c.align.vertical,m=c.offset.horizontal,w=c.offset.vertical,O=c.spacing.horizontal,p=c.spacing.vertical,D=c.direction,E=c.padding.horizontal,M=c.padding.vertical,S=c.clipping,j=c.fitting,T=c.texture||t.Texture.WHITE,I=tt(T),C=v!==this.value||l!==this.family,N=f!==this.size,A=b!==this.style,R=d!==this.alignHorizontal||g!==this.alignVertical,k=m!==this.offsetHorizontal||w!==this.offsetVertical,L=O!==this.spacingHorizontal||p!==this.spacingVertical||E!==this.paddingHorizontal||M!==this.paddingVertical,x=D!==this.direction,B=this.clipping!==S,_=this.fitting!==j,P=T!==this.texture||I!==this.textureTransformId;if(!(this.inited&Y.VERTEX)||h||a||C||N||A||R||k||L||x||B||_||P){this.inited|=Y.VERTEX,this.size=f,this.family=l,this.value=v,this.style=b,this.alignHorizontal=d,this.alignVertical=g,this.offsetHorizontal=m,this.offsetVertical=w,this.spacingHorizontal=O,this.spacingVertical=p,this.direction=D,this.paddingHorizontal=E,this.paddingVertical=M,this.clipping=S,this.fitting=j,this.texture=T,this.textureTransformId=I,(N||_||j&&h)&&(this.inited&=~Y.STEP),n.updateVertices(),n.updateUvs();var U=i.size,F=c.world;null==F&&(F=[0,0,0,0,0,0,0,0],c.world=F),y(n.vertices,n.uvs,this.vertexOffset,this.vertexCount,0,0,U.x,U.y,r,f,c.characters,b,d,g,m,w,O,p,D,E,M,S,j,F,nt(T),i.transform.internalTransform)}},n.prototype.updateColor=function(t,n){var i=n.text,r=i.color,e=n.visible&&i.enable?i.alpha:0,u=i.outline,s=u.color,h=n.visible&&i.enable?u.alpha:0;(!(this.inited&Y.COLOR)||r!==this.color||e!==this.alpha||r!==this.outlineColor||e!==this.outlineAlpha)&&(this.inited|=Y.COLOR,this.color=r,this.alpha=e,this.outlineColor=s,this.outlineAlpha=h,t.updateColors(),J(r,e,s,h,this.vertexOffset,this.vertexCount,t.colors))},n.prototype.updateStep=function(t,n){var i=n.text,r=i.outline,e=r.enable?r.width:0,u=e!==this.outlineWidth,s=i.weight,h=s!==this.weight,o=1,a=1,c=i.world;null!=c&&(o=c[8],a=c[9]);var f=T<Math.abs(this.scaleX-o)||T<Math.abs(this.scaleY-a);(!(this.inited&Y.STEP)||h||u||f)&&(this.inited|=Y.STEP,this.weight=s,this.outlineWidth=e,this.scaleX=o,this.scaleY=a,t.updateSteps(),A(t.steps,this.vertexOffset,this.vertexCount,i.atlas,i.size,e,s,this.scaleX,this.scaleY))},n.prototype.buildUnit=function(n){if(0<this.vertexCount){var i=this.texture||t.Texture.WHITE,r=i.baseTexture;r!==n.baseTexture&&(n.baseTexture=r,n.push(i,this.indexOffset))}},n}(),bn=function(t,n,i,r,e){var s=C(n),h=s<<2,o=s<<1,a=4+h,c=2+o;return t.check(i,r,a,c)?new u(t,i,r,a,c,[new ln(t,i,r),new vn(t,i+4,r+2,h,o)]).init(n):null},dn=function(t,n,i){var r=t.length;if(n<r)return t;for(var e="",u=0,s=n-r;u<s;++u)e+=i;return e+t},gn=function(){function t(){}return t.toCode=function(t){return dn(t.toString(16).toUpperCase(),6,"0")},t.fromCode=function(t){var n=t.trim().toLowerCase();if(6===n.length){var i=Number("0x".concat(n));if(i==i)return i}return null},t.fromRgb=function(t,n,i){return 255*t<<16|255*n<<8|255*i|0},t.blend=function(t,n,i){var r=t>>16&255,e=t>>8&255,u=255&(0|t),s=n>>16&255,h=n>>8&255,o=255&(0|n),a=Math.max(0,Math.min(1,i)),c=1-a;return Math.max(0,Math.min(255,r*c+s*a))<<16|Math.max(0,Math.min(255,e*c+h*a))<<8|0|Math.max(0,Math.min(255,u*c+o*a))},t.brighten=function(t,n){return 0<=n?this.blend(t,16777215,n):this.blend(t,0,-n)},t.darken=function(t,n){return 0<=n?this.blend(t,0,n):this.blend(t,16777215,-n)},t.toGrayscale=function(t){var n=this.toLuma(t);return n<<16|n<<8|n},t.toLuma=function(t){return.2126*(t>>16&255)+.7152*(t>>8&255)+.0722*(255&(0|t))&255},t}(),mn={NONE:0,POSITION_X:1,POSITION_Y:2,POSITION:3,ROTATION:4,COLOR_FILL:8,COLOR_STROKE:16,COLOR_FILL_AND_STROKE:24,COLOR_TEXT:32,COLOR_TEXT_OUTLINE:64,COLOR:120,VISIBILITY:128,HEIGHT:256,WIDTH:512,SIZE:768,TEXT:1024,CURSOR:2048},wn=function(){function t(){}return t.toBaseFill=function(t,n){return(n.written&mn.COLOR_FILL?t:n).fill},t.toBaseStroke=function(t,n){return(n.written&mn.COLOR_STROKE?t:n).stroke},t.toBaseText=function(t,n){return(n.written&mn.COLOR_TEXT?t:n).text},t.toBaseTextOutline=function(t,n){return(n.written&mn.COLOR_TEXT_OUTLINE?t:n).text.outline},t}(),On={isInitializing:!1},pn=function(){function t(){}return t.from=function(t,n,i,r,e,u){if(t.trim().length<=0)return i;try{var s="try {with (shape) {with (state) {with (data.alias) {with (environment) {"+(e?"var result = (".concat(t,");")+"return (result != null ? ".concat(n,"(result) : null);"):"return ".concat(n,"(").concat(t,");"))+"}}}}} catch (e) {"+"return ".concat(r,";")+"}";return null==u?Function("shape","time","environment",s):Function("shape","time","environment",u,s)}catch(t){return i}},t.ofNumberOrNull=function(t){return this.from(t,"Number",this.NULL,"null",!0)},t.ofStringOrNull=function(t){return this.from(t,"String",this.NULL,"null",!0)},t.ofUnknown=function(t){return this.from(t,"",this.NULL,"null",!1)},t.ofNumber=function(t){return this.from(t,"Number",this.ZERO,"0",!1)},t.ofNumberOrOne=function(t){return this.from(t,"Number",this.ONE,"1",!1)},t.ofNumberOrOneHundred=function(t){return this.from(t,"Number",this.ONE_HUNDRED,"100",!1)},t.ofString=function(t){return this.from(t,"String",this.EMPTY,'""',!1)},t.ofBoolean=function(t){return this.from(t,"Boolean",this.TRUE,"true",!1)},t.ofBooleanOrTrue=function(t){return this.from(t,"Boolean",this.TRUE,"true",!1)},t.ofBooleanOrFalse=function(t){return this.from(t,"Boolean",this.FALSE,"false",!1)},t.ofElementOrNull=function(t){return this.from(t,"",void 0,"null",!1,"container")},t.NULL=function(){return null},t.ZERO=function(){return 0},t.ONE=function(){return 1},t.ONE_HUNDRED=function(){return 100},t.EMPTY=function(){return""},t.TRUE=function(){return!0},t.FALSE=function(){return!1},t}(),Dn=function(){function t(t){this.reset=t||mn.NONE}return t.prototype.initialize=function(t,n){},t.prototype.execute=function(t,n,i){},t.prototype.onResize=function(t,n){},t.prototype.onFocus=function(t,n){},t.prototype.onBlur=function(t,n){},t.prototype.onClick=function(t,n,i){},t.prototype.onDblClick=function(t,n,i,r){},t.prototype.onDowning=function(t,n,i){},t.prototype.onDown=function(t,n,i){},t.prototype.onMove=function(t,n,i){},t.prototype.onOver=function(t,n,i){},t.prototype.onOut=function(t,n,i){},t.prototype.onUp=function(t,n,i){},t.prototype.onUpOutside=function(t,n,i){},t.prototype.onPressed=function(t,n,i){},t.prototype.onUnpressed=function(t,n,i){},t.prototype.onKeyDown=function(t,n,i){},t.prototype.onKeyUp=function(t,n,i){},t.prototype.onRightClick=function(t,n,i){},t.prototype.onRightDowning=function(t,n,i){},t.prototype.onRightDown=function(t,n,i){},t.prototype.onRightUp=function(t,n,i){},t.prototype.onRightUpOutside=function(t,n,i){},t.prototype.onRightPressed=function(t,n,i){},t.prototype.onRightUnpressed=function(t,n,i){},t.prototype.onRender=function(t,n,i,r){},t}(),En=function(t){function n(n,i){var r=t.call(this,i)||this;return r.condition=pn.ofBoolean(n.condition),r}return G(n,t),n}(Dn),Mn=function(t){function n(n,i){var r=t.call(this,n,i)||this;return r.interval=n.interval,r}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.interval,e=r<<1,u=i%e;u<r?(this.toOff(t,n),n.effect=i+(r-u)):(this.toOn(t,n),n.effect=i+(e-u))}},n.prototype.toOn=function(t,n){},n.prototype.toOff=function(t,n){},n}(En),Sn=function(t){function n(n){return t.call(this,n,mn.COLOR)||this}return G(n,t),n.prototype.toOn=function(t,n){var i=wn.toBaseFill(t,n);t.fill.set(void 0,gn.brighten(i.color,.5),i.alpha);var r=wn.toBaseStroke(t,n);t.stroke.set(void 0,gn.brighten(r.color,.5),r.alpha);var e=wn.toBaseText(t,n);t.text.set(void 0,gn.brighten(e.color,.5),e.alpha);var u=wn.toBaseTextOutline(t,n);t.text.outline.set(void 0,gn.brighten(u.color,.5),u.alpha),n.written|=this.reset},n}(Mn),jn=function(t){function n(n){var i=t.call(this,n,mn.COLOR_FILL)||this;return i.color=n.color,i.alpha=n.alpha,i}return G(n,t),n.prototype.toOn=function(t,n){t.fill.set(void 0,this.color,this.alpha),n.written|=this.reset},n}(Mn),Tn=function(t){function n(n){var i=t.call(this,n,mn.COLOR_STROKE)||this;return i.color=n.color,i.alpha=n.alpha,i}return G(n,t),n.prototype.toOn=function(t,n){t.stroke.set(void 0,this.color,this.alpha),n.written|=this.reset},n}(Mn),In=function(t){function n(n){return t.call(this,n,mn.COLOR)||this}return G(n,t),n.prototype.toOn=function(t,n){var i=wn.toBaseFill(t,n);t.fill.set(void 0,gn.darken(i.color,.5),i.alpha);var r=wn.toBaseStroke(t,n);t.stroke.set(void 0,gn.darken(r.color,.5),r.alpha);var e=wn.toBaseText(t,n);t.text.set(void 0,gn.darken(e.color,.5),e.alpha);var u=wn.toBaseTextOutline(t,n);t.text.outline.set(void 0,gn.darken(u.color,.5),u.alpha),n.written|=this.reset},n}(Mn),Cn=function(t){function n(n){return t.call(this,n,mn.COLOR_FILL_AND_STROKE)||this}return G(n,t),n.prototype.toOn=function(t,n){var i=wn.toBaseFill(t,n);t.fill.set(void 0,i.color,.5*i.alpha);var r=wn.toBaseStroke(t,n);t.stroke.set(void 0,r.color,.5*r.alpha),n.written|=this.reset},n}(Mn),Nn=function(t){function n(n){return t.call(this,n,mn.VISIBILITY)||this}return G(n,t),n.prototype.toOn=function(t,n){t.visible=!0,n.written|=this.reset},n.prototype.toOff=function(t,n){t.visible=!1,n.written|=this.reset},n}(Mn),An={VISIBILITY:0,BRIGHTEN:1,DARKEN:2,OPACITY:3,COLOR_FILL:4,COLOR_STROKE:5},Rn=function(){function t(t,n){this.type=t,this.condition=n}return t.prototype.isEquals=function(t){return this.type===t.type&&this.condition===t.condition},t.prototype.toLabel=function(){return this.getTheme().toLabel(this)},t.prototype.getTheme=function(){var n;return null!==(n=t.THEME)&&void 0!==n?n:t.THEME=it.getInstance().get("EShapeActionValue")},t}(),yn=function(t){function n(n,i,r){var e=t.call(this,n,i)||this;return e.subtype=r,e}return G(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.subtype===i.subtype},n}(Rn),kn={SHOW_HIDE:0,BLINK:1,TRANSFORM:2,OPEN:3,EMIT_EVENT:4,CHANGE_COLOR_LEGACY:5,CHANGE_TEXT:6,CHANGE_CURSOR:7,MISC:8,CHANGE_COLOR:9,GESTURE:10,EXTENSION:1e3},Ln=function(){function t(){}return t.toResource=function(t,n,i){if(0<=t&&t<n.length){var r=n[t];if(jt(r)&&0<=r&&r<i.length)return i[r]}return""},t}(),xn=function(t){function n(n,i,r,e,u){var s=t.call(this,kn.BLINK,i,n)||this;return s.interval=r,s.color=e,s.alpha=u,s}return G(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.interval===i.interval&&this.color===i.color&&this.alpha===i.alpha},n.prototype.toRuntime=function(){switch(this.subtype){case An.BRIGHTEN:return new Sn(this);case An.COLOR_FILL:return new jn(this);case An.COLOR_STROKE:return new Tn(this);case An.DARKEN:return new In(this);case An.OPACITY:return new Cn(this);case An.VISIBILITY:return new Nn(this)}},n.prototype.serialize=function(t){var n=t.addResource(this.condition);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(this.interval,",").concat(this.color,",").concat(this.alpha,"]"))},n.deserialize=function(t,i){var r=Ln.toResource(1,t,i.resources);return new n(t[2],r,t[3],t[4],t[5])},n}(yn),Bn=function(){function t(){}return t.blend=function(t,n,i){var r=Math.max(0,Math.min(1,i));return Math.max(0,Math.min(1,t*(1-r)+n*r))},t}(),_n=function(t){function n(n){return t.call(this,n,n.subtype<<3)||this}return G(n,t),n.prototype.set=function(t,n,i,r,e,u){var s=this.reset;if(null!=r){if(null!=e)if(null!=u){if(s&mn.COLOR_FILL){var h=wn.toBaseFill(t,n);t.fill.set(void 0,gn.blend(h.color,r,u),Bn.blend(h.alpha,e,u))}s&mn.COLOR_STROKE&&(h=wn.toBaseStroke(t,n),t.stroke.set(void 0,gn.blend(h.color,r,u),Bn.blend(h.alpha,e,u))),s&mn.COLOR_TEXT&&(h=wn.toBaseText(t,n),t.text.set(void 0,gn.blend(h.color,r,u),Bn.blend(h.alpha,e,u))),s&mn.COLOR_TEXT_OUTLINE&&(h=wn.toBaseTextOutline(t,n),t.text.outline.set(void 0,gn.blend(h.color,r,u),Bn.blend(h.alpha,e,u)))}else s&mn.COLOR_FILL&&t.fill.set(void 0,r,e),s&mn.COLOR_STROKE&&t.stroke.set(void 0,r,e),s&mn.COLOR_TEXT&&t.text.set(void 0,r,e),s&mn.COLOR_TEXT_OUTLINE&&t.text.outline.set(void 0,r,e);else null!=u?(s&mn.COLOR_FILL&&(h=wn.toBaseFill(t,n),t.fill.set(void 0,gn.blend(h.color,r,u),h.alpha)),s&mn.COLOR_STROKE&&(h=wn.toBaseStroke(t,n),t.stroke.set(void 0,gn.blend(h.color,r,u),h.alpha)),s&mn.COLOR_TEXT&&(h=wn.toBaseText(t,n),t.text.set(void 0,gn.blend(h.color,r,u),h.alpha)),s&mn.COLOR_TEXT_OUTLINE&&(h=wn.toBaseTextOutline(t,n),t.text.outline.set(void 0,gn.blend(h.color,r,u),h.alpha))):(s&mn.COLOR_FILL&&(h=wn.toBaseFill(t,n),t.fill.set(void 0,r,h.alpha)),s&mn.COLOR_STROKE&&(h=wn.toBaseStroke(t,n),t.stroke.set(void 0,r,h.alpha)),s&mn.COLOR_TEXT&&(h=wn.toBaseText(t,n),t.text.set(void 0,r,h.alpha)),s&mn.COLOR_TEXT_OUTLINE&&(h=wn.toBaseTextOutline(t,n),t.text.outline.set(void 0,r,h.alpha)));n.written|=s}else null!=e&&(null!=u?(s&mn.COLOR_FILL&&(h=wn.toBaseFill(t,n),t.fill.set(void 0,h.color,Bn.blend(h.alpha,e,u))),s&mn.COLOR_STROKE&&(h=wn.toBaseStroke(t,n),t.stroke.set(void 0,h.color,Bn.blend(h.alpha,e,u))),s&mn.COLOR_TEXT&&(h=wn.toBaseText(t,n),t.text.set(void 0,h.color,Bn.blend(h.alpha,e,u))),s&mn.COLOR_TEXT_OUTLINE&&(h=wn.toBaseTextOutline(t,n),t.text.outline.set(void 0,h.color,Bn.blend(h.alpha,e,u)))):(s&mn.COLOR_FILL&&(h=wn.toBaseFill(t,n),t.fill.set(void 0,h.color,e)),s&mn.COLOR_STROKE&&(h=wn.toBaseStroke(t,n),t.stroke.set(void 0,h.color,e)),s&mn.COLOR_TEXT&&(h=wn.toBaseText(t,n),t.text.set(void 0,h.color,e)),s&mn.COLOR_TEXT_OUTLINE&&(h=wn.toBaseTextOutline(t,n),t.text.outline.set(void 0,h.color,e))),n.written|=s)},n}(En),Pn={COLOR_AND_ALPHA:0,COLOR:1,ALPHA:2,CODE:3,BRIGHTNESS:4},Un=function(t){function n(n){var i=t.call(this,n)||this;switch(n.target){case Pn.COLOR:i.color=n.color,i.alpha=null;break;case Pn.ALPHA:i.color=null,i.alpha=n.alpha;break;default:i.color=n.color,i.alpha=n.alpha}return i.blend=pn.ofNumberOrNull(n.blend),i}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.color,e=this.alpha,u=this.blend(t,i,On);this.set(t,n,i,r,e,u)}},n}(_n),Fn={NONE:0,FILL:1,STROKE:2,TEXT:4,TEXT_OUTLINE:8,FILL_AND_STROKE:3,ALL:15},Gn={FILL:0,STROKE:1,FILL_AND_STROKE:2,TEXT:3,TEXT_OUTLINE:4,ALL:5},Hn=function(){function t(){}return t.from=function(t){if(t[0]===kn.CHANGE_COLOR)return t[2];switch(t[2]){case Gn.FILL:return Fn.FILL;case Gn.STROKE:return Fn.STROKE;case Gn.FILL_AND_STROKE:return Fn.FILL_AND_STROKE;case Gn.TEXT:return Fn.TEXT;case Gn.TEXT_OUTLINE:return Fn.TEXT_OUTLINE;case Gn.ALL:return Fn.ALL}},t.unpack=function(t){var n=[];return t&Fn.FILL&&n.push(Fn.FILL),t&Fn.STROKE&&n.push(Fn.STROKE),t&Fn.TEXT&&n.push(Fn.TEXT),t&Fn.TEXT_OUTLINE&&n.push(Fn.TEXT_OUTLINE),n},t.pack=function(t){for(var n=Fn.NONE,i=0,r=t.length;i<r;++i)n|=t[i];return n},t}(),zn=function(t){function n(n,i,r,e,u,s){var h=t.call(this,kn.CHANGE_COLOR,i,n)||this;return h.target=r,h.color=e,h.alpha=u,h.blend=s,h}return G(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.target===i.target&&this.color===i.color&&this.alpha===i.alpha&&this.blend===i.blend},n.prototype.toRuntime=function(){return new Un(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.blend);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(this.target,",").concat(this.color,",").concat(this.alpha,",").concat(i,"]"))},n.deserialize=function(t,i){var r=Hn.from(t),e=Ln.toResource(1,t,i.resources),u=Ln.toResource(6,t,i.resources);return new n(r,e,t[3],t[4],t[5],u)},n}(yn),Vn=function(t){function n(n){var i=t.call(this,n)||this;return i.brightness=pn.ofNumberOrNull(n.brightness),i}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.brightness(t,i,On);this.set(t,n,i,r)}},n.prototype.set=function(t,n,i,r){var e=this.reset;if(null!=r){var u=this.toAdjusted;if(e&mn.COLOR_FILL){var s=wn.toBaseFill(t,n);t.fill.set(void 0,u(s.color,r),s.alpha)}e&mn.COLOR_STROKE&&(s=wn.toBaseStroke(t,n),t.stroke.set(void 0,u(s.color,r),s.alpha)),e&mn.COLOR_TEXT&&(s=wn.toBaseText(t,n),t.text.set(void 0,u(s.color,r),s.alpha)),e&mn.COLOR_TEXT_OUTLINE&&(s=wn.toBaseTextOutline(t,n),t.text.outline.set(void 0,u(s.color,r),s.alpha)),n.written|=e}},n.prototype.toAdjusted=function(t,n){return 0<=n?gn.brighten(t,+n):gn.darken(t,-n)},n}(_n),Wn=function(t){function n(n,i,r){var e=t.call(this,kn.CHANGE_COLOR,i,n)||this;return e.brightness=r,e}return G(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.brightness===i.brightness},n.prototype.toRuntime=function(){return new Vn(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=Pn.BRIGHTNESS,r=t.addResource(this.brightness);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,",").concat(r,"]"))},n.deserialize=function(t,i){return new n(Hn.from(t),Ln.toResource(1,t,i.resources),Ln.toResource(4,t,i.resources))},n}(yn),Xn=function(t){function n(n){var i=t.call(this,n)||this;return i.color=pn.ofNumberOrNull(n.color),i.alpha=pn.ofNumberOrNull(n.alpha),i.blend=pn.ofNumberOrNull(n.blend),i}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.color(t,i,On),e=this.alpha(t,i,On),u=this.blend(t,i,On);this.set(t,n,i,r,e,u)}},n}(_n),Kn=function(t){function n(n,i,r,e,u){var s=t.call(this,kn.CHANGE_COLOR,i,n)||this;return s.color=r,s.alpha=e,s.blend=u,s}return G(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.color===i.color&&this.alpha===i.alpha&&this.blend===i.blend},n.prototype.toRuntime=function(){return new Xn(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=Pn.CODE,r=t.addResource(this.color),e=t.addResource(this.alpha),u=t.addResource(this.blend);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,",").concat(r,",").concat(e,",").concat(u,"]"))},n.deserialize=function(t,i){return new n(Hn.from(t),Ln.toResource(1,t,i.resources),Ln.toResource(4,t,i.resources),Ln.toResource(5,t,i.resources),Ln.toResource(6,t,i.resources))},n}(yn),Yn=function(t){function n(n){var i=t.call(this,n,mn.CURSOR)||this;return i.name=pn.ofStringOrNull(n.name),i}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.name(t,i,On);null!=r&&(t.cursor=r,n.written|=this.reset)}},n}(En),Jn=function(t){function n(n,i){var r=t.call(this,kn.CHANGE_CURSOR,n)||this;return r.name=i,r}return G(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.name===i.name},n.prototype.toRuntime=function(){return new Yn(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.name);return t.addResource("[".concat(this.type,",").concat(n,",").concat(i,"]"))},n.deserialize=function(t,i){return new n(Ln.toResource(1,t,i.resources),Ln.toResource(2,t,i.resources))},n}(Rn),Zn=function(){function t(){}return t.prototype.format=function(t,n,i){return i.getHours()<12?"AM":"PM"},t}(),qn=function(){function t(){}return t.prototype.format=function(t,n,i){return i.getHours()<12?"am":"pm"},t}(),Qn=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getDate())},t}(),$n=function(){function t(){}return t.prototype.format=function(t,n,i){return"".concat(0|t)},t}(),ti=function(t){this.precision=null!=t?+t.substring(1,t.length):void 0},ni=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.format=function(t,n,i){return t.toExponential(this.precision)},n}(ti),ii=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.format=function(t,n,i){return t.toFixed(this.precision)},n}(ti),ri=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.format=function(t,n,i){var r=this.toAbs(t,n,i);return r<1e-24?this.ln(t,1,""):r<1e-21?this.ln(t,1e24,"y"):r<1e-18?this.ln(t,1e21,"z"):r<1e-15?this.ln(t,1e18,"a"):r<1e-12?this.ln(t,1e15,"f"):r<1e-9?this.ln(t,1e12,"p"):r<1e-6?this.ln(t,1e9,"n"):r<.001?this.ln(t,1e6,""):r<1?this.ln(t,1e3,"m"):r<1e3?this.ln(t,1,""):r<1e6?this.ln(t,.001,"k"):r<1e9?this.ln(t,1e-6,"M"):r<1e12?this.ln(t,1e-9,"G"):r<1e15?this.ln(t,1e-12,"T"):r<1e18?this.ln(t,1e-15,"P"):r<1e21?this.ln(t,1e-18,"E"):r<1e24?this.ln(t,1e-21,"Z"):this.ln(t,1e-24,"Y")},n.prototype.toAbs=function(t,n,i){return Math.abs(t)},n.prototype.ln=function(t,n,i){return"".concat((t*n).toFixed(this.precision)).concat(i)},n}(ti),ei=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.format=function(t,n,i){return t.toPrecision(this.precision)},n}(ti),ui=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getHours())},t}(),si=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getHours()%12)},t}(),hi=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getMonth()+1)},t}(),oi=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getMinutes())},t}(),ai=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getMilliseconds())},t}(),ci=function(){function t(){}return t.prototype.format=function(t,n,i){return"".concat(100*t|0,"%")},t}(),fi=function(){function t(){}return t.prototype.format=function(t,n,i){return"".concat(0|t,"%")},t}(),li=function(){function t(t,n,i){this.length=t,this.character=n,this.node=i}return t.prototype.format=function(t,n,i){return dn(this.node.format(t,n,i),this.length,this.character)},t}(),vi=function(){function t(t){this.node=t}return t.prototype.format=function(t,n,i){var r=this.node.format(t,n,i);return 0<r.length&&"-"===r[0]?"(".concat(r.substring(1,r.length),")"):r},t}(),bi=function(){function t(t){this.node=t}return t.prototype.format=function(t,n,i){var r=this.node.format(t,n,i);return 0<r.length&&"-"!==r[0]?"+".concat(r):r},t}(),di=function(){function t(){}return t.prototype.format=function(t,n,i){return"".concat(Math.round(100*t),"%")},t}(),gi=function(){function t(){}return t.prototype.format=function(t,n,i){return"".concat(Math.round(t),"%")},t}(),mi=function(){function t(t,n,i,r,e,u,s){this.Y=t,this.M=n,this.D=i,this.H=r,this.m=e,this.s=u,this.mi=s}return t.prototype.format=function(t,n,i){if(n<1e3)return"".concat(this.s.format(t,n,i),".").concat(this.mi.format(t,n,i));if(n<6e4)return"".concat(this.m.format(t,n,i),":").concat(this.s.format(t,n,i));if(n<36e5)return"".concat(this.H.format(t,n,i),":").concat(this.m.format(t,n,i));if(n<864e5){var r=this.M.format(t,n,i),e=this.D.format(t,n,i);return"".concat(r,"/").concat(e," ").concat(this.H.format(t,n,i))}return n<2592e6?"".concat(this.M.format(t,n,i),"/").concat(this.D.format(t,n,i)):"".concat(this.Y.format(t,n,i),"/").concat(this.M.format(t,n,i))},t}(),wi=function(){function t(t){this.node=t}return t.prototype.format=function(t,n,i){var r=this.node.format(t,n,i);return 0<r.length&&"-"!==r[0]?" ".concat(r):r},t}(),Oi=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.toAbs=function(t,n,i){return Math.abs(n)},n}(ri),pi=function(){function t(t){this.str=t}return t.prototype.format=function(t,n,i){return this.str},t}(),Di=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getFullYear())},t}(),Ei=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getFullYear()%100)},t}(),Mi=function(){function t(){}return t.prototype.format=function(t,n,i){var r=i.getTimezoneOffset(),e=r<=0?"+":"-",u=dn(String(Math.floor(Math.abs(r)/60)),2,"0"),s=dn(String(Math.floor(Math.abs(r)%60)),2,"0");return"".concat(e).concat(u,":").concat(s)},t}(),Si=function(){function t(){}return t.prototype.format=function(t,n,i){return"".concat(Math.round(t))},t}(),ji=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getSeconds())},t}(),Ti=void 0,Ii=function(t,n,i){switch(t){case"_":return new li(n," ",i);case"-":return i;default:return new li(n,"0",i)}},Ci=function(t,n){switch(t){case"_":return new wi(n);case"+":return new bi(n);case"(":return new vi(n);default:return n}},Ni=function(){function t(t){var n=function(t){for(var n=0,i=!1,r=[],e=function(){var t=Ti;return t?t.lastIndex=0:Ti=t=/%(0|_|-|\+|\()?(\.\d+)?(Y(?:MD?)?|y(?:MD?)?|MD?|D|H(?:ms?)?|h(?:ms?)?|m(?:i|s)?|a|A|s(?:s?i|dt)?|z|%|f(?:si)?|e|g|d|r(?:d|p)|p|P|RP)/g,t}();;){var u=e.exec(t);if(null==u){n<t.length&&r.push(new pi(t.substring(n,t.length)));break}var s=u.index;n<s&&r.push(new pi(t.substring(n,s))),n=s+u[0].length;var h=u[0],o=u[1],a=u[2];switch(u[3]){case"Y":i=!0,r.push(new Di);break;case"YM":i=!0,r.push(new Di,new pi("/"),Ii(o,2,new hi));break;case"YMD":i=!0,r.push(new Di,new pi("/"),Ii(o,2,new hi),new pi("/"),Ii(o,2,new Qn));break;case"y":i=!0,r.push(Ii(o,2,new Ei));break;case"yM":i=!0,r.push(Ii(o,2,new Ei),new pi("/"),Ii(o,2,new hi));break;case"yMD":r.push(Ii(o,2,new Ei),new pi("/"),Ii(o,2,new hi),new pi("/"),Ii(o,2,new Qn));break;case"M":i=!0,r.push(Ii(o,2,new hi));break;case"MD":i=!0,r.push(Ii(o,2,new hi),new pi("/"),Ii(o,2,new Qn));break;case"D":i=!0,r.push(Ii(o,2,new Qn));break;case"H":i=!0,r.push(Ii(o,2,new ui));break;case"Hm":i=!0,r.push(Ii(o,2,new ui),new pi(":"),Ii(o,2,new oi));break;case"Hms":i=!0,r.push(Ii(o,2,new ui),new pi(":"),Ii(o,2,new oi),new pi(":"),Ii(o,2,new ji));break;case"h":i=!0,r.push(Ii(o,2,new si));break;case"hm":i=!0,r.push(Ii(o,2,new si),new pi(":"),Ii(o,2,new oi));break;case"hms":i=!0,r.push(Ii(o,2,new si),new pi(":"),Ii(o,2,new oi),new pi(":"),Ii(o,2,new ji));break;case"m":i=!0,r.push(Ii(o,2,new oi));break;case"ms":i=!0,r.push(Ii(o,2,new oi),new pi(":"),Ii(o,2,new ji));break;case"mi":i=!0,r.push(Ii(o,3,new ai));break;case"a":i=!0,r.push(new qn);break;case"A":i=!0,r.push(new Zn);break;case"s":i=!0,r.push(Ii(o,2,new ji));break;case"sdt":i=!0,r.push(new mi(new Di,Ii(o,2,new hi),Ii(o,2,new Qn),Ii(o,2,new ui),Ii(o,2,new oi),Ii(o,2,new ji),Ii(o,3,new ai)));break;case"z":i=!0,r.push(new Mi);break;case"%":r.push(new pi("%"));break;case"f":r.push(Ci(o,new ii(a)));break;case"e":r.push(Ci(o,new ni(a)));break;case"g":r.push(Ci(o,new ei(a)));break;case"rd":r.push(Ci(o,new Si));break;case"d":r.push(Ci(o,new $n));break;case"P":r.push(Ci(o,new ci));break;case"p":r.push(Ci(o,new fi));break;case"RP":r.push(Ci(o,new di));break;case"rp":r.push(Ci(o,new gi));break;case"fsi":r.push(Ci(o,new ri(a)));break;case"ssi":r.push(Ci(o,new Oi(a)));break;default:r.push(new pi(h))}}return{nodes:r,date:i}}(t);this.date=n.date,this.nodes=n.nodes}return t.prototype.format=function(n,i){var r=this.nodes,e=t.DATE;null==e&&(e=new Date,t.DATE=e),this.date&&e.setTime(n);for(var u="",s=0,h=r.length;s<h;++s)u+=r[s].format(n,i,e);return u},t}(),Ai=function(){function t(){}return t.create=function(t){return new Ni(t)},t}(),Ri=function(t){function n(n){var i=t.call(this,n,mn.TEXT)||this;return i.number=pn.ofNumber(n.value),i.formatters=new Map,i}return G(n,t),n.prototype.getFormatter=function(t,n){var i=this.formatters,r=n.text.value,e=i.get(r);return void 0===e&&(e=this.newFormatter(r),i.set(r,e)),e},n.prototype.newFormatter=function(t){return 0<(t=t.trim()).length?Ai.create(t):null},n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.number(t,i,On),e=this.getFormatter(t,n);t.text.value=null!=e?e.format(r,0):String(r),n.written|=this.reset}},n}(En),yi=function(t){function n(n){var i=t.call(this,n,mn.TEXT)||this;return i.text=pn.ofString(n.value),i}return G(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i,On)&&(t.text.value=this.text(t,i,On),n.written|=this.reset)},n}(En),ki={TEXT:0,NUMBER:1},Li=function(t){function n(n,i,r){var e=t.call(this,kn.CHANGE_TEXT,i,n)||this;return e.value=r,e}return G(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.value===i.value},n.prototype.toRuntime=function(){switch(this.subtype){case ki.TEXT:return new yi(this);case ki.NUMBER:return new Ri(this)}},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.value);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,"]"))},n.deserialize=function(t,i){var r=Ln.toResource(1,t,i.resources),e=Ln.toResource(3,t,i.resources);return new n(t[2],r,e)},n}(yn),xi={DIAGRAM:0,PAGE:1,EXTENSION:1e3},Bi=function(){function t(t){this.vn=this.newSources(t)}return t.prototype.map=function(n,i,r){var e=this.vn;if(null==e)return!1;var u=n.id,s=u.toLowerCase(),h=s.length;if(h!==u.length)return!1;var o=e[0],a=o.length;if(0!==a&&0!==s.indexOf(o))return!1;var c=t.SPANS;c[0]=0,c[1]=a;for(var f=e.length,l=1;l<f;++l){var v=l<<1,b=e[l],d=b.length;if(0===d)c[v]=h,c[v+1]=h;else{var g=s.indexOf(b,c[v-1]);if(g<0)return!1;c[v]=g,c[v+1]=g+d}}if(null!=i){for(var m=i.length,w="",O=(l=0,f);l<O;++l){var p=l<m?i[l]:e[l],D=c[1+(v=l<<1)],E=c[v+2];w+=p+u.substring(D,l+1<O?E:h)}n.id=w}return 0<r.length&&(n.initial=r),!0},t.prototype.newSources=function(n){if(null==n)return null;var i=n.trim();return i.length<=0?null:i.toLowerCase().split(t.WILDCARD)},t.split=function(t){if(null==t)return null;var n=t.trim();return n.length<=0?null:n.split(this.WILDCARD)},t.WILDCARD="*",t.SPANS=[],t}(),_i=function(){function t(t,n,i,r,e){this.resources=t.resources,this.data=t.data||t.tags||t.resources,this.pieces=n,this.pieceData=i,this.mode=r,this.depth=e,this.bn=new Map,this.dn=new Map,this.gn=new Map,this.Vt=new Map,this.mn=new Map,this.wn=new Map,this.On=new Map,this.pn=new Map,this.Dn=new Map,this.En=new Map,this.Mn=new Map,this.Sn=new Map,this.jn=new Map,this.Tn=new Map,this.In=new Map,this.Cn=new Map}return t.prototype.getAction=function(t){return this.bn.get(t)},t.prototype.setAction=function(t,n){this.bn.set(t,n)},t.prototype.getFill=function(t){return this.dn.get(t)},t.prototype.setFill=function(t,n){this.dn.set(t,n)},t.prototype.getStroke=function(t){return this.gn.get(t)},t.prototype.setStroke=function(t,n){this.gn.set(t,n)},t.prototype.getData=function(t){return this.Vt.get(t)},t.prototype.setData=function(t,n){this.Vt.set(t,n)},t.prototype.getDataValue=function(t){return this.mn.get(t)},t.prototype.setDataValue=function(t,n){this.mn.set(t,n)},t.prototype.getDataMapping=function(t){return this.wn.get(t)},t.prototype.setDataMapping=function(t,n){this.wn.set(t,n)},t.prototype.getDataMapper=function(t){var n=this.On,i=n.get(t);return void 0===i&&(i=new Bi(t),n.set(t,i)),i},t.prototype.getDataDestination=function(t){var n=this.pn,i=n.get(t);return void 0===i&&(i=Bi.split(t),n.set(t,i)),i},t.prototype.getDataSystem=function(t){return this.Dn.get(t)},t.prototype.setDataSystem=function(t,n){this.Dn.set(t,n)},t.prototype.getRange=function(t){return this.En.get(t)},t.prototype.setRange=function(t,n){this.En.set(t,n)},t.prototype.getAlign=function(t){return this.Mn.get(t)},t.prototype.setAlign=function(t,n){this.Mn.set(t,n)},t.prototype.getMargin=function(t){return this.Sn.get(t)},t.prototype.setMargin=function(t,n){this.Sn.set(t,n)},t.prototype.getText=function(t){return this.jn.get(t)},t.prototype.setText=function(t,n){this.jn.set(t,n)},t.prototype.getTextOutline=function(t){return this.Tn.get(t)},t.prototype.setTextOutline=function(t,n){this.Tn.set(t,n)},t.prototype.getCapability=function(t){return this.In.get(t)},t.prototype.setCapability=function(t,n){this.In.set(t,n)},t.prototype.getExtension=function(t){return this.Cn.get(t)},t.prototype.setExtension=function(t,n){this.Cn.set(t,n)},t}(),Pi={VIEWER:0,EDITOR_DATA_MAPPED:1,EDITOR:2},Ui={NONE:0,TOP:1,RIGHT:2,BOTTOM:4,LEFT:8,ALL:15},Fi={TAIL:1,HEAD:2,ALL:3},Gi=function(t){function n(n){return void 0===n&&(n=r.CIRCLE),t.call(this,n)||this}return G(n,t),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(n,i,r,e,u,s,h){return!!t.prototype.containsAbsBBox.call(this,n,i,r,e)&&un(this,n,i,r,e,u,s)},n}(en),Hi=function(t){function n(n){void 0===n&&(n=r.EMBEDDED_ACCEPTOR_EDGE);var i=t.call(this,n)||this;return i.Nn=Fi.HEAD,i.yt=Ui.ALL,i.An=!0,i}return G(n,t),Object.defineProperty(n.prototype,"subtype",{get:function(){return this.Nn},set:function(t){this.Nn=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"side",{get:function(){return this.yt},set:function(t){this.yt=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"vvisible",{get:function(){return this.An},set:function(t){this.An=t},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.copy=function(i,r){return void 0===r&&(r=dt.ALL),t.prototype.copy.call(this,i,r),i instanceof n&&(this.Nn=i.subtype,this.yt=i.side,this.An=i.vvisible),this},n.prototype.serialize=function(n){var i=t.prototype.serialize.call(this,n);return i[15]=this.Nn|this.yt<<2|(this.An?64:0),i},n}(Gi),zi=function(){function t(){}return t.get=function(t){var n=this.mappings[t];return null!=n?n:Lt.PRIMITIVE},t.contains=function(t,n){if(null!=t){var i=this.get(t.type),r=t.getCapability();return null!=r&&(i&=~r.removed,i|=r.added,i&=~r.locked),(i&n)===n}return!1},t.set=function(t,n){this.mappings[t]=n},t.mappings={},t}(),Vi=function(t){return Math.abs(t)<.001?t<0?-.001:.001:t},Wi=function(){function n(n,i,r){this.shape=n,this.base=new t.Point(i,r);var e=n.size;this.shapeBase=new t.Point(e.x,e.y),this.transform=new t.Matrix,n.updateTransform(),n.transform.localTransform.copyTo(this.transform),this.capable=zi.contains(n,Lt.POSITION)&&zi.contains(n,Lt.WIDTH)&&zi.contains(n,Lt.HEIGHT)&&zi.contains(n,Lt.ROTATION)&&zi.contains(n,Lt.SKEW)}return n.prototype.isCompatible=function(t){return this.shape===t},n.prototype.reset=function(t,n,i){this.base.set(n,i);var r=t.size;this.shapeBase.copyFrom(r),t.updateTransform(),t.transform.localTransform.copyTo(this.transform)},n.prototype.update=function(t,i,r,e,u){if(this.capable){var s=i/this.base.x,h=r/this.base.y,o=this.shapeBase,a=n.WORK_TRANSFORM;a.identity().append(this.transform).translate(-e,-u).scale(s,h).translate(+e,+u),t.lock(_t.TRANSFORM_AND_UPLOADED),this.apply(t,a,Lt.ALL,o),t.unlock(_t.TRANSFORM_CHILD,!1),t.unlock(_t.TRANSFORM_THIS|_t.TRANSFORM_PARENT|_t.UPLOADED,!0)}},n.prototype.apply=function(t,n,i,r){var e=n.a,u=n.b,s=n.c,h=n.d,o=n.tx,a=n.ty,c=t.transform,f=!!(i&Lt.POSITION),l=!!(i&Lt.ROTATION),v=!!(i&Lt.SKEW),b=!!(i&Lt.WIDTH),d=!!(i&Lt.HEIGHT);if(l||v){var g=Math.atan2(-s,h),m=Math.atan2(+u,e);if(l&&(c.rotation=.5*(g+m)),v){var w=.5*(m-g);c.skew.set(w,w)}}if(f){var O=c.pivot,p=O.x,D=O.y;c.position.set(o+(e*p+s*D),a+(u*p+h*D))}if(null!=r&&(b||d)){var E=Vi(r.x*Math.sqrt(e*e+u*u)),M=Vi(r.y*Math.sqrt(s*s+h*h)),S=t.size;b&&d?S.set(E,M):b?S.x=E:S.y=M}},n.WORK_TRANSFORM=new t.Matrix,n}(),Xi=function(){function n(n,i,r,e){this.Rn=new t.Rectangle,this.yn=new t.Rectangle,this.g=n,this.kn=[],this.j=new t.Point(i,r),this.Ln=e}return n.prototype.init=function(){return this},Object.defineProperty(n.prototype,"x",{get:function(){return this.j.x},set:function(t){var n=this.j;if(n.x!==t){var i=n.x;n.x=t,this.onChange(i,n.y)}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this.j.y},set:function(t){var n=this.j;if(n.y!==t){var i=n.y;n.y=t,this.onChange(n.x,i)}},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n){var i=!1,r=this.j,e=r.x,u=r.y;return null!=t&&e!==t&&(i=!0,r.x=t),null!=n&&u!==n&&(i=!0,r.y=n),i&&this.onChange(e,u),this},n.prototype.clone=function(){var t=this.j;return new n(this.g,t.x,t.y,this.Ln)},n.prototype.copy=function(){},n.prototype.copyFrom=function(t){var n=t.x,i=t.y,r=this.j,e=r.x,u=r.y;return e===n&&u===i||(r.x=n,r.y=i,this.onChange(e,u)),this},n.prototype.copyTo=function(t){return this.j.copyTo(t)},n.prototype.equals=function(t){return this.j.equals(t)},n.prototype.fit=function(){return this.Ln&&this.doFit(),this},n.prototype.doFit=function(){var t=this.g;t.lock(_t.TRANSFORM);var n=this.calcRect(this.yn),i=this.j;i.set(n.width,n.height),t.updateTransform();var r=t.transform,e=n.x+.5*n.width,u=n.y+.5*n.height,s=r.position,h=r.localTransform,o=h.a,a=h.b,c=h.c,f=h.d,l=r.pivot,v=e-l.x,b=u-l.y;s.set(s.x+(o*v+c*b),s.y+(a*v+f*b)),l.set(e,u),this.reset(t.children,this.kn,i),t.unlock(_t.TRANSFORM_CHILD|_t.TRANSFORM_THIS,!0),t.unlock(_t.TRANSFORM_PARENT,!1)},n.prototype.reset=function(t,n,i){for(var r=0,e=Math.min(n.length,t.length);r<e;++r){var u=t[r],s=n[r];if(!s.isCompatible(u)){n.length=r;break}s.reset(u,i.x,i.y)}t.length<n.length&&(n.length=t.length)},n.prototype.calcRect=function(t){var n=this.g.children;if(n.length<=0)t.x=0,t.y=0,t.width=0,t.height=0;else{var i=this.Rn;n[0].getBoundsLocal(!1,t);for(var r=1,e=n.length;r<e;++r)n[r].getBoundsLocal(!1,i),t.enlarge(i)}return t},n.prototype.onChange=function(t,n){var i=this.g,r=this.j,e=i.transform.pivot;this.xn(i.children,this.kn,r.x,r.y,e.x,e.y,t,n),i.onSizeChange()},n.prototype.xn=function(t,n,i,r,e,u,s,h){for(var o=0,a=Math.min(n.length,t.length);o<a;++o){var c=t[o];if(!(f=n[o]).isCompatible(c)){n.length=o;break}f.update(c,i,r,e,u)}for(o=n.length,a=t.length;o<a;++o){var f;c=t[o],(f=this.newLayout(c,s,h)).update(c,i,r,e,u),n.push(f)}n.length!==t.length&&(n.length=t.length)},n.prototype.newLayout=function(t,n,i){return t.layout||new Wi(t,n,i)},n}(),Ki=function(){function n(n,i,r,e,u){this.g=n,this._x=i,this._y=r,this.Bn=new t.Point(e,u)}return Object.defineProperty(n.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"base",{get:function(){return this.Bn},enumerable:!1,configurable:!0}),n.prototype.init=function(){return this.Bn.copyFrom(this),this.onChange(),this},n.prototype.clone=function(){var t=this.Bn;return new n(this.g,this._x,this._y,t.x,t.y)},n.prototype.set=function(t,n){var i=!1;return null!=t&&this._x!==t&&(this._x=t,i=!0),null!=n&&this._y!==n&&(this._y=n,i=!0),i&&this.onChange(),this},n.prototype.copyFrom=function(t){return t instanceof n&&this.Bn.copyFrom(t.base),this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.onChange()),this},n.prototype.copyTo=function(t){return t instanceof n&&this.Bn.copyTo(t.base),t.set(this._x,this._y),t},n.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},n.prototype.fit=function(){return this},n.prototype.onChange=function(){var t=this.Bn;this.g.transform.scale.set(this._x/t.x,this._y/t.y)},n}(),Yi=function(){function t(){}return Object.defineProperty(t.prototype,"enable",{get:function(){return!0},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return 16777215},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return 1},set:function(t){},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){},t.prototype.set=function(t,n,i){},t.prototype.clone=function(){return new t},t.prototype.toObject=function(){return{enable:!0,color:16777215,alpha:1}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),Ji=function(){function t(){}return Object.defineProperty(t.prototype,"enable",{get:function(){return!1},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return 16777215},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return 1},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return 1},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"side",{get:function(){return Z.NONE},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return s.NONE},set:function(t){},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){},t.prototype.set=function(t,n,i,r,e,u,s){},t.prototype.clone=function(){return new t},t.prototype.toObject=function(){return{enable:!1,color:16777215,alpha:1,width:1,align:0,side:Z.NONE,style:s.NONE}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),Zi=function(t){function n(n,i,r){var e=t.call(this,r)||this;e._n=n,e.Pn=i;var u=e.newData();return e.data=u,e.tag=u,e.size=e.newGroupSize(n,i),e.fill=e.newGroupFill(),e.stroke=e.newGroupStroke(),e.text=e.newGroupText(),e}return G(n,t),Object.defineProperty(n.prototype,"mode",{get:function(){return this._n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"depth",{get:function(){return this.Pn},enumerable:!1,configurable:!0}),n.prototype.newGroupSize=function(t,n){var i=rt.SIZE_X,r=rt.SIZE_Y;return t!==Pi.VIEWER?new Xi(this,i,r,this.isGroupSizeFittable()):new Ki(this,i,r,i,r)},n.prototype.isGroupSizeFittable=function(){return!0},n.prototype.newData=function(){return new qt},n.prototype.newGroupFill=function(){return new Yi},n.prototype.newGroupStroke=function(){return new Ji},n.prototype.newGroupText=function(){return new nn(this,rt.TEXT_VALUE,rt.TEXT_COLOR,rt.TEXT_ALPHA,rt.TEXT_FAMILY,rt.TEXT_SIZE)},n.prototype.getBoundsSize=function(){var t=this.size;return t instanceof Ki?t.base:t},n.prototype.onChildTransformChange=function(){t.prototype.onChildTransformChange.call(this),this.size.fit()},Object.defineProperty(n.prototype,"corner",{get:function(){return ft.NONE},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"gradient",{get:function(){},set:function(t){},enumerable:!1,configurable:!0}),n.prototype.serializeGradient=function(t){return-1},Object.defineProperty(n.prototype,"radius",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"image",{get:function(){},set:function(t){},enumerable:!1,configurable:!0}),n.prototype.serializeImage=function(t){return-1},Object.defineProperty(n.prototype,"points",{get:function(){},set:function(t){},enumerable:!1,configurable:!0}),n.prototype.containsAbs=function(t,n,i,r,e,u,s){return!1},n}(Pt),qi=function(t){function n(n,i,e,u){void 0===u&&(u=r.EMBEDDED);var s=t.call(this,i,e,u)||this;return s.Un=n,s.Pn=e,s}return G(n,t),Object.defineProperty(n.prototype,"name",{get:function(){return this.Un},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"edges",{get:function(){var t;return null!==(t=this.G)&&void 0!==t?t:this.G=this.newEdges()},enumerable:!1,configurable:!0}),n.prototype.newEdges=function(){var t=new Map,n=this.children;if(null!=n)for(var i=this.size,r=i.x,e=i.y,u=.5*r,s=.5*e,h=0,o=n.length;h<o;++h)for(var a=n[h],c=a.transform.position,f=c.x+u,l=c.y+s,v=a.children,b=0,d=v.length;b<d;++b){var g=v[b];if(g instanceof Hi){g.transform.updateLocalTransform();var m=g.transform.localTransform;t.set(g.id,{type:g.subtype,x:this.toEdgePosition(f,m.tx,u,r),y:this.toEdgePosition(l,m.ty,s,e),normal:this.toEdgeNormal(-m.c,-m.d),size:{x:0,y:0},side:g.side})}}return t},n.prototype.toEdgePosition=function(t,n,i,r){return 1e-5<Math.abs(r)?(t+n-i)/r:0},n.prototype.toEdgeNormal=function(t,n){var i=t*t+n*n;if(1e-5<i){var r=1/i;return{x:t*r,y:n*r}}return{x:0,y:-1}},n.prototype.isGroupSizeFittable=function(){return!1},n.prototype.newGroupSize=function(t,n){var i=rt.SIZE_X,r=rt.SIZE_Y;return t!==Pi.VIEWER&&n<=0?new Xi(this,i,r,this.isGroupSizeFittable()):new Ki(this,i,r,i,r)},n.prototype.clone=function(){for(var t=this.newClone().copy(this),n=this.children,i=0,r=n.length;i<r;++i){var e=n[i].clone();e.parent=t,t.children.push(e)}return t.onChildTransformChange(),t.toDirty(),t},n.prototype.newClone=function(){return new(0,this.constructor)(this.Un,this._n,this.Pn,this.type)},n.prototype.serializeChildren=function(t){return[]},n.prototype.serializeImage=function(t){return-1},n.prototype.serializeGradient=function(t){return-1},n.prototype.serialize=function(n){var i=t.prototype.serialize.call(this,n);return i[15]=n.addPiece(this.Un),i},n.prototype.addUuid=function(t){this.uuid=t.addUuid(this.uuid)},n.prototype.updateUuid=function(t){this.uuid=t.updateUuid(this.uuid)},n}(Zi),Qi=function(){function t(t){this.Fn=t}return t.prototype.find=function(t){return this.getUuidToShape().get(t)},t.prototype.getUuidToShape=function(){var t=this.Gn;return null==t&&(t=this.newUuidToShape(),this.Gn=t),t},t.prototype.newUuidToShape=function(){var t=new Map;return this.fillUuidToShape(this.Fn,t),t},t.prototype.fillUuidToShape=function(t,n){for(var i=0,r=t.length;i<r;++i){var e=t[i];if(n.set(e.uuid,e),!(e instanceof qi)){var u=e.children;0<u.length&&this.fillUuidToShape(u,n)}}},t}(),$i=function(t,i){var e=n[t[0]]||n[r.NULL];if(null!=e){var u=e(t,i);if(null!=u)return u}throw new Error("Missing shape deserializers")},tr=function(t,n){for(var i=[],r=0,e=t.length;r<e;++r)i.push($i(t[r],n));return 0<i.length?Promise.all(i).then((function(i){return nr(t,i,new Qi(i),n),i})):null},nr=function(t,n,r,e){for(var u=0,s=t.length;u<s;++u){var h=t[u],o=n[u],a=i[h[0]];a&&a(h,o,r,e),nr(h[20],o.children,r,e)}},ir=function(t,n,i,r){this.name=t,this.width=n,this.height=i,this.layer=r},rr=function(t,n){return Tt(t)?n[t]:t},er=function(){function t(){this.G=new Map}return t.prototype.add=function(t,n,i,r,e,u,s,h,o){return this.G.set(t,{type:rr(n,Fi),x:i,y:r,normal:this.toNormal(i,r,e,u),size:{x:null!=s?s:0,y:null!=h?h:0},side:this.toSide(o)}),!0},t.prototype.toNormal=function(t,n,i,r){if(null!=i&&null!=r)return{x:i,y:r};var e=t*t+n*n;if(1e-5<e){var u=1/Math.sqrt(e);return{x:t*u,y:n*u}}return{x:0,y:0}},t.prototype.toSide=function(t){if(null==t)return Ui.TOP;if(jt(t))return t;if(Tt(t))return rr(t,Ui);for(var n=Ui.NONE,i=0,r=t.length;i<r;++i)n|=rr(t[i],Ui);return n},t.prototype.remove=function(t){var n=this.G,i=n.get(t);return null!=i?(n.delete(t),i):null},t.prototype.size=function(){return this.G.size},t.prototype.get=function(t,n){return this.G.get(n)||null},t.prototype.each=function(t,n){return this.G.forEach(n),this},t.prototype.contains=function(t){return this.G.has(t)},t.prototype.clear=function(){var t=this.G;return 0<t.size&&(t.clear(),!0)},t}(),ur=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.get=function(n,i){var r=this.getEdges(n);if(null!=r){var e=r.get(i);if(null!=e)return e}return t.prototype.get.call(this,n,i)},n.prototype.each=function(n,i){var r=this.getEdges(n);return null!=r&&r.forEach((function(t,n){i(t,n)})),t.prototype.each.call(this,n,i)},n.prototype.getEdges=function(t){return t instanceof qi?t.edges:null},n}(er),sr=function(){function t(){}return t.set=function(t,n){var i=this.Hn;null==i&&(i=new Map,this.Hn=i),i.set(t,n)},t.get=function(t){var n,i=this.Hn;if(null!=i){var e=i.get(t);if(null!=e)return e}var u=null!==(n=this.zn)&&void 0!==n?n:this.zn=new Map;switch(t){case r.EMBEDDED:var s=u.get(t);return null==s&&(s=this.newDefaultEmbedded(),u.set(t,s)),s;case r.EMBEDDED_ACCEPTOR_EDGE:var h=u.get(t);return null==h&&(h=this.newDefaultEmbeddedAcceptorEdge(),u.set(t,h)),h;default:var o=u.get(null);return null==o&&(o=this.newDefaultOther(),u.set(null,o)),o}},t.newDefaultEmbedded=function(){return this.initDefault(new ur)},t.newDefaultEmbeddedAcceptorEdge=function(){var t=new er;return t.add("CENTER",Fi.ALL,0,0,0,0),t},t.newDefaultOther=function(){return this.initDefault(new er)},t.initDefault=function(t){var n=1/Math.sqrt(2);return t.add("TOP",Fi.ALL,0,-.5,0,-1),t.add("LEFT",Fi.ALL,-.5,0,-1,0),t.add("RIGHT",Fi.ALL,.5,0,1,0),t.add("BOTTOM",Fi.ALL,0,.5,0,1),t.add("CENTER",Fi.ALL,0,0,0,0),t.add("TOP_LEFT",Fi.ALL,-.5,-.5,-n,-n),t.add("TOP_RIGHT",Fi.ALL,.5,-.5,n,-n),t.add("BOTTOM_LEFT",Fi.ALL,-.5,.5,-n,n),t.add("BOTTOM_RIGHT",Fi.ALL,.5,.5,n,n),t},t}(),hr=function(){function t(t){this.g=t,this.Vn=null,this.Wn=null,this._x=null,this._y=null}return Object.defineProperty(t.prototype,"shape",{get:function(){return this.Vn},set:function(t){this.set(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"edge",{get:function(){return this.Wn},set:function(t){this.set(void 0,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this.set(void 0,void 0,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this.set(void 0,void 0,void 0,t)},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){return this.set(t.shape,t.edge,t.x,t.y)},t.prototype.set=function(t,n,i,r){var e=!1;return void 0!==t&&this.Vn!==t&&(this.Vn=t,e=!0),void 0!==n&&this.Wn!==n&&(this.Wn=n,e=!0),void 0!==i&&this._x!==i&&(this._x=i,e=!0),void 0!==r&&this._y!==r&&(this._y=r,e=!0),e&&this.g.onAcceptorChange(),this},t}(),or=function(){function n(n,i){var r=this;this.g=n,this.et=i,this.Xn=new hr(this),this.Kn=new t.Matrix,this.Yn=new t.Matrix,this.Jn=!1,this.nt=new t.ObservablePoint((function(){r.onLocalChange()}),void 0),this.Zn=0,this.qn=0,this.Qn=new t.ObservablePoint((function(){r.onNormalChange()}),void 0),this.$n=0,this.ti=0,this.yt=Ui.TOP,this.ni=0,this.ii=null,this.ri=0,this.ei=!1,this.si=!1,this.hi=!1,this.oi=!1}return n.prototype.lock=function(){this.ri+=1,1===this.ri&&(this.ei=!1,this.si=!1,this.hi=!1,this.oi=!1)},n.prototype.unlock=function(){if(this.ri-=1,0===this.ri){var t=!1;this.si&&(this.Zn+=1,this.qn=this.Zn,t=!0),this.hi&&(this.$n+=1,this.ti=this.$n,t=!0),this.oi&&(t=!0),this.ei&&(this.Jn=!1,this.si||(this.Zn+=1),this.hi||(this.$n+=1),this.doFit()&&(t=!1)),t&&this.et()}},Object.defineProperty(n.prototype,"parent",{get:function(){return this.g},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"acceptor",{get:function(){return this.Xn},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"local",{get:function(){return this.nt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localId",{get:function(){return this.qn},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"normal",{get:function(){return this.Qn},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"normalId",{get:function(){return this.ti},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"side",{get:function(){return this.yt},set:function(t){this.yt!==t&&(this.yt=t,this.onOtherChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"margin",{get:function(){return this.ni},set:function(t){this.ni!==t&&(this.ni=t,this.onOtherChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"other",{get:function(){return this.ii},set:function(t){this.ii=t},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u,s,h,o,a){this.lock(),this.Xn.set(t,n,i,r);var c=this.nt;null!=u&&null!=s?c.set(u,s):null!=u?c.x=u:null!=s&&(c.y=s);var f=this.Qn;return null!=h&&null!=o?f.set(h,o):null!=h?f.x=h:null!=o&&(f.y=o),null!=a&&(this.side=a),null!=e&&(this.margin=e),this.unlock(),this},n.prototype.copy=function(t){return this.lock(),this.Xn.copy(t.acceptor),this.nt.copyFrom(t.local),this.Qn.copyFrom(t.normal),this.side=t.side,this.margin=t.margin,this.unlock(),this},n.prototype.serialize=function(t){var n=this.Xn,i=n.shape,r=i?i.uuid:null,e=n.edge,u=null!=e?t.addResource(e):-1,s=this.nt,h=this.Qn,o=this.yt;return t.addResource("[".concat(r,",").concat(u,",").concat(s.x,",").concat(s.y,",").concat(this.ni,",").concat(h.x,",").concat(h.y,",").concat(n.x,",").concat(n.y,",").concat(o,"]"))},n.prototype.deserialize=function(t,n,i){var r,e,u,s=i.resources;if(0<=t&&t<s.length){var h=i.getExtension(t);null==h&&(h=JSON.parse(s[t]),i.setExtension(t,h));var o=null,a=h[0];null!=a&&(o=n.find(a)||null),this.lock();var c=this.Xn;c.shape=o;var f=h[1];c.edge=0<=f&&f<s.length?s[f]:null,c.x=null!==(r=h[7])&&void 0!==r?r:null,c.y=null!==(e=h[8])&&void 0!==e?e:null,this.nt.set(h[2],h[3]);var l=h[5],v=h[6],b=this.Qn;null!=l&&null!=v?b.set(l,v):b.set(1,0),this.side=null!==(u=h[9])&&void 0!==u?u:Ui.TOP,this.margin=h[4]||0,this.unlock(),o&&o.connector.add(this)}},n.prototype.fit=function(t){return t&&(this.Zn+=1,this.$n+=1),this.doFit(),this},n.prototype.doFit=function(){var i,r,e,u=this.Zn,s=this.qn!==u,h=this.$n,o=this.ti!==h;if(s||o){this.qn=u,this.ti=h;var a=this.Xn,c=a.shape,f=a.edge;if(null!=c&&null!=f){var l=sr.get(c.type).get(c,f);if(l){var v=this.Yn,b=this.Kn;this.toAcceptorTransform(c,b);var d=this.ii,g=this.Jn&&null!=d&&null==d.acceptor.shape,m=null!==(i=n.WORK_MATRIX)&&void 0!==i?i:n.WORK_MATRIX=new t.Matrix;if(g&&v.copyTo(m).invert().prepend(b),this.Kn=v,this.Yn=b,this.Jn=!0,this.lock(),s){var w=this.nt,O=w.x,p=w.y,D=c.size,E=c.transform.pivot,M=E.x+D.x*(null!==(r=a.x)&&void 0!==r?r:l.x),S=E.y+D.y*(null!==(e=a.y)&&void 0!==e?e:l.y),j=b.a*M+b.c*S+b.tx,T=b.b*M+b.d*S+b.ty;if(w.set(j,T),g){var I=d.local,C=I.x,N=I.y,A=m.a*C+m.c*N+m.tx,R=m.b*C+m.d*N+m.ty,y=C-O,k=N-p,L=A-j,x=R-T,B=y*y+k*k,_=L*L+x*x;if(1e-6<_){var P=Math.sqrt(B/_);I.set(j+L*P,T+x*P)}else I.set(A,R)}}if(o){var U=l.normal,F=U.x,G=U.y,H=b.a*F+b.c*G,z=b.b*F+b.d*G,V=H*H+z*z,W=this.Qn;if(1e-6<V?(P=1/Math.sqrt(V),W.set(H*P,z*P)):W.set(F,G),g){var X=d.normal,K=X.x,Y=X.y,J=m.a*K+m.c*Y,Z=m.b*K+m.d*Y,q=J*J+Z*Z;1e-6<q?(P=1/Math.sqrt(q),X.set(J*P,Z*P)):X.set(K,Y)}}var Q=this.si||this.hi;return this.unlock(),Q}}}return!1},n.prototype.toAcceptorTransform=function(t,n){t.updateTransform();var i=this.g,r=i.parent;return r instanceof Pt?(i.updateTransform(),n.copyFrom(r.transform.internalTransform).invert().append(t.transform.internalTransform)):n.copyFrom(t.transform.internalTransform)},n.prototype.onAcceptorChange=function(){if(0<this.ri)return this.si=!1,this.hi=!1,void(this.ei=!0);this.Jn=!1,this.fit(!0)},n.prototype.onLocalChange=function(){0<this.ri?this.si=!0:(this.Zn+=1,this.qn=this.Zn,this.et())},n.prototype.onNormalChange=function(){0<this.ri?this.hi=!0:(this.$n+=1,this.ti=this.$n,this.et())},n.prototype.onOtherChange=function(){0<this.ri?this.oi=!0:this.et()},n.prototype.attach=function(){var t=this.Xn.shape;return t&&t.connector.add(this)&&this.onAcceptorChange(),this},n.prototype.detach=function(t){var n=this.Xn.shape;return null==n||null!=t&&t.has(n)||n.connector.remove(this)&&this.onAcceptorChange(),this},n}(),ar=function(){function t(t,n){var i=this;this.g=t,this.ri=0,this.Wt=!1,this.et=n;var r=function(){i.onChange()},e=new or(t,r),u=new or(t,r);e.other=u,u.other=e,this.ai=e,this.ci=u}return t.prototype.lock=function(){return this.ri+=1,1===this.ri&&(this.Wt=!1),this},t.prototype.unlock=function(){return this.ri-=1,0===this.ri&&this.Wt&&this.et(),this},t.prototype.onChange=function(){0<this.ri?this.Wt=!0:this.et()},Object.defineProperty(t.prototype,"tail",{get:function(){return this.ai},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"head",{get:function(){return this.ci},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){return this.lock(),this.ai.copy(t.tail),this.ci.copy(t.head),this.unlock(),this},t.prototype.fit=function(t){return this.lock(),this.ai.fit(t),this.ci.fit(t),this.unlock(),this},t.prototype.serialize=function(t){var n=this.ai.serialize(t),i=this.ci.serialize(t);return t.addResource("[".concat(n,",").concat(i,"]"))},t.prototype.deserialize=function(t,n,i){var r=i.resources;if(0<=t&&t<r.length){var e=i.getExtension(t);null==e&&(e=JSON.parse(r[t]),i.setExtension(t,e)),this.lock(),this.ai.deserialize(e[0],n,i),this.ci.deserialize(e[1],n,i),this.unlock()}},t.prototype.attach=function(){this.lock();var t=this.ai,n=this.ci;return t.attach(),n.attach(),t.fit(!0),n.fit(!0),this.unlock(),this},t.prototype.detach=function(t){return this.lock(),this.ai.detach(t),this.ci.detach(t),this.unlock(),this},t}(),cr=function(t,n){for(var i=0,r=t.length-1;i<=r;){var e=i+(r-i>>1),u=t[e];if(n<u)r=e-1;else{if(!(u<n))return e;i=e+1}}return-1},fr=function(t,n){if(2<=t.length){for(var i=t[0],r=t[1],e=i,u=r,s=2,h=t.length;s<h;s+=2){var o=t[s],a=t[s+1];i=Math.min(i,o),r=Math.min(r,a),e=Math.max(e,o),u=Math.max(u,a)}n[0]=i,n[1]=r,n[2]=e,n[3]=u}else n[0]=0,n[1]=0,n[2]=0,n[3]=0;return n},lr=function(){function n(n){var i=this;this.g=n,this.ri=0,this.fi=!1,this.li=!1,this.vi=!1,this.kt=et.NONE,this.j=new t.ObservablePoint((function(){i.onSizeChange()}),void 0,.15*rt.SIZE_X,.15*rt.SIZE_Y),this.I=this.newFill(),this.bi=0}return n.prototype.newFill=function(){return new ut(this,!0,rt.FILL_COLOR,1)},n.prototype.lock=function(){return this.ri+=1,1===this.ri&&(this.fi=!1,this.li=!1,this.vi=!1),this},n.prototype.unlock=function(){return this.ri-=1,0===this.ri&&(this.fi?this.onTypeChange():this.li?this.onSizeChange():this.vi&&this.onFillChange(),this.fi=!1,this.li=!1,this.vi=!1),this},Object.defineProperty(n.prototype,"type",{get:function(){return this.kt},set:function(t){this.kt!==t&&(this.kt=t,this.onTypeChange())},enumerable:!1,configurable:!0}),n.prototype.onTypeChange=function(){0<this.ri?this.fi=!0:this.g.onTypeChange()},Object.defineProperty(n.prototype,"size",{get:function(){return this.j},enumerable:!1,configurable:!0}),n.prototype.onSizeChange=function(){0<this.ri?this.li=!0:this.g.onSizeChange()},Object.defineProperty(n.prototype,"transform",{get:function(){return this.updateTransform()},enumerable:!1,configurable:!0}),n.prototype.updateTransform=function(){var n=this.T;null==n&&(n=new t.Matrix,this.T=n);var i=this.g.parent,r=i.id;if(this.bi!==r){this.bi=r;var e=i.formatted;2<=e.length?this.toTransform(e.values,n):n.identity()}return n},n.prototype.toTransformMatrix=function(t,n,i,r,e){var u=t-i,s=n-r,h=u*u+s*s;if(1e-5<h){var o=1/Math.sqrt(h),a=u*o,c=s*o;e.set(c,-a,-a,-c,t,n)}else e.set(1,0,0,1,t,n);return e},Object.defineProperty(n.prototype,"fill",{get:function(){return this.I},enumerable:!1,configurable:!0}),n.prototype.onFillChange=function(){0<this.ri?this.vi=!0:this.g.onFillChange()},n.prototype.updateUploaded=function(){this.onFillChange()},n.prototype.copy=function(t){var n=t.size;return this.set(t.type,n.x,n.y),this},n.prototype.set=function(t,n,i){return this.lock(),null!=t&&(this.type=t),this.size.set(n,i),this.unlock(),this},n.prototype.serialize=function(t){var n=this.j,i=this.I.serialize(t);return t.addResource("[".concat(this.kt,",").concat(n.x,",").concat(n.y,",").concat(i,"]"))},n.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getExtension(t);null==r&&(r=JSON.parse(i[t]),n.setExtension(t,r)),this.lock(),this.type=r[0],this.j.set(r[1],r[2]),this.I.deserialize(r[3],n),this.unlock()}},n}(),vr=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.toTransform=function(t,n){var i=t.length;return 4<=i?this.toTransformMatrix(t[i-2],t[i-1],t[i-4],t[i-3],n):(n.identity(),n)},n}(lr),br=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.toTransform=function(t,n){return 4<=t.length?this.toTransformMatrix(t[0],t[1],t[2],t[3],n):(n.identity(),n)},n}(lr),dr=function(){function t(t){this.g=t,this.ri=0,this.fi=!1,this.li=!1,this.vi=!1,this.ci=new vr(this),this.ai=new br(this)}return t.prototype.lock=function(){return this.ri+=1,1===this.ri&&(this.fi=!1,this.li=!1,this.vi=!1),this},t.prototype.unlock=function(){return this.ri-=1,0===this.ri&&(this.fi?this.onTypeChange():this.li?this.onSizeChange():this.vi&&this.onFillChange(),this.fi=!1,this.li=!1,this.vi=!1),this},Object.defineProperty(t.prototype,"parent",{get:function(){return this.g},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"head",{get:function(){return this.ci},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tail",{get:function(){return this.ai},enumerable:!1,configurable:!0}),t.prototype.onTypeChange=function(){0<this.ri?this.fi=!0:this.g.onMarkerTypeChange()},t.prototype.onSizeChange=function(){0<this.ri?this.li=!0:this.g.onMarkerSizeChange()},t.prototype.onFillChange=function(){0<this.ri?this.vi=!0:this.g.onMarkerFillChange()},t.prototype.copy=function(t){return this.lock(),this.ci.copy(t.head),this.ai.copy(t.tail),this.unlock(),this},t.prototype.serialize=function(t){var n=this.ci.serialize(t),i=this.ai.serialize(t);return t.addResource("[".concat(n,",").concat(i,"]"))},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getExtension(t);null==r&&(r=JSON.parse(i[t]),n.setExtension(t,r)),this.lock(),this.ci.deserialize(r[0],n),this.ai.deserialize(r[1],n),this.unlock()}},t}(),gr=2*Math.PI,mr=.5*Math.PI,wr=function(t,n,i,r){return t*i+n*r},Or=function(t,n){return Math.sqrt(wr(t,n,t,n))},pr=function(t,n,i,r){return t*r-n*i},Dr=function(t,n,i,r,e,u,s,h,o,a){var c=a.center;c[0]=t,c[1]=n;var f=a.axis1;f[0]=i,f[1]=r;var l=a.axis2;l[0]=e,l[1]=u;var v=a.angle;return v[0]=s,v[1]=h,v[2]=o,a},Er=function(t,n){var i=t.center,r=t.axis1,e=t.axis2,u=t.angle;return Dr(i[0],i[1],r[0],r[1],e[0],e[1],u[0],u[1],u[2],n)},Mr=function(t,n){for(var i=t.length,r=0;r<i;++r)n[r]=t[r];return n.length!==i&&(n.length=i),n},Sr=function(){function t(){}return t.set=function(t,n,i,r,e,u,s,h,o,a,c,f,l,v,b){for(var d=Math.max(Math.abs(n-i),Math.abs(s-h)),g=f?Math.max(1,Math.round(c*(d/mr))):c,m=l?g+1:g,w=0;w<m;++w){var O=w/g,p=1-O,D=O,E=p*n+D*i,M=Math.cos(E),S=Math.sin(E),j=t[0]+M*r[0]+S*e[0],T=t[1]+M*r[1]+S*e[1],I=p*s+D*h,C=Math.cos(I),N=Math.sin(I),A=u[0]+C*o[0]+N*a[0],R=u[1]+C*o[1]+N*a[1],y=mr*O,k=Math.cos(y),L=Math.sin(y),x=k*k,B=L*L,_=x*j+B*A,P=x*T+B*R;v[++b]=_,v[++b]=P}return b},t.interpolate=function(t,n,i,r,e,u,s,h){var o=h.values,a=h.segments;if(t<=2)return Mr(n,o),Mr(i,a),h;var c=this.WORK_P0||{center:[0,0],axis1:[0,0],axis2:[0,0],angle:[0,0,0]},f=this.WORK_P1||{center:[0,0],axis1:[0,0],axis2:[0,0],angle:[0,0,0]},l=this.WORK_P2||{center:[0,0],axis1:[0,0],axis2:[0,0],angle:[0,0,0]};this.WORK_P0=c,this.WORK_P1=f,this.WORK_P2=l;var v=-1,b=-1;if(e){r(0,t,n,c),Er(c,f);for(var d=1;d<t;++d){if(r(d,t,n,l),0<=cr(i,d)){var g=d-1<<1;o[++v]=n[g+0],o[++v]=n[g+1],a[++b]=v+1>>1}else v=this.set(f.center,f.angle[1],f.angle[2],f.axis1,f.axis2,l.center,l.angle[0],l.angle[1],l.axis1,l.axis2,u,s,!1,o,v);var m=f;f=l,l=m}0<=cr(i,0)?(g=t-1<<1,o[++v]=n[g+0],o[++v]=n[g+1],a.unshift(0),b+=1):v=this.set(f.center,f.angle[1],f.angle[2],f.axis1,f.axis2,c.center,c.angle[0],c.angle[1],c.axis1,c.axis2,u,s,!1,o,v)}else{r(1,t,n,c),0<=cr(i,1)?(o[++v]=n[0],o[++v]=n[1],a[++b]=1):v=this.set(c.center,c.angle[0],c.angle[1],c.axis1,c.axis2,c.center,c.angle[0],c.angle[1],c.axis1,c.axis2,u,s,!1,o,v),Er(c,f),d=2;for(var w=t-1;d<w;++d)r(d,t,n,l),0<=cr(i,d)?(g=d-1<<1,o[++v]=n[g+0],o[++v]=n[g+1],a[++b]=v+1>>1):v=this.set(f.center,f.angle[1],f.angle[2],f.axis1,f.axis2,l.center,l.angle[0],l.angle[1],l.axis1,l.axis2,u,s,!1,o,v),m=f,f=l,l=m;0<=cr(i,t-1)?(g=t-2<<1,o[++v]=n[g+0],o[++v]=n[g+1],a[++b]=v+1>>1):v=this.set(f.center,f.angle[1],f.angle[2],f.axis1,f.axis2,f.center,f.angle[1],f.angle[2],f.axis1,f.axis2,u,s,!0,o,v)}return v+=1,o.length!==v&&(o.length=v),b+=1,a.length!==b&&(a.length=b),h},t.toCircle=function(t,n,i,r){var e=(0<t?t-1:n-1)<<1,u=t<<1,s=(t<n-1?t+1:0)<<1,h=i[e+0],o=i[e+1],a=i[u+0],c=i[u+1],f=i[s+0],l=i[s+1],v=a-h,b=c-o,d=f-a,g=l-c,m=h+.5*v,w=o+.5*b,O=a+.5*d,p=c+.5*g,D=-b,E=+v,M=-g,S=+d,j=pr(D,E,M,S);if(Math.abs(j)<.001){if(0<=wr(v,b,d,g)||n<=2){var T=.01,I=Math.sin(T),C=Or(v,b),N=Or(d,g);return Dr(a,c,0,0,d/I,g/I,-T*C/N,0,T,r)}j=.001}var A=(S*(O-m)+M*(w-p))/j,R=m+A*D,y=w+A*E,k=a-R,L=c-y,x=-L,B=+k,_=f-R,P=l-y,U=Math.atan2(wr(x,B,_,P),wr(k,L,_,P)),F=h-R,G=o-y,H=Math.atan2(wr(x,B,F,G),wr(k,L,F,G));return 0<H*U&&(Math.abs(H)<Math.abs(U)&&(0<U?U-=gr:U+=gr),Math.abs(U)<Math.abs(H)&&(0<H?H-=gr:H+=gr)),Dr(R,y,k,L,x,B,H,0,U,r)},t.toEllipse=function(t,n,i,r){var e=(0<t?t-1:n-1)<<1,u=t<<1,s=(t<n-1?t+1:0)<<1,h=i[e+0],o=i[e+1],a=i[u+0],c=i[u+1],f=i[s+0],l=i[s+1],v=h-a,b=o-c,d=f-a,g=l-c;if(n<=2){var m=.01,w=Math.sin(m);return Dr(a,c,0,0,d/w,g/w,-m,0,m,r)}for(var O=Or(v,b),p=Or(d,g),D=wr(v,b,d,g)/(O*p),E=Math.acos(D),M=.5*E,S=.25*E,j=0,T=0,I=0,C=0,N=Math.max(O,p),A=Math.min(O,p),R=0;R<16;++R){var y=.5*M,k=E-y;j=N*Math.sin(y),T=N*Math.cos(y),I=A*Math.sin(k),1<(1-(C=A*Math.cos(k))/T)*(1-C/T)+I*I/(j*j)?M+=S:M-=S,S*=.5}var L=Math.asin(Math.min(I/j,1));if(O<p){var x=d/p,B=g/p,_=void 0,P=void 0;return 0<pr(v,b,d,g)?(_=+B,P=-x):(_=-B,P=+x),Dr(z=a-(G=(U=-T*T/p)*x+(F=-T*j/p)*_),V=c-(H=U*B+F*P),G,H,f-z,l-V,-L,0,mr,r)}var U,F,G,H,z,V,W=v/O,X=b/O;return _=void 0,P=void 0,pr(v,b,d,g)<0?(_=+X,P=-W):(_=-X,P=+W),Dr(z=a-(G=(U=-T*T/O)*W+(F=-T*j/O)*_),V=c-(H=U*X+F*P),G,H,-(h-z),-(o-V),-mr,0,L,r)},t.toHybrid=function(n,i,r,e){var u=t.toCircle(n,i,r,e),s=u.angle[0],h=u.angle[2],o=Math.min(s,h),a=Math.max(s,h);return o<-mr||mr<a?t.toEllipse(n,i,r,e):u},t}(),jr=function(t,n,i,r,e){return Sr.interpolate(t,n,i,Sr.toHybrid,!!(r&K.CLOSED),rt.CURVE_SEGMENT_COUNT,!0,e),e.length=e.values.length>>1,e.style=r,e},Tr=function(t,n){for(var i=t.length,r=0;r<i;++r)n[r]=t[r];return n.length!==i&&(n.length=i),n},Ir=function(t,n,i,r,e,u){var s=1-e;return u[0]=t*s+i*e,u[1]=n*s+r*e,u},Cr=function(t,n,i,r,e,u,s,h,o,a,c){for(var f=[0,0],l=[0,0],v=[0,0],b=s;b<h;++b){var d=b/o;Ir(t,n,i,r,d,f),Ir(i,r,e,u,d,l),Ir(f[0],f[1],l[0],l[1],d,v),a[++c]=v[0],a[++c]=v[1]}return c},Nr=function(t,n,i,r,e){return function(t,n,i,r,e,u){var s=u.values,h=u.segments;if(t<=2)return Tr(n,s),Tr(i,h),u;var o=-1,a=-1,c=e>>1;if(r){for(var f=0;f+2<t;f+=2){var l=f<<1,v=0<=cr(i,f+1),b=0<=cr(i,f+2);v&&b?(s[++o]=n[l+0],s[++o]=n[l+1],h[++a]=1+(o>>1)):v?(s[++o]=n[l+0],s[++o]=n[l+1],h[++a]=1+(o>>1),o=Cr(n[l+0],n[l+1],n[l+2],n[l+3],n[l+4],n[l+5],c,e,e,s,o)):b?(o=Cr(n[l+0],n[l+1],n[l+2],n[l+3],n[l+4],n[l+5],0,c,e,s,o),h[++a]=1+(o>>1)):o=Cr(n[l+0],n[l+1],n[l+2],n[l+3],n[l+4],n[l+5],0,e,e,s,o)}f+1<t?(l=f<<1,v=0<=cr(i,f+1),b=0<=cr(i,0),v&&b?(s[++o]=n[0],s[++o]=n[1],h.unshift(0),a+=1):v?(s[++o]=n[l+0],s[++o]=n[l+1],h[++a]=1+(o>>1),o=Cr(n[l+0],n[l+1],n[l+2],n[l+3],n[0],n[1],c,e,e,s,o)):b?(o=Cr(n[l+0],n[l+1],n[l+2],n[l+3],n[0],n[1],0,c,e,s,o),h[++a]=1+(o>>1)):o=Cr(n[l+0],n[l+1],n[l+2],n[l+3],n[0],n[1],0,e,e,s,o)):f<t&&(l=f<<1,s[++o]=n[l+0],s[++o]=n[l+1],0<=cr(i,0)&&(h.unshift(0),a+=1))}else{for(f=0;f+2<t;f+=2)l=f<<1,v=0<=cr(i,f+1),b=0<=cr(i,f+2),v&&b?(s[++o]=n[l+0],s[++o]=n[l+1],h[++a]=1+(o>>1)):v?(s[++o]=n[l+0],s[++o]=n[l+1],h[++a]=1+(o>>1),o=Cr(n[l+0],n[l+1],n[l+2],n[l+3],n[l+4],n[l+5],c,e,e,s,o)):b?(o=Cr(n[l+0],n[l+1],n[l+2],n[l+3],n[l+4],n[l+5],0,c,e,s,o),h[++a]=1+(o>>1)):o=Cr(n[l+0],n[l+1],n[l+2],n[l+3],n[l+4],n[l+5],0,e,e,s,o);for(;f+1<t;++f)l=f<<1,s[++o]=n[l+0],s[++o]=n[l+1],s[++o]=n[l+2],s[++o]=n[l+3],0<=cr(i,f+1)&&(h[++a]=1+(o>>1));for(;f<t;++f)l=f<<1,s[++o]=n[l+0],s[++o]=n[l+1]}o+=1,s.length!==o&&(s.length=o),a+=1,h.length!==a&&(h.length=a)}(t,n,i,!!(r&K.CLOSED),rt.CURVE_SEGMENT_COUNT,e),e.length=e.values.length>>1,e.style=r,e},Ar=function(){function t(){}return t.set=function(t,n){null==this.data&&(this.data=this.newData()),this.data.set(t,n)},t.get=function(t){return null==this.data&&(this.data=this.newData()),this.data.get(t)},t.each=function(t){null==this.data&&(this.data=this.newData()),this.data.forEach((function(n,i){t(i,n)}))},t.find=function(t){return this.get((t&K.FORMATTER_MASK)>>K.FORMATTER_SHIFT)},t.newData=function(){var t=new Map,n=it.get("EShapePointsFormatter");return t.set(K.FORMATTER_CURVE_SPLINE,{label:n.getCurveSplineLabel(),formatter:jr}),t.set(K.FORMATTER_CURVE_BEZIER_QUADRATIC,{label:n.getCurveBezierQuadraticLabel(),formatter:Nr}),t},t}(),Rr=function(){function n(n){this.g=n,this.di=0,this.R=[],this.k=[],this.$t=0,this.Qt=0;var i=n.size,r=i.x,e=i.y;this.gi=new t.Point(r,e),this.wi=new t.Point(r,e),this.A=0,this.L=K.NONE,this.Oi=-1}return Object.defineProperty(n.prototype,"length",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"plength",{get:function(){return this.Qt},enumerable:!1,configurable:!0}),n.prototype.toFitted=function(t,n){this.pi=void 0,this.wi.set(t,n),this.gi.set(t,n)},n.prototype.onSizeChange=function(){this.fit()},n.prototype.fit=function(){var t=this.g,n=this.wi,i=t.size,r=i.x,e=i.y,u=1e-5;if(!(Math.abs(r-n.x)<=u&&Math.abs(e-n.y)<=u)){n.set(r,e);var s=this.gi,h=u<Math.abs(s.x),o=u<Math.abs(s.y);if(h||o){var a=h?r/s.x:1,c=o?e/s.y:1,f=this.R,l=this.pi;if(null==l){l=[],this.pi=l;for(var v=0,b=f.length;v<b;v+=2){var d=f[v],g=f[v+1];f[v]=d*a,f[v+1]=g*c,l.push(d,g)}}else for(v=0,b=f.length;v<b;v+=2)f[v]=l[v]*a,f[v+1]=l[v+1]*c;if(this.A+=1,this.Di||this.L&K.FORMATTER_MASK){var m=t.uploaded;m&&!m.isCompatible(t)&&t.toDirty()}}}},Object.defineProperty(n.prototype,"id",{get:function(){return this.fit(),this.A},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"values",{get:function(){return this.fit(),this.R},set:function(t){this.set(t,void 0,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"segments",{get:function(){return this.k},set:function(t){this.set(void 0,t,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"style",{get:function(){return this.L},set:function(t){this.set(void 0,void 0,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"marker",{get:function(){var t=this.C;return null==t&&(t=this.newMarker(),this.C=t),t},enumerable:!1,configurable:!0}),n.prototype.getMarker=function(){return this.C},n.prototype.newMarker=function(){return new dr(this)},n.prototype.onMarkerTypeChange=function(){var t=this.g;t.uploaded=void 0,t.toDirty()},n.prototype.onMarkerSizeChange=function(){this.g.updateUploaded()},n.prototype.onMarkerFillChange=function(){this.g.updateUploaded()},Object.defineProperty(n.prototype,"formatter",{get:function(){return this.Di||null},set:function(t){this.Di!==t&&(this.Oi=-1,this.Di=t,this.toDirty(!0))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"formatted",{get:function(){var t,n;this.fit();var i=this.A,r=this.Ei;if(this.Oi!==i){this.Oi=i;var e=this.L,u=null!==(t=this.Di)&&void 0!==t?t:null===(n=Ar.find(e))||void 0===n?void 0:n.formatter;if(null!=u){null==r&&(r={length:0,plength:0,values:[],segments:[],boundary:[0,0,0,0],style:K.NONE});var s=this.R,h=this.k;u(s.length>>1,s,h,e,r),r.plength<r.length&&(r.plength=r.length),fr(r.values,r.boundary)}else r=void 0;this.Ei=r}return r||this},enumerable:!1,configurable:!0}),n.prototype.toScaled=function(t,n,i,r){var e=this.wi,u=this.gi,s=1e-5,h=s<Math.abs(u.x),o=s<Math.abs(u.y);if(h||o){for(var a=h?e.x/u.x:1,c=o?e.y/u.y:1,f=0,l=n.length;f<l;f+=2)t[f]=n[f]*a,t[f+1]=n[f+1]*c;for(f=0,l=r.length;f<l;f+=2)i[f]=r[f]*a,i[f+1]=r[f+1]*c}},n.prototype.copy=function(t){this.set(t.values,t.segments,t.style);var n=t.getMarker();return n&&this.marker.copy(n),this},n.prototype.set=function(t,n,i){var r=!1,e=!1,u=this.L,s=u&K.FORMATTER_MASK,h=this.Di;if(null!=t){var o=this.R,a=this.di,c=t.length,f=Math.min(c,a),l=this.g.size;if(this.toFitted(l.x,l.y),o!==t){for(var v=0;v<f;++v)o[v]=t[v];for(v=f;v<c;++v)o.push(t[v]);a!==c?(o.length=c,this.di=c,r=!0):null!=h||s?r=!0:e=!0}else a!==c?(this.di=c,r=!0):null!=h||s?r=!0:e=!0;var b=c>>1;this.$t=b,this.Qt<b&&(this.Qt=b)}if(null!=n){var d=this.k;if(d!==n){var g=n.length;for(f=Math.min(d.length,g),v=0;v<f;++v)d[v]=n[v];for(v=f;v<g;++v)d.push(n[v]);d.length!==g&&(d.length=g)}null!=h||s?r=!0:e=!0}return null!=i&&u!==i&&(s!==(i&K.FORMATTER_MASK)||(null!=h||s)&&(u&K.CLOSED)!=(i&K.CLOSED)?r=!0:e=!0,this.L=i),(e||r)&&this.toDirty(r),this},n.prototype.toDirty=function(t){if(t){this.A+=1;var n=this.g,i=n.uploaded;i?i.isCompatible(n)?n.updateUploaded():n.toDirty():n.updateUploaded()}else this.A+=1,this.g.updateUploaded()},n.prototype.clone=function(t){return new n(t).copy(this)},n.prototype.toPoints=function(n){for(var i=[],r=this.values,e=0,u=r.length;e<u;e+=2){var s=new t.Point(r[e+0],r[e+1]);i.push(n.apply(s,s))}return i},n.prototype.serialize=function(t){var n=JSON.stringify(this.R),i=JSON.stringify(this.k),r=this.L,e=-1,u=this.C;return u&&(e=u.serialize(t)),t.addResource("[".concat(n,",").concat(i,",").concat(r,",").concat(e,"]"))},n.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getExtension(t);null==r&&(r=JSON.parse(i[t]),n.setExtension(t,r)),this.set(r[0],r[1],r[2]);var e=r[3];null!=e&&0<=e&&this.marker.deserialize(e,n)}},n.prototype.calcHitPointAbs=function(t,i,r,e,u,s,h,o){var a=this.formatted,c=a.length;if(2<=c){var f=a.values,l=a.segments,v=a.style,b=0,d=c;if(s){var g=n.WORK_RANGE;s(t,i,u,f,g),b=g[0],d=g[1]}for(var m=b,w=Math.min(d,c-1);m<w;++m){var O;if(cr(l,m+1)<0&&h(t,i,f[0+(O=m<<1)],f[O+1],f[O+2],f[O+3],m,u,o))return!0}if(2<c&&c<=d&&v&K.CLOSED&&cr(l,0)<0&&h(t,i,f[0+(O=(m=c-1)<<1)],f[O+1],f[0],f[1],m,u,o))return!0}return!1},n.WORK_RANGE=[0,0],n}(),yr=function(){function t(t,n){this.g=t,this.A=0,this.R=[],this.ri=0,this.Wt=!1,this.et=n}return t.prototype.lock=function(){this.ri+=1,1===this.ri&&(this.Wt=!1)},t.prototype.unlock=function(){this.ri-=1,0===this.ri&&(this.Wt&&this.onChange(),this.Wt=!1)},Object.defineProperty(t.prototype,"id",{get:function(){return this.A},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){return this.R},set:function(t){this.set(t)},enumerable:!1,configurable:!0}),t.prototype.set=function(t){if(null!=t){if(this.A+=1,this.R!==t){for(var n=t.length,i=this.R,r=0;r<n;++r)i[r]=t[r];i.length=n}this.onChange()}return this},t.prototype.copy=function(t){return this.set(t.values)},t.prototype.serialize=function(t){return t.addResource(JSON.stringify(this.R))},t.prototype.deserialize=function(t,n,i){var r=i.resources;if(0<=t&&t<r.length){var e=i.getExtension(t);null==e&&(e=JSON.parse(r[t]),i.setExtension(t,e)),this.set(e)}},t.prototype.onChange=function(){0<this.ri?this.Wt=!0:this.et()},t}(),kr=function(t){function n(n){void 0===n&&(n=r.CONNECTOR_LINE);var i=t.call(this,n)||this;i.Mi=0,i.Si=0,i.ji=0,i.Ti=0,i.Ii=0,i.Ci=0,i.Ni=0,i.Ai=new Bt;var e=.5*rt.SIZE_X,u=.5*rt.SIZE_Y;i.Mt=new Rr(i).set([-e,-u,+e,+u]);var s=function(){i.onChange()};return i.Wn=new ar(i,s),i.Ri=new yr(i,s),i}return G(n,t),n.prototype.lock=function(n){return n&_t.CONNECTOR&&this.Ai.lock(),t.prototype.lock.call(this,n),this},n.prototype.unlock=function(n,i){return t.prototype.unlock.call(this,n,i),n&_t.CONNECTOR&&this.Ai.unlock()&&i&&this.onChange(),this},Object.defineProperty(n.prototype,"points",{get:function(){return this.Mt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"edge",{get:function(){return this.Wn},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"body",{get:function(){return this.Ri},enumerable:!1,configurable:!0}),n.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.Wn.attach()},n.prototype.onDetach=function(n){this.Wn.detach(n),t.prototype.onDetach.call(this,n)},n.prototype.onChange=function(){var t;if(!this.Ai.isLocked()){var i=this.Wn,r=i.tail,e=r.localId,u=r.normalId,s=r.margin,h=i.head,o=h.localId,a=h.normalId,c=h.margin,f=this.Ri,l=f.id;if(this.Mi!==e||this.Si!==u||this.ji!==s||this.Ti!==o||this.Ii!==a||this.Ci!==c||this.Ni!==l){this.Mi=e,this.Si=u,this.ji=s,this.Ti=o,this.Ii=a,this.Ci=c,this.Ni;var v=this.transform,b=v.position,d=b.x,g=b.y,m=this.Mt,w=m.values;this.fillPoints(r,s,h,c,f,d,g,w);var O=null!==(t=n.WORK_BOUNDARY)&&void 0!==t?t:n.WORK_BOUNDARY=[0,0,0,0];fr(w,O);for(var p=.5*(O[2]+O[0]),D=.5*(O[3]+O[1]),E=O[2]-O[0],M=O[3]-O[1],S=0,j=w.length;S<j;S+=2)w[S+0]-=p,w[S+1]-=D;this.lock(_t.TRANSFORM_AND_UPLOADED),b.set(d+p,g+D),v.scale.set(1,1),v.rotation=0,v.skew.set(0,0),m.toFitted(E,M),this.size.set(E,M),m.set(w),this.unlock(_t.TRANSFORM_AND_UPLOADED,!0)}}},n.prototype.fillPoints=function(t,n,i,r,e,u,s,h){var o=1e-6,a=t.local,c=a.x-u,f=a.y-s,l=i.local,v=l.x-u,b=l.y-s,d=e.values,g=d.length;if(h[0]=c,h[1]=f,0<g)for(var m=.5*(v+c),w=.5*(b+f),O=v-c,p=b-f,D=Math.atan2(p,O),E=Math.cos(D),M=Math.sin(D),S=Math.sqrt(O*O+p*p),j=0;j<g;j+=2){var T=d[j+0],I=d[j+1];h[j+2]=m+(E*T-M*I)*S,h[j+3]=w+(E*I+M*T)*S}if(h[2+g]=v,h[3+g]=b,0!==n&&o<(O=h[2]-c)*O+(p=h[3]-f)*p){var C=n/Math.sqrt(O*O+p*p);h[0]=c+O*C,h[1]=f+p*C}0!==r&&o<(O=h[0+g]-v)*O+(p=h[1+g]-b)*p&&(C=r/Math.sqrt(O*O+p*p),h[2+g]=v+O*C,h[3+g]=b+p*C),h.length=g+4},n.prototype.copy=function(i,r){return void 0===r&&(r=dt.ALL),this.lock(_t.ALL),t.prototype.copy.call(this,i,r),i instanceof n&&(this.Wn.copy(i.edge),this.Ri.copy(i.body)),this.unlock(_t.ALL,!0),this},n.prototype.clone=function(){return new(0,this.constructor)(this.type).copy(this)},n.prototype.serialize=function(n){var i=t.prototype.serialize.call(this,n),r=this.Wn.serialize(n),e=this.Ri.serialize(n),u=this.Mt.serialize(n);return i[15]=n.addResource("[".concat(r,",").concat(u,",").concat(e,"]")),i},n}(cn),Lr=function(){function t(){}return t.isConnector=function(t){return t instanceof kr},t.newMapping=function(n,i,r){var e;null==r&&(r=null!==(e=t.yi)&&void 0!==e?e:t.yi=new Map).clear();for(var u=0,s=n.length;u<s;++u){var h=n[u],o=i[u];r.set(h,o),this.newMapping(h.children,o.children,r)}return r},t.moveAll=function(t,n,i,r,e){for(var u=0,s=i.length;u<s;++u){var h=i[u],o=r[u];if(this.isConnector(h)&&this.isConnector(o)){var a=h.edge,c=o.edge,f=a.head,l=f.acceptor.shape;if(l){null==e&&(e=this.newMapping(t,n));var v=e.get(l);if(v){var b=c.head;b.detach(),b.set(v),b.attach(),v.connector.remove(f)}}var d=a.tail,g=d.acceptor.shape;if(g){null==e&&(e=this.newMapping(t,n));var m=e.get(g);if(m){var w=c.tail;w.detach(),w.set(m),w.attach(),m.connector.remove(d)}}}e=this.moveAll(t,n,h.children,o.children,e)}return e},t.move=function(t,n){var i=t.children,r=n.children;this.moveAll(i,r,i,r)},t}(),xr=function(){function n(n,i,r,e,u){this.id=n,this.ref=0;var s=u.resolution;this.frame=new t.Rectangle(0,0,i*s,r*s),this.texture=new t.Texture(u,new t.Rectangle(0,0,1,1)),this.width=i,this.height=r,this.strokeWidth=e}return n.prototype.applyFrame=function(){var t=1/this.texture.baseTexture.resolution;this.texture.frame.x=this.frame.x*t,this.texture.frame.y=this.frame.y*t,this.texture.frame.width=this.width,this.texture.frame.height=this.height,this.texture.updateUvs(),this.texture.emit("update",this)},n.prototype.destroy=function(){this.texture.destroy()},n}(),Br=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.render=function(t){},n}(xr),_r=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.render=function(t){var n=this.frame;t.save(),t.fillStyle="#ffffff",t.fillRect(n.x-1,n.y-1,n.width+2,n.height+2),t.restore()},n}(xr),Pr=function(){function n(n){var i=this.ki=document.createElement("canvas");i.width=i.height=256;var r=t.BaseTexture.from(i,{mipmap:t.MIPMAP_MODES.OFF,resolution:n});this.Li=r,this.xi={},this.Bi=[],this._i={empty:new Br("empty",10,10,0,r),white:new _r("white",10,10,0,r)},this.Pi=!0}return n.prototype.updateFrames=function(t,n){for(var i=4,r=4,e=0,u=0,s=n.length;u<s;++u){var h=n[u];t<i+h.frame.width+4&&(i=4,r+=e+4,e=0),h.frame.x=0|i,h.frame.y=0|r,i+=h.frame.width+4,e=Math.max(e,h.frame.height)}for(var o=r+e+4,a=256;a<o;)a<<=1;return Math.min(4096,a)},n.prototype.renderFrames=function(t,n,i){var r=this.ki;r.width=t,r.height=n;var e=r.getContext("2d");if(null!=e)for(var u=0,s=i.length;u<s;++u)i[u].render(e)},n.prototype.applyFrames=function(t){for(var n=0,i=t.length;n<i;++n)t[n].applyFrame()},n.prototype.calcCanvasWidth=function(t){for(var n=512,i=t.length-1;0<=i;--i)for(var r=t[i],e=Math.max(r.frame.width,r.frame.height);n<e;)n<<=1;return Math.min(4096,n<<1)},n.prototype.cleanup=function(t){t.sort(n.ITEM_COMPARATOR);for(var i=t.length-1;0<=i;--i)if(0<t[i].ref)return void(t.length=i+1);t.length=0},n.prototype.begin=function(){for(var t=this.Bi,n=0,i=t.length;n<i;++n)t[n].ref=0;this.Pi=!1},n.prototype.end=function(){for(var t=this.xi,n=this.Bi,i=0,r=n.length;i<r;++i){var e=n[i];e.ref<=0&&(e.id in this._i||e.destroy(),delete t[e.id],this.Pi=!0)}},n.prototype.repack=function(t){if(!0===t||this.Pi){this.Pi=!1;var n=this.Bi;this.cleanup(n);var i=this.calcCanvasWidth(n),r=this.updateFrames(i,n);this.renderFrames(i,r,n),this.Li.setRealSize(i,r),this.applyFrames(n)}},n.prototype.get=function(t){var n=this.xi[t];if(null!=n)return n.ref+=1,n;var i=this._i[t];return null!=i?(this.set(t,i),i):null},n.prototype.set=function(t,n){var i=this.xi[t];return n.ref+=1,this.xi[t]=n,this.Bi.push(n),this.Pi=!0,i},n.prototype.toDirty=function(){this.Pi=!0},n.prototype.getDefaultTexture=function(){return this.get("white").texture},n.prototype.getBaseTexture=function(){return this.Li},n.prototype.release=function(t){var n=this.xi,i=n[t];null!=i&&(i.ref-=1,i.ref<=0&&(i.id in this._i||i.destroy(),delete n[t],this.Pi=!0))},n.prototype.destroy=function(){var t=this.Li;null!=t&&t.destroy()},n.ITEM_COMPARATOR=function(t,n){return t.ref<=0?n.ref<=0?0:1:n.ref<=0||t.frame.height<n.frame.height?-1:n.frame.height<t.frame.height?1:t.frame.width-n.frame.width},n}(),Ur=function(t){function n(n,i){var r=t.call(this,n.id,n.width/i.resolution,n.height/i.resolution,0,i)||this;return r.canvas=n.canvas,r}return G(n,t),n.prototype.render=function(t){var n=this.canvas;if(null!=n){var i=this.frame;t.drawImage(n,i.x,i.y,i.width,i.height)}},n}(xr),Fr=function(t,n){this.x=t,this.y=n},Gr=function(){function t(n,i,r,e,u,s,h){this.ref=1,this.life=t.LIFE,this.character=i,this.x=r,this.y=e,this.width=u,this.height=s,this.advance=h,this.origin=new Fr(0,0),this.type=n}return t.LIFE=10,t}(),Hr={RESERVED:1,NON_BREAKING:2,SPACE:4,SPACE_R:5,SPACE_NB:6,SPACE_RNB:7,LETTER:8,LETTER_R:9,LETTER_NB:10,LETTER_RNB:11},zr=function(){function t(n){this.id=t.toFontFamily(n),this.size=32,this.italic=!1,this.measured=!1,this.ascent=0,this.descent=0}return t.toFontFamily=function(n){return"auto"===n?t.getAutoFontFamily():n},t.getAutoFontFamily=function(){return null==t.FONT_FAMILY_AUTO&&(t.FONT_FAMILY_AUTO=it.getInstance().get("DBase").getFontFamilly()),t.FONT_FAMILY_AUTO},t.FONT_FAMILY_AUTO=null,t}(),Vr=function(){function t(){var t=this;this.Ui=null,this.Fi=null,this.Gi=null,this.Hi=0,this.zi=1,this.Vi=null,this.Wi=null,this.Xi=null,this.Ki=null;var n=this.ki=document.createElement("canvas");n.width=64,n.height=64,this.Yi=function(t){t.preventDefault()},this.Ji=function(){t.restore()},this.Zi=function(){t.destroy()},n.addEventListener("webglcontextlost",this.Yi,!1),n.addEventListener("webglcontextrestored",this.Ji,!1),window.addEventListener("unload",this.Zi,!1)}return t.prototype.init=function(){var t=this.ki;if(null!=t&&(null==this.Ui||this.Ui.isContextLost())){var n={alpha:!0,antialias:!1,depth:!1,stencil:!1,premultipliedAlpha:!1},i=t.getContext("webgl",n)||t.getContext("experimental-webgl",n);this.Ui=i,null!=i&&(i.clearColor(1,1,1,0),this.makeVertexBuffer(),this.makeUvBuffer(),this.makeShaders(),this.Fi=null)}return this},t.prototype.restore=function(){this.init()},t.prototype.getCanvas=function(){return this.ki},t.prototype.getShader=function(t,n,i){var r=i?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);return null==r||(t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))?r:(console&&console.error("Failed to compile the shader: ".concat(t.getShaderInfoLog(r))),null)},t.prototype.makeShaders=function(){var t=this.Ui;if(null!=t&&!0!==t.isContextLost()){var n=this.getShader(t,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nvarying mediump vec2 vTextureCoord;\nvoid main(void) {\n\tgl_Position = vec4(aVertexPosition, 0.0, 1.0);\n\tvTextureCoord = aTextureCoord;\n}\n",!1);if(null!=n){var i=this.getShader(t,"\nprecision mediump float;\n\nvarying mediump vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec2 uSize;\n\nfloat norm(vec2 v) {\n\treturn dot(v, v);\n}\n\nfloat norm(vec2 p, vec2 dp) {\n\tvec2 xy = p + dp;\n\tvec2 uvi = vec2(1.0) / uSize;\n\tvec2 uv = xy * uvi;\n\tvec4 t0 = vec4(texture2D(uSampler, uv).a);\n\tvec4 t1 = vec4(\n\t\ttexture2D(uSampler, uv + vec2(-uvi.x, 0.0   )).a,\n\t\ttexture2D(uSampler, uv + vec2(0.0   , -uvi.y)).a,\n\t\ttexture2D(uSampler, uv + vec2(+uvi.x, 0.0   )).a,\n\t\ttexture2D(uSampler, uv + vec2(0.0   , +uvi.y)).a\n\t);\n\tvec4 t2 = vec4(0.5);\n\tvec4 t3 = min(t1,t0);\n\tvec4 t4 = max(t1,t0);\n\n\tvec4 w0 = (t2 - t0) / (t1 - t0);\n\tvec4 s0 = vec4(\n\t\tt3.x < 0.5 && 0.5 <= t4.x,\n\t\tt3.y < 0.5 && 0.5 <= t4.y,\n\t\tt3.z < 0.5 && 0.5 <= t4.z,\n\t\tt3.w < 0.5 && 0.5 <= t4.w\n\t);\n\tvec4 l0 = vec4(\n\t\tnorm(dp + vec2(-w0.x, 0.0  )),\n\t\tnorm(dp + vec2(0.0  , -w0.y)),\n\t\tnorm(dp + vec2(+w0.z, 0.0  )),\n\t\tnorm(dp + vec2(0.0  , +w0.w))\n\t);\n\tvec4 c0 = vec4(100.0);\n\tvec4 r0 = mix(c0, l0, s0);\n\n\tvec4 w1 = w0 * vec4(0.5);\n\tvec4 s1 = vec4(\n\t\t0.5 < s0.x && 0.5 < s0.y,\n\t\t0.5 < s0.y && 0.5 < s0.z,\n\t\t0.5 < s0.z && 0.5 < s0.w,\n\t\t0.5 < s0.w && 0.5 < s0.x\n\t);\n\tvec4 l1 = vec4(\n\t\tnorm(dp + vec2(-w1.x, -w1.y)),\n\t\tnorm(dp + vec2(+w1.z, -w1.y)),\n\t\tnorm(dp + vec2(+w1.z, +w1.w)),\n\t\tnorm(dp + vec2(-w1.x, +w1.w))\n\t);\n\tvec4 r1 = mix(c0, l1, s1);\n\tvec4 r2 = min(r0, r1);\n\tvec2 r3 = min(r2.xy, r2.zw);\n\treturn min(r3.x, r3.y);\n}\n\nfloat normY(vec2 p, float dx) {\n\tfloat result = 100.0;\n\tfor (float dy=-6.0; dy < 6.5; dy += 1.0) {\n\t\tresult = min(result, norm(p, vec2(dx, dy)));\n\t}\n\treturn result;\n}\n\nfloat normX(vec2 p) {\n\tfloat result = 100.0;\n\tfor (float dx=-6.0; dx < 6.5; dx += 1.0) {\n\t\tresult = min(result, normY(p, dx));\n\t}\n\treturn result;\n}\n\nvoid main(void) {\n\tfloat t = texture2D(uSampler, vTextureCoord).a;\n\tfloat d = min( 6.0, sqrt(normX( vTextureCoord * uSize )) ) / 12.0;\n\td = clamp( mix( 0.5 - d, 0.5 + d, step( 0.5, t ) ), 0.0, 1.0 ) * 255.0;\n\tfloat r = floor(d);\n\td = (d - r) * 255.0;\n\tfloat g = floor(d);\n\tgl_FragColor = vec4(r * 0.00392156862745098, g * 0.00392156862745098, d - g, 1.0);\n}\n",!0);if(null!=i){var r=this.Gi=t.createProgram();if(null!=r)return t.attachShader(r,n),t.attachShader(r,i),t.bindAttribLocation(r,0,"aVertexPosition"),t.bindAttribLocation(r,1,"aTextureCoord"),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?(t.deleteShader(n),t.deleteShader(i),t.useProgram(r),this.Vi=t.getUniformLocation(r,"uSampler"),this.Wi=t.getUniformLocation(r,"uSize"),t.useProgram(null),r):(console&&console.error("Failed to link the program: ".concat(t.getError())),t.deleteShader(n),t.deleteShader(i),null);t.deleteShader(n),t.deleteShader(i)}else t.deleteShader(n)}}return null},t.prototype.destroyShaders=function(){var t=this.Ui;if(null!=t&&!0!==t.isContextLost()){var n=this.Gi;null!=n&&(this.Gi=null,t.useProgram(null),t.deleteProgram(n))}},t.prototype.updateTexture=function(t,n,i){var r=this.Ui,e=this.ki;if(null!=r&&!0!==r.isContextLost()&&null!=e){e.width===t&&e.height===n||(e.width=t,e.height=n,r.viewport(0,0,t,n));var u=this.Fi;return null==u?(u=this.Fi=r.createTexture(),r.bindTexture(r.TEXTURE_2D,u),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.bindTexture(r.TEXTURE_2D,null)):(r.bindTexture(r.TEXTURE_2D,u),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,i),r.bindTexture(r.TEXTURE_2D,null)),u}return null},t.prototype.destroyTexture=function(){var t=this.Ui,n=this.Fi;null!=t&&!0!==t.isContextLost()&&null!=n&&(this.Fi=null,t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(n))},t.prototype.makeVertexBuffer=function(){var t=this.Ui;if(null!=t&&!0!==t.isContextLost()){var n=this.Xi=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,1,1,1,-1,-1,1,-1]),t.STATIC_DRAW),n}return null},t.prototype.destroyVertexBuffer=function(){var t=this.Ui,n=this.Xi;null!=t&&!0!==t.isContextLost()&&null!=n&&(this.Xi=null,t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(n))},t.prototype.makeUvBuffer=function(){var t=this.Ui;if(null!=t&&!0!==t.isContextLost()){var n=this.Ki=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),t.STATIC_DRAW),n}return null},t.prototype.destroyUvBuffer=function(){var t=this.Ui,n=this.Ki;null!=t&&!0!==t.isContextLost()&&null!=n&&(this.Ki=null,t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(n))},t.prototype.render=function(){var t=this.Ui,n=this.ki,i=this.Gi,r=this.Xi,e=this.Ki,u=this.Fi;if(null!=t&&!0!==t.isContextLost()&&null!=n&&null!=i&&null!=r&&null!=e&&null!=u){t.clear(t.COLOR_BUFFER_BIT),t.useProgram(i),t.bindBuffer(t.ARRAY_BUFFER,r);var s=this.Hi;t.enableVertexAttribArray(s),t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,e);var h=this.zi;t.enableVertexAttribArray(h),t.vertexAttribPointer(h,2,t.FLOAT,!1,0,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,u),t.uniform1i(this.Vi,0),t.uniform2f(this.Wi,n.width,n.height),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.bindTexture(t.TEXTURE_2D,null),t.bindBuffer(t.ARRAY_BUFFER,null),t.useProgram(null)}},t.prototype.read=function(t){var n=this.Ui,i=this.ki;if(null!=n&&!0!==n.isContextLost()&&null!=i){var r=i.width,e=i.height;t.width=r,t.height=e;var u=t.getContext("2d");null!=u&&u.drawImage(i,0,0)}},t.prototype.destroy=function(){this.destroyVertexBuffer(),this.destroyUvBuffer(),this.destroyShaders();var t=this.ki;null!=t&&(this.ki=null,t.removeEventListener("webglcontextlost",this.Yi,!1),t.removeEventListener("webglcontextrestored",this.Ji,!1),window.removeEventListener("unload",this.Zi,!1));var n=this.Ui;if(null!=n){this.Ui=null;var i=n.getExtension("WEBGL_lose_context");null!=i&&i.loseContext()}},t.getInstance=function(){return null==t.qi&&(t.qi=new t),t.qi},t.qi=null,t}(),Wr=function(){function n(){}return n.measure=function(n,i){if(!i.measured){if("fontBoundingBoxAscent"in window.TextMetrics.prototype){var r=n.measureText(t.TextMetrics.METRICS_STRING);i.ascent=r.fontBoundingBoxAscent,i.descent=r.fontBoundingBoxDescent}else{var e=t.TextMetrics.measureFont(i.id);i.ascent=e.ascent,i.descent=e.descent}i.measured=!0}},n.toSize=function(t){return this.setup(t),parseFloat(window.getComputedStyle(this.Qi).fontSize)},n.setup=function(t){var n=this.Qi;null==n&&((n=document.createElement("span")).innerText="|q",n.style.border="none",n.style.margin="0px",this.Qi=n);var i=this.$i;null==i&&((i=document.createElement("div")).style.display="inline-block",i.style.width="0px",i.style.height="0px",i.style.border="none",i.style.margin="0px",i.style.verticalAlign="baseline",this.$i=i);var r=this.tr;null==r&&((r=document.createElement("div")).style.position="absolute",r.style.padding="0px",r.style.margin="0px",r.style.visibility="hidden",r.appendChild(n),r.appendChild(i),document.body.appendChild(r),this.tr=r),n.style.font=t},n}(),Xr=function(){function t(t){this.A="font-atlas:".concat(t),this.nr=Vr.getInstance().init(),this.ki=document.createElement("canvas"),this.ir=new zr(t),this.At=1,this.rr=1;var n=new Map;n.set(j.SPACE,this.newChar(j.SPACE,Hr.SPACE_R)),n.set(j.TAB,this.newChar(j.SOFT_TAB,Hr.SPACE_R)),n.set(j.DOTS,this.newChar(j.DOTS,Hr.LETTER_RNB));for(var i=0,r=j.ASCII.length;i<r;++i){var e=j.ASCII[i];n.set(e,this.newChar(e,Hr.LETTER_RNB))}this.sn=n,this.Pi=!0,this.er=!1,this.ur=Gr.LIFE}return Object.defineProperty(t.prototype,"id",{get:function(){return this.A},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this.ir},set:function(t){this.ir.id=t.id,this.ir.size=t.size,this.ir.italic=t.italic},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.At},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.rr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvas",{get:function(){return this.ki},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"generator",{get:function(){return this.nr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"characters",{get:function(){return this.sn},enumerable:!1,configurable:!0}),t.prototype.begin=function(){this.er=!1,this.sn.forEach((function(t){t.type&Hr.RESERVED||(t.ref=0)}))},t.prototype.end=function(){var t=this,n=this.sn;this.er?(this.ur=Gr.LIFE,n.forEach((function(i,r){i.ref<=0&&!(i.type&Hr.RESERVED)&&(i.life-=1,i.life<=0&&(n.delete(r),t.Pi=!0))}))):(this.ur-=1,this.ur<=0&&0<n.size&&(n.clear(),this.Pi=!0))},t.prototype.newChar=function(t,n){return new Gr(n,t,0,0,1,1,0)},t.prototype.add=function(t,n){for(var i=this.sn,r=0,e=n.length;r<e;++r){var u=n[r],s=i.get(u);null!=s?(s.ref+=1,s.life=Gr.LIFE):(i.set(u,this.newChar(u,Hr.LETTER)),this.Pi=!0)}0<t.length&&(this.er=!0)},t.prototype.get=function(t){return this.sn.get(t)},t.prototype.update=function(){if(this.Pi){var t=this.ki,n=this.nr;if(null!=t&&null!=n){var i=t.getContext("2d");if(null!=i){this.Pi=!1;var r=this.ir,e=r.size+14,u=this.sn,s=this.toPowerOf2(Math.ceil(Math.sqrt(u.size))*e);this.At=s;var h=(r.italic?"italic ":"")+r.size+"px "+r.id;i.font=h,i.textAlign="left",i.textBaseline="alphabetic",i.lineWidth=0,i.lineCap="round",i.lineJoin="miter",i.miterLimit=10,i.fillStyle="#FFFFFF",Wr.measure(i,r);var o=Math.round(.5*(e-(r.ascent+r.descent))+r.ascent),a=0,c=0;u.forEach((function(t){var n=i.measureText(t.character).width,r=Math.ceil(7+n+7),u=e;s<=a+r&&(a=0,c+=e),t.x=a,t.y=c,t.width=r,t.height=u,t.advance=n,t.origin.x=a+7,t.origin.y=c+o,a+=r}));var f=this.rr=c+e;return t.width=s,t.height=f,i.font=h,i.textAlign="left",i.textBaseline="alphabetic",i.lineWidth=0,i.lineCap="round",i.lineJoin="miter",i.miterLimit=10,i.fillStyle="#FFFFFF",i.clearRect(0,0,s,f),u.forEach((function(t){i.fillText(t.character,t.origin.x,t.origin.y)})),n.updateTexture(s,f,t),n.render(),n.read(t),!0}}}return!1},Object.defineProperty(t.prototype,"length",{get:function(){return this.sn.size},enumerable:!1,configurable:!0}),t.prototype.toJson=function(){return{width:this.At,height:this.rr,font:this.ir,characters:this.sn}},t.prototype.toString=function(){return JSON.stringify(this.toJson())},t.prototype.destroy=function(){null!=this.nr&&(this.nr=null),null!=this.ki&&(this.ki=null),this.sn.clear()},t.prototype.toPowerOf2=function(t){for(var n=32;n<t;)n<<=1;return n},t}(),Kr=function(){function t(){this.sr=new Map}return t.prototype.begin=function(){this.sr.forEach((function(t){t.begin()}))},t.prototype.end=function(){var t=this.sr;t.forEach((function(n,i){n.end(),n.length<=0&&(n.destroy(),t.delete(i))}))},t.prototype.add=function(t,n,i){var r=this.sr,e=r.get(t);if(null!=e)e.add(n,i);else{var u=new Xr(t);u.add(n,i),r.set(t,u)}},t.prototype.get=function(t){var n=this.sr.get(t);return null!=n?n:null},t.prototype.update=function(t){var n=t.getBaseTexture();this.sr.forEach((function(i){if(i.update()){var r=i.id,e=t.get(r);if(null!=e){var u=i.width,s=i.height,h=n.resolution;e.frame.width=u,e.frame.height=s,e.width=u/h,e.height=s/h,t.toDirty()}else t.set(r,new Ur(i,n))}}))},t.prototype.destroy=function(){var t=this.sr;t.forEach((function(t){t.destroy()})),t.clear()},t}(),Yr=function(t){function n(n,i,r,e,u){var s=t.call(this,n,i/u.resolution,r/u.resolution,0,u)||this;return s.source=e,s}return G(n,t),n.prototype.render=function(t){var n=this.frame,i=n.x,r=n.y,e=n.width,u=n.height,s=this.source;s instanceof ImageData?(t.putImageData(s,i,r),t.putImageData(s,i-1,r,0,0,1,u),t.putImageData(s,i,r-1,0,0,e,1),t.putImageData(s,i+e,r,e-1,0,1,u),t.putImageData(s,i,r+u,0,u-1,e,1)):(t.drawImage(s,i,r,e,u),t.drawImage(s,0,0,1,u,i-1,r-1,1,u+2),t.drawImage(s,0,0,e,1,i,r-1,e,1),t.drawImage(s,e-1,0,1,u,i+e,r-1,1,u+2),t.drawImage(s,0,u-1,e,1,i,r+u,e,1))},n}(xr),Jr=function(t,n){this.texture=t,this.indexOffset=n},Zr=function(){function t(){this.index=0,this.baseTexture=null,this.units=[]}return t.prototype.begin=function(){this.index=0,this.baseTexture=null},t.prototype.push=function(t,n){if(this.index<this.units.length){var i=this.units[this.index];i.texture=t,i.indexOffset=n}else this.units.push(new Jr(t,n));this.index+=1},t.prototype.end=function(){this.units.length!==this.index&&(this.units.length=this.index)},t.prototype.destroy=function(){this.units.length=0},t}(),qr=function(){function n(t,n){var i=3*t,r=i;this.vertices=new Float32Array(2*r),this.hr=r,this.o=0,this.ar=null,this.steps=new Float32Array(6*r),this.cr=null,this.colors=new Float32Array(3*r),this.lr=null,this.uvs=new Float32Array(2*r),this.vr=null;var e=r<=65535;this.indices=e?new Uint16Array(i):new Uint32Array(i),this.br=t,this.l=0,this.indexCountRequested=0,this.dr=null,this.gr=n,this.mr=new Zr,this.wr=null}return n.prototype.updateVertices=function(){var t=this.ar;t&&t.update()},n.prototype.updateSteps=function(){var t=this.cr;t&&t.update()},n.prototype.updateColors=function(){var t=this.lr;t&&t.update()},n.prototype.updateUvs=function(){var t=this.vr;t&&t.update()},n.prototype.updateIndices=function(){var t=this.dr;t&&t.update()},n.prototype.getGeometry=function(){var n=this.wr;return null==n&&(this.ar=new t.Buffer(this.vertices,!1,!1),this.cr=new t.Buffer(this.steps,!1,!1),this.lr=new t.Buffer(this.colors,!1,!1),this.vr=new t.Buffer(this.uvs,!1,!1),this.dr=new t.Buffer(this.indices,!1,!0),this.wr=n=(new t.Geometry).addIndex(this.dr).addAttribute("aPosition",this.ar,2).addAttribute("aStepA",this.cr,2).addAttribute("aStepB",this.cr,4).addAttribute("aColor",this.lr,3).addAttribute("aUv",this.vr,2)),n},n.prototype.upload=function(){this.gr.geometry.bind(this.getGeometry())},n.prototype.render=function(n){var i=this.gr;i.geometry.bind(this.getGeometry());var r=this.mr.units,e=r.length;if(0<e){for(var u=t.DRAW_MODES.TRIANGLES,s=null,h=r[0],o=0,a=3*h.indexOffset,c=0,f=t.Texture.WHITE,l=0,v=e-1;l<v;++l)s=h,o=a,c=(a=3*(h=r[l+1]).indexOffset)-o,f=s.texture||t.Texture.WHITE,0<c&&f.valid&&(n.uniforms.sampler=i.texture.bind(f),i.geometry.draw(u,c,o));c=3*this.l-a,f=h.texture||t.Texture.WHITE,0<c&&f.valid&&(n.uniforms.sampler=i.texture.bind(f),i.geometry.draw(u,c,a))}},n.prototype.update=function(t,n,i){var u=this.mr;u.begin();for(var s=0,h=0,o=t.get();null!=o;o=t.next()){var a=o.uploaded;if(null==a){var c=e[o.type]||e[r.GROUP];if(null==c)break;var f=c(this,o,s,h,n);if(null==f)break;a=f}else if(!a.reinit(this,o,s,h))break;if(a.buildUnit(u),s+=a.getVertexCount(),h+=a.getIndexCount(),i){t.next();break}}return u.end(),this.o=s,this.l=h,0<u.units.length},n.prototype.check=function(t,n,i,r){return this.indexCountRequested=r,t+i<=this.hr&&n+r<=this.br},n.prototype.destroy=function(){var t=this.wr;t&&t.destroy(),this.mr.destroy()},n}(),Qr=[],$r=function(){this.index=0,this.shapes=Qr,this.current=null},te=function(){function t(){this.Or=-1,this.pr=new $r,this.Vt=[this.pr],this.Dr=null}return t.prototype.reset=function(t,n){this.Or=0;var i=this.Vt[0];return i.index=-1,i.shapes=n,i.current=null,this.pr=i,null!=t?(this.Dr=t,t):this.next()},t.prototype.get=function(){return this.Dr},t.prototype.next=function(){for(;;){var t=this.pr,n=t.index+=1,i=t.shapes,r=n<i.length?t.current=i[n]:t.current=null;if(null==r)return e=this.Or-=1,u=this.Vt,0<=e?(h=u[e],this.pr=h,this.Dr=h.current):this.Dr=null;var e,u,s=r.children;if(!(0<s.length))return this.Dr=r,r;if((e=this.Or+=1)<(u=this.Vt).length)(h=u[e]).index=-1,h.shapes=s,h.current=null,this.pr=h;else{var h=new $r;u.push(h),h.index=-1,h.shapes=s,h.current=null,this.pr=h}}},t}(),ne=function(n){function i(r){var e=n.call(this,r)||this;return i.SHADER=i.SHADER||t.Shader.from("\nattribute highp vec2 aPosition;\nattribute highp vec2 aStepA;\nattribute highp vec4 aStepB;\nattribute highp vec3 aColor;\nattribute highp vec2 aUv;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mediump float shapeScale;\nuniform mediump float antialiasWeight;\n\nvarying mediump float vType;\nvarying mediump vec2 vStepA;\nvarying mediump vec4 vStepB;\nvarying mediump vec4 vColorFill;\nvarying mediump vec4 vColorStroke;\nvarying mediump vec2 vUv;\n\nvec2 toInverse(in vec2 v) {\n\treturn vec2(-v.y, v.x);\n}\n\nvec4 toGeneral(in float v) {\n\tvec4 c = vec4(1.0, 1.0/64.0, 1.0/64.0/64.0, 1.0/64.0/64.0/64.0) * v;\n\tc -= fract(c);\n\tc -= c.yzwx * vec4(64.0, 64.0, 64.0, 0.0);\n\treturn c;\n}\n\nfloat toStrokeWidthScale(in float scale) {\n\treturn (\n\t\tscale == 3.0 || scale == 7.0 ?\n\t\tshapeScale : (\n\t\t\tscale == 1.0 || scale == 5.0 ?\n\t\t\tmin(1.0, shapeScale) : (\n\t\t\t\tscale == 2.0 || scale == 6.0 ?\n\t\t\t\tmax(1.0, shapeScale) : 1.0\n\t\t\t)\n\t\t)\n\t);\n}\n\nvec2 toUnpackedF2x1024(in float v) {\n\tvec2 c = vec2(1.0, 1.0/1024.0) * v;\n\tc -= fract(c);\n\tc -= c.yx * vec2(1024.0, 0.0);\n\tc /= vec2(1023.0, 1023.0);\n\treturn c;\n}\n\nvec3 toUnpackedF3x256(in float v) {\n\tvec3 c = vec3(1.0, 1.0/256.0, 1.0/256.0/256.0) * v;\n\tc -= fract(c);\n\tc -= c.yzx * vec3(256.0, 256.0, 0.0);\n\tc /= 255.0;\n\treturn c;\n}\n\nvec2 toPosition012(in vec2 v) {\n\treturn (projectionMatrix * translationMatrix * vec3(v, 1.0)).xy;\n}\n\nvec4 toStepB01(in vec4 sb) {\n\treturn vec4(sb.xy, toUnpackedF2x1024(sb.z));\n}\n\nvec4 toStepB2(in vec4 sb, in float strokeWidth) {\n\tfloat x = min(0.4, 0.4 / 12.0 * sb.x * antialiasWeight);\n\tfloat w = clamp(strokeWidth, 0.0, 1.0) * 0.4;\n\tfloat p = w * sb.y + sb.z;\n\tfloat y = 0.5 - p;\n\tfloat z = 0.5 - p - w;\n\treturn vec4(y, z, y - max(0.01, y - x), z - max(0.01, z - x));\n}\n\nvec2 toPosition3(in float type, in vec2 p, in float npacked, in float length, in float strokeWidth, out float shift) {\n\tvec3 t = vec3(1.0, 1.0/1024.0, 1.0/1024.0/1024.0) * npacked;\n\tt -= fract(t);\n\tt -= t.yzx * vec3(1024.0, 1024.0, 0.0);\n\tt *= vec3(1.0/511.5, 1.0/511.5, 1.0);\n\tt -= vec3(1.0, 1.0, 0.0);\n\tvec2 n0 = vec2(t.x, ((0.5 < t.z && t.z < 1.5) || 2.5 < t.z ? +1.0 : -1.0) * sqrt(max(0.0, 1.0 - t.x * t.x)));\n\tvec2 n1 = vec2(t.y, (1.5 < t.z ? +1.0 : -1.0) * sqrt(max(0.0, 1.0 - t.y * t.y)));\n\n\tvec2 n0i = toInverse(n0);\n\tvec2 n1i = toInverse(n1);\n\tfloat direction = sign(4.5 - type);\n\n\t// Offset\n\tfloat cross = dot(n0i, n1);\n\tbool bcross = 0.00001 < abs(cross);\n\tfloat crossi = (bcross ? 1.0 / cross : 0.0);\n\tfloat b = dot(n1 - n0, n0) * crossi;\n\tfloat offsetSize = direction * strokeWidth * 0.5;\n\tvec2 offset = n1 + n1i * b;\n\n\t// Miter\n\tvec2 pmiter = p + offsetSize * offset;\n\tfloat miterAngle0 = dot( n0i, offsetSize * offset - length * n0i );\n\tfloat miterAngle1 = dot( n1i, offsetSize * offset + length * n1i );\n\tfloat miterLength = dot( offset, offset );\n\tfloat miterSide = direction * cross;\n\n\t// Bevel\n\tvec2 n = (type == 4.0 || type == 6.0 ? n1 : n0);\n\tvec2 pbevel = p + offsetSize * n;\n\n\t//\n\tvec2 presult = (\n\t\t0.0 <= miterSide ?\n\t\t(miterAngle0 < 0.0 && 0.0 <= miterAngle1 && bcross ? pmiter : pbevel) :\n\t\t(miterLength < 6.0 && bcross ? pmiter : pbevel)\n\t);\n\tvec2 ni = (type == 4.0 || type == 6.0 ? n1i : n0i);\n\tshift = dot(ni, p - presult);\n\treturn toPosition012(presult);\n}\n\nvec2 toStepA3(in float type, in float strokeWidth) {\n\treturn vec2(type < 4.5 ? 1.0 : 0.0, strokeWidth);\n}\n\nvec4 toStepB3(in float shift, in float dash, in float strokeScaling, in float strokeWidthScale) {\n\tfloat l = aStepB.y + shift;\n\tfloat s = aStepA.x * (\n\t\tstrokeScaling == 4.0 || strokeScaling == 5.0 ||\n\t\tstrokeScaling == 6.0 || strokeScaling == 7.0 ?\n\t\tstrokeWidthScale : 1.0\n\t);\n\tfloat lt = aStepB.z;\n\treturn (dash < 0.5 ?\n\t\tvec4(l, 2.0 * abs(lt), 0.0, lt) :\n\t\t(dash < 3.5 ?\n\t\t\t(dash < 1.5 ?\n\t\t\t\tvec4(l, s, s, lt) :\n\t\t\t\t(2.5 < dash ?\n\t\t\t\t\tvec4(l, s, 2.0 * s, lt) :\n\t\t\t\t\tvec4(l, s, 0.5 * s, lt)\n\t\t\t\t)\n\t\t\t) :\n\t\t\t(dash < 4.5 ?\n\t\t\t\tvec4(l, 2.0 * s, s, lt) :\n\t\t\t\t(5.5 < dash ?\n\t\t\t\t\tvec4(l, 2.0 * s, 2.0 * s, lt) :\n\t\t\t\t\tvec4(l, 2.0 * s, 0.5 * s, lt)\n\t\t\t\t)\n\t\t\t)\n\t\t)\n\t);\n}\n\nvoid toColors(in vec3 source, out vec4 fillColor, out vec4 strokeColor) {\n\tvec2 a = toUnpackedF2x1024(source.z);\n\tfillColor.xyz = toUnpackedF3x256(source.x).zyx * a.x;\n\tfillColor.w = a.x;\n\tstrokeColor.xyz = toUnpackedF3x256(source.y).zyx * a.y;\n\tstrokeColor.w = a.y;\n}\n\nvoid main(void) {\n\tvec4 general = toGeneral(aStepA.y);\n\tfloat type = general.x;\n\tfloat strokeScaling = general.y;\n\tfloat strokeWidthScale = toStrokeWidthScale(strokeScaling);\n\tfloat strokeWidth = strokeWidthScale * aStepA.x;\n\n\t// Type 0, 1\n\tvec2 p012 = toPosition012(aPosition);\n\tvec2 sa012 = strokeWidth * general.zw;\n\tvec4 sb01 = toStepB01(aStepB);\n\n\t// Type 2\n\tvec4 sb2 = toStepB2(aStepB, strokeWidth);\n\n\t// Type 3 ~ 6\n\tfloat shift3 = 0.0;\n\tvec2 p3 = toPosition3(type, aPosition, aStepB.x, aStepB.w, strokeWidth, shift3);\n\tvec2 sa3 = toStepA3(type, strokeWidth);\n\tvec4 sb3 = toStepB3(shift3, general.z, strokeScaling, strokeWidthScale);\n\n\t//\n\tgl_Position = vec4((2.5 < type ? p3 : p012), 0.0, 1.0);\n\tvType = type;\n\tvStepA = (2.5 < type ? sa3 : sa012);\n\tvStepB = (1.5 < type ? (2.5 < type ? sb3 : sb2) : sb01);\n\ttoColors(aColor, vColorFill, vColorStroke);\n\tvUv = aUv;\n}","\nvarying mediump float vType;\nvarying mediump vec2 vStepA;\nvarying mediump vec4 vStepB;\nvarying mediump vec4 vColorFill;\nvarying mediump vec4 vColorStroke;\nvarying mediump vec2 vUv;\n\nuniform sampler2D sampler;\nuniform mediump float antialiasWeight;\n\nvec4 toColor0(in vec4 texture) {\n\tvec2 d = vStepB.xy;\n\tvec2 c = vStepB.zw;\n\tvec2 awd = antialiasWeight / d;\n\tvec2 swd = vStepA / d;\n\tvec2 one = vec2(1.0);\n\tvec2 zero = vec2(0.0);\n\tvec2 p0 = clamp(one - awd, zero, one);\n\tvec2 p1 = clamp(one - swd, zero, one);\n\tvec2 p2 = clamp(one - swd - awd, zero, one);\n\tvec2 s0 = smoothstep(p0, one, c);\n\tvec2 s1 = smoothstep(p2, p1, c);\n\tfloat s2 = max(s0.x, s0.y);\n\tfloat s3 = max(s1.x, s1.y);\n\treturn texture * (\n\t\tvColorStroke * (s3 - s2) +\n\t\tvColorFill * (1.0 - s3)\n\t);\n}\n\nvec4 toColor1(in vec4 texture) {\n\tvec2 d = vStepB.xy;\n\tvec2 c = vStepB.zw;\n\tvec2 awd = antialiasWeight / d;\n\tvec2 swd = vStepA / d;\n\tvec2 one = vec2(1.0);\n\tvec2 zero = vec2(0.0);\n\tfloat s0 = smoothstep(length(c), length(c/clamp(one - awd, zero, one)), 1.0);\n\tfloat s1 = smoothstep(length(c/clamp(one - swd, zero, one)), length(c/clamp(one - swd - awd, zero, one)), 1.0);\n\treturn texture * (\n\t\tvColorStroke * (s0 - s1) +\n\t\tvColorFill * s1\n\t);\n}\n\nvec4 toColor2(in vec4 texture) {\n\tvec2 p0 = vStepB.xy;\n\tvec2 p1 = vStepB.zw;\n\tvec2 d = vec2(dot(texture, vec4(1.0, 1.0/255.0, 1.0/255.0/255.0, 0.0)));\n\tvec2 s = smoothstep(p0 - p1, p0 + p1, d);\n\treturn vColorStroke * (s.y - s.x) + vColorFill * s.x;\n}\n\nvec4 toColor3(in vec4 texture) {\n\tfloat l = vStepB.x;\n\tfloat lp0 = vStepB.y;\n\tfloat lp1 = vStepB.z;\n\tfloat lt = vStepB.w;\n\tfloat ld = antialiasWeight;\n\tfloat lm = mod(l, lp0 + lp1);\n\tfloat ls0 = (0.0 < lp1 ? smoothstep(0.0, ld, lm) - smoothstep(lp0, lp0 + ld, lm) : 1.0);\n\tfloat ls1 = (0.0 <= lt ? smoothstep(0.0, ld, l) - smoothstep(lt - ld, lt, l) : 1.0);\n\n\tfloat c = vStepA.x;\n\tfloat awd = antialiasWeight / vStepA.y;\n\tfloat p0 = clamp(awd, 0.0, 1.0);\n\tfloat p1 = clamp(1.0 - awd, 0.0, 1.0);\n\tfloat s0 = smoothstep(0.0, p0, c);\n\tfloat s1 = smoothstep(p1, 1.0, c);\n\treturn texture * vColorStroke * (s0 - s1) * ls0 * ls1;\n}\n\nvoid main(void) {\n\tvec4 texture = texture2D(sampler, vUv);\n\tgl_FragColor = (vType < 1.5 ?\n\t\t(vType < 0.5 ?\n\t\t\ttoColor0(texture) :\n\t\t\ttoColor1(texture)\n\t\t) :\n\t\t(vType < 2.5 ?\n\t\t\ttoColor2(texture) :\n\t\t\ttoColor3(texture)\n\t\t)\n\t);\n}"),e.Er=i.SHADER,e.Mr=new te,e.Sr=e.getBufferSizeMax(r),e}return G(i,n),i.prototype.getBufferSizeMax=function(t){var n=t.context,i=n.extensions;return 1<n.webGLVersion||i.uint32ElementIndex?1431655765:21845},i.prototype.updateAtlas=function(t,n,i,r,e){var u=t.image;if(null!=u){var s=n.get(u.url);if(null!=s)t.texture=s.texture;else{var h=new Yr(u.url,u.width,u.height,u.source,e);t.texture=h.texture,n.set(h.id,h)}}else t.texture=r;var o=t.text,a=o.characters;0<a.length&&i.add(o.family,a,o.nacharacters)},i.prototype.updateAtlases=function(t,n,i,r,e){for(var u=0,s=t.length;u<s;++u){var h=t[u];this.updateAtlas(h,n,i,r,e);for(var o=h.children,a=0,c=o.length;a<c;++a){var f=o[a];this.updateAtlas(f,n,i,r,e),this.updateAtlases(f.children,n,i,r,e)}}},i.prototype.updateFontAtlas=function(t,n,i,r){var e=t.text,u=i.get(e.family);if(null!=u){var s=n.get(u.id);null!=s?(e.atlas=u,e.texture=s.texture):(e.atlas=void 0,e.texture=r)}else e.atlas=void 0,e.texture=r},i.prototype.updateFontAtlases=function(t,n,i,r){for(var e=0,u=t.length;e<u;++e){var s=t[e];this.updateFontAtlas(s,n,i,r);for(var h=s.children,o=0,a=h.length;o<a;++o){var c=h[o];this.updateFontAtlas(c,n,i,r),this.updateFontAtlases(c.children,n,i,r)}}},i.prototype.jr=function(n,i,r,e){var u=this.renderer,s=this.Er;if(null!=s&&(null!=i||0<r.length)){var h=u.resolution,o=n.getBuffers(),a=n.toAntialiasWeight(h);if(e){var c=n.getAtlas(h),f=n.getFontAtlases();c.begin(),f.begin();var l=c.getDefaultTexture(),v=c.getBaseTexture();this.updateAtlases(r,c,f,l,v),f.end(),f.update(c),this.updateFontAtlases(r,c,f,l),c.end(),c.repack(),this.updateBuffers(i,r,o,u,a)}s.uniforms.shapeScale=n.toShapeScale(),s.uniforms.antialiasWeight=n.toPixelScale(h)*a,s.uniforms.translationMatrix=n.worldTransform.toArray(!0),u.shader.bind(s,!1),u.state.setBlendMode(t.utils.correctBlendMode(t.BLEND_MODES.NORMAL,!0));var b=o.length;if(1<b)for(var d=0;d<b;++d)o[d].upload();for(d=0;d<b;++d)o[d].render(s)}},i.prototype.updateBuffers=function(t,n,i,r,e){var u=this.Mr;u.reset(t,n);for(var s=0,h=0,o=5e3,a=this.Sr;null!=u.get();){var c=null,f=!1;if(0<h?(c=new qr(h,r),i.splice(s,0,c),f=!0):s<i.length?(c=i[s],f=!1):(c=new qr(o,r),i.push(c),f=!1),c.update(u,e,f))h=0,s+=1;else{if(!((h=c.indexCountRequested)<=a))break;h=Math.ceil(h/o)*o,h=Math.min(h,a)}}if(s<i.length){for(var l=s,v=i.length;l<v;++l)i[l].destroy();i.length=s}},i.SHADER=null,i}(t.ObjectRenderer),ie=function(n){function i(){var i=n.call(this)||this;return i.Tr=null,i.children=[],i.Vn=null,i.Ir=0,i.Cr=-1,i.Nr=null,i.Ar=new Kr,i.Rr=1,i.yr=-2,i.kr=1,i.Lr=-1,i.Br=new t.Point,i._r=[],i}return G(i,n),i.prototype.calculateBounds=function(){this._bounds.clear()},i.prototype.onChildTransformChange=function(){},i.prototype.toDirty=function(){return this.Ir+=1},i.prototype.isDirty=function(){return this.Cr<this.Ir},i.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){var n=this.Ir,i=this.Cr;this.Cr=n;var r=i<n,e=this.Tr;null==e&&(e=this.Tr=new ne(t)),t.batch.setObjectRenderer(e);var u=this.mask,s=this.Vn,h=this.children;u?(t.mask.push(this,u),e.jr(this,s,h,r),t.mask.pop(this)):e.jr(this,s,h,r)}},i.prototype.containsPoint=function(t){return!1},i.prototype.getFontAtlases=function(){return this.Ar},i.prototype.getAtlas=function(t){var n=this.Nr;return null==n&&(n=new Pr(t),this.Nr=n),n},i.prototype.getBuffers=function(){return this._r},i.prototype.toShapeScale=function(){this.updateTransform();var t=this.transform,n=t._worldID;if(n!==this.Lr){this.Lr=n;var i=t.worldTransform,r=i.a,e=i.b;this.kr=1/Math.sqrt(r*r+e*e)}return this.kr},i.prototype.getShapeScale=function(){return this.kr},i.prototype.toPixelScale=function(t){var n=this.toShapeScale(),i=this.Lr;return this.yr!==i&&(this.yr=i,this.Rr=1/t*n),this.Rr},i.prototype.getPixelScale=function(){return this.Rr},i.prototype.toAntialiasWeight=function(t){return 1.25/t},i.prototype.hitTest=function(t,n){for(var i=this.Br,r=this.children,e=r.length-1;0<=e;--e){var u=r[e];if(u.visible){u.toLocal(t,void 0,i);var s=u.contains(i.x,i.y);if(null!=s&&(null==n||n(s)))return s}}return null},i.prototype.hitTestBBox=function(t,n){for(var i=this.Br,r=this.children,e=r.length-1;0<=e;--e){var u=r[e];if(u.visible&&(u.toLocal(t,void 0,i),u.containsBBox(i.x,i.y)&&(null==n||n(u))))return u}return null},i.prototype.destroy=function(){var t=this._r;if(null!=t)for(var i=0,r=t.length;i<r;++i)t[i].destroy();this._r.length=0;var e=this.children;for(i=e.length-1;0<=i;--i)e[i].destroy();e.length=0;var u=this.Nr;null!=u&&u.destroy(),this.Ar.destroy(),n.prototype.destroy.call(this)},i}(t.DisplayObject),re=function(t){function n(n,i,e,u){void 0===u&&(u=r.EMBEDDED_LAYER);var s=t.call(this,i,e,u)||this;return s.Un=n,s}return G(n,t),Object.defineProperty(n.prototype,"name",{get:function(){return this.Un},enumerable:!1,configurable:!0}),n.prototype.newGroupFill=function(){return new ut(this,!1,16777215,1)},n.prototype.isGroupSizeFittable=function(){return!1},n.prototype.newGroupSize=function(t,n){var i=rt.SIZE_X,r=rt.SIZE_Y;return new Ki(this,i,r,i,r)},n.prototype.clone=function(){for(var t=this.newClone().copy(this),n=this.children,i=0,r=n.length;i<r;++i){var e=n[i].clone();e.parent=t,t.children.push(e)}t.onChildTransformChange(),t.toDirty();var u=this.size;if(u instanceof Ki){var s=u.base;t.size.set(s.x,s.y).init().set(u.x,u.y)}else t.size.init();return t},n.prototype.newClone=function(){return new(0,this.constructor)(this.Un,this._n,this.Pn,this.type)},n.prototype.serializeChildren=function(t){return[]},n.prototype.serializeImage=function(t){return-1},n.prototype.serializeGradient=function(t){return-1},n}(Zi),ee=function(){function t(){}return t.toLayers=function(t,n){var i=[],r=this.toLayer(t);if(r){var e=r.parent;if(e)for(var u=e.children,s=u.length,h=0,o=n.length;h<o;++h){var a=n[h];0<=a&&a<s&&i.push(u[a])}}return i},t.toLayer=function(t){for(var n=t.parent;null!=n;){if(n instanceof ie)return n;if(n instanceof re)return n;n=n.parent}return null},t.show=function(t){return!t.visible&&(t.visible=!0,!0)},t.showAll=function(t){for(var n=!1,i=0,r=t.length;i<r;++i){var e=t[i];e.visible||(e.visible=!0,n=!0)}return n},t.hide=function(t){return!!t.visible&&(t.visible=!1,!0)},t.hideAll=function(t){for(var n=!1,i=0,r=t.length;i<r;++i){var e=t[i];e.visible&&(e.visible=!1,n=!0)}return n},t.bringToFront=function(t){var n=t.parent;return!!n&&this.doBringToFront(t,n.children,0)},t.bringAllToFront=function(t){var n=t.length;if(0<n){var i=t[0].parent;if(i){for(var r=!1,e=i.children,u=0;u<n;++u){var s=t[n-1-u];this.doBringToFront(s,e,u)&&(r=!0)}return r}}return!1},t.doBringToFront=function(t,n,i){for(var r=n.length-1-i,e=r;0<=e;--e){var u=n[e];if(u===t){if(e!==r){for(var s=e+1;s<=r;++s)n[s-1]=n[s];return n[r]=u,!0}return!1}}return!1},t}(),ue={NONE:0,CTRL:1,SHIFT:2,ALT:4,AND:8,OR:16,NOT_NONE:23},se=function(){function t(){}return t.from=function(t){var n="data"in t?t.data.originalEvent:t;return(n.ctrlKey?ue.CTRL:ue.NONE)|(n.altKey?ue.ALT:ue.NONE)|(n.shiftKey?ue.SHIFT:ue.NONE)},t.match=function(n,i){return i&ue.OR?!!(t.from(n)&i):t.from(n)===i},t}(),he=function(){function t(){}return Object.defineProperty(t,"touchable",{get:function(){return"ontouchstart"in document},enumerable:!1,configurable:!0}),Object.defineProperty(t,"tap",{get:function(){return"pointertap"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"down",{get:function(){return"pointerdown"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"enter",{get:function(){return"pointerenter"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"leave",{get:function(){return"pointerleave"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"move",{get:function(){return"pointermove"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"out",{get:function(){return"pointerout"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"over",{get:function(){return"pointerover"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"up",{get:function(){return"pointerup"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"upoutside",{get:function(){return"pointerupoutside"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cancel",{get:function(){return"pointercancel"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"righttap",{get:function(){return"rightclick"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"rightdown",{get:function(){return"rightdown"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"rightup",{get:function(){return"rightup"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"rightupoutside",{get:function(){return"rightupoutside"},enumerable:!1,configurable:!0}),t.toGlobal=function(t,n,i){if("touches"in t){var r=t.changedTouches,e=r[r.length-1];null!=e?n.mapPositionToPoint(i,e.clientX,e.clientY):n.mapPositionToPoint(i,0,0)}else n.mapPositionToPoint(i,t.clientX,t.clientY);return i},t.onDblClick=function(t,n){var i=this;if(t.addEventListener("dblclick",(function(t){return n(t,!1)})),this.touchable){var r=0,e=0,u=0,s=0;t.addEventListener("touchstart",(function(t){if(0===r||2===r){var n=t.touches,i=n.length;if(i<=0)r=0;else{var s=n.item(i-1);null!=s?(r+=1,e=s.clientX,u=s.clientY):r=0}}else r=0})),t.addEventListener("touchend",(function(t){if(1===r||3===r){var h=t.changedTouches,o=h.length;if(o<=0)r=0;else{var a=h[o-1];if(null!=a){var c=e-a.clientX,f=u-a.clientY;i.CLICK_DISTANCE_THRESHOLD<=Math.abs(c)+Math.abs(f)?r=0:1===r?(s=t.timeStamp,r=2):t.timeStamp-s<i.DBLCLICK_INTERVAL_THRESHOLD?(r=0,n(t,!0)):(s=t.timeStamp,r=2)}else r=0}}else r=0})),t.addEventListener("touchcancel",(function(){r=0}))}},t.contains=function(t,n){for(var i=n;null!=i&&i!==t;)i=i.parent;return i===t},t.CLICK_DISTANCE_THRESHOLD=10,t.DBLCLICK_INTERVAL_THRESHOLD=333,t.LONG_CLICK_THRESHOLD=750,t}(),oe=function(){function n(){this.pointers=new Map,this.center=new t.Point,this.scale=0,this.time=0,this.distance=0}return n.prototype.start=function(t){var n=t.data.originalEvent;"pointerId"in n&&this.pointers.set(n.pointerId,n),this.doUpdate(t)},n.prototype.isUpdatable=function(t){var n=t.data.originalEvent;return!("pointerId"in n)||this.pointers.has(n.pointerId)},n.prototype.update=function(t){var n=t.data.originalEvent;"pointerId"in n&&this.pointers.set(n.pointerId,n),this.doUpdate(t)},n.prototype.end=function(t){var n=!0,i=t.data.originalEvent;if("touches"in i)n=i.touches.length<=0;else if("pointerId"in i){var r=this.pointers;r.delete(i.pointerId),n=r.size<=0}return this.doUpdate(t),n},n.prototype.bind=function(t){var n=this.interactionManager;if(n){var i=this.onMove;i&&n.on(he.move,i);var r=this.onEnd;r&&(n.on(he.up,r),n.on(he.upoutside,r),n.on(he.cancel,r))}},n.prototype.unbind=function(){var t=this.interactionManager;if(t){var n=this.onMove;n&&t.off(he.move,n);var i=this.onEnd;i&&(t.off(he.up,i),t.off(he.upoutside,i),t.off(he.cancel,i))}},n.prototype.doUpdate=function(t){var n=this.interactionManager,i=this.center,r=t.data.originalEvent;if(this.scale=0,this.time=r.timeStamp,"touches"in r){var e=r.touches,u=e.length;if(0<u){for(var s=0,h=0,o=0,a=e.length;o<a;++o)s+=(f=e[o]).clientX,h+=f.clientY;if(s/=u,h/=u,n?n.mapPositionToPoint(i,s,h):i.set(s,h),1<u){var c=0;for(o=1,a=e.length;o<a;++o){var f,l=(f=e[o]).clientX-s,v=f.clientY-h;c=Math.max(c,l*l+v*v)}this.scale=Math.sqrt(c)}}}else if("pointerId"in r){var b=this.pointers,d=b.size;if(0<d){var g=0,m=0;if(b.forEach((function(t){g+=t.clientX,m+=t.clientY})),g/=d,m/=d,n?n.mapPositionToPoint(i,g,m):i.set(g,m),1<d){var w=0;b.forEach((function(t){var n=t.clientX-g,i=t.clientY-m;w=Math.max(w,n*n+i*i)})),this.scale=Math.sqrt(w)}}}else i.copyFrom(t.data.global)},n}(),ae=function(){function t(){}return t.LINEAR=function(t){return t},t.ELASTIC=function(t){return t*(3*(1-t)*(1-t)+t*(3*(1-t)+t))},t.QUAD_IN_OUT=function(t){return t<.5?2*t*t:(4-2*t)*t-1},t}(),ce=function(t){function n(n){var i,r,e,u=t.call(this)||this;u.A=null,u.Pr=null!==(i=null==n?void 0:n.target)&&void 0!==i?i:null,u.Ur=0,u.Fr=null!==(r=null==n?void 0:n.duration)&&void 0!==r?r:200,u.Gr=1/Math.max(1,u.Fr),u.Hr=!1,u.zr=null==n?void 0:n.onTime,u.Vr=function(){u.onTimeBase()},u.Wr=null==n?void 0:n.onStart,u.Xr=null==n?void 0:n.onEnd,u.Kr=null==n?void 0:n.onStop,u.Yr=null!==(e=null==n?void 0:n.timing)&&void 0!==e?e:ae.ELASTIC;var s=null==n?void 0:n.on;if(s)for(var h in s){var o=s[h];o&&u.on(h,o)}return u}return G(n,t),Object.defineProperty(n.prototype,"target",{get:function(){return this.Pr},set:function(t){this.Pr=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){return this.Fr},set:function(t){this.Fr=t,this.Gr=1/Math.max(1,t)},enumerable:!1,configurable:!0}),n.prototype.start=function(t){void 0===t&&(t=!1),this.stop(),this.Ur=Date.now(),this.Hr=t,this.A=window.setTimeout(this.Vr,0),this.onStart(t);var n=this.Fr,i=this.toTime(t?n:0);this.onTime(i,t,0)},n.prototype.onStart=function(t){var n=this.Wr;null!=n&&n(t,this),this.emit("start",t,this)},n.prototype.onTime=function(t,n,i){var r=this.zr;null!=r&&r(t,n,i,this),this.emit("time",t,n,i,this)},n.prototype.onEnd=function(t){var n=this.Xr;null!=n&&n(t,this),this.emit("end",t,this)},n.prototype.onStop=function(t){var n=this.Kr;null!=n&&n(t,this),this.emit("stop",t,this)},n.prototype.isStarted=function(){return null!=this.A},n.prototype.isReverse=function(){return this.Hr},n.prototype.onTimeBase=function(){if(null!=this.A){this.A=null;var t=Date.now()-this.Ur,n=this.Fr,i=this.Hr;if(t<n){this.A=window.setTimeout(this.Vr,0);var r=this.toTime(i?n-t:t);this.onTime(r,i,t)}else r=this.toTime(i?0:n),this.onTime(r,i,t),this.onEnd(i)}},n.prototype.toTime=function(t){return this.Yr(t*this.Gr,this)},n.prototype.stop=function(){var t=this.A;null!=t&&(this.A=null,window.clearTimeout(t),this.onStop(this.Hr))},n.prototype.end=function(){var t=this.A;if(null!=t){this.A=null,window.clearTimeout(t);var n=this.Hr,i=Date.now()-this.Ur,r=this.Fr,e=this.toTime(n?0:r);this.onTime(e,n,i),this.onEnd(n)}},n}(t.utils.EventEmitter),fe=function(){function t(t,n,i,r){this.dx=t,this.dy=n,this.ds=i,this.dt=r}return t.prototype.set=function(t,n,i,r){this.dx=t,this.dy=n,this.ds=i,this.dt=r},t}(),le=function(){function t(t,n,i){var r,e=this;this.Jr=[],this.Zr=[],this.qr=0,this.Qr=-1,this.$r=0,this.te=0,this.ne=0,this.ie=0,this.re=0,this._t=0,this.Fr=333*(null!==(r=null==i?void 0:i.duration)&&void 0!==r?r:1),this.ee=new ce({onTime:function(t){e.onEase(t)},onEnd:function(){e.onEaseEnd()},timing:ae.LINEAR,duration:this.Fr}),this.ue=t,this.Xr=n}return t.prototype.onStart=function(){for(var n=this.Jr,i=n.length,r=t.HISTORY_CAPACITY;i<r;++i)n.push(new fe(0,0,1,0));this.qr=0,this.Qr=-1,this.ee.stop()},t.prototype.onMove=function(n,i,r,e){var u=t.HISTORY_CAPACITY,s=this.Qr,h=(s+1)%u;this.Qr=h;var o=this.qr;(h<s||0<=s&&s<o)&&(this.qr=(o+1)%u),this.Jr[h].set(n,i,r,e)},t.prototype.updateHistoriesSorted=function(t){var n=this.Jr,i=this.Zr,r=this.qr,e=this.Qr,u=n.length;if(e<0)return i.length=0,t;if(e<r){var s=t;i.length=0;for(var h=e;0<=h;--h){var o=n[h];if(!(s+o.dt<160))return s;s+=o.dt,i.push(o)}for(h=u-1;r<=h;--h){var a=n[h];if(!(s+a.dt<160))return s;s+=a.dt,i.push(a)}return s}for(s=t,i.length=0,h=e;r<=h;--h){var c=n[h];if(!(s+c.dt<160))return s;s+=c.dt,i.push(c)}return s},t.prototype.onEnd=function(t){var n=this.Fr,i=n-t;if(i<=0)return this.onEaseEnd();this.updateHistoriesSorted(t);var r=this.Zr,e=r.length;if(e<=0)return this.onEaseEnd();for(var u=0,s=0,h=0,o=0,a=0;a<e;++a){var c=r[a];u+=c.dx,s+=c.dy,h+=c.ds,o+=c.dt}if(o<=0)return this.onEaseEnd();var f=1/e;u*=f,s*=f,h*=f,o*=f*(n/i),this.$r=u,this.te=s,this.ne=h,this.ie=o;var l=this.ee;l.duration=i,this._t=0,this.re=i/o,l.start()},t.prototype.onEase=function(t){var n=this._t;this._t=t;var i=(1-.5*(t+n))*(t-n)*this.re;this.ue(this.$r*i,this.te*i,1+(this.ne-1)*i,t)},t.prototype.onEaseEnd=function(){this.Xr()},t.prototype.stop=function(){this.ee.stop()},t.HISTORY_CAPACITY=5,t}(),ve=function(){function t(t,n){null!=t&&(this.se=t.tap,this.he=t.longpress),this.oe=this.toThreshold(n),this.ae=[],this.ce=new Map}return t.prototype.toThreshold=function(t){var n,i;if(null!=t){var r=t.threshold;if(null!=r)return{distance:null!==(n=r.distance)&&void 0!==n?n:10,long:null!==(i=r.long)&&void 0!==i?i:500}}return{distance:10,long:500}},t.prototype.newData=function(t){var n=this.ce,i=n.get(t);if(null!=i)return i;var r=this.ae.pop();if(null!=r)return n.set(t,r),r;var e=new oe;return e.easing=void 0,e.onMove=this.newOnMove(e),e.onEnd=this.newOnEnd(e),n.set(t,e),e},t.prototype.deleteData=function(t){var n=t.target;if(n&&this.ce.delete(n)){var i=t.timeoutId;null!=i&&(t.timeoutId=void 0,window.clearTimeout(i)),t.target=void 0,t.pointers.clear(),this.ae.push(t)}},t.prototype.newOnMove=function(t){var n=this;return function(i){n.onMove(i,t)}},t.prototype.newOnEnd=function(t){var n=this;return function(i){n.onEnd(i,t)}},t.prototype.onDown=function(t,n){var i;if(null!=this.se||null!=this.he){var r=lt.getLayer(t);if(null!=r)if(n.stopPropagation(),t.state.isGesturing)null===(i=this.ce.get(t))||void 0===i||i.start(n);else{var e=this.newData(t);e.target=t,e.distance=0,t.state.isGesturing=!0;var u=r.renderer.plugins.interaction;e.interactionManager=u,e.start(n),e.bind(n),this.start(t,e,n)}}},t.prototype.onMove=function(t,n){var i=n.target;if(null!=i&&i.state.isGesturing&&n.isUpdatable(t)){var r=n.center,e=r.x,u=r.y;n.update(t);var s=r.x-e,h=r.y-u;n.distance+=Math.abs(s)+Math.abs(h)}},t.prototype.onEnd=function(t,n){var i=n.target;if(null!=i&&i.state.isGesturing&&n.end(t)){i.state.isGesturing=!1;var r=n.interactionManager;if(n.interactionManager=void 0,r){var e=n.onMove;e&&r.off(he.move,e);var u=n.onEnd;u&&(r.off(he.up,u),r.off(he.cancel,u))}this.end(i,n,t),this.deleteData(n)}},t.prototype.onLongPress=function(t,n,i){if(n.timeoutId=void 0,n.distance<this.oe.distance){n.distance=this.oe.distance;var r=this.he;null!=r&&r(t,i)}},t.prototype.start=function(t,n,i){var r=this,e=this.oe.long;0<=e&&(n.timeoutId=window.setTimeout((function(){r.onLongPress(t,n,i)}),e))},t.prototype.end=function(t,n,i){var r=n.timeoutId;if(null!=r&&(n.timeoutId=void 0,window.clearTimeout(r)),n.distance<this.oe.distance){var e=this.se;e&&e(t,i)}},t.prototype.stop=function(t){var n=this.ce.get(t);null!=n&&this.deleteData(n)},t}(),be=function(){function t(t){var n,i,r,e=t.on;if(e){this.Wr=e.start,this.ue=e.move,this.Xr=e.end,this.Kr=e.stop;var u=e.easing;null!=u&&(this.fe=u.start,this.le=u.end)}this.ve=null!==(n=null==t?void 0:t.modifier)&&void 0!==n?n:ue.NONE;var s=t.checker,h=se.match;this.be=null!==(i=null==s?void 0:s.start)&&void 0!==i?i:h,this.de=null!==(r=null==s?void 0:s.move)&&void 0!==r?r:h,this.ge=t.easing,this.me=!!t.touch,this.ae=[],this.ce=new Map,this.we=new ve(t.on,t.tap);var o=t.bind;null!=o&&this.bind(o)}return t.prototype.newData=function(t){var n=this.ce,i=n.get(t);if(null!=i)return i;var r=this.ae.pop();if(null!=r)return n.set(t,r),r;var e=new oe;return e.easing=this.newEasing(e),e.onMove=this.newOnMove(e),e.onEnd=this.newOnEnd(e),n.set(t,e),e},t.prototype.newEasing=function(t){var n=this,i=this.ge;if(null==i||!1!==i)return new le((function(i,r,e,u){n.onEasingMove(i,r,e,u,t)}),(function(){n.onEasingEnd(t)}),this.toEasingOptions(i))},t.prototype.toEasingOptions=function(t){return null==t||!0===t?void 0:t},t.prototype.deleteData=function(t){var n=t.target;n&&this.ce.delete(n)&&(t.target=void 0,t.pointers.clear(),this.ae.push(t))},t.prototype.bind=function(t){var n=this;return t.on(he.down,(function(i){n.onDown(t,i)})),this},t.prototype.isTouch=function(t){var n=t.data.originalEvent;return"touches"in n||"pointerId"in n&&"mouse"!==n.pointerType},t.prototype.onDown=function(t,n){var i;if(!this.me||this.isTouch(n)){if(!this.be(n,this.ve,t))return this.we.onDown(t,n);var r=lt.getLayer(t);if(null!=r)if(n.stopPropagation(),t.state.isGesturing)null===(i=this.ce.get(t))||void 0===i||i.start(n);else{var e=this.Wr;null!=e&&e(t);var u=this.newData(t);u.target=t,u.distance=0,t.state.isGesturing=!0;var s=r.renderer.plugins.interaction;u.interactionManager=s,u.start(n);var h=u.easing;h&&h.onStart(),u.bind(n),this.we.start(t,u,n)}}},t.prototype.newOnMove=function(t){var n=this;return function(i){n.onMove(i,t)}},t.prototype.newOnEnd=function(t){var n=this;return function(i){n.onEnd(i,t)}},t.prototype.onMove=function(t,n){var i=n.target;if(null!=i&&i.state.isGesturing&&n.isUpdatable(t)&&this.de(t,this.ve,i)){var r=n.center,e=r.x,u=r.y,s=n.scale,h=n.time;n.update(t);var o=r.x,a=r.y,c=n.scale,f=o-e,l=a-u,v=n.time-h,b=1e-5,d=b<s&&b<c?c/s:1;n.distance+=Math.abs(f)+Math.abs(l);var g=n.easing;g&&g.onMove(f,l,d,v);var m=this.ue;null!=m&&(0===f&&0===l&&1===d||m(i,f,l,o,a,d))}},t.prototype.onEnd=function(t,n){var i=n.target;if(null!=i&&i.state.isGesturing){var r=n.time;if(n.end(t)){i.state.isGesturing=!1;var e=n.interactionManager;if(n.interactionManager=void 0,e){var u=n.onMove;u&&e.off(he.move,u);var s=n.onEnd;s&&(e.off(he.up,s),e.off(he.cancel,s))}var h=this.Xr;null!=h&&h(i),this.we.end(i,n,t);var o=this.fe;o&&o(n.target);var a=n.easing;if(a)a.onEnd(n.time-r);else{this.deleteData(n);var c=this.le;c&&c(n.target)}}}},t.prototype.onEasingMove=function(t,n,i,r,e){var u=e.target;if(null!=u){var s=this.ue;if(null!=s&&(0!==t||0!==n||1!==i)){var h=e.center,o=h.x+t,a=h.y+n;h.set(o,a),s(u,t,n,o,a,i)}}},t.prototype.onEasingEnd=function(t){var n=t.target;if(this.deleteData(t),null!=n){var i=this.le;i&&i(n)}},t.prototype.stop=function(t){this.we.stop(t);var n=this.ce.get(t);if(null!=n){var i=n.easing;null!=i&&i.stop(),this.deleteData(n);var r=this.Kr;r&&r(t)}},t}(),de={NONE:0,DRAG:1,PINCH:2,ALL:3},ge=function(n){function i(t){var i=n.call(this,t,mn.NONE)||this;return i.Oe=new Map,i.pe=t.operationType,i.De=t.scaleMin,i.Ee=t.scaleMax,i}return G(i,n),i.prototype.initialize=function(t,i){if(n.prototype.initialize.call(this,t,i),null==this.Oe.get(t)){var r=ee.toLayer(t);null!=r&&this.Oe.set(t,r)}},i.prototype.onDown=function(i,r,e){if(n.prototype.onDown.call(this,i,r,e),e instanceof t.InteractionEvent){var u=this.Oe.get(i),s=e.data.originalEvent.timeStamp;u&&this.condition(i,s,On)&&this.getGestureUtil().onDown(u,e)}},i.prototype.getGestureUtil=function(){var t;return null!==(t=i.GESTURE_UTIL)&&void 0!==t?t:i.GESTURE_UTIL=this.newGestureUtil()},i.prototype.newGestureUtil=function(){var n=this,i=new t.Point;return new be({on:{move:function(t,r,e,u,s,h){n.onGestureMove(t,r,e,u,s,h,i)}}})},i.prototype.onGestureMove=function(t,n,i,r,e,u,s){var h=t.parent;if(h){var o=t.transform,a=this.pe,c=!1,f=1;if(a&de.PINCH){var l=o.scale,v=l.y,b=Math.min(this.Ee,Math.max(this.De,v*u));f=b/v,l.set(b,b),c=!0}if(a&de.DRAG){h.toLocal(s.set(r,e),void 0,s);var d=s.x,g=s.y,m=r-n,w=e-i;h.toLocal(s.set(m,w),void 0,s);var O=s.x,p=s.y,D=o.position,E=(D.x-O)*f+d,M=(D.y-p)*f+g;D.set(E,M),c=!0}c&&lt.update(t)}},i.prototype.toSize=function(t,n){return"size"in t?n.copyFrom(t.size):n.set(t.width,t.height),n},i}(En),me=function(n){function i(t){var i=n.call(this,t,mn.NONE)||this;return i.pe=t.operationType,i.De=t.scaleMin,i.Ee=t.scaleMax,i}return G(i,n),i.prototype.onDown=function(i,r,e){n.prototype.onDown.call(this,i,r,e),e instanceof t.InteractionEvent&&this.condition(i,e.data.originalEvent.timeStamp,On)&&this.getGestureUtil().onDown(i,e)},i.prototype.getGestureUtil=function(){var t;return null!==(t=i.GESTURE_UTIL)&&void 0!==t?t:i.GESTURE_UTIL=this.newGestureUtil()},i.prototype.newGestureUtil=function(){var n=this,i=new t.Point;return new be({on:{move:function(t,r,e,u,s,h){n.onGestureMove(t,r,e,u,s,h,i)}}})},i.prototype.onGestureMove=function(t,n,i,r,e,u,s){var h=t.parent;if(h){var o=t.transform,a=this.pe,c=!1,f=1;if(a&de.PINCH){var l=o.scale,v=l.y,b=Math.min(this.Ee,Math.max(this.De,v*u));f=b/v,l.set(b,b),c=!0}if(a&de.DRAG){h.toLocal(s.set(r,e),void 0,s);var d=s.x,g=s.y,m=r-n,w=e-i;h.toLocal(s.set(m,w),void 0,s);var O=s.x,p=s.y,D=o.position,E=(D.x-O)*f+d,M=(D.y-p)*f+g;D.set(E,M),c=!0}c&&lt.update(t)}},i}(En),we={SHAPE:0,LAYER:1},Oe={INPUT_TEXT:0,INPUT_INTEGER:1,INPUT_REAL:2,EMIT_EVENT:3,WRITE_BOTH:4,WRITE_LOCAL:5,WRITE_REMOTE:6,HTML_ELEMENT:7,HTML_ELEMENT_WITHOUT_POINTER_EVENTS:8,SHOW_HIDE_LAYER:9,GESTURE_LAYER:10,GESTURE:11,EXECUTE:12,EXTENSION:1e3},pe=function(t){function n(n,i,r,e,u){void 0===n&&(n=""),void 0===e&&(e=.05),void 0===u&&(u=20);var s=t.call(this,kn.GESTURE,n,i)||this;return s.operationType=r,s.scaleMin=e,s.scaleMax=u,s}return G(n,t),n.prototype.toRuntime=function(){switch(this.subtype){case we.SHAPE:return new me(this);case we.LAYER:return new ge(this)}},n.prototype.serialize=function(t){var n=t.addResource(this.condition);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(this.operationType,",").concat(this.scaleMin,",").concat(this.scaleMax,"]"))},n.deserialize=function(t,i){return new n(Ln.toResource(1,t,i.resources),this.toSubType(t),t[3],t[4],t[5])},n.toSubType=function(t){if(t[0]!==kn.MISC)return t[2];switch(t[2]){case Oe.GESTURE:return we.SHAPE;case Oe.GESTURE_LAYER:return we.LAYER}},n}(yn),De={INVISIBLE:"INVISIBLE",INTERACTIVE:"INTERACTIVE",DRAGGABLE:"DRAGGABLE",PINCHABLE:"PINCHABLE"},Ee=function(t,n,i,r,e){var u,s,h,o=function(t,n){if(Tt(t))return t;var i=n.resources;return 0<=t&&t<=i.length?i[t]:""}(t[0],n),a=e?e(o,n):new re(o,n.mode,n.depth),c=t[1];null==c||2&c||(a.visible=!1,a.state.add(De.INVISIBLE));var f=-.5*i+(t[2]||0),l=-.5*r+(t[3]||0);a.transform.position.set(f,l);var v=null!==(u=t[4])&&void 0!==u?u:i,b=null!==(s=t[5])&&void 0!==s?s:r;a.size.set(v,b),a.size.init();var d=t[6];if(null!=d&&a.fill.deserialize(d,n),n.mode===Pi.VIEWER){var g=null!==(h=t[7])&&void 0!==h?h:1,m=1&g,w=2&g,O=4&g;if(w||O){var p=(w?de.DRAG:de.NONE)|(O?de.PINCH:de.NONE);a.action.add(new pe("",we.LAYER,p))}(m||w||O)&&(a.interactive=!0)}return a},Me=function(){function t(t,n){this.children=[],this.At=t,this.rr=n}return t.prototype.hasConnectors=function(t){for(var n=0,i=t.length;n<i;++n){var r=t[n];if(r instanceof kr)return!0;var e=r.children;if(0<e.length&&this.hasConnectors(e))return!0}return!1},t.prototype.newHasConnectors=function(){for(var t=new Map,n=this.children,i=0,r=n.length;i<r;++i){var e=n[i];t.set(e,this.hasConnectors(e.children))}return t},t.prototype.copyTo=function(t){for(var n,i=null!==(n=this.Me)&&void 0!==n?n:this.Me=this.newHasConnectors(),r=this.children,e=t.children,u=0,s=r.length;u<s;++u){var h=r[u],o=h.clone();o.parent=t,e.push(o),i.get(h)&&Lr.move(h,o)}t.onChildTransformChange(),t.toDirty(),t.onAttach()},t.prototype.deserialize=function(t,n){var i=t.length;if(0<i)for(var r=this.At,e=this.rr,u=0;u<i;++u)this.children.push(Ee(t[u],n,r,e))},t}(),Se=function(){function t(){}return t.parse=function(t){if(null!=t&&Tt(t))try{var n=JSON.parse(t);if(null!=n&&jt(n.version)&&Tt(n.name)){if(jt(n.width)&&jt(n.height)&&Mt(n.items)&&Mt(n.resources))return n;if(Tt(n.data))return this.toSerialized(n)}}catch(t){}return null},t.toSimple=function(t){return{version:t.version,id:t.id,name:t.name,label:t.label,category:t.category,summary:t.summary,description:t.description,thumbnail:t.thumbnail,data:JSON.stringify({width:t.width,height:t.height,background:t.background,tile:t.tile,resources:t.resources,data:t.data||t.tags,pieces:t.pieces,layers:t.layers,items:t.items,snap:t.snap})}},t.toSerialized=function(t){if(!("items"in t)){var n=JSON.parse(t.data),i={version:t.version,id:t.id,name:t.name,label:t.label,width:n.width,height:n.height,category:t.category,summary:t.summary,description:t.description,background:n.background,tile:n.tile,resources:n.resources,data:n.data||n.tags,pieces:n.pieces,layers:n.layers,items:n.items,snap:n.snap,thumbnail:t.thumbnail};if(null==i.data){var r=t.tags;null!=r&&(i.data=JSON.parse(r))}if(null==i.pieces){var e=t.pieces;null!=e&&(i.pieces=JSON.parse(e))}return i}return t},t.newLayer=function(t,n,i){n.deserialize(t.layers,i);var r=t.items,e=tr(r,i);return null!=e?e.then((function(t){for(var i=n.children,e=0,u=t.length;e<u;++e){var s=r[e],h=t[e];null!=(o=i[s[16]])&&(h.parent=o,h.uploaded=void 0,o.children.push(h))}for(e=0,u=i.length;e<u;++e){var o;(o=i[e]).onChildTransformChange(),o.toDirty();for(var a=o.children,c=0,f=a.length;c<f;++c)a[c].onAttach()}return t})):Promise.resolve([])},t.toPieceData=function(t,n,i){var r=new Map,e=new Map,u=function(){return r};return this.Se(t,n,r,e,i,0).then(u,u)},t.Se=function(t,n,i,r,e,u){var s=this,h=[];if(n&&0<n.length&&t)for(var o=function(o,a){var c=n[o],f=r.get(c);if(null!=f)h.push(f);else{var l=t.piece.getByName(c).then((function(n){return s.je(t,c,n,e,u+1,i,r)}),(function(){return null}));r.set(c,l),h.push(l)}},a=0,c=n.length;a<c;++a)o(a);return Promise.all(h)},t.je=function(t,n,i,r,e,u,s){var h=this,o=this.toSerialized(i),a=o.width,c=o.height,f=new Me(a,c);u.set(n,new ir(n,a,c,f));var l=o.pieces;return this.Se(t,l,u,s,r,e).then((function(){return h.newLayer(o,f,new _i(o,l,u,r,e))}))},t}(),je={},Te=function(){function t(t,n,i){this.Te=t,this.Ie=i;var r=null==n?void 0:n.background;r&&(this.p=r.color,this.S=r.alpha)}return t.prototype.getTheme=function(){return this.Te},t.prototype.setTheme=function(t){this.Te=t},t.prototype.getColor=function(t){var n=this.p;if(void 0!==n){if(!St(n))return n;var i=n(t);if(void 0!==i)return i}return this.Te.getBackgroundColor(t)},Object.defineProperty(t.prototype,"color",{get:function(){return this.p},set:function(t){this.p!==t&&(this.p=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.getAlpha=function(t){var n=this.S;if(void 0!==n){if(!St(n))return n;var i=n(t);if(void 0!==i)return i}return this.Te.getBackgroundAlpha(t)},Object.defineProperty(t.prototype,"alpha",{get:function(){return this.S},set:function(t){this.S!==t&&(this.S=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.onChange=function(){var t=this.Ie;null!=t&&t()},t}(),Ie={NONE:0,TOP:1,RIGHT:2,BOTTOM:4,LEFT:8,TOP_RIGHT:3,TOP_BOTTOM:5,TOP_LEFT:9,RIGHT_BOTTOM:6,RIGHT_LEFT:10,BOTTOM_LEFT:12,NOT_TOP:14,NOT_RIGHT:13,NOT_BOTTOM:11,NOT_LEFT:7,ALL:15},Ce=function(){function t(t,n,i){this.Te=t,this.Ie=i;var r=null==n?void 0:n.border;r&&(this.p=r.color,this.S=r.alpha,this.At=r.width,this.Rt=r.align,this.Ce=rr(r.mask,Ie))}return t.prototype.getTheme=function(){return this.Te},t.prototype.setTheme=function(t){this.Te=t},t.prototype.getColor=function(t){var n=this.p;if(void 0!==n){if(!St(n))return n;var i=n(t);if(void 0!==i)return i}return this.Te.getBorderColor(t)},Object.defineProperty(t.prototype,"color",{get:function(){return this.p},set:function(t){this.p!==t&&(this.p=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.getAlpha=function(t){var n=this.S;if(void 0!==n){if(!St(n))return n;var i=n(t);if(void 0!==i)return i}return this.Te.getBorderAlpha(t)},Object.defineProperty(t.prototype,"alpha",{get:function(){return this.S},set:function(t){this.S!==t&&(this.S=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.getWidth=function(t){var n=this.At;if(void 0!==n){if(!St(n))return n;var i=n(t);if(void 0!==i)return i}return this.Te.getBorderWidth(t)},Object.defineProperty(t.prototype,"width",{get:function(){return this.At},set:function(t){this.At!==t&&(this.At=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.getAlign=function(t){var n=this.Rt;if(void 0!==n){if(!St(n))return n;var i=n(t);if(void 0!==i)return i}return this.Te.getBorderAlign(t)},Object.defineProperty(t.prototype,"align",{get:function(){return this.Rt},set:function(t){this.Rt!==t&&(this.Rt=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.getMask=function(t){var n=this.Ce;if(void 0!==n){if(!St(n))return n;var i=n(t);if(void 0!==i)return i}return this.Te.getBorderMask(t)},Object.defineProperty(t.prototype,"mask",{get:function(){return this.Ce},set:function(t){this.Ce!==t&&(this.Ce=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.onChange=function(){var t=this.Ie;null!=t&&t()},t}(),Ne={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_LEFT:4,BOTTOM_RIGHT:8,TOP:3,BOTTOM:12,LEFT:5,RIGHT:10,ALL:15},Ae=function(){function t(t,n,i){this.Te=t,this.Ie=i;var r=null==n?void 0:n.corner;r&&(jt(r)?(this.an=r,this.Ce=void 0):(this.an=r.radius,this.Ce=rr(r.mask,Ne)))}return t.prototype.getTheme=function(){return this.Te},t.prototype.setTheme=function(t){this.Te=t},t.prototype.getRadius=function(){var t;return null!==(t=this.an)&&void 0!==t?t:this.Te.getCornerRadius()},Object.defineProperty(t.prototype,"radius",{get:function(){return this.an},set:function(t){if(this.an!==t){this.an=t;var n=this.Ie;null!=n&&n()}},enumerable:!1,configurable:!0}),t.prototype.getMask=function(){var t;return null!==(t=this.Ce)&&void 0!==t?t:this.Te.getCornerMask()},Object.defineProperty(t.prototype,"mask",{get:function(){return this.Ce},set:function(t){if(this.Ce!==t){this.Ce=t;var n=this.Ie;null!=n&&n()}},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){var i=!1;this.an!==t&&(this.an=t,i=!0),this.Ce!==n&&(this.Ce=n,i=!0);var r=this.Ie;i&&null!=r&&r()},t}(),Re={NONE:0,SELF:1,CHILDREN:2,BOTH:3},ye=function(){function t(t,n,i){this.Te=t,this.Ie=i;var r=null==n?void 0:n.outline;r&&(this.p=r.color,this.S=r.alpha,this.At=r.width,this.Ne=r.offset,this.Rt=r.align,this.Ce=rr(r.mask,Ie))}return t.prototype.getTheme=function(){return this.Te},t.prototype.setTheme=function(t){this.Te=t},t.prototype.getColor=function(t){var n=this.p;if(void 0!==n){if(!St(n))return n;var i=n(t);if(void 0!==i)return i}return this.Te.getOutlineColor(t)},Object.defineProperty(t.prototype,"color",{get:function(){return this.p},set:function(t){if(this.p!==t){this.p=t;var n=this.Ie;null!=n&&n()}},enumerable:!1,configurable:!0}),t.prototype.getAlpha=function(t){var n=this.S;if(void 0!==n){if(!St(n))return n;var i=n(t);if(void 0!==i)return i}return this.Te.getOutlineAlpha(t)},Object.defineProperty(t.prototype,"alpha",{get:function(){return this.S},set:function(t){if(this.S!==t){this.S=t;var n=this.Ie;null!=n&&n()}},enumerable:!1,configurable:!0}),t.prototype.getWidth=function(t){var n=this.At;if(void 0!==n){if(!St(n))return n;var i=n(t);if(void 0!==i)return i}return this.Te.getOutlineWidth(t)},Object.defineProperty(t.prototype,"width",{get:function(){return this.At},set:function(t){if(this.At!==t){this.At=t;var n=this.Ie;null!=n&&n()}},enumerable:!1,configurable:!0}),t.prototype.getOffset=function(t){var n=this.Ne;if(void 0!==n){if(!St(n))return n;var i=n(t);if(void 0!==i)return i}return this.Te.getOutlineOffset(t)},Object.defineProperty(t.prototype,"offset",{get:function(){return this.Ne},set:function(t){if(this.Ne!==t){this.Ne=t;var n=this.Ie;null!=n&&n()}},enumerable:!1,configurable:!0}),t.prototype.getAlign=function(t){var n=this.Rt;if(void 0!==n){if(!St(n))return n;var i=n(t);if(void 0!==i)return i}return this.Te.getOutlineAlign(t)},Object.defineProperty(t.prototype,"align",{get:function(){return this.Rt},set:function(t){if(this.Rt!==t){this.Rt=t;var n=this.Ie;null!=n&&n()}},enumerable:!1,configurable:!0}),t.prototype.getMask=function(t){var n=this.Ce;if(void 0!==n){if(!St(n))return n;var i=n(t);if(void 0!==i)return i}return this.Te.getOutlineMask(t)},Object.defineProperty(t.prototype,"mask",{get:function(){return this.Ce},set:function(t){if(this.Ce!==t){this.Ce=t;var n=this.Ie;null!=n&&n()}},enumerable:!1,configurable:!0}),t}(),ke=function(){function t(t,n,i){this.Te=t,this.Ie=i;var r=null==n?void 0:n.padding;null!=r&&(jt(r)?(this.Ae=r,this.Re=r,this.ye=r,this.ke=r):(this.Ae=r.left,this.Re=r.top,this.ye=r.right,this.ke=r.bottom))}return t.prototype.getTheme=function(){return this.Te},t.prototype.setTheme=function(t){this.Te=t},t.prototype.getCallback=function(){return this.Ie},t.prototype.getLeft=function(){var t;return null!==(t=this.Ae)&&void 0!==t?t:this.Te.getPaddingLeft()},Object.defineProperty(t.prototype,"left",{get:function(){return this.Ae},set:function(t){this.Ae!==t&&(this.Ae=t,null!=this.Ie&&this.Ie())},enumerable:!1,configurable:!0}),t.prototype.getTop=function(){var t;return null!==(t=this.Re)&&void 0!==t?t:this.Te.getPaddingTop()},Object.defineProperty(t.prototype,"top",{get:function(){return this.Re},set:function(t){this.Re!==t&&(this.Re=t,null!=this.Ie&&this.Ie())},enumerable:!1,configurable:!0}),t.prototype.getRight=function(){var t;return null!==(t=this.ye)&&void 0!==t?t:this.Te.getPaddingRight()},Object.defineProperty(t.prototype,"right",{get:function(){return this.ye},set:function(t){this.ye!==t&&(this.ye=t,null!=this.Ie&&this.Ie())},enumerable:!1,configurable:!0}),t.prototype.getBottom=function(){var t;return null!==(t=this.ke)&&void 0!==t?t:this.Te.getPaddingBottom()},Object.defineProperty(t.prototype,"bottom",{get:function(){return this.ke},set:function(t){this.ke!==t&&(this.ke=t,null!=this.Ie&&this.Ie())},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n,i,r){null==n?(this.top=t,this.right=t,this.bottom=t,this.left=t):null==i?(this.top=t,this.right=n,this.bottom=t,this.left=n):null==r?(this.top=t,this.right=n,this.bottom=i,this.left=n):(this.top=t,this.right=n,this.bottom=i,this.left=r),null!=this.Ie&&this.Ie()},t}(),Le=function(){function t(t,n){this.Le=t,this.et=n}return Object.defineProperty(t.prototype,"x",{get:function(){return this.Le.x},set:function(t){var n=this.Le,i=n.x;if(i!==t){n.x=t;var r=n.y;this.et(t,r,i,r)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.Le.y},set:function(t){var n=this.Le,i=n.y;if(i!==t){n.y=t;var r=n.x;this.et(r,t,r,i)}},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){var i=this.Le,r=i.x,e=i.y;return r===t&&e===n||(i.set(t,n),this.et(t,n,r,e)),this},t.prototype.copyFrom=function(t){var n=t.x,i=t.y,r=this.Le,e=r.x,u=r.y;return e===n&&u===i||(r.copyFrom(t),this.et(n,i,e,u)),this},t.prototype.copyTo=function(t){return t.copyFrom(this.Le)},t.prototype.copy=function(){return this.copyFrom(arguments[0])},t.prototype.clone=function(n){return new t(this.Le,n||this.et)},t.prototype.equals=function(t){return this.Le.equals(t)},t}(),xe=function(t){function n(n,i,r){var e=t.call(this,n,i,r)||this;return e.At=100,e.rr=100,e.xe=0,e.Be=Ne.NONE,e.Pi=!0,e._e=1,e.ar=e.getBuffer("aVertexPosition"),e.Pe=e.ar.data,e.vr=e.getBuffer("aTextureCoord"),e._uvs=e.vr.data,e.dr=e.getIndex(),e.Ue=e.dr.data,e}return G(n,t),Object.defineProperty(n.prototype,"width",{get:function(){return this.At},set:function(t){this.At!==t&&(this.At=t,this.Pi=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.rr},set:function(t){this.rr!==t&&(this.rr=t,this.Pi=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cornerRadius",{get:function(){return this.xe},set:function(t){this.xe!==t&&(this.xe=t,this.Pi=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cornerMask",{get:function(){return this.Be},set:function(t){this.Be!==t&&(this.Be=t,this.Pi=!0)},enumerable:!1,configurable:!0}),n.prototype.getTables=function(){var t=n.TABLES;return null==t&&(t=this.newTables(n.N),n.TABLES=t),t},n.prototype.newTables=function(t){var n=1/(t-1)*.5;return[this.newTable(t,1,n),this.newTable(t,.5,n),this.newTable(t,0,n),this.newTable(t,1.5,n)]},n.prototype.newTable=function(t,n,i){for(var r=[],e=[],u=Math.PI,s=0,h=n;s<t;s+=1,h-=i){var o=h*u,a=+Math.cos(o),c=-Math.sin(o);r.push(a),e.push(c)}return{cos:r,sin:e}},n.N=5,n}(t.MeshGeometry),Be=function(t){function n(){return t.call(this,new Float32Array(16*xe.N),new Float32Array(16*xe.N),new Uint16Array(3*(12*xe.N-2)))||this}return G(n,t),n.prototype.fillVertices=function(t,n,i,r,e,u,s,h,o,a){for(var c=a.cos,f=a.sin,l=h+o,v=0;v<e;++v){var b=c[v],d=f[v];t[++i]=u+b*h,t[++i]=s+d*h,t[++i]=u+b*l,t[++i]=s+d*l,n[++r]=.5,n[++r]=.5,n[++r]=.5*(1+b),n[++r]=.5*(1+d)}},n.prototype.fillIndices=function(t,n,i,r){for(var e=0;e<r;++e)t[++i]=n+0,t[++i]=n+1,t[++i]=n+2,t[++i]=n+2,t[++i]=n+1,t[++i]=n+3,n+=2},n.prototype.fillIndicesEnd=function(t,n,i,r){for(var e=0,u=r-1;e<u;++e)t[++i]=n+0,t[++i]=n+1,t[++i]=n+2,t[++i]=n+2,t[++i]=n+1,t[++i]=n+3,n+=2;t[++i]=n+0,t[++i]=n+1,t[++i]=0,t[++i]=0,t[++i]=n+1,t[++i]=1,n+=2},n.prototype.update=function(t){var n=t.resolution;if(this.Pi||this._e!==n){this.Pi=!1,this._e=n;var i=this.Pe,r=this._uvs,e=this.Ue,u=this.At,s=this.rr,h=Math.min(.5*u,.5*s,this.xe),o=.5/n,a=h,c=u-h,f=u,l=h,v=s-h,b=s,d=this.Be,g=!(d&Ne.TOP_LEFT),m=!(d&Ne.TOP_RIGHT),w=!(d&Ne.BOTTOM_LEFT),O=!(d&Ne.BOTTOM_RIGHT),p=-1,D=-1,E=0,M=-1,S=xe.N,j=S<<2,T=S<<1,I=6*S,C=this.getTables(),N=C[0],A=C[1],R=C[2],y=C[3];g?this.fillVertices(i,r,p,D,S,a,l,h,o,N):this.fillVertices(i,r,p,D,S,0,0,0,o,N),this.fillIndices(e,E,M,S),p+=j,D+=j,E+=T,M+=I,m?this.fillVertices(i,r,p,D,S,c,l,h,o,A):this.fillVertices(i,r,p,D,S,f,0,0,o,A),this.fillIndices(e,E,M,S),p+=j,D+=j,E+=T,M+=I,O?this.fillVertices(i,r,p,D,S,c,v,h,o,R):this.fillVertices(i,r,p,D,S,f,b,0,o,R),this.fillIndices(e,E,M,S),p+=j,D+=j,E+=T,M+=I,w?this.fillVertices(i,r,p,D,S,a,v,h,o,y):this.fillVertices(i,r,p,D,S,0,b,0,o,y),this.fillIndicesEnd(e,E,M,S),p+=j,D+=j,E+=T,M+=I,E=2;for(var k=1,L=4*S-1;k<L;k+=1,E+=2)e[++M]=0,e[++M]=E,e[++M]=E+2;this.ar.update(),this.vr.update(),this.dr.update()}},n}(xe),_e=function(n){function i(i){var r=n.call(this,new Be,new t.MeshMaterial(i))||this;return i.on("update",(function(){lt.update(r)})),r}return G(i,n),Object.defineProperty(i.prototype,"width",{get:function(){return this.geometry.width},set:function(t){this.geometry.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.geometry.height},set:function(t){this.geometry.height=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cornerRadius",{get:function(){return this.geometry.cornerRadius},set:function(t){this.geometry.cornerRadius=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cornerMask",{get:function(){return this.geometry.cornerMask},set:function(t){this.geometry.cornerMask=t},enumerable:!1,configurable:!0}),i.prototype._render=function(t){this.geometry.update(t),n.prototype._render.call(this,t)},i}(t.Mesh),Pe=function(){function t(){}return t.prototype.get=function(t,n){var i=this.Fe;return null==i&&((i=new _e(n.getBackgroundTexture())).parent=t,this.Fe=i),i},t.prototype.hide=function(){var t=this.Fe;null!=t&&(t.visible=!1)},t.prototype.onReflow=function(t,n,i,r,e,u,s){var h=t.background,o=h.getColor(e);if(null!=o){var a=h.getAlpha(e);if(0<a){var c=this.get(t,r);c.tint=o,c.alpha=a,c.width=n,c.height=i,c.cornerRadius=u,c.cornerMask=s,c.visible=!0}else this.hide()}else this.hide()},t.prototype.render=function(t){var n;null===(n=this.Fe)||void 0===n||n.render(t)},t.prototype.updateTransform=function(){var t;null===(t=this.Fe)||void 0===t||t.updateTransform()},t}(),Ue=function(t){function n(){var n=t.call(this,new Float32Array(32*xe.N),new Float32Array(32*xe.N),new Uint16Array(72*xe.N))||this;return n.Ge=0,n.He=Ie.NONE,n}return G(n,t),Object.defineProperty(n.prototype,"borderWidth",{get:function(){return this.Ge},set:function(t){this.Ge!==t&&(this.Ge=t,this.Pi=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"borderMask",{get:function(){return this.He},set:function(t){this.He!==t&&(this.He=t,this.Pi=!0)},enumerable:!1,configurable:!0}),n.prototype.fillVertices=function(t,n,i,r,e,u,s,h,o,a,c){var f=.5*a,l=h-f,v=h+f,b=l-o,d=v+o,g=c.cos,m=c.sin;if(b<=0){var w=g[0]+g[e-1],O=m[0]+m[e-1];if(l<=0)if(h<=0)for(var p=0;p<e;++p){var D=g[p],E=m[p];t[++i]=u+w*b,t[++i]=s+O*b,t[++i]=u+w*l,t[++i]=s+O*l,t[++i]=u+w*v,t[++i]=s+O*v,t[++i]=u+w*d,t[++i]=s+O*d,n[++r]=.5*(1+D),n[++r]=.5*(1+E),n[++r]=.5,n[++r]=.5,n[++r]=.5,n[++r]=.5,n[++r]=.5*(1+D),n[++r]=.5*(1+E)}else for(p=0;p<e;++p)D=g[p],E=m[p],t[++i]=u+w*b,t[++i]=s+O*b,t[++i]=u+w*l,t[++i]=s+O*l,t[++i]=u+D*v,t[++i]=s+E*v,t[++i]=u+D*d,t[++i]=s+E*d,n[++r]=.5*(1+D),n[++r]=.5*(1+E),n[++r]=.5,n[++r]=.5,n[++r]=.5,n[++r]=.5,n[++r]=.5*(1+D),n[++r]=.5*(1+E);else for(p=0;p<e;++p)D=g[p],E=m[p],t[++i]=u+w*b,t[++i]=s+O*b,t[++i]=u+D*l,t[++i]=s+E*l,t[++i]=u+D*v,t[++i]=s+E*v,t[++i]=u+D*d,t[++i]=s+E*d,n[++r]=.5*(1+D),n[++r]=.5*(1+E),n[++r]=.5,n[++r]=.5,n[++r]=.5,n[++r]=.5,n[++r]=.5*(1+D),n[++r]=.5*(1+E)}else for(p=0;p<e;++p)D=g[p],E=m[p],t[++i]=u+D*b,t[++i]=s+E*b,t[++i]=u+D*l,t[++i]=s+E*l,t[++i]=u+D*v,t[++i]=s+E*v,t[++i]=u+D*d,t[++i]=s+E*d,n[++r]=.5*(1+D),n[++r]=.5*(1+E),n[++r]=.5,n[++r]=.5,n[++r]=.5,n[++r]=.5,n[++r]=.5*(1+D),n[++r]=.5*(1+E)},n.prototype.fillIndices=function(t,n,i,r,e,u){for(var s=0,h=r-1;s<h;++s)t[++i]=n+0,t[++i]=n+1,t[++i]=n+4,t[++i]=n+4,t[++i]=n+1,t[++i]=n+5,n+=1,t[++i]=n+0,t[++i]=n+1,t[++i]=n+4,t[++i]=n+4,t[++i]=n+1,t[++i]=n+5,n+=1,t[++i]=n+0,t[++i]=n+1,t[++i]=n+4,t[++i]=n+4,t[++i]=n+1,t[++i]=n+5,n+=2;e?u?(t[++i]=n+0,t[++i]=n+1,t[++i]=0,t[++i]=0,t[++i]=n+1,t[++i]=1,n+=1,t[++i]=n+0,t[++i]=n+1,t[++i]=1,t[++i]=1,t[++i]=n+1,t[++i]=2,n+=1,t[++i]=n+0,t[++i]=n+1,t[++i]=2,t[++i]=2,t[++i]=n+1,t[++i]=3,n+=2):(t[++i]=n+0,t[++i]=n+1,t[++i]=n+4,t[++i]=n+4,t[++i]=n+1,t[++i]=n+5,n+=1,t[++i]=n+0,t[++i]=n+1,t[++i]=n+4,t[++i]=n+4,t[++i]=n+1,t[++i]=n+5,n+=1,t[++i]=n+0,t[++i]=n+1,t[++i]=n+4,t[++i]=n+4,t[++i]=n+1,t[++i]=n+5,n+=2):(t[++i]=n,t[++i]=n,t[++i]=n,t[++i]=n,t[++i]=n,t[++i]=n,n+=1,t[++i]=n,t[++i]=n,t[++i]=n,t[++i]=n,t[++i]=n,t[++i]=n,n+=1,t[++i]=n,t[++i]=n,t[++i]=n,t[++i]=n,t[++i]=n,t[++i]=n,n+=2)},n.prototype.update=function(t){var n=t.resolution;if(this.Pi||this._e!==n){this.Pi=!1,this._e=n;var i=this.Pe,r=this._uvs,e=this.Ue,u=this.At,s=this.rr,h=this.Ge,o=Math.min(.5*u,.5*s,this.xe),a=.5/n,c=o,f=u-o,l=u,v=o,b=s-o,d=s,g=this.He,m=!(g&Ie.TOP),w=!(g&Ie.BOTTOM),O=!(g&Ie.LEFT),p=!(g&Ie.RIGHT),D=this.Be,E=!(D&Ne.TOP_LEFT),M=!(D&Ne.TOP_RIGHT),S=!(D&Ne.BOTTOM_LEFT),j=!(D&Ne.BOTTOM_RIGHT),T=-1,I=-1,C=0,N=-1,A=xe.N,R=A<<2,y=A<<3,k=18*A,L=this.getTables(),x=L[0],B=L[1],_=L[2],P=L[3];E?O||m?this.fillVertices(i,r,T,I,A,c,v,o,a,h,x):this.fillVertices(i,r,T,I,A,c,v,o,a,0,x):O||m?this.fillVertices(i,r,T,I,A,0,0,0,a,h,x):this.fillVertices(i,r,T,I,A,0,0,0,a,0,x),this.fillIndices(e,C,N,A,m,!1),T+=y,I+=y,C+=R,N+=k,M?m||p?this.fillVertices(i,r,T,I,A,f,v,o,a,h,B):this.fillVertices(i,r,T,I,A,f,v,o,a,0,B):m||p?this.fillVertices(i,r,T,I,A,l,0,0,a,h,B):this.fillVertices(i,r,T,I,A,l,0,0,a,0,B),this.fillIndices(e,C,N,A,p,!1),T+=y,I+=y,C+=R,N+=k,j?p||w?this.fillVertices(i,r,T,I,A,f,b,o,a,h,_):this.fillVertices(i,r,T,I,A,f,b,o,a,0,_):p||w?this.fillVertices(i,r,T,I,A,l,d,0,a,h,_):this.fillVertices(i,r,T,I,A,l,d,0,a,0,_),this.fillIndices(e,C,N,A,w,!1),T+=y,I+=y,C+=R,N+=k,S?w||O?this.fillVertices(i,r,T,I,A,c,b,o,a,h,P):this.fillVertices(i,r,T,I,A,c,b,o,a,0,P):w||O?this.fillVertices(i,r,T,I,A,0,d,0,a,h,P):this.fillVertices(i,r,T,I,A,0,d,0,a,0,P),this.fillIndices(e,C,N,A,O,!0),T+=y,I+=y,C+=R,N+=k,this.ar.update(),this.vr.update(),this.dr.update()}},n}(xe),Fe=function(n){function i(i){var r=n.call(this,new Ue,new t.MeshMaterial(i))||this;return i.on("update",(function(){lt.update(r)})),r}return G(i,n),Object.defineProperty(i.prototype,"width",{get:function(){return this.geometry.width},set:function(t){this.geometry.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.geometry.height},set:function(t){this.geometry.height=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cornerRadius",{get:function(){return this.geometry.cornerRadius},set:function(t){this.geometry.cornerRadius=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cornerMask",{get:function(){return this.geometry.cornerMask},set:function(t){this.geometry.cornerMask=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"borderWidth",{get:function(){return this.geometry.borderWidth},set:function(t){this.geometry.borderWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"borderMask",{get:function(){return this.geometry.borderMask},set:function(t){this.geometry.borderMask=t},enumerable:!1,configurable:!0}),i.prototype._render=function(t){this.geometry.update(t),n.prototype._render.call(this,t)},i}(t.Mesh),Ge=function(){function t(){}return t.prototype.get=function(t,n){var i=this.Fe;return null==i&&((i=new Fe(n.getBorderTexture())).parent=t,this.Fe=i),i},t.prototype.hide=function(){var t=this.Fe;null!=t&&(t.visible=!1)},t.prototype.onReflow=function(t,n,i,r,e,u,s){var h=t.border,o=h.getColor(e);if(null!=o){var a=h.getAlpha(e);if(0<a){var c=h.getWidth(e),f=h.getMask(e),l=this.get(t,r),v=(h.getAlign(e)-.5)*c;l.tint=o,l.alpha=a,l.x=-v,l.y=-v,l.width=n+2*v,l.height=i+2*v,l.cornerRadius=Math.max(0,u+v),l.cornerMask=s,l.borderWidth=c,l.borderMask=f,l.visible=!0}else this.hide()}else this.hide()},t.prototype.render=function(t){var n;null===(n=this.Fe)||void 0===n||n.render(t)},t.prototype.updateTransform=function(){var t;null===(t=this.Fe)||void 0===t||t.updateTransform()},t}(),He=function(){function t(){}return t.prototype.get=function(t,n){var i=this.Fe;return null==i&&((i=new Fe(n.getBorderTexture())).parent=t,this.Fe=i),i},t.prototype.hide=function(){var t=this.Fe;null!=t&&(t.visible=!1)},t.prototype.onReflow=function(t,n,i,r,e,u,s){var h=t.outline,o=h.getColor(e);if(null!=o){var a=h.getAlpha(e);if(0<a){var c=h.getWidth(e),f=h.getMask(e),l=this.get(t,r),v=h.getOffset(e)+(h.getAlign(e)-.5)*c;l.tint=o,l.alpha=a,l.x=-v,l.y=-v,l.width=n+2*v,l.height=i+2*v,l.cornerRadius=Math.max(0,u+v),l.cornerMask=s,l.borderWidth=c,l.borderMask=f,l.visible=!0}else this.hide()}else this.hide()},t.prototype.render=function(t){var n;null===(n=this.Fe)||void 0===n||n.render(t)},t.prototype.updateTransform=function(){var t;null===(t=this.Fe)||void 0===t||t.updateTransform()},t}(),ze=function(){function t(t){var n=new Pe;this.ze=n,t.snippet.add(n,!0);var i=new Ge;this.Ve=i,t.snippet.add(i,!0);var r=new He;this.We=r,t.snippet.add(r,!1),t.reflowable.add(this)}return t.prototype.onReflow=function(t,n,i){var r=t.theme,e=t.state,u=t.corner,s=u.getRadius(),h=u.getMask();this.ze.onReflow(t,n,i,r,e,s,h),this.Ve.onReflow(t,n,i,r,e,s,h),this.We.onReflow(t,n,i,r,e,s,h)},t}(),Ve={NONE:0,BEFORE:1,AFTER:2,BOTH:3},We={OPEN:0,CLOSE:1,PARENSESIS:2,ADD_OR_PLUS:3,SUB_OR_MINUS:4,PLUS:5,MINUS:6,ADD:7,SUB:8,MUL:9,DIV:10,MIN:11,MAX:12,COMMA:13,PARENT:14,SELF:15,PADDING:16,CURRENT:17,NUMBER:18},Xe=function(){function t(t){var n=this.toToken(t),i=0;do{i=this.toParensesis(n,i)}while(i<n.length);if(this.toUnary(n),this.toArithmetic(n,We.MUL,We.DIV),this.toArithmetic(n,We.ADD,We.SUB),1===n.length){var r=n[0];if(!jt(r))return void(this.Xe=r)}throw new Error("Failed to parse '".concat(t,"'"))}return t.prototype.toParensesis=function(t,n){for(var i=t.length,r=n;r<i;++r)if(t[r]===We.OPEN){var e=r,u=We.PARENSESIS;if(0<r){var s=t[r-1];s!==We.MIN&&s!==We.MAX||(e-=1,u=s)}for(var h=r+1;h<i;++h){var o=t[h];if(o===We.CLOSE)return t[e]=[u,this.toComma(t,r+1,h)],t.splice(e+1,h-e),e+1;o===We.OPEN&&(h=this.toParensesis(t,h)-1,i=t.length)}throw new Error("Malformed parensesis")}return i},t.prototype.toCommaOf=function(t,n,i){var r=i-n;if(r<=0)return[We.NUMBER,0];if(r<=1)return t[n];for(var e=[],u=n;u<i;++u)e.push(t[u]);return[We.PARENSESIS,e]},t.prototype.toComma=function(t,n,i){for(var r=null,e=n,u=n;u<i;++u)t[u]===We.COMMA&&((r=r||[]).push(this.toCommaOf(t,e,u)),e=u+1);if(e<i){if(null==r){var s=[];for(u=e;u<i;++u)s.push(t[u]);return s}r.push(this.toCommaOf(t,e,i))}return r||[]},t.prototype.toUnaryNode=function(t){jt(t)||t[0]!==We.PARENSESIS&&t[0]!==We.MIN&&t[0]!==We.MAX||this.toUnary(t[1])},t.prototype.toUnary=function(t){for(var n=0,i=t.length;n<i;++n){var r=t[n];if(r===We.ADD_OR_PLUS||r===We.SUB_OR_MINUS)if(n<=0||jt(t[n-1])){if(!(n+1<i)||jt(t[n+1]))throw new Error("Malformed unary operator");var e=t.splice(n+1,1)[0],u=r===We.ADD_OR_PLUS?We.PLUS:We.MINUS;t[n]=[u,e],i=t.length,this.toUnaryNode(e)}else u=r===We.ADD_OR_PLUS?We.ADD:We.SUB,t[n]=u;else this.toUnaryNode(r),i=t.length}},t.prototype.toArithmeticNode=function(t,n,i){jt(t)||(t[0]===We.PARENSESIS||t[0]===We.MIN||t[0]===We.MAX?this.toArithmetic(t[1],n,i):t[0]===We.PLUS||t[0]===We.MINUS?this.toArithmeticNode(t[1],n,i):t[0]!==We.ADD&&t[0]!==We.SUB&&t[0]!==We.MUL&&t[0]!==We.DIV||(this.toArithmeticNode(t[1],n,i),this.toArithmeticNode(t[2],n,i)))},t.prototype.toArithmetic=function(t,n,i){for(var r=0,e=t.length;r<e;++r){var u=t[r];if(u===n||u===i){if(0<r&&r+1<e){var s=t[r-1],h=t[r+1];if(!jt(s)&&!jt(h)){t.splice(r,2),t[r-1]=[u,s,h],r-=1,e=t.length,this.toArithmeticNode(s,n,i),this.toArithmeticNode(h,n,i);continue}}throw new Error("Malformed operands for the operator ".concat(u))}this.toArithmeticNode(u,n,i),e=t.length}},t.prototype.toToken=function(n){for(var i=[];;){var r=t.TOKEN_REGEX.exec(n);if(null==r)break;var e=r[0],u=this.toTokenOperator(e);if(null!=u)i.push(u);else{var s=parseFloat(e);if(s!=s)throw new Error("Unexpected token '".concat(e,"' at ").concat(r.index," in '").concat(n,"'"));var h=this.toTokenLiteral(e);null!=h?i.push([h,.01*s]):i.push([We.NUMBER,s])}}return i},t.prototype.toTokenOperator=function(t){switch(t){case"+":return We.ADD_OR_PLUS;case"-":return We.SUB_OR_MINUS;case"*":return We.MUL;case"/":return We.DIV;case"(":return We.OPEN;case")":return We.CLOSE;case",":return We.COMMA;case"min":return We.MIN;case"max":return We.MAX}return null},t.prototype.toTokenLiteral=function(t){var n=t.length;if(0<n)switch(t[n-1]){case"%":return We.PARENT;case"s":return We.SELF;case"p":return We.PADDING;case"c":return We.CURRENT}return null},t.prototype.evaluate=function(t,n,i,r,e){switch(t[0]){case We.PARENSESIS:var u=t[1];return this.evaluate(u[u.length-1],n,i,r,e);case We.PLUS:return+this.evaluate(t[1],n,i,r,e);case We.MINUS:return-this.evaluate(t[1],n,i,r,e);case We.ADD:return this.evaluate(t[1],n,i,r,e)+this.evaluate(t[2],n,i,r,e);case We.SUB:return this.evaluate(t[1],n,i,r,e)-this.evaluate(t[2],n,i,r,e);case We.MUL:return this.evaluate(t[1],n,i,r,e)*this.evaluate(t[2],n,i,r,e);case We.DIV:return this.evaluate(t[1],n,i,r,e)/this.evaluate(t[2],n,i,r,e);case We.MIN:if(0<t[1].length){for(var s=t[1],h=this.evaluate(s[0],n,i,r,e),o=1,a=s.length;o<a;++o)h=Math.min(h,this.evaluate(s[o],n,i,r,e));return h}return 0;case We.MAX:if(0<t[1].length){for(s=t[1],h=this.evaluate(s[0],n,i,r,e),o=1,a=s.length;o<a;++o)h=Math.max(h,this.evaluate(s[o],n,i,r,e));return h}return 0;case We.PARENT:return t[1]*n;case We.SELF:return t[1]*i;case We.PADDING:return t[1]*r;case We.CURRENT:return t[1]*e;case We.NUMBER:return t[1]}return 0},t.prototype.calculate=function(t,n,i,r){return this.evaluate(this.Xe,t,n,i,r)},t.TOKEN_REGEX=/(?:\+|-|\*|\/|\(|\)|min|max|,|(?:\d+(?:\.\d*)?[%psc]?))/g,t}(),Ke=function(t,n){return.5*(t-n)},Ye=function(t,n,i){return i},Je=function(t){return t},Ze=function(t,n,i){return t-i},qe=function(){function t(){}return t.position=function(t){if(null==t||jt(t))return null;if(Tt(t)){switch(t){case"center":case"CENTER":return Ke;case"padding":case"PADDING":return Ye}var n=new Xe(t);return function(t,i,r,e){return n.calculate(t,i,r,e)}}if(St(t))return t;var i=t;return function(t,n,r,e){return i.calculate(t,n,r,e)}},t.size=function(t){if(null==t||jt(t))return null;if(Tt(t)){switch(t){case"100%":case"maximized":case"MAXIMIZED":return Je;case"padding":case"PADDING":return Ze}var n=new Xe(t);return function(t,i,r,e){return n.calculate(t,i,r,e)}}if(St(t))return t;var i=t;return function(t,n,r,e){return i.calculate(t,n,r,e)}},t}(),Qe=function(){function t(){}return t.isActivateKey=function(t){return"Space"===t.key||"Enter"===t.key||32===t.which||13===t.which},t.isArrowUpKey=function(t){return"ArrowUp"===t.key||38===t.which},t.isArrowDownKey=function(t){return"ArrowDown"===t.key||40===t.which},t.isArrowLeftKey=function(t){return"ArrowLeft"===t.key||37===t.which},t.isArrowRightKey=function(t){return"ArrowRight"===t.key||39===t.which},t.isCancelKey=function(t){return"Esc"===t.key||27===t.which},t.isFocusKey=function(t){return"Tab"===t.key||9===t.which},t.isUndoKey=function(t){return t.ctrlKey&&("z"===t.key||90===t.which)},t.isRedoKey=function(t){return t.ctrlKey&&("y"===t.key||89===t.which)},t.isSaveKey=function(t){return t.ctrlKey&&!t.shiftKey&&("s"===t.key||83===t.which)},t.isSaveAsKey=function(t){return t.ctrlKey&&t.shiftKey&&("S"===t.key||83===t.which)},t.isDeleteKey=function(t){return"Delete"===t.key||46===t.which},t.isSelectAllKey=function(t){return t.ctrlKey&&!t.shiftKey&&("a"===t.key||65===t.which)},t.isOkKey=function(t){return"Enter"===t.key||13===t.which},t.getFocusDirection=function(t){return!0!==t.shiftKey},t.toShortcut=function(t){if(Tt(t)){var n,i=t,r=i.indexOf("->"),e=void 0;0<=r?(e=i.substring(0,r).trim().toLowerCase(),n=i.substring(r+2).trim()):e=i.trim().toLowerCase();for(var u=!1,s=!1,h=!1,o="a",a=e.length,c=0,f=1;f<a;++f)if("+"===e.charAt(f)){var l=e.substring(c,f);switch(l){case"alt":u=!0;break;case"ctrl":s=!0;break;case"shift":h=!0;break;default:o=l}c=f+=1}return c!==f&&(o=e.substring(c,f)),function(t){var n=t.key;if(n.length<=1){t.shift&&(t.key=n.toUpperCase());var i=n.charCodeAt(0);t.which=97<=i&&i<=122?i-32:i}else switch(n){case"enter":t.key="Enter",t.which=13;break;case"space":t.key=" ",t.which=32;break;case"escape":t.key="Escape",t.which=27;break;case"f1":t.key="F1",t.which=112;break;case"f2":t.key="F2",t.which=113;break;case"f3":t.key="F3",t.which=114;break;case"f4":t.key="F4",t.which=115;break;case"f5":t.key="F5",t.which=116;break;case"f6":t.key="F6",t.which=117;break;case"f7":t.key="F7",t.which=118;break;case"f8":t.key="F8",t.which=119;break;case"f9":t.key="F9",t.which=120;break;case"f10":t.key="F10",t.which=121;break;case"f11":t.key="F11",t.which=122;break;case"f12":t.key="F12",t.which=123;break;case"capslock":t.key="CapsLock",t.shift?t.which=20:t.which=240;break;case"arrowup":t.key="ArrowUp",t.which=38;break;case"arrowdown":t.key="ArrowDown",t.which=40;break;case"arrowleft":t.key="ArrowLeft",t.which=37;break;case"arrowright":t.key="ArrowRight",t.which=39;break;case"insert":t.key="Insert",t.which=45;break;case"delete":t.key="Delete",t.which=46;break;case"pageup":t.key="PageUp",t.which=33;break;case"pagedown":t.key="PageDown",t.which=34;break;case"backspace":t.key="Backspace",t.which=8;break;case"colon":t.key=":",t.which=186;break;case"semicolon":t.key=";",t.which=187;break;case"pause":t.key="Pause",t.which=19;break;case"scrolllock":t.key="ScrollLock",t.which=145;break;case"tab":t.key="Tab",t.which=9;break;case"plus":t.key="+",t.which=187;break;case"minus":t.key="-",t.which=189}return t}({alt:u,ctrl:s,shift:h,key:o,which:0,event:n})}return t},t.toString=function(t){var n=[];return t.ctrl&&n.push("Ctrl"),t.shift&&n.push("Shift"),t.alt&&n.push("Alt"),n.push(t.key.toUpperCase()),n.join("+")},t.on=function(t,n,i){var r=this.toShortcut(n);document.body.addEventListener("keydown",(function(n){n.altKey!==r.alt||n.ctrlKey!==r.ctrl||n.shiftKey!==r.shift||n.key!==r.key&&n.which!==r.which||(t.state.isActionable&&(null!=r.event?t.emit(r.event):null!=i&&i(n)),n.preventDefault())}))},t.moveFocusVertically=function(n,i,r){if(i.state.isActionable){var e=t.isArrowUpKey(n),u=t.isArrowDownKey(n);if(e||u)return this.moveFocus(u,i,r)}return!1},t.moveFocusHorizontally=function(n,i,r){if(i.state.isActionable){var e=t.isArrowLeftKey(n),u=t.isArrowRightKey(n);if(e||u)return this.moveFocus(u,i,r)}return!1},t.moveFocus=function(t,n,i){var r,e=null!==(r=null==i?void 0:i.picked)&&void 0!==r?r:lt.getLayer(n);if(e){var u=e.getFocusController(),s=u.get();if(null!=s){var h=u.find(s,!1,s.state.isFocusRoot||t,t,n);if(null!=h)return u.focus(h),!0}}return!1},t}(),$e=function(){function t(){this.Ke=!1}return Object.defineProperty(t.prototype,"isOff",{get:function(){return!this.Ke},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOn",{get:function(){return this.Ke},enumerable:!1,configurable:!0}),t.prototype.toCoordinate=function(t){return this.Ke?"auto":t},t.prototype.from=function(t){return"auto"===t||"AUTO"===t?(this.Ke=!0,!0):(this.Ke=!1,!1)},t}(),tu=function(){this.width=new $e,this.height=new $e},nu=function(){function t(t){this.g=t,this.Ye=[],this.Je=[],this.Ze=!0}return Object.defineProperty(t.prototype,"renderable",{get:function(){return this.Ze},set:function(t){this.Ze=t},enumerable:!1,configurable:!0}),t.prototype.add=function(t,n){(n?this.Ye:this.Je).push(t),"parent"in t&&(t.parent=this.g)},t.prototype.addAt=function(t,n,i){var r=n?this.Ye:this.Je;0===i?r.unshift(t):0<i&&i<r.length?r.splice(i,0,t):r.push(t),"parent"in t&&(t.parent=this.g)},t.prototype.remove=function(t,n){var i=n?this.Ye:this.Je,r=i.indexOf(t);0<=r&&(i.splice(r,1),"parent"in t&&(t.parent=null))},t.prototype.render=function(t,n){if(this.Ze)for(var i=n?this.Ye:this.Je,r=0,e=i.length;r<e;++r)i[r].render(t)},t.prototype.updateTransform=function(){for(var t=this.Ye,n=0,i=t.length;n<i;++n)t[n].updateTransform();var r=this.Je;for(n=0,i=r.length;n<i;++n)r[n].updateTransform()},t}(),iu=function(){function t(){this.qe=[]}return t.prototype.add=function(t){this.qe.push(t)},t.prototype.remove=function(t){var n=this.qe,i=n.indexOf(t);0<=i&&n.splice(i,1)},t.prototype.onReflow=function(t,n,i){for(var r=this.qe,e=0,u=r.length;e<u;++e)r[e].onReflow(t,n,i)},t}(),ru=function(n){function i(t){var r,e,u,s,h,o,a,c,f,l=n.call(this)||this,v=l.transform;l.B=new Le(v.position,(function(t,n,i,r){l.onMove(t,n,i,r)})),l.Qe=new Le(v.scale,(function(t,n,i,r){l.onScale(t,n,i,r)})),l.$e=new Le(v.skew,(function(t,n,i,r){l.onSkew(t,n,i,r)})),l.tu=t;var b=l.nu={};l.iu=new tu,l.Pi=!0,l.ru=!1,l.eu=!1,l.uu=null,l.name=null!==(r=null==t?void 0:t.name)&&void 0!==r?r:"";var d=function(t){var n=null==t?void 0:t.theme;if(n)return Tt(n)?it.getInstance().get(n):n}(t)||l.getThemeDefault();l.Te=d,l.su=new nu(l),l.hu=new iu,l.ou=rr(null!==(e=null==t?void 0:t.clear)&&void 0!==e?e:d.getClearType(),Ve),l.au=l.newPadding(d,t,(function(){l.toDirty(),l.toParentResized(),l.toHierarchyDirty(),lt.update(l)}));var g=function(){l.toDirty(),lt.update(l)};l.ze=new Te(d,t,g),l.Ve=new Ce(d,t,g),l.We=new ye(d,t,g),l.cn=new Ae(d,t,g);var m=v.position,w=null!==(u=null==t?void 0:t.x)&&void 0!==u?u:d.getX();jt(w)?m.x=w:(m.x=0,b.x=qe.position(w));var O=null!==(s=null==t?void 0:t.y)&&void 0!==s?s:d.getY();jt(O)?m.y=O:(m.y=0,b.y=qe.position(O));var p=null!==(h=null==t?void 0:t.width)&&void 0!==h?h:d.getWidth();l.iu.width.from(p)?l.At=100:jt(p)?l.At=p:(l.At=100,b.width=qe.size(p));var D=null!==(o=null==t?void 0:t.height)&&void 0!==o?o:d.getHeight();if(l.iu.height.from(D)?l.rr=100:jt(D)?l.rr=D:(l.rr=100,b.height=qe.size(D)),null!=t){var E=t.visible;null!=E&&(l.visible=E)}if(null!=t){var M=t.renderable;null!=M&&(l.renderable=M)}l.Nt=new Ct((function(t,n){l.onStateChange(t,n)}));var S,j=rr(null!==(a=null==t?void 0:t.interactive)&&void 0!==a?a:d.getInteractive(),Re);if(l.interactive=!!(j&Re.SELF),l.interactiveChildren=!!(j&Re.CHILDREN),null!=t){var T=t.on;if(null!=T)for(var I in T){var C=T[I];C&&l.on(I,C)}}if(l.cu=null!==(c=null==t?void 0:t.title)&&void 0!==c?c:d.getTitle(),l.nn=null!==(f=null==t?void 0:t.weight)&&void 0!==f?f:d.getWeight(),l.initReflowable(),l.fu=function(){lt.update(l)},null!=t&&(S=t.shadow),void 0===S&&(S=d.getShadow()),S)if(Tt(S))switch(S){case"WEAK":l.shadow=d.newShadowWeak();break;case"DEFAULT":l.shadow=d.newShadow()}else l.shadow=S;l.on(he.over,(function(t){l.onOver(t)})),l.on(he.out,(function(t){l.onOut(t)})),l.on(he.down,(function(t){l.onDown(t)})),l.on(he.up,(function(t){l.onUp(t)})),l.on("added",(function(){l.toParentResized(),(l.isDirty()||l.hasDirty())&&l.toParentHasDirty(),l.eu&&l.toParentHierarchyDirty();var t=l.parent;t instanceof i&&(l.state.parent=t.state),lt.update(l)})),l.on("removed",(function(){l.blur(!0),l.state.parent=null,lt.update(l)}));var N,A=function(t){if(t){var n=t.shortcut,i=t.shortcuts;if(null!=i||null!=n){var r=[];if(null!=n&&r.push(Qe.toShortcut(n)),null!=i)for(var e=0,u=i.length;e<u;++e)r.push(Qe.toShortcut(i[e]));return r}}}(t);if(l.lu=A,null!=A)for(var R=function(t){l.onShortcut(t)},y=0,k=A.length;y<k;++y)Qe.on(l,A[y],R);if(l.init(t),d.newState(l.Nt),null!=t){var L=t.state;if(null!=L){var x=l.Nt;if(Tt(L))x.add(L);else if(Mt(L))x.addAll(L);else{var B=L.values;null!=B&&(Tt(B)?x.add(B):x.addAll(B));var _=L.blinkers;if(null!=_){var P=x.blinker;for(y=0,k=_.length;y<k;++y){var U=_[y];P.add(U.state,U.interval)}}var F=L.tickers;if(null!=F){var G=x.ticker;for(y=0,k=F.length;y<k;++y){var H=F[y];G.add(H.state,H.interval)}}}}}if(null!=t){var z=t.parent;null!=z&&z.addChild(l)}if(null!=t){var V=t.children;if(null!=V)for(y=0,k=V.length;y<k;++y){var W=V[y];null!=W&&l.addChild(W)}}return null!=t&&(N=t.cursor,l.vu=N),l.cursor=l.toCursor(N,l.Nt),l.emit("init",l),l}return G(i,n),i.prototype.newPadding=function(t,n,i){return new ke(t,n,i)},i.prototype.toCursor=function(t,n){if(t)if(St(t)){var i=t(n);if(void 0!==i)return i}else if(void 0!==t)return t;return this.theme.getCursor(n)},Object.defineProperty(i.prototype,"snippet",{get:function(){return this.su},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"reflowable",{get:function(){return this.hu},enumerable:!1,configurable:!0}),i.prototype.initReflowable=function(){new ze(this)},i.prototype.onChildrenChange=function(){this.toHierarchyDirty(),n.prototype.onChildrenChange.call(this)},i.prototype.onShortcut=function(t){this.emit("shortcut",t,this)},i.prototype.init=function(t){},Object.defineProperty(i.prototype,"weight",{get:function(){return this.nn},set:function(t){this.nn!==t&&(this.nn=t,this.toHierarchyDirty(),lt.update(this))},enumerable:!1,configurable:!0}),i.prototype.onMove=function(t,n,r,e){for(var u=this.children,s=0,h=u.length;s<h;++s){var o=u[s];o instanceof i&&o.onParentMove(t,n,r,e)}lt.update(this),this.emit("move",t,n,r,e,this)},i.prototype.resize=function(t,n){var i=this.At,r=this.rr,e=null!=t?t:i,u=null!=n?n:r,s=i!==e,h=r!==u;s&&(this.At=e),h&&(this.rr=u);var o,a=s||h;if(a&&this.onResize(e,u,i,r),s&&null!=(o=this.nu).x){var c=this.B,f=this.getParentOfSize();f&&(this.B.x=o.x(f.width,e,f.padding.getLeft(),c.x))}if(h&&null!=(o=this.nu).y){c=this.B;var l=this.getParentOfSize();l&&(this.B.y=o.y(l.height,u,l.padding.getTop(),c.y))}return a},i.prototype.getClearType=function(){return this.ou},i.prototype.onResize=function(t,n,r,e){this.toDirty(),this.toHierarchyDirty();for(var u=this.au,s=this.children,h=0,o=s.length;h<o;++h){var a=s[h];a instanceof i&&a.onParentResize(t,n,u)}lt.update(this),this.emit("resize",t,n,r,e,this)},i.prototype.onScale=function(t,n,i,r){lt.update(this),this.emit("scale",t,n,i,r,this)},i.prototype.onSkew=function(t,n,i,r){lt.update(this),this.emit("skew",t,n,i,r,this)},Object.defineProperty(i.prototype,"type",{get:function(){return this.getType()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this.B.x},set:function(t){this.setX(t)},enumerable:!1,configurable:!0}),i.prototype.getX=function(){var t=this.nu;return null!=t.x?t.x:this.B.x},i.prototype.setX=function(t){var n=this.nu;if(jt(t)){var i=this.B;i.x!==t?(n.x=void 0,i.x=t):void 0!==n.x&&(n.x=void 0,this.toParentResized())}else{var r=qe.position(t);n.x!==r&&(n.x=r,this.toParentResized())}},Object.defineProperty(i.prototype,"y",{get:function(){return this.B.y},set:function(t){this.setY(t)},enumerable:!1,configurable:!0}),i.prototype.getY=function(){var t=this.nu;return null!=t.y?t.y:this.B.y},i.prototype.setY=function(t){var n=this.nu;if(jt(t)){var i=this.B;i.y!==t?(n.y=void 0,i.y=t):void 0!==n.y&&(n.y=void 0,this.toParentResized())}else{var r=qe.position(t);n.y!==r&&(n.y=r,this.toParentResized())}},Object.defineProperty(i.prototype,"width",{get:function(){return this.At},set:function(t){this.setWidth(t)},enumerable:!1,configurable:!0}),i.prototype.getWidth=function(){return this.iu.width.toCoordinate(this.nu.width||this.At)},i.prototype.setWidth=function(t){var n=this.iu.width,i=n.isOn,r=n.from(t);if(n.isOn!==i&&(this.toHierarchyDirty(),lt.update(this)),!r){var e=this.nu;if(jt(t)){var u=this.At;if(u!==t){e.width=void 0,this.At=t;var s=this.rr;if(this.onResize(t,s,u,s),null!=e.x){var h=this.B,o=this.getParentOfSize();o&&(h.x=e.x(o.width,t,o.padding.getLeft(),h.x))}}else void 0!==e.width&&(e.width=void 0,this.toParentResized())}else{var a=qe.size(t);e.width!==a&&(e.width=a,this.toParentResized())}}},Object.defineProperty(i.prototype,"height",{get:function(){return this.rr},set:function(t){this.setHeight(t)},enumerable:!1,configurable:!0}),i.prototype.getHeight=function(){return this.iu.height.toCoordinate(this.nu.height||this.rr)},i.prototype.setHeight=function(t){var n=this.iu.height,i=n.isOn,r=n.from(t);if(n.isOn!==i&&(this.toHierarchyDirty(),lt.update(this)),!r){var e=this.nu;if(jt(t)){var u=this.rr;if(u!==t){e.height=void 0,this.rr=t;var s=this.At;if(this.onResize(s,t,s,u),null!=e.y){var h=this.B,o=this.getParentOfSize();o&&(h.y=e.y(o.height,t,o.padding.getTop(),h.y))}}else void 0!==e.height&&(e.height=void 0,this.toParentResized())}else{var a=qe.size(t);e.height!==a&&(e.height=a,this.toParentResized())}}},Object.defineProperty(i.prototype,"position",{get:function(){return this.B},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scale",{get:function(){return this.Qe},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"skew",{get:function(){return this.$e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){return this.au},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"corner",{get:function(){return this.cn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"background",{get:function(){return this.ze},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"border",{get:function(){return this.Ve},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"outline",{get:function(){return this.We},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"unsafe",{get:function(){return this.transform},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"title",{get:function(){return this.cu},set:function(t){this.cu!==t&&(this.cu=t,this.state.isHovered&&this.applyTitle())},enumerable:!1,configurable:!0}),i.prototype.applyTitle=function(){var t=lt.getLayer(this);t&&(t.view.title=this.cu)},i.prototype.show=function(){return this.visible||(this.visible=!0,this.toParentHierarchyDirty(),lt.update(this)),this},i.prototype.isShown=function(){return this.visible},i.prototype.hide=function(){return this.visible&&(this.visible=!1,this.toParentHierarchyDirty(),this.blur(!0),lt.update(this)),this},i.prototype.isHidden=function(){return!this.visible},i.prototype.toDirty=function(){return!this.Pi&&(this.Pi=!0,this.toParentHasDirty(),!0)},i.prototype.toHasDirty=function(){return!this.ru&&(this.ru=!0,this.toParentHasDirty(),!0)},i.prototype.toParentHasDirty=function(){var t=this.parent;t instanceof i&&t.toHasDirty()},i.prototype.toHierarchyDirty=function(){return!this.eu&&(this.eu=!0,this.onHierarchyDirty(),this.toParentHierarchyDirty(),!0)},i.prototype.toParentHierarchyDirty=function(){var t=this.parent;t instanceof i&&t.toHierarchyDirty()},i.prototype.isHierarchyDirty=function(){return this.eu},i.prototype.onHierarchyDirty=function(){},i.prototype.isDirty=function(){return this.Pi},i.prototype.hasDirty=function(){return this.ru},i.prototype.setFocused=function(t){if(this.state.isFocused!==t){var n=lt.getLayer(this);n&&n.getFocusController().set(this,t)}return this},i.prototype.focus=function(){return this.setFocused(!0)},i.prototype.blur=function(t){if(t){var n=lt.getLayer(this);if(n){var r=n.getFocusController().get();if(r instanceof i)for(var e=r;e;){if(e===this){r.setFocused(!1);break}e=e.parent}}}else this.setFocused(!1);return this},i.prototype.onStateChange=function(t,n){var r=this;this.toDirty(),lt.update(this),this.emit("statechange",t,n,this);for(var e=this.children,u=0,s=e.length;u<s;++u){var h=e[u];h instanceof i&&h.state.onParentChange(t,n)}t.isFocused?(n.isFocused||this.onFocus(),t.inDisabled&&!n.inDisabled&&setTimeout((function(){r.blur()}),0)):n.isFocused&&this.onBlur(),this.cursor=this.toCursor(this.vu,t)},i.prototype.onChildFocus=function(t){var n=this.parent;n instanceof i&&n.onChildFocus(t)},i.prototype.onFocus=function(){var t=this.parent;t instanceof i&&t.onChildFocus(this)},i.prototype.onChildBlur=function(t){var n=this.parent;n instanceof i&&n.onChildBlur(t)},i.prototype.onBlur=function(){var t=this.parent;t instanceof i&&t.onChildBlur(this)},Object.defineProperty(i.prototype,"state",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"options",{get:function(){return this.tu},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"theme",{get:function(){return this.Te},set:function(t){this.Te!==t&&(this.Te=t,this.au.setTheme(t),this.ze.setTheme(t),this.Ve.setTheme(t),this.We.setTheme(t),this.cn.setTheme(t),this.toDirty(),lt.update(this))},enumerable:!1,configurable:!0}),i.prototype.reflow=function(){var t=this.Pi;t&&(this.onReflow(),this.Pi=!1);var n=this.ru,r=this.eu;if(n||r){this.ru=!1,this.eu=!1;for(var e=this.children,u=0,s=e.length;u<s;++u){var h=e[u];h instanceof i&&h.reflow()}}(t||n||r)&&this.onRefit()},i.prototype.onRefit=function(){var n=this.iu,r=n.width.isOn,e=n.height.isOn;if(r&&e){for(var u=0,s=0,h=0,o=(v=this.children).length;h<o;++h)if((b=v[h]).visible){var a=this.hasRefitableWidth(b),c=this.hasRefitableHeight(b);if(a||c)if(b instanceof i)a&&(u=Math.max(u,b.x+b.width)),c&&(s=Math.max(s,b.y+b.height));else if(b instanceof t.Container){var f=b.getLocalBounds(void 0,!0);a&&(u=Math.max(u,b.x+f.x+f.width)),c&&(s=Math.max(s,b.y+f.y+f.height))}else f=b.getLocalBounds(),a&&(u=Math.max(u,b.x+f.x+f.width)),c&&(s=Math.max(s,b.y+f.y+f.height))}var l=this.padding;this.resize(u+l.getRight(),s+l.getBottom())}else if(r){for(u=0,h=0,o=(v=this.children).length;h<o;++h)(b=v[h]).visible&&this.hasRefitableWidth(b)&&(b instanceof i?u=Math.max(u,b.x+b.width):b instanceof t.Container?(f=b.getLocalBounds(void 0,!0),u=Math.max(u,b.x+f.x+f.width)):(f=b.getLocalBounds(),u=Math.max(u,b.x+f.x+f.width)));this.resize(u+this.padding.getRight(),void 0)}else if(e){var v;for(s=0,h=0,o=(v=this.children).length;h<o;++h){var b;(b=v[h]).visible&&this.hasRefitableHeight(b)&&(b instanceof i?s=Math.max(s,b.y+b.height):b instanceof t.Container?(f=b.getLocalBounds(void 0,!0),s=Math.max(s,b.y+f.y+f.height)):(f=b.getLocalBounds(),s=Math.max(s,b.y+f.y+f.height)))}this.resize(void 0,s+this.padding.getBottom())}},i.prototype.isRefitable=function(t){return t instanceof i},i.prototype.hasRefitableHeight=function(t){return this.isRefitable(t)&&!(t instanceof i&&St(t.getHeight()))},i.prototype.hasRefitableWidth=function(t){return this.isRefitable(t)&&!(t instanceof i&&St(t.getWidth()))},i.prototype.onReflow=function(){this.hu.onReflow(this,this.At,this.rr)},Object.defineProperty(i.prototype,"shadow",{get:function(){return this.uu},set:function(t){var n=this.uu;if(n!==t){var i=this.hu,r=this.su,e=this.fu;null!=n&&(n.off("update",e),i.remove(n),r.remove(n,!0)),this.uu=t,null!=t&&(t.on("update",e),i.add(t),r.addAt(t,!0,0)),lt.update(this)}},enumerable:!1,configurable:!0}),i.prototype.toParentResized=function(){var t=this.getParentOfSize();t&&this.onParentResize(t.width,t.height,t.padding)},i.prototype.getParentOfSize=function(){var t=this.parent;return t instanceof i?t:lt.getLayer(this)},i.prototype.onParentResize=function(t,n,i){var r=this.nu,e=this.transform.position,u=e.x,s=e.y,h=this.At,o=this.rr,a=i.getLeft()+i.getRight(),c=i.getTop()+i.getBottom(),f=null!=r.width?r.width(t,h,a,h):h,l=null!=r.height?r.height(n,o,c,o):o;this.resize(f,l);var v=null!=r.x?r.x(t,this.At,i.getLeft(),u):u,b=null!=r.y?r.y(n,this.rr,i.getTop(),s):s;this.position.set(v,b)},i.prototype.onParentMove=function(t,n,i,r){},i.prototype.onWheel=function(t,n,i){return this.emit("wheel",t,n,i,this),!1},i.prototype.onKeyDown=function(t){return this.emit("keydown",t,this),!1},i.prototype.onKeyUp=function(t){return this.emit("keyup",t,this),!1},i.prototype.isEventTarget=function(t){var n=t.target;if(n===this)return!0;if(null!=n&&!(n instanceof i&&n.interactive)){for(var r=n.parent;null!=r&&!(r instanceof i&&r.interactive);)r=r.parent;return r===this}return!1},i.prototype.onDown=function(t){this.isEventTarget(t)&&this.onDownThis(t),this.emit("down",t,this)},i.prototype.onDownThis=function(n){var i;"touches"in n.data.originalEvent?(null!==(i=this.bu)&&void 0!==i?i:this.bu=new t.Point).copyFrom(n.data.global):this.focusOnClosest()},i.prototype.onUp=function(t){this.isEventTarget(t)&&this.onUpThis(t),this.emit("up",t,this)},i.prototype.onUpThis=function(t){if("touches"in t.data.originalEvent){var n=this.bu;if(n){var i=t.data.global,r=Math.abs(i.x-n.x),e=Math.abs(i.y-n.y),u=he.CLICK_DISTANCE_THRESHOLD;r<u&&e<u&&this.focusOnClosest()}}},i.prototype.focusOnClosest=function(){var t=lt.getLayer(this);if(t){var n=t.getFocusController();n.focus(n.findParent(this))}},i.prototype.onOver=function(t){this.state.isHovered=!0,t.target===this&&this.applyTitle(),this.emit("over",t,this)},i.prototype.onOut=function(t){this.state.isHovered=!1,this.emit("out",t,this)},i.prototype.onDblClick=function(t,n){return this.emit("dblclick",t,n,this),!1},i.prototype.render=function(t){if(this.visible&&0<this.worldAlpha&&this.renderable){var i=this.su;i.render(t,!0),n.prototype.render.call(this,t),i.render(t,!1)}},i.prototype.updateTransform=function(){n.prototype.updateTransform.call(this),this.su.updateTransform()},i.prototype.getThemeDefault=function(){return it.getInstance().get(this.getType())},i.prototype.getType=function(){return"DBase"},i.prototype._calculateBounds=function(){this._bounds.addFrame(this.transform,0,0,this.At,this.rr),n.prototype._calculateBounds.call(this)},i.prototype.containsPoint=function(t){return this.containsGlobalPoint(t)||this.containsLocalPoint(this.worldTransform.applyInverse(t,i.WORK_CONTAINS_POINT))},i.prototype.containsGlobalPoint=function(t){return!1},i.prototype.containsLocalPoint=function(t){var n=t.x,i=t.y,r=this.At,e=this.rr;return 0<=n&&n<=r&&0<=i&&i<=e},i.prototype.getClippingRect=function(t,n){n.x=0,n.y=0,n.width=this.At,n.height=this.rr},i.prototype.destroy=function(){var t=this.nu;t.x=null,t.y=null,t.width=null,t.height=null;var i=this.uu;i&&(this.uu=null,i.destroy());for(var r=this.children,e=r.length-1;0<=e;--e)r[e].destroy();r.length=0,n.prototype.destroy.call(this)},i.WORK_CONTAINS_POINT=new t.Point,i}(t.Container),eu=function(t){function n(n){var i=t.call(this)||this;return i.parent=n,i.du=!1,i.At=0,i.rr=0,i.gu=0,i.Be=Ne.NONE,i}return G(n,t),n.prototype.render=function(n){this.updateTransform(),t.prototype.render.call(this,n)},n.prototype.onReflow=function(t,n,i){var r=t.corner,e=Math.max(0,r.getRadius()-.5),u=r.getMask();if(!this.du||this.At!==n||this.rr!==i||this.gu!==e||this.Be!==u){this.du=!0,this.At=n,this.rr=i,this.gu=e,this.Be=u;var s=u&Ne.TOP_LEFT?0:e,h=u&Ne.TOP_RIGHT?0:e,o=u&Ne.BOTTOM_LEFT?0:e,a=u&Ne.BOTTOM_RIGHT?0:e;this.clear(),this.beginFill(16777215,1),this.lineStyle(0,0,0,0,!1),s<=0&&h<=0&&o<=0&&a<=0?this.drawRect(0,0,n,i):(this.moveTo(0+s,0),0<h?this.arcTo(0+n,0,0+n,0+i,h):this.lineTo(0+n,0),0<a?this.arcTo(0+n,0+i,0,0+i,a):this.lineTo(0+n,0+i),0<o?this.arcTo(0,0+i,0,0,o):this.lineTo(0,0+i),0<s?this.arcTo(0,0,0+n,0,s):this.lineTo(0,0)),this.endFill()}},n}(t.Graphics),uu={OFF:0,ON:1,TOUCH:2},su=function(){function n(n,i,r,e,u,s){var h,o,a=this;this.mu=n,this.g=r,this.wu=e;var c=rr(null!==(h=null==s?void 0:s.mode)&&void 0!==h?h:u.getGestureMode(),uu),f=rr(null!==(o=null==s?void 0:s.modifier)&&void 0!==o?o:u.getGestureModifier(),ue);if(c===uu.ON||c===uu.TOUCH){var l=new t.Point;this.Ou=new be({touch:c===uu.TOUCH,modifier:f,checker:s&&s.checker,easing:{duration:null==s?void 0:s.duration},on:{start:function(t){a.onStart(t)},move:function(t,r,e,u,s,h){a.onGestureMove(i(n),r,e,u,s,h,l)},easing:{end:function(t){a.onEnd(t)}},stop:function(t){a.onStop(t)},tap:function(t,n){a.onTap(t,n)},longpress:function(t,n){a.onLongPress(t,n)}}})}}return n.prototype.onStart=function(t){var n=this.g;n.stop(),n.emit("gesturestart",t,n)},n.prototype.onEnd=function(t){var n=this.g;n.emit("gestureend",t,n)},n.prototype.onStop=function(t){var n=this.g;n.emit("gesturestop",t,n)},n.prototype.onTap=function(t,n){var i=this.g;i.emit("gesturetap",t,n,i)},n.prototype.onLongPress=function(t,n){var i=this.g;i.emit("gesturelongpress",t,n,i)},n.prototype.onGestureMove=function(t,n,i,r,e,u,s){if(null!=t){var h=this.g,o=t.scale,a=o.x,c=o.y,f=h.toNormalizedScale(a*u),l=h.toNormalizedScale(c*u),v=f/a,b=l/c,d=u<1?Math.max(v,b):Math.min(v,b);f=d*a,l=d*c;var g=t.parent;null!=g&&(g.toLocal(s.set(r,e),void 0,s),r=s.x,e=s.y);var m=r-n,w=e-i,O=t.position,p=(O.x-m)*d+r,D=(O.y-w)*d+e;this.wu(t,p,D,f,l)}},n.prototype.stop=function(){var t;null===(t=this.Ou)||void 0===t||t.stop(this.mu)},n.prototype.onDown=function(t){var n;null===(n=this.Ou)||void 0===n||n.onDown(this.mu,t)},n}(),hu=function(){function t(t,n,i,r,e){var u=this;this.mu=t,this.pu=n,this.wu=r,this.Du=1,this.Eu=1,this.Mu=0,this.Su=0,this.ju=1,this.Tu=1,this.Iu=0,this.Cu=0,this.Nu=!1,this.ee=new ce({onStart:function(){u.onStart()},onTime:function(t){u.onTime(t)},onEnd:function(){u.onEnd()},onStop:function(){u.onStop()},duration:e}),this.g=i,this.Fr=e}return t.prototype.onStart=function(){var t=this.g;t.emit("transformstart",this.mu,t)},t.prototype.onTime=function(t){var n=1-t,i=t,r=this.ju*n+this.Du*i,e=this.Tu*n+this.Eu*i,u=this.Iu*n+this.Mu*i,s=this.Cu*n+this.Su*i,h=this.pu(this.mu);null!=h&&this.wu(h,u,s,r,e)},t.prototype.onEnd=function(){var t=this.g;t.emit("transformend",this.mu,t)},t.prototype.onStop=function(){var t=this.g;t.emit("transformstop",this.mu,t)},t.prototype.start=function(t,n,i,r,e,u,s){var h=this.g;if(!1!==s&&h.stop(),null==u&&(u=this.Fr),u<=0)this.onStart(),this.wu(t,n,i,r,e),this.onEnd();else{var o=t.position,a=t.scale;this.Iu=o.x,this.Cu=o.y,this.ju=a.x,this.Tu=a.y,this.Mu=n,this.Su=i,this.Du=r,this.Eu=e,this.ee.duration=u,this.ee.start()}},t.prototype.stop=function(){this.ee.stop()},t}(),ou=function(n){function i(r,e,u){var s,h,o,a,c,f,l,v,b,d,g,m,w,O,p,D,E,M=n.call(this)||this;M.g=r,M.pu=e,M.wu=u&&u.constraint||i.CONSTRAINT,M.Au=new t.Rectangle;var S=M.toTheme(u)||M.getThemeDefault(),j=null==u?void 0:u.zoom;M.Ru=new t.Point,M.yu=null!==(s=null==j?void 0:j.min)&&void 0!==s?s:S.getZoomMin(),M.ku=null!==(h=null==j?void 0:j.max)&&void 0!==h?h:S.getZoomMax(),M.Lu=null!==(o=null==j?void 0:j.keepRatio)&&void 0!==o?o:S.getZoomKeepRatio();var T=null==j?void 0:j.wheel;M.xu=null!==(a=null==T?void 0:T.enable)&&void 0!==a?a:S.isWheelZoomEnabled(),M.Bu=null!==(c=null==T?void 0:T.speed)&&void 0!==c?c:S.getWheelZoomSpeed(),M._u=rr(null!==(f=null==T?void 0:T.modifier)&&void 0!==f?f:S.getWheelZoomModifier(),ue),M.Pu=null!==(l=null==T?void 0:T.checker)&&void 0!==l?l:se.match;var I=null==j?void 0:j.dblclick;M.Uu=null!==(v=null==I?void 0:I.enable)&&void 0!==v?v:S.isDblClickZoomEnabled(),M.Fu=null!==(b=null==I?void 0:I.amount)&&void 0!==b?b:S.getDblClickZoomSpeed(),M.Gu=rr(null!==(d=null==I?void 0:I.modifier)&&void 0!==d?d:S.getDblClickZoomModifier(),ue),M.Hu=null!==(g=null==I?void 0:I.checker)&&void 0!==g?g:se.match,M.zu=null!==(m=null==I?void 0:I.duration)&&void 0!==m?m:S.getDblClickZoomDuration();var C=null===(w=null==u?void 0:u.translation)||void 0===w?void 0:w.wheel;if(M.Vu=null!==(O=null==C?void 0:C.enable)&&void 0!==O?O:S.isWheelTranslationEnabled(),M.Wu=null!==(p=null==C?void 0:C.speed)&&void 0!==p?p:S.getWheelTranslationSpeed(),M.Xu=rr(null!==(D=null==C?void 0:C.modifier)&&void 0!==D?D:S.getWheelTranslationModifier(),ue),M.Ku=null!==(E=null==C?void 0:C.checker)&&void 0!==E?E:se.match,M.Yu=new su(r,e,M,M.wu,S,null==u?void 0:u.gesture),M.T=new hu(r,e,M,M.wu,M.zu),null!=u){var N=u.on;if(null!=N)for(var A in N){var R=N[A];R&&M.on(A,R)}}return M}return G(i,n),Object.defineProperty(i.prototype,"gesture",{get:function(){return this.Yu},enumerable:!1,configurable:!0}),i.prototype.stop=function(){this.Yu.stop(),this.T.stop()},i.prototype.reset=function(t,n){var i=this.g,r=this.pu(i);if(r){var e=i.padding,u=e.getLeft(),s=e.getTop(),h=e.getRight(),o=e.getBottom(),a=i.width-u-h,c=i.height-s-o,f=r.getLocalBounds(this.Au),l=f.x,v=f.y,b=u+.5*(a-f.width)-l,d=s+.5*(c-f.height)-v;this.T.start(r,b,d,1,1,t,n)}},i.prototype.fit=function(t,n){var i=this.g,r=this.pu(i);if(r){var e=i.padding,u=e.getLeft(),s=e.getTop(),h=e.getRight(),o=e.getBottom(),a=i.width-u-h,c=i.height-s-o,f=r.getLocalBounds(this.Au),l=f.x,v=f.y,b=f.width,d=f.height,g=a/b,m=c/d;if(this.Lu){var w=this.toNormalizedScale(Math.min(g,m));g=w,m=w}else g=this.toNormalizedScale(g),m=this.toNormalizedScale(m);var O=u+.5*(a-b*g)-l*g,p=s+.5*(c-d*m)-v*m;this.T.start(r,O,p,g,m,t,n)}},i.prototype.zoomIn=function(t,n){var i=this.pu(this.g);if(i){var r=this.Fu,e=i.scale;this.zoom(e.x*r,e.y*r,t,n)}},i.prototype.zoomOut=function(t,n){var i=this.pu(this.g);if(i){var r=1/this.Fu,e=i.scale;this.zoom(e.x*r,e.y*r,t,n)}},i.prototype.zoomAt=function(t,n,i,r,e,u){var s=this.pu(this.g);if(s){var h=s.scale.x,o=s.scale.y,a=this.toNormalizedScale(i),c=this.toNormalizedScale(r),f=a/h,l=c/o,v=(s.position.x-t)*f+t,b=(s.position.y-n)*l+n;this.T.start(s,v,b,a,c,e,u)}},i.prototype.zoomAtGlobal=function(t,n,i,r,e,u){var s=this.Ru;s.set(t,n),this.toLocal(s,s),this.zoomAt(s.x,s.y,i,r,e,u)},i.prototype.zoom=function(t,n,i,r){var e=this.g;this.zoomAt(.5*e.width,.5*e.height,t,n,i,r)},Object.defineProperty(i.prototype,"scale",{get:function(){var n=this.pu(this.g);return n?n.scale:new t.Point(1,1)},set:function(t){var n=this.pu(this.g);if(n){var i=this.toNormalizedScale(t.x),r=this.toNormalizedScale(t.y),e=n.position;this.wu(n,e.x,e.y,i,r)}},enumerable:!1,configurable:!0}),i.prototype.moveTo=function(t,n,i,r){var e=this.pu(this.g);if(e){var u=e.scale;this.T.start(e,t,n,u.x,u.y,i,r)}},Object.defineProperty(i.prototype,"position",{get:function(){var n=this.pu(this.g);return n?n.position:new t.Point(0,0)},set:function(t){var n=this.pu(this.g);if(n){var i=n.scale;this.wu(n,t.x,t.y,i.x,i.y)}},enumerable:!1,configurable:!0}),i.prototype.transform=function(t,n,i,r,e,u){var s=this.pu(this.g);s&&this.T.start(s,t,n,i,r,e,u)},i.prototype.toLocal=function(t,n,i){return this.g.toLocal(t,void 0,n,i)},i.prototype.toGlobal=function(t,n,i){return this.g.toGlobal(t,n,i)},i.prototype.toNormalizedScale=function(t){return Math.min(this.ku,Math.max(this.yu,t))},i.prototype.onWheel=function(t,n,i){var r;if(this.xu&&this.Pu(t,this._u,this.g)&&0!==n.deltaY&&(r=this.pu(this.g))){var e=n.lowest*this.Bu,u=1+n.deltaY*e,s=r.scale;return this.zoomAtGlobal(i.x,i.y,s.x*u,s.y*u,0),!0}if(this.Vu&&this.Ku(t,this.Xu,this.g)&&(r=this.pu(this.g))){this.stop(),this.emit("wheeltranslationstart",this.g,this),e=n.lowest*this.Wu;var h=r.position,o=h.x-n.deltaX*e,a=h.y+n.deltaY*e;return s=r.scale,this.wu(r,o,a,s.x,s.y),this.emit("wheeltranslationend",this.g,this),!0}return!1},i.prototype.onDown=function(t){this.Yu.onDown(t)},i.prototype.onDblClick=function(t,n){if(this.Uu&&this.Hu(t,this.Gu,this.g)){var i=this.pu(this.g);if(i){var r=this.Ru;he.toGlobal(t,n,r);var e=this.Fu,u=i.scale;return this.zoomAtGlobal(r.x,r.y,u.x*e,u.y*e,this.zu),!0}}return!1},i.prototype.toTheme=function(t){if(t&&t.theme){var n=t.theme;return Tt(n)?it.getInstance().get(n):n}return null},i.prototype.getThemeDefault=function(){return it.getInstance().get(this.getType())},i.prototype.getType=function(){return"DView"},i.CONSTRAINT=function(t,n,i,r,e){t.scale.set(r,e),t.position.set(n,i)},i}(t.utils.EventEmitter),au=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.init=function(n){var i,r=this;t.prototype.init.call(this,n),this.ki=null;var e=this.theme;this.Ju=new ou(this,(function(){return r.ki}),null==n?void 0:n.view);var u=null==n?void 0:n.canvas;u&&(this.canvas=u),(null!==(i=null==n?void 0:n.mask)&&void 0!==i?i:e.isOverflowMaskEnabled())&&(this.mask=this.getOverflowMask())},n.prototype.getType=function(){return"DCanvasContainer"},n.prototype.onResize=function(n,i,r,e){t.prototype.onResize.call(this,n,i,r,e),this.updateContentSize(n,i,r,e)},Object.defineProperty(n.prototype,"canvas",{get:function(){return this.ki},set:function(t){var n=this.ki;null!=n&&(this.ki=null,this.removeChild(n),this.emit("unset",n,this),n.destroy()),this.ki=t,null!=t?(this.addChild(t),this.Ju.reset(0),this.emit("set",t,this)):lt.update(this)},enumerable:!1,configurable:!0}),n.prototype.getOverflowMask=function(){return null==this.Zu&&(this.Zu=new eu(this),this.hu.add(this.Zu),this.toDirty()),this.Zu},n.prototype.updateContentSize=function(t,n,i,r){var e=this.ki;if(null!=e){var u=e.x+.5*(t-i),s=e.y+.5*(n-r);e.position.set(u,s)}},Object.defineProperty(n.prototype,"view",{get:function(){return this.Ju},enumerable:!1,configurable:!0}),n.prototype.onWheel=function(n,i,r){var e=this.Ju.onWheel(n,i,r),u=t.prototype.onWheel.call(this,n,i,r);return e||u},n.prototype.onDblClick=function(n,i,r){if(!0!==r){var e=this.Ju.onDblClick(n,i),u=t.prototype.onDblClick.call(this,n,i);return e||u}return t.prototype.onDblClick.call(this,n,i)},n.prototype.onDown=function(n,i){!0!==i&&this.Ju.onDown(n),t.prototype.onDown.call(this,n)},n.prototype.destroy=function(){var n=this.Zu;null!=n&&(this.Zu=null,n.destroy()),this.mask=null,t.prototype.destroy.call(this)},n}(ru),cu=function(){function t(t,n){var i=document.createElement("canvas");this.qu=i;var r=this.qu.getContext("2d",{willReadFrequently:!0});this.Qu=r,i.width=t,i.height=n}return Object.defineProperty(t.prototype,"element",{get:function(){var t=this.qu;if(null!=t)return t;throw new Error("No Element Available")},enumerable:!1,configurable:!0}),t.prototype.getElement=function(){return this.qu},Object.defineProperty(t.prototype,"canvas",{get:function(){return this.element},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){var t=this.Qu;if(null!=t)return t;throw new Error("No Context Available")},enumerable:!1,configurable:!0}),t.prototype.getContext=function(){return this.Qu},Object.defineProperty(t.prototype,"resolution",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){var t=this.qu;return null!=t?t.width:0},set:function(t){var n=this.qu;null!=n&&(n.width=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var t=this.qu;return null!=t?t.height:0},set:function(t){var n=this.qu;null!=n&&(n.height=t)},enumerable:!1,configurable:!0}),t.prototype.clear=function(){var t=this.qu,n=this.Qu;null!=t&&null!=n&&(n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height))},t.prototype.resize=function(t,n){var i=this.qu;null!=i&&(i.width=t,i.height=n)},t.prototype.destroy=function(){this.Qu=null,this.qu=null},t}(),fu=function(){function n(){}return n.toTexture=function(n,i,r,e){var u=n.transform.scale,s=Math.max(1,Math.ceil(n.width*u.x)),h=Math.max(1,Math.ceil(n.height*u.y)),o=t.RenderTexture.create({width:s,height:h,scaleMode:t.SCALE_MODES.LINEAR,resolution:i}),a=new t.Matrix(void 0,void 0,void 0,void 0,-n.position.x,-n.position.y),c=lt.getLayer(n);return c&&c.renderer.render(n,o,r,a,e),o},n.toPixels=function(t,n){var i=t.baseTexture,r=i.realWidth,e=i.realHeight,u=t.resolution,s=t.frame,h=Math.floor(s.x*u),o=Math.floor(s.y*u),a=Math.floor((s.x+s.width)*u),c=Math.floor((s.y+s.height)*u),f=Math.min(a-h,r),l=Math.min(c-o,e),v=new Uint8Array(4*f*l);if(0<f&&0<l){var b=n.renderTexture.current;n.renderTexture.bind(t);var d=n.gl;d.readPixels(h,o,f,l,d.RGBA,d.UNSIGNED_BYTE,v),n.renderTexture.bind(b)}return{width:f,height:l,array:v}},n.toCanvas=function(n,i,r,e){var u=n.width,s=n.height,h=n.array;if(null==e?e=new cu(u,s):e.resize(u,s),u<=0||s<=0)return e;var o=e.getContext(),a=e.getElement();if(null==o||null==a)return e;var c=o.getImageData(0,0,u,s);if(r?c.data.set(h):t.Extract.arrayPostDivide(h,c.data),o.putImageData(c,0,0),null!=i&&1!==i){o.scale(i,i),o.drawImage(a,0,0);var f=Math.floor(u*i),l=Math.floor(s*i),v=o.getImageData(0,0,f,l);e.resize(f,l),o.putImageData(v,0,0)}return e},n.toBase64=function(t,n,i){return t.toDataURL(n,i)},n}(),lu=function(){function t(){}return t.downloadUrl=function(t,n){var i=document.createElement("a");"download"in i?(i.href=n,i.setAttribute("download",t),i.style.display="none",document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i)}),66)):window.open(n)||(location.href=n)},t.download=function(t,n,i){var r=new Blob(!1!==i?["\ufeff",n]:[n],{type:"text/plain"}),e=window.navigator;"msSaveBlob"in e?e.msSaveBlob(r,t):this.downloadUrl(t,URL.createObjectURL(r))},t}(),vu=function(t){var n,i=t.target,r=t.resolution;if(null!=r){if(jt(r))return r;var e=i.transform.scale,u=Math.max(i.width*e.x,i.height*e.y);return Math.min(1,r.size/u)}return null!==(n=window.devicePixelRatio)&&void 0!==n?n:1},bu=function(t,n){var i=n.scale;if(null!=i){if(jt(i))return i;var r=i.size;return Math.min(1,r/t.width,r/t.height)}},du=function(){function n(){}return n.texture=function(t){var n,i=t.target,r=vu(t),e=null===(n=t.transform)||void 0===n?void 0:n.update;return fu.toTexture(i,r,t.clear,e)},n.pixels=function(i){var r,e=function(t){var n=t.renderer;if(n)return n;var i=t.application;if(i)return i.getLayerBase().renderer;var r=t.layer||lt.getLayer(t.target);if(r)return r.renderer;throw new Error("No renderer / application / layer found.")}(i),u=i.target,s=u.transform.scale,h=Math.ceil(u.width*s.x),o=Math.ceil(u.height*s.y);if(h<=0||o<=0)return{width:h,height:o,array:new Uint8Array(0)};var a=vu(i),c=n.WORK_RENDER_TEXTURE;if(null==c)c=t.RenderTexture.create({width:h,height:o,scaleMode:t.SCALE_MODES.LINEAR,resolution:a}),n.WORK_RENDER_TEXTURE=c;else{var f=c.baseTexture,l=f.width,v=f.height,b=l<h,d=v<o,g=c.resolution!==a;(g||b||d)&&(g&&(f.resolution=a),c.resize(Math.max(h,l),Math.max(o,v),!0))}var m=c.frame;0===m.x&&0===m.y&&m.width===h&&m.height===o||(m.x=0,m.y=0,m.width=h,m.height=o,c.frame=m);var w=u.position,O=new t.Matrix(1,0,0,1,-w.x,-w.y);return e.render(u,c,i.clear,O,null===(r=i.transform)||void 0===r?void 0:r.update),fu.toPixels(c,e)},n.canvas=function(t){var n,i,r=this.pixels(t),e=null===(i=null===(n=t.alpha)||void 0===n?void 0:n.premultiplied)||void 0===i?void 0:i.ignore,u=bu(r,t);return fu.toCanvas(r,u,e)},n.base64=function(t){var n,i,r,e=this.pixels(t),u=null===(i=null===(n=t.alpha)||void 0===n?void 0:n.premultiplied)||void 0===i?void 0:i.ignore,s=bu(e,t),h=null!==(r=this.WORK_CANVAS)&&void 0!==r?r:this.WORK_CANVAS=new cu(e.width,e.height);fu.toCanvas(e,s,u,h);var o=h.getElement();return null!=o?fu.toBase64(o,t.format,t.quality):"data:,"},n.file=function(t){lu.downloadUrl(t.filename,this.base64(t))},n.destroy=function(){var t=this.WORK_RENDER_TEXTURE;null!=t&&(this.WORK_RENDER_TEXTURE=void 0,t.destroy(!0));var n=this.WORK_CANVAS;null!=n&&(this.WORK_CANVAS=void 0,n.destroy())},n}(),gu=function(t){function n(n,i){var r=t.call(this)||this;r.g=n;var e=null==i?void 0:i.on;if(e)for(var u in e){var s=e[u];s&&r.on(u,s)}return r}return G(n,t),n.prototype.createAsUrl=function(t){return null==t||jt(t)?this.create({size:t,extractor:function(t){return du.base64({target:t})}}):this.create({size:t.size,cleanup:t.cleanup,extractor:function(t){return du.base64({target:t})}})},n.prototype.createAsFile=function(t,n){Tt(t)?this.create({extractor:function(n){du.file({target:n,filename:t})}}):null===t||jt(t)?this.create({size:t,extractor:function(t){du.file({target:t,filename:n})}}):this.create({size:t.size,cleanup:t.cleanup,extractor:function(n){du.file({target:n,filename:t.filename})}})},n.prototype.toScale=function(t,n){return null==t?1:t/lt.getResolution(n)/Math.max(n.width,n.height)},n.prototype.toCleanupSnap=function(t){if(null==t)return!0;var n=t.cleanup;return null==n||!0===n||!1!==n&&!1!==n.snap},n.prototype.toCleanupBackground=function(t){if(null==t)return!1;var n=t.cleanup;return null!=n&&!1!==n&&(!0===n||!0===n.background)},n.prototype.toCleanupReflow=function(t){if(null==t)return!0;var n=t.cleanup;return null==n||!0===n||!1!==n&&!1!==n.reflow},n.prototype.create=function(t){var n=this.g,i=n.canvas;if(i){var r=n.view,e=r.position,u=r.scale,s=e.x,h=e.y,o=u.x,a=u.y,c=this.toScale(t.size,i);r.transform(0,0,c,c,0);var f=void 0;if(this.toCleanupSnap(t)&&"snap"in i){var l=i.snap;null!=l&&((f=l.container).renderable?f.renderable=!1:f=void 0)}var v=void 0;if(this.toCleanupBackground(t)&&((v=i.snippet).renderable?v.renderable=!1:v=void 0),this.toCleanupReflow(t)){var b=lt.getLayer(i);b&&b.reflow()}this.emit("taking",i,this);var d=t.extractor(i);return this.emit("took",i,null,this),v&&(v.renderable=!0),null!=f&&(f.renderable=!0),r.transform(s,h,o,a,0),d}},n}(t.utils.EventEmitter),mu=function(t){function n(n){var i,r=t.call(this,n)||this;return r.$u=null,r.ts=null==n?void 0:n.tile,r.ns=null==n?void 0:n.controller,r.rs=null!==(i=null==n?void 0:n.ambient)&&void 0!==i?i:r.theme.isAmbient(),r.es=new gu(r,null==n?void 0:n.snapshot),r._n=r.toMode(n),r}return G(n,t),Object.defineProperty(n.prototype,"snapshot",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"controller",{get:function(){return this.ns||null},enumerable:!1,configurable:!0}),n.prototype.set=function(t){var n=this,i=this.$u;if(i!==t){if(i&&(this.$u=null,this.canvas&&(this.canvas=null),this.onUnset()),this.$u=t,t){var r=this.newCanvas(t),e=t.pieces,u=this._n,s=Se.toPieceData(this.ns,e,u).then((function(i){return n.newLayer(t,r,u,e,i)}));return this.onSet(t,r),this.canvas=r,s}return Promise.resolve(null)}return Promise.resolve(this.canvas)},n.prototype.onSet=function(t,n){},n.prototype.newLayer=function(t,n,i,r,e){var u=this,s=new _i(t,r,e,i,0),h=Se.newLayer(t,n.layer,s).then((function(t){return u.initLayer(n,t)}));if(this.rs){var o=this.toCanvasBaseBackgroundOptions(t,this.theme,!1);this.background.color=o.color,this.background.alpha=o.alpha}return h},n.prototype.initLayer=function(t,n,i){return t.layer.init(),t.initialize(n,i),lt.update(this),this.emit("ready",this),t},n.prototype.toCanvasBaseOptions=function(t){var n,i=this.theme,r=this.rs;return{name:t.name,label:t.label,width:t.width,height:t.height,category:t.category,summary:t.summary,description:t.description,background:this.toCanvasBaseBackgroundOptions(t,i,r),border:r?{color:null}:void 0,outline:r?{color:null}:void 0,shadow:r?null:i.getCanvasShadow(),tile:{factory:this.ts,mapping:null===(n=t.tile)||void 0===n?void 0:n.mapping},ambient:r}},n.prototype.toCanvasBaseBackgroundOptions=function(t,n,i){var r,e;if(i)return{color:null};var u=t.background;return{color:null!==(r=null==u?void 0:u.color)&&void 0!==r?r:n.getCanvasBackgroundColor(),alpha:null!==(e=null==u?void 0:u.alpha)&&void 0!==e?e:n.getCanvasBackgroundAlpha()}},n.prototype.onUnset=function(){},n.prototype.get=function(){return this.$u},Object.defineProperty(n.prototype,"layer",{get:function(){var t=this.canvas;return t?t.layer.active:null},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DDiagramBase"},n}(au),wu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DCanvas"},n}(ru),Ou=function(){function t(t,n){this.Pr=t,this.Bn=n}return t.prototype.getTheme=function(){return this.Pr.getTheme()},t.prototype.setTheme=function(t){this.Pr.setTheme(t)},t.prototype.getBaseColor=function(){return this.Bn},t.prototype.setBaseColor=function(t){this.Bn=t},t.prototype.getColor=function(t){var n=this.Pr,i=this.Bn,r=n.getColor(t);return null!=i?null!=r?gn.blend(i,r,n.getAlpha(t)):i:r},Object.defineProperty(t.prototype,"color",{get:function(){return this.Pr.color},set:function(t){this.Pr.color=t},enumerable:!1,configurable:!0}),t.prototype.getAlpha=function(t){return null!=this.Bn?1:this.Pr.getAlpha(t)},Object.defineProperty(t.prototype,"alpha",{get:function(){return this.Pr.alpha},set:function(t){this.Pr.alpha=t},enumerable:!1,configurable:!0}),t}(),pu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),Object.defineProperty(n.prototype,"lon",{get:function(){return this.x},set:function(t){this.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lat",{get:function(){return this.y},set:function(t){this.y=t},enumerable:!1,configurable:!0}),n.prototype.toObject=function(){return{lon:this.x,lat:this.y}},n}(t.ObservablePoint),Du=function(){function t(t,n,i,r,e,u){if(this.us=t,!0===n||!1===n)this.O=n,this.Lt=new pu(t,null,i,r),this.xt=new pu(t,null,e,u);else if(null!=n){this.O=n.enable;var s=n.from,h=n.to;this.Lt=new pu(t,null,s.lon,s.lat),this.xt=new pu(t,null,h.lon,h.lat)}else this.O=!1,this.Lt=new pu(t,null,-180,85.05112877980659),this.xt=new pu(t,null,180,-85.05112877980659)}return Object.defineProperty(t.prototype,"enable",{get:function(){return this.O},set:function(t){this.O!==t&&(this.O=t,this.us())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"from",{get:function(){return this.Lt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.xt},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){return{enable:this.O,from:this.Lt.toObject(),to:this.xt.toObject()}},t}(),Eu=function(){function t(t,n){var i=this;this.ki=t,this.ss=null==n?void 0:n.factory,this.Kt=new Du((function(){i.onMappingChange()}),null==n?void 0:n.mapping)}return t.prototype.init=function(){this.onMappingChange()},t.prototype.onMappingChange=function(){var t=this.ss;if(t){var n,i=this.Kt;i.enable?(n=this.hs)?n.mapping=i:this.hs=t(this.ki).fit():(n=this.hs)&&(this.hs=void 0,n.destroy())}},Object.defineProperty(t.prototype,"pyramid",{get:function(){return this.hs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"factory",{get:function(){return this.ss},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapping",{get:function(){return this.Kt},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){return{mapping:this.Kt.serialize()}},t.prototype.destroy=function(){var t=this.hs;null!=t&&(this.hs=void 0,t.destroy())},t}(),Mu=function(){function t(t){var n=t.transform,i=n.position;this.x=i.x,this.y=i.y;var r=t.size;this.sizeX=r.x,this.sizeY=r.y,this.rotation=n.rotation,this.actions=[],this.fill=t.fill.toObject(),this.stroke=t.stroke.toObject(),this.text=t.text.toObject(),this.cursor=t.cursor,this.reset=mn.NONE,this.written=mn.NONE,this.effect=-1,this.isStateChanged=!1,this.interactive=!1}return t.prototype.initialize=function(t){t.lock(_t.UPLOADED);for(var n=this.actions,i=0,r=n.length;i<r;++i)n[i].initialize(t,this);t.unlock(_t.UPLOADED,!0)},t.prototype.isActionable=function(){return 0<this.actions.length},t.prototype.onResize=function(t){for(var n=this.actions,i=0,r=n.length;i<r;++i)n[i].onResize(t,this)},t.prototype.onClick=function(t,n){var i=t.state;i.isActionable&&(i.isClicked=!0);for(var r=this.actions,e=0,u=r.length;e<u;++e)r[e].onClick(t,this,n)},t.prototype.onDblClick=function(t,n,i){var r=t.state;r.isActionable&&(r.isDblClicked=!0);for(var e=this.actions,u=0,s=e.length;u<s;++u)e[u].onDblClick(t,this,n,i);return!1},t.prototype.onOver=function(t,n){var i=t.state;if(!i.isHovered){i.isHovered=!0;for(var r=this.actions,e=0,u=r.length;e<u;++e)r[e].onOver(t,this,n)}},t.prototype.onOut=function(t,n){if(t.state.isHovered){t.state.isHovered=!1;for(var i=this.actions,r=0,e=i.length;r<e;++r)i[r].onOut(t,this,n)}},t.prototype.onDown=function(t,n){for(var i=this.actions,r=0,e=i.length;r<e;++r)i[r].onDowning(t,this,n);var u=t.state;if(!u.isDown)if(u.isPressed)for(u.isDown=!0,(s=lt.getLayer(t))&&(h=s.getFocusController()).focus(h.findParent(t)),r=0,e=i.length;r<e;++r)i[r].onDown(t,this,n);else{var s,h;for(u.addAll(Nt.DOWN,gt.PRESSED),(s=lt.getLayer(t))&&(h=s.getFocusController()).focus(h.findParent(t)),r=0,e=i.length;r<e;++r){var o=i[r];o.onDown(t,this,n),o.onPressed(t,this,n)}}},t.prototype.onUp=function(t,n){var i=t.state;if(!i.isUp)if(i.isPressed){i.set(Nt.UP,gt.PRESSED);for(var r=0,e=(s=this.actions).length;r<e;++r){var u=s[r];u.onUp(t,this,n),u.onUnpressed(t,this,n)}}else{var s;for(i.isUp=!0,r=0,e=(s=this.actions).length;r<e;++r)s[r].onUp(t,this,n)}},t.prototype.onUpOutside=function(t,n){var i=t.state;if(i.isPressed){i.set(Nt.UP_OUTSIDE,gt.PRESSED);for(var r=0,e=(s=this.actions).length;r<e;++r){var u=s[r];u.onUpOutside(t,this,n),u.onUnpressed(t,this,n)}}else{var s;for(i.isUpOutside=!0,r=0,e=(s=this.actions).length;r<e;++r)s[r].onUpOutside(t,this,n)}},t.prototype.onMove=function(t,n){for(var i=this.actions,r=0,e=i.length;r<e;++r)i[r].onMove(t,this,n)},t.prototype.onKeyDown=function(t,n){Qe.isActivateKey(n)&&this.onDown(t,n);for(var i=this.actions,r=0,e=i.length;r<e;++r)i[r].onKeyDown(t,this,n);return!1},t.prototype.onKeyUp=function(t,n){if(Qe.isActivateKey(n)){var i=t.state;if(i.isPressed){var r=i.isUp;this.onUp(t,n),!r&&i.isUp&&this.onClick(t,n)}}for(var e=this.actions,u=0,s=e.length;u<s;++u)e[u].onKeyUp(t,this,n);return!1},t.prototype.onStateChange=function(t,n,i){this.isStateChanged=!0,lt.update(t),n.isFocused?i.isFocused||this.onFocus(t):i.isFocused&&this.onBlur(t)},t.prototype.onFocus=function(t){for(var n=this.actions,i=0,r=n.length;i<r;++i)n[i].onFocus(t,this)},t.prototype.onBlur=function(t){for(var n=this.actions,i=0,r=n.length;i<r;++i)n[i].onBlur(t,this)},t.prototype.onRightClick=function(t,n){var i=t.state;i.isActionable&&(i.isRightClicked=!0);for(var r=this.actions,e=0,u=r.length;e<u;++e)r[e].onRightClick(t,this,n)},t.prototype.onRightDown=function(t,n){for(var i=this.actions,r=0,e=i.length;r<e;++r)i[r].onRightDowning(t,this,n);var u=t.state;if(!u.isRightDown)if(u.isRightPressed)for(u.addAll(Nt.RIGHT_DOWN,Nt.RIGHT_PRESSED),(h=lt.getLayer(t))&&(o=h.getFocusController()).focus(o.findParent(t)),r=0,e=i.length;r<e;++r){var s=i[r];s.onRightDown(t,this,n),s.onRightPressed(t,this,n)}else{var h,o;for(u.isRightDown=!1,(h=lt.getLayer(t))&&(o=h.getFocusController()).focus(o.findParent(t)),r=0,e=i.length;r<e;++r)i[r].onRightDown(t,this,n)}},t.prototype.onRightUp=function(t,n){var i=t.state;if(!i.isRightUp)if(i.isRightPressed){i.set(Nt.RIGHT_UP,Nt.RIGHT_PRESSED);for(var r=0,e=(s=this.actions).length;r<e;++r){var u=s[r];u.onRightUp(t,this,n),u.onRightUnpressed(t,this,n)}}else{var s;for(i.isRightUp=!0,r=0,e=(s=this.actions).length;r<e;++r)s[r].onRightUp(t,this,n)}},t.prototype.onRightUpOutside=function(t,n){var i=t.state;if(i.isRightPressed){i.set(Nt.RIGHT_UP_OUTSIDE,Nt.RIGHT_PRESSED);for(var r=0,e=(s=this.actions).length;r<e;++r){var u=s[r];u.onRightUpOutside(t,this,n),u.onRightUnpressed(t,this,n)}}else{var s;for(i.isRightUpOutside=!0,r=0,e=(s=this.actions).length;r<e;++r)s[r].onRightUpOutside(t,this,n)}},t.prototype.update=function(n,i){var r=n.data,e=this.effect,u=0<=e&&e<=i;if(r.isChanged||this.isStateChanged||u){this.isStateChanged=!1,r.isChanged=!1,u&&(this.effect=-1),n.lock(_t.UPLOADED),this.onUpdate(n,i),n.unlock(_t.UPLOADED,!0);var s=this.isStateChanged;n.state.removeAll(t.TRANSIENT_STATES),this.isStateChanged=s}},t.prototype.onRender=function(t,n,i){for(var r=this.actions,e=0,u=r.length;e<u;++e)r[e].onRender(t,this,n,i);this.update(t,n)},t.prototype.onUpdate=function(t,n){var i=this.actions;if(0<i.length){this.written=mn.NONE;for(var r=0,e=i.length;r<e;++r)i[r].execute(t,this,n);this.doReset(t)}},t.prototype.doReset=function(t){var n=~this.written&this.reset;if(n!==mn.NONE){if(n&mn.POSITION_X&&(t.transform.position.x=this.x),n&mn.POSITION_Y&&(t.transform.position.y=this.y),n&mn.VISIBILITY&&(t.visible=!0),n&mn.COLOR_FILL){var i=this.fill;t.fill.set(void 0,i.color,i.alpha)}if(n&mn.COLOR_STROKE){var r=this.stroke;t.stroke.set(void 0,r.color,r.alpha)}if(n&mn.COLOR_TEXT){var e=this.text;t.text.set(void 0,e.color,e.alpha)}if(n&mn.COLOR_TEXT_OUTLINE){var u=this.text.outline;t.text.outline.set(void 0,u.color,u.alpha)}n&mn.HEIGHT&&(t.size.y=this.sizeY),n&mn.WIDTH&&(t.size.x=this.sizeX),n&mn.ROTATION&&(t.transform.rotation=this.rotation),n&mn.TEXT&&(t.text.value=this.text.value),n&mn.CURSOR&&(t.cursor=this.cursor)}},t.TRANSIENT_STATES=[Nt.CLICKED,Nt.DBL_CLICKED,Nt.DOWN,Nt.UP,Nt.UP_OUTSIDE,Nt.RIGHT_CLICKED,Nt.RIGHT_DOWN,Nt.RIGHT_UP,Nt.RIGHT_UP_OUTSIDE,Nt.ACTIVATED,Nt.DEACTIVATED],t}(),Su=function(t){function n(n){return void 0===n&&(n=r.RECTANGLE),t.call(this,n)||this}return G(n,t),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(n,i,r,e,u,s,h){return!!t.prototype.containsAbsBBox.call(this,n,i,r,e)&&sn(this,n,i,r,e,u,s)},n}(en),ju=function(t){function n(n){return void 0===n&&(n=r.RECTANGLE_PIVOTED),t.call(this,n)||this}return G(n,t),n.prototype.toHitTestData=function(n,i){var r=t.prototype.toHitTestData.call(this,n,i);return r.x-=r.width,r.y-=r.height,r},n}(Su),Tu=function(t){function n(n){var i=t.call(this)||this;i.name=n,i.interactive=!1,i.reference=0;var r=i.newShape();return r.parent=i,i.Vn=r,i.interactives=[],i}return G(n,t),Object.defineProperty(n.prototype,"width",{get:function(){return this.Vn.size.x},set:function(t){this.Vn.size.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.Vn.size.y},set:function(t){this.Vn.size.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"background",{get:function(){return this.Vn.fill},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){return this.Vn.state},enumerable:!1,configurable:!0}),n.prototype.newShape=function(){var t=new ju;return t.fill.set(!1,16777215,1),t.stroke.set(!1),t.state.add(De.INTERACTIVE),t},n.prototype.initialize=function(t){var n=this.interactives,i=this.Vn,r=i.state.is(De.INTERACTIVE),e=i.state.is(De.DRAGGABLE),u=i.state.is(De.PINCHABLE);if(e||u){var s=new Mu(i);i.runtime=s;var h=(e?de.DRAG:de.NONE)|(u?de.PINCH:de.NONE);s.actions.push(new pe("",we.LAYER,h).toRuntime()),t.push(i),s.initialize(i)}(r||e||u)&&(i.interactive=!0,n.push(i)),this.doInitialize(this.children,n)},n.prototype.doInitialize=function(t,n){for(var i=0,r=t.length;i<r;++i){var e=t[i],u=e.runtime;if(u)if(e.interactive||u.interactive)n.push(e);else{var s=e.cursor;null!=s&&0<s.length&&n.push(e)}var h=e.children;0<h.length&&this.doInitialize(h,n)}},n.prototype.update=function(t){this.doUpdate(this.children,t)},n.prototype.doUpdate=function(t,n){for(var i=0,r=t.length;i<r;++i){var e=t[i];e.update(n);var u=e.children;0<u.length&&this.doUpdate(u,n)}},n.prototype.hitTestInteractives=function(t){for(var n=this.Br,i=this.interactives,r=i.length-1;0<=r;--r){var e=i[r];if(e.visible&&(e.toLocal(t,void 0,n),null!=e.contains(n.x,n.y)))return e}return null},n.prototype.addUuid=function(t){for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].addUuid(t)},n.prototype.updateUuid=function(t){for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].updateUuid(t)},n.prototype.destroy=function(){if(!this._destroyed){for(var n=this.children,i=n.length-1;0<=i;--i)n[i].destroy();n.length=0,t.prototype.destroy.call(this)}},n.prototype.serialize=function(t,n,i){for(var r=this.children,e=0,u=r.length;e<u;++e){var s=r[e].serialize(n);s[16]=t,i.push(s)}var h=this.Vn,o=n.addResource(this.name||""),a=(this.visible?1:0)|(h.state.is(De.INVISIBLE)?0:2),c=this.position,f=h.size,l=h.fill.serialize(n),v=h.state.is(De.INTERACTIVE)?1:0,b=h.state.is(De.DRAGGABLE)?2:0,d=h.state.is(De.PINCHABLE)?4:0;return[o,a,c.x,c.y,f.x,f.y,l,v|b|d]},n.deserialize=function(t,i,r,e){var u,s,h,o=new n(this.deserializeName(t[0],i)),a=o.Vn,c=t[1];if(null!=c){var f=i.mode!==Pi.VIEWER;!f||1&c||(o.visible=!1),2&c||(a.state.add(De.INVISIBLE),f||(o.visible=!1))}var l=t[2],v=t[3];o.position.set(l,v);var b=null!==(u=t[4])&&void 0!==u?u:r,d=null!==(s=t[5])&&void 0!==s?s:e;a.size.set(b,d);var g=t[6];null!=g&&a.fill.deserialize(g,i);var m=null!==(h=t[7])&&void 0!==h?h:1;return a.state.set(De.INTERACTIVE,!!(1&m)),a.state.set(De.DRAGGABLE,!!(2&m)),a.state.set(De.PINCHABLE,!!(4&m)),o},n.deserializeName=function(t,n){if(Tt(t))return t;var i=n.resources;return 0<=t&&t<=i.length?i[t]:""},n}(ie),Iu=function(t){function n(n,i){var r=t.call(this)||this;return r.os=null,r.At=n,r.rr=i,r.interactive=!1,r.interactiveChildren=!1,r}return G(n,t),n.prototype.init=function(){if(null==this.os){var t=this.children,n=t.length;0<n&&(this.os=t[n-1])}},Object.defineProperty(n.prototype,"active",{get:function(){return this.os},set:function(t){this.os!==t&&(null==t||0<=this.children.indexOf(t))&&(this.os=t,this.onLayerChange())},enumerable:!1,configurable:!0}),n.prototype.create=function(t,n){var i=new Tu(t);return this.attach(i,n),i},n.prototype.attach=function(t,n){this.addChild(t),!0===n&&(this.os=t),this.onLayerChange(),lt.update(this)},n.prototype.attachAt=function(t,n,i){this.addChildAt(t,n),!0===i&&(this.os=t),this.onLayerChange(),lt.update(this)},n.prototype.detach=function(t,n){var i=this.children,r=i.indexOf(t);0<=r&&(this.os=n,i.splice(r,1),t.parent=void 0,this.onLayerChange(),lt.update(this))},n.prototype.delete=function(t,n){var i=this.children,r=i.indexOf(t);return 0<=r&&(i.splice(r,1),t.parent=void 0,this.os===t&&(!0===n?r<i.length?this.os=i[r]:0<i.length?this.os=i[r-1]:this.os=null:this.os=null),this.onLayerChange(),lt.update(this)),r},n.prototype.get=function(t){var n=this.children[t];return null!=n?n:null},n.prototype.clear=function(){var t=this.children;if(0<t.length){for(var n=t.length-1;0<=n;--n){var i=t[n];i.parent=null,i.destroy()}t.length=0,this.onLayerChange(),lt.update(this)}},n.prototype.destroy=function(){this._destroyed||(this.clear(),t.prototype.destroy.call(this))},n.prototype.size=function(){return this.children.length},n.prototype.onLayerChange=function(){this.emit("change",this)},n.prototype.serialize=function(t,n){for(var i=[],r=this.children,e=0,u=r.length;e<u;++e)r[e].addUuid(t);for(e=0,u=r.length;e<u;++e)r[e].updateUuid(t);for(e=0,u=r.length;e<u;++e)i.push(r[e].serialize(e,t,n));return i},n.prototype.deserialize=function(t,n){var i=t.length;if(0<i){for(var r=this.At,e=this.rr,u=0;u<i;++u)this.addChild(Tu.deserialize(t[u],n,r,e));this.onLayerChange(),lt.update(this)}},n}(t.Container),Cu=function(n){function i(t){var i,r,e,u,s=n.call(this,t)||this,h=s.theme;s.isAmbient(h,t)||(s.ze=new Ou(s.ze,s.toBackgroundBase(h,t)));var o=new Iu(s.width,s.height);s.cs=o,s.addChild(o),null!=t?(s.fs=null!==(i=t.label)&&void 0!==i?i:"",s.ls=null!==(r=t.category)&&void 0!==r?r:null,s.vs=null!==(e=t.summary)&&void 0!==e?e:"",s.bs=null!==(u=t.description)&&void 0!==u?u:""):(s.fs="",s.ls=null,s.vs="",s.bs="");var a=new Eu(s,null==t?void 0:t.tile);return s.gs=a,a.init(),s.ws=h.getLocalBoundsLimit(),s}return G(i,n),i.prototype.isAmbient=function(t,n){var i;return null!==(i=null==n?void 0:n.ambient)&&void 0!==i?i:t.isAmbient()},i.prototype.toBackgroundBase=function(t,n){var i,r;return null!==(r=null===(i=null==n?void 0:n.background)||void 0===i?void 0:i.base)&&void 0!==r?r:t.getBackgroundBase()},Object.defineProperty(i.prototype,"label",{get:function(){return this.fs},set:function(t){this.fs=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"category",{get:function(){return this.ls},set:function(t){this.ls=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summary",{get:function(){return this.vs},set:function(t){this.vs=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"description",{get:function(){return this.bs},set:function(t){this.bs=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tile",{get:function(){return this.gs},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"layer",{get:function(){return this.cs},enumerable:!1,configurable:!0}),i.prototype.initialize=function(t,n){},i.prototype.destroy=function(){this._destroyed||(this.onDestroy(),n.prototype.destroy.call(this))},i.prototype.onDestroy=function(){this.gs.destroy(),this.cs.destroy()},i.prototype.hitTest=function(t,n){for(var i=this.cs.children,r=i.length-1;0<=r;--r){var e=i[r];if(e.visible){var u=e.hitTest(t,n);if(null!=u)return u}}return null},i.prototype.getLocalBounds=function(n){var r,e;null==n&&(n=null!==(r=this.Os)&&void 0!==r?r:this.Os=new t.Rectangle),n.x=0,n.y=0,n.width=this.width,n.height=this.height;var u=this.ws;if(0===u)return n;var s=this.layer.children,h=s.length,o=null!==(e=i.WORK_LOCAL_BOUNDS)&&void 0!==e?e:i.WORK_LOCAL_BOUNDS=new t.Rectangle;if(0<u){for(var a=0,c=0;c<h;++c){var f=(g=s[c]).transform.position;o.x=f.x,o.y=f.y,o.width=g.width,o.height=g.height,n.enlarge(o),a+=g.children.length}if(u<a)return n;for(c=0;c<h;++c)for(var l=(f=(g=s[c]).transform.position).x,v=f.y,b=0,d=(m=g.children).length;b<d;++b)m[b].getBoundsInternal(!0,o),o.x+=l,o.y+=v,n.enlarge(o)}else for(c=0;c<h;++c){var g,m;for(l=(f=(g=s[c]).transform.position).x,v=f.y,o.x=l,o.y=v,o.width=g.width,o.height=g.height,n.enlarge(o),b=0,d=(m=g.children).length;b<d;++b)m[b].getBoundsInternal(!0,o),o.x+=l,o.y+=v,n.enlarge(o)}return n},i.prototype.getType=function(){return"DDiagramCanvasBase"},i}(wu),Nu={},Au=function(){function t(){}return Object.defineProperty(t.prototype,"private",{get:function(){var t=this.Yt;return null==t&&(t=this.newPrivate(),this.Yt=t),t},enumerable:!1,configurable:!0}),t.prototype.newPrivate=function(){return new Jt},Object.defineProperty(t.prototype,"protected",{get:function(){var t=this.ps;return null==t&&(t=this.newProtected(),this.ps=t),t},enumerable:!1,configurable:!0}),t.prototype.newProtected=function(){return new Jt},Object.defineProperty(t.prototype,"extended",{get:function(){var t=this.Ds;return null==t&&(t=this.newExtended(),this.Ds=t),t},enumerable:!1,configurable:!0}),t.prototype.newExtended=function(){return new Jt},Object.defineProperty(t.prototype,"ids",{get:function(){var t=this.Vt;if(null==t)return[];var n=[];return t.forEach((function(t,i){n.push(i)})),n},enumerable:!1,configurable:!0}),t.prototype.each=function(t){var n=this.Vt;if(null==n)return null;var i=null;return n.forEach((function(n,r){null==i&&!1===t(r)&&(i=r)})),i},t.prototype.add=function(t,n){var i,r=null!==(i=this.Vt)&&void 0!==i?i:this.Vt=new Map,e=r.get(t);null==e?r.set(t,[n]):e.push(n)},t.prototype.set=function(t,n,i,r,e,u){var s=this.Vt;if(null==s)return!1;var h=s.get(t);if(null==h)return!1;var o=h.length;if(o<=0)return!1;for(var a=0;a<o;++a){var c=h[a];c.range.set(e,u),void 0!==i&&(c.time=i),void 0!==r&&(c.state=r),void 0!==n&&(c.value=n)}return!0},t.prototype.get=function(t){var n=this.Vt;if(null==n)return null;var i=n.get(t);return null==i?null:i},t.prototype.clear=function(t){var n=this.Vt;if(null==n)return!1;var i=n.get(t);if(null==i)return!1;var r=i.length;if(r<=0)return!1;for(var e=0;e<r;++e)i[e].clear();return!0},t.prototype.toDirty=function(t){var n=this.Vt;if(null==n)return!1;var i=n.get(t);if(null==i)return!1;var r=i.length;if(r<=0)return!1;for(var e=0;e<r;++e)i[e].toDirty();return!0},t.prototype.setAll=function(t,n,i,r,e,u){var s=this.Vt;if(null==s)return!1;var h=s.get(t);if(null==h)return!1;var o=h.length;if(o<=0)return!1;for(var a=0;a<o;++a){var c=h[a];c.range.set(e,u),void 0!==i&&(c.times=i),void 0!==r&&(c.states=r),void 0!==n&&(c.values=n)}return!0},t.prototype.setValue=function(t,n){var i=this.Vt;if(null==i)return!1;var r=i.get(t);if(null==r)return!1;var e=r.length;if(e<=0)return!1;for(var u=0;u<e;++u)r[u].value=n;return!0},t.prototype.setValues=function(t,n){var i=this.Vt;if(null==i)return!1;var r=i.get(t);if(null==r)return!1;var e=r.length;if(e<=0)return!1;for(var u=0;u<e;++u)r[u].values=n;return!0},t.prototype.setTime=function(t,n){var i=this.Vt;if(null==i)return!1;var r=i.get(t);if(null==r)return!1;var e=r.length;if(e<=0)return!1;for(var u=0;u<e;++u)r[u].time=n;return!0},t.prototype.setTimes=function(t,n){var i=this.Vt;if(null==i)return!1;var r=i.get(t);if(null==r)return!1;var e=r.length;if(e<=0)return!1;for(var u=0;u<e;++u)r[u].times=n;return!0},t.prototype.setState=function(t,n){var i=this.Vt;if(null==i)return!1;var r=i.get(t);if(null==r)return!1;var e=r.length;if(e<=0)return!1;for(var u=0;u<e;++u)r[u].state=n;return!0},t.prototype.setStates=function(t,n){var i=this.Vt;if(null==i)return!1;var r=i.get(t);if(null==r)return!1;var e=r.length;if(e<=0)return!1;for(var u=0;u<e;++u)r[u].states=n;return!0},t.prototype.setRange=function(t,n,i){var r=this.Vt;if(null==r)return!1;var e=r.get(t);if(null==e)return!1;var u=e.length;if(u<=0)return!1;for(var s=0;s<u;++s){var h=e[s].range;void 0!==n&&(null!==n?(h.type|=Ft.FROM,h.from=n):h.type&=~Ft.FROM),void 0!==i&&(null!==i?(h.type|=Ft.TO,h.to=i):h.type&=~Ft.TO)}return!0},t}(),Ru=function(){function t(t){this.ki=t}return t.prototype.each=function(t,n){for(var i=this.ki.layer.children,r=0,e=i.length;r<e&&!1!==this.Es(i[r].children,t,n);++r);return this},t.prototype.Es=function(t,n,i){for(var r=0,e=t.length;r<e;++r){var u=t[r];if(!1===n(u))return!1;if(i||zi.contains(u,Lt.CHILDREN)){var s=u.children;if(0<s.length&&!1===this.Es(s,n,i))return!1}}},t}(),yu=function(t){function n(n){var i=t.call(this,n)||this;return i.Vt=new Map,i}return G(n,t),n.prototype.add=function(t,n){var i=this.Vt,r=i.get(t);null==r?i.set(t,[n]):r.push(n)},n.prototype.get=function(t){var n=this.Vt.get(t);return n&&0<n.length?n[0]:null},n.prototype.getAll=function(t){return this.Vt.get(t)||[]},n}(Ru),ku=function(){function t(t,n){var i=this;this.g=t,this.R=[],this.J=n,this.Z=function(){i.onTime()}}return t.prototype.add=function(t){this.R.push(t)},t.prototype.start=function(){null==this.q&&this.onTime()},t.prototype.getInterval=function(){var t=Date.now(),n=this.J;return Math.max(0,n-t%n)},t.prototype.onTime=function(){var t=this.R;if(0<t.length){for(var n=Date.now()/this.J,i=0,r=t.length;i<r;++i)t[i].value=n;lt.update(this.g)}this.q=window.setTimeout(this.Z,this.getInterval())},t.prototype.stop=function(){var t=this.q;null!=t&&(clearTimeout(t),this.q=void 0)},t}(),Lu=function(){function t(t){this.g=t,this.Vt=new Map}return t.prototype.add=function(t){var n=this.Vt,i=this.toNormalized(t),r=n.get(i);if(null!=r)return r;var e=new ku(this.g,i);return n.set(i,e),e},t.prototype.toNormalized=function(t){return jt(t)?Math.max(1,Math.round(t)):1e3},t.prototype.start=function(){this.Vt.forEach((function(t){t.start()}))},t.prototype.stop=function(){this.Vt.forEach((function(t){t.stop()}))},t}(),xu=function(){function t(){}return t.add=function(t){var n,i,r;(null!==(n=this.Ms)&&void 0!==n?n:this.Ms=new Map).set(t.type,t),(null!==(i=this.xi)&&void 0!==i?i:this.xi=new Map).set(t.id,t),(null!==(r=this.Vt)&&void 0!==r?r:this.Vt=[]).push(t)},t.get=function(t){var n=this.Ms;if(null!=n)return n.get(t)},t.getById=function(t){var n=this.xi;if(null!=n)return n.get(t)},t.each=function(t){var n=this.Vt;if(null!=n)for(var i=0,r=n.length;i<r;++i)t(n[i])},t}(),Bu=function(){function t(){}return t.add=function(t,n){var i=this.Ss;null==i&&(i=new Map,this.Ss=i);var r=i.get(t);null==r?(r=[n],i.set(t,r)):r.push(n)},t.get=function(t){var n=this.Ss;if(null!=n)return n.get(t)},t}(),_u="[]",Pu=function(){return 0},Uu=function(){return[]},Fu=function(){return""},Gu=function(){return{}},Hu=function(){return!1},zu=function(n){function i(t){var i=n.call(this,t)||this;return i.Vt=new Au,i.Vn=new yu(i),i.rt=new Lu(i),i.js=[],i.Ts=new Set,i.Is=function(){lt.update(i)},i}return G(i,n),Object.defineProperty(i.prototype,"data",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shape",{get:function(){return this.Vn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ticker",{get:function(){return this.rt},enumerable:!1,configurable:!0}),i.prototype.initialize=function(t,n){var i=this,r=this.js,e=this.Vt;this.Cs(t,null,null,n,new Map,new Map,new Map,this.rt,this.Vn,e,r);for(var u=this.cs.children,s=u.length,h=0;h<s;++h)u[h].initialize(r);On.isInitializing=!0;var o=Date.now();for(h=0;h<s;++h)u[h].update(o);On.isInitializing=!1,e.extended.each((function(t){var n=xu.getById(t);if(n){var r=n.start;r&&r(i)}})),this.rt.start()},i.prototype.Cs=function(t,n,i,r,e,u,s,h,o,a,c){for(var f=function(f,v){var b=t[f],d=b.id;0<d.length&&o.add(d,b),l.initData(b,n,i,r,e,u,h,a);var g=new(Nu[b.type]||Mu)(b);b.runtime=g,l.initActions(b,g,s),g.initialize(b);var m=b.shortcut;null!=m&&Qe.on(b,m,(function(t){g.onClick(b,t)})),g.isActionable()&&c.push(b);var w=b.children;if(0<w.length){var O=n,p=i;b instanceof qi&&(null==O&&(O=b),p=b),l.Cs(w,O,p,r,e,u,s,h,o,a,c)}},l=this,v=0,b=t.length;v<b;++v)f(v)},i.prototype.initData=function(t,n,i,r,e,u,s,h){for(var o=t.data,a=0,c=o.size();a<c;++a){var f=o.get(a);if(null!=f)switch(f.type){case zt.BOOLEAN:case zt.BOOLEAN_ARRAY:case zt.NUMBER:case zt.NUMBER_ARRAY:case zt.STRING:case zt.STRING_ARRAY:case zt.OBJECT:case zt.OBJECT_ARRAY:this.initDataValue(f,t,n,i,r,e,u,h);break;case zt.TICKER:this.initDataTicker(f,u,s);break;default:this.initDataExtension(f,h)}}},i.prototype.initDataValue=function(t,n,i,r,e,u,s,h){if(t.scope===Vt.PRIVATE)0<(o=t.id).length&&(r?r.data.private.add(o,t):h.private.add(o,t));else if(t.scope===Vt.PROTECTED)0<(o=t.id).length&&h.protected.add(o,t);else{var o;e&&e(t,i||n),0<(o=t.id).length&&h.add(o,t)}var a=t.format,c=t.initial,f=u.get(t.type);null==f&&(f=new Map,u.set(t.type,f));var l=f.get(a);if(null!=l)t.formatter=l;else if(0<a.length){var v=this.calcFormatter(t,a,c);f.set(a,v),t.formatter=v}var b=s.get(t.type);null==b&&(b=new Map,s.set(t.type,b));var d=b.get(c);if(null!=d)t.value=d();else{var g=this.calcInitial(t,c);b.set(c,g),t.value=g()}},i.prototype.initDataTicker=function(t,n,i){var r=t.initial,e=n.get(t.type);null==e&&(e=new Map,n.set(t.type,e));var u=e.get(r);if(void 0!==u)t.value=0,i.add(u()).add(t);else{var s=this.calcInitial(t,r);e.set(r,s),t.value=0,i.add(s()).add(t)}},i.prototype.initDataExtension=function(t,n){var i=xu.get(t.type);i&&(n.extended.add(i.id,t),t.value=i.initial)},i.prototype.initActions=function(t,n,i){var r=t.action.values,e=n.actions,u=Bu.get(t.type);if(null!=u)for(var s=0,h=u.length;s<h;++s){var o=u[s];e.push(o),n.reset|=o.reset}for(s=0,h=r.length;s<h;++s){var a=r[s],c=i.get(a);null==c?null!=(c=a.toRuntime())&&(i.set(a,c),e.push(c),n.reset|=c.reset):(e.push(c),n.reset|=c.reset)}},i.prototype.calcFormatter=function(t,n,i){var r=this.toInitial(t);try{return Function("value","try {"+"return (".concat(n,");")+"} catch( e1 ) {try {"+"return (".concat(0<i.length?i:r,");")+"} catch( e2 ) {"+"return ".concat(r,";")+"}}")}catch(n){return this.toInitializer(t)}},i.prototype.calcInitial=function(t,n){if(n.length<=0)return this.toInitializer(t);try{return Function("try {"+"return (".concat(n,");")+"} catch( e ) {"+"return ".concat(this.toInitial(t),";")+"}")}catch(n){return this.toInitializer(t)}},i.prototype.toInitial=function(t){switch(t.type){case zt.BOOLEAN:return"false";case zt.BOOLEAN_ARRAY:return _u;case zt.NUMBER:return"0";case zt.NUMBER_ARRAY:return _u;case zt.STRING:return'""';case zt.STRING_ARRAY:return _u;case zt.OBJECT:return"{}";case zt.OBJECT_ARRAY:return _u;case zt.TICKER:default:return"0"}},i.prototype.toInitializer=function(t){switch(t.type){case zt.BOOLEAN:return Hu;case zt.BOOLEAN_ARRAY:return Uu;case zt.NUMBER:return Pu;case zt.NUMBER_ARRAY:return Uu;case zt.STRING:return Fu;case zt.STRING_ARRAY:return Uu;case zt.OBJECT:return Gu;case zt.OBJECT_ARRAY:return Uu;case zt.TICKER:default:return Pu}},i.prototype.onDestroy=function(){var t=this;this.Vt.extended.each((function(n){var i=xu.getById(n);if(i){var r=i.stop;r&&r(t)}})),this.rt.stop(),n.prototype.onDestroy.call(this)},i.prototype.hitTestInteractives=function(t){for(var n=this.cs.children,i=n.length-1;0<=i;--i){var r=n[i];if(r.visible){var e=r.hitTestInteractives(t);if(null!=e)return e}}return null},i.prototype.onShapeMove=function(t){var n=this.hitTestInteractives(t.data.global);this.cursor=this.vu=this.toShapeCursor(n);var i=lt.getLayer(this);if(i){var r=this.toShapeTitle(n),e=i.view;e.title!==r&&(e.title=r)}var u=this.Ns;if(this.Ns=n,n===u){if(null!=n){var s=n.runtime;s&&s.onMove(n,t)}}else this.onShapeOut(t,u,n),this.onShapeOver(t,n);return null!=n},i.prototype.toShapeCursor=function(t){if(null!=t)for(var n=t;;){var i=n.cursor;if(null!=i&&0<i.length)return i;var r=n.parent;if(!(r instanceof Pt))break;n=r}return"auto"},i.prototype.toShapeTitle=function(t){if(null!=t)for(var n=t;;){var i=n.title;if(null!=i&&0<i.length)return i;var r=n.parent;if(!(r instanceof Pt))break;n=r}return""},i.prototype.onShapeOut=function(t,n,i){for(;null!=n&&n!==i&&n instanceof Pt;){var r=n.runtime;r&&r.onOut(n,t),n=n.parent}},i.prototype.onShapeOver=function(t,n,i){for(;null!=n&&n!==i&&n instanceof Pt;){var r=n.runtime;r&&r.onOver(n,t),n=n.parent}},i.prototype.onShapeDown=function(t){var n=this.hitTestInteractives(t.data.global);if(this.As=n,n){this.Ts.add(n);for(var i=n;;){var r=i.runtime;r&&r.onDown(i,t);var e=i.parent;if(!(e instanceof Pt))break;i=e}return!0}return!1},i.prototype.onShapeUp=function(t){var n=this.Ts,i=this.hitTestInteractives(t.data.global);if(i){n.delete(i);for(var r=i;;){var e=r.runtime;e&&e.onUp(r,t);var u=r.parent;if(!(u instanceof Pt))break;r=u}}return this.onShapeCancel(t),null!=i},i.prototype.onShapeCancel=function(t){var n=this.Ts;return 0<n.size&&(n.forEach((function(n){for(var i=n;;){var r=i.runtime;r&&r.onUpOutside(i,t);var e=i.parent;if(!(e instanceof Pt))break;i=e}})),n.clear(),!0)},i.prototype.onShapeClick=function(t){var n=this.hitTestInteractives(t.data.global);if(n&&this.As===n){for(var i=n;;){var r=i.runtime;r&&r.onClick(i,t);var e=i.parent;if(!(e instanceof Pt))break;i=e}return!0}return!1},i.prototype.onShapeDblClick=function(n,r){var e,u=null!==(e=i.WORK_DBLCLICK)&&void 0!==e?e:i.WORK_DBLCLICK=new t.Point;he.toGlobal(n,r,u);var s=this.hitTestInteractives(u);if(s){for(var h=s;;){var o=h.runtime;o&&o.onDblClick(h,n,r);var a=h.parent;if(!(a instanceof Pt))break;h=a}return!0}return!1},i.prototype.onShapeRightClick=function(t){var n=this.hitTestInteractives(t.data.global);if(n&&this.As===n){for(var i=n;;){var r=i.runtime;r&&r.onRightClick(i,t);var e=i.parent;if(!(e instanceof Pt))break;i=e}return!0}return!1},i.prototype.onShapeRightDown=function(t){var n=this.hitTestInteractives(t.data.global);if(this.As=n,n){this.Ts.add(n);for(var i=n;;){var r=i.runtime;r&&r.onRightDown(i,t);var e=i.parent;if(!(e instanceof Pt))break;i=e}return!0}return!1},i.prototype.onShapeRightUp=function(t){var n=this.Ts,i=this.hitTestInteractives(t.data.global);if(i){n.delete(i);for(var r=i;;){var e=r.runtime;e&&e.onRightUp(r,t);var u=r.parent;if(!(u instanceof Pt))break;r=u}}return this.onShapeRightCancel(t),null!=i},i.prototype.onShapeRightCancel=function(t){var n=this.Ts;return 0<n.size&&(n.forEach((function(n){for(var i=n;;){var r=i.runtime;r&&r.onRightUpOutside(i,t);var e=i.parent;if(!(e instanceof Pt))break;i=e}})),n.clear(),!0)},i.prototype.update=function(){var t=this.js;if(0<t.length){for(var n=-1,i=Date.now(),r=0,e=t.length;r<e;++r){var u=t[r];u.update(i);var s=u.runtime;if(s){var h=s.effect;0<=h&&i<h&&(n=n<0?h:Math.min(n,h))}}0<=n&&window.setTimeout(this.Is,n-Date.now())}},i.prototype.onRender=function(t){var n=this.js;if(0<n.length){for(var i=-1,r=Date.now(),e=0,u=n.length;e<u;++e){var s=n[e];s.onRender(r,t);var h=s.runtime;if(h){var o=h.effect;0<=o&&r<o&&(i=i<0?o:Math.min(i,o))}}0<=i&&window.setTimeout(this.Is,i-Date.now())}},i.prototype.getType=function(){return"DDiagramCanvas"},i}(Cu),Vu=function(t){function n(n){var i=t.call(this)||this;return i.Rs=n,i.Is=function(){lt.update(n)},i}return G(n,t),n.prototype.update=function(){var t=this.Rs.canvas;t&&t.update()},n.prototype.onRender=function(t){var n=this.Rs.canvas;n&&n.onRender(t)},n.prototype.get=function(t){var n=this.Rs.canvas;return n?n.shape.get(t):null},n.prototype.getAll=function(t){var n=this.Rs.canvas;return n?n.shape.getAll(t):[]},n.prototype.each=function(t,n){void 0===n&&(n=!1);var i=this.Rs.canvas;if(null!=i){var r=i.layer.children;if(n){for(e=r.length-1;0<=e;--e)for(h=(s=r[e].children).length-1;0<=h;--h)if(!1===t(a=s[h]))return a}else for(var e=0,u=r.length;e<u;++e)for(var s,h=0,o=(s=r[e].children).length;h<o;++h){var a;if(!1===t(a=s[h]))return a}}return null},n}(t.utils.EventEmitter),Wu=function(){function t(t){this.Rs=t}return Object.defineProperty(t.prototype,"ids",{get:function(){var t=this.Rs.canvas;return null!=t?t.data.private.ids:[]},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n,i,r,e,u){var s=this.Rs.canvas;return null!=s&&s.data.private.set(t,n,i,r,e,u)},t.prototype.toDirty=function(t){var n=this.Rs.canvas;return null!=n&&n.data.private.toDirty(t)},t.prototype.each=function(t){var n=this.Rs.canvas;return null!=n?n.data.private.each(t):null},t}(),Xu=function(){function t(t){this.Rs=t}return Object.defineProperty(t.prototype,"ids",{get:function(){var t=this.Rs.canvas;return null!=t?t.data.protected.ids:[]},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n,i,r,e,u){var s=this.Rs.canvas;return null!=s&&s.data.protected.set(t,n,i,r,e,u)},t.prototype.toDirty=function(t){var n=this.Rs.canvas;return null!=n&&n.data.protected.toDirty(t)},t.prototype.each=function(t){var n=this.Rs.canvas;return null!=n?n.data.protected.each(t):null},t}(),Ku=function(){function t(t){this.ns=t&&t.controller}return t.prototype.set=function(t,n){var i=this.ns;return!!i&&(i.write(t,n),!0)},t}(),Yu=function(){function t(t){this.Rs=t}return Object.defineProperty(t.prototype,"ids",{get:function(){var t=this.Rs.canvas;return null!=t?t.data.extended.ids:[]},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n,i,r,e,u){var s=this.Rs.canvas;return null!=s&&s.data.extended.set(t,n,i,r,e,u)},t.prototype.toDirty=function(t){var n=this.Rs.canvas;return null!=n&&n.data.extended.toDirty(t)},t.prototype.each=function(t){var n=this.Rs.canvas;return null!=n?n.data.extended.each(t):null},t}(),Ju=function(){function t(t,n){this.Rs=t,this.ys=n&&n.mapper||null,this.ks=new Ku(n&&n.remote),this.Yt=new Wu(t),this.ps=new Xu(t),this.Ds=new Yu(t)}return t.prototype.update=function(){},Object.defineProperty(t.prototype,"mapper",{get:function(){return this.ys},set:function(t){this.ys=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remote",{get:function(){return this.ks},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"private",{get:function(){return this.Yt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"protected",{get:function(){return this.ps},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"extended",{get:function(){return this.Ds},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ids",{get:function(){var t=this.Rs.canvas;return t?t.data.ids:[]},enumerable:!1,configurable:!0}),t.prototype.each=function(t){var n=this.Rs.canvas;return null!=n?n.data.each(t):null},t.prototype.set=function(t,n,i,r,e,u){var s=this.Rs.canvas;return null!=s&&s.data.set(t,n,i,r,e,u)},t.prototype.get=function(t){var n=this.Rs.canvas;return null!=n?n.data.get(t):null},t.prototype.clear=function(t){var n=this.Rs.canvas;return null!=n&&n.data.clear(t)},t.prototype.toDirty=function(t){var n=this.Rs.canvas;return null!=n&&n.data.toDirty(t)},t.prototype.setAll=function(t,n,i,r,e,u){var s=this.Rs.canvas;return null!=s&&s.data.setAll(t,n,i,r,e,u)},t.prototype.setValue=function(t,n){var i=this.Rs.canvas;return null!=i&&i.data.setValue(t,n)},t.prototype.setValues=function(t,n){var i=this.Rs.canvas;return null!=i&&i.data.setValues(t,n)},t.prototype.setTime=function(t,n){var i=this.Rs.canvas;return null!=i&&i.data.setTime(t,n)},t.prototype.setTimes=function(t,n){var i=this.Rs.canvas;return null!=i&&i.data.setTimes(t,n)},t.prototype.setState=function(t,n){var i=this.Rs.canvas;return null!=i&&i.data.setState(t,n)},t.prototype.setStates=function(t,n){var i=this.Rs.canvas;return null!=i&&i.data.setStates(t,n)},t.prototype.setRange=function(t,n,i){var r=this.Rs.canvas;return null!=r&&r.data.setRange(t,n,i)},t}(),Zu=function(t){function n(n){var i=t.call(this,n)||this;i.on(he.move,(function(t){i.onShapeMove(t)})),i.on(he.up,(function(t){i.onShapeUp(t)})),i.on(he.upoutside,(function(t){i.onShapeCancel(t)})),i.on(he.cancel,(function(t){i.onShapeCancel(t)})),i.on(he.tap,(function(t){i.onShapeClick(t)})),i.on(he.righttap,(function(t){i.onShapeRightClick(t)})),i.on(he.rightdown,(function(t){i.onShapeRightDown(t)})),i.on(he.rightup,(function(t){i.onShapeRightUp(t)})),i.on(he.rightupoutside,(function(t){i.onShapeRightCancel(t)}));var r=new Ju(i,n&&(n.data||n.tag));return i.data=r,i.tag=r,i.shape=new Vu(i),i}return G(n,t),n.prototype.initLayer=function(n,i,r){return t.prototype.initLayer.call(this,n,i,r||this.data.mapper)},n.prototype.toMode=function(t){return Pi.VIEWER},n.prototype.newCanvas=function(t){return new zu(this.toCanvasOptions(t))},n.prototype.toCanvasOptions=function(t){return this.toCanvasBaseOptions(t)},n.prototype.onDown=function(n){var i=this.canvas;if(i){var r=n.target;r===this||r===i?t.prototype.onDown.call(this,n,i.onShapeDown(n)):t.prototype.onDown.call(this,n)}else t.prototype.onDown.call(this,n)},n.prototype.onShapeMove=function(t){var n=this.canvas;if(n){var i=t.target;i!==this&&i!==n||n.onShapeMove(t)}},n.prototype.onShapeUp=function(t){var n=this.canvas;if(n){var i=t.target;i!==this&&i!==n||n.onShapeUp(t)}},n.prototype.onShapeCancel=function(t){var n=this.canvas;if(n){var i=t.target;i!==this&&i!==n||n.onShapeCancel(t)}},n.prototype.onShapeClick=function(t){var n=this.canvas;if(n){var i=t.target;i!==this&&i!==n||n.onShapeClick(t)}},n.prototype.onShapeRightClick=function(t){var n=this.canvas;if(n){var i=t.target;i!==this&&i!==n||n.onShapeRightClick(t)}},n.prototype.onShapeRightDown=function(t){var n=this.canvas;if(n){var i=t.target;i!==this&&i!==n||n.onShapeRightDown(t)}},n.prototype.onShapeRightUp=function(t){var n=this.canvas;if(n){var i=t.target;i!==this&&i!==n||n.onShapeRightUp(t)}},n.prototype.onShapeRightCancel=function(t){var n=this.canvas;if(n){var i=t.target;i!==this&&i!==n||n.onShapeRightCancel(t)}},n.prototype.onDblClick=function(n,i){var r=this.canvas;return r?t.prototype.onDblClick.call(this,n,i,r.onShapeDblClick(n,i)):t.prototype.onDblClick.call(this,n,i)},n.prototype.render=function(n){this.shape.onRender(n),t.prototype.render.call(this,n)},n.prototype.getType=function(){return"DDiagram"},n}(mu),qu=function(){function t(){}return t.isDiagram=function(t){return t instanceof Zu},t.isEmbedded=function(t){return t instanceof qi},t.toDiagram=function(t){for(var n=t;null!=n;){if(this.isDiagram(n))return n;n=n.parent}return null},t.open=function(t,n,i,r,e){var u=je[n];if(null!=u){var s=this.toDiagram(t);s&&u(i,r,t,s,e)}else if(Tt(i))switch(n){case xi.DIAGRAM:var h=this.toDiagram(t);if(h){var o=h.controller;o&&o.getByName(i).then((function(t){h.set(Se.toSerialized(t))}))}break;case xi.PAGE:r?window.open(i):window.location.href=i}},t.writeLocal=function(t,n,i,r,e){var u;void 0===e&&(e=Wt.FOUND);for(var s=t;null!=s;){if(this.isDiagram(s))return(s.data.private.set(n,i,r,e)||s.data.protected.set(n,i,r,e)||!!s.data.set(n,i,r,e))&&(lt.update(s),!0);if(this.isEmbedded(s)&&(null===(u=s.data.getPrivate())||void 0===u?void 0:u.set(n,i,r,e)))return lt.update(s),!0;s=s.parent}return!1},t.writeRemote=function(t,n,i){var r=this.toDiagram(t);return!!r&&r.data.remote.set(n,i)},t.emit=function(n,i,r,e){var u=t.toDiagram(n);void 0===e?(n.emit(i,n),u&&u.shape.emit(i,n)):(n.emit(i,r,e,n),u&&u.shape.emit(i,r,e,n))},t}(),Qu=function(t){function n(n){var i=t.call(this,n,mn.NONE)||this;return i.name=pn.ofStringOrNull(n.name),i}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.name(t,i,On);null!=r&&qu.emit(t,r)}},n}(En),$u=function(t){function n(n,i){var r=t.call(this,kn.EMIT_EVENT,n)||this;return r.name=i,r}return G(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.name===i.name},n.prototype.toRuntime=function(){return new Qu(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.name);return t.addResource("[".concat(this.type,",").concat(n,",").concat(i,"]"))},n.deserialize=function(t,i){return new n(Ln.toResource(1,t,i.resources),Ln.toResource(2,t,i.resources))},n}(Rn),ts=function(t){function n(n){var i=t.call(this,n,mn.NONE)||this;return i.target=pn.ofStringOrNull(n.target),i}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.target(t,i,On);null!=r&&qu.emit(t,r)}},n}(En),ns={NO_POINTER_EVENTS:"NO_POINTER_EVENTS"},is=function(){function n(t){var n="http://www.w3.org/2000/svg",i=document.createElementNS(n,"svg");i.setAttribute("style","position: absolute;"),i.setAttribute("width","0px"),i.setAttribute("height","0px");var r=document.createElementNS(n,"defs"),e=document.createElementNS(n,"clipPath"),u="clipper_ex_".concat(Math.random().toString(32).substring(2));e.setAttribute("id",u),e.setAttribute("clipPathUnits","objectBoundingBox");var s=document.createElementNS(n,"path");this.Ls=s,this.xs="",s.setAttribute("clip-rule","evenodd"),e.appendChild(s),r.appendChild(e),i.appendChild(r),this.A=u,t.appendChild(i)}return Object.defineProperty(n.prototype,"id",{get:function(){return this.A},enumerable:!1,configurable:!0}),n.prototype.update=function(t,n,i){var r=this.toD(t,n,i);this.xs!=r&&(this.Ls.setAttribute("d",r),this.xs=r)},n.prototype.toD=function(i,r,e){var u,s;if(null==i)return"";var h=i.width,o=i.height,a=1e-4;if(h<a||o<a)return"";if(e.size<=0)return"M0,0 h1 v1 h-1z";var c=null!==(u=n.WORK_MATRIX)&&void 0!==u?u:n.WORK_MATRIX=new t.Matrix;null!=r?(c.copyFrom(r),c.invert()):c.identity(),c.translate(-i.x,-i.y),c.scale(1/h,1/o);for(var f=-1,l=2,v=-1,b=2,d="",g=c.a,m=c.b,w=c.c,O=c.d,p=c.tx,D=c.ty,E=null!==(s=n.WORK_RECTS)&&void 0!==s?s:n.WORK_RECTS=[],M=this.toRects(e,E),S=0;S<M;S+=4){var j=E[S+0],T=E[S+1],I=E[S+2],C=E[S+3],N=g*j+w*T+p,A=m*j+O*T+D,R=g*I+w*T+p,y=m*I+O*T+D,k=g*I+w*C+p,L=m*I+O*C+D,x=g*j+w*C+p,B=m*j+O*C+D;f=Math.min(f,N,R,k,x),l=Math.max(l,N,R,k,x),v=Math.min(v,A,y,L,B),b=Math.max(b,A,y,L,B);var _=N.toFixed(5),P=A.toFixed(5),U=R.toFixed(5),F=y.toFixed(5),G=k.toFixed(5),H=L.toFixed(5),z=x.toFixed(5),V=B.toFixed(5);d+=" M".concat(_,",").concat(P," L").concat(U,",").concat(F," L").concat(G,",").concat(H," L").concat(z,",").concat(V,"Z")}return"M".concat(f,",").concat(v," L").concat(l,",").concat(v," L").concat(l,",").concat(b," L").concat(f,",").concat(b,"Z")+d},n.prototype.toRects=function(t,n){for(var i=t.data,r=t.size<<2,e=0;e<r;e+=4){var u=i[e+0],s=i[e+1],h=i[e+2],o=i[e+3];u<h?(n[e+0]=u,n[e+2]=h):(n[e+0]=h,n[e+2]=u),s<o?(n[e+1]=s,n[e+3]=o):(n[e+1]=o,n[e+3]=s)}for(e=4;e<r;e+=4){u=n[e+0],s=n[e+1],h=n[e+2],o=n[e+3];for(var a=0;a<e;a+=4){var c=n[a+0],f=n[a+1],l=n[a+2],v=n[a+3],b=0,d=0;if(u<=c)if(h<=l){if(h<=c)continue;b=2,d=1}else d=3;else if(h<=l)b=3;else{if(l<=u)continue;b=1,d=2}var g,m,w=0,O=0;if(s<=f)if(o<=v){if(o<=f)continue;w=2,O=1}else O=3;else if(o<=v)w=3;else{if(v<=s)continue;w=1,O=2}if(4==(g=0===b||0===w?0:1===b||2===b?3===w?2:1:3===w?4:2)){e+4<r&&(n[e+0]=n[r+0],n[e+1]=n[r+1],n[e+2]=n[r+2],n[e+3]=n[r+3]),e-=4,r-=4;break}if(4!=(m=0===d||0===O?0:1===d||2===d?3===O?2:1:3===O?4:2))if(0===g)if(0===m){for(p=r-4;a<p;p-=4)n[p+4]=n[p+0],n[p+5]=n[p+1],n[p+6]=n[p+2],n[p+7]=n[p+3];0===d?(n[a+3]=s,n[a+4]=c,n[a+5]=o,n[a+6]=l,n[a+7]=v):(n[a+2]=u,n[a+4]=h,n[a+5]=f,n[a+6]=l,n[a+7]=v),e+=4,r+=4,a+=4}else 2===m&&(1===d?n[a+0]=h:2===d?n[a+2]=u:1===O?n[a+1]=o:2===O&&(n[a+3]=s));else if(1===g){for(p=r-4;a<p;p-=4)n[p+4]=n[p+0],n[p+5]=n[p+1],n[p+6]=n[p+2],n[p+7]=n[p+3];1===d?1===O?(n[a+0]=h,n[a+4]=c,n[a+5]=o,n[a+6]=h,n[a+7]=v):(n[a+0]=h,n[a+4]=c,n[a+5]=f,n[a+6]=h,n[a+7]=s):1===O?(n[a+2]=u,n[a+4]=u,n[a+5]=o,n[a+6]=l,n[a+7]=v):(n[a+2]=u,n[a+4]=u,n[a+5]=f,n[a+6]=l,n[a+7]=s),e+=4,r+=4,a+=4}else 2===g&&(1===b?(n[e+0]=l,u=l):2===b?(n[e+2]=c,h=c):1===w?(n[e+1]=v,s=v):2===w&&(n[e+3]=f,o=f));else{for(var p=a+4;p<r;p+=4)n[p-4]=n[p+0],n[p-3]=n[p+1],n[p-2]=n[p+2],n[p-1]=n[p+3];e-=4,r-=4,a-=4}}}return r},n}(),rs=function(){function t(){this.Vt=[],this.j=0,this.Or=0,this.Pi=!0}return Object.defineProperty(t.prototype,"data",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.j},enumerable:!1,configurable:!0}),t.prototype.isDirty=function(){return this.Pi},t.prototype.toClean=function(){this.Pi=!1},t.prototype.begin=function(){return this.Or=0,this},t.prototype.end=function(){var t=this.Or;this.j=t;var n=this.Vt,i=t<<2;return n.length!==i&&(n.length=i,this.Pi=!0),this},t.prototype.add=function(t,n,i,r){var e=this.Or<<2;this.Or+=1;var u=this.Vt;return e<u.length?u[e+0]===t&&u[e+1]===n&&u[e+2]===i&&u[e+3]===r||(u[e+0]=t,u[e+1]=n,u[e+2]=i,u[e+3]=r,this.Pi=!0):(u.push(t,n,i,r),this.Pi=!0),this},t}(),es={CLICKED:0,DOUBLE_CLICKED:1,FOCUSED:2,ALWAYS:3},us=function(){function n(t,n,i,r){var e=this;this.Pr=t,this.Bs=n;var u=this.toData(i,r);this.Vt=u,this._s=!1,this.Ps=function(t){e.onElementFocus(t)},this.Us=function(t){e.onBeforeFocus(t)},this.Fs=function(t){e.onAfterFocus(t)},this.Nu=!1,this.Gs=!1,this.Hs=function(){e.doSelect()},this.zs=this.Vt.when===es.ALWAYS,this.Vs=function(){e.updateElement(e.Ws)}}return n.prototype.toData=function(t,n){var i,r;return{element:this.toElementData(t,null==n?void 0:n.element),clipper:this.toClipperData(t,null==n?void 0:n.clipper),before:this.toBeforeData(t,null==n?void 0:n.before),after:this.toAfterData(t,null==n?void 0:n.after),when:rr(null!==(i=null==n?void 0:n.when)&&void 0!==i?i:t.getWhen(),es),select:null!==(r=null==n?void 0:n.select)&&void 0!==r?r:t.getSelect()}},n.prototype.toElementData=function(t,n){var i,r;return{creator:null!==(i=null==n?void 0:n.creator)&&void 0!==i?i:t.getElementCreator(),styler:null!==(r=null==n?void 0:n.styler)&&void 0!==r?r:this.newElementStyler(t)}},n.prototype.newElementStyler=function(t){return function(n,i,r,e,u,s,h){return t.setElementStyle(n,i,r,e,u,s,h)}},n.prototype.toClipperData=function(t,n){var i,r,e;return{creator:null!==(i=null==n?void 0:n.creator)&&void 0!==i?i:t.getClipperCreator(),styler:null!==(r=null==n?void 0:n.styler)&&void 0!==r?r:this.newClipperStyler(t),extended:null!==(e=null==n?void 0:n.extended)&&void 0!==e?e:t.isClipperExEnabled()}},n.prototype.newClipperStyler=function(t){return function(n,i,r,e,u,s,h){return t.setClipperStyle(n,i,r,e,u,s,h)}},n.prototype.toBeforeData=function(t,n){var i,r;return{creator:null!==(i=null==n?void 0:n.creator)&&void 0!==i?i:t.getBeforeCreator(),styler:null!==(r=null==n?void 0:n.styler)&&void 0!==r?r:this.newBeforeStyler(t)}},n.prototype.newBeforeStyler=function(t){return function(n){t.setBeforeStyle(n)}},n.prototype.toAfterData=function(t,n){var i,r;return{creator:null!==(i=null==n?void 0:n.creator)&&void 0!==i?i:t.getAfterCreator(),styler:null!==(r=null==n?void 0:n.styler)&&void 0!==r?r:this.newAfterStyler(t)}},n.prototype.newAfterStyler=function(t){return function(n){t.setAfterStyle(n)}},Object.defineProperty(n.prototype,"element",{get:function(){var t;return null!==(t=this.qu)&&void 0!==t?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"when",{get:function(){return this.Vt.when},enumerable:!1,configurable:!0}),n.prototype.onDowning=function(t){switch(this.Gs=this.Nu,this.when){case es.CLICKED:this.start();break;case es.FOCUSED:this.Pr.state.isFocused&&this.start()}},n.prototype.onDown=function(t){!this.Gs&&this.Nu&&("data"in t?t.data.originalEvent.preventDefault():t.preventDefault())},n.prototype.onDblClick=function(t,n){switch(this.when){case es.DOUBLE_CLICKED:this.start()}},n.prototype.onFocus=function(){var t;switch(this.when){case es.FOCUSED:this.start();break;default:null===(t=this.qu)||void 0===t||t.focus()}},n.prototype.onBlur=function(){var t;switch(this.when){case es.CLICKED:case es.DOUBLE_CLICKED:case es.FOCUSED:this.onEndByBlur(),this.cancel();break;default:null===(t=this.qu)||void 0===t||t.blur()}},n.prototype.isStartable=function(){switch(this.when){case es.CLICKED:case es.DOUBLE_CLICKED:case es.FOCUSED:return this.Pr.state.isActionable;default:return!0}},n.prototype.start=function(){!this.Nu&&this.isStartable()&&(this.Nu=!0,this.Pr.worldVisible?this.doStart():this.zs=!0,lt.update(this.Pr))},n.prototype.isShown=function(){return this._s},n.prototype.onRender=function(t){(this.zs||!this._s&&this.when===es.ALWAYS)&&(this.zs=!1,this.doStart(t)),this.Nu&&(this.Nu=!1)},n.prototype.getElementRect=function(n){var i=this.Le||new t.Point(0,0);this.Le=i;var r=this.Xs||new t.Rectangle;return this.Xs=r,this.Bs.getElementRect(n,i,r)},n.prototype.getElementMatrix=function(){return this.Bs.getElementMatrix()},n.prototype.getClipperRect=function(n){var i=this.Le||new t.Point(0,0);this.Le=i;var r=this.Ks||new t.Rectangle;return this.Ks=r,this.Bs.getClipperRect(n,i,r)},n.prototype.fillClipperExRects=function(t,n){var i=this.Bs;return i.getClipperExRects&&i.getClipperExRects(n),n.isDirty()},n.prototype.doStart=function(t){var n,i;if(!this._s){this._s=!0;var r=this.Ws;null!=r&&(this.Ws=void 0,r.off("postrender",this.Vs));var e=this.Pr;null==t&&(t=null===(n=lt.getLayer(e))||void 0===n?void 0:n.renderer),t&&(this.Ws=t,t.on("postrender",this.Vs)),this.onStart();var u=this.getClipper();if(u){var s=this.getBefore(u),h=this.getElement(u),o=this.getAfter(u),a=this.getClipperEx(u);if(h){var c=null!==(i=null==t?void 0:t.resolution)&&void 0!==i?i:lt.getResolution(e),f=this.getElementRect(c),l=this.getElementMatrix(),v=this.toClipperRectAdjusted(f,l,this.getClipperRect(c)),b=e.state,d=this.Bs.getPadding(),g=this.Vt;if(g.clipper.styler(u,b,d,f,l,v,a),g.element.styler(h,b,d,f,l,v,a),s&&g.before.styler(s),o&&g.after.styler(o),this.onElementAttached(h,s,o),a){var m=this.getClipperExRects();m&&this.fillClipperExRects(c,m)&&(a.update(f,l,m),m.toClean())}u.style.display="",b.isFocused&&this.toElementFocused(h),u.scrollTop=0,u.scrollLeft=0,this.Vt.select&&setTimeout(this.Hs,0)}}}},n.prototype.toElementFocused=function(t){t.focus({preventScroll:!0})},n.prototype.onStart=function(){this.Bs.onStart()},n.prototype.doSelect=function(){var t=this.qu;t&&(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement)&&t.select()},n.prototype.cancel=function(){var t;if(this._s){this._s=!1;var n=this.Ws;null!=n&&(this.Ws=void 0,n.off("postrender",this.Vs)),this.onCancel();var i=this.Pr,r=lt.getLayer(i);if(r){var e=r.view;switch(this.when){case es.CLICKED:case es.DOUBLE_CLICKED:case es.FOCUSED:document.activeElement===this.qu&&e.focus()}var u=i.state,s=r.renderer.plugins.interaction;this.Bs.containsPoint(s.mouse.global)&&!u.isHovered&&(u.isHovered=!0,e.style.cursor=null!==(t=i.cursor)&&void 0!==t?t:""),r.update()}var h=this.qu;null!=h&&this.onElementDetached(h,this.Ys,this.Js);var o=this.Zs;null!=o&&(o.style.display="none")}},n.prototype.onCancel=function(){this.Bs.onCancel()},n.prototype.onElementAttached=function(t,n,i){null==n||n.addEventListener("focus",this.Us),null==i||i.addEventListener("focus",this.Fs),t.addEventListener("focus",this.Ps,!0)},n.prototype.onElementDetached=function(t,n,i){null==n||n.removeEventListener("focus",this.Us),null==i||i.removeEventListener("focus",this.Fs),t.removeEventListener("focus",this.Ps,!0)},n.prototype.getClipper=function(){var t=this.Zs;if(null==t){var n=lt.getLayer(this.Pr);t=n?this.Vt.clipper.creator(n.getElementContainer()):null,this.Zs=t}return t},n.prototype.getClipperEx=function(t){var n=this.qs;return void 0===n&&(n=null!=this.getClipperExRects()?new is(t):null,this.qs=n),n},n.prototype.getClipperExRects=function(){var t=this.Qs;return void 0===t&&(t=this.Vt.clipper.extended?new rs:null,this.Qs=t),t},n.prototype.getElement=function(t){var n=this.qu;return null==n&&(n=this.Vt.element.creator(t),this.qu=n),n},n.prototype.getBefore=function(t){var n=this.Ys;return null==n&&(n=this.Vt.before.creator(t),this.Ys=n),n},n.prototype.getAfter=function(t){var n=this.Js;return null==n&&(n=this.Vt.after.creator(t),this.Js=n),n},n.prototype.onBeforeFocus=function(t){var n=this.Pr,i=lt.getLayer(n);if(i){var r=i.getFocusController(),e=r.find(n,!1,!1,!1);i.view.focus(),r.focus(e),t.preventDefault(),t.stopImmediatePropagation()}},n.prototype.onAfterFocus=function(t){var n=this.Pr,i=lt.getLayer(n);if(i){var r=i.getFocusController(),e=r.find(n,!1,!1,!0);i.view.focus(),r.focus(e),t.preventDefault(),t.stopImmediatePropagation()}},n.prototype.onElementFocus=function(t){if(this.when===es.ALWAYS){var n=this.Pr;n.state.isFocused||n.focus()}},n.prototype.onEndByBlur=function(){this.onEnd()},n.prototype.onEnd=function(){this.Bs.onEnd()},n.prototype.end=function(){this.onEnd(),this.cancel()},n.prototype.select=function(){return this._s&&this.Vt.select&&this.doSelect(),this},n.prototype.toClipperRectAdjusted=function(t,n,i){if(i&&t&&null==n){var r=t.x,e=t.y,u=r+t.width,s=e+t.height,h=i.x,o=i.y,a=h+i.width,c=o+i.height,f=Math.min(Math.max(h,r),a),l=Math.min(Math.max(h,u),a),v=Math.min(Math.max(o,e),c),b=Math.min(Math.max(o,s),c);i.x=f,i.y=v,i.width=l-f,i.height=b-v}return i},n.prototype.updateElement=function(t){if(this._s){var n=this.Pr;if(n.worldVisible){var i=this.qu,r=this.Zs,e=this.qs;if(i&&r){var u=t.resolution,s=this.getElementRect(u),h=this.getElementMatrix(),o=this.toClipperRectAdjusted(s,h,this.getClipperRect(u)),a=n.state,c=this.Bs.getPadding(),f=this.Vt;if(f.clipper.styler(r,a,c,s,h,o,e),f.element.styler(i,a,c,s,h,o,e),e){var l=this.getClipperExRects();l&&this.fillClipperExRects(u,l)&&(e.update(s,h,l),l.toClean())}}}else switch(this.when){case es.ALWAYS:(r=this.Zs)&&(r.style.display="none");break;default:this.cancel()}}},n.getClipperRect=function(t,n,i,r,e){for(var u=!0,s=0,h=0,o=0,a=0,c=t;c instanceof ru;){c.getClippingRect(n,e),r.set(e.x,e.y),c.toGlobal(r,r,!1);var f=(r.x*i|0)/i,l=(r.y*i|0)/i;r.set(e.x+e.width,e.y+e.height),c.toGlobal(r,r,!0);var v=r.x,b=r.y,d=Math.min(f,v),g=Math.min(l,b),m=Math.max(f,v),w=Math.max(l,b);u?(u=!1,s=d,h=g,o=m,a=w):(s=Math.min(Math.max(s,d),m),h=Math.min(Math.max(h,g),w),o=Math.min(Math.max(o,d),m),a=Math.min(Math.max(a,g),w)),c=c.parent}return u?null:(e.x=s,e.y=h,e.width=o-s,e.height=a-h,e)},n}(),ss=!1,hs=function(){return ss},os=function(n){function i(t){var i=n.call(this)||this;return i.condition=pn.ofString(t.condition),i.utils=new Map,i}return G(i,n),i.prototype.getUtil=function(t,n){var i=this.utils,r=i.get(t);return null==r&&(r=this.newUtil(t,n),i.set(t,r)),r},i.prototype.newUtil=function(t,n){return new us(t,this.newOperation(t,n),it.getInstance().get("DHtmlElement"),this.newUtilOptions(t,n))},i.prototype.newOperation=function(t,n){var i=this;return{getElementRect:function(r,e,u){return i.getElementRect(t,n,r,e,u)},getElementMatrix:function(){return i.getElementMatrix(t,n)},getClipperRect:function(r,e,u){return i.getClipperToRect(t,n,r,e,u)},getClipperExRects:function(n){i.getClipperExRects(t,n)},getPadding:function(){return i.getPadding(t,n)},containsPoint:function(r){return i.containsPoint(t,n,r)},onStart:function(){},onCancel:function(){},onEnd:function(){}}},i.prototype.newUtilOptions=function(t,n){return{element:{creator:this.newElementCreator(t,n)},when:this.toWhen(t,n),clipper:{extended:hs()}}},i.prototype.toWhen=function(t,n){var i=this.condition(t,Date.now(),On);if(null!=i&&i in es)return es[i]},i.prototype.containsPoint=function(n,r,e){var u;if(n.visible){var s=null!==(u=i.WORK)&&void 0!==u?u:i.WORK=new t.Point;return n.toLocal(e,void 0,s),null!=n.contains(s.x,s.y)}return!1},i.prototype.getPadding=function(t,n){return null},i.prototype.getElementRect=function(t,n,i,r,e){var u=t.transform.pivot,s=t.size,h=s.x,o=s.y;return e.x=-.5*h+u.x,e.y=-.5*o+u.y,e.width=h,e.height=o,e},i.prototype.getElementMatrix=function(t,n){return t.updateTransform(),t.transform.worldTransform},i.prototype.getClipperToRect=function(t,n,i,r,e){var u=qu.toDiagram(t);return us.getClipperRect(u,t,i,r,e)},i.prototype.getClipperExRects=function(t,n){n.begin();var i=t.root.parent;if(i instanceof Tu){var r=i.parent;if(null!=r){var e=r.children,u=e.indexOf(i);if(0<=u)for(var s=u+1,h=e.length;s<h;++s){var o=e[s];if(o.visible){var a=o.width,c=o.height,f=o.transform.worldTransform,l=f.a,v=f.b,b=f.c,d=f.d,g=f.tx,m=f.ty;n.add(g,m,l*a+b*c+g,v*a+d*c+m)}}}}n.end()},i.prototype.onRender=function(t,n,i,r){this.getUtil(t,n).onRender(r)},i.prototype.onFocus=function(t,n){this.getUtil(t,n).onFocus()},i.prototype.onBlur=function(t,n){this.getUtil(t,n).onBlur()},i.prototype.onDowning=function(t,n,i){this.getUtil(t,n).onDowning(i)},i.prototype.onDown=function(t,n,i){this.getUtil(t,n).onDown(i)},i.prototype.onDblClick=function(t,n,i,r){this.getUtil(t,n).onDblClick(i,r)},i}(Dn),as=function(t){function n(n){var i=t.call(this,n)||this;return i.elementCreator=pn.ofElementOrNull(n.value),i.noPointerEvent=n.subtype===Oe.HTML_ELEMENT_WITHOUT_POINTER_EVENTS,i}return G(n,t),n.prototype.newUtil=function(n,i){return this.noPointerEvent&&n.state.add(ns.NO_POINTER_EVENTS),t.prototype.newUtil.call(this,n,i)},n.prototype.newElementCreator=function(t,n){var i=this.elementCreator;if(i)return function(n){return i(t,Date.now(),On,n)}},n}(os),cs=function(t){function n(n,i,r,e){var u,s,h,o,a,c,f=t.call(this,n,i,r,e)||this;f.Bs=i,f.$s=function(t){f.onInputKeyDown(t)},f.th=function(){f.onInputChange()},f.nh=function(t){f.onInputInput(t)},f.bs=null!==(u=null==e?void 0:e.description)&&void 0!==u?u:"";var l=null==e?void 0:e.editing;return f.ih=null!==(o=null!==(s=null==l?void 0:l.formatter)&&void 0!==s?s:null===(h=null==e?void 0:e.text)||void 0===h?void 0:h.formatter)&&void 0!==o?o:r.getEditingFormatter(),f.rh=null!==(a=null==l?void 0:l.unformatter)&&void 0!==a?a:r.getEditingUnformatter(),f.eh=null!==(c=null==l?void 0:l.validator)&&void 0!==c?c:r.getEditingValidator(),f}return G(n,t),n.prototype.onEnd=function(){t.prototype.onEnd.call(this),this.onInputChange()},n.prototype.onElementAttached=function(n,i,r){n.value=this.fromValue(this.Bs.getValue()),n.addEventListener("change",this.th),n.addEventListener("input",this.nh),t.prototype.onElementAttached.call(this,n,i,r)},n.prototype.onElementDetached=function(n,i,r){t.prototype.onElementDetached.call(this,n,i,r),n.removeEventListener("change",this.th),n.removeEventListener("input",this.nh)},n.prototype.onInputKeyDown=function(t){Qe.isOkKey(t)?(this.end(),this.Bs.onEnter()):Qe.isCancelKey(t)&&this.cancel()},n.prototype.toElementFocused=function(n){t.prototype.toElementFocused.call(this,n),n.scrollTop=0,n.scrollLeft=0},n.prototype.onInputChange=function(){if(this.isShown()){var t=this.element;if(null!=t){var n=this.Bs,i=this.toValue(t.value),r=n.getValue();r!==i&&n.onValueChange(i,r)}}},n.prototype.toValue=function(t){return this.rh(t,this)},n.prototype.fromValue=function(t){return void 0!==t?this.ih(t,this):""},n.prototype.onInputInput=function(t){var n=t.target;(n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement)&&this.Bs.onValueInput(this.toValue(n.value))},n.prototype.validate=function(){var t=this.Bs.getValue();if(void 0!==t){var n=this.eh(t,this);if(this.uh!==n){this.uh=n;var i=this.Pr.state;i.isInvalid=null!=n,i.isHovered&&this.Bs.applyTitle()}return n}return null},n.prototype.applyTitle=function(){var t=this.uh;if(Tt(t)){var n=lt.getLayer(this.Pr);return n&&(n.view.title=t),!0}return!1},n}(us),fs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.onElementAttached=function(n,i,r){n.addEventListener("keydown",this.$s),t.prototype.onElementAttached.call(this,n,i,r)},n.prototype.onElementDetached=function(n,i,r){n.removeEventListener("keydown",this.$s),t.prototype.onElementDetached.call(this,n,i,r)},n}(cs),ls=function(t){function n(n,i,r,e){var u,s,h,o=t.call(this,n,i,r,e)||this;return o.sh=null!==(u=null==e?void 0:e.step)&&void 0!==u?u:r.getStep(),o.hh=null!==(s=null==e?void 0:e.min)&&void 0!==s?s:r.getMin(),o.oh=null!==(h=null==e?void 0:e.max)&&void 0!==h?h:r.getMax(),o}return G(n,t),Object.defineProperty(n.prototype,"step",{get:function(){return this.sh},set:function(t){this.sh!==t&&(this.sh=t,this.onStepChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"min",{get:function(){return this.hh},set:function(t){this.hh!==t&&(this.hh=t,this.onMinChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"max",{get:function(){return this.oh},set:function(t){this.oh!==t&&(this.oh=t,this.onMaxChange())},enumerable:!1,configurable:!0}),n.prototype.toValue=function(n){var i=t.prototype.toValue.call(this,n);if(i==i){var r=this.hh;if(null!=r&&i<r)return r;var e=this.oh;return null!=e&&e<i?e:i}return 0},n.prototype.fromValue=function(t){return void 0!==t?this.ih(t,this):"0"},n.prototype.onStepChange=function(){if(this.isShown()){var t=this.element;t&&this.updateStep(t)}},n.prototype.onMinChange=function(){if(this.isShown()){var t=this.element;t&&this.updateMin(t)}},n.prototype.onMaxChange=function(){if(this.isShown()){var t=this.element;t&&this.updateMax(t)}},n.prototype.updateStep=function(t){var n=this.step;t.step=null!=n?"".concat(n):"any"},n.prototype.updateMin=function(t){var n=this.min;null!=n?t.min="".concat(n):t.removeAttribute("min")},n.prototype.updateMax=function(t){var n=this.max;null!=n?t.max="".concat(n):t.removeAttribute("max")},n.prototype.onElementAttached=function(n,i,r){n.type="number",t.prototype.onElementAttached.call(this,n,i,r),this.updateStep(n),this.updateMin(n),this.updateMax(n)},n}(fs),vs={EMIT_EVENT:0,WRITE_BOTH:1,WRITE_LOCAL:2,WRITE_REMOTE:3},bs=function(){function t(){}return t.execute=function(t,n,i,r,e){switch(n){case vs.EMIT_EVENT:t.emit(i,t,r),qu.emit(t,i,r,e);break;case vs.WRITE_LOCAL:qu.writeLocal(t,i,r,e);break;case vs.WRITE_REMOTE:qu.writeRemote(t,i,r);break;case vs.WRITE_BOTH:qu.writeLocal(t,i,r,e),qu.writeRemote(t,i,r)}},t}(),ds=function(t){function n(n){var i=t.call(this,n)||this;return i.target=pn.ofStringOrNull(n.target),i.onInputAction=n.onInputAction,i}return G(n,t),n.prototype.newOperation=function(t,n){var i=this;return{getElementRect:function(r,e,u){return i.getElementRect(t,n,r,e,u)},getElementMatrix:function(){return i.getElementMatrix(t,n)},getClipperRect:function(r,e,u){return i.getClipperToRect(t,n,r,e,u)},getClipperExRects:function(n){i.getClipperExRects(t,n)},getPadding:function(){return i.getPadding(t,n)},containsPoint:function(r){return i.containsPoint(t,n,r)},onStart:function(){t.text.enable=!1},onCancel:function(){t.text.enable=!0},onEnd:function(){},getValue:function(){return i.getUtil(t,n).toValue(t.text.value)},onValueInput:function(t){},onValueChange:function(r,e){i.onValueChange(t,n,r,e)},onEnter:function(){},applyTitle:function(){}}},n.prototype.newElementCreator=function(t,n){},n.prototype.getPadding=function(t,n){return t.text.padding},n.prototype.onValueChange=function(t,n,i,r){t.text.value=this.getUtil(t,n).fromValue(i);var e=Date.now(),u=this.target(t,e,On);null!=u&&bs.execute(t,this.onInputAction,u,i,e)},n}(os),gs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n}(ds),ms=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n}(gs),ws=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newUtil=function(t,n){return new ls(t,this.newOperation(t,n),it.getInstance().get("DInputInteger"),this.newUtilOptions(t,n))},n}(ms),Os=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newUtil=function(t,n){return new ls(t,this.newOperation(t,n),it.getInstance().get("DInputReal"),this.newUtilOptions(t,n))},n}(ms),ps=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.onElementAttached=function(n,i,r){n.type="text",t.prototype.onElementAttached.call(this,n,i,r)},n}(fs),Ds=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newUtil=function(t,n){return new ps(t,this.newOperation(t,n),it.getInstance().get("DInputText"),this.newUtilOptions(t,n))},n}(gs),Es=function(t){function n(n){var i=t.call(this,n,mn.NONE)||this;return i.target=pn.ofStringOrNull(n.target),i.value=pn.ofUnknown(n.value),i}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.target(t,i,On);null!=r&&this.write(t,r,this.value(t,i,On),i)}},n}(En),Ms=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.write=function(t,n,i,r){qu.writeLocal(t,n,i,r),qu.writeRemote(t,n,i)},n}(Es),Ss=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.write=function(t,n,i,r){qu.writeLocal(t,n,i,r)},n}(Es),js=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.write=function(t,n,i,r){qu.writeRemote(t,n,i)},n}(Es),Ts=function(t){function n(n,i,r,e,u){var s=t.call(this,kn.MISC,i,n)||this;return s.target=r,s.onInputAction=e,s.value=u,s}return G(n,t),n.prototype.toRuntime=function(){switch(this.subtype){case Oe.INPUT_TEXT:return new Ds(this);case Oe.INPUT_INTEGER:return new ws(this);case Oe.INPUT_REAL:return new Os(this);case Oe.EMIT_EVENT:return new ts(this);case Oe.WRITE_BOTH:return new Ms(this);case Oe.WRITE_LOCAL:return new Ss(this);case Oe.WRITE_REMOTE:return new js(this);case Oe.HTML_ELEMENT:case Oe.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:return new as(this)}},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.target),r=t.addResource(this.value);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,",").concat(this.onInputAction,",").concat(r,"]"))},n.deserialize=function(t,i){var r=i.resources,e=Ln.toResource(1,t,r),u=Ln.toResource(3,t,r),s=Ln.toResource(5,t,r);return new n(t[2],e,u,t[4],s)},n}(yn),Is=function(t){function n(n){var i=t.call(this,n,mn.NONE)||this;return i.target=pn.ofUnknown(n.target),i}return G(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i,On)&&this.target(t,i,On)},n}(En),Cs=function(t){function n(n,i){var r=t.call(this,kn.MISC,n,Oe.EXECUTE)||this;return r.target=i,r}return G(n,t),n.prototype.toRuntime=function(){return new Is(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.target);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,"]"))},n.deserialize=function(t,i){var r=i.resources;return new n(Ln.toResource(1,t,r),Ln.toResource(3,t,r))},n}(yn),Ns=function(){function t(){}return t.add=function(t){var n,i;(null!==(n=this.Ms)&&void 0!==n?n:this.Ms=new Map).set(t.type,t),(null!==(i=this.Vt)&&void 0!==i?i:this.Vt=[]).push(t)},t.get=function(t){var n=this.Ms;if(null!=n)return n.get(t)},t.each=function(t){var n=this.Vt;if(null!=n)for(var i=0,r=n.length;i<r;++i)t(n[i])},t}(),As=function(t){function n(n){var i=t.call(this,n,mn.NONE)||this;return i.argument=pn.ofUnknown(n.argument),i.extension=Ns.get(n.subtype),i}return G(n,t),n.prototype.execute=function(t,n,i){var r=this.extension;if(null!=r&&this.condition(t,i,On)){var e=qu.toDiagram(t);null!=e&&r.executor(this.argument(t,i,On),t,e,On)}},n}(En),Rs=function(t){function n(n,i,r){var e=t.call(this,kn.MISC,i,n)||this;return e.argument=r,e}return G(n,t),n.prototype.toRuntime=function(){return new As(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.argument);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,"]"))},n.deserialize=function(t,i){var r=i.resources,e=Ln.toResource(1,t,r),u=Ln.toResource(3,t,r);return new n(t[2],e,u)},n}(yn),ys=function(t){function n(n,i){var r=t.call(this,n,mn.NONE)||this;return r.subtype=i,r.target=pn.ofUnknown(n.target),r.inNewWindow=n.inNewWindow,r}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.target(t,i,On);null!=r&&qu.open(t,this.subtype,r,this.inNewWindow,On)}},n}(En),ks={DIAGRAM_LEGACY:0,PAGE_LEGACY:1,PAGE_INPLACE_LEGACY:2,DIALOG_TEXT:3,DIALOG_INTEGER:4,DIALOG_REAL:5,DIALOG_BOOLEAN:6,DIALOG_DATE:7,DIALOG_TIME:8,DIALOG_DATETIME:9,DIAGRAM:10,PAGE:11,DIALOG:12,EXTENSION:xi.EXTENSION},Ls=function(t){function n(n,i,r,e){var u=t.call(this,kn.OPEN,i,n)||this;return u.target=r,u.inNewWindow=e,u}return G(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.target===i.target&&this.inNewWindow===i.inNewWindow},n.prototype.toRuntime=function(){switch(this.subtype){case ks.DIAGRAM:return new ys(this,xi.DIAGRAM);case ks.PAGE:return new ys(this,xi.PAGE)}},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.target),r=this.inNewWindow?1:0;return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,",").concat(r,"]"))},n.deserialize=function(t,i){var r=Ln.toResource(1,t,i.resources),e=Ln.toResource(3,t,i.resources);return new n(this.toSubType(t),r,e,this.inNewWindow(t))},n.toSubType=function(t){switch(t[2]){case ks.DIAGRAM_LEGACY:return ks.DIAGRAM;case ks.PAGE_LEGACY:case ks.PAGE_INPLACE_LEGACY:return ks.PAGE;case ks.DIAGRAM:return ks.DIAGRAM;case ks.PAGE:return ks.PAGE}return ks.DIAGRAM},n.inNewWindow=function(t){switch(t[2]){case ks.DIAGRAM_LEGACY:return!1;case ks.PAGE_LEGACY:return!0;case ks.PAGE_INPLACE_LEGACY:return!1;case ks.DIAGRAM:case ks.PAGE:return!!t[4]}return!1},n}(yn),xs={TOP:0,TOP_LEFT:1,TOP_CENTER:2,TOP_RIGHT:3,LEFT:4,LEFT_TOP:5,LEFT_MIDDLE:6,LEFT_BOTTOM:7,RIGHT:8,RIGHT_TOP:9,RIGHT_MIDDLE:10,RIGHT_BOTTOM:11,BOTTOM:12,BOTTOM_LEFT:13,BOTTOM_CENTER:14,BOTTOM_RIGHT:15,OVER:16,NONE:17},Bs=function(){function t(){}return t.attach=function(t,n,i,r,e,u,s){if(s!==xs.NONE){var h=t.width,o=t.height,a=0;switch(s){case xs.LEFT:case xs.LEFT_TOP:case xs.LEFT_MIDDLE:case xs.LEFT_BOTTOM:(a=n.left-h-i)<i&&e-i<(a=n.right+i)+h&&(a=i);break;case xs.RIGHT:case xs.RIGHT_TOP:case xs.RIGHT_MIDDLE:case xs.RIGHT_BOTTOM:e-i<(a=n.right+i)+h&&(a=n.left-h-i)<i&&(a=e-h-i);break;case xs.TOP:case xs.TOP_LEFT:case xs.BOTTOM:case xs.BOTTOM_LEFT:a=this.adjust(n.left,h,i,e);break;case xs.TOP_RIGHT:case xs.BOTTOM_RIGHT:a=this.adjust(n.right-h,h,i,e);break;case xs.TOP_CENTER:case xs.BOTTOM_CENTER:case xs.OVER:a=this.adjust(.5*(n.left+n.right-h),h,i,e)}var c=0;switch(s){case xs.LEFT:case xs.LEFT_TOP:case xs.RIGHT:case xs.RIGHT_TOP:c=this.adjust(n.top,o,r,u);break;case xs.LEFT_MIDDLE:case xs.RIGHT_MIDDLE:case xs.OVER:c=this.adjust(.5*(n.top+n.bottom-o),o,r,u);break;case xs.LEFT_BOTTOM:case xs.RIGHT_BOTTOM:c=this.adjust(n.bottom,o,r,u);break;case xs.TOP:case xs.TOP_LEFT:case xs.TOP_RIGHT:case xs.TOP_CENTER:(c=n.top-o-r)<r&&u<(c=n.bottom+r)+o&&(c=r);break;case xs.BOTTOM:case xs.BOTTOM_LEFT:case xs.BOTTOM_RIGHT:case xs.BOTTOM_CENTER:u-r<(c=n.bottom+r)+o&&(c=n.top-o-r)<r&&(c=u-o-r)}t.position.set(a,c)}},t.adjust=function(t,n,i,r){return t<i?r-i<t+n?.5*(r-n):i:r-i<t+n?r<n?.5*(r-n):r-n-i:t},t}(),_s={NONE:0,ESC:1,CLICK_OUTSIDE:2},Ps={DIRTY:0,CLEAN:1},Us=function(){function n(t,n){var i;this.g=t,this.tu=n,n.enable&&(this.ah=this.newUtil()),this._n=rr(null!==(i=n.mode)&&void 0!==i?i:Ps.DIRTY,Ps),this.fh=!0,this.Pi=!1}return Object.defineProperty(n.prototype,"parent",{get:function(){return this.g},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"mode",{get:function(){return this._n},set:function(t){this._n=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"constraint",{get:function(){var t,n,i=this.wu;return null==i&&(i=null!==(n=null===(t=this.tu)||void 0===t?void 0:t.constraint)&&void 0!==n?n:this.newConstraint(),this.wu=i),i},set:function(t){this.wu=t},enumerable:!1,configurable:!0}),n.prototype.newConstraint=function(){var t=this;return function(n,i,r,e){t.toConstrained(n,i,r,e)}},n.prototype.isDirty=function(){return this.Pi},n.prototype.isClean=function(){return!this.Pi},n.prototype.toClean=function(){this.Pi&&(this.Pi=!1)},n.prototype.newUtil=function(){var n=this,i=new t.Point,r=this.g,e=r.position;return new be({bind:r,checker:{start:function(t){if(t.target!==r)return!1;i.copyFrom(t.data.global),r.toLocal(i,void 0,i,!0);var n=i.x,e=i.y;return!(n<0||e<0||r.width<n||r.height<e)}},on:{start:function(){i.copyFrom(e)},move:function(t,u,s){i.set(i.x+u,i.y+s),n.Pi||(n.Pi=!0,r.setX(e.x),r.setY(e.y));var h=r.layer;null!=h&&n.constraint(r,h,i.x,i.y)}}})},n.prototype.toConstrained=function(i,r,e,u){var s,h=i.position;if(r){var o=i.getBounds(!1,null!==(s=n.WORK_BOUNDS)&&void 0!==s?s:n.WORK_BOUNDS=new t.Rectangle),a=o.x+e-h.x,c=o.y+u-h.y,f=Math.min(Math.max(0,a),r.width-o.width),l=Math.min(Math.max(0,c),r.height-o.height);h.set(e+f-a,u+l-c)}else h.set(e,u)},n}(),Fs={MODAL:0,MODELESS:1,MENU:2},Gs={MODAL:"MODAL",MODELESS:"MODELESS",MENU:"MENU"},Hs=function(){function n(){}return n.apply=function(t,n){var i=this;t.on(he.down,(function(r){if(r.target===t){var e=i.point;e.copyFrom(r.data.global),t.toLocal(e,void 0,e,!0);var u=e.x,s=e.y;(u<0||s<0||t.width<u||t.height<s)&&setTimeout((function(){n(r)}),0)}}))},n.point=new t.Point,n}(),zs=function(){function t(t){this.cs=null,this.lh=null==(null==t?void 0:t.parent)?lt.last():null}return Object.defineProperty(t.prototype,"picked",{get:function(){return this.cs},enumerable:!1,configurable:!0}),t.prototype.pick=function(t,n){var i=this.cs;if(null==i){if(null==(i=lt.getLayerOverlay(t))&&null!=n&&(i=lt.getLayerOverlay(n)),null==i){var r=this.lh;i=r?r.getLayerOverlay():lt.last().getLayerOverlay()}this.cs=i}return i},t}(),Vs=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return G(i,n),i.prototype.init=function(t){var i,r,e=this;n.prototype.init.call(this,t),this.bh=function(){e.onPrerender()},this.cs=null;var u=this.theme,s=rr(null!==(i=null==t?void 0:t.mode)&&void 0!==i?i:u.getMode(),Fs);this._n=s,this.dh=null!==(r=null==t?void 0:t.sticky)&&void 0!==r?r:u.isSticky(s);var h=this.toCloseOn(s,u,t);switch(this.gh=h,this.Rt=this.toAlign(s,u,t),this.mh=new zs,this.Yu=new Us(this,this.toGestureOptions(s,u,t)),this.visible=!1,s){case Fs.MODAL:this.state.addAll(gt.FOCUS_ROOT,Gs.MODAL);break;case Fs.MODELESS:this.state.add(Gs.MODELESS);break;case Fs.MENU:this.state.addAll(gt.FOCUS_ROOT,Gs.MENU)}h&_s.CLICK_OUTSIDE&&Hs.apply(this,(function(){e.onCloseOn()}))},i.prototype.toCloseOn=function(t,n,i){var r=null==i?void 0:i.closeOn;if(null==r)return n.closeOn(t);if(Mt(r)){for(var e=_s.NONE,u=0,s=r.length;u<s;++u)e|=_s[r[u]];return e}return Tt(r)?_s[r]:r},i.prototype.toAlign=function(t,n,i){var r=null==i?void 0:i.align;return null===r?null:void 0===r?n.getAlign(t):rr(r,xs)},Object.defineProperty(i.prototype,"mode",{get:function(){return this._n},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"align",{get:function(){return this.Rt},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"algin",{set:function(t){this.Rt=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"gesture",{get:function(){return this.Yu},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"layer",{get:function(){return this.cs},enumerable:!1,configurable:!0}),i.prototype.toGestureOptions=function(t,n,i){var r=null==i?void 0:i.gesture;return!0===r?{enable:!0,mode:n.getGestureMode(t)}:!1===r?{enable:!1,mode:n.getGestureMode(t)}:null!=r?(void 0===r.enable&&(r.enable=n.isGestureEnabled(t)),void 0===r.mode&&(r.mode=n.getGestureMode(t)),r):{enable:n.isGestureEnabled(t),mode:n.getGestureMode(t)}},i.prototype.onParentResize=function(t,i,r){if(this.isOpened()){var e=this.cs;if(null!=e){var u=this.Yu;if(u.isDirty()){var s=this.position;u.constraint(this,e,s.x,s.y)}}}n.prototype.onParentResize.call(this,t,i,r)},i.prototype.getAnimation=function(){var t,n,i=this,r=this.ee;return void 0===r&&((r=null!==(n=null===(t=this.tu)||void 0===t?void 0:t.animation)&&void 0!==n?n:this.theme.newAnimation(this._n))&&(r.target=this,r.on("end",(function(t){i.onAnimationEnd(t)}))),this.ee=r),r},i.prototype.onAnimationEnd=function(t){if(t)if(this._n===Fs.MODELESS)this.hide();else{var n=this.parent;n&&n.removeChild(this)}else{var i=lt.getLayer(this);if(i){var r=i.getFocusController();this.wh=r.get(),r.focus(this.findFirstFocusable(r)||this)}}},i.prototype.findFirstFocusable=function(t){return t.find(this,!1,!0,!0)},i.prototype.open=function(t){var n=this,i=this.Oh;if(null==i){i=new Promise((function(t,i){n.ph=t,n.Dh=i})),this.Oh=i,this.Eh=t;var r=null;switch(this._n){case Fs.MODAL:case Fs.MENU:(r=this.mh.pick(this,t)).stage.addChild(this);break;case Fs.MODELESS:r=lt.getLayer(this),this.show()}this.cs=r;var e=this.Yu;if(e.mode===Ps.CLEAN&&e.toClean(),null!=r)if(e.isClean()){var u=r.renderer,s=this.bh;this.dh?u.on("prerender",s):u.once("prerender",s)}else{var h=this.position;e.constraint(this,r,h.x,h.y)}this.onOpen()}return i},i.prototype.onPrerender=function(){var n,r=this.cs;if(null!=r){var e=this.Rt;if(e!==xs.NONE){var u=this.Eh;if(null!=e&&null!=u){var s=this._n,h=u.getBounds(!1,null!==(n=i.WORK_BOUNDS)&&void 0!==n?n:i.WORK_BOUNDS=new t.Rectangle),o=this.theme;Bs.attach(this,h,o.getOffsetX(s),o.getOffsetY(s),r.width,r.height,e)}else this.position.set(.5*(r.width-this.width),.5*(r.height-this.height))}}},i.prototype.onOpen=function(){this.emit("open",this);var t=this.getAnimation();t?t.start():this._n===Fs.MENU&&(this.visible=!0,this.onAnimationEnd(!1))},i.prototype.isOpened=function(){return null!=this.Oh},i.prototype.close=function(){this.doReject()},i.prototype.doResolve=function(t){var n=this.ph;n&&(this.Oh=void 0,this.ph=void 0,this.Dh=void 0,this.onClose(),n(t))},i.prototype.doReject=function(t){var n=this.Dh;n&&(this.Oh=void 0,this.ph=void 0,this.Dh=void 0,this.onClose(),n(t))},i.prototype.onClose=function(){var t=this.cs,n=this.wh;if(null!=n)if(this.wh=null,t){var i=lt.getLayer(n);null!=i&&t!==i&&i.view.focus(),t.getFocusController().focus(n)}else this.blur(!0);else this.blur(!0);t&&(t.renderer.off("prerender",this.bh),this.cs=null),this.Eh=null;var r=this.getAnimation();r?r.start(!0):(this.visible=!1,this.onAnimationEnd(!0)),this.emit("close",this)},i.prototype.onKeyDown=function(t){return this.gh&_s.ESC&&Qe.isCancelKey(t)&&this.onCloseOn(),n.prototype.onKeyDown.call(this,t)},i.prototype.onCloseOn=function(){this.close()},i.prototype.containsGlobalPoint=function(t){switch(this._n){case Fs.MODAL:case Fs.MENU:return!0;case Fs.MODELESS:return n.prototype.containsGlobalPoint.call(this,t)}},i.prototype.getType=function(){return"DDialog"},i}(ru),Ws={VERTICAL:0,HORIZONTAL:1},Xs=function(t){function n(n){var i=t.call(this,n)||this;return i.visible=!1,i}return G(n,t),n.prototype.getType=function(){return"DLayoutSpace"},n}(ru),Ks=function(t){return t instanceof ru&&(t.visible||t instanceof Xs)},Ys=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n);var i=this.theme;this.ni=function(t,n){var i,r,e=null==n?void 0:n.margin;if(null!=e){if(jt(e))return{horizontal:e,vertical:e};var u=t.getMargin();return{horizontal:null!==(i=e.horizontal)&&void 0!==i?i:u,vertical:null!==(r=e.vertical)&&void 0!==r?r:u}}return{horizontal:u=t.getMargin(),vertical:u}}(i,n),this.rn=function(t,n){var i=null==n?void 0:n.direction;return null!=i?Tt(i)?Ws[i]:i:t.getDirection()}(i,n),this.Mh=function(t,n){var i=null==n?void 0:n.corner;if(null!=i&&!jt(i)){var r=i.adjust;if(null!=r)return r}return t.getCornerAdjust()}(i,n),this.Sh=function(t,n){if(n){var i=n.row;if(null!=i)return i;var r=n.column;if(null!=r)return r}return t.getMultiplicity()}(i,n),this.Hr=function(t,n){var i;return null!==(i=null==n?void 0:n.reverse)&&void 0!==i?i:t.getReverse()}(i,n)},Object.defineProperty(n.prototype,"margin",{get:function(){return this.ni},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"multiplicity",{get:function(){return this.Sh},enumerable:!1,configurable:!0}),n.prototype.getWeightTotal=function(){for(var t=this.children,n=0,i=this.Sh,r=this.Hr,e=0,u=t.length;e<u;){for(var s=-1,h=0;h<i&&e+h<u;++h){var o=t[r?u-1-(e+h):e+h];if(Ks(o)){var a=o.getClearType();if(0!==h&&a&Ve.BEFORE)break;if(s=Math.max(s,o.weight),a&&Ve.AFTER){h+=1;break}}else e+=1,h-=1}e+=h,0<=s&&(n+=s)}return n},n.prototype.getSpaceLeft=function(t,n){var i=this.children,r=this.Sh,e=this.Hr;if(this.rn===Ws.VERTICAL){for(var u=t,s=0,h=0,o=i.length;h<o;){for(var a=0,c=-1,f=0;f<r&&h+f<o;++f){var l=i[e?o-1-(h+f):h+f];if(Ks(l)){var v=l.getClearType();if(0!==f&&v&Ve.BEFORE)break;if(a=(c=Math.max(c,l.weight))<0?Math.max(a,l.height+s):s,v&Ve.AFTER){f+=1;break}}else h+=1,f-=1}h+=f,u-=a,s=n}return Math.max(0,u)}for(u=t,s=0,h=0,o=i.length;h<o;){var b=0;for(c=-1,f=0;f<r&&h+f<o;++f)if(l=i[e?o-1-(h+f):h+f],Ks(l)){if(v=l.getClearType(),0!==f&&v&Ve.BEFORE)break;if(b=(c=Math.max(c,l.weight))<0?Math.max(b,l.width+s):s,v&Ve.AFTER){f+=1;break}}else h+=1,f-=1;h+=f,u-=b,s=n}return Math.max(0,u)},n.prototype.calcSpaceLeft=function(t,n,i,r){return t?0:this.getSpaceLeft(n-i,r)},n.prototype.onRefit=function(){var i=this.children,r=this.au,e=r.getTop(),u=r.getBottom(),s=r.getLeft(),h=r.getRight(),o=this.ni,a=o.vertical,c=o.horizontal,f=this.getWeightTotal(),l=this.Sh,v=this.Hr,b=this.iu,d=null;if(this.Mh){var g=4+(i.length<<1);(null==n.CORNER_ADJUST_WORK||n.CORNER_ADJUST_WORK.length<g)&&(n.CORNER_ADJUST_WORK=new Float32Array(g)),(d=n.CORNER_ADJUST_WORK)[0]=-2,d[1]=-2,d[g-2]=-3,d[g-1]=-3}if(this.rn===Ws.VERTICAL){var m=0,w=e-a;if(0<f){for(var O=1/f,p=this.calcSpaceLeft(b.height.isOn,this.height,e+u,a),D=0,E=i.length;D<E;){for(var M=s-c,S=0,j=0;j<l&&D+j<E;++j){var T=i[v?E-1-(D+j):D+j];if(Ks(T)){var I=T.getClearType();if(0!==j&&I&Ve.BEFORE)break;if(T.position.set(c+M,a+w),0<=(F=T.weight)&&(T.height=p*(F*O)),M+=c+T.width,S=Math.max(S,T.height),I&Ve.AFTER){null!=d&&(d[0+(G=D+j+1<<1)]=j,d[G+1]=m),j+=1;break}null!=d&&(d[0+(G=D+j+1<<1)]=j,d[G+1]=m)}else null!=d&&(d[0+(G=D+j+1<<1)]=j-1,d[G+1]=m),D+=1,j-=1}w+=a+S,D+=j,m+=1}if(null!=d)for(D=0,E=i.length;D<E;++D)if(T=i[v?E-1-D:D],Ks(T)){var C=d[0+(H=2+(D<<1))],N=d[H+1],A=-2;if(!((I=T.getClearType())&Ve.BEFORE)){var R=this.findRowIndexPrevious(H,N,d);this.hasClearTypeAfter(i,R)||(A=d[R])}var y=-2;if(!(I&Ve.AFTER)){var k=this.findRowIndexNext(H,N,d);this.hasClearTypeBefore(i,k)||(y=d[k])}var L=this.countColumn(H,N,d);T.corner.mask=this.toCornerMaskColumn(A,C,y,L)}}else{for(D=0,E=i.length;D<E;){for(M=s-c,S=0,j=0;j<l&&D+j<E;++j)if(T=i[v?E-1-(D+j):D+j],Ks(T)){if(I=T.getClearType(),0!==j&&I&Ve.BEFORE)break;if(T.position.set(c+M,a+w),0<=(F=T.weight)&&(T.height=0),M+=c+T.width,S=Math.max(S,T.height),I&Ve.AFTER){null!=d&&(d[0+(G=D+j+1<<1)]=j,d[G+1]=m),j+=1;break}null!=d&&(d[0+(G=D+j+1<<1)]=j,d[G+1]=m)}else null!=d&&(d[0+(G=D+j+1<<1)]=j-1,d[G+1]=m),D+=1,j-=1;w+=a+S,D+=j,m+=1}if(null!=d)for(D=0,E=i.length;D<E;++D)T=i[v?E-1-D:D],Ks(T)&&(C=d[0+(H=2+(D<<1))],N=d[H+1],A=-2,(I=T.getClearType())&Ve.BEFORE||(R=this.findRowIndexPrevious(H,N,d),this.hasClearTypeAfter(i,R)||(A=d[R])),y=-2,I&Ve.AFTER||(k=this.findRowIndexNext(H,N,d),this.hasClearTypeBefore(i,k)||(y=d[k])),L=this.countColumn(H,N,d),T.corner.mask=this.toCornerMaskColumn(A,C,y,L))}}else{var x=0;if(M=s-c,0<f){for(O=1/f,p=this.calcSpaceLeft(b.width.isOn,this.width,s+h,c),D=0,E=i.length;D<E;){w=e-a;var B=0;for(j=0;j<l&&D+j<E;++j)if(T=i[v?E-1-(D+j):D+j],Ks(T)){if(I=T.getClearType(),0!==j&&I&Ve.BEFORE)break;if(T.position.set(c+M,a+w),0<=(F=T.weight)&&(T.width=p*(F*O)),B=Math.max(B,T.width),w+=a+T.height,I&Ve.AFTER){null!=d&&(d[0+(G=D+j+1<<1)]=x,d[G+1]=j),j+=1;break}null!=d&&(d[0+(G=D+j+1<<1)]=x,d[G+1]=j)}else null!=d&&(d[0+(G=D+j+1<<1)]=x,d[G+1]=j-1),D+=1,j-=1;M+=c+B,D+=j,x+=1}if(null!=d)for(D=0,E=i.length;D<E;++D)if(T=i[v?E-1-D:D],Ks(T)){C=d[0+(H=2+(D<<1))],N=d[H+1];var _=-2;(I=T.getClearType())&Ve.BEFORE||(R=this.findColumnIndexPrevious(H,C,d),this.hasClearTypeAfter(i,R)||(_=d[R+1]));var P=-2;I&Ve.AFTER||(k=this.findColumnIndexNext(H,C,d),this.hasClearTypeBefore(i,k)||(P=d[k+1]));var U=this.countRow(H,C,d);T.corner.mask=this.toCornerMaskRow(_,N,P,U)}}else{for(D=0,E=i.length;D<E;){for(w=e-a,B=0,j=0;j<l&&D+j<E;++j)if(T=i[v?E-1-(D+j):D+j],Ks(T)){var F;if(I=T.getClearType(),0!==j&&I&Ve.BEFORE)break;if(T.position.set(c+M,a+w),0<=(F=T.weight)&&(T.width=0),B=Math.max(B,T.width),w+=a+T.height,I&Ve.AFTER){null!=d&&(d[0+(G=D+j+1<<1)]=x,d[G+1]=j),j+=1;break}null!=d&&(d[0+(G=D+j+1<<1)]=x,d[G+1]=j)}else{var G;null!=d&&(d[0+(G=D+j+1<<1)]=x,d[G+1]=j-1),D+=1,j-=1}M+=c+B,D+=j,x+=1}if(null!=d)for(D=0,E=i.length;D<E;++D){var H;T=i[v?E-1-D:D],Ks(T)&&(C=d[0+(H=2+(D<<1))],N=d[H+1],_=-2,(I=T.getClearType())&Ve.BEFORE||(R=this.findColumnIndexPrevious(H,C,d),this.hasClearTypeAfter(i,R)||(_=d[R+1])),P=-2,I&Ve.AFTER||(k=this.findColumnIndexNext(H,C,d),this.hasClearTypeBefore(i,k)||(P=d[k+1])),U=this.countRow(H,C,d),T.corner.mask=this.toCornerMaskRow(_,N,P,U))}}}t.prototype.onRefit.call(this)},n.prototype.hasClearTypeBefore=function(t,n){return this.hasClearType(t,n,Ve.BEFORE)},n.prototype.hasClearTypeAfter=function(t,n){return this.hasClearType(t,n,Ve.AFTER)},n.prototype.hasClearType=function(t,n,i){if(2<=n){var r=n-2>>1;if(0<=r&&r<t.length){var e=t[r];if(e instanceof ru)return!!(e.getClearType()&i)}}return!1},n.prototype.findColumnIndexPrevious=function(t,n,i){for(var r=t-2;0<=r;r-=2)if(i[r]!==n)return r;return 0},n.prototype.findColumnIndexNext=function(t,n,i){for(var r=t+2,e=i.length;r<e;r+=2){var u=i[r];if(u!==n){for(var s=r+2;s<e;s+=2)if(i[s]!==u)return s-2;return r}}return i.length-2},n.prototype.countRow=function(t,n,i){for(var r=t+2,e=i.length;r<e;r+=2)if(i[r]!==n)return i[r-2+1]+1;return 0},n.prototype.findRowIndexPrevious=function(t,n,i){for(var r=t-2;0<=r;r-=2)if(i[r+1]!==n)return r;return 0},n.prototype.findRowIndexNext=function(t,n,i){for(var r=t+2,e=i.length;r<e;r+=2){var u=i[r+1];if(u!==n){for(var s=r+2;s<e;s+=2)if(i[s+1]!==u)return s-2;return r}}return i.length-2},n.prototype.countColumn=function(t,n,i){for(var r=t+2,e=i.length;r<e;r+=2)if(i[r+1]!==n)return i[r-2+0]+1;return 0},n.prototype.toCornerMaskColumn=function(t,n,i,r){var e=Ne.NONE;return t+1<n&&0===n&&(e|=Ne.TOP_LEFT),i+1<n&&0===n&&(e|=Ne.BOTTOM_LEFT),t<n&&n+1===r&&(e|=Ne.TOP_RIGHT),i<n&&n+1===r&&(e|=Ne.BOTTOM_RIGHT),Ne.ALL&~e},n.prototype.toCornerMaskRow=function(t,n,i,r){var e=Ne.NONE;return t+1<n&&0===n&&(e|=Ne.TOP_LEFT),i+1<n&&0===n&&(e|=Ne.TOP_RIGHT),t<n&&n+1===r&&(e|=Ne.BOTTOM_LEFT),i<n&&n+1===r&&(e|=Ne.BOTTOM_RIGHT),Ne.ALL&~e},n.prototype.addSpace=function(t){return this.addChild(new Xs(t))},n.prototype.getType=function(){return"DLayout"},n.CORNER_ADJUST_WORK=null,n}(ru),Js=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DLayoutVertical"},n}(Ys),Zs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DDialogLayeredContent"},n}(Js),qs={CLICKED:0,DOUBLE_CLICKED:1},Qs={TEXT:0,PADDING:1,BORDER:2},$s={LEFT:0,CENTER:1,RIGHT:2},th={TOP:0,MIDDLE:1,BOTTOM:2},nh=function(){function t(){this.jh=[],this._bounds=[],this.j=0,this.ni=0}return t.prototype.clear=function(){this.jh.length=0,this._bounds.length=0,this.j=0,this.ni=0,this.Th=void 0},t.prototype.set=function(t){this.Th=t},Object.defineProperty(t.prototype,"size",{get:function(){return this.j-(null===this.Th?this.ni:0)},enumerable:!1,configurable:!0}),t}(),ih=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.add=function(t,n,i){this.jh.push(t),this._bounds.push(n),this.j+=i+n.height,this.ni=i},n.prototype.execute=function(t,n){var i=this.jh,r=this._bounds,e=n-t;if(void 0!==this.Th)for(var u=0,s=0,h=i.length;s<h;++s){var o=i[s],a=r[s],c=o.object;e-=u+a.height,c.y=e-a.y,u=o.margin.horizontal}else for(s=0,h=i.length;s<h;++s)o=i[s],a=r[s],c=o.object,e-=o.margin.horizontal+a.height,c.y=e-a.y},n}(nh),rh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.add=function(t,n,i){this.jh.push(t),this._bounds.push(n),this.j=Math.max(this.size,n.width)},n.prototype.execute=function(t,n,i){for(var r=t+.5*(i-t-n),e=this.jh,u=this._bounds,s=0,h=e.length;s<h;++s){var o=e[s],a=u[s];o.object.x=r-a.x-.5*a.width}},n}(nh),eh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.add=function(t,n,i){this.jh.push(t),this._bounds.push(n),this.j+=i+n.width,this.ni=i},n.prototype.execute=function(t){var n=this.jh,i=this._bounds,r=t;if(void 0!==this.Th)for(var e=0,u=n.length;e<u;++e){var s=n[e],h=i[e];(o=s.object).x=r-h.x,r+=h.width+s.margin.horizontal}else for(e=0,u=n.length;e<u;++e){s=n[e],h=i[e];var o=s.object;r+=s.margin.horizontal,o.x=r-h.x,r+=h.width}},n}(nh),uh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.add=function(t,n,i){this.jh.push(t),this._bounds.push(n),this.j=Math.max(this.size,n.height)},n.prototype.execute=function(t,n,i){for(var r=t+.5*(i-t-n),e=this.jh,u=this._bounds,s=0,h=e.length;s<h;++s){var o=e[s],a=u[s];o.object.y=r-a.y-.5*a.height}},n}(nh),sh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.add=function(t,n,i){this.jh.push(t),this._bounds.push(n),this.j+=i+n.width,this.ni=i},n.prototype.execute=function(t,n){var i=this.jh,r=this._bounds,e=n-t;if(void 0!==this.Th)for(var u=0,s=0,h=i.length;s<h;++s){var o=i[s],a=r[s],c=o.object;e-=u+a.width,c.x=e-a.x,u=o.margin.horizontal}else for(s=0,h=i.length;s<h;++s)o=i[s],a=r[s],c=o.object,e-=o.margin.horizontal+a.width,c.x=e-a.x},n}(nh),hh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.add=function(t,n,i){this.jh.push(t),this._bounds.push(n),this.j+=i+n.height,this.ni=i},n.prototype.execute=function(t){var n=this.jh,i=this._bounds,r=t;if(void 0!==this.Th)for(var e=0,u=0,s=n.length;u<s;++u){var h=n[u],o=i[u];(a=h.object).y=e+r-o.y,r+=o.height,e=h.margin.vertical}else for(u=0,s=n.length;u<s;++u){h=n[u],o=i[u];var a=h.object;r+=h.margin.vertical,a.y=r-o.y,r+=o.height}},n}(nh),oh=function(){function t(){this.left=new eh,this.center=new rh,this.right=new sh,this.top=new hh,this.middle=new uh,this.bottom=new ih}return t.prototype.clear=function(){this.left.clear(),this.center.clear(),this.right.clear(),this.top.clear(),this.middle.clear(),this.bottom.clear(),this.text=void 0},t.prototype.add=function(t){var n=t.object;if(null!=n){var i=n.getLocalBounds(),r=t.margin,e=t.align;switch(e.horizontal){case $s.LEFT:this.left.add(t,i,r.horizontal);break;case $s.CENTER:this.center.add(t,i,r.horizontal);break;case $s.RIGHT:this.right.add(t,i,r.horizontal)}switch(e.vertical){case th.TOP:this.top.add(t,i,r.vertical);break;case th.MIDDLE:this.middle.add(t,i,r.vertical);break;case th.BOTTOM:this.bottom.add(t,i,r.vertical)}}},t.prototype.set=function(t){this.left.set(t),this.center.set(t),this.right.set(t),this.top.set(t),this.middle.set(t),this.bottom.set(t),this.text=t},Object.defineProperty(t.prototype,"width",{get:function(){var t=this.text,n=this.left.size,i=this.center.size,r=this.right.size;return void 0!==t?null!==t?Math.max(n+t.width+r,i):Math.max(n+r,i):Math.max(n,r,i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var t=this.text,n=this.top.size,i=this.middle.size,r=this.bottom.size;return void 0!==t?null!==t?Math.max(n+t.height+r,i):Math.max(n+r,i):Math.max(n,r,i)},enumerable:!1,configurable:!0}),t.prototype.execute=function(t,n,i,r,e,u,s){var h=this.left,o=this.center,a=this.right,c=this.top,f=this.middle,l=this.bottom,v=this.text;if(void 0!==v){var b=h.size,d=a.size,g=c.size,m=l.size,w=0,O=0,p=0;switch(null!=v&&(v.setClippingDelta(b+d,g+m),O=v.width,p=v.height),e.horizontal){case $s.LEFT:w=t+b;break;case $s.CENTER:w=t+.5*(u-t-i-(b+O+d))+b;break;case $s.RIGHT:w=u-i-d-O}var D=0;switch(e.vertical){case th.TOP:D=n+g;break;case th.MIDDLE:D=n+.5*(s-n-r-(g+p+m))+g;break;case th.BOTTOM:D=s-r-m-p}null!=v&&v.position.set(w,D),h.execute(w-b),o.execute(0,0,2*w+O),a.execute(0,w+O+d),c.execute(D-g),f.execute(0,0,2*D+p),l.execute(0,D+p+m)}else h.execute(t),o.execute(t,i,u),a.execute(i,u),c.execute(n),f.execute(n,r,s),l.execute(r,s)},t}(),ah=function(){function t(){this.text=new oh,this.padding=new oh,this.border=new oh}return t.prototype.clear=function(){this.text.clear(),this.padding.clear(),this.border.clear()},t.prototype.add=function(t){if(t.object)switch(t.align.with){case Qs.TEXT:this.text.add(t);break;case Qs.PADDING:this.padding.add(t);break;case Qs.BORDER:this.border.add(t)}},t.prototype.set=function(t){this.text.set(t)},t.prototype.execute=function(t,n,i,r){var e=t.getLeft(),u=t.getTop(),s=t.getRight(),h=t.getBottom();null==i&&(i=e+this.width+s),null==r&&(r=u+this.height+h),this.border.execute(0,0,0,0,n,i,r),this.padding.execute(e,u,s,h,n,i,r),this.text.execute(e,u,s,h,n,i,r)},Object.defineProperty(t.prototype,"width",{get:function(){return Math.max(this.border.width,this.padding.width,this.text.width)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.max(this.border.height,this.padding.height,this.text.height)},enumerable:!1,configurable:!0}),t}(),ch=function(t){function n(n){var i=t.call(this)||this;return i.parent=n,i.du=!1,i.At=i.width,i.rr=i.height,i}return G(n,t),n.prototype.render=function(n){this.updateTransform(),t.prototype.render.call(this,n)},n.prototype.onReflow=function(t,n,i){this.du&&this.At===n&&this.rr===i||(this.du=!0,this.At=n,this.rr=i,this.clear(),this.beginFill(16777215,1),this.drawRect(0,0,n,i),this.endFill())},n}(t.Graphics),fh=function(){function t(t,n,i,r){this.x=t,this.y=n,this.character=i,this.wrappable=r}return t.prototype.set=function(t,n,i,r){this.x=t,this.y=n,this.character=i,this.wrappable=r},t}(),lh=function(){function t(){this.count=0,this.countPerLine=0,this.width=0,this.height=0,this.characters=[],this.scale=1,this.scaled=!1,this.clipped=!1,this.x=0,this.y=0}return t.prototype.start=function(t,n){this.count=0,this.countPerLine=0,this.width=0,this.height=0,this.scale=1,this.scaled=!1,this.clipped=!1,this.x=0,this.y=.5*(t-n)},t.prototype.isPushable=function(t,n){return!(t<this.x+n.advance&&!(n.type&Hr.SPACE))},t.prototype.isPushableAtNewLine=function(t,n,i){return this.y+1.5*n+.5*i<=t},t.prototype.push=function(t,n){var i=this.x;this.x+=t.advance;var r=this.y,e=this.count,u=this.characters;e<u.length?u[e].set(i,r,t,n):u.push(new fh(i,r,t,n)),this.count+=1,this.countPerLine+=1},t.prototype.newLine=function(t){this.width=Math.max(this.width,this.x),this.x=0,this.y+=t,this.countPerLine=0},t.prototype.wordWrap=function(t){var n=this.countPerLine,i=this.characters;if(0<n){for(var r=this.count,e=r-1,u=r-n;u<e;--e){var s=i[e];if(s.wrappable){var h=s.character.advance,o=s.y+t;s.x=0,s.y=o;for(var a=e+1;a<r;++a)(s=i[a]).x=h,s.y=o,h+=s.character.advance;return this.x=h,this.y=o,this.countPerLine=r-e,!0}}var c=i[r-1];return c.x=0,c.y=c.y+t,this.x=c.character.advance,this.y=c.y,this.countPerLine=1,!1}return!1},t.prototype.pop=function(){var t=this.countPerLine,n=this.characters;if(0<t){var i=n[this.count-1];return this.x-=i.character.advance,this.count-=1,this.countPerLine-=1,!0}return!1},t.prototype.fit=function(t,n){var i=this.width,r=this.height;1e-4<i&&t<i?1e-4<r&&n<r?(this.scale=Math.min(t/i,n/r),this.scaled=!0):(this.scale=t/i,this.scaled=!0):1e-4<r&&n<r&&(this.scale=n/r,this.scaled=!0)},t.prototype.end=function(t,n){this.newLine(t),this.y-=.5*(t-n),this.height=this.y},t}(),vh=function(){function t(){this.target="",this.position=0}return t.prototype.init=function(t){this.target=t,this.position=0},t.prototype.hasNext=function(){return this.position<this.target.length},t.prototype.findNextBreak=function(t,n){for(var i=t.length,r=n;r<i;++r){var e=t.charCodeAt(r);if(!this.isLowSurrogate(e)&&!this.isVariationSelector(e))return r}return i},t.prototype.isHighSurrogate=function(t){return 55296<=t&&t<=56319},t.prototype.isLowSurrogate=function(t){return 56320<=t&&t<=57343},t.prototype.isVariationSelector=function(t){return 65024<=t&&t<=65039},t.prototype.next=function(){var t=this.target,n=this.position,i=this.findNextBreak(t,n+1),r=t.substring(n,i);return this.position=i,r},t.prototype.close=function(){var t=this.target.length;return this.position<t&&(this.position=t,!0)},t.from=function(n){null==t.Ih&&(t.Ih=new t);var i=t.Ih;return i.init(n),i},t.Ih=null,t}(),bh={NONE:0,NORMAL:1,BREAK_ALL:2},dh=function(){function t(){}return t.measure=function(n,i,r){var e=t.RESULT||new lh;if(t.RESULT=e,null!=i){var u=vh.from(n),s=i.font.height,h=r.lineHeight,o=r.fitting,a=!o&&r.clipping,c=r.width,f=r.height,l=!o&&r.wordWrap;switch(e.start(h,s),l){case bh.BREAK_ALL:a?this.measure1(u,c,f,s,h,i,e):this.measure2(u,c,h,i,e);break;case bh.NORMAL:var v=this.newLineBreaker(n);v?a?this.measure1a(v,u,c,f,s,h,i,e):this.measure2a(v,u,c,h,i,e):a?this.measure1b(u,c,f,s,h,i,e):this.measure2b(u,c,h,i,e);break;default:a?this.measure3(u,c,f,s,h,i,e):this.measure4(u,h,i,e)}e.end(h,s),o&&e.fit(c,f)}else e.start(0,0),e.end(0,0);return e},t.measure1a=function(t,n,i,r,e,u,s,h){for(var o=t.next();n.hasNext();){var a=n.position,c=n.next();if(c===j.NEW_LINE)h.isPushableAtNewLine(r,u,e)?h.newLine(u):this.measure5(n,i,u,s,h,!0);else{var f=s.get(c);if(null==f)continue;o=this.advance(a,o,t);var l=this.isWrappable1(a,o);h.isPushable(i,f)?h.push(f,l):h.isPushableAtNewLine(r,u,e)?(h.push(f,l),h.wordWrap(u)):this.measure5(n,i,u,s,h,!0)}}},t.measure1b=function(t,n,i,r,e,u,s){for(;t.hasNext();){var h=t.next();if(h===j.NEW_LINE)s.isPushableAtNewLine(i,e,r)?s.newLine(e):this.measure5(t,n,e,u,s,!0);else{var o=u.get(h);if(null==o)continue;var a=this.isWrappable2(s,o);s.isPushable(n,o)?s.push(o,a):s.isPushableAtNewLine(i,e,r)?(s.push(o,a),s.wordWrap(e)):this.measure5(t,n,e,u,s,!0)}}},t.measure1=function(t,n,i,r,e,u,s){for(;t.hasNext();){var h=t.next();if(h===j.NEW_LINE)s.isPushableAtNewLine(i,e,r)?s.newLine(e):this.measure5(t,n,e,u,s,!0);else{var o=u.get(h);if(null==o)continue;s.isPushable(n,o)?s.push(o,!0):s.isPushableAtNewLine(i,e,r)?(s.newLine(e),s.push(o,!0)):this.measure5(t,n,e,u,s,!0)}}},t.measure2a=function(t,n,i,r,e,u){for(var s=t.next();n.hasNext();){var h=n.position,o=n.next();if(o===j.NEW_LINE)u.newLine(r);else{var a=e.get(o);if(null==a)continue;s=this.advance(h,s,t);var c=this.isWrappable1(h,s);u.isPushable(i,a)?u.push(a,c):(u.push(a,c),u.wordWrap(r))}}},t.measure2b=function(t,n,i,r,e){for(;t.hasNext();){var u=t.next();if(u===j.NEW_LINE)e.newLine(i);else{var s=r.get(u);if(null==s)continue;var h=this.isWrappable2(e,s);e.isPushable(n,s)?e.push(s,h):(e.push(s,h),e.wordWrap(i))}}},t.measure2=function(t,n,i,r,e){for(;t.hasNext();){var u=t.next();if(u===j.NEW_LINE)e.newLine(i);else{var s=r.get(u);if(null==s)continue;e.isPushable(n,s)||e.newLine(i),e.push(s,!1)}}},t.measure3=function(t,n,i,r,e,u,s){for(;t.hasNext();){var h=t.next();if(h===j.NEW_LINE)s.isPushableAtNewLine(i,e,r)?s.newLine(e):this.measure5(t,n,e,u,s,!0);else{var o=u.get(h);if(null==o)continue;s.isPushable(n,o)?s.push(o,!1):this.measure5(t,n,e,u,s,!1)}}},t.measure4=function(t,n,i,r){for(;t.hasNext();){var e=t.next();if(e===j.NEW_LINE)r.newLine(n);else{var u=i.get(e);if(null==u)continue;r.push(u,!1)}}},t.measure5=function(t,n,i,r,e,u){e.clipped=!0;var s=r.get(j.DOTS);if(null!=s){for(;!e.isPushable(n,s)&&e.pop(););e.isPushable(n,s)&&e.push(s,!1)}if(u)t.close();else for(;t.hasNext();)if(t.next()===j.NEW_LINE){e.newLine(i);break}},t.isWrappable2=function(t,n){if(t.countPerLine<=0)return!1;var i=t.characters[t.count-1].character.type,r=n.type;return i&Hr.SPACE?!(r&Hr.SPACE||i&Hr.NON_BREAKING):!(r&Hr.SPACE||i&Hr.NON_BREAKING&&r&Hr.NON_BREAKING)},t.advance=function(t,n,i){return n.done||t<=n.value.end?n:n=i.next()},t.isWrappable1=function(t,n){if(n.done)return!1;var i=n.value;return i.start===t||i.end===t},t.newLineBreaker=function(t){return"css-line-break"in window?window["css-line-break"].LineBreaker(t,{lineBreak:"strict",wordBreak:"normal"}):null},t.RESULT=null,t}(),gh=function(t){function n(){var i,r,e,u=t.call(this,null!==(i=n.VERTICES)&&void 0!==i?i:n.VERTICES=new Float32Array(0),null!==(r=n.UVS)&&void 0!==r?r:n.UVS=new Float32Array(0),null!==(e=n.INDICES)&&void 0!==e?e:n.INDICES=new Uint16Array(0))||this;return u.width=0,u.height=0,u.scale=1,u.scaled=!1,u.clipped=!1,u.vertexBuffer=u.getBuffer("aVertexPosition"),u.vertices=n.VERTICES,u.uvBuffer=u.getBuffer("aTextureCoord"),u.uvs=n.UVS,u.indexBuffer=u.getIndex(),u.indices=n.INDICES,u.nchars=0,u}return G(n,t),n.prototype.update=function(t,n,i){var r=dh.measure(t,n,i),e=r.count,u=(e>>3)+(7&e?1:0)<<3;if(this.nchars<u){this.nchars=u;var s=u<<3;this.vertices=new Float32Array(s),this.uvs=new Float32Array(s),this.vertexBuffer.data=this.vertices,this.uvBuffer.data=this.uvs;var h=(u<<2)+(u<<1);this.indices=new Uint16Array(h),this.indexBuffer.data=this.indices,this.initIndices(this.indices),this.indexBuffer.update()}else u=this.nchars;if(!(u<=0)){var o=this.vertices,a=this.uvs;if(null!=n){for(var c=r.characters,f=r.scale,l=1/n.width,v=1/n.height,b=0;b<e;++b){var d=c[b],g=d.x,m=d.y,w=d.character;this.fill(o,a,b,g,m,f,w,l,v)}for(b=e;b<u;++b)this.fillBlank(o,a,b);this.width=r.width*f,this.height=r.height*f,this.scale=f,this.scaled=r.scaled,this.clipped=r.clipped}else{for(b=0;b<u;++b)this.fillBlank(o,a,b);this.width=0,this.height=0,this.scale=1,this.scaled=!1,this.clipped=!1}this.vertexBuffer.update(),this.uvBuffer.update()}},n.prototype.fill=function(t,n,i,r,e,u,s,h,o){var a=s.x,c=s.y,f=s.width,l=s.height,v=(r+(a-s.origin.x))*u,b=e*u,d=v+f*u,g=b+l*u,m=i<<3;t[m+0]=v,t[m+1]=b,t[m+2]=d,t[m+3]=b,t[m+4]=d,t[m+5]=g,t[m+6]=v,t[m+7]=g;var w=a*h,O=c*o,p=(a+f)*h,D=(c+l)*o;n[m+0]=w,n[m+1]=O,n[m+2]=p,n[m+3]=O,n[m+4]=p,n[m+5]=D,n[m+6]=w,n[m+7]=D},n.prototype.fillBlank=function(t,n,i){var r=i<<3;t[r+0]=0,t[r+1]=0,t[r+2]=0,t[r+3]=0,t[r+4]=0,t[r+5]=0,t[r+6]=0,t[r+7]=0,n[r+0]=0,n[r+1]=0,n[r+2]=0,n[r+3]=0,n[r+4]=0,n[r+5]=0,n[r+6]=0,n[r+7]=0},n.prototype.initIndices=function(t){for(var n=0,i=this.nchars<<2,r=0;n<i;n+=4,r+=6)t[r]=n,t[r+1]=n+1,t[r+2]=n+3,t[r+3]=n+1,t[r+4]=n+2,t[r+5]=n+3},n}(t.MeshGeometry),mh=function(n){function i(i){var r=n.call(this,new gh,new t.MeshMaterial(t.Texture.EMPTY))||this;return r.L=i,i.on("change",(function(){r.onStyleChange()})),r.Th="",r.Ch="",r.Pi=!0,r.Nh=!0,r.Nr=null,r.Ah=0,r.At=0,r.rr=0,r.ve={clipping:!1,fitting:!1,wordWrap:bh.NONE,width:0,height:0,lineHeight:0,delta:{width:0,height:0}},r}return G(i,n),i.prototype.onStyleChange=function(){this.Pi=!0,this.Nh=!0,this.Nr=null,this.Rh()},i.prototype.Rh=function(){var t=lt.getLayer(this);if(t&&this.Pi){this.Pi=!1;var n=this.Th,i=this.Ch;this.Ch=n;var r=this.L,e=r.fontId,u=r.fontIdApproved,s=r.fontIdFontSize,h=r.fill,o=r.fillApproved;r.approve();var a=t.getDynamicFontAtlases();n===i&&e===u&&h===o||(a.add(e,s,h,n),a.remove(u,o,i))}},Object.defineProperty(i.prototype,"text",{get:function(){return this.Th},set:function(t){this.Th!==t&&(this.Th=t,this.L.unfit()||(this.Pi=!0,this.Nh=!0,this.Rh()))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this.update(),Math.abs(this.scale.x)*this.geometry.width},set:function(t){this.update();var n=this.geometry.width;if(1e-4<n){var i=t/n;this.scale.x=0<=this.scale.x?+i:-i}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.update(),Math.abs(this.scale.y)*this.geometry.height},set:function(t){this.update();var n=this.geometry.height;if(1e-4<n){var i=t/n;this.scale.y=0<=this.scale.y?+i:-i}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clipped",{get:function(){return this.geometry.clipped},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this.L},enumerable:!1,configurable:!0}),i.prototype.update=function(){var t=this;this.Rh();var n=this.L,i=this.Nr;if(null==i){var r=lt.getLayer(this);r&&null!=(i=r.getDynamicFontAtlases().get(n.fontId,n.fill))&&(this.Ah=i.getRevisionUpdate(),this.Nr=i,this.texture=i.texture,this.Nh=!0)}else{var e=i.getRevisionUpdate();e!==this.Ah&&(this.Ah=e,this.Nh=!0)}var u=this.ve;if(this.updateClipping(n,u)&&(this.Nh=!0),this.Nh){this.Nh=!1;var s=this.geometry;if(s.update(this.Th,i,u),u.fitting&&!n.isFontFitted&&s.scaled){var h=s.scale,o=n.fontSize,a=n.toFontId(Math.ceil(o*h*1e3)/1e3),c=Wr.toSize(a),f=c/o,l=n.lineHeight*f;n.fit(c,l)&&setTimeout((function(){lt.update(t)}),0)}}},i.prototype.updateClipping=function(t,n){var i=!1,r=t.clipping;n.clipping!==r&&(n.clipping=r,i=!0);var e=t.fitting;n.fitting!==e&&(n.fitting=e,i=!0);var u=t.wordWrap;n.wordWrap!==u&&(n.wordWrap=u,i=!0);var s=e?t.lineHeightFitted:t.lineHeight;if(n.lineHeight!==s&&(n.lineHeight=s,i=!0),r||e||u){var h=this.parent;if(h instanceof ru){var o=h.padding,a=h.width-o.getLeft()-o.getRight()-n.delta.width;n.width!==a&&(n.width=a,i=!0);var c=h.height-o.getTop()-o.getBottom()-n.delta.height;n.height!==c&&(n.height=c,i=!0)}}return i},i.prototype.setClippingDelta=function(t,n){var i=this.ve.delta;i.width=t,i.height=n},i.prototype._calculateBounds=function(){this.update();var t=this.geometry;this._bounds.addFrame(this.transform,0,0,t.width,t.height)},i.prototype._render=function(t){this.update(),n.prototype._render.call(this,t)},i}(t.Mesh),wh=function(t){function n(n,i,r){var e,u,s,h,o,a,c,f,l,v=t.call(this)||this;return v.A=0,v.yh=-1,r?(v.kh=null!==(e=r.fontFamily)&&void 0!==e?e:i.getFontFamilly(),v.Lh=null!==(u=r.fontSize)&&void 0!==u?u:i.getFontSize(),v.xh=null!==(s=r.fontStyle)&&void 0!==s?s:i.getFontStyle(),v.Bh=null!==(h=r.fontVariant)&&void 0!==h?h:i.getFontVariant(),v._h=null!==(o=r.fontWeight)&&void 0!==o?o:i.getFontWeight(),v.en=null!==(a=r.clipping)&&void 0!==a?a:i.getTextStyleClipping(),v.un=null!==(c=r.fitting)&&void 0!==c?c:i.getTextStyleFitting(),v.Ph=rr(null!==(f=r.wordWrap)&&void 0!==f?f:i.getTextStyleWordWrap(),bh),v.Uh=null!==(l=r.lineHeight)&&void 0!==l?l:i.getLineHeight()):(v.kh=i.getFontFamilly(),v.Lh=i.getFontSize(),v.xh=i.getFontStyle(),v.Bh=i.getFontVariant(),v._h=i.getFontWeight(),v.en=i.getTextStyleClipping(),v.un=i.getTextStyleFitting(),v.Ph=i.getTextStyleWordWrap(),v.Uh=i.getLineHeight()),v.I=i.getColor(n.state),v.Fh=v.Lh,v.Gh=v.Uh,v.Hh=!1,v.zh=v.Lh,v.Vh=-1,v.Wh="",v.Xh="",v.Kh=0,v}return G(n,t),Object.defineProperty(n.prototype,"id",{get:function(){return this.A},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"idApproved",{get:function(){return this.yh},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontId",{get:function(){return this.update(),this.Wh},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontIdFontSize",{get:function(){return this.update(),this.Fh},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontIdApproved",{get:function(){return this.Xh},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fill",{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t,this.onChange())},enumerable:!1,configurable:!0}),n.prototype.onChange=function(){this.A+=1,this.emit("change",this)},Object.defineProperty(n.prototype,"fillApproved",{get:function(){return this.Kh},enumerable:!1,configurable:!0}),n.prototype.approve=function(){this.update(),this.yh=this.A,this.Xh=this.Wh,this.Kh=this.I},Object.defineProperty(n.prototype,"fontFamily",{get:function(){return this.kh},set:function(t){this.kh!==t&&(this.kh=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontSize",{get:function(){return this.Lh},set:function(t){this.Lh!==t&&(this.Lh=t,this.Fh=t,this.Gh=this.Uh,this.Hh=!1,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontSizeFitted",{get:function(){return this.Fh},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isFontFitted",{get:function(){return this.Hh},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontStyle",{get:function(){return this.xh},set:function(t){this.xh!==t&&(this.xh=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontVariant",{get:function(){return this.Bh},set:function(t){this.Bh!==t&&(this.Bh=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontWeight",{get:function(){return this._h},set:function(t){this._h!==t&&(this._h=t,this.onChange())},enumerable:!1,configurable:!0}),n.prototype.update=function(){if(this.Vh!==this.A){this.Vh=this.A;var t=this.un?this.Fh:this.Lh;this.zh=t,this.Wh=this.toFontId(t)}},n.prototype.toFontId=function(t){return"".concat(this.xh," ").concat(this.Bh," ").concat(this._h," ").concat(t,"px ").concat(this.kh)},Object.defineProperty(n.prototype,"clipping",{get:function(){return this.en},set:function(t){this.en!==t&&(this.en=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fitting",{get:function(){return this.un},set:function(t){this.un!==t&&(this.un=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wordWrap",{get:function(){return this.Ph},set:function(t){this.Ph!==t&&(this.Ph=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lineHeight",{get:function(){return this.Uh},set:function(t){this.Uh!==t&&(this.Uh=t,this.Fh=this.Lh,this.Gh=t,this.Hh=!1,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lineHeightFitted",{get:function(){return this.Gh},set:function(t){this.Gh!==t&&(this.Gh=t,this.onChange())},enumerable:!1,configurable:!0}),n.prototype.fit=function(t,n){var i=!1;return t<this.Fh&&(this.Fh=t,i=!0),this.Gh!==n&&(this.Gh=n,i=!0),!0!==this.Hh&&(this.Hh=!0,i=!0),i&&this.onChange(),i},n.prototype.unfit=function(){var t=!1;return!1!==this.Hh&&(this.Hh=!1,t=!0),this.Fh!==this.Lh&&(this.Fh=this.Lh,t=!0),this.Gh!==this.Uh&&(this.Gh=this.Uh,t=!0),t&&this.onChange(),t},n}(t.utils.EventEmitter),Oh=function(){function t(t,n,i){var r,e;this.g=t,this.qt=rr(null!==(r=null==i?void 0:i.vertical)&&void 0!==r?r:n.getTextAlignVertical(),th),this.Zt=rr(null!==(e=null==i?void 0:i.horizontal)&&void 0!==e?e:n.getTextAlignHorizontal(),$s)}return Object.defineProperty(t.prototype,"vertical",{get:function(){return this.qt},set:function(t){t=rr(t,th),this.qt!==t&&(this.qt=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"horizontal",{get:function(){return this.Zt},set:function(t){t=rr(t,$s),this.Zt!==t&&(this.Zt=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){var i=!1;return null!=t&&(t=rr(t,th),this.qt!==t&&(this.qt=t,i=!0)),null!=n&&(n=rr(n,$s),this.Zt!==n&&(this.Zt=n,i=!0)),i&&this.onChange(),this},t.prototype.onChange=function(){var t=this.g;t.toDirty(),lt.update(t)},t}(),ph=function(){function t(t,n){this.g=t,this.L=n}return Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this.L.fontFamily},set:function(t){var n=this.L;n.fontFamily!==t&&(n.fontFamily=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this.L.fontSize},set:function(t){var n=this.L;n.fontSize!==t&&(n.fontSize=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this.L.fontStyle},set:function(t){var n=this.L;n.fontStyle!==t&&(n.fontStyle=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this.L.fontVariant},set:function(t){var n=this.L;n.fontVariant!==t&&(n.fontVariant=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this.L.fontWeight},set:function(t){var n=this.L;n.fontWeight!==t&&(n.fontWeight=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clipping",{get:function(){return this.L.clipping},set:function(t){var n=this.L;n.clipping!==t&&(n.clipping=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fitting",{get:function(){return this.L.fitting},set:function(t){var n=this.L;n.fitting!==t&&(n.fitting=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this.L.wordWrap},set:function(t){t=rr(t,bh);var n=this.L;n.wordWrap!==t&&(n.wordWrap=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this.L.lineHeight},set:function(t){var n=this.L;n.lineHeight!==t&&(n.lineHeight=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.onChange=function(){lt.update(this.g)},t}(),Dh=function(t){function n(n,i,r){var e,u,s=t.call(this)||this;s.g=n,s.Te=i,s.Pt=null!==(e=null==r?void 0:r.value)&&void 0!==e?e:i.newTextValue(),s.Yh=s.newComputed(),s.p=null==r?void 0:r.color,s.S=null==r?void 0:r.alpha;var h=new wh(n,i,null==r?void 0:r.style);return s.Jh=h,s.L=new ph(n,h),s.Rt=new Oh(n,i,null==r?void 0:r.align),s.Di=null!==(u=null==r?void 0:r.formatter)&&void 0!==u?u:i.getTextFormatter(),s.Zh=!0,s.onComputedChange(),s.updateObject()&&(n.toDirty(),lt.update(n)),s}return G(n,t),Object.defineProperty(n.prototype,"value",{get:function(){return this.Pt},set:function(t){this.Pt!==t&&(this.Pt=t,this.onValueChange())},enumerable:!1,configurable:!0}),n.prototype.getValue=function(){return this.Pt},n.prototype.setValue=function(t,n){(n||this.Pt!==t)&&(this.Pt=t,this.onValueChange(n))},n.prototype.onValueChange=function(t){var n=this.newComputed();if((t||this.Yh!==n)&&(this.Yh=n,this.onComputedChange(),this.updateObject())){var i=this.g;i.toDirty(),lt.update(i)}},n.prototype.compute=function(t){this.onValueChange(t)},Object.defineProperty(n.prototype,"computed",{get:function(){return this.Yh},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"formatter",{get:function(){return this.Di},set:function(t){this.Di!==t&&(this.Di=t,this.onValueChange(!0))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"color",{get:function(){return this.p},set:function(t){this.p!==t&&(this.p=t,this.onColorChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"alpha",{get:function(){return this.S},set:function(t){this.S!==t&&(this.S=t,this.onColorChange())},enumerable:!1,configurable:!0}),n.prototype.onColorChange=function(){var t=this.qh;if(null!=t){var n=this.g,i=n.state,r=this.newColor(i),e=this.newAlpha(i),u=t.style;u.fill===r&&t.alpha===e||(u.fill=r,t.alpha=e,lt.update(n))}},Object.defineProperty(n.prototype,"align",{get:function(){return this.Rt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"style",{get:function(){return this.L},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"object",{get:function(){return this.qh},enumerable:!1,configurable:!0}),n.prototype.update=function(t){var n=this.newComputed();this.Yh!==n&&(this.Yh=n,this.onComputedChange(),this.updateObject());var i=this.qh;if(null!=i){var r=this.g.state;i.style.fill=this.newColor(r),i.alpha=this.newAlpha(r),t.set(i)}else t.set(null)},n.prototype.updateObject=function(){var t=this.Yh;if(void 0!==t){var n=this.Di(t,this.g);if(null==(u=this.qh)){if(0<n.length){var i=this.newObject();i.visible=this.Zh,this.qh=i;var r=this.g;r.addChild(i);var e=r.getOverflowMask();return e&&(i.mask=e),i.text=n,!0}}else if(u.text!==n)return u.text=n,!0}else{var u;if(null!=(u=this.qh)&&""!==u.text)return u.text="",!0}return!1},n.prototype.newComputed=function(){var t=this.Pt;if(void 0!==t){if(!St(t))return t;var n=t(this.g.state);if(void 0!==n)return n}return this.Te.getTextValue(this.g.state)},n.prototype.newColor=function(t){var n=this.p;if(void 0!==n){if(!St(n))return n;var i=n(t);if(void 0!==i)return i}return this.Te.getColor(t)},n.prototype.newAlpha=function(t){var n=this.S;if(void 0!==n){if(!St(n))return n;var i=n(t);if(void 0!==i)return i}return this.Te.getAlpha(t)},n.prototype.newObject=function(){return new mh(this.Jh)},Object.defineProperty(n.prototype,"visible",{get:function(){var t=this.qh;return null!=t?t.visible:this.Zh},set:function(t){var n=this.qh;null!=n&&(n.visible=t),this.Zh=t},enumerable:!1,configurable:!0}),n.prototype.show=function(){return this.visible=!0,this},n.prototype.hide=function(){return this.visible=!1,this},n.prototype.isShown=function(){return this.visible},n.prototype.onComputedChange=function(){this.emit("change",this)},n.prototype.destroy=function(){var t=this.qh;return t&&(this.qh=void 0,t.destroy()),this},n}(t.utils.EventEmitter),Eh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.getText()},n.prototype.getOverflowMask=function(){var t=this.Zu;return void 0===t&&(t=this.newOverflowMask(),this.Zu=t),null},n.prototype.newOverflowMask=function(){var t,n;if(null!==(n=null===(t=this.tu)||void 0===t?void 0:t.mask)&&void 0!==n?n:this.theme.isOverflowMaskEnabled()){var i=new ch(this);return this.hu.add(i),this.toDirty(),i}return null},Object.defineProperty(n.prototype,"text",{get:function(){var t;return null!==(t=this.Th)&&void 0!==t?t:this.Th=this.newText()},set:function(t){this.text.value=t},enumerable:!1,configurable:!0}),n.prototype.getText=function(){var t;return null!==(t=this.Th)&&void 0!==t?t:this.Th=this.newText()},n.prototype.newText=function(){var t;return new Dh(this,this.theme,null===(t=this.tu)||void 0===t?void 0:t.text)},n.prototype.onReflow=function(){t.prototype.onReflow.call(this),this.onReflowTextAndImage()},n.prototype.getLayouter=function(){var t;return null!==(t=n.LAYOUTER)&&void 0!==t?t:n.LAYOUTER=new ah},n.prototype.onReflowTextAndImage=function(){var t=this.getLayouter(),n=this.getText();n.update(t);var i=this.iu;t.execute(this.au,n.align,i.width.isOn?null:this.width,i.height.isOn?null:this.height),t.clear()},n.prototype.isRefitable=function(n){if(t.prototype.isRefitable.call(this,n))return!0;if(null!=n){var i=this.Th;if(null!=i&&n===i.object)return!0}return!1},n.prototype.applyTitle=function(){var n=this.text.object;if(this.cu.length<=0&&null!=n&&n.clipped){var i=lt.getLayer(this);i&&(i.view.title=n.text)}else t.prototype.applyTitle.call(this)},n.prototype.getType=function(){return"DTextBase"},n.prototype.destroy=function(){var n=this.Th;n&&n.destroy();var i=this.Zu;i&&(this.Zu=null,i.destroy()),t.prototype.destroy.call(this)},n}(ru),Mh=function(){function t(t){this.Te=t}return t.prototype.getImageAlignHorizontal=function(){return this.Te.getImageAlignHorizontal()},t.prototype.getImageAlignVertical=function(){return this.Te.getImageAlignVertical()},t.prototype.getImageAlignWith=function(){return this.Te.getImageAlignWith()},t.prototype.getImageMarginHorizontal=function(){return this.Te.getImageMarginHorizontal()},t.prototype.getImageMarginVertial=function(){return this.Te.getImageMarginVertial()},t.prototype.getImageTintColor=function(t){return this.Te.getImageTintColor(t)},t.prototype.getImageTintAlpha=function(t){return this.Te.getImageTintAlpha(t)},t.prototype.getImageRotation=function(t){return this.Te.getImageRotation(t)},t.prototype.getImageSource=function(t){return null},t}(),Sh=function(){function t(t){this.Te=t}return t.prototype.getImageAlignHorizontal=function(){return this.Te.getSecondaryImageAlignHorizontal()},t.prototype.getImageAlignVertical=function(){return this.Te.getSecondaryImageAlignVertical()},t.prototype.getImageAlignWith=function(){return this.Te.getSecondaryImageAlignWith()},t.prototype.getImageMarginHorizontal=function(){return this.Te.getSecondaryImageMarginHorizontal()},t.prototype.getImageMarginVertial=function(){return this.Te.getSecondaryImageMarginVertial()},t.prototype.getImageTintColor=function(t){return this.Te.getSecondaryImageTintColor(t)},t.prototype.getImageTintAlpha=function(t){return this.Te.getSecondaryImageTintAlpha(t)},t.prototype.getImageRotation=function(t){return this.Te.getSecondaryImageRotation(t)},t.prototype.getImageSource=function(t){var n,i,r;return null!==(r=null===(i=(n=this.Te).getSecondaryImageSource)||void 0===i?void 0:i.call(n,t))&&void 0!==r?r:null},t}(),jh=function(){function t(t){this.Te=t}return t.prototype.getImageAlignHorizontal=function(){return this.Te.getTertiaryImageAlignHorizontal()},t.prototype.getImageAlignVertical=function(){return this.Te.getTertiaryImageAlignVertical()},t.prototype.getImageAlignWith=function(){return this.Te.getTertiaryImageAlignWith()},t.prototype.getImageMarginHorizontal=function(){return this.Te.getTertiaryImageMarginHorizontal()},t.prototype.getImageMarginVertial=function(){return this.Te.getTertiaryImageMarginVertial()},t.prototype.getImageTintColor=function(t){return this.Te.getTertiaryImageTintColor(t)},t.prototype.getImageTintAlpha=function(t){return this.Te.getTertiaryImageTintAlpha(t)},t.prototype.getImageRotation=function(t){return this.Te.getTertiaryImageRotation(t)},t.prototype.getImageSource=function(t){var n,i,r;return null!==(r=null===(i=(n=this.Te).getTertiaryImageSource)||void 0===i?void 0:i.call(n,t))&&void 0!==r?r:null},t}(),Th=function(){function t(t,n,i){this.g=t,null!=i&&(this.p=i.color,this.S=i.alpha),this.Te=n}return Object.defineProperty(t.prototype,"color",{get:function(){return this.p},set:function(t){this.p!==t&&(this.p=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.getColor=function(t){var n=this.p;if(void 0!==n){if(!St(n))return n;var i=n(t);if(void 0!==i)return i}return this.Te.getImageTintColor(t)},Object.defineProperty(t.prototype,"alpha",{get:function(){return this.S},set:function(t){this.S!==t&&(this.S=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.getAlpha=function(t){var n=this.S;if(void 0!==n){if(!St(n))return n;var i=n(t);if(void 0!==i)return i}return this.Te.getImageTintAlpha(t)},t.prototype.set=function(t,n){var i=!1;return null!=t&&this.p!==t&&(this.p=t,i=!0),null!=n&&this.S!==n&&(this.S=n,i=!0),i&&this.onChange(),this},t.prototype.onChange=function(){this.g.updateTint(),lt.update(this.g)},t}(),Ih=function(){function t(t,n,i){var r,e;this.g=t,this.qt=null!==(r=null==i?void 0:i.vertical)&&void 0!==r?r:n.getImageMarginVertial(),this.Zt=null!==(e=null==i?void 0:i.horizontal)&&void 0!==e?e:n.getImageMarginHorizontal()}return Object.defineProperty(t.prototype,"vertical",{get:function(){return this.qt},set:function(t){this.qt!==t&&(this.qt=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"horizontal",{get:function(){return this.Zt},set:function(t){this.Zt!==t&&(this.Zt=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){var i=!1;return null!=t&&this.qt!==t&&(this.qt=t,i=!0),null!=n&&this.Zt!==n&&(this.Zt=n,i=!0),i&&this.onChange(),this},t.prototype.onChange=function(){this.g.onUpdate()},t}(),Ch=function(){function t(t,n,i){var r,e,u;this.g=t,this.Qh=rr(null!==(r=null==i?void 0:i.with)&&void 0!==r?r:n.getImageAlignWith(),Qs),this.qt=rr(null!==(e=null==i?void 0:i.vertical)&&void 0!==e?e:n.getImageAlignVertical(),th),this.Zt=rr(null!==(u=null==i?void 0:i.horizontal)&&void 0!==u?u:n.getImageAlignHorizontal(),$s)}return Object.defineProperty(t.prototype,"with",{get:function(){return this.Qh},set:function(t){t=rr(t,Qs),this.Qh!==t&&(this.Qh=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){return this.qt},set:function(t){t=rr(t,th),this.qt!==t&&(this.qt=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"horizontal",{get:function(){return this.Zt},set:function(t){t=rr(t,$s),this.Zt!==t&&(this.Zt=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n,i){var r=!1;return null!=t&&(t=rr(t,Qs),this.Qh!==t&&(this.Qh=t,r=!0)),null!=n&&(n=rr(n,th),this.qt!==n&&(this.qt=n,r=!0)),null!=i&&(i=rr(i,$s),this.Zt!==i&&(this.Zt=i,r=!0)),r&&this.onChange(),this},t.prototype.onChange=function(){this.g.onUpdate()},t}(),Nh=function(){function n(t,n,i){var r=this;this.g=t,this.Te=n,this.qh=null,this.Rt=new Ch(this,n,null==i?void 0:i.align),this.ni=new Ih(this,n,null==i?void 0:i.margin),this.$h=new Th(this,n,null==i?void 0:i.tint),this.no=null==i?void 0:i.rotation,this.io=null==i?void 0:i.source,this.Yh=null,this.ro=function(){r.onUpdate()}}return Object.defineProperty(n.prototype,"object",{get:function(){return this.qh},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"align",{get:function(){return this.Rt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"margin",{get:function(){return this.ni},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tint",{get:function(){return this.$h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"source",{get:function(){return this.io},set:function(t){this.io!==t&&(this.io=t,this.updateSource()&&this.onUpdate())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rotation",{get:function(){return this.no},set:function(t){this.no!==t&&(this.no=t,this.updateRotation()&&lt.update(this.g))},enumerable:!1,configurable:!0}),n.prototype.computeSource=function(){var t=this.io;if(void 0!==t){if(!St(t))return t;var n=t(this.g.state);if(void 0!==n)return n}return this.Te.getImageSource(this.g.state)},n.prototype.onStateChange=function(t,n){this.updateTint(),this.updateRotation()},n.prototype.isTintAware=function(t){return null!=t&&"tint"in t},n.prototype.updateTint=function(){var t=this.qh;if(t&&this.isTintAware(t)){var n=this.g.state,i=this.$h.getColor(n);if(null!=i){var r=!1;t.tint!==i&&(t.tint=i,r=!0);var e=this.$h.getAlpha(n);return t.alpha!==e&&(t.alpha=e,r=!0),t.visible||(t.visible=!0,r=!0),r}if(t.visible)return t.visible=!1,!0}return!1},n.prototype.toRotation=function(t,n){var i=this.no;if(null!=i){if(!St(i))return i;var r=i(n);if(void 0!==r)return r}return t.getImageRotation(n)},n.prototype.updateRotation=function(){var t=this.qh;if(t){var n=this.Te,i=this.g.state,r=this.toRotation(n,i);if(null!=r){var e=t.transform;if(e.rotation!==r)return e.rotation=r,!0}}return!1},n.prototype.updateSource=function(){var n=this.computeSource(),i=this.Yh;if(n!==i){this.Yh=n;var r,e=this.g,u=this.qh,s=this.ro;if(n instanceof t.Texture)if(i instanceof t.Texture)i.off("update",s),u instanceof t.Sprite&&(u.texture=n,n.on("update",s));else{null!=u&&e.removeChild(u);var h=new t.Sprite(n);h.anchor.set(.5,.5),(r=e.getOverflowMask())&&(h.mask=r),n.on("update",s),e.addChild(h),this.qh=h}else i instanceof t.Texture?(i.off("update",s),null!=u&&(e.removeChild(u),u.destroy())):null!=u&&e.removeChild(u),null!=n&&((r=e.getOverflowMask())&&(n.mask=r),e.addChild(n)),this.qh=n;return!0}return!1},n.prototype.isRefitable=function(t){return null!=t&&t===this.qh},n.prototype.destroy=function(){this.source=null},n.prototype.onUpdate=function(){this.g.toDirty(),lt.update(this.g)},n}(),Ah=function(){function t(t,n,i){this.g=t,this.Te=n;var r=[];if(this.jh=r,null!=i){var e=i.images;if(null!=e){if(r.push(this.newImage(n,0<e.length?e[0]:void 0)),(null!=n.getSecondaryImageSource||1<e.length)&&r.push(this.newImage(new Sh(n),e[1])),(null!=n.getTertiaryImageSource||2<e.length)&&r.push(this.newImage(new jh(n),e[2])),3<e.length)for(var u=new Mh(n),s=3,h=e.length;s<h;++s)r.push(this.newImage(u,e[s]))}else r.push(this.newImage(n,i.image)),null!=n.getSecondaryImageSource&&r.push(this.newImage(new Sh(n))),null!=n.getTertiaryImageSource&&r.push(this.newImage(new jh(n)))}else r.push(this.newImage(n)),null!=n.getSecondaryImageSource&&r.push(this.newImage(new Sh(n))),null!=n.getTertiaryImageSource&&r.push(this.newImage(new jh(n)))}return t.prototype.newImage=function(t,n){return new Nh(this.g,t,n)},t.prototype.onStateChange=function(t,n){for(var i=this.jh,r=0,e=i.length;r<e;++r)i[r].onStateChange(t,n)},t.prototype.isRefitable=function(t){for(var n=this.jh,i=0,r=n.length;i<r;++i)if(n[i].isRefitable(t))return!0;return!1},t.prototype.update=function(t){for(var n=this.jh,i=0,r=n.length;i<r;++i){var e=n[i];e.updateSource(),e.updateTint(),e.updateRotation(),t.add(e)}},Object.defineProperty(t.prototype,"object",{get:function(){return this.jh[0].object},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this.jh[0].align},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"margin",{get:function(){return this.jh[0].margin},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this.jh[0].tint},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"source",{get:function(){return this.jh[0].source},set:function(t){this.jh[0].source=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.jh[0].rotation},set:function(t){this.jh[0].rotation=t},enumerable:!1,configurable:!0}),t.prototype.add=function(t){var n=this.newImage(this.Te,t);return this.jh.push(n),n},t.prototype.get=function(t){var n=this.jh;return 0<=t&&t<n.length?n[t]:null},t.prototype.remove=function(t){var n=this.jh;return 0<=t&&t<n.length&&(n[t].destroy(),!0)},t.prototype.size=function(){return this.jh.length},t.prototype.destroy=function(){for(var t=this.jh,n=0,i=t.length;n<i;++n)t[n].destroy()},t}(),Rh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.init=function(n){this.getImage(),t.prototype.init.call(this,n)},Object.defineProperty(n.prototype,"image",{get:function(){var t;return null!==(t=this.fn)&&void 0!==t?t:this.fn=this.newImage()},set:function(t){var n=this.image.get(0);null!=n&&(n.source=t)},enumerable:!1,configurable:!0}),n.prototype.getImage=function(){var t;return null!==(t=this.fn)&&void 0!==t?t:this.fn=this.newImage()},n.prototype.newImage=function(){return new Ah(this,this.theme,this.options)},n.prototype.onStateChange=function(n,i){t.prototype.onStateChange.call(this,n,i),this.getImage().onStateChange(n,i)},n.prototype.onReflowTextAndImage=function(){var t=this.getLayouter();this.getImage().update(t);var n=this.getText();n.update(t);var i=this.iu;t.execute(this.au,n.align,i.width.isOn?null:this.width,i.height.isOn?null:this.height),t.clear()},n.prototype.isRefitable=function(n){return!!t.prototype.isRefitable.call(this,n)||!!this.getImage().isRefitable(n)},n.prototype.getType=function(){return"DImageBase"},n.prototype.destroy=function(){var n=this.fn;null!=n&&n.destroy(),t.prototype.destroy.call(this)},n}(Eh),yh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.init=function(n){var i,r,e=this;t.prototype.init.call(this,n);var u=this.theme;this.eo=null!==(i=null==n?void 0:n.toggle)&&void 0!==i?i:u.isToggle(),this.uo=rr(null!==(r=null==n?void 0:n.when)&&void 0!==r?r:u.getWhen(),qs),this.on(he.tap,(function(t){e.onClick(t)})),this.initOnPress();var s=null==n?void 0:n.group;s&&s.add(this)},n.prototype.onShortcut=function(n){this.state.isActionable&&this.activate(n),t.prototype.onShortcut.call(this,n)},Object.defineProperty(n.prototype,"isToggle",{get:function(){return!!this.eo},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isGrouped",{get:function(){return!!this.so},set:function(t){this.so=t},enumerable:!1,configurable:!0}),n.prototype.initOnPress=function(){var t=this,n=null,i=function(){t.state.isPressed=!1,null!=n&&(n.off(he.up,i),n.off(he.upoutside,i),n.off(he.cancel,i),n=null)};this.on(he.down,(function(){if(t.state.isActionable){t.state.isPressed=!0;var r=lt.getLayer(t);r&&null!=(n=r.renderer.plugins.interaction)&&(n.on(he.up,i),n.on(he.upoutside,i),n.on(he.cancel,i))}}))},n.prototype.getType=function(){return"DButton"},n.prototype.onClick=function(t){this.uo===qs.CLICKED&&this.state.isActionable&&this.activate(t)},n.prototype.onDblClick=function(n,i){return this.uo===qs.DOUBLE_CLICKED&&this.state.isActionable&&this.activate(n),t.prototype.onDblClick.call(this,n,i)},n.prototype.activate=function(t){this.eo?this.so&&this.state.isActive||(this.onToggleStart(t),this.onToggleEnd(t)):this.onActivate(t)},n.prototype.onActivate=function(t){this.emit("active",this)},n.prototype.onInactivate=function(t){this.emit("inactive",this)},n.prototype.toggle=function(){this.state.isActionable&&this.eo&&(this.onToggleStart(),this.onToggleEnd())},n.prototype.onToggleStart=function(t){this.state.isActive=!this.state.isActive},n.prototype.onToggleEnd=function(t){this.state.isActive?this.onActivate(t):this.onInactivate(t)},n.prototype.onActivateKeyDown=function(t){this.state.isActionable&&(this.eo?this.onToggleStart(t):this.state.isPressed=!0)},n.prototype.onActivateKeyUp=function(t){this.state.isActionable&&(this.eo?this.onToggleEnd(t):(this.state.isPressed&&this.onActivate(t),this.state.isPressed=!1))},n.prototype.onKeyDown=function(n){return Qe.isActivateKey(n)&&this.onActivateKeyDown(n),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyUp=function(n){return Qe.isActivateKey(n)&&this.onActivateKeyUp(n),t.prototype.onKeyUp.call(this,n)},n.prototype.onStateChange=function(n,i){t.prototype.onStateChange.call(this,n,i),n.isPressed?i.isPressed||this.onPress():i.isPressed&&this.onUnpress()},n.prototype.onPress=function(){this.emit("press",this)},n.prototype.onUnpress=function(){this.emit("unpress",this)},n.prototype.destroy=function(){var n,i;null===(i=null===(n=this.tu)||void 0===n?void 0:n.group)||void 0===i||i.remove(this),t.prototype.destroy.call(this)},n}(Rh),kh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DButton"},n}(yh),Lh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DButtonPrimary"},n}(kh),xh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DLayoutHorizontal"},n}(Ys),Bh=function(t){function n(n,i){var r=t.call(this,i)||this;return r.g=n,r}return G(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n);var i=this.newChildren();if(0<i.length)for(var r=0,e=i.length;r<e;++r){var u=i[r];null!=u&&this.addChild(u)}},n.prototype.newChildren=function(){return[this.buttonSpaceLeft,this.buttonCancel,this.buttonOk,this.buttonSpaceRight]},Object.defineProperty(n.prototype,"buttonSpaceLeft",{get:function(){var t=this.ho;return void 0===t&&(t=this.newButtonSpaceLeft(),this.ho=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonSpaceLeft=function(){var t,n,i,r;return(null!==(r=null===(i=null===(n=null===(t=this.tu)||void 0===t?void 0:t.button)||void 0===n?void 0:n.space)||void 0===i?void 0:i.left)&&void 0!==r?r:this.theme.isButtonSpaceLeftEnabled())?new Xs({weight:1}):null},Object.defineProperty(n.prototype,"buttonSpaceRight",{get:function(){var t=this.oo;return void 0===t&&(t=this.newButtonSpaceRight(),this.oo=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonSpaceRight=function(){var t,n,i,r;return(null!==(r=null===(i=null===(n=null===(t=this.tu)||void 0===t?void 0:t.button)||void 0===n?void 0:n.space)||void 0===i?void 0:i.right)&&void 0!==r?r:this.theme.isButtonSpaceRightEnabled())?new Xs({weight:1}):null},Object.defineProperty(n.prototype,"buttonCancel",{get:function(){var t=this.ao;return void 0===t&&(t=this.newButtonCancel(),this.ao=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonCancel=function(){var t,n,i=this,r=null===(n=null===(t=this.tu)||void 0===t?void 0:t.button)||void 0===n?void 0:n.cancel;return void 0===r&&(r=this.theme.getButtonCancel()),null!=r?new Lh({text:{value:r},on:{active:function(){i.g.cancel()}}}):null},Object.defineProperty(n.prototype,"buttonOk",{get:function(){var t=this.co;return void 0===t&&(t=this.newButtonOk(),this.co=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonOk=function(){var t,n,i=this,r=null===(n=null===(t=this.tu)||void 0===t?void 0:t.button)||void 0===n?void 0:n.ok;return void 0===r&&(r=this.theme.getButtonOk()),null!=r?null!=this.buttonCancel?new kh({text:{value:r},on:{active:function(){i.g.ok()}}}):new Lh({text:{value:r},on:{active:function(){i.g.ok()}}}):null},n.prototype.getType=function(){return"DDialogLayeredFooter"},n}(xh),_h=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DButtonAmbient"},n}(kh),Ph=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DDialogLayeredHeaderButtonClose"},n}(_h),Uh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DDialogLayeredHeaderSeparator"},n}(Rh),Fh=function(t){function n(n,i){var r=t.call(this,i)||this;r.g=n;var e=r.separator;e&&r.addChild(e);var u=r.buttonClose;return u&&(r.addChild(u),u.on("active",(function(){r.g.cancel()}))),r}return G(n,t),Object.defineProperty(n.prototype,"buttonClose",{get:function(){var t=this.fo;return void 0===t&&(t=this.newButtonClose(),this.fo=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonClose=function(){var t,n;return!1!==(null===(n=null===(t=this.tu)||void 0===t?void 0:t.button)||void 0===n?void 0:n.close)?new Ph:null},Object.defineProperty(n.prototype,"separator",{get:function(){var t=this.lo;return void 0===t&&(t=this.newSeparator(),this.lo=t),t},enumerable:!1,configurable:!0}),n.prototype.newSeparator=function(){var t;return!1!==(null===(t=this.tu)||void 0===t?void 0:t.separator)?new Uh:null},n.prototype.getType=function(){return"DDialogLayeredHeader"},n}(Rh),Gh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.addChild(this.layout)},Object.defineProperty(n.prototype,"layout",{get:function(){var t=this.vo;return null==t&&(t=this.newLayout(),this.vo=t),t},enumerable:!1,configurable:!0}),n.prototype.newLayout=function(){return new Js(this.toLayoutOptions(this.theme,this.tu))},n.prototype.toLayoutOptions=function(t,n){var i,r,e=null!==(r=null!==(i=null==n?void 0:n.layout)&&void 0!==i?i:t.getLayout())&&void 0!==r?r:this.newLayoutOptions(t,n);return void 0===e.children&&(e.children=this.newLayoutChildren(t,n)),e},n.prototype.newLayoutOptions=function(t,n){return{width:"padding",height:"auto",margin:0}},n.prototype.newLayoutChildren=function(t,n){return[this.header,this.content,this.footer]},Object.defineProperty(n.prototype,"header",{get:function(){var t=this.bo;return void 0===t&&(t=this.newHeader(),this.bo=t),t},enumerable:!1,configurable:!0}),n.prototype.newHeader=function(){var t=this.toHeaderOptions(this.theme,this.tu);return null!==t?new Fh(this,t):null},n.prototype.toHeaderOptions=function(t,n){if(n){var i=n.header;if(void 0!==i)return i}return t.getHeader()},Object.defineProperty(n.prototype,"content",{get:function(){var t=this.do;return null==t&&(t=this.newContent(),this.do=t),t},enumerable:!1,configurable:!0}),n.prototype.newContent=function(){return new Zs(this.toContentOptions(this.theme,this.tu))},n.prototype.toContentOptions=function(t,n){var i,r,e=null!==(r=null!==(i=null==n?void 0:n.content)&&void 0!==i?i:t.getContent())&&void 0!==r?r:{};return void 0===e.children&&(e.children=this.newContentChildren(t,n)),e},n.prototype.newContentChildren=function(t,n){return[]},Object.defineProperty(n.prototype,"footer",{get:function(){var t=this.mo;return void 0===t&&(t=this.newFooter(),this.mo=t),t},enumerable:!1,configurable:!0}),n.prototype.newFooter=function(){var t=this.toFooterOptions(this.theme,this.tu);return null!==t?new Bh(this,t):null},n.prototype.toFooterOptions=function(t,n){if(n){var i=n.footer;if(void 0!==i)return i}return t.getFooter()},n.prototype.findFirstFocusable=function(t){return t.find(this.content,!1,!0,!0)},n.prototype.ok=function(){this.onOk(this.getResolvedValue())},n.prototype.onOk=function(t){this.doResolve(t),this.emit("ok",t,this)},n.prototype.cancel=function(){this.onCancel(this.getRejectReason())},n.prototype.onCancel=function(t){this.doReject(t),this.emit("cancel",t,this)},n.prototype.getRejectReason=function(){},n.prototype.getType=function(){return"DDialogLayered"},n}(Vs),Hh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newContentChildren=function(n,i){var r=t.prototype.newContentChildren.call(this,n,i);return r.push(this.inputLayout),r},n.prototype.toInputMargin=function(t,n){var i,r;return null!==(r=null===(i=null==n?void 0:n.input)||void 0===i?void 0:i.margin)&&void 0!==r?r:t.getInputMargin()},Object.defineProperty(n.prototype,"inputLayout",{get:function(){var t=this.wo;return null==t&&(t=this.newInputLayout(),this.wo=t),t},enumerable:!1,configurable:!0}),n.prototype.newInputLayout=function(){var t=this.toInputMargin(this.theme,this.tu);return new xh({width:"padding",height:"auto",margin:0,children:[new Xs({width:t}),this.input,new Xs({width:t})]})},Object.defineProperty(n.prototype,"input",{get:function(){var t=this.Oo;if(null==t){var n=this.tu;t=this.newInput(null==n?void 0:n.input),this.Oo=t}return t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.input.value},set:function(t){this.input.value=t},enumerable:!1,configurable:!0}),n.prototype.getResolvedValue=function(){return this.input.value},n.prototype.getType=function(){return"DDialogInput"},n}(Gh),zh=function(t){function n(n){var i=t.call(this)||this;i.po=[],i.os=null,i.Do=function(t){i.active=t};var r=null==n?void 0:n.on;if(null!=r)for(var e in r){var u=r[e];u&&i.on(e,u)}return i.emit("init",i),i}return G(n,t),n.prototype.add=function(t){if(this.po.indexOf(t)<0){this.po.push(t),t.isGrouped=!0;var n=this.fh;null!=n&&(t.state.isEnabled=n),t.on("active",this.Do),t.state.isActive&&(this.active=t)}},Object.defineProperty(n.prototype,"active",{get:function(){return this.os},set:function(t){if((null==t||t.isToggle)&&this.os!==t){var n=this.os;this.os=t;for(var i=this.po,r=0,e=i.length;r<e;++r){var u=i[r];u!==t&&u.isToggle&&u.state.isActive&&u.toggle()}this.emit("active",t,n,this)}},enumerable:!1,configurable:!0}),n.prototype.remove=function(t){var n=this.po,i=n.indexOf(t);0<=i&&(n.splice(i,1),t.isGrouped=!1,t.off("active",this.Do),this.os===t&&(this.active=null))},n.prototype.contains=function(t){return 0<=this.po.indexOf(t)},n.prototype.clear=function(){for(var t=this.po,n=0,i=t.length;n<i;++n)t[n].isGrouped=!1;t.length=0,this.active=null},n.prototype.size=function(){return this.po.length},n.prototype.each=function(t){for(var n=this.po,i=0,r=n.length;i<r&&!1!==t(n[i]);++i);},n.prototype.disable=function(){for(var t=this.po,n=0,i=t.length;n<i;++n)t[n].state.isDisabled=!0;this.fh=!1},n.prototype.enable=function(){for(var t=this.po,n=0,i=t.length;n<i;++n)t[n].state.isDisabled=!1;this.fh=!0},n.prototype.destroy=function(){this.clear()},n}(t.utils.EventEmitter),Vh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DInputBooleanButtonOff"},n}(kh),Wh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DInputBooleanButtonOn"},n}(kh),Xh=function(t){function n(n){var i=t.call(this,n)||this;i.ri=0,i.addChild(i.getButtonOff()),i.addChild(i.getButtonOn());var r=null==n?void 0:n.value;return null!=r&&(i.value=r),i.getButtonGroup().on("active",(function(){if(i.ri<=0){var t=i.value;i.emit("change",t,!t,i)}})),i}return G(n,t),n.prototype.getButtonGroup=function(){var t=this.Eo;return null==t&&(t=this.newButtonGroup(),this.Eo=t),t},n.prototype.newButtonGroup=function(){return new zh},n.prototype.getButtonOn=function(){var t=this.Mo;return null==t&&(t=this.newButtonOn(),this.Mo=t),t},n.prototype.newButtonOn=function(){return new Wh({weight:1,group:this.getButtonGroup()})},n.prototype.getButtonOff=function(){var t=this.So;return null==t&&(t=this.newButtonOff(),this.So=t),t},n.prototype.newButtonOff=function(){return new Vh({weight:1,group:this.getButtonGroup(),state:gt.ACTIVE})},Object.defineProperty(n.prototype,"value",{get:function(){return this.getButtonOn().state.isActive},set:function(t){if(this.value!==t){this.ri+=1;try{t?this.getButtonOn().activate():this.getButtonOff().activate()}catch(t){}this.ri-=1}},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DInputBoolean"},n}(xh),Kh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newInput=function(t){return new Xh(this.toInputOptions(t))},n.prototype.toInputOptions=function(t){return t?(void 0===t.weight&&(t.weight=1),t):{weight:1}},n.prototype.getType=function(){return"DDialogInputBoolean"},n}(Hh),Yh=function(t){function n(n){var i=t.call(this,n,mn.NONE)||this;return i.target=pn.ofStringOrNull(n.target),i.onInputAction=n.onInputAction,i.isOpened=!1,i.step=pn.ofNumberOrNull(n.step),i.min=pn.ofNumberOrNull(n.min),i.max=pn.ofNumberOrNull(n.max),i}return G(n,t),n.prototype.execute=function(t,n,i){var r=this;if(!this.isOpened&&this.condition(t,i,On)){var e=this.target(t,i,On);if(null!=e){var u=this.initial(t,i,On),s=this.step(t,i,On),h=this.min(t,i,On),o=this.max(t,i,On);this.isOpened=!0,setTimeout((function(){r.open(t,e,u,s,h,o).then((function(n){r.isOpened=!1,bs.execute(t,r.onInputAction,e,n,i)}),(function(){r.isOpened=!1}))}),0)}}},n}(En),Jh=function(t){function n(n){var i=t.call(this,n)||this;return i.initial=pn.ofBooleanOrFalse(n.initial),i}return G(n,t),n.prototype.open=function(t,i,r,e,u,s){var h=n.DIALOG;if(null==h)h=new Kh({header:{text:{value:i},button:{close:!1}}}),n.DIALOG=h;else{var o=h.header;o&&(o.text=i)}return h.value=r,h.open(t)},n}(Yh),Zh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getUtil=function(){var t=this.ah;return null==t&&(t=this.newUtil(),this.ah=t),t},n.prototype.newUtil=function(){return new us(this,this.newOperation(),this.theme,this.tu)},n.prototype.newOperation=function(){var t=this;return{getElementRect:function(n,i,r){return t.getElementRect(n,i,r)},getElementMatrix:function(){return null},getClipperRect:function(n,i,r){return t.getClipperRect(n,i,r)},getPadding:function(){return t.padding},containsPoint:function(n){return t.containsPoint(n)},onStart:function(){},onCancel:function(){},onEnd:function(){}}},Object.defineProperty(n.prototype,"element",{get:function(){return this.getUtil().element},enumerable:!1,configurable:!0}),n.prototype.onDownThis=function(n){var i=this.getUtil();i.onDowning(n),t.prototype.onDownThis.call(this,n),i.onDown(n)},n.prototype.onDblClick=function(n,i){return this.getUtil().onDblClick(n,i),t.prototype.onDblClick.call(this,n,i)},n.prototype.onFocus=function(){t.prototype.onFocus.call(this),this.getUtil().onFocus()},n.prototype.onBlur=function(){t.prototype.onBlur.call(this),this.getUtil().onBlur()},n.prototype.start=function(){this.getUtil().start()},n.prototype.render=function(n){this.getUtil().onRender(n),t.prototype.render.call(this,n)},n.prototype.getElementRect=function(t,n,i){return n.set(0,0),this.toGlobal(n,n,!1),i.x=n.x,i.y=n.y,n.set(this.width,this.height),this.toGlobal(n,n,!0),i.width=n.x-i.x,i.height=n.y-i.y,i},n.prototype.getClipperRect=function(t,n,i){return us.getClipperRect(this.parent,this,t,n,i)},n.prototype.cancel=function(){this.getUtil().cancel()},n.prototype.end=function(){this.getUtil().end()},n.prototype.select=function(){return this.getUtil().select(),this},n.prototype.onActivateKeyDown=function(t){this.state.isActionable&&(this.state.isPressed=!0)},n.prototype.onActivateKeyUp=function(t){this.state.isActionable&&(this.state.isPressed&&this.start(),this.state.isPressed=!1)},n.prototype.onKeyDown=function(n){return Qe.isActivateKey(n)&&this.onActivateKeyDown(n),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyUp=function(n){return Qe.isActivateKey(n)&&this.onActivateKeyUp(n),t.prototype.onKeyUp.call(this,n)},n.prototype.getType=function(){return"DHtmlElement"},n}(Rh),qh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newOperation=function(){var t=this;return{getElementRect:function(n,i,r){return t.getElementRect(n,i,r)},getElementMatrix:function(){return null},getClipperRect:function(n,i,r){return t.getClipperRect(n,i,r)},getPadding:function(){return t.padding},containsPoint:function(n){return t.containsPoint(n)},onStart:function(){t.text.hide()},onCancel:function(){t.text.show()},onEnd:function(){},getValue:function(){return t.text.computed},onValueInput:function(n){t.onValueInput(n)},onValueChange:function(n,i){t.text=n,t.onValueChange(n,i)},onEnter:function(){t.onEnter()},applyTitle:function(){t.applyTitle()}}},Object.defineProperty(n.prototype,"value",{get:function(){return this.text.computed},set:function(t){this.text=t},enumerable:!1,configurable:!0}),n.prototype.newText=function(){var n=this,i=t.prototype.newText.call(this);return i.on("change",(function(){n.validate()})),i},n.prototype.onValueChange=function(t,n){this.emit("change",t,n,this)},n.prototype.onValueInput=function(t){this.emit("input",t,this)},n.prototype.onEnter=function(){this.emit("enter",this)},n.prototype.validate=function(){return this.getUtil().validate()},n.prototype.applyTitle=function(){this.getUtil().applyTitle()||t.prototype.applyTitle.call(this)},n.prototype.getType=function(){return"DInput"},n}(Zh),Qh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DInputInput"},n}(qh),$h=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newUtil=function(){return new ls(this,this.newOperation(),this.theme,this.tu)},Object.defineProperty(n.prototype,"step",{get:function(){return this.getUtil().step},set:function(t){this.getUtil().step=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"min",{get:function(){return this.getUtil().min},set:function(t){this.getUtil().min=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"max",{get:function(){return this.getUtil().max},set:function(t){this.getUtil().max=t},enumerable:!1,configurable:!0}),n}(Qh),to=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DInputInteger"},n}($h),no=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newInput=function(t){var n=this,i=new to(this.toInputOptions(t));return i.on("enter",(function(){n.ok()})),i},n.prototype.toInputOptions=function(t){return t?(void 0===t.weight&&(t.weight=1),t):{weight:1}},n.prototype.getType=function(){return"DDialogInputInteger"},n}(Hh),io=function(t){function n(n){var i=t.call(this,n)||this;return i.initial=pn.ofNumber(n.initial),i}return G(n,t),n.prototype.open=function(t,i,r,e,u,s){var h=n.DIALOG;if(null==h)h=new no({header:{text:{value:i},button:{close:!1}},input:{step:e,min:u,max:s,text:{value:r}}}),n.DIALOG=h;else{var o=h.header;o&&(o.text=i);var a=h.input;a.step=e,a.min=u,a.max=s,h.value=r}return h.open(t)},n}(Yh),ro=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DInputReal"},n}($h),eo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newInput=function(t){var n=this,i=new ro(this.toInputOptions(t));return i.on("enter",(function(){n.ok()})),i},n.prototype.toInputOptions=function(t){return t?(void 0===t.weight&&(t.weight=1),t):{weight:1}},n.prototype.getType=function(){return"DDialogInputReal"},n}(Hh),uo=function(t){function n(n){var i=t.call(this,n)||this;return i.initial=pn.ofNumber(n.initial),i}return G(n,t),n.prototype.open=function(t,i,r,e,u,s){var h=n.DIALOG;if(null==h)h=new eo({header:{text:{value:i},button:{close:!1}},input:{step:e,min:u,max:s,text:{value:r}}}),n.DIALOG=h;else{var o=h.header;o&&(o.text=i);var a=h.input;a.step=e,a.min=u,a.max=s,h.value=r}return h.open(t)},n}(Yh),so=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newUtil=function(){return new ps(this,this.newOperation(),this.theme,this.tu)},n.prototype.getType=function(){return"DInputText"},n}(Qh),ho=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newInput=function(t){var n=this,i=new so(this.toInputOptions(t));return i.on("enter",(function(){n.ok()})),i},n.prototype.toInputOptions=function(t){return t?(void 0===t.weight&&(t.weight=1),t):{weight:1}},n.prototype.getType=function(){return"DDialogInputText"},n}(Hh),oo=function(t){function n(n){var i=t.call(this,n)||this;return i.initial=pn.ofString(n.initial),i}return G(n,t),n.prototype.open=function(t,i,r,e,u,s){var h=n.DIALOG;if(null==h)h=new ho({header:{text:{value:i},button:{close:!1}}}),n.DIALOG=h;else{var o=h.header;o&&(o.text=i)}return h.value=r,h.open(t)},n}(Yh),ao=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DDialogFittedContent"},n}(Zs),co=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newLayoutOptions=function(t,n){return{width:"auto",height:"auto",margin:0}},n.prototype.newContent=function(){return new ao(this.toContentOptions(this.theme,this.tu))},n.prototype.getType=function(){return"DDialogFitted"},n}(Gh),fo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DPickerDatetimeButtonBack"},n}(_h),lo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DPickerDatetimeButtonDate"},n}(_h),vo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DPickerDatetimeButtonNext"},n}(_h),bo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DText"},n}(Eh),go=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DPickerDatetimeLabel"},n}(bo),mo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DPickerDatetimeLabelDate"},n}(bo),wo=function(t){function n(n){var i=t.call(this,n)||this;return i.renderable=!1,i}return G(n,t),n.prototype.getType=function(){return"DPickerDatetimeSpace"},n}(ru),Oo={NONE:0,DATE:1,HOURS:2,MINUTES:4,SECONDS:8,TIME:14,ALL:15},po=function(){function t(){}return t.from=function(t,n){var i=null==n?void 0:n.mask;if(null==i){if(Tt(t)){var r=it.getInstance().get(t);if(null!=r)return r.getMask()}else if(null!=t)return t.getMask();return Oo.NONE}if(Tt(i))return Oo[i];if(jt(i))return i;for(var e=Oo.NONE,u=0,s=i.length;u<s;++u)e|=Oo[i[u]];return e},t}(),Do=function(){function t(t,n){var i,r;this.jo=null!==(i=null==t?void 0:t.date)&&void 0!==i?i:null,this.To=null!==(r=null==t?void 0:t.inclusive)&&void 0!==r&&r,this.et=n}return Object.defineProperty(t.prototype,"date",{get:function(){return this.jo},set:function(t){this.jo!==t&&(this.jo=t,this.et())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inclusive",{get:function(){return this.To},set:function(t){this.To!==t&&(this.To=t,this.et())},enumerable:!1,configurable:!0}),t}(),Eo=function(){function t(t){this.g=t}return t.prototype.min=function(t){var n=this.g,i=n.lower,r=i.date,e=n.constant;if(null!=r){var u=n.mask;if(u&Oo.DATE){if(r.getFullYear()<t.getFullYear())return e.hour.min;if(r.getMonth()<t.getMonth())return e.hour.min;if(r.getDate()<t.getDate())return e.hour.min}var s=r.getHours();return i.inclusive||u&Oo.SECONDS&&r.getSeconds()<e.second.max||u&Oo.MINUTES&&r.getMinutes()<e.minute.max?s:s+1}return e.hour.min},t.prototype.max=function(t){var n=this.g,i=n.upper,r=i.date,e=n.constant;if(null!=r){var u=n.mask;if(u&Oo.DATE){if(t.getFullYear()<r.getFullYear())return e.hour.max;if(t.getMonth()<r.getMonth())return e.hour.max;if(t.getDate()<r.getDate())return e.hour.max}var s=r.getHours();return i.inclusive||u&Oo.SECONDS&&e.second.min<r.getSeconds()||u&Oo.MINUTES&&e.minute.min<r.getMinutes()?s:s-1}return e.hour.max},t}(),Mo=function(){function t(t){this.g=t}return t.prototype.min=function(t){var n=this.g,i=n.lower,r=i.date,e=n.constant;if(null!=r){var u=n.mask;if(u&Oo.DATE){if(r.getFullYear()<t.getFullYear())return e.minute.min;if(r.getMonth()<t.getMonth())return e.minute.min;if(r.getDate()<t.getDate())return e.minute.min}if(u&Oo.HOURS&&r.getHours()<t.getHours())return e.minute.min;var s=r.getMinutes();return i.inclusive||u&Oo.SECONDS&&r.getSeconds()<e.second.max?s:s+1}return e.minute.min},t.prototype.max=function(t){var n=this.g,i=n.upper,r=i.date,e=n.constant;if(null!=r){var u=n.mask;if(u&Oo.DATE){if(t.getFullYear()<r.getFullYear())return e.minute.max;if(t.getMonth()<r.getMonth())return e.minute.max;if(t.getDate()<r.getDate())return e.minute.max}if(u&Oo.HOURS&&t.getHours()<r.getHours())return e.minute.max;var s=r.getMinutes();return i.inclusive||u&Oo.SECONDS&&e.second.min<r.getSeconds()?s:s-1}return e.minute.max},t}(),So=function(){function t(t){this.g=t}return t.prototype.min=function(t){var n=this.g,i=n.lower,r=i.date,e=n.constant;if(null!=r){var u=n.mask;if(u&Oo.DATE){if(r.getFullYear()<t.getFullYear())return e.second.min;if(r.getMonth()<t.getMonth())return e.second.min;if(r.getDate()<t.getDate())return e.second.min}return u&Oo.HOURS&&r.getHours()<t.getHours()||u&Oo.MINUTES&&r.getMinutes()<t.getMinutes()?e.second.min:r.getSeconds()+(i.inclusive?0:1)}return e.second.min},t.prototype.max=function(t){var n=this.g,i=n.upper,r=i.date,e=n.constant;if(null!=r){var u=n.mask;if(u&Oo.DATE){if(t.getFullYear()<r.getFullYear())return e.second.max;if(t.getMonth()<r.getMonth())return e.second.max;if(t.getDate()<r.getDate())return e.second.max}return u&Oo.HOURS&&t.getHours()<r.getHours()||u&Oo.MINUTES&&t.getMinutes()<r.getMinutes()?e.second.max:r.getSeconds()-(i.inclusive?0:1)}return e.second.max},t}(),jo=function(){function t(t,n){this.constant=this.newConstant(),this.lower=new Do(t&&t.lower,n),this.upper=new Do(t&&t.upper,n),this.mask=Oo.ALL,this.hours=new Eo(this),this.minutes=new Mo(this),this.seconds=new So(this)}return t.prototype.newConstant=function(){return{second:{min:0,max:59},minute:{min:0,max:59},hour:{min:0,max:23}}},t.prototype.adjust=function(t){var n=this.test(t);if(n<0){var i=this.lower,r=i.date;if(r)return t.setTime(r.getTime()),i.inclusive||((e=this.mask)&Oo.SECONDS?t.setSeconds(r.getSeconds()+1):e&Oo.MINUTES?t.setMinutes(r.getMinutes()+1):e&Oo.HOURS?t.setHours(r.getHours()+1):e&Oo.DATE&&t.setDate(r.getDate()+1)),!0}else if(0<n){var e,u=this.upper,s=u.date;if(s)return t.setTime(s.getTime()),u.inclusive||((e=this.mask)&Oo.SECONDS?t.setSeconds(s.getSeconds()-1):e&Oo.MINUTES?t.setMinutes(s.getMinutes()-1):e&Oo.HOURS?t.setHours(s.getHours()-1):e&Oo.DATE&&t.setDate(s.getDate()-1)),!0}return!1},t.prototype.compare=function(t,n){var i=this.mask;if(i&Oo.DATE){var r,e,u,s,h=t.getFullYear(),o=n.getFullYear();if(h!==o)return h<o?-1:1;if((r=t.getMonth())!==(e=n.getMonth()))return r<e?-1:1;if((u=t.getDate())!==(s=n.getDate()))return u<s?-1:1}if(i&Oo.HOURS){var a=t.getHours(),c=n.getHours();if(a!==c)return a<c?-1:1}return i&Oo.MINUTES&&(r=t.getMinutes())!==(e=n.getMinutes())?r<e?-1:1:i&Oo.SECONDS&&(u=t.getSeconds())!==(s=n.getSeconds())?u<s?-1:1:0},t.prototype.test=function(t){var n=this.lower,i=n.date;if(null!=i){var r=this.compare(i,t);return n.inclusive?r<=0?0:-1:r<0?0:-1}var e=this.upper,u=e.date;return null!=u?(r=this.compare(t,u),e.inclusive?r<=0?0:1:r<0?0:1):0},t.prototype.contains=function(t){return 0===this.test(t)},t}(),To=function(t,n,i){if(t){var r=t.date,e=t.inclusive;return{date:void 0!==r?r:n,inclusive:void 0!==e?e:i}}return{date:n,inclusive:i}},Io=function(t){function n(n){var i=t.call(this,n)||this;return i.onNewChange(),i}return G(n,t),n.prototype.init=function(n){var i,r=this;t.prototype.init.call(this,n);var e=this.theme;this.Io=new Date;var u=this.Io.getTime();this.Co=new Date(u),this.No=new jo(function(t,n){return n?{lower:To(n.lower,t.getLowerBound(),t.isLowerBoundInclusive()),upper:To(n.upper,t.getUpperBound(),t.isUpperBoundInclusive())}:{lower:{date:t.getLowerBound(),inclusive:t.isLowerBoundInclusive()},upper:{date:t.getUpperBound(),inclusive:t.isUpperBoundInclusive()}}}(e,null==n?void 0:n.bounds),(function(){r.onNewChange()}));var s=null!==(i=null==n?void 0:n.margin)&&void 0!==i?i:e.getMargin();new Js({parent:this,x:"padding",y:"padding",width:"auto",height:"auto",margin:s,children:this.newChildren(e,n,s)})},Object.defineProperty(n.prototype,"current",{get:function(){return this.Io},set:function(t){this.Io.getTime()!==t.getTime()&&(this.Io=t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"new",{get:function(){return this.Co},set:function(t){this.Co.getTime()!==t.getTime()&&(this.Co=t,this.onNewChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bounds",{get:function(){return this.No},enumerable:!1,configurable:!0}),n.prototype.hasHours=function(){return null!=this.Ao},n.prototype.hasMinutes=function(){return null!=this.Ro},n.prototype.hasSeconds=function(){return null!=this.yo},n.prototype.reset=function(){var t=this.Io.getTime();this.Co.setTime(t),this.onReset()},n.prototype.onReset=function(){this.onNewChange()},n.prototype.onNewChange=function(){var t=this.Co,n=this.No;n.adjust(this.Co);var i=this.Ao;if(i){var r=n.hours;i.value=t.getHours(),i.min=r.min(t),i.max=r.max(t)}var e=this.Ro;if(e){var u=n.minutes;e.value=t.getMinutes(),e.min=u.min(t),e.max=u.max(t)}var s=this.yo;if(s){var h=n.seconds;s.value=t.getSeconds(),s.min=h.min(t),s.max=h.max(t)}},n.prototype.newChildren=function(t,n,i){var r=po.from(t,n);return this.No.mask=r,this.Ao=r&Oo.HOURS?this.newInputHours(t,n):null,this.Ro=r&Oo.MINUTES?this.newInputMinutes(t,n):null,this.yo=r&Oo.SECONDS?this.newInputSeconds(t,n):null,[this.newTimeLayout(this.Ao,this.Ro,this.yo,i)]},n.prototype.newTimeLayout=function(t,n,i,r){var e=this.newTimeLayoutChildren(t,n,i);return 0<e.length?new xh({width:this.getTimeLayoutWidth(),height:this.getTimeLayoutHeight(),margin:r,children:e}):null},n.prototype.getTimeLayoutWidth=function(){return"auto"},n.prototype.getTimeLayoutHeight=function(){return"auto"},n.prototype.newTimeLayoutChildren=function(t,n,i){var r=[];return null!=t&&r.push(t),null!=n&&(0<r.length&&r.push(this.newMinuteSeparator()),r.push(n)),null!=i&&(0<r.length&&r.push(this.newSecondSeparator()),r.push(i)),r},n.prototype.newMinuteSeparator=function(){return new bo({width:"auto",text:{value:this.getMinuteSeparator()}})},n.prototype.getMinuteSeparator=function(){return":"},n.prototype.newSecondSeparator=function(){return new bo({width:"auto",text:{value:this.getSecondSeparator()}})},n.prototype.getSecondSeparator=function(){return":"},n.prototype.adjustInputOptions=function(t,n,i){return null==n.step&&(n.step=1),null==n.min&&(n.min=0),null==n.max&&(n.max=i),n},n.prototype.newInputHours=function(t,n){var i,r=this,e=null!==(i=null==n?void 0:n.hours)&&void 0!==i?i:t.getHoursOptions(),u=this.No.constant.hour.max,s=new to(this.adjustInputOptions(t,e,u));return s.on("change",(function(t){r.onHoursChange(t)})),s},n.prototype.onHoursChange=function(t){this.Co.setHours(t),this.onNewChange()},n.prototype.newInputMinutes=function(t,n){var i=this,r=(null==n?void 0:n.minutes)||t.getMinutesOptions(),e=this.No.constant.minute.max,u=new to(this.adjustInputOptions(t,r,e));return u.on("change",(function(t){i.onMinutesChange(t)})),u},n.prototype.onMinutesChange=function(t){this.Co.setMinutes(t),this.onNewChange()},n.prototype.newInputSeconds=function(t,n){var i=this,r=(null==n?void 0:n.seconds)||t.getSecondsOptions(),e=this.No.constant.second.max,u=new to(this.adjustInputOptions(t,r,e));return u.on("change",(function(t){i.onSecondsChange(t)})),u},n.prototype.onSecondsChange=function(t){this.Co.setSeconds(t)},n.prototype.getType=function(){return"DPickerTime"},n}(ru),Co=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.ko=new Date(this.Io.getTime())},n.prototype.newChildren=function(n,i,r){var e,u;this.Lo=this.newDateButtons(n,i),this.xo=null!==(u=null===(e=null==i?void 0:i.date)||void 0===e?void 0:e.decorator)&&void 0!==u?u:n.getDateDecorator(),this.fs=this.newLabel(n,i);var s=t.prototype.newChildren.call(this,n,i,r);return s.unshift(new xh({width:"100%",height:"auto",children:[this.newBackButton(n,i),this.fs,this.newNextButton(n,i)]}),new xh({width:"auto",height:"auto",margin:r,children:this.newDateLabels(n,i)}),new Js({width:"auto",height:"auto",margin:r,column:7,children:this.Lo})),s},Object.defineProperty(n.prototype,"page",{get:function(){return this.ko},set:function(t){this.ko.getTime()!==t.getTime()&&(this.ko=t,this.onPageChange())},enumerable:!1,configurable:!0}),n.prototype.onReset=function(){this.ko.setTime(this.Io.getTime()),t.prototype.onReset.call(this)},n.prototype.next=function(){var t=this.ko;t.setFullYear(t.getFullYear(),t.getMonth()+1,1),t.setHours(0,0,0,0),this.onPageChange()},n.prototype.back=function(){var t=this.ko;t.setFullYear(t.getFullYear(),t.getMonth()-1,1),t.setHours(0,0,0,0),this.onPageChange()},n.prototype.onNewChange=function(){this.No.adjust(this.ko),t.prototype.onNewChange.call(this),this.onPageChange()},n.prototype.onPageChange=function(){var t=this.Lo,n=this.No,i=this.ko,r=this.Co,e=new Date(i.getTime());e.setDate(1),e.setHours(0,0,0,0);for(var u=this.theme,s=(e.getDay()-u.getDayStart()+7)%7,h=0;h<s;++h)t[h].show();for(h=s;h<7;++h)t[h].hide();var o=this.xo;e.setFullYear(e.getFullYear(),e.getMonth()+1,0);var a=e.getDate(),c=r.getFullYear()===e.getFullYear()&&r.getMonth()===e.getMonth()?r.getDate():0;for(h=0;h<a;++h)e.setDate(h+1),(f=t[h+7]).state.isActive=c===h+1,f.state.isDisabled=!n.contains(e),f.show(),o(e,f);for(h=a;h<31;++h){var f;(f=t[h+7]).state.isActive=!1,f.hide()}e.setTime(i.getTime()),this.fs.text=e},n.prototype.adjustInputOptions=function(n,i,r){return null==i.weight&&(i.weight=1),t.prototype.adjustInputOptions.call(this,n,i,r)},n.prototype.getTimeLayoutWidth=function(){return"100%"},n.prototype.toLabelOptions=function(t,n){var i=n&&n.label||{};void 0===i.weight&&(i.weight=1),void 0===i.padding&&(i.padding=0);var r=i.text=i.text||{},e=r.align=r.align||{};return void 0===e.horizontal&&(e.horizontal="CENTER"),void 0===r.formatter&&(r.formatter=t.getLabelFormatter()),i},n.prototype.newLabel=function(t,n){return new go(this.toLabelOptions(t,n))},n.prototype.newBackButton=function(t,n){var i=this,r=null==n?void 0:n.back;if(void 0===r&&(r=t.getBackButtonOptions()),null!=r){var e=new fo(r);return e.on("active",(function(){i.back()})),e}return null},n.prototype.newNextButton=function(t,n){var i=this,r=null==n?void 0:n.next;if(void 0===r&&(r=t.getNextButtonOptions()),null!=r){var e=new vo(r);return e.on("active",(function(){i.next()})),e}return null},n.prototype.newDateLabels=function(t,n){for(var i=t.getDayLabels(),r=t.getDayStart(),e=[],u=0;u<7;++u){var s=i[(r+u)%7];e.push(this.newDateLabel(t,n,s))}return e},n.prototype.newDateLabel=function(t,n,i){return new mo({text:{value:i}})},n.prototype.newDateButtons=function(t,n){for(var i=[],r=0;r<7;++r)i.push(this.newSpace(t,n));for(r=1;r<=31;++r)i.push(this.newDateButton(t,n,r));return i},n.prototype.newSpace=function(t,n){return new wo},n.prototype.newDateButton=function(t,n,i){var r=this;return new lo({text:{value:String(i)},on:{active:function(){r.onDateButtonClicked(i)}}})},n.prototype.onDateButtonClicked=function(t){var n=this.Co;if(n.getDate()!==t){var i=this.ko;n.setFullYear(i.getFullYear()),n.setMonth(i.getMonth()),n.setDate(t),this.onNewChange()}},n.prototype.getType=function(){return"DPickerDatetime"},n}(Io),No=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newContentChildren=function(n,i){var r=t.prototype.newContentChildren.call(this,n,i);return r.push(this.picker),r},Object.defineProperty(n.prototype,"current",{get:function(){return this.picker.current},set:function(t){this.picker.current=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"new",{get:function(){return this.picker.new},set:function(t){this.picker.new=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"page",{get:function(){return this.picker.new},set:function(t){this.picker.page=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"picker",{get:function(){var t,n=this.Bo;return null==n&&(n=new Co(null===(t=this.tu)||void 0===t?void 0:t.picker),this.Bo=n),n},enumerable:!1,configurable:!0}),n.prototype.getResolvedValue=function(){return this.picker.new},n.prototype.getType=function(){return"DDialogDatetime"},n}(co),Ao=function(t){function n(n){var i=t.call(this,n)||this;return i.initial=pn.ofUnknown(n.initial),i}return G(n,t),n.prototype.open=function(t,i,r,e,u,s){var h=n.DIALOG;return null==h&&(h=new No,n.DIALOG=h),h.new=h.current=this.toDate(r),h.open(t).then((function(t){return t.toISOString()}))},n.prototype.toDate=function(t){return Tt(t)||jt(t)?new Date(t):t instanceof Date?t:new Date},n}(Yh),Ro=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newContentChildren=function(n,i){var r=t.prototype.newContentChildren.call(this,n,i);return r.push(this.picker),r},Object.defineProperty(n.prototype,"current",{get:function(){return this.picker.current},set:function(t){this.picker.current=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"new",{get:function(){return this.picker.new},set:function(t){this.picker.new=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"picker",{get:function(){var t,n=this.Bo;return null==n&&(n=new Io(null===(t=this.tu)||void 0===t?void 0:t.picker),this.Bo=n),n},enumerable:!1,configurable:!0}),n.prototype.getResolvedValue=function(){return this.picker.new},n.prototype.getType=function(){return"DDialogTime"},n}(co),yo=function(t){return t!=t},ko=function(t){function n(n){var i=t.call(this,n)||this;return i.initial=pn.ofUnknown(n.initial),i}return G(n,t),n.prototype.open=function(t,i,r,e,u,s){var h=this,o=n.DIALOG;return null==o&&(o=new Ro,n.DIALOG=o),o.new=o.current=this.toDate(r),o.open(t).then((function(t){return h.getFormatter().format(t.getTime(),0)}))},n.prototype.toDate=function(t){if(jt(t))return new Date(t);if(Tt(t)){var n=new Date,i=this.getPattern().exec(t);if(null!=i){var r=this.toHours(i[1]);null!=r&&n.setHours(r);var e=this.toMinutes(i[2]);null!=e&&n.setMinutes(e);var u=this.toSeconds(i[3]);null!=u&&n.setSeconds(u);var s=this.toMilliseconds(i[4]);null!=s&&n.setMilliseconds(s)}return n}return t instanceof Date?t:new Date},n.prototype.toHours=function(t){return this.toNumber(t,0,23)},n.prototype.toMinutes=function(t){return this.toNumber(t,0,59)},n.prototype.toSeconds=function(t){return this.toNumber(t,0,59)},n.prototype.toMilliseconds=function(t){var n=this.toNumber(t,0,999);if(null!=n){var i=t.length;return 1===i?100*n:2===i?10*n:n}return n},n.prototype.toNumber=function(t,n,i){if(null!=t){var r=+t;if(!yo(r))return Math.min(i,Math.max(n,r))}return null},n.prototype.getPattern=function(){var t=n.PATTERN;return null==t&&(t=this.newPattern(),n.PATTERN=t),t},n.prototype.newPattern=function(){return/^\s*(?:(\d+)(?::(\d+)(?::(\d+))?)?)?(?:\.(\d+))?\s*$/},n.prototype.getFormatter=function(){var t=n.FORMATTER;return null==t&&(t=this.newFormatter(),n.FORMATTER=t),t},n.prototype.newFormatter=function(){return Ai.create("%Hm")},n}(Yh),Lo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DPickerDate"},n}(Co),xo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newContentChildren=function(n,i){var r=t.prototype.newContentChildren.call(this,n,i);return r.push(this.picker),r},Object.defineProperty(n.prototype,"current",{get:function(){return this.picker.current},set:function(t){this.picker.current=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"new",{get:function(){return this.picker.new},set:function(t){this.picker.new=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"page",{get:function(){return this.picker.new},set:function(t){this.picker.page=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"picker",{get:function(){var t,n=this.Bo;return null==n&&(n=new Lo(null===(t=this.tu)||void 0===t?void 0:t.picker),this.Bo=n),n},enumerable:!1,configurable:!0}),n.prototype.getResolvedValue=function(){return this.picker.new},n.prototype.getType=function(){return"DDialogDate"},n}(co),Bo=function(t){function n(n){var i=t.call(this,n)||this;return i.initial=pn.ofUnknown(n.initial),i}return G(n,t),n.prototype.open=function(t,i,r,e,u,s){var h=this,o=n.DIALOG;return null==o&&(o=new xo,n.DIALOG=o),o.new=o.current=this.toDate(r),o.open(t).then((function(t){return h.getFormatter().format(t.getTime(),0)}))},n.prototype.toDate=function(t){return Tt(t)||jt(t)?new Date(t):t instanceof Date?t:new Date},n.prototype.getFormatter=function(){var t=n.FORMATTER;return null==t&&(t=this.newFormatter(),n.FORMATTER=t),t},n.prototype.newFormatter=function(){return Ai.create("%Y-%M-%D")},n}(Yh),_o={TEXT:0,INTEGER:1,REAL:2,BOOLEAN:3,DATE:4,TIME:5,DATETIME:6,EXTENSION:1e3},Po=function(t){function n(n,i,r,e,u,s,h,o){var a=t.call(this,kn.OPEN,n,ks.DIALOG)||this;return a.target=i,a.onInputAction=r,a.initial=e,a.step=u,a.min=s,a.max=h,a.dialogType=o,a}return G(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.target===i.target&&this.dialogType===i.dialogType&&this.onInputAction===i.onInputAction&&this.initial===i.initial&&this.step===i.step&&this.min===i.min&&this.max===i.max},n.prototype.toRuntime=function(){switch(this.dialogType){case _o.TEXT:return new oo(this);case _o.INTEGER:return new io(this);case _o.REAL:return new uo(this);case _o.BOOLEAN:return new Jh(this);case _o.DATE:return new Bo(this);case _o.TIME:return new ko(this);case _o.DATETIME:return new Ao(this)}},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.target),r=t.addResource(this.initial),e=t.addResource(this.step),u=t.addResource(this.min),s=t.addResource(this.max);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,",").concat(this.onInputAction,",").concat(r,",").concat(this.dialogType,",").concat(e,",").concat(u,",").concat(s,"]"))},n.deserialize=function(t,i){var r=i.resources,e=Ln.toResource(1,t,r),u=Ln.toResource(3,t,r),s=Ln.toResource(5,t,r),h=Ln.toResource(7,t,r),o=Ln.toResource(8,t,r),a=Ln.toResource(9,t,r);return new n(e,u,t[4],s,h,o,a,this.toDialogType(t))},n.toDialogType=function(t){if(t[2]===ks.DIALOG)return t[6];switch(t[2]){case ks.DIALOG_TEXT:return _o.TEXT;case ks.DIALOG_INTEGER:return _o.INTEGER;case ks.DIALOG_REAL:return _o.REAL;case ks.DIALOG_BOOLEAN:return _o.BOOLEAN;case ks.DIALOG_DATE:return _o.DATE;case ks.DIALOG_TIME:return _o.TIME;case ks.DIALOG_DATETIME:return _o.DATETIME}},n}(yn),Uo=function(){function t(){}return t.add=function(t){var n,i;(null!==(n=this.Ms)&&void 0!==n?n:this.Ms=new Map).set(t.type,t),(null!==(i=this.Vt)&&void 0!==i?i:this.Vt=[]).push(t)},t.get=function(t){var n=this.Ms;if(null!=n)return n.get(t)},t.each=function(t){var n=this.Vt;if(null!=n)for(var i=0,r=n.length;i<r;++i)t(n[i])},t}(),Fo=function(t){function n(n){var i=t.call(this,n,mn.NONE)||this;i.target=pn.ofStringOrNull(n.target),i.argument=pn.ofUnknown(n.argument);var r=Uo.get(n.dialogType);return r&&(i.opener=r.opener),i}return G(n,t),n.prototype.execute=function(t,n,i){var r=this.opener;if(r&&this.condition(t,i,On)){var e=this.target(t,i,On);if(null!=e){var u=qu.toDiagram(t);if(null!=u){var s=this.argument(t,i,On);setTimeout((function(){r(e,s,t,u,On)}),0)}}}},n}(En),Go=function(t){function n(n,i,r,e){var u=t.call(this,kn.OPEN,n,ks.DIALOG)||this;return u.target=i,u.argument=r,u.dialogType=e,u}return G(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.target===i.target&&this.argument===i.argument&&this.dialogType===i.dialogType},n.prototype.toRuntime=function(){return new Fo(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.target),r=t.addResource(this.argument);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,",0,-1,").concat(this.dialogType,",").concat(r,"]"))},n.deserialize=function(t,i){return new n(Ln.toResource(1,t,i.resources),Ln.toResource(3,t,i.resources),Ln.toResource(7,t,i.resources),t[6])},n}(yn),Ho=function(){function t(){}return t.add=function(t){var n,i;(null!==(n=this.Ms)&&void 0!==n?n:this.Ms=new Map).set(t.type,t),(null!==(i=this.Vt)&&void 0!==i?i:this.Vt=[]).push(t),je[t.type]=t.opener},t.get=function(t){var n=this.Ms;if(null!=n)return n.get(t)},t.each=function(t){var n=this.Vt;if(null!=n)for(var i=0,r=n.length;i<r;++i)t(n[i])},t}(),zo=function(t){function n(n,i,r,e){var u=t.call(this,kn.OPEN,i,n)||this;return u.target=r,u.inNewWindow=e,u}return G(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.target===i.target&&this.inNewWindow===i.inNewWindow},n.prototype.toRuntime=function(){return new ys(this,this.subtype)},n.prototype.toLabel=function(){var t=this.getTheme().toTypeLabel(this.type),n=Ho.get(this.subtype);return"".concat(t,": ").concat(null!=n?n.label:"Unknown")},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.target),r=this.inNewWindow?1:0;return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,",").concat(r,"]"))},n.deserialize=function(t,i){var r=Ln.toResource(1,t,i.resources),e=Ln.toResource(3,t,i.resources);return new n(t[2],r,e,!!t[4])},n}(yn),Vo={SHAPE_SHOW:0,SHAPE_HIDE:1,SHAPE:2,LAYER:3},Wo=function(t){function n(n){var i=t.call(this,n,mn.VISIBILITY)||this;return i.visibility=n.subtype===Vo.SHAPE_SHOW,i}return G(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i,On)&&(t.visible=this.visibility,n.written|=this.reset)},n}(En),Xo=function(t){function n(n,i){return t.call(this,kn.SHOW_HIDE,i,n)||this}return G(n,t),n.prototype.toRuntime=function(){return new Wo(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,"]"))},n.deserialize=function(t,i){var r=Ln.toResource(1,t,i.resources);return new n(t[2],r)},n}(yn),Ko=function(t){function n(n){var i=t.call(this,n,mn.NONE)||this;return i.Vt=new Map,i.Oe=n.layers,i._o=n.bringToFront,i}return G(n,t),n.prototype.initialize=function(n,i){t.prototype.initialize.call(this,n,i);var r=this.Vt.get(n);null==r&&null!=(r=this.newData(n))&&this.Vt.set(n,r)},n.prototype.execute=function(t,n,i){var r=this.Vt.get(t);if(r){var e=this.condition(t,i,On);if(r.condition!==e){r.condition=e;var u=r.layers;e?r.bringToFront?(ee.bringAllToFront(u),ee.showAll(u)):ee.showAll(u):ee.hideAll(u)}}},n.prototype.newData=function(t){var n=ee.toLayers(t,this.Oe);if(0<n.length)return{layers:n,bringToFront:this._o,condition:null}},n}(En),Yo=function(t){function n(n,i,r){var e=t.call(this,kn.SHOW_HIDE,n,Vo.LAYER)||this;return e.layers=i,e.bringToFront=r,e}return G(n,t),n.prototype.toRuntime=function(){return new Ko(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=this.serializeLayers(t),r=this.bringToFront?1:0;return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,",").concat(r,"]"))},n.prototype.serializeLayers=function(t){for(var n=this.layers,i="[",r="",e=0,u=n.length;e<u;++e)i+=r+n[e],r=",";return i+="]",t.addResource(i)},n.deserialize=function(t,i){return new n(Ln.toResource(1,t,i.resources),this.deserializeLayers(t[3],i),!!t[4])},n.deserializeLayers=function(t,n){var i=n.resources,r=i.length;return 0<=t&&t<r?JSON.parse(i[t]):[]},n}(yn),Jo=function(t){function n(n){return t.call(this,n,mn.VISIBILITY)||this}return G(n,t),n.prototype.initialize=function(n,i){t.prototype.initialize.call(this,n,i)},n.prototype.execute=function(t,n,i){t.visible=this.condition(t,i,On),n.written|=this.reset},n}(En),Zo=function(t){function n(n){return t.call(this,kn.SHOW_HIDE,n,Vo.SHAPE)||this}return G(n,t),n.prototype.toRuntime=function(){return new Jo(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,"]"))},n.deserialize=function(t,i){return new n(Ln.toResource(1,t,i.resources))},n}(yn),qo=function(t){function n(n,i){var r=t.call(this,n,i)||this;return r.amount=pn.ofNumber(n.amount),r}return G(n,t),n}(En),Qo=function(t){function n(n){return t.call(this,n,mn.POSITION_X)||this}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.amount(t,i,On);t.transform.position.x=r,n.written|=this.reset}},n}(qo),$o=function(t){function n(n){return t.call(this,n,mn.POSITION_Y)||this}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.amount(t,i,On);t.transform.position.y=r,n.written|=this.reset}},n}(qo),ta=function(t){function n(n){return t.call(this,n,mn.POSITION)||this}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.amount(t,i,On),e=t.transform,u=e.position,s=!!(n.written&mn.POSITION_X),h=!!(n.written&mn.POSITION_Y),o=s?u.x:n.x,a=h?u.y:n.y;t.updateTransform();var c=e.localTransform;u.set(o-c.c*r,a-c.d*r),n.written|=this.reset}},n}(qo),na=function(t){function n(n){return t.call(this,n,mn.POSITION)||this}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.amount(t,i,On),e=t.transform,u=e.position,s=!!(n.written&mn.POSITION_X),h=!!(n.written&mn.POSITION_Y),o=s?u.x:n.x,a=h?u.y:n.y;t.updateTransform();var c=e.localTransform;u.set(o+c.a*r,a+c.b*r),n.written|=this.reset}},n}(qo),ia=function(t){function n(n){return t.call(this,n,mn.POSITION_X)||this}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.amount(t,i,On),e=!!(n.written&mn.POSITION_X),u=t.transform.position,s=e?u.x:n.x;u.x=s+r,n.written|=this.reset}},n}(qo),ra=function(t){function n(n){return t.call(this,n,mn.POSITION_Y)||this}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.amount(t,i,On),e=!!(n.written&mn.POSITION_Y),u=t.transform.position,s=e?u.y:n.y;u.y=s+r,n.written|=this.reset}},n}(qo),ea=function(t){function n(n,i,r,e){var u=t.call(this,n,i,r)||this;return u.opetype=e,u}return G(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.opetype===i.opetype},n}(yn),ua={RELATIVE_X:0,RELATIVE_Y:1,ABSOLUTE_X:2,ABSOLUTE_Y:3,FORWARD_OR_BACKWARD:4,LEFT_OR_RIGHT:5},sa={RESIZE:0,MOVE:1,ROTATE:2},ha=function(t){function n(n,i,r){var e=t.call(this,kn.TRANSFORM,i,sa.MOVE,n)||this;return e.amount=r,e}return G(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.amount===i.amount},n.prototype.toRuntime=function(){switch(this.opetype){case ua.ABSOLUTE_X:return new Qo(this);case ua.ABSOLUTE_Y:return new $o(this);case ua.FORWARD_OR_BACKWARD:return new ta(this);case ua.LEFT_OR_RIGHT:return new na(this);case ua.RELATIVE_X:return new ia(this);case ua.RELATIVE_Y:return new ra(this)}},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.amount);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(this.opetype,",").concat(i,"]"))},n.deserialize=function(t,i){var r=Ln.toResource(1,t,i.resources),e=Ln.toResource(4,t,i.resources);return new n(t[3],r,e)},n}(ea),oa={RELATIVE_SIZE:0,RELATIVE_HEIGHT:1,RELATIVE_WIDTH:2,ABSOLUTE_SIZE:3,ABSOLUTE_HEIGHT:4,ABSOLUTE_WIDTH:5},aa=function(t){function n(n,i){var r=t.call(this,n,i)||this;switch(n.opetype){case oa.RELATIVE_SIZE:r.size=pn.ofNumberOrOne(n.amount);break;case oa.ABSOLUTE_SIZE:r.size=pn.ofNumberOrOneHundred(n.amount);break;case oa.RELATIVE_HEIGHT:r.size=pn.ofNumberOrOne(n.amount);break;case oa.ABSOLUTE_HEIGHT:r.size=pn.ofNumberOrOneHundred(n.amount);break;case oa.RELATIVE_WIDTH:r.size=pn.ofNumberOrOne(n.amount);break;case oa.ABSOLUTE_WIDTH:r.size=pn.ofNumberOrOneHundred(n.amount);break;default:r.size=pn.ONE}return r}return G(n,t),n.prototype.adjustPosition=function(t,n,i,r,e,u){var s=(-.5+e)*i,h=(-.5+u)*r;t.updateTransform();var o=t.transform,a=o.position,c=o.localTransform,f=!!(n.written&mn.POSITION_X),l=!!(n.written&mn.POSITION_Y),v=f?a.x:n.x,b=l?a.y:n.y;n.written|=mn.POSITION,a.set(v+s*c.a+h*c.c,b+s*c.b+h*c.d)},n}(En),ca=function(t){function n(n){var i=t.call(this,n,mn.HEIGHT|mn.POSITION)||this;return i.origin=n.originY,i}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.size(t,i,On),e=t.size,u=n.written&mn.HEIGHT?e.y:n.sizeY;e.y=Vi(r),n.written|=mn.HEIGHT,this.adjustPosition(t,n,0,u-e.y,.5,this.origin)}},n}(aa),fa=function(t){function n(n){var i=t.call(this,n,mn.HEIGHT|mn.POSITION)||this;return i.origin=n.originY,i}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.size(t,i,On),e=t.size,u=n.written&mn.HEIGHT?e.y:n.sizeY;e.y=Vi(u*r),n.written|=mn.HEIGHT,this.adjustPosition(t,n,0,u-e.y,.5,this.origin)}},n}(aa),la=function(t){function n(n){var i=t.call(this,n,mn.SIZE|mn.POSITION)||this;return i.originX=n.originX,i.originY=n.originY,i}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=Vi(this.size(t,i,On)),e=t.size,u=!!(n.written&mn.WIDTH),s=!!(n.written&mn.HEIGHT),h=u?e.x:n.sizeX,o=s?e.y:n.sizeY;e.set(r,r),n.written|=mn.SIZE,this.adjustPosition(t,n,h-e.x,o-e.y,this.originX,this.originY)}},n}(aa),va=function(t){function n(n){var i=t.call(this,n,mn.SIZE|mn.POSITION)||this;return i.originX=n.originX,i.originY=n.originY,i}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.size(t,i,On),e=t.size,u=!!(n.written&mn.WIDTH),s=!!(n.written&mn.HEIGHT),h=u?e.x:n.sizeX,o=s?e.y:n.sizeY;e.set(Vi(h*r),Vi(o*r)),n.written|=mn.SIZE,this.adjustPosition(t,n,h-e.x,o-e.y,this.originX,this.originY)}},n}(aa),ba=function(t){function n(n){var i=t.call(this,n,mn.WIDTH|mn.POSITION)||this;return i.origin=n.originX,i}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.size(t,i,On),e=t.size,u=n.written&mn.WIDTH?e.x:n.sizeX;e.x=Vi(r),n.written|=mn.WIDTH,this.adjustPosition(t,n,u-e.x,0,this.origin,.5)}},n}(aa),da=function(t){function n(n){var i=t.call(this,n,mn.WIDTH|mn.POSITION)||this;return i.origin=n.originX,i}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.size(t,i,On),e=t.size,u=n.written&mn.WIDTH?e.x:n.sizeX;e.x=Vi(u*r),n.written|=mn.WIDTH,this.adjustPosition(t,n,u-e.x,0,this.origin,.5)}},n}(aa),ga=function(t){function n(n,i,r,e,u){var s=t.call(this,kn.TRANSFORM,i,sa.RESIZE,n)||this;return s.originX=r,s.originY=e,s.amount=u,s}return G(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.originX===i.originX&&this.originY===i.originY&&this.amount===i.amount},n.prototype.toRuntime=function(){switch(this.opetype){case oa.ABSOLUTE_HEIGHT:return new ca(this);case oa.ABSOLUTE_WIDTH:return new ba(this);case oa.ABSOLUTE_SIZE:return new la(this);case oa.RELATIVE_HEIGHT:return new fa(this);case oa.RELATIVE_WIDTH:return new da(this);case oa.RELATIVE_SIZE:return new va(this)}},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.amount);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(this.opetype,",").concat(this.originX,",").concat(this.originY,",").concat(i,"]"))},n.deserialize=function(t,i){var r=Ln.toResource(1,t,i.resources),e=Ln.toResource(6,t,i.resources);return new n(t[3],r,t[4],t[5],e)},n}(ea),ma=function(t){function n(n,i){var r=t.call(this,n,i)||this;return r.originX=n.originX,r.originY=n.originY,r.amount=pn.ofNumber("(".concat(n.amount,") * (Math.PI / 180)")),r}return G(n,t),n.prototype.adjustPosition=function(t,n,i,r,e,u){var s=!!(n.written&mn.WIDTH),h=!!(n.written&mn.HEIGHT),o=(-.5+e)*(s?t.size.x:n.sizeX),a=(-.5+u)*(h?t.size.y:n.sizeY),c=Math.sin(i)-Math.sin(r),f=Math.cos(i)-Math.cos(r),l=t.transform.position,v=!!(n.written&mn.POSITION_X),b=!!(n.written&mn.POSITION_Y),d=v?l.x:n.x,g=b?l.y:n.y;n.written|=mn.POSITION,l.set(d+o*f-a*c,g+o*c+a*f)},n}(En),wa=function(t){function n(n){return t.call(this,n,mn.ROTATION|mn.POSITION)||this}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.amount(t,i,On),e=t.transform,u=n.written&mn.ROTATION?e.rotation:n.rotation;e.rotation=r,n.written|=mn.ROTATION,this.adjustPosition(t,n,u,r,this.originX,this.originY)}},n}(ma),Oa=function(t){function n(n){return t.call(this,n,mn.ROTATION|mn.POSITION)||this}return G(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,On)){var r=this.amount(t,i,On),e=t.transform,u=n.written&mn.ROTATION?e.rotation:n.rotation;e.rotation=u+r,n.written|=mn.ROTATION,this.adjustPosition(t,n,u,e.rotation,this.originX,this.originY)}},n}(ma),pa={RELATIVE:0,ABSOLUTE:1},Da=function(t){function n(n,i,r,e,u){var s=t.call(this,kn.TRANSFORM,i,sa.ROTATE,n)||this;return s.originX=r,s.originY=e,s.amount=u,s}return G(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.originX===i.originX&&this.originY===i.originY&&this.amount===i.amount},n.prototype.toRuntime=function(){switch(this.opetype){case pa.ABSOLUTE:return new wa(this);case pa.RELATIVE:return new Oa(this)}},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.amount);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(this.opetype,",").concat(this.originX,",").concat(this.originY,",").concat(i,"]"))},n.deserialize=function(t,i){var r=Ln.toResource(1,t,i.resources),e=Ln.toResource(6,t,i.resources);return new n(t[3],r,t[4],t[5],e)},n}(ea),Ea=function(t,n){switch(t[0]){case kn.SHOW_HIDE:switch(t[2]){case Vo.SHAPE_SHOW:case Vo.SHAPE_HIDE:return Xo.deserialize(t,n);case Vo.SHAPE:return Zo.deserialize(t,n);case Vo.LAYER:return Yo.deserialize(t,n)}break;case kn.BLINK:return xn.deserialize(t,n);case kn.CHANGE_COLOR:case kn.CHANGE_COLOR_LEGACY:switch(t[3]){case Pn.COLOR_AND_ALPHA:case Pn.COLOR:case Pn.ALPHA:return zn.deserialize(t,n);case Pn.CODE:return Kn.deserialize(t,n);case Pn.BRIGHTNESS:return Wn.deserialize(t,n)}break;case kn.CHANGE_TEXT:return Li.deserialize(t,n);case kn.CHANGE_CURSOR:return Jn.deserialize(t,n);case kn.EMIT_EVENT:return $u.deserialize(t,n);case kn.OPEN:switch(t[2]){case ks.DIALOG_TEXT:case ks.DIALOG_INTEGER:case ks.DIALOG_REAL:case ks.DIALOG_BOOLEAN:case ks.DIALOG_DATE:case ks.DIALOG_TIME:case ks.DIALOG_DATETIME:case ks.DIALOG:return _o.EXTENSION<=t[6]?Go.deserialize(t,n):Po.deserialize(t,n);case ks.DIAGRAM_LEGACY:case ks.PAGE_LEGACY:case ks.PAGE_INPLACE_LEGACY:case ks.DIAGRAM:case ks.PAGE:return Ls.deserialize(t,n);default:if(ks.EXTENSION<=t[2])return zo.deserialize(t,n)}break;case kn.TRANSFORM:switch(t[2]){case sa.MOVE:return ha.deserialize(t,n);case sa.RESIZE:return ga.deserialize(t,n);case sa.ROTATE:return Da.deserialize(t,n)}break;case kn.GESTURE:return pe.deserialize(t,n);case kn.MISC:switch(t[2]){case Oe.GESTURE:return pe.deserialize(t,n);case Oe.SHOW_HIDE_LAYER:return Yo.deserialize(t,n);case Oe.GESTURE_LAYER:return pe.deserialize(t,n);case Oe.EXECUTE:return Cs.deserialize(t,n);default:return Oe.EXTENSION<=t[2]?Rs.deserialize(t,n):Ts.deserialize(t,n)}}return null},Ma={},Sa=function(t){try{var n=JSON.parse(t);return Mt(n)&&2<=n.length?n:null}catch(t){return null}},ja=function(t,n,i){var r=n.resources;if(0<=t&&t<r.length){var e=r[t];Tt(e)&&(i.gradient=function(t){var n=function(t){try{return JSON.parse(t)}catch(t){return null}}(t);if(!(null==n||n.length<7)){for(var i=n[0],r=[],e=1,u=n.length;e<u;e+=3)r.push({color:n[e+0],alpha:n[e+1],position:n[e+2]});return{points:r,direction:i}}}(e))}},Ta={},Ia=function(t){var n=Ta[t];if(null!=n)return"url"in n?Promise.resolve(n):n;var i=new Promise((function(n,i){var r=document.createElement("img");r.onload=function(){var i={url:t,width:r.width,height:r.height,source:r};Ta[t]=i,n(i)},r.onabort=r.onerror=function(){i()},r.src=t}));return Ta[t]=i,i},Ca=function(t,n,i){var r=n.resources;i.id=r[t[1]]||"";var e=i.transform;e.position.set(t[2],t[3]),e.rotation=t[6],e.skew.set(t[7],t[7]),e.pivot.set(t[21],t[22]),i.size.set(Vi(t[4]),Vi(t[5])),i.fill.deserialize(t[8],n),i.stroke.deserialize(t[9],n);var u=t[10];i.cursor=0<=u?r[u]:void 0,i.text.deserialize(t[11],n),i.data.deserialize(t[12],n),i.radius=t[13],i.corner=t[14];var s=t[23];i.interactive=!!(1&s);var h=i.state;h.isFocusable=!(2&s),h.isActive=!!(4&s);var o=t[24];i.shortcut=0<=o?r[o]:void 0;var a=t[25];i.title=0<=a?r[a]:void 0;var c=t[26];i.uuid=null!=c?c:0;var f=t[27],l=t[28],v=t[29];(null!=f&&f!==Lt.NONE||null!=l&&l!==Lt.NONE||null!=v&&v!==Lt.NONE)&&i.capability.set(f,l,v);var b=function(t,n,i){if(0<t.length){for(var r=[],e=0,u=t.length;e<u;++e)r.push($i(t[e],n));return Promise.all(r).then((function(t){i.children=t;for(var n=0,r=t.length;n<r;++n)t[n].parent=i;return i.onChildTransformChange(),i.toDirty(),i}))}return null}(t[20],n,i);!function(t,n,i){for(var r=i.action,e=n.resources,u=0,s=t.length;u<s;++u){var h=t[u],o=n.getAction(h);if(null!=o)r.add(o);else{var a=e[h];if(null!=a){var c=Sa(a);if(null!=c&&0<c.length){var f=c[0],l=kn.EXTENSION<=f?Ma[f]:Ea;if(null!=l){var v=l(c,n);null!=v&&(n.setAction(h,v),r.add(v))}}}}}}(t[17],n,i),ja(t[19],n,i);var d=function(t,n,i){var r=n.resources;if(0<=t&&t<r.length){var e=r[t];if(Tt(e))return Ia(e).then((function(t){return i.image=t,i}))}return null}(t[18],n,i);return null!=b?null!=d?Promise.all([b,d]).then((function(){return i})):b:null!=d?d:i},Na=function(t,n,i){i=i||new fn;var r=Ca(t,n,i);i.points.deserialize(t[15],n);var e=i.points.style,u=K.NON_SCALING_MASK|K.DOTTED_MASK|K.DASHED_MASK,s=e&u;return s&&(i.points.style&=~u,i.stroke.style|=s),r},Aa=function(){e[r.BAR]=bn,n[r.BAR]=Na},Ra=44,ya=24,ka=[0,0,0,0,0],La=new t.Point,xa=function(t,n,i){var r=3*i-1;t[++r]=n+0,t[++r]=n+1,t[++r]=n+2,t[++r]=n+2,t[++r]=n+1,t[++r]=n+3,t[++r]=n+4,t[++r]=n+5,t[++r]=n+6,t[++r]=n+6,t[++r]=n+5,t[++r]=n+7,t[++r]=n+8,t[++r]=n+9,t[++r]=n+10,t[++r]=n+10,t[++r]=n+9,t[++r]=n+11,t[++r]=n+12,t[++r]=n+13,t[++r]=n+14,t[++r]=n+14,t[++r]=n+13,t[++r]=n+15,t[++r]=n+16,t[++r]=n+17,t[++r]=n+19,t[++r]=n+19,t[++r]=n+17,t[++r]=n+20,t[++r]=n+18,t[++r]=n+20,t[++r]=n+21,t[++r]=n+21,t[++r]=n+20,t[++r]=n+22,t[++r]=n+23,t[++r]=n+24,t[++r]=n+25,t[++r]=n+25,t[++r]=n+24,t[++r]=n+26,t[++r]=n+25,t[++r]=n+27,t[++r]=n+28,t[++r]=n+28,t[++r]=n+27,t[++r]=n+29,t[++r]=n+30,t[++r]=n+31,t[++r]=n+32,t[++r]=n+32,t[++r]=n+31,t[++r]=n+34,t[++r]=n+33,t[++r]=n+34,t[++r]=n+35,t[++r]=n+35,t[++r]=n+34,t[++r]=n+36,t[++r]=n+37,t[++r]=n+38,t[++r]=n+39,t[++r]=n+39,t[++r]=n+38,t[++r]=n+41,t[++r]=n+39,t[++r]=n+40,t[++r]=n+42,t[++r]=n+42,t[++r]=n+40,t[++r]=n+43},Ba=function(t,n,i,r,e,u,s,h,o,a,c){var f=s*h,l=.5*e+(0<=e?+f:-f),v=.5*u+(0<=u?+f:-f),b=Math.abs(l),d=Math.abs(v),g=o*Math.min(b,d),m=g/b,w=g/d,O=La;O.set(i-l,r-v),a.apply(O,O);var p=O.x,D=O.y;O.set(i,r-v),a.apply(O,O);var E=O.x,M=O.y;O.set(i-l,r),a.apply(O,O);var S=O.x,j=O.y,T=E-p,I=M-D,C=S-p,N=j-D,A=E+T,R=M+I,y=S+T,k=j+I,L=A+C,x=R+N,B=S+C,_=j+N,P=B+T,U=_+I,F=P+T,G=U+I,H=m*T,z=m*I,V=w*C,W=w*N,X=p,K=D,Y=X+H,J=K+z,Z=X+V,q=K+W,Q=Z+H,$=q+z,tt=2*n-1;t[++tt]=X,t[++tt]=K,t[++tt]=Y,t[++tt]=J,t[++tt]=Z,t[++tt]=q,t[++tt]=Q,t[++tt]=$;var nt=A,it=R,rt=A-H,et=R-z,ut=rt+V,st=et+W,ht=ut+H,ot=st+z;t[++tt]=rt,t[++tt]=et,t[++tt]=nt,t[++tt]=it,t[++tt]=ut,t[++tt]=st,t[++tt]=ht,t[++tt]=ot;var at=B,ct=_,ft=at-V,lt=ct-W,vt=at+H,bt=ct+z,dt=ft+H,gt=lt+z;t[++tt]=ft,t[++tt]=lt,t[++tt]=dt,t[++tt]=gt,t[++tt]=at,t[++tt]=ct,t[++tt]=vt,t[++tt]=bt;var mt=F,wt=G,Ot=mt-H,pt=wt-z,Dt=mt-V,Et=wt-W,Mt=Dt-H,St=Et-z;t[++tt]=Mt,t[++tt]=St,t[++tt]=Dt,t[++tt]=Et,t[++tt]=Ot,t[++tt]=pt,t[++tt]=mt,t[++tt]=wt;var jt=Y,Tt=J,It=E,Ct=M,Nt=Z,At=q,Rt=Q,yt=$,kt=It+V,Lt=Ct+W,xt=S,Bt=j,_t=y,Pt=k;t[++tt]=jt,t[++tt]=Tt,t[++tt]=It,t[++tt]=Ct,t[++tt]=Nt,t[++tt]=At,t[++tt]=Rt,t[++tt]=yt,t[++tt]=kt,t[++tt]=Lt,t[++tt]=xt,t[++tt]=Bt,t[++tt]=_t,t[++tt]=Pt;var Ut=It,Ft=Ct,Gt=rt,Ht=et,zt=kt,Vt=Lt,Wt=ut,Xt=st,Kt=ht,Yt=ot,Jt=_t,Zt=Pt,qt=L,Qt=x;t[++tt]=Ut,t[++tt]=Ft,t[++tt]=Gt,t[++tt]=Ht,t[++tt]=zt,t[++tt]=Vt,t[++tt]=Wt,t[++tt]=Xt,t[++tt]=Kt,t[++tt]=Yt,t[++tt]=Jt,t[++tt]=Zt,t[++tt]=qt,t[++tt]=Qt;var $t=xt,tn=Bt,nn=_t,rn=Pt,en=ft,un=lt,sn=dt,hn=gt,on=P-V,an=U-W,cn=vt,fn=bt,ln=P,vn=U;t[++tt]=$t,t[++tt]=tn,t[++tt]=nn,t[++tt]=rn,t[++tt]=en,t[++tt]=un,t[++tt]=sn,t[++tt]=hn,t[++tt]=on,t[++tt]=an,t[++tt]=cn,t[++tt]=fn,t[++tt]=ln,t[++tt]=vn;var bn=nn,dn=rn,gn=qt,mn=Qt,wn=on,On=an,pn=Mt,Dn=St,En=Dt,Mn=Et,Sn=ln,jn=vn,Tn=Ot,In=pt;t[++tt]=bn,t[++tt]=dn,t[++tt]=gn,t[++tt]=mn,t[++tt]=wn,t[++tt]=On,t[++tt]=pn,t[++tt]=Dn,t[++tt]=En,t[++tt]=Mn,t[++tt]=Sn,t[++tt]=jn,t[++tt]=Tn,t[++tt]=In,c[0]=b,c[1]=d,c[2]=g,c[3]=m,c[4]=w},_a=function(t,n,i,r,e,u,s){var h=o(e),a=s[0],c=s[1],f=s[2],b=r&Z.TOP?1:0,d=r&Z.RIGHT?1:0,g=r&Z.BOTTOM?1:0,m=r&Z.LEFT?1:0,w=l(0,h,m,b),O=l(0,h,d,b),p=l(0,h,m,g),D=l(0,h,d,g),E=l(1,h,m,b),M=l(1,h,d,b),S=l(1,h,m,g),j=l(1,h,d,g),T=1-s[3],I=1-s[4],C=v(1,1),N=v(0,1),A=v(1,0),R=v(0,0),y=v(T,1),k=v(1,I),L=v(T,I),x=v(0,I),B=6*n-1;u&ft.TOP_LEFT?(t[++B]=i,t[++B]=E,t[++B]=f,t[++B]=f,t[++B]=C,t[++B]=0,t[++B]=i,t[++B]=E,t[++B]=f,t[++B]=f,t[++B]=N,t[++B]=0,t[++B]=i,t[++B]=E,t[++B]=f,t[++B]=f,t[++B]=A,t[++B]=0,t[++B]=i,t[++B]=E,t[++B]=f,t[++B]=f,t[++B]=R,t[++B]=0):(t[++B]=i,t[++B]=w,t[++B]=a,t[++B]=c,t[++B]=C,t[++B]=0,t[++B]=i,t[++B]=w,t[++B]=a,t[++B]=c,t[++B]=y,t[++B]=0,t[++B]=i,t[++B]=w,t[++B]=a,t[++B]=c,t[++B]=k,t[++B]=0,t[++B]=i,t[++B]=w,t[++B]=a,t[++B]=c,t[++B]=L,t[++B]=0),u&ft.TOP_RIGHT?(t[++B]=i,t[++B]=M,t[++B]=f,t[++B]=f,t[++B]=N,t[++B]=0,t[++B]=i,t[++B]=M,t[++B]=f,t[++B]=f,t[++B]=C,t[++B]=0,t[++B]=i,t[++B]=M,t[++B]=f,t[++B]=f,t[++B]=R,t[++B]=0,t[++B]=i,t[++B]=M,t[++B]=f,t[++B]=f,t[++B]=A,t[++B]=0):(t[++B]=i,t[++B]=O,t[++B]=a,t[++B]=c,t[++B]=y,t[++B]=0,t[++B]=i,t[++B]=O,t[++B]=a,t[++B]=c,t[++B]=C,t[++B]=0,t[++B]=i,t[++B]=O,t[++B]=a,t[++B]=c,t[++B]=L,t[++B]=0,t[++B]=i,t[++B]=O,t[++B]=a,t[++B]=c,t[++B]=k,t[++B]=0),u&ft.BOTTOM_LEFT?(t[++B]=i,t[++B]=S,t[++B]=f,t[++B]=f,t[++B]=A,t[++B]=0,t[++B]=i,t[++B]=S,t[++B]=f,t[++B]=f,t[++B]=R,t[++B]=0,t[++B]=i,t[++B]=S,t[++B]=f,t[++B]=f,t[++B]=C,t[++B]=0,t[++B]=i,t[++B]=S,t[++B]=f,t[++B]=f,t[++B]=N,t[++B]=0):(t[++B]=i,t[++B]=p,t[++B]=a,t[++B]=c,t[++B]=k,t[++B]=0,t[++B]=i,t[++B]=p,t[++B]=a,t[++B]=c,t[++B]=L,t[++B]=0,t[++B]=i,t[++B]=p,t[++B]=a,t[++B]=c,t[++B]=C,t[++B]=0,t[++B]=i,t[++B]=p,t[++B]=a,t[++B]=c,t[++B]=y,t[++B]=0),u&ft.BOTTOM_RIGHT?(t[++B]=i,t[++B]=j,t[++B]=f,t[++B]=f,t[++B]=R,t[++B]=0,t[++B]=i,t[++B]=j,t[++B]=f,t[++B]=f,t[++B]=A,t[++B]=0,t[++B]=i,t[++B]=j,t[++B]=f,t[++B]=f,t[++B]=N,t[++B]=0,t[++B]=i,t[++B]=j,t[++B]=f,t[++B]=f,t[++B]=C,t[++B]=0):(t[++B]=i,t[++B]=D,t[++B]=a,t[++B]=c,t[++B]=L,t[++B]=0,t[++B]=i,t[++B]=D,t[++B]=a,t[++B]=c,t[++B]=k,t[++B]=0,t[++B]=i,t[++B]=D,t[++B]=a,t[++B]=c,t[++B]=y,t[++B]=0,t[++B]=i,t[++B]=D,t[++B]=a,t[++B]=c,t[++B]=C,t[++B]=0),t[++B]=i,t[++B]=w,t[++B]=a,t[++B]=c,t[++B]=y,t[++B]=0,t[++B]=i,t[++B]=w,t[++B]=a,t[++B]=c,t[++B]=N,t[++B]=0,t[++B]=i,t[++B]=w,t[++B]=a,t[++B]=c,t[++B]=k,t[++B]=0,t[++B]=i,t[++B]=w,t[++B]=a,t[++B]=c,t[++B]=L,t[++B]=0,t[++B]=i,t[++B]=w,t[++B]=a,t[++B]=c,t[++B]=x,t[++B]=0,t[++B]=i,t[++B]=w,t[++B]=a,t[++B]=c,t[++B]=A,t[++B]=0,t[++B]=i,t[++B]=w,t[++B]=a,t[++B]=c,t[++B]=R,t[++B]=0,t[++B]=i,t[++B]=O,t[++B]=a,t[++B]=c,t[++B]=N,t[++B]=0,t[++B]=i,t[++B]=O,t[++B]=a,t[++B]=c,t[++B]=y,t[++B]=0,t[++B]=i,t[++B]=O,t[++B]=a,t[++B]=c,t[++B]=x,t[++B]=0,t[++B]=i,t[++B]=O,t[++B]=a,t[++B]=c,t[++B]=L,t[++B]=0,t[++B]=i,t[++B]=O,t[++B]=a,t[++B]=c,t[++B]=k,t[++B]=0,t[++B]=i,t[++B]=O,t[++B]=a,t[++B]=c,t[++B]=R,t[++B]=0,t[++B]=i,t[++B]=O,t[++B]=a,t[++B]=c,t[++B]=A,t[++B]=0,t[++B]=i,t[++B]=p,t[++B]=a,t[++B]=c,t[++B]=A,t[++B]=0,t[++B]=i,t[++B]=p,t[++B]=a,t[++B]=c,t[++B]=R,t[++B]=0,t[++B]=i,t[++B]=p,t[++B]=a,t[++B]=c,t[++B]=k,t[++B]=0,t[++B]=i,t[++B]=p,t[++B]=a,t[++B]=c,t[++B]=L,t[++B]=0,t[++B]=i,t[++B]=p,t[++B]=a,t[++B]=c,t[++B]=x,t[++B]=0,t[++B]=i,t[++B]=p,t[++B]=a,t[++B]=c,t[++B]=y,t[++B]=0,t[++B]=i,t[++B]=p,t[++B]=a,t[++B]=c,t[++B]=N,t[++B]=0,t[++B]=i,t[++B]=D,t[++B]=a,t[++B]=c,t[++B]=R,t[++B]=0,t[++B]=i,t[++B]=D,t[++B]=a,t[++B]=c,t[++B]=A,t[++B]=0,t[++B]=i,t[++B]=D,t[++B]=a,t[++B]=c,t[++B]=x,t[++B]=0,t[++B]=i,t[++B]=D,t[++B]=a,t[++B]=c,t[++B]=L,t[++B]=0,t[++B]=i,t[++B]=D,t[++B]=a,t[++B]=c,t[++B]=k,t[++B]=0,t[++B]=i,t[++B]=D,t[++B]=a,t[++B]=c,t[++B]=N,t[++B]=0,t[++B]=i,t[++B]=D,t[++B]=a,t[++B]=c,t[++B]=y,t[++B]=0},Pa=function(t,n,i,r){var e=i.x0,u=i.y0,s=i.x1,h=i.y1,o=i.x2,a=i.y2,c=i.x3,f=i.y3,l=.5*(e+s),v=.5*(u+h),b=.5*(e+c),d=.5*(u+f),g=l-e,m=v-u,w=b-e,O=d-u,p=b+g,D=d+m,E=s+w,M=h+O,S=c+g,j=f+m,T=r[3],I=r[4],C=T*g,N=T*m,A=I*w,R=I*O,y=e,k=u,L=y+C,x=k+N,B=y+A,_=k+R,P=B+C,U=_+N,F=2*n-1;t[++F]=y,t[++F]=k,t[++F]=L,t[++F]=x,t[++F]=B,t[++F]=_,t[++F]=P,t[++F]=U;var G=s,H=h,z=s-C,V=h-N,W=z+A,X=V+R,K=W+C,Y=X+N;t[++F]=z,t[++F]=V,t[++F]=G,t[++F]=H,t[++F]=W,t[++F]=X,t[++F]=K,t[++F]=Y;var J=c,Z=f,q=J-A,Q=Z-R,$=J+C,tt=Z+N,nt=q+C,it=Q+N;t[++F]=q,t[++F]=Q,t[++F]=nt,t[++F]=it,t[++F]=J,t[++F]=Z,t[++F]=$,t[++F]=tt;var rt=o,et=a,ut=rt-C,st=et-N,ht=rt-A,ot=et-R,at=ht-C,ct=ot-N;t[++F]=at,t[++F]=ct,t[++F]=ht,t[++F]=ot,t[++F]=ut,t[++F]=st,t[++F]=rt,t[++F]=et;var ft=L,lt=x,vt=l,bt=v,dt=B,gt=_,mt=P,wt=U,Ot=vt+A,pt=bt+R,Dt=b,Et=d,Mt=p,St=D;t[++F]=ft,t[++F]=lt,t[++F]=vt,t[++F]=bt,t[++F]=dt,t[++F]=gt,t[++F]=mt,t[++F]=wt,t[++F]=Ot,t[++F]=pt,t[++F]=Dt,t[++F]=Et,t[++F]=Mt,t[++F]=St;var jt=vt,Tt=bt,It=z,Ct=V,Nt=Ot,At=pt,Rt=W,yt=X,kt=K,Lt=Y,xt=Mt,Bt=St,_t=E,Pt=M;t[++F]=jt,t[++F]=Tt,t[++F]=It,t[++F]=Ct,t[++F]=Nt,t[++F]=At,t[++F]=Rt,t[++F]=yt,t[++F]=kt,t[++F]=Lt,t[++F]=xt,t[++F]=Bt,t[++F]=_t,t[++F]=Pt;var Ut=Dt,Ft=Et,Gt=Mt,Ht=St,zt=q,Vt=Q,Wt=nt,Xt=it,Kt=S-A,Yt=j-R,Jt=$,Zt=tt,qt=S,Qt=j;t[++F]=Ut,t[++F]=Ft,t[++F]=Gt,t[++F]=Ht,t[++F]=zt,t[++F]=Vt,t[++F]=Wt,t[++F]=Xt,t[++F]=Kt,t[++F]=Yt,t[++F]=Jt,t[++F]=Zt,t[++F]=qt,t[++F]=Qt;var $t=Gt,tn=Ht,nn=_t,rn=Pt,en=Kt,un=Yt,sn=at,hn=ct,on=ht,an=ot,cn=qt,fn=Qt,ln=ut,vn=st;t[++F]=$t,t[++F]=tn,t[++F]=nn,t[++F]=rn,t[++F]=en,t[++F]=un,t[++F]=sn,t[++F]=hn,t[++F]=on,t[++F]=an,t[++F]=cn,t[++F]=fn,t[++F]=ln,t[++F]=vn},Ua=function(t){function n(n,i,r){var e=t.call(this,n,i,r,Ra,ya)||this;return e.radius=0,e.corner=0,e}return G(n,t),n.prototype.init=function(){var t=this.buffer;t.updateIndices(),xa(t.indices,this.vertexOffset,this.indexOffset),this.inited|=Y.INDEX},n.prototype.update=function(t){var n=this.buffer;this.updateVertexStepAndUv(n,t),this.updateColor(n,t)},n.prototype.updateVertexStepAndUv=function(t,n){var i=n.size,r=i.x,e=i.y,u=n.radius,s=r!==this.sizeX||e!==this.sizeY||u!==this.radius,h=Q(n),o=this.transformLocalId!==h,a=n.stroke,c=a.align,f=a.enable?a.width:0,l=a.side,v=a.style,b=this.strokeAlign!==c||this.strokeWidth!==f||this.strokeSide!==l||this.strokeStyle!==v,d=n.corner,g=d!==this.corner,m=$(n),w=tt(m),O=m!==this.texture||w!==this.textureTransformId,p=s||b,D=!(this.inited&Y.VERTEX_STEP_AND_UV);if(D||p||o||g||O){this.inited|=Y.VERTEX_STEP_AND_UV,this.sizeX=r,this.sizeY=e,this.radius=u,this.transformLocalId=h,this.strokeAlign=c,this.strokeWidth=f,this.strokeSide=l,this.strokeStyle=v,this.corner=d,this.texture=m,this.textureTransformId=w;var E=this.vertexOffset;t.updateVertices(),Ba(t.vertices,E,0,0,r,e,c,f,u,n.transform.internalTransform,ka),(D||p||g||o)&&(t.updateSteps(),_a(t.steps,E,f,l,v,d,ka)),(D||p||O)&&(t.updateUvs(),Pa(t.uvs,E,nt(m),ka))}},n}(q),Fa=function(t,n,i,r,e){var s=C(n),h=s<<2,o=s<<1,a=Ra+h,c=ya+o;return t.check(i,r,a,c)?new u(t,i,r,a,c,[new Ua(t,i,r),new vn(t,i+Ra,r+ya,h,o)]).init(n):null},Ga=function(t,n,i,r,e){return Fa(t,n,i,r)},Ha=function(t,n,i,r,e,u){var s=-i+e;if(t<=s)return n<=(h=-r+e)&&u&ft.TOP_LEFT?(a=t-s)*a+(c=n-h)*c<=e*e:(o=+r-e)<=n&&u&ft.BOTTOM_LEFT?(a=t-s)*a+(c=n-o)*c<=e*e:-i<=t;var h,o,a,c,f=+i-e;return f<=t?n<=(h=-r+e)&&u&ft.TOP_RIGHT?(a=t-f)*a+(c=n-h)*c<=e*e:(o=+r-e)<=n&&u&ft.BOTTOM_RIGHT?(a=t-f)*a+(c=n-o)*c<=e*e:t<=+i:-r<=n&&n<=+r},za=function(t,n,i,r,e,u,s){var h=t.fill;if(h.enable||0<u){var o=t.radius*Math.min(r,e),a=t.corner;if(Ha(n,i,r,e,o,a)){if(h.enable)return!0;var c=u*s,f=Math.max(0,r-c),l=Math.max(0,e-c),v=Math.max(0,o-c);if(!Ha(n,i,f,l,v,a)){var b=t.stroke.side;if(b===Z.ALL)return!0;if(n<=-f+v){var d=!!(b&Z.LEFT);return i<=-l+v?!(!(g=!!(b&Z.TOP))||!d)||(g?-f<=i:!!d&&n<=-f):+l-v<=i?!(!(m=!!(b&Z.BOTTOM))||!d)||(m?+f<=i:!!d&&n<=-f):d}if(+f-v<=n){var g,m,w=!!(b&Z.RIGHT);return i<=-l+v?!(!(g=!!(b&Z.TOP))||!w)||(g?-f<=i:!!w&&+f<=n):+l-v<=i?!(!(m=!!(b&Z.BOTTOM))||!w)||(m?+f<=i:!!w&&+f<=n):w}return i<=-l+v?!!(b&Z.TOP):+l-v<=i&&!!(b&Z.BOTTOM)}}}return!1},Va=function(t){function n(n){return void 0===n&&(n=r.RECTANGLE_ROUNDED),t.call(this,n)||this}return G(n,t),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(n,i,r,e,u,s,h){return!!t.prototype.containsAbsBBox.call(this,n,i,r,e)&&za(this,n,i,r,e,u,s)},n}(en),Wa=function(t){function n(n){void 0===n&&(n=r.BUTTON);var i=t.call(this,n)||this;return i.eo=!1,i.so=!1,i}return G(n,t),Object.defineProperty(n.prototype,"isToggle",{get:function(){return this.eo},set:function(t){this.eo=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isGrouped",{get:function(){return this.so},set:function(t){this.so=t},enumerable:!1,configurable:!0}),n.prototype.copy=function(i,r){return t.prototype.copy.call(this,i,r),i instanceof n&&(this.eo=i.isToggle,this.so=i.isGrouped),this},n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.serialize=function(n){var i=t.prototype.serialize.call(this,n),r=this.eo?1:0,e=this.so?2:0;return i[15]=n.addResource("[".concat(r|e,"]")),i},n}(Va),Xa=function(t,n,i){i=i||new Wa;var r=n.resources,e=t[15];if(0<=e&&e<r.length){var u=n.getExtension(e);null==u&&(u=JSON.parse(r[e]),n.setExtension(e,u)),i.isToggle=!!(1&u[0]),i.isGrouped=!!(2&u[0])}return Ca(t,n,i)},Ka=function(t){function n(n){var i=t.call(this,mn.COLOR_FILL_AND_STROKE|mn.COLOR_TEXT|mn.COLOR_TEXT_OUTLINE|mn.CURSOR)||this,r=n.fill,e=r.color,u=i.toOnHovered(e),s=2*u;i.Po=e,i.Uo=gn.toGrayscale(e),i.Fo=gn.darken(e,s),i.Go=gn.darken(e,u);var h=r.alpha;i.Ho=h,i.zo=.5*h;var o=n.stroke,a=o.color,c=i.toOnHovered(a),f=2*c;i.Vo=a,i.Wo=gn.toGrayscale(a),i.Xo=gn.darken(a,f),i.Ko=gn.darken(a,c);var l=o.alpha;i.Yo=l,i.Jo=.5*l;var v=n.text,b=v.color;i.Zo=b,i.qo=gn.toGrayscale(b);var d=v.alpha;i.Qo=d,i.$o=.5*d;var g=v.outline,m=g.color;i.ta=m,i.na=gn.toGrayscale(m);var w=g.alpha;return i.ia=w,i.ra=.5*w,i}return G(n,t),n.prototype.toOnHovered=function(t){var n,i=gn.toLuma(t);return 128<=i?.15*(1-(n=(i-128)/127))+.03*n:-.15*(1-(n=(127-i)/127))-.175*n},n.prototype.execute=function(t,n,i){var r=t.state;t.fill.set(void 0,this.getFillColor(r),this.getFillAlpha(r)),t.stroke.set(void 0,this.getStrokeColor(r),this.getStrokeAlpha(r)),t.text.set(void 0,this.getTextColor(r),this.getTextAlpha(r)),t.text.outline.set(void 0,this.getTextOutlineColor(r),this.getTextOutlineAlpha(r)),t.cursor=this.getCursor(r),n.written|=this.reset},n.prototype.getFillColor=function(t){return t.inDisabled?this.Uo:t.isPressed||t.isActive?this.Fo:t.isFocused||t.isHovered?this.Go:this.Po},n.prototype.getFillAlpha=function(t){return t.inDisabled?this.zo:this.Ho},n.prototype.getStrokeColor=function(t){return t.inDisabled?this.Wo:t.isPressed||t.isActive?this.Xo:t.isFocused||t.isHovered?this.Ko:this.Vo},n.prototype.getStrokeAlpha=function(t){return t.inDisabled?this.Jo:this.Yo},n.prototype.getTextColor=function(t){return t.inDisabled?this.qo:this.Zo},n.prototype.getTextAlpha=function(t){return t.inDisabled?this.$o:this.Qo},n.prototype.getTextOutlineColor=function(t){return t.inDisabled?this.na:this.ta},n.prototype.getTextOutlineAlpha=function(t){return t.inDisabled?this.ra:this.ia},n.prototype.getCursor=function(t){return t.isActionable?"pointer":""},n}(Dn),Ya=function(t){function n(n){var i=t.call(this,mn.COLOR_FILL_AND_STROKE|mn.COLOR_TEXT|mn.COLOR_TEXT_OUTLINE|mn.CURSOR)||this,r=n.fill,e=r.color;i.ea=e;var u=i.toOnHovered(e),s=2*u;i.ua=gn.darken(e,s),i.sa=gn.darken(e,u);var h=15197671;i.Po=h;var o=i.toOnHovered(h),a=2*o;i.Fo=gn.darken(h,a),i.Go=gn.darken(h,o);var c=r.alpha;i.Ho=c,i.zo=.5*c;var f=n.stroke,l=f.color;i.ha=l;var v=i.toOnHovered(l),b=2*v;i.oa=gn.darken(l,b),i.aa=gn.darken(l,v);var d=15197671;i.Vo=d;var g=i.toOnHovered(d),m=2*g;i.Xo=gn.darken(d,m),i.ca=gn.darken(d,g);var w=f.alpha;i.Yo=w,i.Jo=.5*w;var O=n.text,p=O.color;i.fa=p,i.qo=gn.toGrayscale(p),i.Zo=5197647;var D=O.alpha;i.Qo=D,i.$o=.5*D;var E=O.outline,M=E.color;i.ta=M,i.na=gn.toGrayscale(M);var S=E.alpha;return i.ia=S,i.ra=.5*S,i}return G(n,t),n.prototype.toOnHovered=function(t){var n,i=gn.toLuma(t);return 128<=i?.15*(1-(n=(i-128)/127))+.03*n:-.15*(1-(n=(127-i)/127))-.175*n},n.prototype.execute=function(t,n,i){var r=t.state;t.fill.set(void 0,this.getFillColor(r),this.getFillAlpha(r)),t.stroke.set(void 0,this.getStrokeColor(r),this.getStrokeAlpha(r)),t.text.set(void 0,this.getTextColor(r),this.getTextAlpha(r)),t.text.outline.set(void 0,this.getTextOutlineColor(r),this.getTextOutlineAlpha(r)),t.cursor=this.getCursor(r),n.written|=this.reset},n.prototype.getFillColor=function(t){return t.inDisabled?this.Po:t.isActive?t.isPressed?this.ua:t.isFocused||t.isHovered?this.sa:this.ea:t.isPressed?this.Fo:t.isFocused||t.isHovered?this.Go:this.Po},n.prototype.getFillAlpha=function(t){return t.inDisabled?this.zo:this.Ho},n.prototype.getStrokeColor=function(t){return t.inDisabled?this.Vo:t.isActive?t.isPressed?this.oa:t.isFocused||t.isHovered?this.aa:this.ha:t.isPressed?this.Xo:t.isFocused||t.isHovered?this.ca:this.Vo},n.prototype.getStrokeAlpha=function(t){return t.inDisabled?this.Jo:this.Yo},n.prototype.getTextColor=function(t){return t.inDisabled?this.qo:t.isActive?this.fa:this.Zo},n.prototype.getTextAlpha=function(t){return t.inDisabled?this.$o:this.Qo},n.prototype.getTextOutlineColor=function(t){return t.inDisabled?this.na:this.ta},n.prototype.getTextOutlineAlpha=function(t){return t.inDisabled?this.ra:this.ia},n.prototype.getCursor=function(t){return t.isActionable?"pointer":""},n}(Dn),Ja=function(t){function n(n){var i=t.call(this,n)||this;return n instanceof Wa&&(i.eo=n.isToggle,i.so=n.isGrouped),i}return G(n,t),n.prototype.isActionable=function(){return!0},n.prototype.initialize=function(n){this.actions.unshift(this.eo?new Ya(this):new Ka(this)),t.prototype.initialize.call(this,n)},n.prototype.onClick=function(n,i){var r=n.state,e=r.isClicked;r.lock(),t.prototype.onClick.call(this,n,i),!e&&r.isClicked&&(this.eo?r.isActive=!r.isActive:r.isActive||(r.isActivated=!0)),r.unlock()},n.prototype.onStateChange=function(n,i,r){t.prototype.onStateChange.call(this,n,i,r),this.eo&&this.so&&i.is(Nt.ACTIVATED)&&this.onActivated(n)},n.prototype.onActivated=function(t){var n=t.parent;if(null!=n)for(var i=n.children,r=0,e=i.length;r<e;++r){var u=i[r];u!==t&&u instanceof Wa&&u.isToggle&&u.isGrouped&&(u.state.isActive=!1)}},n}(Mu),Za=function(){e[r.BUTTON]=Ga,n[r.BUTTON]=Xa,Nu[r.BUTTON]=Ja,zi.set(r.BUTTON,Lt.PRIMITIVE|Lt.STROKE_SIDE|Lt.BORDER_RADIUS)},qa=[0,0],Qa=new t.Point,$a=function(t,n,i){var r=3*i-1;t[++r]=n,t[++r]=n+1,t[++r]=n+3,t[++r]=n+1,t[++r]=n+4,t[++r]=n+3,t[++r]=n+1,t[++r]=n+2,t[++r]=n+4,t[++r]=n+2,t[++r]=n+5,t[++r]=n+4,t[++r]=n+3,t[++r]=n+4,t[++r]=n+6,t[++r]=n+4,t[++r]=n+7,t[++r]=n+6,t[++r]=n+4,t[++r]=n+5,t[++r]=n+7,t[++r]=n+5,t[++r]=n+8,t[++r]=n+7},tc=function(t,n,i,r,e,u,s,h,o,a){var c=Qa,f=s*h,l=.5*e+(0<=e?+f:-f),v=.5*u+(0<=u?+f:-f);c.set(-l+i,-v+r),o.apply(c,c);var b=c.x,d=c.y;c.set(0+i,-v+r),o.apply(c,c);var g=c.x,m=c.y,w=g-b,O=m-d;c.set(i,r),o.apply(c,c);var p=c.x,D=c.y,E=p+(p-g),M=D+(D-m),j=p-w,T=D-O,I=2*n-1;t[++I]=b,t[++I]=d,t[++I]=g,t[++I]=m,t[++I]=g+w,t[++I]=m+O,t[++I]=j,t[++I]=T,t[++I]=p,t[++I]=D,t[++I]=p+w,t[++I]=D+O,t[++I]=E-w,t[++I]=M-O,t[++I]=E,t[++I]=M,t[++I]=E+w,t[++I]=M+O,a[0]=S(b,d,g,m),a[1]=S(b,d,j,T)},nc=function(t,n,i,r,e){var u=o(r),s=e[0],h=e[1],a=l(1,u,1,1),c=v(1,1),f=v(0,1),b=v(1,0),d=v(0,0),g=6*n-1;t[++g]=i,t[++g]=a,t[++g]=s,t[++g]=h,t[++g]=c,t[++g]=0,t[++g]=i,t[++g]=a,t[++g]=s,t[++g]=h,t[++g]=f,t[++g]=0,t[++g]=i,t[++g]=a,t[++g]=s,t[++g]=h,t[++g]=c,t[++g]=0,t[++g]=i,t[++g]=a,t[++g]=s,t[++g]=h,t[++g]=b,t[++g]=0,t[++g]=i,t[++g]=a,t[++g]=s,t[++g]=h,t[++g]=d,t[++g]=0,t[++g]=i,t[++g]=a,t[++g]=s,t[++g]=h,t[++g]=b,t[++g]=0,t[++g]=i,t[++g]=a,t[++g]=s,t[++g]=h,t[++g]=c,t[++g]=0,t[++g]=i,t[++g]=a,t[++g]=s,t[++g]=h,t[++g]=f,t[++g]=0,t[++g]=i,t[++g]=a,t[++g]=s,t[++g]=h,t[++g]=c,t[++g]=0},ic=function(t,n,i){var r=i.x0,e=i.x1,u=i.x2,s=i.x3,h=i.y0,o=i.y1,a=i.y2,c=i.y3,f=2*n-1;t[++f]=r,t[++f]=h,t[++f]=.5*(r+e),t[++f]=.5*(h+o),t[++f]=e,t[++f]=o,t[++f]=.5*(r+s),t[++f]=.5*(h+c),t[++f]=.5*(r+u),t[++f]=.5*(h+a),t[++f]=.5*(e+u),t[++f]=.5*(o+a),t[++f]=s,t[++f]=c,t[++f]=.5*(s+u),t[++f]=.5*(c+a),t[++f]=u,t[++f]=a},rc=function(t){function n(n,i,r){return t.call(this,n,i,r,9,8)||this}return G(n,t),n.prototype.init=function(){var t=this.buffer;t.updateIndices();var n=this.vertexOffset;$a(t.indices,n,this.indexOffset),this.inited|=Y.INDEX},n.prototype.update=function(t){var n=this.buffer;this.updateVertexAndStep(n,t),this.updateColor(n,t),this.updateUv(n,t)},n.prototype.updateVertexAndStep=function(t,n){var i=n.size,r=i.x,e=i.y,u=r!==this.sizeX||e!==this.sizeY,s=Q(n),h=this.transformLocalId!==s,o=n.stroke,a=o.align,c=o.enable?o.width:0,f=o.style,l=this.strokeAlign!==a||this.strokeWidth!==c||this.strokeStyle!==f;(!(this.inited&Y.VERTEX_AND_STEP)||u||h||l)&&(this.inited|=Y.VERTEX_AND_STEP,this.sizeX=r,this.sizeY=e,this.transformLocalId=s,this.strokeAlign=a,this.strokeWidth=c,this.strokeStyle=f,t.updateVertices(),t.updateSteps(),tc(t.vertices,this.vertexOffset,0,0,r,e,a,c,n.transform.internalTransform,qa),nc(t.steps,this.vertexOffset,c,f,qa))},n.prototype.updateUv=function(t,n){var i=$(n),r=tt(i);if(!(this.inited&Y.UV)||i!==this.texture||r!==this.textureTransformId){this.inited|=Y.UV,this.texture=i,this.textureTransformId=r,t.updateUvs();var e=nt(i);ic(t.uvs,this.vertexOffset,e)}},n}(q),ec=function(t,n,i,r,e){var s=C(n),h=s<<2,o=s<<1,a=9+h,c=8+o;return t.check(i,r,a,c)?new u(t,i,r,a,c,[new rc(t,i,r),new vn(t,i+9,r+8,h,o)]).init(n):null},uc=function(t,n,i){return Ca(t,n,i||new Gi)},sc=function(){e[r.CIRCLE]=ec,n[r.CIRCLE]=uc},hc=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},oc=[0,1],ac=[0,1],cc=function(t){return t?t.formatted.plength:0},fc=function(t){var n=cc(t);return(n>>4)+(0<(15&n)?1:0)<<4},lc=function(t,n){return n?2+(t<<2):t<<2},vc=function(t,n){return lc(t,n)-2},bc=function(t,n,i,r){for(var e=3*i-1,u=3*(i+r)-1,s=n;e<u;)t[++e]=s+0,t[++e]=s+2,t[++e]=s+1,t[++e]=s+1,t[++e]=s+2,t[++e]=s+3,s+=2},dc=function(t,n,i,r,e,u){for(var s=1/Math.max(1e-5,u),h=e.x0,o=e.x1,a=e.x2,c=e.x3,f=e.y0,l=e.y1,v=e.y2,b=e.y3,d=o-h,g=l-f,m=a-c,w=v-b,O=(i<<1)-1,p=(i+r<<1)-1,D=6*i-9;O<p;){var E=n[D+=12]*s;t[++O]=h+E*d,t[++O]=f+E*g,t[++O]=c+E*m,t[++O]=b+E*w}},gc=function(t,n,i,r,e,u,s,h,o,a,c){var f=X;null==f&&(X=f=[]);for(var l=c.a,v=c.b,b=c.c,d=c.d,g=c.tx,m=c.ty,w=0;w<e;++w){var O=w<<1,p=s[O],D=s[O+1];f[O]=l*p+b*D+g,f[O+1]=v*p+d*D+m}return wc(t,n,i,r,e,u,f,h,o,a)},mc=function(t,n,i,r,e,u,s,h,o,a,c,l,v,b){var d=f(h,o),g=Math.min(a,c);n[++t]=e,n[++t]=u,r[++i]=s,r[++i]=v,r[++i]=d,r[++i]=l,r[++i]=l,r[++i]=g,n[++t]=e,n[++t]=u,r[++i]=s,r[++i]=b,r[++i]=d,r[++i]=l,r[++i]=l,r[++i]=g},wc=function(t,n,i,r,e,u,s,h,o,a){var c=h.length;if(0<c){if(u){for(var f=0,l=0,v=i,b=0,d=h[0],g=1;g<c;++g)2<=(b=h[g])-d&&(l=pc(t,n,v,-1,s,d,b,e,o,a,l),f=Math.max(f,l),v+=lc(b-d,!1)),d=b;return 2<=(b=h[0]+e)-d?(l=pc(t,n,v,i+r-v,s,d,b,e,o,a,l),f=Math.max(f,l),v+=lc(b-d,!1)):Oc(t,n,v,i+r-v,s,d,b,e,o,a,l),f}for(f=0,l=0,v=i,2<=(b=h[0])&&(l=pc(t,n,v,-1,s,0,b,e,o,a,l),f=Math.max(f,l),v+=lc(b,!1)),d=b,g=1;g<c;++g)2<=(b=h[g])-d&&(l=pc(t,n,v,-1,s,d,b,e,o,a,l),f=Math.max(f,l),v+=lc(b-d,!1)),d=b;return 2<=(b=e)-d?(l=pc(t,n,v,i+r-v,s,d,b,e,o,a,l),f=Math.max(f,l),v+=lc(b-d,!1)):Oc(t,n,v,i+r-v,s,d,b,e,o,a,l),f}return u?Dc(t,n,i,r,s,0,e,e,o,a):pc(t,n,i,r,s,0,e,e,o,a,0)},Oc=function(t,n,i,r,e,u,s,a,c,f,v){if(0<=r)for(var b=o(f),d=h(f),g=l(3,b,d,0),m=l(5,b,d,0),w=(i<<1)-1,O=6*i-1,p=(i+r<<1)-1,D=u%a<<1,E=e[D],M=e[D+1];w<p;)t[++w]=E,t[++w]=M,n[++O]=0,n[++O]=g,n[++O]=0,n[++O]=v,n[++O]=v,n[++O]=0,t[++w]=E,t[++w]=M,n[++O]=0,n[++O]=m,n[++O]=0,n[++O]=v,n[++O]=v,n[++O]=0;return 0},pc=function(t,n,i,r,e,u,s,v,b,d,g){var m=o(d),w=h(d),O=l(3,m,w,0),p=l(4,m,w,0),D=l(5,m,w,0),E=l(6,m,w,0),M=u%v<<1,S=e[M],j=e[M+1],T=(u+1)%v<<1,I=e[T],C=e[T+1],N=S-(I-S),A=j-(C-j),R=oc,y=ac;a(N,A,S,j,R),a(S,j,I,C,y);var k=hc(R),L=k;c(R,k),c(y,L);var x=(i<<1)-1,B=6*i-1,_=0;mc(x,t,B,n,S,j,b,R,y,k,L,g,O,D),mc(x+=4,t,B+=12,n,S,j,b,R,y,k,L,_,p,E),x+=4,B+=12;for(var P=u+1,U=s-1;P<U;++P){N=S,A=j,S=I,j=C,R[0]=y[0],R[1]=y[1],k=L;var F=(P+1)%v<<1;I=e[F],C=e[F+1],a(S,j,I,C,y),L=hc(y),c(y,L),mc(x,t,B,n,S,j,b,R,y,k,L,_+=k,O,D),mc(x+=4,t,B+=12,n,S,j,b,R,y,k,L,_,p,E),x+=4,B+=12}N=S,A=j,S=I,j=C,R[0]=y[0],R[1]=y[1],k=L,a(S,j,I=S+(S-N),C=j+(j-A),y),c(y,L),mc(x,t,B,n,S,j,b,R,y,k,L,_+=k,O,D),mc(x+=4,t,B+=12,n,S,j,b,R,y,k,L,_,p,E),x+=4,B+=12;var G=6*i-1;for(P=G,U=G+12;P<U;P+=6)n[P+5]=g;for(P=G+12;P<B;P+=6)n[P+5]=_;if(0<=r)for(var H=f(R,y),z=(i+r<<1)-1;x<z;)t[++x]=S,t[++x]=j,n[++B]=0,n[++B]=O,n[++B]=H,n[++B]=_,n[++B]=_,n[++B]=0,t[++x]=S,t[++x]=j,n[++B]=0,n[++B]=D,n[++B]=H,n[++B]=_,n[++B]=_,n[++B]=0;return _},Dc=function(t,n,i,r,e,u,s,v,b,d){var g=o(d),m=h(d),w=l(3,g,m,0),O=l(4,g,m,0),p=l(5,g,m,0),D=l(6,g,m,0),E=(s-1)%v<<1,M=0,S=0,j=e[E],T=e[E+1],I=u%v<<1,C=e[I],N=e[I+1],A=oc,R=ac;a(M,S,j,T,A),a(j,T,C,N,R);var y=hc(A),k=hc(R);c(A,y),c(R,k);for(var L=0,x=(i<<1)-1,B=6*i-1,_=u;_<s;++_){M=j,S=T,j=C,T=N,A[0]=R[0],A[1]=R[1],y=k;var P=(_+1)%v<<1;C=e[P],N=e[P+1],a(j,T,C,N,R),k=hc(R),c(R,k),mc(x,t,B,n,j,T,b,A,R,y,k,L+=y,w,p),mc(x+=4,t,B+=12,n,j,T,b,A,R,y,k,L,O,D),x+=4,B+=12}M=j,S=T,j=C,T=N,A[0]=R[0],A[1]=R[1],y=k;var U=(u+1)%v<<1;for(C=e[U],N=e[U+1],a(j,T,C,N,R),k=hc(R),c(R,k),mc(x,t,B,n,j,T,b,A,R,y,k,L+=y,w,p),x+=4,B+=12,_=6*i-1;_<B;_+=6)n[_+5]=-L;if(0<=r)for(var F=f(A,R),G=(i+r<<1)-1;x<G;)t[++x]=j,t[++x]=T,n[++B]=b,n[++B]=w,n[++B]=F,n[++B]=L,n[++B]=-L,n[++B]=0,t[++x]=j,t[++x]=T,n[++B]=b,n[++B]=p,n[++B]=F,n[++B]=L,n[++B]=-L,n[++B]=0;return L},Ec=function(t){function n(n,i,r,e,u){var s=t.call(this,n,i,r,e,u)||this;return s.pointId=-1,s.pointCount=0,s.pointsClosed=!1,s.length=1,s}return G(n,t),n.prototype.init=function(){var t=this.buffer;t.updateIndices(),bc(t.indices,this.vertexOffset,this.indexOffset,this.indexCount),this.inited|=Y.INDEX},n.prototype.reinit=function(t,n,i,r){var e=fc(n.points),u=lc(e,!0),s=vc(e,!0);return this.buffer===t&&this.vertexOffset===i&&this.indexOffset===r&&this.vertexCount===u&&this.indexCount===s||!!t.check(i,r,u,s)&&(this.inited=Y.NONE,this.buffer=t,this.vertexOffset=i,this.indexOffset=r,this.vertexCount=u,this.indexCount=s,this.init(),!0)},n.prototype.isCompatible=function(t){return lc(fc(t.points),!0)===this.vertexCount},n.prototype.update=function(t){var n=this.buffer;this.updateLineVertexStep(n,t),this.updateColor(n,t),this.updateLineUv(n,t)},n.prototype.updateLineVertexStep=function(t,n){var i=n.points;if(i){var r=i.id,e=i.formatted,u=e.length,s=!!(e.style&K.CLOSED),h=r!==this.pointId||u!==this.pointCount||s!==this.pointsClosed,o=n.stroke,a=o.enable?o.width:0,c=o.style,f=this.strokeWidth!==a||this.strokeStyle!==c,l=Q(n),v=this.transformLocalId!==l;(!(this.inited&Y.VERTEX_AND_STEP)||h||v||f)&&(this.inited|=Y.VERTEX_AND_STEP,this.pointId=r,this.pointCount=u,this.pointsClosed=s,this.strokeWidth=a,this.strokeStyle=c,this.transformLocalId=l,h&&(this.inited&=~Y.UV),t.updateVertices(),t.updateSteps(),this.length=gc(t.vertices,t.steps,this.vertexOffset,this.vertexCount,this.pointCount,this.pointsClosed,e.values,e.segments,a,c,n.transform.internalTransform))}},n.prototype.updateLineUv=function(t,n){var i=$(n),r=tt(i);(!(this.inited&Y.UV)||i!==this.texture||r!==this.textureTransformId)&&(this.inited|=Y.UV,this.texture=i,this.textureTransformId=r,t.updateUvs(),dc(t.uvs,t.steps,this.vertexOffset,this.vertexCount,nt(i),this.length))},n}(q),Mc=[0,0,0],Sc=new t.Point,jc=function(t,n,i){var r=3*i-1;t[++r]=n+0,t[++r]=n+1,t[++r]=n+2,t[++r]=n+0,t[++r]=n+3,t[++r]=n+4,t[++r]=n+0,t[++r]=n+5,t[++r]=n+6},Tc=function(t,n,i,r,e,u,s,h,o,a){var c=s*h,f=.5*e+(0<=e?+c:-c),l=.5*u+(0<=u?+c:-c),v=2*f*l/(f+Math.sqrt(f*f+4*l*l)),b=Sc;b.set(i,r-l),o.apply(b,b);var d=b.x,g=b.y;b.set(i,r),o.apply(b,b);var m=b.x,w=b.y;b.set(i+f,r),o.apply(b,b);var O=m-d,p=w-g,D=b.x+O,E=b.y+p,M=m+(m-b.x)+O,j=w+(w-b.y)+p;b.set(i,r+l-v),o.apply(b,b);var T=b.x,I=b.y,C=m+O,N=w+p;a[0]=S(C,N,T,I),a[1]=S(D,E,C,N),a[2]=S(d,g,m,w);var A=(n<<1)-1;t[++A]=T,t[++A]=I,t[++A]=d,t[++A]=g,t[++A]=D,t[++A]=E,t[++A]=D,t[++A]=E,t[++A]=M,t[++A]=j,t[++A]=M,t[++A]=j,t[++A]=d,t[++A]=g},Ic=function(t,n,i,r,e){var u=o(r),s=e[0],h=l(0,u,1,1),a=v(0,0),c=v(1,0),f=v(0,1),b=6*n-1;t[++b]=i,t[++b]=h,t[++b]=s,t[++b]=s,t[++b]=a,t[++b]=0,t[++b]=i,t[++b]=h,t[++b]=s,t[++b]=s,t[++b]=c,t[++b]=0,t[++b]=i,t[++b]=h,t[++b]=s,t[++b]=s,t[++b]=c,t[++b]=0,t[++b]=i,t[++b]=h,t[++b]=s,t[++b]=s,t[++b]=f,t[++b]=0,t[++b]=i,t[++b]=h,t[++b]=s,t[++b]=s,t[++b]=f,t[++b]=0,t[++b]=i,t[++b]=h,t[++b]=s,t[++b]=s,t[++b]=c,t[++b]=0,t[++b]=i,t[++b]=h,t[++b]=s,t[++b]=s,t[++b]=c,t[++b]=0},Cc=function(t,n,i,r){var e=n.x0,u=n.x1,s=n.x2,h=n.x3,o=n.y0,a=n.y1,c=n.y2,f=n.y3,l=.5*(e+u),v=.5*(o+a),b=1-.5*r[0]/r[2],d=l+b*(h-e),g=v+b*(f-o),m=(i<<1)-1;t[++m]=d,t[++m]=g,t[++m]=l,t[++m]=v,t[++m]=s,t[++m]=c,t[++m]=s,t[++m]=c,t[++m]=h,t[++m]=f,t[++m]=h,t[++m]=f,t[++m]=l,t[++m]=v},Nc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.updateColor=function(t,n){var i=16777215,r=1,e=n.points;if(null!=e){var u=e.getMarker();if(null!=u){var s=this.toMarker(u).fill;i=s.color,r=n.visible&&s.enable?s.alpha:0}}var h=n.stroke,o=h.color,a=n.visible&&h.enable&&0<h.width?h.alpha:0;(!(this.inited&Y.COLOR)||i!==this.colorFill||r!==this.alphaFill||o!==this.colorStroke||a!==this.alphaStroke)&&(this.inited|=Y.COLOR,this.colorFill=i,this.alphaFill=r,this.colorStroke=o,this.alphaStroke=a,t.updateColors(),J(i,r,o,a,this.vertexOffset,this.vertexCount,t.colors))},n}(q),Ac=function(n){function i(t,i,r){var e=n.call(this,t,i,r,7,3)||this;return e.pointId=-1,e}return G(i,n),i.prototype.init=function(){var t=this.buffer;t.updateIndices(),jc(t.indices,this.vertexOffset,this.indexOffset),this.inited|=Y.INDEX},i.prototype.update=function(t){var n=this.buffer;this.updateVertexStepAndUv(n,t),this.updateColor(n,t)},i.prototype.updateVertexStepAndUv=function(n,r){var e,u=r.points;if(null!=u){var s=u.getMarker();if(null!=s){var h=this.toMarker(s),o=h.size,a=o.x,c=o.y,f=a!==this.sizeX||c!==this.sizeY,l=Q(r),v=this.transformLocalId!==l,b=r.stroke,d=b.align,g=b.enable?b.width:0,m=b.style,w=this.strokeAlign!==d||this.strokeWidth!==g||this.strokeStyle!==m,O=$(r),p=tt(O),D=O!==this.texture||p!==this.textureTransformId,E=f||w,M=u.id,S=M!==this.pointId,j=!(this.inited&Y.VERTEX_STEP_AND_UV);if(j||E||v||D||S){this.inited|=Y.VERTEX_STEP_AND_UV,this.sizeX=a,this.sizeY=c,this.transformLocalId=l,this.strokeAlign=d,this.strokeWidth=g,this.strokeStyle=m,this.texture=O,this.textureTransformId=p,this.pointId=M;var T=this.vertexOffset,I=null!==(e=i.WORK)&&void 0!==e?e:i.WORK=new t.Matrix;I.copyFrom(h.transform).prepend(r.transform.internalTransform),n.updateVertices(),Tc(n.vertices,T,0,0,a,c,d,g,I,Mc),(j||E||v)&&(n.updateSteps(),Ic(n.steps,T,g,m,Mc)),(j||E||D)&&(n.updateUvs(),Cc(n.uvs,nt(O),T,Mc))}}}},i}(Nc),Rc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.toMarker=function(t){return t.head},n}(Ac),yc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.toMarker=function(t){return t.tail},n}(Ac),kc=function(n){function i(t,i,r){var e=n.call(this,t,i,r,9,8)||this;return e.pointId=-1,e}return G(i,n),i.prototype.init=function(){var t=this.buffer;t.updateIndices();var n=this.vertexOffset;$a(t.indices,n,this.indexOffset),this.inited|=Y.INDEX},i.prototype.update=function(t){var n=this.buffer;this.updateVertexAndStep(n,t),this.updateColor(n,t),this.updateUv(n,t)},i.prototype.updateVertexAndStep=function(n,r){var e,u=r.points;if(null!=u){var s=u.getMarker();if(null!=s){var h=this.toMarker(s),o=h.size,a=o.x,c=o.y,f=a!==this.sizeX||c!==this.sizeY,l=Q(r),v=this.transformLocalId!==l,b=r.stroke,d=b.align,g=b.enable?b.width:0,m=b.style,w=this.strokeAlign!==d||this.strokeWidth!==g||this.strokeStyle!==m,O=u.id,p=O!==this.pointId;if(!(this.inited&Y.VERTEX_AND_STEP)||f||v||w||p){this.inited|=Y.VERTEX_AND_STEP,this.sizeX=a,this.sizeY=c,this.transformLocalId=l,this.strokeAlign=d,this.strokeWidth=g,this.strokeStyle=m,this.pointId=O;var D=null!==(e=i.WORK)&&void 0!==e?e:i.WORK=new t.Matrix;D.copyFrom(h.transform).prepend(r.transform.internalTransform),n.updateVertices(),n.updateSteps(),tc(n.vertices,this.vertexOffset,0,0,a,c,d,g,D,qa),nc(n.steps,this.vertexOffset,g,m,qa)}}}},i.prototype.updateUv=function(t,n){var i=$(n),r=tt(i);if(!(this.inited&Y.UV)||i!==this.texture||r!==this.textureTransformId){this.inited|=Y.UV,this.texture=i,this.textureTransformId=r,t.updateUvs();var e=nt(i);ic(t.uvs,this.vertexOffset,e)}},i}(Nc),Lc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.toMarker=function(t){return t.head},n}(kc),xc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.toMarker=function(t){return t.tail},n}(kc),Bc=function(){function n(t,n,i){this.buffer=t,this.vertexOffset=n,this.indexOffset=i,this.vertexCount=0,this.indexCount=0,this.texture=null}return n.prototype.init=function(){return this},n.prototype.reinit=function(t,n,i,r){return this.buffer=t,this.vertexOffset=i,this.indexOffset=r,!0},n.prototype.isCompatible=function(t){return!0},n.prototype.update=function(t){this.texture=$(t)},n.prototype.buildUnit=function(n){var i=this.texture||t.Texture.WHITE,r=i.baseTexture;if(r!==n.baseTexture){n.baseTexture=r;var e=this.indexOffset;n.push(i,e)}},n}(),_c=16,Pc=[0,0],Uc=new t.Point,Fc=function(t,n,i){var r=3*i-1;t[++r]=n+0,t[++r]=n+1,t[++r]=n+2,t[++r]=n+2,t[++r]=n+1,t[++r]=n+3,t[++r]=n+4,t[++r]=n+5,t[++r]=n+6,t[++r]=n+6,t[++r]=n+5,t[++r]=n+7,t[++r]=n+8,t[++r]=n+9,t[++r]=n+10,t[++r]=n+10,t[++r]=n+9,t[++r]=n+11,t[++r]=n+12,t[++r]=n+13,t[++r]=n+14,t[++r]=n+14,t[++r]=n+13,t[++r]=n+15},Gc=function(t,n,i,r,e,u,s,h,o,a){var c=s*h,f=.5*e+(0<=e?+c:-c),l=.5*u+(0<=u?+c:-c),v=Uc;v.set(i-f,r-l),o.apply(v,v);var b=v.x,d=v.y;v.set(i,r-l),o.apply(v,v);var g=v.x,m=v.y;v.set(i-f,r),o.apply(v,v);var w=v.x,O=v.y,p=g-b,D=m-d,E=w-b,M=O-d,j=g+p,T=m+D,I=w+p,C=O+D,N=j+E,A=T+M,R=w+E,y=O+M,k=R+p,L=y+D,x=k+p,B=L+D,_=(n<<1)-1;t[++_]=b,t[++_]=d,t[++_]=g,t[++_]=m,t[++_]=w,t[++_]=O,t[++_]=I,t[++_]=C,t[++_]=g,t[++_]=m,t[++_]=j,t[++_]=T,t[++_]=I,t[++_]=C,t[++_]=N,t[++_]=A,t[++_]=w,t[++_]=O,t[++_]=I,t[++_]=C,t[++_]=R,t[++_]=y,t[++_]=k,t[++_]=L,t[++_]=I,t[++_]=C,t[++_]=N,t[++_]=A,t[++_]=k,t[++_]=L,t[++_]=x,t[++_]=B,a[0]=S(b,d,g,m),a[1]=S(b,d,w,O)},Hc=function(t,n,i,r,e,u){var s=o(e),h=u[0],a=u[1],c=r&Z.TOP?1:0,f=r&Z.RIGHT?1:0,b=r&Z.BOTTOM?1:0,d=r&Z.LEFT?1:0,g=l(0,s,d,c),m=l(0,s,f,c),w=l(0,s,d,b),O=l(0,s,f,b),p=v(1,1),D=v(0,1),E=v(0,0),M=v(1,0),S=6*t-1;n[++S]=i,n[++S]=g,n[++S]=h,n[++S]=a,n[++S]=p,n[++S]=0,n[++S]=i,n[++S]=g,n[++S]=h,n[++S]=a,n[++S]=D,n[++S]=0,n[++S]=i,n[++S]=g,n[++S]=h,n[++S]=a,n[++S]=M,n[++S]=0,n[++S]=i,n[++S]=g,n[++S]=h,n[++S]=a,n[++S]=E,n[++S]=0,n[++S]=i,n[++S]=m,n[++S]=h,n[++S]=a,n[++S]=D,n[++S]=0,n[++S]=i,n[++S]=m,n[++S]=h,n[++S]=a,n[++S]=p,n[++S]=0,n[++S]=i,n[++S]=m,n[++S]=h,n[++S]=a,n[++S]=E,n[++S]=0,n[++S]=i,n[++S]=m,n[++S]=h,n[++S]=a,n[++S]=M,n[++S]=0,n[++S]=i,n[++S]=w,n[++S]=h,n[++S]=a,n[++S]=M,n[++S]=0,n[++S]=i,n[++S]=w,n[++S]=h,n[++S]=a,n[++S]=E,n[++S]=0,n[++S]=i,n[++S]=w,n[++S]=h,n[++S]=a,n[++S]=p,n[++S]=0,n[++S]=i,n[++S]=w,n[++S]=h,n[++S]=a,n[++S]=D,n[++S]=0,n[++S]=i,n[++S]=O,n[++S]=h,n[++S]=a,n[++S]=E,n[++S]=0,n[++S]=i,n[++S]=O,n[++S]=h,n[++S]=a,n[++S]=M,n[++S]=0,n[++S]=i,n[++S]=O,n[++S]=h,n[++S]=a,n[++S]=D,n[++S]=0,n[++S]=i,n[++S]=O,n[++S]=h,n[++S]=a,n[++S]=p,n[++S]=0},zc=function(t,n,i){var r=i.x0,e=i.y0,u=i.x1,s=i.y1,h=i.x2,o=i.y2,a=i.x3,c=i.y3,f=.5*(r+u),l=.5*(e+s),v=.5*(r+a),b=.5*(e+c),d=f-r,g=l-e,m=v+d,w=b+g,O=u+(v-r),p=s+(b-e),D=a+d,E=c+g,M=(n<<1)-1;t[++M]=r,t[++M]=e,t[++M]=f,t[++M]=l,t[++M]=v,t[++M]=b,t[++M]=m,t[++M]=w,t[++M]=f,t[++M]=l,t[++M]=u,t[++M]=s,t[++M]=m,t[++M]=w,t[++M]=O,t[++M]=p,t[++M]=v,t[++M]=b,t[++M]=m,t[++M]=w,t[++M]=a,t[++M]=c,t[++M]=D,t[++M]=E,t[++M]=m,t[++M]=w,t[++M]=O,t[++M]=p,t[++M]=D,t[++M]=E,t[++M]=h,t[++M]=o},Vc=function(n){function i(t,i,r){var e=n.call(this,t,i,r,_c,8)||this;return e.pointId=-1,e}return G(i,n),i.prototype.init=function(){var t=this.buffer;t.updateIndices(),Fc(t.indices,this.vertexOffset,this.indexOffset),this.inited|=Y.INDEX},i.prototype.update=function(t){var n=this.buffer;this.updateVertexStepAndUv(n,t),this.updateColor(n,t)},i.prototype.updateVertexStepAndUv=function(n,r){var e,u=r.points;if(null!=u){var s=u.getMarker();if(null!=s){var h=this.toMarker(s),o=h.size,a=o.x,c=o.y,f=a!==this.sizeX||c!==this.sizeY,l=Q(r),v=this.transformLocalId!==l,b=r.stroke,d=b.align,g=b.enable?b.width:0,m=b.side,w=b.style,O=this.strokeAlign!==d||this.strokeWidth!==g||this.strokeSide!==m||this.strokeStyle!==w,p=$(r),D=tt(p),E=p!==this.texture||D!==this.textureTransformId,M=f||O,S=u.id!==this.pointId,j=!(this.inited&Y.VERTEX_STEP_AND_UV);if(j||M||v||E||S){this.inited|=Y.VERTEX_STEP_AND_UV,this.sizeX=a,this.sizeY=c,this.transformLocalId=l,this.strokeAlign=d,this.strokeWidth=g,this.strokeSide=m,this.strokeStyle=w,this.texture=p,this.textureTransformId=D;var T=this.vertexOffset,I=null!==(e=i.WORK)&&void 0!==e?e:i.WORK=new t.Matrix;I.copyFrom(h.transform).prepend(r.transform.internalTransform),n.updateVertices(),Gc(n.vertices,T,0,0,a,c,d,g,I,Pc),(j||M||v)&&(n.updateSteps(),Hc(T,n.steps,g,m,w,Pc)),(j||M||E)&&(n.updateUvs(),zc(n.uvs,T,nt(p)))}}}},i}(Nc),Wc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.toMarker=function(t){return t.tail},n}(Vc),Xc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.toMarker=function(t){return t.head},n}(Vc),Kc=function(t){switch(t){case et.NONE:return 0;case et.CIRCLE:return 9;case et.TRIANGLE:return 7;case et.RECTANGLE:return _c}return 0},Yc=function(t){switch(t){case et.NONE:return 0;case et.CIRCLE:return 8;case et.TRIANGLE:return 3;case et.RECTANGLE:return 8}return 0},Jc=function(t,n,i,r){switch(t){case et.NONE:return new Bc(n,i,r);case et.CIRCLE:return new Lc(n,i,r);case et.TRIANGLE:return new Rc(n,i,r);case et.RECTANGLE:return new Xc(n,i,r)}return new Bc(n,i,r)},Zc=function(t,n,i,r){switch(t){case et.NONE:return new Bc(n,i,r);case et.CIRCLE:return new xc(n,i,r);case et.TRIANGLE:return new yc(n,i,r);case et.RECTANGLE:return new Wc(n,i,r)}return new Bc(n,i,r)},qc=function(t,n,i,r,e){var s=n.points,h=fc(s),o=lc(h,!0),a=vc(h,!0),c=et.NONE,f=et.NONE;if(s&&s instanceof Rr){var l=s.getMarker();l&&(c=l.tail.type,f=l.head.type)}var v=Kc(c),b=Yc(c),d=i+o,g=r+a,m=Kc(f),w=Yc(f),O=d+v,p=g+b,D=C(n),E=D<<2,M=D<<1,S=O+m,j=p+w,T=o+m+v+E,I=a+w+b+M;return t.check(i,r,T,I)?new u(t,i,r,T,I,[new Ec(t,i,r,o,a),Zc(c,t,d,g),Jc(f,t,O,p),new vn(t,S,j,E,M)]).init(n):null},Qc=function(){function t(t,n,i){this.oe=1e-6,this._x=t,this._y=n,this._z=0,this.R=i,i[0]=t,i[1]=n,this.index=0}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){if(0===this._z||this.oe<Math.abs(this._x-t)){this._x=t;var n=this.index,i=this.R;1===this._z?(i[n+0]=this._x,i[n+1]=this._y):(i[n+2]=this._x,i[n+3]=this._y,this.index+=2,this._z=1)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){if(0===this._z||this.oe<Math.abs(this._y-t)){this._y=t;var n=this.index,i=this.R;2===this._z?(i[n+0]=this._x,i[n+1]=this._y):(i[n+2]=this._x,i[n+3]=this._y,this.index+=2,this._z=2)}},enumerable:!1,configurable:!0}),t.prototype.toSide=function(t,n){return 0<=t-n?0<=t+n?1:0:0<=t+n?2:3},t.prototype.toAxis=function(t,n,i,r,e){var u=Math.abs(i),s=Math.abs(r),h=this.oe;if(u<h&&s<h)return Math.abs(t)<Math.abs(n)?0<=n?2:0:0<=t?1:3;var o=null,a=0,c=t*t+n*n;if(this.oe<c){var f=1/Math.sqrt(c),l=t*f,v=n*f,b=+i*l+r*v,d=-r*l+i*v,g=-b,m=-d;e&Ui.TOP&&(null==o||o<b)&&(o=b,a=this.toSide(i,r)),e&Ui.RIGHT&&(null==o||o<d)&&(o=d,a=this.toSide(-r,i)),e&Ui.BOTTOM&&(null==o||o<g)&&(o=g,a=this.toSide(-i,-r)),e&Ui.LEFT&&(null==o||o<m)&&(o=m,a=this.toSide(r,-i))}return a},t.prototype.toTailAxis=function(t,n,i,r,e){return this.toAxis(t-this.x,n-this.y,i,r,e)},t.prototype.tail=function(t,n,i,r,e,u,s,h){switch(this.toTailAxis(t,n,i,r,h)){case 0:this.y-s<=n?(this.y-=Math.max(s,u),this.x=t):this.y=n;break;case 1:t<=this.x+s?(this.x+=Math.max(s,e),this.y=n):this.x=t;break;case 2:n<=this.y+s?(this.y+=Math.max(s,e),this.x=t):this.y=n;break;case 3:this.x-s<=t?(this.x-=Math.max(s,e),this.y=n):this.x=t}},t.prototype.middle=function(t,n){var i=t-this._x,r=n-this._y;Math.abs(i)<Math.abs(r)?this.y=n:this.x=t},t.prototype.toHeadAxis=function(t,n,i,r,e){return this.toAxis(this.x-t,this.y-n,i,r,e)},t.prototype.head=function(t,n,i,r,e,u,s,h){switch(this.toHeadAxis(t,n,i,r,h)){case 0:n-s<=this.y&&(this.y=n-Math.max(s,u)),this.x=t,this.y=n;break;case 1:this.x<=t+s&&(this.x=t+Math.max(s,e)),this.y=n,this.x=t;break;case 2:this.y<=n+s&&(this.y=n+Math.max(s,u)),this.x=t,this.y=n;break;case 3:t-s<=this.x&&(this.x=t-Math.max(s,e)),this.y=n,this.x=t}},t.prototype.margin=function(t,n){var i=this.R,r=this.index;if(0!==t&&2<=r){var e=i[0],u=i[1],s=(o=i[2]-e)*o+(a=i[3]-u)*a;if((c=this.oe)<s){var h=t/Math.sqrt(o*o+a*a);c<Math.abs(h-1)?(i[0]=e+o*h,i[1]=u+a*h):this.index-=2}}if(r=this.index,0!==n&&2<=r){var o,a,c,f=i[r+0],l=i[r+1];s=(o=i[r-2]-f)*o+(a=i[r-1]-l)*a,(c=this.oe)<s&&(h=n/Math.sqrt(o*o+a*a),c<Math.abs(h-1)?(i[r+0]=f+o*h,i[r+1]=l+a*h):this.index-=2)}i.length=this.index+2},t}(),$c=function(t){function n(n){return void 0===n&&(n=r.CONNECTOR_ELBOW),t.call(this,n)||this}return G(n,t),n.prototype.fillPoints=function(t,n,i,r,e,u,s,h){var o=t.local,a=o.x,c=o.y,f=t.normal,l=f.x,v=f.y,b=t.side,d=i.local,g=d.x,m=d.y,w=i.normal,O=w.x,p=w.y,D=i.side,E=e.values,M=E.length,S=a-u,j=c-s,T=g-u,I=m-s,C=.5*(T+S),N=.5*(I+j),A=T-S,R=I-j,y=.5*rt.SIZE_X,k=.5*rt.SIZE_Y,L=1e-6;if(Math.abs(A)<L&&Math.abs(R)<L)h[0]=S,h[1]=j,h[2]=T,h[3]=I,h.length=4;else{var x=new Qc(S,j,h);if(0<M){var B=Math.atan2(R,A),_=Math.sqrt(A*A+R*R),P=Math.cos(B)*_,U=Math.sin(B)*_,F=E[0],G=E[1],H=C+P*F-U*G,z=N+P*G+U*F;x.tail(H,z,l,v,y,k,n,b);for(var V=2;V<M;V+=2){var W=E[V+0],X=E[V+1],K=C+P*W-U*X,Y=N+P*X+U*W;x.middle(K,Y)}x.head(T,I,O,p,y,k,r,D)}else x.tail(C,N,l,v,y,k,n,b),x.head(T,I,O,p,y,k,r,D);x.margin(n,r)}},n}(kr),tf=function(t,n,i){return Ca(t,n,i||new $c)},nf=function(){function t(){}return t.from=function(t,n,i){var r=[],e=t.length;if(4<e){var u=1e-6,s=t[0],h=t[1];0!==n&&u<(c=(o=s-t[2])*o+(a=h-t[3])*a)&&(s+=o*(f=n/Math.sqrt(c)),h+=a*f);var o,a,c,f,l=t[e-2],v=t[e-1];0!==i&&u<(c=(o=l-t[e-4])*o+(a=v-t[e-3])*a)&&(l+=o*(f=i/Math.sqrt(c)),v+=a*f);for(var b=.5*(l+s),d=.5*(v+h),g=l-s,m=v-h,w=Math.atan2(m,g),O=Math.cos(w),p=Math.sin(w),D=g*g+m*m,E=u<D?1/Math.sqrt(D):1,M=2,S=e-2;M<S;M+=2){var j=t[M+0]-b,T=t[M+1]-d;r.push((O*j+p*T)*E,(O*T-p*j)*E)}}return r},t}(),rf=function(t,n,i){return Ca(t,n,i||new kr)},ef=function(t,n,i,r){if(n instanceof kr){var e=r.resources,u=t[15];if(0<=u&&u<e.length){var s=r.getExtension(u);null==s&&(s=JSON.parse(e[u]),r.setExtension(u,s)),n.lock(_t.CONNECTOR);var h=n.points;h.deserialize(s[1],r);var o=n.edge;o.deserialize(s[0],i,r);var a=n.body,c=s[2];null!=c?a.deserialize(c,i,r):a.set(nf.from(h.values,o.tail.margin,o.head.margin)),n.unlock(_t.CONNECTOR,!0)}}},uf=function(){e[r.CONNECTOR_ELBOW]=qc,n[r.CONNECTOR_ELBOW]=tf,i[r.CONNECTOR_ELBOW]=ef,zi.set(r.CONNECTOR_ELBOW,Lt.CONNECTOR)},sf=function(){e[r.CONNECTOR_LINE]=qc,n[r.CONNECTOR_LINE]=rf,i[r.CONNECTOR_LINE]=ef,zi.set(r.CONNECTOR_LINE,Lt.CONNECTOR)},hf=function(t){function n(n,i,r){return t.call(this,n,i,r,_c,8)||this}return G(n,t),n.prototype.init=function(){var t=this.buffer;t.updateIndices(),Fc(t.indices,this.vertexOffset,this.indexOffset),this.inited|=Y.INDEX},n.prototype.update=function(t){var n=this.buffer;this.updateVertexStepAndUv(n,t),this.updateColor(n,t)},n.prototype.updateVertexStepAndUv=function(t,n){var i=n.size,r=i.x,e=i.y,u=r!==this.sizeX||e!==this.sizeY,s=Q(n),h=this.transformLocalId!==s,o=n.stroke,a=o.align,c=o.enable?o.width:0,f=o.side,l=o.style,v=this.strokeAlign!==a||this.strokeWidth!==c||this.strokeSide!==f||this.strokeStyle!==l,b=$(n),d=tt(b),g=b!==this.texture||d!==this.textureTransformId,m=u||v,w=!(this.inited&Y.VERTEX_STEP_AND_UV);if(w||m||h||g){this.inited|=Y.VERTEX_STEP_AND_UV,this.sizeX=r,this.sizeY=e,this.transformLocalId=s,this.strokeAlign=a,this.strokeWidth=c,this.strokeSide=f,this.strokeStyle=l,this.texture=b,this.textureTransformId=d;var O=this.vertexOffset;t.updateVertices(),Gc(t.vertices,O,.5*r,.5*e,r,e,a,c,n.transform.internalTransform,Pc),(w||m||h)&&(t.updateSteps(),Hc(O,t.steps,c,f,l,Pc)),(w||m||g)&&(t.updateUvs(),zc(t.uvs,O,nt(b)))}},n}(q),of=function(t,n,i,r,e){var s=C(n),h=s<<2,o=s<<1,a=_c+h,c=8+o;return t.check(i,r,a,c)?new u(t,i,r,a,c,[new hf(t,i,r),new vn(t,i+_c,r+8,h,o)]).init(n):null},af=function(t,n,i,r){var e=C(n),s=e<<2,h=e<<1,o=s,a=h;return t.check(i,r,o,a)?new u(t,i,r,o,a,[new vn(t,i,r,s,h)]).init(n):null},cf=function(t,n){var i=t.data.getMapping();if(null!=i)for(var r=i.values,e=0,u=r.length;e<u;++e){var s=r[e],h=s[0],o=n.getDataMapper(h);if(null!=o){var a=t.children,c=n.getDataDestination(s[1]),f=s[2];ff(a,o,c,f)}}},ff=function(t,n,i,r){for(var e=0,u=t.length;e<u;++e){for(var s=t[e],h=s.data,o=0,a=h.size();o<a;++o){var c=h.get(o);c&&c.scope!==Vt.PRIVATE&&n.map(c,i,r)}var f=s.children;0<f.length&&ff(f,n,i,r)}},lf=function(t,n,i){var r=n.pieces,e=t[15];if(r&&0<=e&&e<r.length){var u=n.pieceData;if(u){var s=r[e],h=u.get(s),o=i&&i(s,n);return h?function(t,n,i,r,e,u,s){var h=e.mode,o=e.depth;s=s||new qi(t,h,o);var a=Ca(u,e,s),c=s.size,f=c.x,l=c.y;return s.size.set(n,i),r.copyTo(s),s.size.init(),s.size.set(f,l),h===Pi.EDITOR?0<o&&cf(s,e):cf(s,e),a}(s,h.width,h.height,h.layer,n,t,o):function(t,n,i,r){var e=n.mode,u=n.depth;r=r||new qi(t,e,u);var s=Ca(i,n,r),h=r.size,o=h.x,a=h.y,c=r.children,f=new re("missing",e,u),l=.5*o,v=.5*o;f.transform.position.set(-l,-v),f.size.set(o,a),f.size.init(),f.parent=r;var b=new Su;return b.stroke.color=16711680,b.transform.position.set(l,v),b.size.copyFrom(r.size),b.attach(f),c.push(f),r.onChildTransformChange(),r.toDirty(),r.onAttach(),r.size.init(),e===Pi.EDITOR?0<u&&cf(r,n):cf(r,n),s}(s,n,t,o)}}return null},vf=function(t,n,i){null!=i||(i=new Hi);var r=t[15];i.subtype=function(t){var n=Fi.ALL&t;return 0!==n?n:Fi.HEAD}(r),i.side=Ui.ALL&r>>2,i.vvisible=0<(1&r>>6);var e=Ca(t,n,i);return!1===i.vvisible&&n.mode===Pi.VIEWER&&(i.visible=!1),e},bf=function(){e[r.EMBEDDED]=af,n[r.EMBEDDED]=lf,zi.set(r.EMBEDDED,Lt.EMBEDDED),e[r.EMBEDDED_LAYER]=of,e[r.EMBEDDED_ACCEPTOR_EDGE]=ec,n[r.EMBEDDED_ACCEPTOR_EDGE]=vf,zi.set(r.EMBEDDED_ACCEPTOR_EDGE,Lt.EMBEDDED_ACCEPTOR_EDGE)},df=function(){function t(t){this.g=t}return Object.defineProperty(t.prototype,"enable",{get:function(){var t=this.g.children;return!(0<t.length)||t[t.length-1].fill.enable},set:function(t){for(var n=this.g.children,i=0,r=n.length;i<r;++i)n[i].fill.enable=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){var t=this.g.children;return 0<t.length?t[t.length-1].fill.color:16777215},set:function(t){for(var n=this.g.children,i=0,r=n.length;i<r;++i)n[i].fill.color=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){var t=this.g.children;return 0<t.length?t[t.length-1].fill.alpha:1},set:function(t){for(var n=this.g.children,i=0,r=n.length;i<r;++i)n[i].fill.alpha=t},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){for(var n=this.g.children,i=0,r=n.length;i<r;++i)n[i].fill.copy(t)},t.prototype.set=function(t,n,i){for(var r=this.g.children,e=0,u=r.length;e<u;++e)r[e].fill.set(t,n,i)},t.prototype.clone=function(){return new t(this.g)},t.prototype.toObject=function(){var t=this.g.children;return 0<t.length?t[t.length-1].fill.toObject():{enable:!0,color:16777215,alpha:1}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),gf=function(){function t(t){this.g=t}return Object.defineProperty(t.prototype,"length",{get:function(){var t=this.g.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.length}return 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"plength",{get:function(){var t=this.g.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.plength}return 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){var t=this.g.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.id}return 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){var t=this.g.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.values}return[]},set:function(t){for(var n=this.g.children,i=0,r=n.length;i<r;++i){var e=n[i].points;null!=e&&(e.values=t)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"segments",{get:function(){var t=this.g.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.segments}return[]},set:function(t){for(var n=this.g.children,i=0,r=n.length;i<r;++i){var e=n[i].points;null!=e&&(e.segments=t)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){var t=this.g.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.style}return K.NONE},set:function(t){for(var n=this.g.children,i=0,r=n.length;i<r;++i){var e=n[i].points;null!=e&&(e.style=t)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"marker",{get:function(){for(var t=this.g.children,n=0,i=t.length;n<i;++n){var r=t[n].points;if(null!=r)return r.marker}return ht.getInstance()},enumerable:!1,configurable:!0}),t.prototype.getMarker=function(){for(var t=this.g.children,n=0,i=t.length;n<i;++n){var r=t[n].points;if(null!=r)return r.getMarker()}},Object.defineProperty(t.prototype,"formatter",{get:function(){var t=this.g.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.formatter}return null},set:function(t){for(var n=this.g.children,i=0,r=n.length;i<r;++i){var e=n[i].points;null!=e&&(e.formatter=t)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"formatted",{get:function(){var t=this.g.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.formatted}return this},enumerable:!1,configurable:!0}),t.prototype.onSizeChange=function(){},t.prototype.copy=function(t){for(var n=this.g.children,i=0,r=n.length;i<r;++i){var e=n[i].points;null!=e&&e.copy(t)}return this},t.prototype.set=function(t,n,i){for(var r=this.g.children,e=0,u=r.length;e<u;++e){var s=r[e].points;null!=s&&s.set(t,n,i)}return this},t.prototype.clone=function(n){return new t(n)},t.prototype.toPoints=function(t){for(var n=this.g.children,i=0,r=n.length;i<r;++i){var e=n[i].points;if(null!=e)return e.toPoints(t)}return[]},t.prototype.serialize=function(t){for(var n=this.g.children,i=0,r=n.length;i<r;++i){var e=n[i].points;if(null!=e)return e.serialize(t)}return-1},t}(),mf=function(){function t(t){this.g=t}return Object.defineProperty(t.prototype,"enable",{get:function(){var t=this.g.children;return 0<t.length&&t[t.length-1].stroke.enable},set:function(t){for(var n=this.g.children,i=0,r=n.length;i<r;++i)n[i].stroke.enable=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){var t=this.g.children;return 0<t.length?t[t.length-1].stroke.color:16777215},set:function(t){for(var n=this.g.children,i=0,r=n.length;i<r;++i)n[i].stroke.color=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){var t=this.g.children;return 0<t.length?t[t.length-1].stroke.alpha:1},set:function(t){for(var n=this.g.children,i=0,r=n.length;i<r;++i)n[i].stroke.alpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){var t=this.g.children;return 0<t.length?t[t.length-1].stroke.width:1},set:function(t){for(var n=this.g.children,i=0,r=n.length;i<r;++i)n[i].stroke.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){var t=this.g.children;return 0<t.length?t[t.length-1].stroke.align:1},set:function(t){for(var n=this.g.children,i=0,r=n.length;i<r;++i)n[i].stroke.align=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"side",{get:function(){var t=this.g.children;return 0<t.length?t[t.length-1].stroke.side:1},set:function(t){for(var n=this.g.children,i=0,r=n.length;i<r;++i)n[i].stroke.side=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){var t=this.g.children;return 0<t.length?t[t.length-1].stroke.style:s.NONE},set:function(t){for(var n=this.g.children,i=0,r=n.length;i<r;++i)n[i].stroke.style=t},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){for(var n=this.g.children,i=0,r=n.length;i<r;++i)n[i].stroke.copy(t)},t.prototype.set=function(t,n,i,r,e){for(var u=this.g.children,s=0,h=u.length;s<h;++s)u[s].stroke.set(t,n,i,r,e)},t.prototype.clone=function(){return new t(this.g)},t.prototype.toObject=function(){var t=this.g.children;return 0<t.length?t[t.length-1].stroke.toObject():{enable:!1,color:16777215,alpha:1,width:1,align:0,side:Z.NONE,style:s.NONE}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),wf=function(t){function n(n,i){void 0===i&&(i=r.GROUP);var e=t.call(this,i)||this;e._n=n;var u=new qt;return e.data=u,e.tag=u,e.size=e.newGroupSize(n),e.fill=e.newGroupFill(),e.stroke=e.newGroupStroke(),e.text=e.newGroupText(),e.Mt=e.newGroupPoints(),e}return G(n,t),Object.defineProperty(n.prototype,"mode",{get:function(){return this._n},enumerable:!1,configurable:!0}),n.prototype.newGroupSize=function(t){var n=rt.SIZE_X,i=rt.SIZE_Y;return t!==Pi.VIEWER?new Xi(this,n,i,this.isGroupSizeFittable()):new Ki(this,n,i,n,i)},n.prototype.isGroupSizeFittable=function(){return!0},n.prototype.newGroupFill=function(){return new df(this)},n.prototype.newGroupStroke=function(){return new mf(this)},n.prototype.newGroupText=function(){return new nn(this,rt.TEXT_VALUE,rt.TEXT_COLOR,rt.TEXT_ALPHA,rt.TEXT_FAMILY,rt.TEXT_SIZE)},n.prototype.newGroupPoints=function(){return new gf(this)},n.prototype.getBoundsSize=function(){var t=this.size;return t instanceof Ki?t.base:t},n.prototype.onChildTransformChange=function(){t.prototype.onChildTransformChange.call(this),this.size.fit()},Object.defineProperty(n.prototype,"corner",{get:function(){var t=this.children;return 0<t.length?t[t.length-1].corner:ft.ALL},set:function(t){for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].corner=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"gradient",{get:function(){for(var t=this.children,n=t.length-1;0<=n;--n){var i=t[n].gradient;if(null!=i)return i}},set:function(t){for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].gradient=t},enumerable:!1,configurable:!0}),n.prototype.serializeGradient=function(t){return-1},Object.defineProperty(n.prototype,"radius",{get:function(){var t=this.children;return 0<t.length?t[t.length-1].radius:.5},set:function(t){for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].radius=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"image",{get:function(){for(var t=this.children,n=t.length-1;0<=n;--n){var i=t[n].image;if(null!=i)return i}},set:function(t){for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].image=t},enumerable:!1,configurable:!0}),n.prototype.serializeImage=function(t){return-1},Object.defineProperty(n.prototype,"points",{get:function(){for(var t=this.children,n=t.length-1;0<=n;--n)if(null!=t[n].points)return this.Mt},set:function(t){},enumerable:!1,configurable:!0}),n.prototype.clone=function(){for(var t=this.newClone().copy(this),n=this.children,i=0,r=n.length;i<r;++i){var e=n[i].clone();e.parent=t,t.children.push(e)}return Lr.moveAll(n,t.children,n,t.children),t.onChildTransformChange(),t.toDirty(),t},n.prototype.newClone=function(){return new(0,this.constructor)(this._n,this.type)},n.prototype.containsAbs=function(t,n,i,r,e,u,s){return!1},n}(Pt),Of=function(t,n,i){i=i||new wf(n.mode);var r=Ca(t,n,i);return i.size.init(),r},pf=function(){e[r.GROUP]=af,n[r.GROUP]=Of,zi.set(r.GROUP,Lt.GROUP)},Df=function(){function n(n,i,r){this.g=n,this.j=new t.Point(i,r)}return n.prototype.init=function(){return this},Object.defineProperty(n.prototype,"x",{get:function(){return this.j.x},set:function(t){var n=this.j;if(n.x!==t){var i=n.x;n.x=t,this.onChange(i,n.y)}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this.j.y},set:function(t){var n=this.j;if(n.y!==t){var i=n.y;n.y=t,this.onChange(n.x,i)}},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n){var i=!1,r=this.j,e=r.x,u=r.y;return null!=t&&e!==t&&(i=!0,r.x=t),null!=n&&u!==n&&(i=!0,r.y=n),i&&this.onChange(e,u),this},n.prototype.clone=function(){var t=this.j;return new n(this.g,t.x,t.y)},n.prototype.copy=function(){},n.prototype.copyFrom=function(t){var n=t.x,i=t.y,r=this.j,e=r.x,u=r.y;return e===n&&u===i||(r.x=n,r.y=i,this.onChange(e,u)),this},n.prototype.copyTo=function(t){return this.j.copyTo(t)},n.prototype.equals=function(t){return this.j.equals(t)},n.prototype.fit=function(){return this},n.prototype.onChange=function(t,n){this.g.onSizeChange()},n}(),Ef=function(t){function n(n,i){return void 0===i&&(i=r.GROUP_SHADOWED),t.call(this,n,i)||this}return G(n,t),n.prototype.newGroupSize=function(n){return n!==Pi.VIEWER?new Df(this,rt.SIZE_X,rt.SIZE_Y):t.prototype.newGroupSize.call(this,n)},n}(wf),Mf=function(t,n,i){i=i||new Ef(n.mode);var r=Ca(t,n,i);return i.size.init(),r},Sf=function(){e[r.GROUP_SHADOWED]=af,n[r.GROUP_SHADOWED]=Mf,zi.set(r.GROUP_SHADOWED,Lt.GROUP)},jf=function(t){function n(n,i,r){return t.call(this,n,i,r,_c,8)||this}return G(n,t),n.prototype.init=function(){var t=this.buffer;t.updateIndices(),Fc(t.indices,this.vertexOffset,this.indexOffset),this.inited|=Y.INDEX},n.prototype.update=function(t){var n=this.buffer;this.updateVertexStepAndUv(n,t),this.updateColor(n,t)},n.prototype.updateVertexStepAndUv=function(t,n){var i=n.size,r=i.x,e=i.y,u=r!==this.sizeX||e!==this.sizeY,s=Q(n),h=this.transformLocalId!==s,o=n.stroke,a=o.align,c=o.enable?o.width:0,f=o.side,l=o.style,v=this.strokeAlign!==a||this.strokeWidth!==c||this.strokeSide!==f||this.strokeStyle!==l,b=$(n),d=tt(b),g=b!==this.texture||d!==this.textureTransformId,m=u||v,w=!(this.inited&Y.VERTEX_STEP_AND_UV);if(w||m||h||g){this.inited|=Y.VERTEX_STEP_AND_UV,this.sizeX=r,this.sizeY=e,this.transformLocalId=s,this.strokeAlign=a,this.strokeWidth=c,this.strokeSide=f,this.strokeStyle=l,this.texture=b,this.textureTransformId=d;var O=this.vertexOffset;t.updateVertices(),Gc(t.vertices,O,0,0,r,e,a,c,n.transform.internalTransform,Pc),(w||m||h)&&(t.updateSteps(),Hc(O,t.steps,c,f,l,Pc)),(w||m||g)&&(t.updateUvs(),zc(t.uvs,O,nt(b)))}},n}(q),Tf=function(t,n,i,r,e){var s=C(n),h=s<<2,o=s<<1,a=_c+h,c=8+o;return t.check(i,r,a,c)?new u(t,i,r,a,c,[new jf(t,i,r),new vn(t,i+_c,r+8,h,o)]).init(n):null},If=function(t){function n(n,i){void 0===i&&(i=r.IMAGE);var e=t.call(this,i)||this;return null!=n&&(e.image=n,e.size.set(n.width,n.height)),e.fill.alpha=1,e}return G(n,t),n.prototype.clone=function(){return new n(this.image,this.type).copy(this)},n}(Su),Cf=function(t,n,i){return Ca(t,n,i||new If)},Nf=function(){e[r.IMAGE]=Tf,n[r.IMAGE]=Cf},Af=[0,0],Rf=new t.Point,yf=function(t,n,i){var r=3*i-1;t[++r]=n,t[++r]=n+1,t[++r]=n+3,t[++r]=n+1,t[++r]=n+4,t[++r]=n+3,t[++r]=n+1,t[++r]=n+2,t[++r]=n+4,t[++r]=n+2,t[++r]=n+5,t[++r]=n+4,t[++r]=n+3,t[++r]=n+4,t[++r]=n+6,t[++r]=n+4,t[++r]=n+7,t[++r]=n+6,t[++r]=n+4,t[++r]=n+5,t[++r]=n+7,t[++r]=n+5,t[++r]=n+8,t[++r]=n+7},kf=function(t,n,i,r,e,u,s,h){var a=o(e),c=l(2,a,1,1),f=u/h[0],v=s/h[1],b=.5*(f+v),d=r/12,g=-1+i,m=6*n-1;t[++m]=d,t[++m]=c,t[++m]=b,t[++m]=g,t[++m]=0,t[++m]=0,t[++m]=d,t[++m]=c,t[++m]=v,t[++m]=g,t[++m]=0,t[++m]=0,t[++m]=d,t[++m]=c,t[++m]=b,t[++m]=g,t[++m]=0,t[++m]=0,t[++m]=d,t[++m]=c,t[++m]=f,t[++m]=g,t[++m]=0,t[++m]=0,t[++m]=d,t[++m]=c,t[++m]=b,t[++m]=g,t[++m]=0,t[++m]=0,t[++m]=d,t[++m]=c,t[++m]=f,t[++m]=g,t[++m]=0,t[++m]=0,t[++m]=d,t[++m]=c,t[++m]=b,t[++m]=g,t[++m]=0,t[++m]=0,t[++m]=d,t[++m]=c,t[++m]=v,t[++m]=g,t[++m]=0,t[++m]=0,t[++m]=d,t[++m]=c,t[++m]=v,t[++m]=g,t[++m]=0,t[++m]=0},Lf=function(t,n,i,r,e,u,s,h){var o=Rf,a=.5*e,c=.5*u;o.set(i-a,r-c),s.apply(o,o);var f=o.x,l=o.y;o.set(i+a,r-c),s.apply(o,o);var v=o.x,b=o.y;o.set(i+a,r+c),s.apply(o,o);var d=o.x,g=o.y,m=f+(d-v),w=l+(g-b),O=(n<<1)-1;t[++O]=f,t[++O]=l,t[++O]=.5*(f+v),t[++O]=.5*(l+b),t[++O]=v,t[++O]=b,t[++O]=.5*(f+m),t[++O]=.5*(l+w),t[++O]=.5*(f+d),t[++O]=.5*(l+g),t[++O]=.5*(v+d),t[++O]=.5*(b+g),t[++O]=m,t[++O]=w,t[++O]=.5*(m+d),t[++O]=.5*(w+g),t[++O]=d,t[++O]=g,h[0]=.5*S(f,l,v,b),h[1]=.5*S(f,l,m,w)},xf=function(t,n,i){var r=i.x0,e=i.y0,u=i.x1,s=i.y1,h=i.x2,o=i.y2,a=i.x3,c=i.y3,f=(n<<1)-1;t[++f]=r,t[++f]=e,t[++f]=.5*(u+r),t[++f]=.5*(s+e),t[++f]=u,t[++f]=s,t[++f]=.5*(r+a),t[++f]=.5*(e+c),t[++f]=.5*(r+h),t[++f]=.5*(e+o),t[++f]=.5*(u+h),t[++f]=.5*(s+o),t[++f]=a,t[++f]=c,t[++f]=.5*(a+h),t[++f]=.5*(c+o),t[++f]=h,t[++f]=o},Bf=function(t){function n(n,i,r){var e=t.call(this,n,i,r,9,8)||this;return e.textureWidth=-1,e.textureHeight=-1,e}return G(n,t),n.prototype.init=function(){var t=this.vertexOffset,n=this.buffer;n.updateIndices(),yf(n.indices,t,this.indexOffset),this.inited|=Y.INDEX},n.prototype.update=function(t){var n=this.buffer;this.updateVertexAndStep(n,t),this.updateColor(n,t),this.updateUv(n,t)},n.prototype.updateVertexAndStep=function(t,n){var i=n.size,r=i.x,e=i.y,u=r!==this.sizeX||e!==this.sizeY,s=Q(n),h=this.transformLocalId!==s,o=n.stroke,a=o.align,c=o.enable?o.width:0,f=o.style,l=this.strokeAlign!==a||this.strokeWidth!==c||this.strokeStyle!==f,v=$(n),b=v.width*v.resolution,d=v.height*v.resolution,g=this.textureWidth!==b||this.textureHeight!==d;(!(this.inited&Y.VERTEX_AND_STEP)||u||h||l||g)&&(this.inited|=Y.VERTEX_AND_STEP,this.sizeX=r,this.sizeY=e,this.transformLocalId=s,this.strokeAlign=a,this.strokeWidth=c,this.strokeStyle=f,this.textureWidth=b,this.textureHeight=d,t.updateVertices(),Lf(t.vertices,this.vertexOffset,0,0,r,e,n.transform.internalTransform,Af),t.updateSteps(),kf(t.steps,this.vertexOffset,a,c,f,b,d,Af))},n.prototype.updateUv=function(t,n){var i=$(n),r=tt(i);(!(this.inited&Y.UV)||i!==this.texture||r!==this.textureTransformId)&&(this.inited|=Y.UV,this.texture=i,this.textureTransformId=r,t.updateUvs(),xf(t.uvs,this.vertexOffset,nt(i)))},n}(q),_f=function(t,n,i,r,e){var s=C(n),h=s<<2,o=s<<1,a=9+h,c=8+o;return t.check(i,r,a,c)?new u(t,i,r,a,c,[new Bf(t,i,r),new vn(t,i+9,r+8,h,o)]).init(n):null},Pf=function(t){function n(n,i){return void 0===i&&(i=r.IMAGE_SDF),t.call(this,n,i)||this}return G(n,t),n.prototype.clone=function(){return new n(this.image,this.type).copy(this)},n}(If),Uf=function(t,n,i){return Ca(t,n,i||new Pf)},Ff=function(){function n(t,n,i){this.buffer=t,this.vertexOffset=n,this.indexOffset=i,this.vertexCount=0,this.indexCount=0,this.texture=null}return n.prototype.init=function(){return this},n.prototype.reinit=function(t,n,i,r){return this.buffer=t,this.vertexOffset=i,this.indexOffset=r,!0},n.prototype.isCompatible=function(t){return!0},n.prototype.update=function(t){this.texture=$(t)},n.prototype.buildUnit=function(n){var i=this.texture||t.Texture.WHITE,r=i.baseTexture;if(r!==n.baseTexture){n.baseTexture=r;var e=this.indexOffset;n.push(i,e)}},n}(),Gf=function(t,n,i,r,e){var s=C(n),h=s<<2,o=s<<1,a=h,c=o;return t.check(i,r,a,c)?new u(t,i,r,a,c,[new Ff(t,i,r),new vn(t,i,r,h,o)]).init(n):null},Hf=function(t){function n(n){return void 0===n&&(n=r.LABEL),t.call(this,n)||this}return G(n,t),n.prototype.clone=function(){return new n(this.type).copy(this)},n}(en),zf=function(t,n,i){return Ca(t,n,i||new Hf)},Vf=function(){e[r.LABEL]=Gf,n[r.LABEL]=zf},Wf=function(t){function n(n){void 0===n&&(n=r.LINE);var i=t.call(this,n)||this;return i.Mt=new Rr(i),i}return G(n,t),Object.defineProperty(n.prototype,"points",{get:function(){return this.Mt},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.serialize=function(n){var i=t.prototype.serialize.call(this,n);return i[15]=this.Mt.serialize(n),i},n}(cn),Xf=function(t,n,i){i=i||new Wf;var r=Ca(t,n,i);i.points.deserialize(t[15],n);var e=i.points.style,u=K.NON_SCALING_MASK|K.DOTTED_MASK|K.DASHED_MASK,s=e&u;return s&&(i.points.style&=~u,i.stroke.style|=s),r},Kf=function(){e[r.LINE]=qc,n[r.LINE]=Xf},Yf=function(t,n,i){for(var r=2*n,e=2*(n+i);r<e;r+=2)t[r+0]=0,t[r+1]=0},Jf=function(t,n,i){for(var r=6*n,e=6*(n+i);r<e;r+=6)t[r+0]=0,t[r+1]=0,t[r+2]=0,t[r+3]=0,t[r+4]=0,t[r+5]=0},Zf=function(t,n,i){for(var r=2*n,e=2*(n+i);r<e;r+=2)t[r+0]=0,t[r+1]=0},qf=function(t){return(t>>4)+(0<(15&t)?1:0)<<4},Qf=function(t,n,i,r,e,u,s,h,o,a,c,f){if(s)if(i.isStaticColor()){var l=i.getColor(0,o);if(i.isStaticAlpha()){var v=i.getAlpha(0,a);$f(t,n,i,r,e,u,h,c,f,l,v)}else tl(t,n,i,r,e,u,h,c,f,l,a)}else i.isStaticAlpha()?(v=i.getAlpha(0,a),nl(t,n,i,r,e,u,h,c,f,o,v)):il(t,n,i,r,e,u,h,c,f,o,a);else i.isStaticColor()?(l=i.getColor(0,o),$f(t,n,i,r,e,u,h,c,f,l,0)):nl(t,n,i,r,e,u,h,c,f,o,0)},$f=function(t,n,i,r,e,u,s,h,o,a,c){if(s)if(r.isStaticColor()){var f=r.getColor(0,h);if(r.isStaticAlpha()){var l=r.getAlpha(0,o);J(a,c,f,l,t,n*e,u)}else for(var v=0,b=t;v<e;v+=1,b+=n)l=r.getAlpha(v,o),J(a,c,f,l,b,n,u)}else if(r.isStaticAlpha())for(l=r.getAlpha(0,o),v=0,b=t;v<e;v+=1,b+=n)f=r.getColor(v,h),J(a,c,f,l,b,n,u);else for(v=0,b=t;v<e;v+=1,b+=n)f=r.getColor(v,h),l=r.getAlpha(v,o),J(a,c,f,l,b,n,u);else if(r.isStaticColor())f=r.getColor(0,h),J(a,c,f,0,t,n*e,u);else for(v=0,b=t;v<e;v+=1,b+=n)f=r.getColor(v,h),J(a,c,f,0,b,n,u)},tl=function(t,n,i,r,e,u,s,h,o,a,c){if(s)if(r.isStaticColor()){var f=r.getColor(0,h);if(r.isStaticAlpha())for(var l=r.getAlpha(0,o),v=0,b=t;v<e;v+=1,b+=n){var d=i.getAlpha(v,c);J(a,d,f,l,b,n,u)}else for(v=0,b=t;v<e;v+=1,b+=n)d=i.getAlpha(v,c),l=r.getAlpha(v,o),J(a,d,f,l,b,n,u)}else if(r.isStaticAlpha())for(l=r.getAlpha(0,o),v=0,b=t;v<e;v+=1,b+=n)d=i.getAlpha(v,c),f=r.getColor(v,h),J(a,d,f,l,b,n,u);else for(v=0,b=t;v<e;v+=1,b+=n)d=i.getAlpha(v,c),f=r.getColor(v,h),l=r.getAlpha(v,o),J(a,d,f,l,b,n,u);else if(r.isStaticColor())for(f=r.getColor(0,h),v=0,b=t;v<e;v+=1,b+=n)d=i.getAlpha(v,c),J(a,d,f,0,b,n,u);else for(v=0,b=t;v<e;v+=1,b+=n)d=i.getAlpha(v,c),f=r.getColor(v,h),J(a,d,f,0,b,n,u)},nl=function(t,n,i,r,e,u,s,h,o,a,c){if(s)if(r.isStaticColor()){var f=r.getColor(0,h);if(r.isStaticAlpha())for(var l=r.getAlpha(0,o),v=0,b=t;v<e;v+=1,b+=n){var d=i.getColor(v,a);J(d,c,f,l,b,n,u)}else for(v=0,b=t;v<e;v+=1,b+=n)d=i.getColor(v,a),l=r.getAlpha(v,o),J(d,c,f,l,b,n,u)}else if(r.isStaticAlpha())for(l=r.getAlpha(0,o),v=0,b=t;v<e;v+=1,b+=n)d=i.getColor(v,a),f=r.getColor(v,h),J(d,c,f,l,b,n,u);else for(v=0,b=t;v<e;v+=1,b+=n)d=i.getColor(v,a),f=r.getColor(v,h),l=r.getAlpha(v,o),J(d,c,f,l,b,n,u);else if(r.isStaticColor())for(f=r.getColor(0,h),v=0,b=t;v<e;v+=1,b+=n)d=i.getColor(v,a),J(d,c,f,0,b,n,u);else for(v=0,b=t;v<e;v+=1,b+=n)d=i.getColor(v,a),f=r.getColor(v,h),J(d,c,f,0,b,n,u)},il=function(t,n,i,r,e,u,s,h,o,a,c){if(s)if(r.isStaticColor()){var f=r.getColor(0,h);if(r.isStaticAlpha())for(var l=r.getAlpha(0,o),v=0,b=t;v<e;v+=1,b+=n){var d=i.getColor(v,a),g=i.getAlpha(v,c);J(d,g,f,l,b,n,u)}else for(v=0,b=t;v<e;v+=1,b+=n)d=i.getColor(v,a),g=i.getAlpha(v,c),l=r.getAlpha(v,o),J(d,g,f,l,b,n,u)}else if(r.isStaticAlpha())for(l=r.getAlpha(0,o),v=0,b=t;v<e;v+=1,b+=n)d=i.getColor(v,a),g=i.getAlpha(v,c),f=r.getColor(v,h),J(d,g,f,l,b,n,u);else for(v=0,b=t;v<e;v+=1,b+=n)d=i.getColor(v,a),g=i.getAlpha(v,c),f=r.getColor(v,h),l=r.getAlpha(v,o),J(d,g,f,l,b,n,u);else if(r.isStaticColor())for(f=r.getColor(0,h),v=0,b=t;v<e;v+=1,b+=n)d=i.getColor(v,a),g=i.getAlpha(v,c),J(d,g,f,0,b,n,u);else for(v=0,b=t;v<e;v+=1,b+=n)d=i.getColor(v,a),g=i.getAlpha(v,c),f=r.getColor(v,h),J(d,g,f,0,b,n,u)},rl=function(t){function n(n,i,r,e,u,s,h,o){var a=t.call(this,n,i,r,e,u)||this;return a.pointId=-1,a.pointCount=0,a.pointCountReserved=s,a.pointSizeId=-1,a.pointOffsetId=-1,a.pointFillId=-1,a.pointStrokeId=-1,a.vcountPerPoint=h,a.icountPerPoint=o,a}return G(n,t),n.prototype.reinit=function(t,n,i,r){var e=qf(cc(n.points));if(this.buffer!==t||this.vertexOffset!==i||this.indexOffset!==r||this.pointCountReserved!==e){var u=e*this.vcountPerPoint,s=e*this.icountPerPoint;return!!t.check(i,r,u,s)&&(this.inited=Y.NONE,this.buffer=t,this.vertexOffset=i,this.indexOffset=r,this.vertexCount=u,this.indexCount=s,this.pointCountReserved=e,this.init(),!0)}return!0},n.prototype.isCompatible=function(t){return qf(cc(t.points))===this.pointCountReserved},n.prototype.updateLineOfAnyColor=function(t,n,i,r){var e=i.fill,u=e.id,s=u!==this.pointFillId,h=n.fill,o=n.visible&&h.enable,a=h.color,c=o?h.alpha:0,f=a!==this.colorFill||c!==this.alphaFill,l=i.stroke,v=l.id,b=v!==this.pointStrokeId,d=n.stroke,g=n.visible&&d.enable,m=d.color,w=g?d.alpha:0,O=m!==this.colorStroke||w!==this.alphaStroke;(!(this.inited&Y.COLOR)||s||f||b||O)&&(this.inited|=Y.COLOR,this.colorFill=a,this.alphaFill=c,this.pointFillId=u,this.colorStroke=m,this.alphaStroke=w,this.pointStrokeId=v,t.updateColors(),Qf(this.vertexOffset,r,e,l,this.pointCountReserved,t.colors,o,g,a,c,m,w))},n}(q),el=function(t,n,i,r,e){for(var u=n,s=i+r,h=1;h<e;++h){for(var o=3*s,a=3*i,c=0;c<r;++c)t[o+0]=t[a+0]+u,t[o+1]=t[a+1]+u,t[o+2]=t[a+2]+u,o+=3,a+=3;u+=n,s+=r}},ul=function(t,n,i,r){for(var e=6*n,u=6*(n+i),s=1;s<r;++s)for(var h=e,o=0;o<i;++o)t[u+0]=t[h+0],t[u+1]=t[h+1],t[u+2]=t[h+2],t[u+3]=t[h+3],t[u+4]=t[h+4],t[u+5]=t[h+5],u+=6,h+=6},sl=function(t,n,i,r){for(var e=n+i,u=1;u<r;++u){for(var s=e<<1,h=n<<1,o=0;o<i;++o)t[s]=t[h],t[s+1]=t[h+1],s+=2,h+=2;e+=i}},hl=function(t,n,i,r,e,u,s){var h=n.a,o=n.b,a=n.c,c=n.d,f=e-1,l=i+f*r;if(s.isStaticX()&&s.isStaticY())for(var v=s.getX(0),b=s.getY(0);0<=f;--f){for(var d=h*(D=u[p=f<<1]+v)+a*(E=u[p+1]+b),g=o*D+c*E,m=l<<1,w=i<<1,O=0;O<r;++O)t[m]=t[w]+d,t[m+1]=t[w+1]+g,m+=2,w+=2;l-=r}else for(;0<=f;--f){var p,D,E;for(d=h*(D=u[p=f<<1]+s.getX(f))+a*(E=u[p+1]+s.getY(f)),g=o*D+c*E,m=l<<1,w=i<<1,O=0;O<r;++O)t[m]=t[w]+d,t[m+1]=t[w+1]+g,m+=2,w+=2;l-=r}},ol=function(t){return jt(t)||null==t},al=function(t,n,i){return jt(n)?n:St(n)?n(t):n?n[t%n.length]:i},cl=function(){function t(t){this.g=t,this.A=0,this.p=null,this.S=null}return Object.defineProperty(t.prototype,"id",{get:function(){return this.A},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.p},set:function(t){this.set(t,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.S},set:function(t){this.set(void 0,t)},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){var i=!1;void 0!==t&&this.p!==t&&(i=!0,this.p=t),void 0!==n&&this.S!==n&&(i=!0,this.S=n),i&&(this.A+=1,this.g.updateUploaded())},t.prototype.getColor=function(t,n){return al(t,this.p,n)},t.prototype.getAlpha=function(t,n){return al(t,this.S,n)},t.prototype.isStaticColor=function(){return ol(this.p)},t.prototype.isStaticAlpha=function(){return ol(this.S)},t.prototype.toDirty=function(){this.A+=1},t}(),fl=function(){function t(t,n,i){this.g=t,this.A=0,this._x=null,this._y=null,this.la=n,this.va=i,this.ba=null,this.da=0,this.ga=-1,this.ma=0}return Object.defineProperty(t.prototype,"id",{get:function(){return this.A},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this.set(t,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this.set(void 0,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"limit",{get:function(){return this.ba},set:function(t){this.ba=t},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){var i=!1;void 0!==t&&this._x!==t&&(i=!0,this._x=t),void 0!==n&&this._y!==n&&(i=!0,this._y=n),i&&(this.A+=1,this.g.updateUploaded())},t.prototype.getX=function(t){return al(t,this._x,this.la)},t.prototype.getY=function(t){return al(t,this._y,this.va)},t.prototype.getLimit=function(){var t=this.ba;return null!=t?t:(this.updateLimitComputed(),this.da)},t.prototype.updateLimitComputed=function(){var t=this.A,n=this.g.length;this.ga===t&&this.ma===n||(this.ga=t,this.ma=n,this.da=Math.max(this.calcLimit(this._x,n,this.la),this.calcLimit(this._y,n,this.va)))},t.prototype.calcLimit=function(t,n,i){if(jt(t))return Math.abs(t);if(St(t)){if(0<n){for(var r=Math.abs(t(0)),e=1;e<n;++e)r=Math.max(r,Math.abs(t(e)));return r}return 0}if(null!=t){var u=t.length;if(0<u){for(r=t[0],e=1;e<u;++e)r=Math.max(r,Math.abs(t[e]));return r}return 0}return Math.abs(i)},t.prototype.isStaticX=function(){return ol(this._x)},t.prototype.isStaticY=function(){return ol(this._y)},t.prototype.toDirty=function(){this.A+=1},t}(),ll=function(){function t(t){this.g=t,this.A=0,this.p=null,this.S=null}return Object.defineProperty(t.prototype,"id",{get:function(){return this.A},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.p},set:function(t){this.set(t,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.S},set:function(t){this.set(void 0,t)},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){var i=!1;void 0!==t&&this.p!==t&&(i=!0,this.p=t),void 0!==n&&this.S!==n&&(i=!0,this.S=n),i&&(this.A+=1,this.g.updateUploaded())},t.prototype.getColor=function(t,n){return al(t,this.p,n)},t.prototype.getAlpha=function(t,n){return al(t,this.S,n)},t.prototype.isStaticColor=function(){return ol(this.p)},t.prototype.isStaticAlpha=function(){return ol(this.S)},t.prototype.toDirty=function(){this.A+=1},t}(),vl=function(){function n(t){this.g=t,this.R=[],this.wa=0,this.k=[],this.$t=0,this.Qt=0,this.j=new fl(this,rt.SIZE_X,rt.SIZE_Y),this.Ne=new fl(this,0,0),this.I=new cl(t),this.Oa=new ll(t),this.A=0}return Object.defineProperty(n.prototype,"length",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"plength",{get:function(){return this.Qt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this.A},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"values",{get:function(){return this.R},set:function(t){this.set(t,void 0,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"segments",{get:function(){return this.k},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"style",{get:function(){return K.NONE},set:function(t){this.set(void 0,void 0,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"marker",{get:function(){var t=this.C;return null==t&&(t=ht.getInstance(),this.C=t),t},enumerable:!1,configurable:!0}),n.prototype.getMarker=function(){},Object.defineProperty(n.prototype,"size",{get:function(){return this.j},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"offset",{get:function(){return this.Ne},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fill",{get:function(){return this.I},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stroke",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"formatter",{get:function(){return null},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"formatted",{get:function(){return this},enumerable:!1,configurable:!0}),n.prototype.onSizeChange=function(){},n.prototype.toFitted=function(t,n){},n.prototype.copy=function(t){return this.set(t.values,t.segments,t.style)},n.prototype.set=function(t,n,i){var r=!1,e=!1;if(null!=t){var u=this.R,s=this.wa,h=t.length;if(u!==t){for(var o=Math.min(s,h),a=0;a<o;++a)u[a]=t[a];for(a=o;a<h;++a)u.push(t[a]);s!==h?(u.length=h,this.wa=h,r=!0):e=!0}else s!==h?(this.wa=h,r=!0):e=!0;var c=h>>1;this.$t=c,this.Qt<c&&(this.Qt=c)}if(r){this.A+=1;var f=this.g,l=f.uploaded;l?l.isCompatible(f)?f.updateUploaded():f.toDirty():f.updateUploaded()}else e&&(this.A+=1,this.g.updateUploaded());return this},n.prototype.updateUploaded=function(){this.g.updateUploaded()},n.prototype.clone=function(t){return new n(t).copy(this)},n.prototype.toPoints=function(n){for(var i=[],r=this.values,e=0,u=r.length;e<u;e+=2){var s=new t.Point(r[e+0],r[e+1]);i.push(n.apply(s,s))}return i},n.prototype.serialize=function(t){return t.addResource("[]")},n.prototype.calcHitPointAbs=function(t,i,r,e,u,s,h,o,a){var c=this.formatted,f=c.length,l=c.values,v=this.j,b=this.Ne,d=0,g=f;if(h){var m=.5*v.getLimit(),w=b.getLimit(),O=n.WORK_RANGE;h(t,i,m,m,w,w,s,l,O),d=O[0],g=O[1]}for(var p=d,D=Math.min(g,f);p<D;++p){var E=p<<1,M=l[E],S=l[E+1];if(o(t,i,.5*v.getX(p),.5*v.getY(p),b.getX(p),b.getY(p),M,S,r,e,u,p,s,a))return!0}return!1},n.WORK_RANGE=[0,0],n}(),bl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.init=function(){var t=this.buffer;t.updateIndices();var n=t.indices,i=this.vertexOffset,r=this.indexOffset,e=this.pointCountReserved;0<e&&($a(n,i,r),el(n,9,r,8,e)),this.inited|=Y.INDEX},n.prototype.update=function(t){var n=t.points;if(n instanceof vl){var i=this.buffer;this.updateVertexAndStep(i,t,n),this.updateLineOfAnyColor(i,t,n,9),this.updateUv(i,t)}},n.prototype.updateVertexAndStep=function(t,n,i){var r=i.id,e=i.offset,u=e.id,s=r!==this.pointId||u!==this.pointOffsetId,h=i.size,o=h.id,a=o!==this.pointSizeId,c=n.size,f=c.x,l=c.y,v=f!==this.sizeX||l!==this.sizeY,b=Q(n),d=this.transformLocalId!==b,g=n.stroke,m=g.align,w=g.enable?g.width:0,O=g.style,p=this.strokeAlign!==m||this.strokeWidth!==w||this.strokeStyle!==O;if(!(this.inited&Y.VERTEX_AND_STEP)||s||a||v||d||p){this.inited|=Y.VERTEX_AND_STEP,this.pointId=r;var D=i.formatted;this.pointCount=D.length,this.pointOffsetId=u,this.pointSizeId=o,this.sizeX=f,this.sizeY=l,this.transformLocalId=b,this.strokeWidth=w,this.strokeAlign=m,this.strokeStyle=O,t.updateVertices(),t.updateSteps();var E=this.pointCount,M=D.values,S=this.vertexOffset,j=t.vertices,T=t.steps,I=n.transform.internalTransform;if(0<E&&h.isStaticX()&&h.isStaticY()){var C=h.getX(0),N=h.getY(0);tc(j,S,0,0,C,N,m,w,I,qa),hl(j,I,S,9,E,M,e),nc(T,S,w,O,qa),ul(T,S,9,E)}else for(var A=0;A<E;++A){var R=A<<1,y=M[R]+e.getX(A),k=M[R+1]+e.getY(A),L=(C=h.getX(A),N=h.getY(A),S+9*A);tc(j,L,y,k,C,N,m,w,I,qa),nc(T,L,w,O,qa)}var x=S+9*E,B=9*(this.pointCountReserved-E);Yf(j,x,B),Jf(T,x,B)}},n.prototype.updateUv=function(t,n){var i=$(n),r=tt(i);if(!(this.inited&Y.UV)||i!==this.texture||r!==this.textureTransformId){this.inited|=Y.UV,this.texture=i,this.textureTransformId=r,t.updateUvs();var e=t.uvs,u=this.vertexOffset,s=nt(i),h=this.pointCountReserved;0<h&&(ic(e,u,s),sl(e,u,9,h))}},n}(rl),dl=function(t,n,i,r,e,s,h,o){var a=C(n),c=a<<2,f=a<<1,l=n.points,v=qf(cc(l)),b=v*r,d=v*s,g=b+c,m=d+f;return t.check(i,e,g,m)?new u(t,i,e,g,m,[new o(t,i,e,b,d,v,r,s),new vn(t,i+b,e+d,c,f)]).init(n):null},gl=function(t,n,i,r,e){return dl(t,n,i,9,r,8,0,bl)},ml=function(t){function n(n){void 0===n&&(n=r.LINE_OF_CIRCLES);var i=t.call(this,n)||this;return i.Mt=new vl(i),i.pa=function(t,n,r,e,u,s,h,o,a,c,f){return i.containsPointAbs(t,n,r,e,u,s,h,o,a,c,f)},i}return G(n,t),Object.defineProperty(n.prototype,"points",{get:function(){return this.Mt},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(t,n,i,r,e,u,s){var h=an(e,u,this.Mt.size.getLimit());return!!this.containsAbsBBox(t,n,i+h,r+h)&&this.Mt.calcHitPointAbs(t,n,e,u,s,h,null,this.pa,null)},n.prototype.containsPointAbs=function(n,i,r,e,u,s,h,o,a,c,f){return t.prototype.containsAbs.call(this,n-h-u,i-o-s,r,e,a,c,f)},n.prototype.calcHitPoint=function(t,n,i,r,e,u){var s=this.toHitTestData(t,n),h=(i||an)(s.strokeWidth,s.strokeScale,this.Mt.size.getLimit());return!!this.containsAbsBBox(s.x,s.y,s.width+h,s.height+h)&&this.Mt.calcHitPointAbs(s.x,s.y,s.strokeWidth,s.strokeScale,s.strokeAlign,h,r,e||this.pa,u)},n}(Gi),wl=function(t,n,i){return Ca(t,n,i||new ml)},Ol=function(){e[r.LINE_OF_CIRCLES]=gl,n[r.LINE_OF_CIRCLES]=wl},pl=function(t){function n(n,i,r,e,u,s,h,o){var a=t.call(this,n,i,r,e,u,s,h,o)||this;return a.radius=0,a.corner=0,a}return G(n,t),n.prototype.init=function(){var t=this.buffer;t.updateIndices();var n=t.indices,i=this.vertexOffset,r=this.indexOffset,e=this.pointCountReserved;0<e&&(xa(n,i,r),el(n,Ra,r,ya,e)),this.inited|=Y.INDEX},n.prototype.update=function(t){var n=t.points;if(n instanceof vl){var i=this.buffer;this.updateVertexStepAndUv(i,t,n),this.updateLineOfAnyColor(i,t,n,Ra)}},n.prototype.updateVertexStepAndUv=function(t,n,i){var r=i.id,e=i.offset,u=e.id,s=r!==this.pointId||u!==this.pointOffsetId,h=i.size,o=h.id,a=o!==this.pointSizeId,c=n.size,f=c.x,l=c.y,v=n.radius,b=f!==this.sizeX||l!==this.sizeY||v!==this.radius,d=Q(n),g=this.transformLocalId!==d,m=n.stroke,w=m.align,O=m.enable?m.width:0,p=m.side,D=m.style,E=this.strokeAlign!==w||this.strokeWidth!==O||this.strokeSide!==p||this.strokeStyle!==D,M=n.corner,S=M!==this.corner,j=$(n),T=tt(j),I=j!==this.texture||T!==this.textureTransformId,C=s||a||b||E,N=!(this.inited&Y.VERTEX_STEP_AND_UV);if(N||C||g||S||I){this.inited|=Y.VERTEX_STEP_AND_UV,this.pointId=r;var A=i.formatted;this.pointCount=A.length,this.pointOffsetId=u,this.pointSizeId=o,this.sizeX=f,this.sizeY=l,this.radius=v,this.transformLocalId=d,this.strokeAlign=w,this.strokeWidth=O,this.strokeSide=p,this.strokeStyle=D,this.corner=M,this.texture=j,this.textureTransformId=T,t.updateVertices(),(N||C||g||S)&&t.updateSteps(),(N||C||I)&&t.updateUvs();var R=this.pointCount,y=A.values,k=this.vertexOffset,L=t.vertices,x=t.steps,B=t.uvs,_=n.transform.internalTransform,P=nt(j);if(0<R&&h.isStaticX()&&h.isStaticY()){var U=h.getX(0),F=h.getY(0);Ba(L,k,0,0,U,F,w,O,v,_,ka),hl(L,_,k,Ra,R,y,e),(N||C||g||S)&&(_a(x,k,O,p,D,M,ka),ul(x,k,Ra,R)),(N||C||I)&&(Pa(B,k,P,ka),sl(B,k,Ra,R))}else for(var G=0;G<R;++G){var H=G<<1,z=y[H]+e.getX(G),V=y[H+1]+e.getY(G),W=(U=h.getX(G),F=h.getY(G),k+G*Ra);Ba(L,W,z,V,U,F,w,O,v,_,ka),(N||C||g||S)&&_a(x,W,O,p,D,M,ka),(N||C||I)&&Pa(B,W,P,ka)}var X=this.pointCountReserved,K=k+R*Ra,J=Ra*(X-R);Yf(L,K,J),Jf(x,K,J),Zf(B,K,J)}},n}(rl),Dl=function(t,n,i,r,e){return dl(t,n,i,Ra,r,ya,0,pl)},El=function(t){function n(n){void 0===n&&(n=r.LINE_OF_RECTANGLE_ROUNDEDS);var i=t.call(this,n)||this;return i.Mt=new vl(i),i.pa=function(t,n,r,e,u,s,h,o,a,c,f){return i.containsPointAbs(t,n,r,e,u,s,h,o,a,c,f)},i}return G(n,t),Object.defineProperty(n.prototype,"points",{get:function(){return this.Mt},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(t,n,i,r,e,u,s){var h=an(e,u,this.Mt.size.getLimit());return!!this.containsAbsBBox(t,n,i+h,r+h)&&this.Mt.calcHitPointAbs(t,n,h,e,u,s,null,this.pa,null)},n.prototype.containsPointAbs=function(n,i,r,e,u,s,h,o,a,c,f){return t.prototype.containsAbs.call(this,n-h-u,i-o-s,r,e,a,c,f)},n.prototype.calcHitPoint=function(t,n,i,r,e,u){var s=this.toHitTestData(t,n),h=(i||an)(s.strokeWidth,s.strokeScale,this.Mt.size.getLimit());return!!this.containsAbsBBox(s.x,s.y,s.width+h,s.height+h)&&this.Mt.calcHitPointAbs(s.x,s.y,s.strokeWidth,s.strokeScale,s.strokeAlign,h,r,e||this.pa,u)},n}(Va),Ml=function(t,n,i){return Ca(t,n,i||new El)},Sl=function(){e[r.LINE_OF_RECTANGLE_ROUNDEDS]=Dl,n[r.LINE_OF_RECTANGLE_ROUNDEDS]=Ml,zi.set(r.LINE_OF_RECTANGLE_ROUNDEDS,Lt.PRIMITIVE|Lt.STROKE_SIDE|Lt.BORDER_RADIUS)},jl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.init=function(){var t=this.buffer;t.updateIndices();var n=t.indices,i=this.vertexOffset,r=this.indexOffset,e=this.pointCountReserved;0<e&&(Fc(n,i,r),el(n,_c,r,8,e)),this.inited|=Y.INDEX},n.prototype.update=function(t){var n=t.points;if(n instanceof vl){var i=this.buffer;this.updateVertexStepAndUv(i,t,n),this.updateLineOfAnyColor(i,t,n,_c)}},n.prototype.updateVertexStepAndUv=function(t,n,i){var r=i.id,e=i.offset,u=e.id,s=r!==this.pointId||u!==this.pointOffsetId,h=i.size,o=h.id,a=o!==this.pointSizeId,c=n.size,f=c.x,l=c.y,v=f!==this.sizeX||l!==this.sizeY,b=Q(n),d=this.transformLocalId!==b,g=n.stroke,m=g.align,w=g.enable?g.width:0,O=g.side,p=g.style,D=this.strokeAlign!==m||this.strokeWidth!==w||this.strokeSide!==O||this.strokeStyle!==p,E=$(n),M=tt(E),S=E!==this.texture||M!==this.textureTransformId,j=s||a||v||D,T=!(this.inited&Y.VERTEX_STEP_AND_UV);if(T||j||d||S){this.inited|=Y.VERTEX_STEP_AND_UV,this.pointId=r;var I=i.formatted;this.pointCount=I.length,this.pointOffsetId=u,this.pointSizeId=o,this.transformLocalId=b,this.strokeWidth=w,this.strokeAlign=m,this.strokeSide=O,this.strokeStyle=p,this.texture=E,this.textureTransformId=M,t.updateVertices(),(T||j||d)&&t.updateSteps(),(T||j||S)&&t.updateUvs();var C=this.pointCount,N=I.values,A=this.vertexOffset,R=t.vertices,y=t.steps,k=t.uvs,L=n.transform.internalTransform,x=nt(E);if(0<C&&h.isStaticX()&&h.isStaticY()){var B=h.getX(0),_=h.getY(0);Gc(R,A,0,0,B,_,m,w,L,Pc),hl(R,L,A,_c,C,N,e),(T||j||d)&&(Hc(A,y,w,O,p,Pc),ul(y,A,_c,C)),(T||j||S)&&(zc(k,A,x),sl(k,A,_c,C))}else for(var P=0;P<C;++P){var U=P<<1,F=N[U]+e.getX(P),G=N[U+1]+e.getY(P),H=(B=h.getX(P),_=h.getY(P),A+P*_c);Gc(R,H,F,G,B,_,m,w,L,Pc),(T||j||d)&&Hc(H,y,w,O,p,Pc),(T||j||S)&&zc(k,H,x)}var z=this.pointCountReserved,V=A+C*_c,W=_c*(z-C);Yf(R,V,W),Jf(y,V,W),Zf(k,V,W)}},n}(rl),Tl=function(t,n,i,r,e){return dl(t,n,i,_c,r,8,0,jl)},Il=function(t){function n(n){void 0===n&&(n=r.LINE_OF_RECTANGLES);var i=t.call(this,n)||this;return i.Mt=new vl(i),i.pa=function(t,n,r,e,u,s,h,o,a,c,f){return i.containsPointAbs(t,n,r,e,u,s,h,o,a,c,f)},i}return G(n,t),Object.defineProperty(n.prototype,"points",{get:function(){return this.Mt},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(t,n,i,r,e,u,s){var h=an(e,u,this.Mt.size.getLimit());return!!this.containsAbsBBox(t,n,i+h,r+h)&&this.Mt.calcHitPointAbs(t,n,e,u,s,h,null,this.pa,null)},n.prototype.containsPointAbs=function(n,i,r,e,u,s,h,o,a,c,f){return t.prototype.containsAbs.call(this,n-h-u,i-o-s,r,e,a,c,f)},n.prototype.calcHitPoint=function(t,n,i,r,e,u){var s=this.toHitTestData(t,n),h=(i||an)(s.strokeWidth,s.strokeScale,this.Mt.size.getLimit());return!!this.containsAbsBBox(s.x,s.y,s.width+h,s.height+h)&&this.Mt.calcHitPointAbs(s.x,s.y,s.strokeWidth,s.strokeScale,s.strokeAlign,h,r,e||this.pa,u)},n}(Su),Cl=function(t,n,i){return Ca(t,n,i||new Il)},Nl=function(){e[r.LINE_OF_RECTANGLES]=Tl,n[r.LINE_OF_RECTANGLES]=Cl,zi.set(r.LINE_OF_RECTANGLES,Lt.PRIMITIVE|Lt.STROKE_SIDE)},Al=22,Rl=15,yl=[0,0,0,0,0],kl=new t.Point,Ll=function(t,n,i){var r=3*i-1;t[++r]=n+0,t[++r]=n+1,t[++r]=n+3,t[++r]=n+1,t[++r]=n+2,t[++r]=n+3,t[++r]=n+4,t[++r]=n+5,t[++r]=n+7,t[++r]=n+5,t[++r]=n+6,t[++r]=n+7,t[++r]=n+8,t[++r]=n+9,t[++r]=n+11,t[++r]=n+9,t[++r]=n+10,t[++r]=n+11,t[++r]=n+12,t[++r]=n+13,t[++r]=n+16,t[++r]=n+13,t[++r]=n+14,t[++r]=n+16,t[++r]=n+14,t[++r]=n+15,t[++r]=n+16,t[++r]=n+12,t[++r]=n+16,t[++r]=n+19,t[++r]=n+16,t[++r]=n+17,t[++r]=n+19,t[++r]=n+17,t[++r]=n+18,t[++r]=n+19,t[++r]=n+12,t[++r]=n+19,t[++r]=n+13,t[++r]=n+19,t[++r]=n+20,t[++r]=n+13,t[++r]=n+20,t[++r]=n+21,t[++r]=n+13},xl=function(t,n,i,r,e,u,s,h,o,a,c){var f=s*h,l=.5*e+(0<=e?+f:-f),v=.5*u+(0<=u?+f:-f),b=Math.sqrt(l*l+4*v*v),d=2*l*v/(l+b),g=d*o/(2*v),m=.5*(b-d)*o/b,w=g*b/(2*l),O=kl;O.set(i,r-v),a.apply(O,O);var p=O.x,D=O.y;O.set(i,r),a.apply(O,O);var E=O.x,M=O.y;O.set(i+l,r),a.apply(O,O);var j=E-p,T=M-D,I=O.x+j,C=O.y+T,N=E+(E-O.x)+j,A=M+(M-O.y)+T,R=I-p,y=C-D,k=p+m*R,L=D+m*y,x=I-g*R,B=C-g*y,_=w*(N-I),P=w*(A-C),U=I+_,F=C+P,G=N-_,H=A-P,z=p-N,V=D-A,W=N+g*z,X=A+g*V,K=p-m*z,Y=D-m*V;O.set(i,r+v-d),a.apply(O,O);var J=O.x,Z=O.y,q=p+o*(J-p),Q=D+o*(Z-D),$=I+o*(J-I),tt=C+o*(Z-C),nt=N+o*(J-N),it=A+o*(Z-A),rt=E+j,et=M+T;c[0]=S(rt,et,J,Z),c[1]=w,c[2]=g,c[3]=m,c[4]=1-.5*d/v;var ut=2*n-1;t[++ut]=q,t[++ut]=Q,t[++ut]=K,t[++ut]=Y,t[++ut]=p,t[++ut]=D,t[++ut]=k,t[++ut]=L,t[++ut]=$,t[++ut]=tt,t[++ut]=x,t[++ut]=B,t[++ut]=I,t[++ut]=C,t[++ut]=U,t[++ut]=F,t[++ut]=nt,t[++ut]=it,t[++ut]=G,t[++ut]=H,t[++ut]=N,t[++ut]=A,t[++ut]=W,t[++ut]=X,t[++ut]=J,t[++ut]=Z,t[++ut]=q,t[++ut]=Q,t[++ut]=k,t[++ut]=L,t[++ut]=x,t[++ut]=B,t[++ut]=$,t[++ut]=tt,t[++ut]=U,t[++ut]=F,t[++ut]=G,t[++ut]=H,t[++ut]=nt,t[++ut]=it,t[++ut]=W,t[++ut]=X,t[++ut]=K,t[++ut]=Y},Bl=function(t,n,i,r,e,u,s){var h=o(r),a=s[0],c=u*a,f=1-u,b=l(0,h,1,1),d=l(1,h,1,1),g=v(0,0),m=v(1,0),w=v(1,1),O=v(0,1),p=v(f,f),D=v(1,f),E=v(f,1),M=v(f,0),S=6*n-1;e&ft.TOP?(t[++S]=i,t[++S]=d,t[++S]=c,t[++S]=c,t[++S]=g,t[++S]=0,t[++S]=i,t[++S]=d,t[++S]=c,t[++S]=c,t[++S]=m,t[++S]=0,t[++S]=i,t[++S]=d,t[++S]=c,t[++S]=c,t[++S]=w,t[++S]=0,t[++S]=i,t[++S]=d,t[++S]=c,t[++S]=c,t[++S]=O,t[++S]=0):(t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=p,t[++S]=0,t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=D,t[++S]=0,t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=w,t[++S]=0,t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=E,t[++S]=0),e&ft.BOTTOM_RIGHT?(t[++S]=i,t[++S]=d,t[++S]=c,t[++S]=c,t[++S]=g,t[++S]=0,t[++S]=i,t[++S]=d,t[++S]=c,t[++S]=c,t[++S]=m,t[++S]=0,t[++S]=i,t[++S]=d,t[++S]=c,t[++S]=c,t[++S]=w,t[++S]=0,t[++S]=i,t[++S]=d,t[++S]=c,t[++S]=c,t[++S]=O,t[++S]=0):(t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=p,t[++S]=0,t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=D,t[++S]=0,t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=w,t[++S]=0,t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=E,t[++S]=0),e&ft.BOTTOM_LEFT?(t[++S]=i,t[++S]=d,t[++S]=c,t[++S]=c,t[++S]=g,t[++S]=0,t[++S]=i,t[++S]=d,t[++S]=c,t[++S]=c,t[++S]=m,t[++S]=0,t[++S]=i,t[++S]=d,t[++S]=c,t[++S]=c,t[++S]=w,t[++S]=0,t[++S]=i,t[++S]=d,t[++S]=c,t[++S]=c,t[++S]=O,t[++S]=0):(t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=p,t[++S]=0,t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=D,t[++S]=0,t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=w,t[++S]=0,t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=E,t[++S]=0),t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=g,t[++S]=0,t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=M,t[++S]=0,t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=m,t[++S]=0,t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=m,t[++S]=0,t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=M,t[++S]=0,t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=m,t[++S]=0,t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=m,t[++S]=0,t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=M,t[++S]=0,t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=m,t[++S]=0,t[++S]=i,t[++S]=b,t[++S]=a,t[++S]=a,t[++S]=m,t[++S]=0},_l=function(t,n,i,r,e){var u=i.x0,s=i.x1,h=i.x2,o=i.x3,a=i.y0,c=i.y1,f=i.y2,l=i.y3,v=.5*(u+s),b=.5*(a+c),d=e[4],g=v+d*(o-u),m=b+d*(l-a),w=e[1],O=e[2],p=e[3],D=v+p*(o-v),E=b+p*(l-b),M=v+r*(g-v),S=b+r*(m-b),j=v+p*(h-v),T=b+p*(f-b),I=h+O*(v-h),C=f+O*(b-f),N=h+r*(g-h),A=f+r*(m-f),R=h+w*(o-h),y=f+w*(l-f),k=o+w*(h-o),L=l+w*(f-l),x=o+r*(g-o),B=l+r*(m-l),_=o+O*(v-o),P=l+O*(b-l),U=2*n-1;t[++U]=M,t[++U]=S,t[++U]=D,t[++U]=E,t[++U]=v,t[++U]=b,t[++U]=j,t[++U]=T,t[++U]=N,t[++U]=A,t[++U]=I,t[++U]=C,t[++U]=h,t[++U]=f,t[++U]=R,t[++U]=y,t[++U]=x,t[++U]=B,t[++U]=k,t[++U]=L,t[++U]=o,t[++U]=l,t[++U]=_,t[++U]=P,t[++U]=g,t[++U]=m,t[++U]=M,t[++U]=S,t[++U]=j,t[++U]=T,t[++U]=I,t[++U]=C,t[++U]=N,t[++U]=A,t[++U]=R,t[++U]=y,t[++U]=k,t[++U]=L,t[++U]=x,t[++U]=B,t[++U]=_,t[++U]=P,t[++U]=D,t[++U]=E},Pl=function(t){function n(n,i,r,e,u,s,h,o){var a=t.call(this,n,i,r,e,u,s,h,o)||this;return a.radius=0,a.corner=0,a}return G(n,t),n.prototype.init=function(){var t=this.buffer;t.updateIndices();var n=this.vertexOffset,i=this.indexOffset,r=this.pointCountReserved;0<r&&(Ll(t.indices,n,i),el(t.indices,Al,i,Rl,r)),this.inited|=Y.INDEX},n.prototype.update=function(t){var n=t.points;if(n instanceof vl){var i=this.buffer;this.updateVertexStepAndUv(i,t,n),this.updateLineOfAnyColor(i,t,n,Al)}},n.prototype.updateVertexStepAndUv=function(t,n,i){var r=i.id,e=i.offset,u=e.id,s=r!==this.pointId||u!==this.pointOffsetId,h=i.size,o=h.id,a=o!==this.pointSizeId,c=n.size,f=c.x,l=c.y,v=f!==this.sizeX||l!==this.sizeY,b=n.radius,d=b!==this.radius,g=Q(n),m=this.transformLocalId!==g,w=n.stroke,O=w.align,p=w.enable?w.width:0,D=w.style,E=this.strokeAlign!==O||this.strokeWidth!==p||this.strokeStyle!==D,M=n.corner,S=this.corner!==M,j=$(n),T=tt(j),I=j!==this.texture||T!==this.textureTransformId,C=s||a||v||d||E,N=!(this.inited&Y.VERTEX_STEP_AND_UV);if(N||C||m||S||I){this.inited|=Y.VERTEX_STEP_AND_UV,this.pointId=r;var A=i.formatted;this.pointCount=A.length,this.pointOffsetId=u,this.pointSizeId=o,this.sizeX=f,this.sizeY=l,this.radius=b,this.transformLocalId=g,this.strokeAlign=O,this.strokeWidth=p,this.strokeStyle=D,this.corner=M,this.texture=j,this.textureTransformId=T,t.updateVertices(),(N||C||m||S)&&t.updateSteps(),(N||C||I)&&t.updateUvs();var R=this.pointCount,y=A.values,k=this.vertexOffset,L=t.vertices,x=t.steps,B=t.uvs,_=n.transform.internalTransform,P=nt(j);if(0<R&&h.isStaticX()&&h.isStaticY()){var U=h.getX(0),F=h.getY(0);xl(L,k,0,0,U,F,O,p,b,_,yl),hl(L,_,k,Al,R,y,e),(N||C||m||S)&&(Bl(x,k,p,D,M,b,yl),ul(x,k,Al,R)),(N||C||I)&&(_l(B,k,P,b,yl),sl(B,k,Al,R))}else for(var G=0;G<R;++G){var H=G<<1,z=y[H]+e.getX(G),V=y[H+1]+e.getY(G),W=(U=h.getX(G),F=h.getY(G),k+G*Al);xl(L,W,z,V,U,F,O,p,b,_,yl),(N||C||m||S)&&Bl(x,W,p,D,M,b,yl),(N||C||I)&&_l(B,W,P,b,yl)}var X=this.pointCountReserved,K=k+R*Al,J=Al*(X-R);Yf(L,K,J),Jf(x,K,J),Zf(B,K,J)}},n}(rl),Ul=function(t,n,i,r,e){return dl(t,n,i,Al,r,Rl,0,Pl)},Fl=function(t,n,i,r,e,u,s,h,o,a,c,f,l,v,b,d,g){var m=u+f*(h-u)-r,w=s+f*(o-s)-e,O=Math.sqrt(m*m+w*w),p=1e-5;if(p<O){var D=1/O,E=m*D,M=w*D,S=(u+l*(a-u)-r)*D,j=(s+l*(c-s)-e)*D,T=E*j-S*M;if(p<Math.abs(T)){var I=1/T,C=n-r,N=i-e;if(function(t,n,i,r,e,u,s){if(t.fill.enable){if(n*n+i*i<=r*r)return!0}else if(0<u){var h=n*n+i*i;if(h<=r*r){var o=Math.max(0,r*(1-u*s/e));if(o*o<=h)return!0}}return!1}(t,(+j*C-S*N)*I,(-M*C+E*N)*I,O,v*b,d,g))return!0}}return!1},Gl=function(t,n,i,r,e,u,s){var h=2*e/r;if(hn(n,i,h,-e,+e)){var o=Math.sqrt(r*r+4*e*e),a=2*r*e/(r+o),c=t.radius,f=e-a,l=-e,v=+r,b=+e,d=-v,g=+b,m=0+0*c,w=l+c*(f-l),O=v+c*(0-v),p=b+c*(f-b),D=+p,E=-O,M=-h*n+w-i<=0,S=+h*n+w-i<=0,j=i<=p,T=t.corner;if(!M&&!S&&T&ft.TOP){var I=.5*(o-a)*c/o;if(Fl(t,n,i,m,w,0,l,d,g,v,b,I,I,a,c,u,s))return!0}else if(!M&&!j&&T&ft.BOTTOM_LEFT){if(Fl(t,n,i,E,D,d,g,v,b,0,l,(C=a*c/(2*e))*o/(2*r),C,a,c,u,s))return!0}else if(!S&&!j&&T&ft.BOTTOM_RIGHT){var C;if(Fl(t,n,i,O,p,v,b,0,l,d,g,C=a*c/(2*e),C*o/(2*r),a,c,u,s))return!0}else{if(t.fill.enable)return!0;if(0<u){var N=u*s,A=e-a,R=A+(-e-A)*Math.max(0,a-N)/a;if(!hn(n,i,h,R,e-N))return!0}}}return!1},Hl=function(t){function n(n){return void 0===n&&(n=r.TRIANGLE_ROUNDED),t.call(this,n)||this}return G(n,t),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(n,i,r,e,u,s,h){return!!t.prototype.containsAbsBBox.call(this,n,i,r,e)&&Gl(this,n,i,r,e,u,s)},n}(en),zl=function(t){function n(n){void 0===n&&(n=r.LINE_OF_TRIANGLE_ROUNDEDS);var i=t.call(this,n)||this;return i.Mt=new vl(i),i.pa=function(t,n,r,e,u,s,h,o,a,c,f){return i.containsPointAbs(t,n,r,e,u,s,h,o,a,c,f)},i}return G(n,t),Object.defineProperty(n.prototype,"points",{get:function(){return this.Mt},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(t,n,i,r,e,u,s){var h=an(e,u,this.Mt.size.getLimit());return!!this.containsAbsBBox(t,n,i+h,r+h)&&this.Mt.calcHitPointAbs(t,n,e,u,s,h,null,this.pa,null)},n.prototype.containsPointAbs=function(n,i,r,e,u,s,h,o,a,c,f){return t.prototype.containsAbs.call(this,n-h-u,i-o-s,r,e,a,c,f)},n.prototype.calcHitPoint=function(t,n,i,r,e,u){var s=this.toHitTestData(t,n),h=(i||an)(s.strokeWidth,s.strokeScale,this.Mt.size.getLimit());return!!this.containsAbsBBox(s.x,s.y,s.width+h,s.height+h)&&this.Mt.calcHitPointAbs(s.x,s.y,s.strokeWidth,s.strokeScale,s.strokeAlign,h,r,e||this.pa,u)},n}(Hl),Vl=function(t,n,i){return Ca(t,n,i||new zl)},Wl=function(){e[r.LINE_OF_TRIANGLE_ROUNDEDS]=Ul,n[r.LINE_OF_TRIANGLE_ROUNDEDS]=Vl,zi.set(r.LINE_OF_TRIANGLE_ROUNDEDS,Lt.PRIMITIVE|Lt.STROKE_SIDE|Lt.BORDER_RADIUS)},Xl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.init=function(){var t=this.buffer;t.updateIndices();var n=t.indices,i=this.vertexOffset,r=this.indexOffset,e=this.pointCountReserved;0<e&&(jc(n,i,r),el(n,7,r,3,e)),this.inited|=Y.INDEX},n.prototype.update=function(t){var n=t.points;if(n instanceof vl){var i=this.buffer;this.updateVertexStepAndUvs(i,t,n),this.updateLineOfAnyColor(i,t,n,7)}},n.prototype.updateVertexStepAndUvs=function(t,n,i){var r=i.id,e=i.offset,u=e.id,s=r!==this.pointId||u!==this.pointOffsetId,h=i.size,o=h.id,a=o!==this.pointSizeId,c=n.size,f=c.x,l=c.y,v=f!==this.sizeX||l!==this.sizeY,b=Q(n),d=this.transformLocalId!==b,g=n.stroke,m=g.align,w=g.enable?g.width:0,O=g.style,p=this.strokeAlign!==m||this.strokeWidth!==w||this.strokeStyle!==O,D=$(n),E=tt(D),M=D!==this.texture||E!==this.textureTransformId,S=s||a||v||p,j=!(this.inited&Y.VERTEX_STEP_AND_UV);if(j||S||d||M){this.inited|=Y.VERTEX_STEP_AND_UV,this.pointId=r;var T=i.formatted;this.pointCount=T.length,this.pointOffsetId=u,this.pointSizeId=o,this.sizeX=f,this.sizeY=l,this.transformLocalId=b,this.strokeAlign=m,this.strokeWidth=w,this.strokeStyle=O,this.texture=D,this.textureTransformId=E,t.updateVertices(),(j||S||d)&&t.updateSteps(),(j||S||M)&&t.updateUvs();var I=this.pointCount,C=T.values,N=this.vertexOffset,A=t.vertices,R=t.steps,y=t.uvs,k=nt(D),L=n.transform.internalTransform;if(0<I&&h.isStaticX()&&h.isStaticY()){var x=h.getX(0),B=h.getY(0);Tc(A,N,0,0,x,B,m,w,L,Mc),hl(A,L,N,7,I,C,e),(j||S||d)&&(Ic(R,N,w,O,Mc),ul(R,N,7,I)),(j||S||M)&&(Cc(y,k,N,Mc),sl(y,N,7,I))}else for(var _=0;_<I;++_){var P=_<<1,U=C[P]+e.getX(_),F=C[P+1]+e.getY(_),G=(x=h.getX(_),B=h.getY(_),N+7*_);Tc(A,G,U,F,x,B,m,w,L,Mc),(j||S||d)&&Ic(R,G,w,O,Mc),(j||S||M)&&Cc(y,k,G,Mc)}var H=N+7*I,z=7*(this.pointCountReserved-I);Yf(A,H,z),Jf(R,H,z),Zf(y,H,z)}},n}(rl),Kl=function(t,n,i,r,e){return dl(t,n,i,7,r,3,0,Xl)},Yl=function(t){function n(n){return void 0===n&&(n=r.TRIANGLE),t.call(this,n)||this}return G(n,t),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(n,i,r,e,u,s,h){return!!t.prototype.containsAbsBBox.call(this,n,i,r,e)&&on(this,n,i,r,e,u,s)},n}(en),Jl=function(t){function n(n){void 0===n&&(n=r.LINE_OF_TRIANGLES);var i=t.call(this,n)||this;return i.Mt=new vl(i),i.pa=function(t,n,r,e,u,s,h,o,a,c,f){return i.containsPointAbs(t,n,r,e,u,s,h,o,a,c,f)},i}return G(n,t),Object.defineProperty(n.prototype,"points",{get:function(){return this.Mt},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(t,n,i,r,e,u,s){var h=an(e,u,this.Mt.size.getLimit());return!!this.containsAbsBBox(t,n,i+h,r+h)&&this.Mt.calcHitPointAbs(t,n,e,u,s,h,null,this.pa,null)},n.prototype.containsPointAbs=function(n,i,r,e,u,s,h,o,a,c,f){return t.prototype.containsAbs.call(this,n-h-u,i-o-s,r,e,a,c,f)},n.prototype.calcHitPoint=function(t,n,i,r,e,u){var s=this.toHitTestData(t,n),h=(i||an)(s.strokeWidth,s.strokeScale,this.Mt.size.getLimit());return!!this.containsAbsBBox(s.x,s.y,s.width+h,s.height+h)&&this.Mt.calcHitPointAbs(s.x,s.y,s.strokeWidth,s.strokeScale,s.strokeAlign,h,r,e||this.pa,u)},n}(Yl),Zl=function(t,n,i){return Ca(t,n,i||new Jl)},ql=function(){e[r.LINE_OF_TRIANGLES]=Kl,n[r.LINE_OF_TRIANGLES]=Zl},Ql=function(t,n,i,r){return new u(t,i,r,0,0,[new Bc(t,i,r)]).init(n)},$l=function(t){function n(n){return void 0===n&&(n=r.NULL),t.call(this,n)||this}return G(n,t),n.prototype.clone=function(){return new n(this.type).copy(this)},n}(en),tv=function(t,n,i){return Ca(t,n,i||new $l)},nv=function(){e[r.NULL]=Ql,n[r.NULL]=tv},iv=function(t,n,i){return Ca(t,n,i||new Su)},rv=function(){e[r.RECTANGLE]=Tf,n[r.RECTANGLE]=iv,zi.set(r.RECTANGLE,Lt.PRIMITIVE|Lt.STROKE_SIDE)},ev=function(t,n,i){return Ca(t,n,i||new ju)},uv=function(t,n,i){return Ca(t,n,i||new Va)},sv=function(){e[r.RECTANGLE_ROUNDED]=Fa,n[r.RECTANGLE_ROUNDED]=uv,zi.set(r.RECTANGLE_ROUNDED,Lt.PRIMITIVE|Lt.STROKE_SIDE|Lt.BORDER_RADIUS)},hv=[0,0],ov=new t.Point,av=function(t,n,i){var r=3*i-1;t[++r]=n,t[++r]=n+1,t[++r]=n+3,t[++r]=n+1,t[++r]=n+4,t[++r]=n+3,t[++r]=n+1,t[++r]=n+2,t[++r]=n+4,t[++r]=n+2,t[++r]=n+5,t[++r]=n+4},cv=function(t,n,i,r,e,u,s,h,o,a){var c=ov,f=s*h,l=.5*e+(0<=e?+f:-f),v=.5*u+(0<=u?+f:-f);c.set(-l+i,-v+r),o.apply(c,c);var b=c.x,d=c.y;c.set(0+i,-v+r),o.apply(c,c);var g=c.x,m=c.y,w=g-b,O=m-d;c.set(i,r),o.apply(c,c);var p=c.x,D=c.y,E=p-w,M=D-O,j=2*n-1;t[++j]=b,t[++j]=d,t[++j]=g,t[++j]=m,t[++j]=g+w,t[++j]=m+O,t[++j]=E,t[++j]=M,t[++j]=p,t[++j]=D,t[++j]=p+w,t[++j]=D+O,a[0]=S(b,d,g,m),a[1]=S(b,d,E,M)},fv=function(t,n,i,r,e){var u=o(r),s=e[0],h=e[1],a=l(1,u,1,1),c=v(1,1),f=v(0,1),b=v(1,0),d=v(0,0),g=6*n-1;t[++g]=i,t[++g]=a,t[++g]=s,t[++g]=h,t[++g]=c,t[++g]=0,t[++g]=i,t[++g]=a,t[++g]=s,t[++g]=h,t[++g]=f,t[++g]=0,t[++g]=i,t[++g]=a,t[++g]=s,t[++g]=h,t[++g]=c,t[++g]=0,t[++g]=i,t[++g]=a,t[++g]=s,t[++g]=h,t[++g]=b,t[++g]=0,t[++g]=i,t[++g]=a,t[++g]=s,t[++g]=h,t[++g]=d,t[++g]=0,t[++g]=i,t[++g]=a,t[++g]=s,t[++g]=h,t[++g]=b,t[++g]=0},lv=function(t,n,i){var r=i.x0,e=i.x1,u=i.x2,s=i.x3,h=i.y0,o=i.y1,a=i.y2,c=i.y3,f=2*n-1;t[++f]=r,t[++f]=h,t[++f]=.5*(r+e),t[++f]=.5*(h+o),t[++f]=e,t[++f]=o,t[++f]=.5*(r+s),t[++f]=.5*(h+c),t[++f]=.5*(r+u),t[++f]=.5*(h+a),t[++f]=.5*(e+u),t[++f]=.5*(o+a)},vv=function(t){function n(n,i,r){return t.call(this,n,i,r,6,4)||this}return G(n,t),n.prototype.init=function(){var t=this.buffer;t.updateIndices();var n=this.vertexOffset;av(t.indices,n,this.indexOffset),this.inited|=Y.INDEX},n.prototype.update=function(t){var n=this.buffer;this.updateVertexAndStep(n,t),this.updateColor(n,t),this.updateUv(n,t)},n.prototype.updateVertexAndStep=function(t,n){var i=n.size,r=i.x,e=i.y,u=r!==this.sizeX||e!==this.sizeY,s=Q(n),h=this.transformLocalId!==s,o=n.stroke,a=o.align,c=o.enable?o.width:0,f=o.style,l=this.strokeAlign!==a||this.strokeWidth!==c||this.strokeStyle!==f;(!(this.inited&Y.VERTEX_AND_STEP)||u||h||l)&&(this.inited|=Y.VERTEX_AND_STEP,this.sizeX=r,this.sizeY=e,this.transformLocalId=s,this.strokeAlign=a,this.strokeWidth=c,this.strokeStyle=f,t.updateVertices(),t.updateSteps(),cv(t.vertices,this.vertexOffset,0,0,r,e,a,c,n.transform.internalTransform,hv),fv(t.steps,this.vertexOffset,c,f,hv))},n.prototype.updateUv=function(t,n){var i=$(n),r=tt(i);if(!(this.inited&Y.UV)||i!==this.texture||r!==this.textureTransformId){this.inited|=Y.UV,this.texture=i,this.textureTransformId=r,t.updateUvs();var e=nt(i);lv(t.uvs,this.vertexOffset,e)}},n}(q),bv=function(t,n,i,r,e){var s=C(n),h=s<<2,o=s<<1,a=6+h,c=4+o;return t.check(i,r,a,c)?new u(t,i,r,a,c,[new vv(t,i,r),new vn(t,i+6,r+4,h,o)]).init(n):null},dv=function(t,n,i,r,e,u,s){return i<=0&&un(t,n,i,r,e,u,s)},gv=function(t){function n(n){void 0===n&&(n=r.SEMICIRCLE);var i=t.call(this,n)||this;return i.stroke.side=Z.ALL&~Z.BOTTOM,i}return G(n,t),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(n,i,r,e,u,s,h){return!!t.prototype.containsAbsBBox.call(this,n,i,r,e)&&dv(this,n,i,r,e,u,s)},n}(en),mv=function(t,n,i){return Ca(t,n,i||new gv)},wv=function(){e[r.SEMICIRCLE]=bv,n[r.SEMICIRCLE]=mv},Ov=function(t){function n(n,i,r){return t.call(this,n,i,r,7,3)||this}return G(n,t),n.prototype.init=function(){var t=this.buffer;t.updateIndices(),jc(t.indices,this.vertexOffset,this.indexOffset),this.inited|=Y.INDEX},n.prototype.update=function(t){var n=this.buffer;this.updateVertexStepAndUv(n,t),this.updateColor(n,t)},n.prototype.updateVertexStepAndUv=function(t,n){var i=n.size,r=i.x,e=i.y,u=r!==this.sizeX||e!==this.sizeY,s=Q(n),h=this.transformLocalId!==s,o=n.stroke,a=o.align,c=o.enable?o.width:0,f=o.style,l=this.strokeAlign!==a||this.strokeWidth!==c||this.strokeStyle!==f,v=$(n),b=tt(v),d=v!==this.texture||b!==this.textureTransformId,g=u||l,m=!(this.inited&Y.VERTEX_STEP_AND_UV);if(m||g||h||d){this.inited|=Y.VERTEX_STEP_AND_UV,this.sizeX=r,this.sizeY=e,this.transformLocalId=s,this.strokeAlign=a,this.strokeWidth=c,this.strokeStyle=f,this.texture=v,this.textureTransformId=b;var w=this.vertexOffset;t.updateVertices(),Tc(t.vertices,w,0,0,r,e,a,c,n.transform.internalTransform,Mc),(m||g||h)&&(t.updateSteps(),Ic(t.steps,w,c,f,Mc)),(m||g||d)&&(t.updateUvs(),Cc(t.uvs,nt(v),w,Mc))}},n}(q),pv=function(t,n,i,r,e){var s=C(n),h=s<<2,o=s<<1,a=7+h,c=3+o;return t.check(i,r,a,c)?new u(t,i,r,a,c,[new Ov(t,i,r),new vn(t,i+7,r+3,h,o)]).init(n):null},Dv=function(t,n,i){return Ca(t,n,i||new Yl)},Ev=function(){e[r.TRIANGLE]=pv,n[r.TRIANGLE]=Dv},Mv=function(t){function n(n,i,r){var e=t.call(this,n,i,r,Al,Rl)||this;return e.radius=0,e.corner=0,e}return G(n,t),n.prototype.init=function(){var t=this.buffer;t.updateIndices(),Ll(t.indices,this.vertexOffset,this.indexOffset),this.inited|=Y.INDEX},n.prototype.update=function(t){var n=this.buffer;this.updateVertexStepAndUv(n,t),this.updateColor(n,t)},n.prototype.updateVertexStepAndUv=function(t,n){var i=n.size,r=i.x,e=i.y,u=r!==this.sizeX||e!==this.sizeY,s=n.radius,h=s!==this.radius,o=Q(n),a=this.transformLocalId!==o,c=n.stroke,f=c.align,l=c.enable?c.width:0,v=c.style,b=this.strokeAlign!==f||this.strokeWidth!==l||this.strokeStyle!==v,d=n.corner,g=d!==this.corner,m=$(n),w=tt(m),O=m!==this.texture||w!==this.textureTransformId,p=u||h||b,D=!(this.inited&Y.VERTEX_STEP_AND_UV);if(D||p||a||g||O){this.inited|=Y.VERTEX_STEP_AND_UV,this.sizeX=r,this.sizeY=e,this.radius=s,this.transformLocalId=o,this.strokeAlign=f,this.strokeWidth=l,this.strokeStyle=v,this.corner=d,this.texture=m,this.textureTransformId=w;var E=this.vertexOffset;t.updateVertices(),xl(t.vertices,E,0,0,r,e,f,l,s,n.transform.internalTransform,yl),(D||p||a||g)&&(t.updateSteps(),Bl(t.steps,E,l,v,d,s,yl)),(D||p||O)&&(t.updateUvs(),_l(t.uvs,E,nt(m),s,yl))}},n}(q),Sv=function(t,n,i,r,e){var s=C(n),h=s<<2,o=s<<1,a=Al+h,c=Rl+o;return t.check(i,r,a,c)?new u(t,i,r,a,c,[new Mv(t,i,r),new vn(t,i+Al,r+Rl,h,o)]).init(n):null},jv=function(t,n,i){return Ca(t,n,i||new Hl)},Tv=function(){e[r.TRIANGLE_ROUNDED]=Sv,n[r.TRIANGLE_ROUNDED]=jv,zi.set(r.TRIANGLE_ROUNDED,Lt.PRIMITIVE|Lt.STROKE_SIDE|Lt.BORDER_RADIUS)},Iv=function(){Aa(),Za(),sc(),uf(),sf(),bf(),Sf(),pf(),Nf(),e[r.IMAGE_SDF]=_f,n[r.IMAGE_SDF]=Uf,Vf(),Kf(),nv(),e[r.RECTANGLE_PIVOTED]=of,n[r.RECTANGLE_PIVOTED]=ev,zi.set(r.RECTANGLE_PIVOTED,Lt.PRIMITIVE|Lt.STROKE_SIDE),sv(),rv(),wv(),Tv(),Ev(),Ol(),Sl(),Nl(),Wl(),ql()},Cv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DImage"},n}(Rh),Nv=function(t){function n(n){var i,r=t.call(this,n)||this;return r.Pt=null!==(i=null==n?void 0:n.value)&&void 0!==i?i:null,r}return G(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this.on(he.tap,(function(t){i.onClick(t)}))},n.prototype.onClick=function(t){this.state.isActionable&&this.activate(t)},n.prototype.activate=function(t){this.onSelect(t)},Object.defineProperty(n.prototype,"value",{get:function(){return this.Pt},set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),n.prototype.hasSelection=function(t){return t&&t.selection&&t.selection.add},n.prototype.getSelection=function(){for(var t=this.parent;t;){if(this.hasSelection(t))return t.selection;t=t.parent}return null},n.prototype.onSelect=function(t){this.emit("select",this.Pt,this);var n=this.getSelection();n&&n.add(this)},n.prototype.onKeyDown=function(n){return Qe.isActivateKey(n)&&this.onKeyDownActivate(n),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyDownActivate=function(t){return!(!this.state.isActionable||!this.state.isFocused||(this.activate(t),0))},n.prototype.getType=function(){return"DMenuItemBase"},n}(Cv),Av=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getContext=function(){for(var t=this.parent;t;){if(t.getContext)return t.getContext();t=t.parent}return null},n.prototype.getCloseable=function(){for(var t=this.parent;t;){if(t.getCloseable)return t.getCloseable();t=t.parent}return null},n.prototype.getType=function(){return"DMenuItem"},n}(Nv),Rv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.initOnOver(n),this.initShortcuts(n)},n.prototype.initOnOver=function(t){var n=this;this.on(he.over,(function(){var t=n.getContext();null!=t&&n.parent instanceof ru&&t.trim(n.getCloseable())}))},n.prototype.initShortcuts=function(t){var n=this.lu;if(null!=n&&0<n.length){var i=n[0],r=this.newShortcutText();this.Da=r,this.snippet.add(r,!0),r.text=Qe.toString(i)}else this.Da=null;this.Ea=this.theme.getShortcutTextMargin()},n.prototype.newShortcutText=function(){var t,n;return new mh(new wh(this,this.theme,null===(n=null===(t=this.tu)||void 0===t?void 0:t.text)||void 0===n?void 0:n.style))},n.prototype.updateShortcutText=function(){var t=this.Da,n=this.Ea;if(null!=t&&null!=n){var i,r=this.iu;i=r.width.isOn?n:this.width-t.width-n;var e,u=this.au,s=u.getTop();e=r.height.isOn?s:s+.5*(this.height-s-u.getBottom()-t.height),t.position.set(i,e)}},n.prototype.updateShortcutColor=function(){var t=this.Da;if(null!=t){var n=this.theme,i=this.state;t.style.fill=n.getShortcutColor(i),t.alpha=n.getShortcutAlpha(i)}},n.prototype.onReflow=function(){t.prototype.onReflow.call(this),this.updateShortcutColor(),this.updateShortcutText()},n.prototype.getType=function(){return"DMenuItemText"},n.prototype.onSelect=function(n){t.prototype.onSelect.call(this,n);var i=this.getCloseable();null!=i&&i.emit("select",this.value,this,i)},n.prototype.onShortcut=function(n){t.prototype.onShortcut.call(this,n),this.activate(n)},n}(Av),yv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),(null==n?void 0:n.check)&&(this.state.isActive=!0)},n.prototype.getType=function(){return"DMenuItemCheck"},n.prototype.onSelect=function(n){this.state.isActive=!this.state.isActive,t.prototype.onSelect.call(this,n)},n}(Rv),kv=function(t){return"check"in t},Lv={OPEN_LINK:0,OPEN_LINK_IN_NEW_WINDOW:1,COPY_LINK_ADDRESS:2},xv=function(){function n(){}return n.addItemCreator=function(t){this.CREATORS.push(t)},n.setItemCreatorDefault=function(t){this.CREATOR_DEFAULT=t},n.setMenuCreator=function(t){this.MENU_CREATOR=t},n.newItemOf=function(t,n,i,r){for(var e=0,u=t.length;e<u;++e){var s=t[e](i,r);if(null!=s)return s}return n?n(i,r):null},n.newItem=function(t,n){return this.newItemOf(this.CREATORS,this.CREATOR_DEFAULT,t,n)},n.newItemsOf=function(n,i,r,e){for(var u=0,s=r.length;u<s;++u){var h=r[u];if(h instanceof t.DisplayObject)i.addChild(h);else if(null!=h){var o=n.newItem(h,e);if(null==o)throw new Error("No matching menu item creator found: ".concat(JSON.stringify(h)));i.addChild(o)}}},n.newItems=function(t,n,i){this.newItemsOf(this,t,n,i)},n.newMenu=function(t){if(null!=this.MENU_CREATOR)return this.MENU_CREATOR(t);throw new Error("Missing DMenu creator.")},n.CREATORS=[],n.CREATOR_DEFAULT=null,n}(),Bv=function(){function n(t,n){this.g=t,this.tu=n,this.fh=!0}return Object.defineProperty(n.prototype,"enable",{get:function(){return this.fh},set:function(t){this.fh=t},enumerable:!1,configurable:!0}),n.prototype.open=function(t){this.get().open(t)},n.prototype.get=function(){var t=this,n=this.Ma;return null==n&&(n=this.toMenu(this.tu),this.Ma=n,n.on("select",(function(n,i,r){t.onSelect(n,i,r)}))),n},n.prototype.toMenu=function(n){return n instanceof t.DisplayObject?n:this.newMenu(n)},n.prototype.newMenu=function(t){return xv.newMenu(t)},n.prototype.onSelect=function(t,n,i){var r=this.g;switch(t){case Lv.OPEN_LINK:r.open(!1);break;case Lv.OPEN_LINK_IN_NEW_WINDOW:r.open(!0);break;case Lv.COPY_LINK_ADDRESS:r.copy()}},n}(),_v={AUTO:0,THIS_WINDOW:1,NEW_WINDOW:2},Pv=function(t){var n=document.getSelection();if(n){var i=document.createRange();i.selectNodeContents(t),n.removeAllRanges(),n.addRange(i)}return n},Uv=function(t){return t.clipboardData||window.clipboardData},Fv=function(t){function n(){var n=t.call(this)||this,i=document.body;return i.addEventListener("copy",(function(t){t.target===i&&(t.preventDefault(),t.stopPropagation(),n.emit("copy",Uv(t)))})),i.addEventListener("cut",(function(t){t.target===i&&(t.preventDefault(),t.stopPropagation(),n.emit("cut",Uv(t)))})),i.addEventListener("paste",(function(t){t.target===i&&(t.preventDefault(),t.stopPropagation(),n.emit("paste",Uv(t)))})),n}return G(n,t),n.copy=function(t){var n=navigator.clipboard;n&&n.writeText?n.writeText(t):function(t,n){if("undefined"==typeof ClipboardEvent){var i=t.clipboardData;if(void 0!==i&&void 0!==i.setData)return i.setData("Text",n),!0}return!1}(window,t)||function(t){var n=document.createElement("div");n.setAttribute("style","-webkit-user-select: text !important"),n.textContent="Dummy",document.body.appendChild(n);var i=Pv(n),r=!1;if(i){var e=function(i){if(i.target===n){var e=Uv(i);e.setData("text/plain",t),r=e.getData("text/plain")===t,i.preventDefault()}};document.addEventListener("copy",e);try{document.execCommand("copy")}finally{document.removeEventListener("copy",e)}i.removeAllRanges()}return document.body.removeChild(n),r}(t)||navigator.userAgent.indexOf("Edge")<0&&function(t){var n=document.createElement("div");n.setAttribute("style","-webkit-user-select: text !important");var i=document.createElement("span");i.innerText=t,(n.attachShadow?n.attachShadow({mode:"open"}):n).appendChild(i),document.body.appendChild(n);var r=Pv(n);r&&(document.execCommand("copy"),r.removeAllRanges()),document.body.removeChild(n)}(t)},n}(t.utils.EventEmitter),Gv=function(){function n(t){this.tu=t,this.Sa=null==t?void 0:t.url,this.Pr=this.toNormalizedTarget(null==t?void 0:t.target),this.ja=null==t?void 0:t.checker,this.fh=!0}return Object.defineProperty(n.prototype,"enable",{get:function(){return this.fh},set:function(t){this.fh=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this.Sa},set:function(t){this.Sa=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"target",{get:function(){return this.Pr},set:function(t){this.Pr=this.toNormalizedTarget(t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"checker",{get:function(){return this.ja},set:function(t){this.ja=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"menu",{get:function(){var t=this.Ma;return null==t&&(t=this.newMenu(),this.Ma=t),t},enumerable:!1,configurable:!0}),n.prototype.newMenu=function(){var t=this.tu;if(t){var i=t.menu;if(i)return new Bv(this,i)}var r=n.MENU;return null==r&&(r=new Bv(this,it.getInstance().get("DLink").getMenuOptions()),n.MENU=r),r},n.prototype.toStringifiedUrl=function(t,n){var i=St(t)?t():t;null!=i&&(Tt(i)?n(i):i.then((function(t){null!=t&&n(t)})))},n.prototype.toNormalizedUrl=function(t){var i=n.ANCHOR_ELEMENT||document.createElement("a");return n.ANCHOR_ELEMENT=i,i.href=t,i.href},n.prototype.toNormalizedTarget=function(t){return rr(null!=t?t:_v.AUTO,_v)},n.prototype.copy=function(){var t=this;this.toStringifiedUrl(this.Sa,(function(n){Fv.copy(t.toNormalizedUrl(n))}))},n.prototype.open=function(t){var n=this;this.toStringifiedUrl(this.Sa,(function(i){var r=!0===t||!1===t?t:n.inNewWindow(t);n.check(i,r,(function(){n.exec(i,r)}))}))},n.prototype.check=function(t,n,i){var r=this.ja;if(r){var e=r();!0===e?i():!1===e||e.then((function(t){t&&i()}))}else i()},n.prototype.exec=function(t,n){if(n){var i=document.createElement("a");i.href=t,i.target="_blank",i.style.display="none",i.rel="noopener noreferrer",document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i)}),100)}else window.location.href=t},n.prototype.inNewWindow=function(n){switch(this.Pr){case _v.NEW_WINDOW:return!0;case _v.THIS_WINDOW:return!1;case _v.AUTO:if(null!=n){var i=n instanceof t.InteractionEvent?n.data.originalEvent:n;return i.ctrlKey||i.shiftKey||i.altKey||i.metaKey||"button"in i&&0!==i.button}return!1}},n.prototype.onClick=function(t,n){if(this.Pr===_v.AUTO){var i=n.data.originalEvent;if("pointerType"in i&&"mouse"!==i.pointerType||"touches"in i){var r=this.menu;if(r.enable)return this.fh&&t.state.isActionable&&r.open(t),!0}}return!this.fh},n}(),Hv=function(){function t(){}return t.toStateOptions=function(t,n){if(n&&(t===_v.NEW_WINDOW||"NEW_WINDOW"===t)){var i=n.state;if(null==i)n.state=gt.NEW_WINDOW;else if(Tt(i))i!==gt.NEW_WINDOW&&(n.state=[i,gt.NEW_WINDOW]);else if(Mt(i))i.indexOf(gt.NEW_WINDOW)<0&&i.push(gt.NEW_WINDOW);else{var r=i.values;null==r?i.values=gt.NEW_WINDOW:Tt(r)?r!==gt.NEW_WINDOW&&(i.values=[r,gt.NEW_WINDOW]):r.indexOf(gt.NEW_WINDOW)<0&&r.push(gt.NEW_WINDOW)}}return n},t}(),zv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.toLinkOptions=function(t){if(t)return{url:this.toUrl(t.url),target:t.target,checker:this.toChecker(t.checker),menu:t.menu}},n.prototype.toUrl=function(t){var n=this;return Tt(t)||null==t?t:function(){return t(n)}},n.prototype.toChecker=function(t){var n=this;if(null!=t)return function(){return t(n)}},n.prototype.init=function(n){t.prototype.init.call(this,Hv.toStateOptions(null==n?void 0:n.target,n))},Object.defineProperty(n.prototype,"link",{get:function(){var t=this.Ta;return null==t&&(t=new Gv(this.toLinkOptions(this.tu)),this.Ta=t),t},enumerable:!1,configurable:!0}),n.prototype.onClick=function(n){this.link.onClick(this,n)||t.prototype.onClick.call(this,n)},n.prototype.getType=function(){return"DMenuItemLink"},n.prototype.onSelect=function(n){t.prototype.onSelect.call(this,n),this.link.open(n)},n.prototype.open=function(t){this.link.open(t)},n.prototype.onShortcut=function(n){t.prototype.onShortcut.call(this,n),this.activate(n)},n}(Rv),Vv=function(t){return"url"in t},Wv=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return G(i,n),i.prototype.init=function(t){n.prototype.init.call(this,t),this.initHover(t)},i.prototype.initHover=function(t){var n=this;this.on(he.over,(function(){n.state.isActionable&&n.open()}))},i.prototype.toMenu=function(n){var i=null==n?void 0:n.menu;return i instanceof t.DisplayObject?i:this.newMenu(i)},i.prototype.newMenu=function(t){return xv.newMenu(t)},Object.defineProperty(i.prototype,"menu",{get:function(){var t=this,n=this.Ma;return null==n&&((n=this.toMenu(this.tu)).on("select",(function(n,i,r){t.onMenuSelect(n,i,r)})),this.Ma=n),n},enumerable:!1,configurable:!0}),i.prototype.getType=function(){return"DMenuItemMenu"},i.prototype.open=function(){var t=this.menu;t.isHidden()&&this.onOpen(t)},i.prototype.onOpen=function(t){var n=this.getContext();null!=n&&t.open(this,this.getCloseable(),n)},i.prototype.close=function(){this.menu.close()},i.prototype.toggle=function(){var t=this.menu;t.isHidden()?this.onOpen(t):t.close()},i.prototype.onSelect=function(t){this.open(),n.prototype.onSelect.call(this,t)},i.prototype.onMenuSelect=function(t,n,i){var r=this.getCloseable();null!=r&&r.emit("select",t,n,r)},i.prototype.onKeyDown=function(t){return Qe.isArrowRightKey(t)&&this.onKeyDownArrowRight(t),n.prototype.onKeyDown.call(this,t)},i.prototype.onKeyDownArrowRight=function(t){return!(!this.state.isActionable||!this.state.isFocused||(this.onSelect(t),0))},i}(Av),Xv=function(t){return"menu"in t},Kv=function(n,i){var r=n.menu;return r instanceof t.DisplayObject||(null==r.sticky&&(r.sticky=i),null==r.align&&(r.align=xs.RIGHT)),n},Yv=function(t){function n(n){var i=t.call(this)||this;return n.snippet.add(i,!0),n.reflowable.add(i),i}return G(n,t),n.prototype.onReflow=function(t,n,i){var r=t.state,e=t.border,u=e.getWidth(r),s=e.getColor(r);if(null!=s){var h=e.getAlpha(r),o=e.getAlign(r),a=t.padding,c=.5*i;this.clear(),this.lineStyle(u,s,h,o),this.moveTo(a.getLeft(),c),this.lineTo(n-a.getRight(),c),this.visible=!0}else this.clear(),this.visible=!1},n}(t.Graphics),Jv=function(t){return"separator"in t},Zv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.initReflowable=function(){new Yv(this)},n.prototype.getType=function(){return"DMenuItemSeparator"},n}(Nv),qv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DMenuItemSpace"},n}(Xs),Qv=function(t){return"space"in t},$v=function(){xv.addItemCreator((function(t){return kv(t)?new yv(t):null})),xv.addItemCreator((function(t){return Vv(t)?new zv(t):null})),xv.addItemCreator((function(t,n){return Xv(t)?new Wv(Kv(t,n)):null})),xv.addItemCreator((function(t){return Jv(t)?new Zv(t):null})),xv.addItemCreator((function(t){return Qv(t)?new qv(t):null})),xv.setItemCreatorDefault((function(t){return new Rv(t)}))},tb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DMenuItemExpandableBody"},n}(Js),nb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getSelection=function(){return null},n.prototype.getType=function(){return"DMenuItemExpandableHeader"},n}(Nv),ib=function(){function t(){}return t.addItemCreator=function(t){this.CREATORS.push(t)},t.setItemCreatorDefault=function(t){this.CREATOR_DEFAULT=t},t.newItem=function(t,n){return xv.newItemOf(this.CREATORS,this.CREATOR_DEFAULT,t,n)||xv.newItem(t,n)},t.newItems=function(t,n,i){xv.newItemsOf(this,t,n,i)},t.CREATORS=[],t.CREATOR_DEFAULT=null,t}(),rb=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return G(i,n),i.prototype.init=function(t){var i,r=this;n.prototype.init.call(this,t);var e=this.theme,u=this.toHeader(e,t);this.bo=u,u.on("select",(function(){r.toggle()})),this.addChild(u);var s=this.toBody(e,t);this.Ri=s;var h=null!==(i=null==t?void 0:t.sticky)&&void 0!==i&&i;this.newItems(s,h,e,t),this.addChild(s),this.state.isActive?this.onActivated():this.onDeactivated()},i.prototype.newItems=function(t,n,i,r){var e=null==r?void 0:r.items;null!=e&&ib.newItems(t,e,n)},i.prototype.toHeader=function(n,i){return i?i.header instanceof t.DisplayObject?i.header:this.newHeader(n,i.header):this.newHeader(n)},i.prototype.newHeader=function(t,n){return new nb(n)},i.prototype.toBody=function(n,i){var r=null==i?void 0:i.body;return r?r instanceof t.DisplayObject?r:this.newBody(n,r):this.newBody(n)},i.prototype.newBody=function(t,n){return new tb(n)},i.prototype.open=function(){this.state.isActive=!0},i.prototype.close=function(){this.state.isActive=!1},i.prototype.toggle=function(){this.state.isActive=!this.state.isActive},i.prototype.onActivated=function(){var t=this.Ri;t instanceof ru?t.show():t.visible=!0},i.prototype.onDeactivated=function(){var t=this.Ri;t instanceof ru?t.hide():t.visible=!1},i.prototype.onStateChange=function(t,i){n.prototype.onStateChange.call(this,t,i),t.isActive?i.isActive||this.onActivated():i.isActive&&this.onDeactivated()},i.prototype.onKeyDown=function(t){if(Qe.isArrowRightKey(t))this.state.isActionable&&!this.state.isActive&&(i=this.bo)instanceof ru&&i.state.isFocused&&(this.state.isActive=!0);else if(Qe.isArrowLeftKey(t)){var i;if(this.state.isActionable&&this.state.isActive)return(i=this.bo)instanceof ru?i.focus():this.focus(),this.state.isActive=!1,n.prototype.onKeyDown.call(this,t),!0}return n.prototype.onKeyDown.call(this,t)},i.prototype.getType=function(){return"DMenuItemExpandable"},i}(Js),eb=function(t){return"header"in t},ub=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DMenuItemExpandableItemCheck"},n}(yv),sb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DMenuItemExpandableItemLink"},n}(zv),hb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DMenuItemExpandableItemSeparator"},n}(Zv),ob=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DMenuItemExpandableItemSpace"},n}(qv),ab=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DMenuItemExpandableItemText"},n}(Rv),cb=function(){xv.addItemCreator((function(t){return eb(t)?new rb(t):null})),ib.addItemCreator((function(t){return kv(t)?new ub(t):null})),ib.addItemCreator((function(t){return Vv(t)?new sb(t):null})),ib.addItemCreator((function(t){return Jv(t)?new hb(t):null})),ib.addItemCreator((function(t){return Qv(t)?new ob(t):null})),ib.setItemCreatorDefault((function(t){return new ab(t)}))},fb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DMenuSidedItemCheck"},n}(yv),lb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getSelection=function(){return null},n.prototype.getType=function(){return"DMenuSidedItemLink"},n}(zv),vb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.initHover=function(t){},n.prototype.onMenuSelect=function(n,i,r){t.prototype.onMenuSelect.call(this,n,i,r);var e=t.prototype.getSelection.call(this);e&&e.add(i)},n.prototype.onOpen=function(t){t.open(this,this)},n.prototype.getSelection=function(){return null},n.prototype.getType=function(){return"DMenuSidedItemMenu"},n}(Wv),bb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DMenuSidedItemSeparator"},n}(Zv),db=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DMenuSidedItemSpace"},n}(qv),gb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DMenuSidedItemText"},n}(Rv),mb=function(){function t(){}return t.addItemCreator=function(t){this.CREATORS.push(t)},t.setItemCreatorDefault=function(t){this.CREATOR_DEFAULT=t},t.newItem=function(t,n){return xv.newItemOf(this.CREATORS,this.CREATOR_DEFAULT,t,n)||xv.newItem(t,n)},t.newItems=function(t,n,i){xv.newItemsOf(this,t,n,i)},t.CREATORS=[],t.CREATOR_DEFAULT=null,t}(),wb=function(){mb.setItemCreatorDefault((function(t){return new gb(t)})),mb.addItemCreator((function(t){return Qv(t)?new db(t):null})),mb.addItemCreator((function(t){return Jv(t)?new bb(t):null})),mb.addItemCreator((function(t,n){return Xv(t)?new vb(Kv(t,n)):null})),mb.addItemCreator((function(t){return Vv(t)?new lb(t):null})),mb.addItemCreator((function(t){return kv(t)?new fb(t):null}))},Ob=function(){function t(){}return t.addItemCreator=function(t){this.CREATORS.push(t)},t.setItemCreatorDefault=function(t){this.CREATOR_DEFAULT=t},t.newItem=function(t,n){return xv.newItemOf(this.CREATORS,this.CREATOR_DEFAULT,t,n)||mb.newItem(t,n)},t.newItems=function(t,n,i){xv.newItemsOf(this,t,n,i)},t.CREATORS=[],t.CREATOR_DEFAULT=null,t}(),pb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newItems=function(t,n,i,r){null!=r&&null!=r.items&&Ob.newItems(t,r.items,n)},n.prototype.getType=function(){return"DMenuSidedItemExpandable"},n}(rb),Db=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DMenuSidedItemExpandableItemCheck"},n}(ub),Eb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DMenuSidedItemExpandableItemLink"},n}(zv),Mb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DMenuItemExpandableItemMenu"},n}(Wv),Sb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.onOpen=function(t){t.open(this,this)},n.prototype.getType=function(){return"DMenuSidedItemExpandableItemMenu"},n}(Mb),jb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DMenuSidedItemSeparator"},n}(hb),Tb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DMenuSidedItemExpandableItemSpace"},n}(ob),Ib=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DMenuSidedItemExpandableItemText"},n}(ab),Cb=function(){mb.addItemCreator((function(t){return eb(t)?new pb(t):null})),Ob.addItemCreator((function(t){return kv(t)?new Db(t):null})),Ob.addItemCreator((function(t){return Vv(t)?new Eb(t):null})),Ob.addItemCreator((function(t,n){return Xv(t)?new Sb(Kv(t,n)):null})),Ob.addItemCreator((function(t){return Jv(t)?new jb(t):null})),Ob.addItemCreator((function(t){return Qv(t)?new Tb(t):null})),Ob.setItemCreatorDefault((function(t){return new Ib(t)}))},Nb=function(){$v(),cb(),wb(),Cb()},Ab=function(){Nb(),Iv()},Rb=function(t){function n(n,i){return t.call(this,Oe.EMIT_EVENT,n,i,vs.EMIT_EVENT,"")||this}return G(n,t),n}(Ts),yb=function(t){function n(n,i,r){return t.call(this,n,i,"",vs.EMIT_EVENT,r)||this}return G(n,t),n}(Ts),kb=function(t){function n(n,i,r,e){return t.call(this,n,i,r,e,"")||this}return G(n,t),n}(Ts),Lb=function(t){function n(n,i,r,e){return t.call(this,n,i,r,vs.EMIT_EVENT,e)||this}return G(n,t),n}(Ts),xb=function(t,n){return n?Ia(t).then((function(t){var n=Vr.getInstance().init();n.updateTexture(t.width,t.height,t.source),n.render();var i=document.createElement("canvas");return n.read(i),xb(i.toDataURL(),!1)})):Ia(t).then((function(t){return new Pf(t)}))},Bb=function(){function t(){}return t.from=function(t,n,i){var r=this,e=Se.toSerialized(t),u=e.pieces;return Se.toPieceData(n,u,i).then((function(t){return r.Ia(e,i,u,t)}))},t.Ia=function(t,n,i,r){var e=this,u=t.width,s=t.height,h=new Me(u,s),o=new _i(t,i,r,n,1);return Se.newLayer(t,h,o).then((function(){return e.create(t.name,u,s,h,n,0)}))},t.create=function(t,n,i,r,e,u){var s=new qi(t,e,u);return s.size.set(n,i),r.copyTo(s),s.size.init(),s},t}(),_b=function(t){return"data:image/svg+xml;base64,".concat(btoa(t))},Pb=function(t){return Math.round(100*t)/100},Ub=Fi,Fb=function(){function t(){}return t.from=function(t){if(Tt(t))return K[t];if(jt(t))return t;if(null!=t){for(var n=K.NONE,i=0,r=t.length;i<r;++i)n|=K[t[i]];return n}return K.NONE},t}(),Gb=function(){function t(){this.resources=[],this.resourceToIndex=new Map,this.data=[],this.dataToIndex=new Map,this.pieces=[],this.pieceToIndex=new Map,this.uuids=new Set,this.uuidNext=0}return t.prototype.addResource=function(t){return this.Ca(t,this.resources,this.resourceToIndex)},t.prototype.addData=function(t){return this.Ca(t,this.data,this.dataToIndex)},t.prototype.addPiece=function(t){return this.Ca(t,this.pieces,this.pieceToIndex)},t.prototype.addUuid=function(t){if(0!==t){var n=this.uuids;return n.has(t)?0:(n.add(t),t)}return 0},t.prototype.updateUuid=function(t){var n=this.uuids;if(0!==t)return t;var i=this.newUuid();return n.add(i),i},t.prototype.newUuid=function(){for(var t=this.uuids,n=this.uuidNext;;)if(0!==(n+=1)&&!t.has(n))return this.uuidNext=n,n},t.prototype.Ca=function(t,n,i){var r=i.get(t);if(null!=r)return r;var e=n.length;return n.push(t),i.set(t,e),e},t}(),Hb=function(t){function n(n,i){var r,e,u,s=t.call(this)||this;return s.Na=null!==(r=null==i?void 0:i.visible)&&void 0!==r?r:n.isSnapGridVisible(),s.Zh=s.Na,s.Aa=null!==(e=null==i?void 0:i.enable)&&void 0!==e?e:n.isSnapGridEnabled(),s.fh=s.Aa,s.Ra=null!==(u=null==i?void 0:i.size)&&void 0!==u?u:n.getSnapGridSize(),s.j=s.Ra,s}return G(n,t),Object.defineProperty(n.prototype,"visible",{get:function(){return this.Zh},set:function(t){this.Zh!==t&&(this.Zh=t,this.emit("change",this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"enable",{get:function(){return this.fh},set:function(t){this.fh!==t&&(this.fh=t,this.emit("change",this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,this.emit("change",t,this))},enumerable:!1,configurable:!0}),n.prototype.snap=function(t,n){if(this.fh){var i=this.j;n.set(t,Math.round(t/i)*i)}},n.prototype.reset=function(){this.Zh=this.Na,this.fh=this.Aa,this.j=this.Ra,this.emit("change",this)},n.prototype.serialize=function(){return[this.fh?1:0,this.Zh?1:0,this.j]},n.prototype.deserialize=function(t){this.enable=!!t[0],2 in t?(this.visible=!!t[1],this.size=t[2]):(this.visible=this.Na,this.size=t[1])},n}(t.utils.EventEmitter),zb=function(){function t(){this.distance=NaN,this.result=0,this.threshold=10}return t.prototype.reset=function(t,n){this.distance=NaN,this.result=t,this.threshold=1e-4<n?10/n:10},t.prototype.set=function(t,n){var i=Math.abs(n-t);if(i<=this.threshold){var r=this.distance;(r!=r||i<r)&&(this.distance=i,this.result=n)}},t}(),Vb={HORIZONTAL:0,VERTICAL:1},Wb=function(){function t(t,n){this.type=t,this.position=n}return t.prototype.serialize=function(){return[this.type,this.position]},t}(),Xb=function(t){function n(n,i){var r,e,u=t.call(this)||this;return u.values=[],u.Na=null!==(r=null==i?void 0:i.visible)&&void 0!==r?r:n.isSnapTargetVisible(),u.Zh=u.Na,u.Aa=null!==(e=null==i?void 0:i.enable)&&void 0!==e?e:n.isSnapTargetEnabled(),u.fh=u.Aa,u}return G(n,t),Object.defineProperty(n.prototype,"enable",{get:function(){return this.fh},set:function(t){this.fh!==t&&(this.fh=t,this.emit("change",this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"visible",{get:function(){return this.Zh},set:function(t){this.Zh!==t&&(this.Zh=t,this.emit("change",this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this.values.length},enumerable:!1,configurable:!0}),n.prototype.add=function(t,n){null!=n?this.values.splice(n,0,t):this.values.push(t),this.emit("change",this)},n.prototype.remove=function(t){var n=this.values;0<=t&&t<n.length&&(n.splice(t,1),this.emit("change",this))},n.prototype.replace=function(t,n){var i=this.values;if(0<=t&&t<i.length){var r=i[t];return i[t]=n,this.emit("change",this),r}return null},n.prototype.swap=function(t,n){if(t!==n){var i=this.values,r=i[t];i[t]=i[n],i[n]=r,this.emit("change",this)}},n.prototype.snap=function(t,n,i,r){if(this.fh)for(var e=this.values,u=0,s=e.length;u<s;++u){var h=e[u];h.type===Vb.VERTICAL?i.set(t,h.position):r.set(n,h.position)}},n.prototype.reset=function(){this.fh=this.Aa,this.Zh=this.Na,this.values.length=0,this.emit("change",this)},n.prototype.serialize=function(){for(var t=[],n=this.values,i=0,r=n.length;i<r;++i)t.push(n[i].serialize());return[this.fh?1:0,this.Zh?1:0,t]},n.prototype.deserialize=function(t){this.fh=!!t[0],this.Zh=!!t[1];var n=t[2],i=this.values;i.length=0;for(var r=0,e=n.length;r<e;++r){var u=n[r];i.push(new Wb(u[0],u[1]))}this.emit("change",this)},n}(t.utils.EventEmitter),Kb=1e-5,Yb={NONE:0,TOP_LEFT:1,TOP_CENTER:2,TOP_RIGHT:3,MIDDLE_LEFT:4,MIDDLE_RIGHT:5,BOTTOM_LEFT:6,BOTTOM_CENTER:7,BOTTOM_RIGHT:8,ROTATION:9},Jb=function(n){function i(i,r,e){var u,s=n.call(this)||this;return s.Mt=[new t.Point,new t.Point,new t.Point,new t.Point,new t.Point],s.ya=[new t.Point,new t.Point],s.ka=[1,1],s.La=new t.Point,s.xa=new zb,s.Ba=new zb,s.Pa={distance:0,scale:new t.Point},s.Ua=new t.Point,s.Fa=new t.Rectangle,s.Ga=new t.Point,s.grid=new Hb(r,null==e?void 0:e.grid),s.target=new Xb(r,null==e?void 0:e.target),s.g=i,s.Aa=null!==(u=null==e?void 0:e.enable)&&void 0!==u?u:r.isSnapEnabled(),s.fh=s.Aa,s}return G(i,n),Object.defineProperty(i.prototype,"enable",{get:function(){return this.fh},set:function(t){this.fh!==t&&(this.fh=t,this.emit("change",this))},enumerable:!1,configurable:!0}),i.prototype.prepare=function(t){t.updateTransform();var n=t.transform.localTransform,i=t.width,r=t.height,e=this.Mt;e[0].set(0,0),e[1].set(i,0),e[2].set(i,r),e[3].set(0,r),e[4].set(.5*i,.5*r),n.apply(e[0],e[0]),n.apply(e[1],e[1]),n.apply(e[2],e[2]),n.apply(e[3],e[3]),n.apply(e[4],e[4])},i.prototype.prepareForTranslate=function(t){this.fh&&this.prepare(t)},i.prototype.snap=function(t,n){var i=t.x,r=t.y,e=this.g.canvas,u=this.xa,s=this.Ba;if(null!=e){var h=Math.max(e.scale.x,e.scale.y);u.reset(i,h),s.reset(r,h),u.set(i,0),u.set(i,e.width),s.set(r,0),s.set(r,e.height)}else u.reset(i,1),s.reset(r,1);return this.target.snap(i,r,u,s),this.grid.snap(i,u),this.grid.snap(r,s),n.x=yo(u.distance)?NaN:u.result,n.y=yo(s.distance)?NaN:s.result,n},i.prototype.toSnapped=function(t,n){var i=t.x,r=t.y;if(this.fh){this.snap(t,n);var e=n.x,u=n.y;n.set(yo(e)?i:e,yo(u)?r:u)}else n.set(i,r);return n},i.prototype.toTranslationSnapped=function(t,n){var i=t.x,r=t.y,e=NaN,u=NaN;if(this.fh)for(var s=this.Ua,h=this.Mt,o=0,a=h.length;o<a;++o){var c=h[o];if(s.set(c.x+i,c.y+r),this.snap(s,s),!yo(s.x)){var f=s.x-c.x;(yo(e)||Math.abs(f-i)<Math.abs(e-i))&&(e=f)}if(!yo(s.y)){var l=s.y-c.y;(yo(u)||Math.abs(l-r)<Math.abs(u-r))&&(u=l)}}return n.x=yo(e)?i:e,n.y=yo(u)?r:u,n},i.prototype.prepareForRotate=function(t){},i.prototype.getGridSizeRotation=function(){return 5},i.prototype.toRadian=function(t){return t/180*Math.PI},i.prototype.toDegree=function(t){return t/Math.PI*180},i.prototype.toRotationSnapped=function(t,n){if(this.fh){var i=this.getGridSizeRotation(),r=t+n,e=Math.round(this.toDegree(r)),u=e%90;return Math.abs(u)<=i?this.toRadian(e-u)-t:90-i<=u?this.toRadian(e+(90-u))-t:u<=-90+i?this.toRadian(e-(90+u))-t:n}return n},i.prototype.calcNormalizedVector=function(t,n,i){var r=n.x-t.x,e=n.y-t.y,u=Math.sqrt(r*r+e*e);if(Kb<u){var s=1/u;i.x=r*s,i.y=e*s}else i.x=1,i.y=0;return u},i.prototype.prepareForScale=function(t,n){if(this.fh){this.prepare(t);var i=this.Mt,r=this.ya,e=this.ka;switch(n){case Yb.TOP_LEFT:e[0]=this.calcNormalizedVector(i[1],i[0],r[0]),e[1]=this.calcNormalizedVector(i[3],i[0],r[1]);break;case Yb.TOP_CENTER:e[0]=this.calcNormalizedVector(i[3],i[0],r[0]);break;case Yb.TOP_RIGHT:e[0]=this.calcNormalizedVector(i[0],i[1],r[0]),e[1]=this.calcNormalizedVector(i[2],i[1],r[1]);break;case Yb.MIDDLE_LEFT:e[0]=this.calcNormalizedVector(i[1],i[0],r[0]);break;case Yb.NONE:break;case Yb.MIDDLE_RIGHT:e[0]=this.calcNormalizedVector(i[0],i[1],r[0]);break;case Yb.BOTTOM_LEFT:e[0]=this.calcNormalizedVector(i[2],i[3],r[0]),e[1]=this.calcNormalizedVector(i[0],i[3],r[1]);break;case Yb.BOTTOM_CENTER:e[0]=this.calcNormalizedVector(i[0],i[3],r[0]);break;case Yb.BOTTOM_RIGHT:e[0]=this.calcNormalizedVector(i[3],i[2],r[0]),e[1]=this.calcNormalizedVector(i[1],i[2],r[1])}}},i.prototype.setScaleSnappedResult=function(t,n,i,r,e){if(Kb<n&&(yo(e.distance)||t<e.distance)){e.distance=t;var u=1+i/n;r?e.scale.x=u:e.scale.y=u}},i.prototype.calcScaleSnapped1D=function(t,n,i,r,e,u){var s=this.La;t.apply(n,s);var h=s.x,o=s.y;this.snap(s,s);var a=s.x,c=s.y;if(!yo(a)){var f=Math.abs(i.x);if(Kb<f){var l=(a-h)/i.x,v=Math.abs(l),b=(a-n.x)/i.x;this.setScaleSnappedResult(v,r,b,e,u)}}if(!yo(c)){var d=Math.abs(i.y);if(Kb<d){var g=(c-o)/i.y,m=(v=Math.abs(g),(c-n.y)/i.y);this.setScaleSnappedResult(v,r,m,e,u)}}},i.prototype.calcScaleSnappedX=function(t,n,i,r,e){this.calcScaleSnapped1D(t,n,i,r,!0,e)},i.prototype.calcScaleSnappedY=function(t,n,i,r,e){this.calcScaleSnapped1D(t,n,i,r,!1,e)},i.prototype.calcScaleSnapped2D=function(t,n,i,r,e){var u=this.La;t.apply(n,u);var s=u.x,h=u.y;this.snap(u,u);var o=u.x,a=u.y;if(yo(o)){if(yo(a))return;o=s}else yo(a)&&(a=h);var c=i[0].x*i[1].y-i[1].x*i[0].y;if(Kb<Math.abs(c)){var f=o-s,l=a-h,v=Math.abs(f*f+l*l);if(yo(e.distance)||v<e.distance){e.distance=v;var b=o-n.x,d=a-n.y,g=(+i[1].y*b-i[1].x*d)/c,m=(-i[0].y*b+i[0].x*d)/c;e.scale.set(1+g/r[0],1+m/r[1])}}},i.prototype.calcScaleSnappedXY=function(t,n,i,r,e,u,s){this.calcScaleSnapped2D(t,n,e,u,s),this.calcScaleSnappedX(t,r,e[0],u[0],s),this.calcScaleSnappedY(t,i,e[1],u[1],s)},i.prototype.toScaleSnapped=function(t,n,i,r){if(this.fh){var e=this.Mt,u=this.ya,s=this.ka,h=this.Pa;switch(h.distance=NaN,h.scale.set(r.x,r.y),n){case Yb.TOP_LEFT:this.calcScaleSnappedXY(t,e[0],e[1],e[3],u,s,h);break;case Yb.TOP_CENTER:this.calcScaleSnappedY(t,e[0],u[0],s[0],h),this.calcScaleSnappedY(t,e[1],u[0],s[0],h);break;case Yb.TOP_RIGHT:this.calcScaleSnappedXY(t,e[1],e[0],e[2],u,s,h);break;case Yb.MIDDLE_LEFT:this.calcScaleSnappedX(t,e[0],u[0],s[0],h),this.calcScaleSnappedX(t,e[3],u[0],s[0],h);break;case Yb.NONE:break;case Yb.MIDDLE_RIGHT:this.calcScaleSnappedX(t,e[1],u[0],s[0],h),this.calcScaleSnappedX(t,e[2],u[0],s[0],h);break;case Yb.BOTTOM_LEFT:this.calcScaleSnappedXY(t,e[3],e[2],e[0],u,s,h);break;case Yb.BOTTOM_CENTER:this.calcScaleSnappedY(t,e[2],u[0],s[0],h),this.calcScaleSnappedY(t,e[3],u[0],s[0],h);break;case Yb.BOTTOM_RIGHT:this.calcScaleSnappedXY(t,e[2],e[3],e[1],u,s,h)}if(!yo(h.distance)){if(r.copyFrom(h.scale),i)switch(n){case Yb.TOP_LEFT:case Yb.TOP_RIGHT:case Yb.BOTTOM_LEFT:case Yb.BOTTOM_RIGHT:r.x=r.y=Math.max(r.x,r.y);break;case Yb.TOP_CENTER:case Yb.BOTTOM_CENTER:r.x=r.y;break;case Yb.MIDDLE_LEFT:case Yb.MIDDLE_RIGHT:r.y=r.x}return!0}}return!1},i.prototype.reset=function(){this.enable=this.Aa,this.target.reset(),this.grid.reset()},i.prototype.serialize=function(){return[this.fh?1:0,this.target.serialize(),this.grid.serialize()]},i.prototype.deserialize=function(t){this.enable=!!t[0],this.target.deserialize(t[1]),this.grid.deserialize(t[2])},i}(t.utils.EventEmitter),Zb=function(t){function n(n,i,r){var e=t.call(this,n,i.width,i.height,0,r)||this;return e.Th=i,e}return G(n,t),n.prototype.render=function(t){var n=this.frame;t.drawImage(this.Th.canvas,n.x,n.y,n.width,n.height)},n}(xr),qb=function(n,i,r,e){this.id=n,this.size=i,this.color=t.utils.hex2string(r),this.height=i+2*e,this.measured=!1,this.ascent=0,this.descent=0},Qb=function(){function n(n,i,r,e){this.A=n,this.ki=document.createElement("canvas"),this.Qu=null;var u=this.toPadding(i);this.au=u,this.ir=new qb(n,i,r,u),this.Ha=0,this.At=1,this.rr=1,this.za=0,this.Fi=t.Texture.from(this.ki,{mipmap:t.MIPMAP_MODES.OFF,resolution:e,scaleMode:t.SCALE_MODES.NEAREST});var s=new Map;s.set(j.SPACE,this.newChar(j.SPACE,Hr.SPACE_R)),s.set(j.TAB,this.newChar(j.SOFT_TAB,Hr.SPACE_R)),s.set(j.DOTS,this.newChar(j.DOTS,Hr.LETTER_RNB));for(var h=0,o=j.ASCII.length;h<o;++h){var a=j.ASCII[h];s.set(a,this.newChar(a,Hr.LETTER_RNB))}this.sn=s,this.Va=new Map,this.Wa=1}return n.prototype.toPadding=function(t){return Math.max(3,Math.ceil(.2*t))},Object.defineProperty(n.prototype,"id",{get:function(){return this.A},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"font",{get:function(){return this.ir},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this.At},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.rr},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvas",{get:function(){return this.ki},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"characters",{get:function(){return this.sn},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"texture",{get:function(){return this.Fi},enumerable:!1,configurable:!0}),n.prototype.newChar=function(t,n){var i=this.getAdvance(t),r=this.au,e=Math.ceil(r+i+r),u=this.font.height;return new Gr(n,t,-e,-u,e,u,i)},n.prototype.add=function(t,n){for(var i=this.sn,r=this.Va,e=0,u=t.length;e<u;)if(t.charCodeAt(e)<=255)e+=1;else{for(var s=e+1;s<u;++s){var h=t.charCodeAt(s);if(!(56320<=h&&h<=57343||65024<=h&&h<=65039))break}var o=t.substring(e,s),a=i.get(o);if(null!=a)a.type&Hr.RESERVED||(0===a.ref&&(this.Ha-=1),a.ref+=1);else{var c=r.get(o);if(null!=c)c.ref=1,i.set(o,c);else{var f=this.newChar(o,n);i.set(o,f),r.set(o,f)}this.Wa+=1}e=s}},n.prototype.remove=function(t){for(var n=this.sn,i=0,r=t.length;i<r;)if(t.charCodeAt(i)<=255)i+=1;else{for(var e=i+1;e<r;++e){var u=t.charCodeAt(e);if(!(56320<=u&&u<=57343||65024<=u&&u<=65039))break}var s=t.substring(i,e),h=n.get(s);null!=h&&0<h.ref&&!(h.type&Hr.RESERVED)&&(h.ref-=1,0===h.ref&&(this.Ha+=1)),i=e}},n.prototype.cleanup=function(){var t=this.sn;t.size>>1<=this.Ha&&(t.forEach((function(n,i){n.ref<=0&&t.delete(i)})),this.Wa+=1,this.Ha=0)},n.prototype.get=function(t){return this.sn.get(t)},n.prototype.getAdvance=function(t){var n=this.getContext();return null!=n?n.measureText(t).width:0},n.prototype.getContext=function(){var t=this.Qu;if(null==t){var n=this.ki;if(null==n)return null;if(null==(t=this.Qu=n.getContext("2d",{alpha:!0})))return null}var i=this.ir;return t.font!==i.id&&(t.font=i.id,i.id=t.font,t.textAlign="left",t.textBaseline="alphabetic",t.lineWidth=0,t.lineCap="round",t.lineJoin="miter",t.miterLimit=10,t.fillStyle=i.color,t.strokeStyle="#0000ff"),t},n.prototype.update=function(){if(this.cleanup(),this.za<this.Wa){this.za=this.Wa;var t=this.ki;if(null!=t){var n=this.ir,i=n.height,r=this.sn,e=this.At=this.toPowerOf2(Math.ceil(Math.sqrt(r.size))*i),u=this.au,s=0,h=0;r.forEach((function(t){e<=s+t.width&&(s=0,h+=i),t.x=s,t.y=h,t.origin.x=s+u,s+=t.width}));var o=this.rr=h+i,a=this.Fi.baseTexture,c=a.resolution,f=Math.ceil(e*c),l=Math.ceil(o*c);t.width=f,t.height=l;var v=this.getContext();if(null!=v){Wr.measure(v,n);var b=Math.round(.5*(i-(n.ascent+n.descent))+n.ascent);v.save(),v.scale(c,c),v.clearRect(0,0,e,o),r.forEach((function(t){t.origin.y=t.y+b,v.fillText(t.character,t.origin.x,t.origin.y)})),v.restore()}return a.setRealSize(f,l),!0}}return!1},n.prototype.getRevision=function(){return this.Wa},n.prototype.getRevisionUpdate=function(){return this.za},Object.defineProperty(n.prototype,"length",{get:function(){return this.sn.size},enumerable:!1,configurable:!0}),n.prototype.destroy=function(){null!=this.ki&&(this.ki=null),this.sn.clear(),this.Va.clear(),this.Ha=0},n.prototype.toPowerOf2=function(t){for(var n=32;n<t;)n<<=1;return n},n}(),$b=function(t){t.update()},td=function(t){t.forEach($b)},nd=function(t){t.update()},id=function(t){t.forEach(nd)},rd=function(){function t(t){var n=this;this.sr=new Map,this._e=t.renderer.resolution,t.renderer.on("prerender",(function(){n.update()}))}return t.prototype.add=function(t,n,i,r){var e=this.sr,u=e.get(t);null==u&&(u=new Map,e.set(t,u));var s=u.get(i);null==s&&(s=new Qb(t,n,i,this._e),u.set(i,s)),s.add(r,Hr.LETTER)},t.prototype.remove=function(t,n,i){var r=this.sr.get(t);if(null!=r){var e=r.get(n);null!=e&&e.remove(i)}},t.prototype.get=function(t,n){var i=this.sr.get(t);if(null==i)return null;var r=i.get(n);return null==r?null:r},t.prototype.update=function(){this.sr.forEach(td)},t.prototype.destroy=function(){var t=this.sr;t.forEach(id),t.clear()},t}(),ed=function(t){if("object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)){var n=Object.getPrototypeOf(t);return null==n||n===Object.prototype}return!1},ud=function(){function t(t,n,i){var r=this;this.instance=null,this.newInstance=t,this.options=n,null!=i&&(i.state.isActive&&setTimeout((function(){r.get()}),0),i.on("active",(function(){r.get()})))}return t.prototype.get=function(){var t=this.instance;return null==t&&(t=new this.newInstance(this.options),this.instance=t),t},t}(),sd=function(t,n,i,r){for(var e=0,u=Math.floor(t.length/i)-1;e<=u;){var s=e+(u-e>>1),h=t[s*i+r];if(n<h)u=s-1;else{if(!(h<n))return s;e=s+1}}return Math.max(e,u)},hd=function(t){return Mt(t)?function(t){for(var n=[],i=0,r=t.length;i<r;++i)n[i]=t[i];return n}(t):ed(t)?function(t){var n={};for(var i in t)Object.hasOwnProperty.call(t,i)&&(n[i]=hd(t[i]));return n}(t):t},od=function(t){if(null!=t){if(Tt(t))return t;if(jt(t))return String(t);if("name"in t)return t.name;if("label"in t)return t.label;if("id"in t)return t.id}return""},ad=function(t,n){if(null!=t){var i=hd(t);if(null!=n)for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var e=n[r];if(ed(e))if(Object.prototype.hasOwnProperty.call(i,r)){var u=i[r];ed(u)&&ad(u,e)}else i[r]=hd(e);else Object.prototype.hasOwnProperty.call(i,r)||(i[r]=e)}return i}return null!=n?hd(n):{}},cd=function(){function n(n){var i,r,e,u,s,h;this.At=null!==(i=n.width)&&void 0!==i?i:256,this.Xa=null!==(r=n.ratio)&&void 0!==r?r:1,this.ni=null!==(e=n.margin)&&void 0!==e?e:3;var o=n.resolution;if(null!=o)this._e=o;else{var a=null!==(u=window.devicePixelRatio)&&void 0!==u?u:1;this._e=2<a?a:2*a}this.Ka=null!==(s=n.scaling)&&void 0!==s?s:t.settings.SCALE_MODE,this.Ya=null!==(h=n.mipmap)&&void 0!==h?h:t.settings.MIPMAP_TEXTURES,this.Ja={},this.Za="",this.qa=0,this.Qa=0,this.rr=0}return Object.defineProperty(n.prototype,"width",{get:function(){return this.At},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ratio",{get:function(){return this.Xa},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"margin",{get:function(){return this.ni},enumerable:!1,configurable:!0}),n.prototype.add=function(n,i,r,e,u,s,h,o){var a=this.Ja;if(!(n in a)){var c=this.ni,f=this.qa,l=this.Qa;this.At<=f+i?(f=0,l=this.Qa+this.rr+c,this.rr=r,this.Qa=l):this.rr=Math.max(this.rr,r),this.qa=f+i+c,a[n]=new t.Rectangle(f+(null!=u?u:0),l+(null!=s?s:0),null!=h?h:i,null!=o?o:r);var v=this.Xa;return this.Za+='<g transform="translate('.concat(f*v,",").concat(l*v,')">').concat(e,"</g>"),!0}return!1},n.prototype.has=function(t){return t in this.Ja},Object.defineProperty(n.prototype,"mappings",{get:function(){return this.build()},enumerable:!1,configurable:!0}),n.prototype.build=function(n){var i,r,e=this.$a;if(null==e||(null==n?void 0:n.force)){var u=null!==(i=null==n?void 0:n.resolution)&&void 0!==i?i:this._e,s=this.At,h=Math.pow(2,Math.ceil(Math.log(this.Qa+this.rr)/Math.LN2)),o=s*u,a=h*u,c=this.Xa,f='width="'.concat(o,'"'),l='height="'.concat(a,'"'),v='viewBox="0 0 '.concat(s*c," ").concat(h*c,'"'),b=_b("<svg ".concat(f," ").concat(l," ").concat(v," ").concat('xmlns="http://www.w3.org/2000/svg"',">").concat(this.Za,"</svg>")),d=null!==(r=null==n?void 0:n.scaling)&&void 0!==r?r:this.Ka,g=t.BaseTexture.from(b,{resolution:u,scaleMode:d,mipmap:this.Ya}),m=this.Ja;for(var w in e=this.$a={},m)e[w]=new t.Texture(g,m[w])}return e},n}(),fd={TEXT:0,DATA_URL:1,BINARY_STRING:2,ARRAY_BUTTER:3,FILE:4},ld=function(){function t(t,n){this.Oo=null,this.tc=t,this.nc=n}return t.prototype.open=function(){var t=this.getOrCreateInput();null!=t?t.click():this.onCancel()},t.prototype.getOrCreateInput=function(){var t=this;if("FileReader"in window&&null==this.Oo){var n=document.createElement("input");this.Oo=n,n.setAttribute("type","file"),n.setAttribute("style","display:none"),n.addEventListener("change",(function(i){t.onInputChange(n),n.value="",i.stopImmediatePropagation(),i.preventDefault()})),document.body.appendChild(n)}return this.Oo},t.prototype.onInputChange=function(t){var n=this,i=t.files;if(null!=i&&0<i.length){var r=i[0];if(this.tc===fd.FILE)this.onOpen(r,r);else{var e=new FileReader;switch(e.onload=function(t){if(null!=t.target){var i=t.target;n.onOpen(i.result,r)}},e.onabort=function(t){n.onAboart(t)},this.tc){case fd.TEXT:e.readAsText(r);break;case fd.DATA_URL:e.readAsDataURL(r);break;case fd.BINARY_STRING:e.readAsBinaryString(r);break;case fd.ARRAY_BUTTER:e.readAsArrayBuffer(r);break;default:e.readAsText(r)}}}else this.onCancel()},t.prototype.onOpen=function(t,n){var i=this.nc;i.emit("open",t,n,i)},t.prototype.onAboart=function(t){var n=this.nc;n.emit("abort",t,n)},t.prototype.onCancel=function(){var t=this.nc;t.emit("cancel",t)},t}(),vd=function(){function t(){}return t.fromRgb=function(t){var n=(16711680&t)>>16,i=(65280&t)>>8,r=255&t|0,e=Math.max(n,i,r),u=e-Math.min(n,i,r),s=0;return 0<u&&(n===e?s=60*(i-r)/u:i===e?s=60*(r-n)/u+120:r===e&&(s=60*(n-i)/u+240),s<0&&(s+=360)),[s,u/e*255,e]},t.toRgb=function(t,n,i){var r=i-n/255*i,e=i-r,u=0,s=0,h=0;return t<=60?(u=i,s=t/60*e+r,h=r):t<=120?(u=(120-t)/60*e+r,s=i,h=r):t<=180?(u=r,s=i,h=(t-120)/60*e+r):t<=240?(u=r,s=(240-t)/60*e+r,h=i):t<=300?(u=(t-240)/60*e+r,s=r,h=i):(u=i,s=r,h=(360-t)/60*e+r),(u=Math.max(0,Math.min(255,u)))<<16|(s=Math.max(0,Math.min(255,s)))<<8|Math.max(0,Math.min(255,h))},t}(),bd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.onElementAttached=function(n,i,r){n.addEventListener("keydown",this.$s),t.prototype.onElementAttached.call(this,n,i,r)},n.prototype.onElementDetached=function(n,i,r){n.removeEventListener("keydown",this.$s),t.prototype.onElementDetached.call(this,n,i,r)},n.prototype.onInputKeyDown=function(t){Qe.isOkKey(t)&&this.Bs.onEnter()},n}(cs),dd=function(){function t(){}return t.create=function(t){var n=this.Kt;return t in n?"".concat(t," ").concat(++n[t]):(n[t]=1,"".concat(t," 1"))},t.Kt={},t}(),gd=function(){function t(){}return t.toCode=function(t,n){var i=t>>8&255,r=255&t;return"rgba(".concat(t>>16&255,",").concat(i,",").concat(r,",").concat(n,")")},t}(),md=function(){function t(t,n,i){var r=this;this.ic=new Set,this.Nt=t,this.rc=n,this.J=i,this.ec=null,this.Is=function(){r.update()}}return t.prototype.start=function(){return null==this.ec&&(this.ec=window.setTimeout(this.Is,this.rc)),this},t.prototype.stop=function(){var t=this.ec;return null!=t&&(this.ec=null,clearTimeout(t)),this},t.prototype.add=function(t){return this.ic.add(t),t.state.set(this.Nt,this.isOn(Date.now())),this},t.prototype.remove=function(t){return!!this.ic.delete(t)&&(t.state.remove(this.Nt),!0)},t.prototype.contains=function(t){return this.ic.has(t)},t.prototype.clear=function(){return this.ic.clear(),this},t.prototype.isOn=function(t){return Math.floor(t/this.J)%2==0},t.prototype.update=function(){var t=Date.now(),n=this.isOn(t),i=this.Nt;this.ic.forEach((function(t){t.state.set(i,n)}));var r=this.J;return this.ec=window.setTimeout(this.Is,r-t%r),this},t}(),wd=function(){function t(t){var n;this.Fr=null!==(n=null==t?void 0:t.duration)&&void 0!==n?n:300,this.Dr=null,this.uc=0,this.sc=null}return t.prototype.show=function(t,n){var i=this,r=this.sc;null!=r&&clearTimeout(r);var e=this.Dr;if(t!==e){var u=this.Fr,s=this.uc,h=Date.now(),o=s+u-h;!0===n||o<=0?this.update(h,t):this.sc=window.setTimeout((function(){i.update(Date.now(),t)}),o)}},t.prototype.update=function(t,n){var i=this.Dr;i!==n&&(this.uc=t,null!=i&&i.hide(),this.Dr=n,null!=n&&n.show())},t.prototype.hide=function(){this.show(null)},t}(),Od=function(){function t(){this.hc=null,this.oc=0,this.Uh=null,this.ac=null}return t.prototype.getNames=function(){var t=this.cc;return null==t&&(t="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DOMMouseScroll","MozMousePixelScroll"],this.cc=t),t},t.prototype.on=function(t,n,i){void 0===i&&(i=!1);for(var r=this.getNames(),e=r.length-1;0<=e;--e){var u=r[e];t.addEventListener(u,n,i)}},t.prototype.off=function(t,n,i){void 0===i&&(i=!1);for(var r=this.getNames(),e=r.length-1;0<=e;--e){var u=r[e];t.removeEventListener(u,n,i)}},t.prototype.getLineHeight=function(){if(null==this.Uh){var t=it.getInstance().get("DBase");this.Uh=t.getLineHeight()}return this.Uh},t.prototype.getPageHeight=function(){return null==this.ac&&(this.ac=12*this.getLineHeight()),this.ac},t.prototype.normalize=function(t){var n=0,i=0;if("detail"in t&&(i=-1*t.detail),"wheelDelta"in t&&(i=t.wheelDelta),"wheelDeltaY"in t&&(i=t.wheelDeltaY),"wheelDeltaX"in t&&(n=-1*t.wheelDeltaX),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(n=-1*i,i=0),"deltaY"in t&&(i=-1*t.deltaY),"deltaX"in t&&(n=t.deltaX),0===i&&0===n)return null;var r=Math.max(Math.abs(i),Math.abs(n)),e=Date.now();this.oc+200<=e&&(this.hc=null),this.oc=e;var u="mousewheel"===t.type&&r%120==0;(!this.hc||r<this.hc)&&(this.hc=r,u&&(this.hc/=40)),u&&(r/=40,n/=40,i/=40);var s=this.hc;r=Math.floor(r/s),n=Math[1<=n?"floor":"ceil"](n/s),i=Math[1<=i?"floor":"ceil"](i/s);var h=t.deltaMode||0;if(0!==h){var o=1===h?this.getLineHeight():this.getPageHeight();r*=o,n*=o,i*=o}return{mode:h,delta:r,deltaX:n,deltaY:i,lowest:s}},t.getInstance=function(){return null==this.INSTANCE&&(this.INSTANCE=new t),this.INSTANCE},t}(),pd=function(t){function n(n){var i,r=t.call(this)||this;return r.Pr=null!==(i=null==n?void 0:n.target)&&void 0!==i?i:null,r.Hr=!1,r.Nu=!1,r.zr=null==n?void 0:n.onTime,r.Wr=null==n?void 0:n.onStart,r.Xr=null==n?void 0:n.onEnd,r}return G(n,t),Object.defineProperty(n.prototype,"target",{get:function(){return this.Pr},set:function(t){this.Pr=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),n.prototype.start=function(t){void 0===t&&(t=!1),this.stop(),this.Nu=!0,this.Hr=t,this.onStart(t),this.Nu&&(this.onTime(t?1:0,t,0),this.Nu&&(this.onTime(t?0:1,t,0),this.Nu||this.onEnd(t)))},n.prototype.onStart=function(t){var n=this.Wr;null!=n&&n(t,this),this.emit("start",t,this)},n.prototype.onTime=function(t,n,i){var r=this.zr;null!=r&&r(t,n,i,this),this.emit("time",t,n,i,this)},n.prototype.onEnd=function(t){var n=this.Xr;null!=n&&n(t,this),this.emit("end",t,this)},n.prototype.isStarted=function(){return this.Nu},n.prototype.isReverse=function(){return this.Hr},n.prototype.stop=function(){this.Nu=!1},n.prototype.end=function(){if(this.Nu){this.Nu=!1;var t=this.Hr,n=t?0:1;this.onTime(n,t,0),this.onEnd(t)}},n}(t.utils.EventEmitter),Dd=function(t){function n(n){var i,r,e=t.call(this,n)||this;e.fc=0,e.lc=0,e.vc=0,e.bc=0,e.dc=null,e.cs=null;var u=null==n?void 0:n.shift;return e.gc=null!==(i=null==u?void 0:u.x)&&void 0!==i?i:0,e.mc=null!==(r=null==u?void 0:u.y)&&void 0!==r?r:15,e.bh=function(){e.onPrerender()},e.wc=function(){e.onPostrender()},e}return G(n,t),n.prototype.stop=function(){this.bc=0,this.removeEventListeners(),t.prototype.stop.call(this)},n.prototype.addEventListeners=function(t){var n=lt.getLayer(t);if(n){this.cs=n;var i=n.renderer;i.on("prerender",this.bh),i.on("postrender",this.wc)}},n.prototype.removeEventListeners=function(){var t=this.cs;if(t){this.cs=null;var n=t.renderer;n.off("prerender",this.bh),n.off("postrender",this.wc)}},n.prototype.onStart=function(n){var i=this.dc=this.Pr;null!=i&&(this.bc=0,this.removeEventListeners(),this.addEventListeners(i),n||(i.visible=!0),t.prototype.onStart.call(this,n))},n.prototype.onTime=function(n,i,r){if(null!=this.dc){var e=this.cs;e?(this.bc=n,t.prototype.onTime.call(this,n,i,r),e.update()):(this.bc=n,t.prototype.onTime.call(this,n,i,r))}},n.prototype.onEnd=function(n){var i=this.dc;null!=i&&(this.removeEventListeners(),n&&(i.visible=!1),t.prototype.onEnd.call(this,n))},n.prototype.onPrerender=function(){var t=this.dc;if(null!=t){var n=this.bc,i=t.unsafe.position;this.fc=i.x,this.lc=i.y,i.set(i.x-this.gc*(1-n),i.y-this.mc*(1-n)),this.vc=t.alpha,t.alpha=n}},n.prototype.onPostrender=function(){var t=this.dc;null!=t&&(t.unsafe.position.set(this.fc,this.lc),t.alpha=this.vc)},n}(ce),Ed=function(){function t(t){var n,i,r,e;jt(t)?(this.top=t,this.right=t,this.bottom=t,this.left=t):null!=t?(this.top=null!==(n=t.top)&&void 0!==n?n:6,this.right=null!==(i=t.right)&&void 0!==i?i:6,this.bottom=null!==(r=t.bottom)&&void 0!==r?r:6,this.left=null!==(e=t.left)&&void 0!==e?e:6):(this.top=6,this.right=6,this.bottom=6,this.left=6)}return t.prototype.getTheme=function(){throw new Error("Not supported")},t.prototype.setTheme=function(t){throw new Error("Not supported")},t.prototype.getTop=function(){return this.left},t.prototype.getRight=function(){return this.right},t.prototype.getBottom=function(){return this.bottom},t.prototype.getLeft=function(){return this.left},t.prototype.set=function(t,n,i,r){null==n?(this.top=t,this.right=t,this.bottom=t,this.left=t):null==i?(this.top=t,this.right=n,this.bottom=t,this.left=n):null==r?(this.top=t,this.right=n,this.bottom=i,this.left=n):(this.top=t,this.right=n,this.bottom=i,this.left=r)},t}(),Md=function(){function t(t){var n,i=t.root;this.Oc=i,this.mh=t.overlay,this.au=new Ed(null==t?void 0:t.padding);var r=100,e=100;if(t)if(null!=t.width)r=t.width,e=null!=t.height?t.height:i.getBoundingClientRect().height;else if(null!=t.height)r=i.getBoundingClientRect().width,e=t.height;else{var u;r=(u=i.getBoundingClientRect()).width,e=u.height}else r=(u=i.getBoundingClientRect()).width,e=u.height;this.Dc=null!=t.width,this.Ec=null!=t.height;var s=null==t?void 0:t.background,h=0,o=!0;if(null!=s){var a=s.color;null!=a&&(h=a,o=!1)}var c=t.resolution,f=null!==(n=null==t?void 0:t.antialias)&&void 0!==n&&n;this.Mc={width:r,height:e,autoStart:!1,backgroundColor:h,transparent:o,resolution:c,antialias:f}}return t.prototype.getRootElement=function(){return this.Oc},t.prototype.setRootElement=function(t,n){if(this.Oc!==t&&(this.Oc=t,!1!==n)){var i=t.getBoundingClientRect(),r=this.Mc;r.width=i.width,r.height=i.height}return this},t.prototype.getWidth=function(){return this.Mc.width},t.prototype.setWidth=function(t){return this.Mc.width=t,this},t.prototype.isWidthFixed=function(){return this.Dc},t.prototype.setWidthFixed=function(t){return this.Dc=t,this},t.prototype.getHeight=function(){return this.Mc.height},t.prototype.setHeight=function(t){return this.Mc.height=t,this},t.prototype.isHeightFixed=function(){return this.Ec},t.prototype.setHeightFixed=function(t){return this.Ec=t,this},t.prototype.getPadding=function(){return this.au},t.prototype.setPadding=function(t,n,i,r){var e=this.au;return e.left=t,e.top=n,e.right=i,e.bottom=r,this},t.prototype.getBackgroundColor=function(){return this.Mc.backgroundColor},t.prototype.setBackgroundColor=function(t){return this.Mc.backgroundColor=t,this},t.prototype.getAntialias=function(){return this.Mc.antialias},t.prototype.setAntialias=function(t){return this.Mc.antialias=t,this},t.prototype.isOverlay=function(){return this.mh},t.prototype.getPixiApplicationOptions=function(){return this.Mc},t}(),Sd=function(){function t(){}return t.prototype.isStorable=function(){return!0},t.prototype.isClear=function(){return!1},t.prototype.isClean=function(){return!1},t.prototype.execute=function(){return!0},t.prototype.merge=function(t){return!1},t.prototype.isMerged=function(){return!1},t.prototype.redo=function(){return!0},t.prototype.undo=function(){return!0},t.prototype.destroy=function(){},t}(),jd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.isStorable=function(){return!1},n.prototype.isClear=function(){return!0},n}(Sd),Td=function(t){function n(){var n=t.call(this)||this;return n.B=0,n.Sc=[],n}return G(n,t),n.prototype.last=function(){var t=this.Sc,n=t.length;return 0<n?t[n-1]:null},n.prototype.push=function(t){this.merge(t),this.execute(t)},n.prototype.merge=function(t){var n=this.Sc,i=t.isClear(),r=t.isStorable();if(i||r){var e=i?n.length:this.B;0<e&&(this.remove(e),this.B=0,this.emit("change",this)),this.cleanup()}var u=n.length;0<u&&t.merge(n[u-1])},n.prototype.execute=function(t){return this.emit("executing",t,this),t.execute()?this.onSuccess(t):this.onFail(t)},n.prototype.onSuccess=function(t){t.isStorable()&&(t.isMerged()||this.Sc.push(t),t.isClean()||this.emit("dirty",this)),this.emit("change",this),this.emit("executed",t,this)},n.prototype.onFail=function(t){t.destroy(),this.emit("change",this)},n.prototype.cleanup=function(){var t=this.Sc,n=t.length-100;if(0<n)for(var i=0;i<n;++i)t[i].destroy(),t.shift()},n.prototype.remove=function(t){var n=this.Sc;if(0<t){var i=Math.max(0,n.length-t);if(0<(t=n.length-i)){for(var r=i,e=n.length;r<e;++r)n[r].destroy();return n.splice(i,n.length-i),!0}}return!1},n.prototype.size=function(){return this.Sc.length},n.prototype.clear=function(){this.push(new jd)},n.prototype.redo=function(){this.isRedoable()&&this.doRedo()},n.prototype.doRedo=function(){var t=this.Sc;if(0<this.B){var n=t[t.length-this.B];this.B-=1,this.emit("change",this),this.emit("redoing",n,this),!0===n.redo()?this.onRedoSuccess(n):this.onRedoFail(n)}},n.prototype.onRedoSuccess=function(t){t.isClean()||this.emit("dirty",this),this.emit("change",this),this.emit("redoed",t,this)},n.prototype.onRedoFail=function(t){this.emit("change",this)},n.prototype.isRedoable=function(){return 0<this.B},n.prototype.undo=function(){this.isUndoable()&&this.doUndo()},n.prototype.doUndo=function(){var t=this.Sc;if(this.B<t.length){var n=t[t.length-1-this.B];this.B+=1,this.emit("change",this),this.emit("undoing",n,this),!0===n.undo()?this.onUndoSuccess(n):this.onUndoFail(n)}},n.prototype.onUndoSuccess=function(t){t.isClean()||this.emit("dirty",this),this.emit("change",this),this.emit("undoed",t,this)},n.prototype.onUndoFail=function(t){this.emit("change",this)},n.prototype.isUndoable=function(){return this.B<this.Sc.length},n}(t.utils.EventEmitter),Id=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.init=function(t,n,i){var r=this;t.addEventListener("keydown",(function(t){r.emit("keydown",t);var e=i.get();if(null!=e)for(var u=e;null!=u;){if(r.hasOnKeyDown(u)&&u.onKeyDown(t))return;u=u.parent}if(Qe.isFocusKey(t)){var s=Qe.getFocusDirection(t),h=null!=e?i.find(e,!1,e.state.isFocusRoot||s,s):i.find(n,!1,!0,s);null!=h&&(i.focus(h),t.preventDefault(),t.stopImmediatePropagation())}})),t.addEventListener("keyup",(function(t){r.emit("keyup",t);var n=i.get();if(null!=n)for(var e=n;null!=e;){if(r.hasOnKeyUp(e)&&e.onKeyUp(t))return;e=e.parent}}))},n.prototype.hasOnKeyDown=function(t){return"onKeyDown"in t},n.prototype.hasOnKeyUp=function(t){return"onKeyUp"in t},n}(t.utils.EventEmitter),Cd=function(){function t(){}return t.getKeyboardController=function(){return null==this.KEYBOARD&&(this.KEYBOARD=new Id),this.KEYBOARD},t.setKeyboardController=function(t){var n=this.KEYBOARD;return this.KEYBOARD=t,n},t.getCommandController=function(){return null==this.COMMAND&&(this.COMMAND=new Td),this.COMMAND},t.setCommandController=function(t){var n=this.COMMAND;return this.COMMAND=t,n},t.getDocumentController=function(){if(null==this.DOCUMENT)throw new Error("Not supported");return this.DOCUMENT},t.setDocumentController=function(t){var n=this.DOCUMENT;return this.DOCUMENT=t,n},t}(),Nd=function(n){function i(t,i){var r=n.call(this,i.getPixiApplicationOptions())||this;return r.jc=null,r.Tc=null,r.tu=i,r.ut=!1,r.Zh=!0,r.Ic=i.isOverlay(),r.au=i.getPadding(),r.Cc=i.getRootElement(),r.Nc=5,r.Ac=r.newElementContainer(),r.application=t,r.Rc=function(){null!=r.jc&&r.render()},r.initStage(),r.initView(),r.initRootElement(),r.initFocusHandling(),r.initResizeHandling(),r.initWheelHandling(),r.initDoubleClickHandling(),r}return G(i,n),i.prototype.newElementContainer=function(){var t=document.createElement("div");return t.setAttribute("style","position: absolute; top: 0; left: 0; width: 0; height: 0;margin: 0; padding: 0; outline: none;"),t},i.prototype.initStage=function(){var t=this.stage;t.layer=this,t.application=this.application,t.interactive=!0},i.prototype.initView=function(){var t=this.view.style;t.position="absolute",t.top="0",t.left="0",t.width="100%",t.height="100%",t.display="block",t.outline="none",t.webkitTapHighlightColor="rgba(255,255,255,0)",t.webkitUserSelect="none",t.setProperty("-khtml-user-select","none"),t.setProperty("-moz-user-select","none"),t.setProperty("-ms-user-select","none"),t.userSelect="none"},i.prototype.initRootElement=function(){var t=this,n=this.view,i=this.Ic,r=this.Cc,e=this.Ac,u=i?2:0,s=r.children;if(u<s.length){var h=s[u];r.insertBefore(n,h),r.insertBefore(e,h)}else r.appendChild(n),r.appendChild(e);if(i){var o=this.stage,a=o.onChildrenChange;o.onChildrenChange=function(){t.onStageDirty(),a.call(o)}}var c=r.style;r!==document.body&&"static"===window.getComputedStyle(r).position&&(c.position="relative"),c.margin="0",c.padding="0",c.overflow="hidden"},i.prototype.initFocusHandling=function(){var t=this.view,n=this.stage,i=this.getFocusController();t.setAttribute("tabindex","0"),Cd.getKeyboardController().init(t,n,i),this.renderer.plugins.interaction.on(he.down,(function(t){null!=t.target&&t.target!==n||i.clear()}))},i.prototype.initResizeHandling=function(){var t=this,n=this.tu,i=n.isWidthFixed(),r=n.isHeightFixed();if(!i||!r){var e=function(){t.onResize()};null!=window.ResizeObserver?new ResizeObserver(e).observe(this.Cc):(window.addEventListener("resize",e),window.addEventListener("orientationchange",e))}},i.prototype.onResize=function(){var t=this.tu,n=this.Cc.getClientRects();if(!(n.length<=0)){var i=n[0],r=t.isWidthFixed()?t.getWidth():i.width,e=t.isHeightFixed()?t.getHeight():i.height;this.renderer.resize(r,e);var u=this.ut;this.ut=!0;for(var s=this.au,h=this.stage.children,o=0,a=h.length;o<a;++o){var c=h[o];c instanceof ru&&c.onParentResize(r,e,s)}this.ut=u,this.ut||null!=this.jc||this.render()}},i.prototype.initWheelHandling=function(){var n=new t.Point,i=Od.getInstance(),r=this.renderer.plugins.interaction;i.on(this.view,(function(t){var e=t;he.toGlobal(e,r,n);var u,s=r.hitTest(n),h=i.normalize(t);if(null!=h)for(;null!=s;){if(null!=(u=s)&&null!=u.onWheel&&s.onWheel(e,h,n)){e.preventDefault();break}s=s.parent}}))},i.prototype.initDoubleClickHandling=function(){var t=this.getFocusController(),n=this.renderer.plugins.interaction;he.onDblClick(this.view,(function(i){var r,e=t.get();if(null!=e)for(var u=e;null!=u&&(null==(r=u)||null==r.onDblClick||!u.onDblClick(i,n));)u=u.parent}))},i.prototype.lock=function(){this.ut=!0},i.prototype.unlock=function(){this.ut=!1},i.prototype.update=function(){this.ut||null!=this.jc||(this.jc=requestAnimationFrame(this.Rc))},i.prototype.onStageDirty=function(){this.Ic&&(0<this.stage.children.length?this.Zh||(this.Zh=!0,this.view.style.display="block"):this.Zh&&(this.Zh=!1,this.view.style.display="none"))},i.prototype.render=function(){this.reflow(),this.jc=null,n.prototype.render.call(this)},Object.defineProperty(i.prototype,"width",{get:function(){return this.screen.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.screen.height},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){return this.au},enumerable:!1,configurable:!0}),i.prototype.reflow=function(){for(var t=this.stage.children,n=0,i=this.Nc;n<i;++n){for(var r=!1,e=0,u=t.length;e<u;++e){var s=t[e];s instanceof ru&&(s.reflow(),r=r||s.isDirty()||s.hasDirty()||s.isHierarchyDirty())}if(!r)break}},i.prototype.getFocusController=function(){return this.application.getFocusController()},i.prototype.getRootElement=function(){return this.Cc},i.prototype.getElementContainer=function(){return this.Ac},i.prototype.getDynamicFontAtlases=function(){return null==this.Tc&&(this.Tc=new rd(this)),this.Tc},i}(t.Application),Ad=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.wh=null,n}return G(n,t),n.prototype.focus=function(t){var n=this.wh;return n!==t?(null!=n&&(n.state.isFocused=!1),this.wh=t,this.isFocusable(t)&&(t.state.isFocused=!0),this.emit("change",t,n,this),n):null},n.prototype.blur=function(t){return null!=t&&this.wh===t?(this.wh=null,t.state.isFocused=!1,this.emit("change",null,t,this),t):null},n.prototype.clear=function(){return this.focus(null)},n.prototype.set=function(t,n){return n?this.focus(t):this.blur(t)},n.prototype.get=function(){return this.wh},n.prototype.findParent=function(t){for(var n=t;null!=n;){if(this.isFocusable(n))return n;n=n.parent}return null},n.prototype.find=function(t,n,i,r,e){if(r){if(null!=(o=this.findNext(t,n,i)))return o;if(this.isFocusRoot(t,e))return null;var u=t.parent;if(null!=u&&0<=(c=(a=u.children).indexOf(t))){var s=a.length;if(this.isFocusReverse(u)){for(var h=c-1;0<=h;--h)if(null!=(l=this.findNext(a[h],!0,!0)))return l;if(!this.isFocusRoot(u,e)&&null!=(l=this.find(u,!1,!1,!0,e)))return l;for(h=s-1;c<=h;--h)if(null!=(l=this.findNext(a[h],!0,!0)))return l}else{for(h=c+1;h<s;++h)if(null!=(l=this.findNext(a[h],!0,!0)))return l;if(!this.isFocusRoot(u,e)&&null!=(l=this.find(u,!1,!1,!0,e)))return l;for(h=0;h<=c;++h)if(null!=(l=this.findNext(a[h],!0,!0)))return l}}}else{var o;if(null!=(o=this.findPrevious(t,n,i)))return o;var a,c,f=t.parent;if(null!=f&&0<=(c=(a=f.children).indexOf(t)))if(s=a.length,this.isFocusReverse(f)){for(h=c+1;h<s;++h)if(null!=(l=this.findPrevious(a[h],!0,!0)))return l;if(!this.isFocusRoot(f,e)&&null!=(l=this.find(f,!0,!1,!1,e)))return l;for(h=0;h<=c;++h)if(null!=(l=this.findPrevious(a[h],!0,!0)))return l}else{for(h=c-1;0<=h;--h)if(null!=(l=this.findPrevious(a[h],!0,!0)))return l;if(!this.isFocusRoot(f,e)&&null!=(l=this.find(f,!0,!1,!1,e)))return l;for(h=s-1;c<=h;--h){var l;if(null!=(l=this.findPrevious(a[h],!0,!0)))return l}}}return null},n.prototype.findNext=function(t,n,i){if(n&&this.isFocusable(t))return t;if(i&&this.isFocusableContainer(t)&&t.visible){var r=t.children,e=r.length;if(this.isFocusReverse(t)){for(var u=e-1;0<=u;--u)if(null!=(s=this.findNext(r[u],!0,!0)))return s}else for(u=0;u<e;++u){var s;if(null!=(s=this.findNext(r[u],!0,!0)))return s}}return null},n.prototype.findPrevious=function(t,n,i){if(i&&this.isFocusableContainer(t)&&t.visible){var r=t.children,e=r.length;if(this.isFocusReverse(t)){for(var u=0;u<e;++u)if(null!=(s=this.findPrevious(r[u],!0,!0)))return s}else for(u=e-1;0<=u;--u){var s;if(null!=(s=this.findPrevious(r[u],!0,!0)))return s}}return n&&this.isFocusable(t)?t:null},n.prototype.isFocusable=function(t){return null!=t&&"state"in t&&t.state.inEnabled&&t.state.isFocusable&&t.visible},n.prototype.isFocusableContainer=function(t){return null!=t&&"children"in t},n.prototype.isFocusRoot=function(t,n){return t===n||null!=t&&"state"in t&&t.state.isFocusRoot&&t.visible},n.prototype.isFocusReverse=function(t){return null!=t&&"state"in t&&t.state.isFocusReverse},n}(t.utils.EventEmitter),Rd=function(){function n(n){var i,r;lt.add(this);var e=this.toRootElement(n);this.Oc=e,this.initFocusHandling(e);var u=null!==(r=null!==(i=null==n?void 0:n.resolution)&&void 0!==i?i:window.devicePixelRatio)&&void 0!==r?r:1;this._e=u,delete t.Renderer.__plugins.accessibility,this.tu=n;var s=this.newLayerBase(n);this.Bn=s,this.yc=!!(null==n?void 0:n.overlay),this.yc||(this.mh=s)}return Object.defineProperty(n.prototype,"stage",{get:function(){return this.Bn.stage},enumerable:!1,configurable:!0}),n.prototype.getRootElement=function(){return this.Oc},n.prototype.getResolution=function(){return this._e},n.prototype.toRootElement=function(t){var n=null==t?void 0:t.root;if(null!=n){if(!Tt(n))return n;var i=document.querySelector(n);if(i)return i}return document.body},n.prototype.toLayerBaseOptions=function(t){var n=this.Oc,i=this._e;return new Md(t?{root:n,padding:t.padding,width:t.width,height:t.height,background:t.background,resolution:i,antialias:t.antialias,overlay:!1}:{root:n,resolution:i,overlay:!1})},n.prototype.getFocusController=function(){return null==this.kc&&(this.kc=new Ad),this.kc},n.prototype.initFocusHandling=function(t){var n=this,i=!1,r=function(){i||n.getFocusController().clear()};t.addEventListener("focus",(function(){i=!0}),!0),t.addEventListener("blur",(function(){i=!1,setTimeout(r,0)}),!0)},n.prototype.newLayerBase=function(t){return new Nd(this,this.toLayerBaseOptions(t))},n.prototype.getLayerBase=function(){return this.Bn},n.prototype.toLayerOverlayOptions=function(t){var n=this.Oc,i=this._e;return new Md(t?{root:n,padding:t.padding,width:t.width,height:t.height,background:{color:null},resolution:i,antialias:t.antialias,overlay:!0}:{root:n,resolution:i,overlay:!0})},n.prototype.newLayerOverlay=function(t){return new Nd(this,this.toLayerOverlayOptions(t))},n.prototype.getLayerOverlay=function(){return this.yc?(null==this.mh&&(this.mh=this.newLayerOverlay(this.tu)),this.mh):this.Bn},n.prototype.update=function(){if(!this.yc)return this.Bn.update();this.Bn.update();var t=this.mh;t&&t.update()},n.prototype.render=function(){if(!this.yc)return this.Bn.render();this.Bn.render();var t=this.mh;t&&t.render()},n}(),yd=function(t){function n(n,i,r){var e=t.call(this,n,i,r)||this;return e.Lc=0,e.xc=0,e.Bc=0,e._c=0,e}return G(n,t),n.prototype.getLeft=function(){return t.prototype.getLeft.call(this)+this._c},n.prototype.adjLeft=function(t){if(this._c!==t){this._c=t;var n=this.Ie;n&&n()}},n.prototype.getTop=function(){return t.prototype.getTop.call(this)+this.Lc},n.prototype.adjTop=function(t){if(this.Lc!==t){this.Lc=t;var n=this.Ie;n&&n()}},n.prototype.getRight=function(){return t.prototype.getRight.call(this)+this.xc},n.prototype.adjRight=function(t){if(this.xc!==t){this.xc=t;var n=this.Ie;n&&n()}},n.prototype.getBottom=function(){return t.prototype.getBottom.call(this)+this.Bc},n.prototype.adjBottom=function(t){if(this.Bc!==t){this.Bc=t;var n=this.Ie;n&&n()}},n}(ke),kd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DBoard"},n}(ru),Ld=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DButtonCheck"},n}(yh),xd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DButtonCheckRight"},n}(Ld),Bd=function(){function t(t,n,i,r,e){this.p=t,this.S=n,this.B=i,this.Ie=e,this.Pc=r}return t.prototype.set=function(t,n,i,r){this.p===t&&this.S===n&&this.B===i&&this.Pc===r||(this.p=t,this.S=n,this.B=i,this.Pc=r,this.Ie(this))},Object.defineProperty(t.prototype,"color",{get:function(){return this.p},set:function(t){this.p!==t&&(this.p=t,this.Ie(this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.S},set:function(t){this.S!==t&&(this.S=t,this.Ie(this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.B},set:function(t){this.B!==t&&(this.B=t,this.Ie(this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this.Pc},set:function(t){this.Pc!==t&&(this.Pc=t,this.Ie(this))},enumerable:!1,configurable:!0}),t.prototype.toObject=function(){return{color:this.p,alpha:this.S,position:this.B}},t}(),_d=function(t,n){return t.position-n.position},Pd=function(n){function i(){var t=n.call(this)||this,i=function(n){t.onChange(n)};t.Uc=i;var r=new Bd(16777215,1,0,!1,i),e=new Bd(8421504,1,1,!0,i);return t.Mt=[r,e],t.rn=-90,t.Pc=e,t.Fc=[0,0,0],t}return G(i,n),i.prototype.onChange=function(t){var n=t.selected&&this.Pc!==t;if(n){var i=this.Pc;null!=i&&(i.Pc=!1),this.Pc=t}this.Mt.sort(_d),n&&this.emit("selectionchange",this.Pc,this),this.emit("change",this)},Object.defineProperty(i.prototype,"points",{get:function(){return this.Mt},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"direction",{get:function(){return this.rn},set:function(t){this.rn!==t&&(this.rn=t,this.emit("directionchange",t,this),this.emit("change",this))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this.Pc},enumerable:!1,configurable:!0}),i.prototype.size=function(){return this.Mt.length},i.prototype.get=function(t){var n=this.Mt;return 0<=t&&t<n.length?n[t]:null},i.prototype.addAt=function(n){for(var i=this.Mt,r=null,e=0,u=i.length;e<u;++e){var s=i[e];if(n<=s.position){if(null==r)return this.add(s.color,s.alpha,n,!0);var h=s.position-r.position;if(.001<h){var o=t.utils.hex2rgb(s.color,this.Fc),a=o[0],c=o[1],f=o[2],l=t.utils.hex2rgb(r.color,this.Fc),v=l[0],b=l[1],d=l[2],g=(n-r.position)/h,m=a*g+v*(1-g),w=c*g+b*(1-g),O=f*g+d*(1-g),p=this.Fc;p[0]=m,p[1]=w,p[2]=O;var D=t.utils.rgb2hex(p),E=s.alpha*g+r.alpha*(1-g);return this.add(D,E,n,!0)}}r=s}return null!=r?this.add(r.color,r.alpha,n,!0):this.add(16777215,1,n,!0)},i.prototype.add=function(t,n,i,r){var e=this.Uc,u=new Bd(t,n,i,r,e);return this.Mt.push(u),e(u),u},i.prototype.remove=function(t){var n=this.Mt;if(2<n.length)for(var i=0,r=n.length;i<r;++i)if(n[i]===t){n.splice(i,1);var e=this.Pc===t;return e&&(this.Pc=i+1<r?n[i]:n[i-1]),e&&this.emit("selectionchange",this.Pc,this),this.emit("change",this),!0}return!1},i.prototype.reset=function(){var t=this.rn;this.rn=-90;var n=this.Mt,i=this.Pc,r=i?n.indexOf(i):-1;n.length=0;var e=this.Uc;if(n.push(new Bd(16777215,0,0,!1,e)),n.push(new Bd(16777215,0,1,!1,e)),0<=r&&r<n.length)(u=n[r]).Pc=!0,this.Pc=u;else if(0<n.length){var u;(u=n[n.length-1]).Pc=!0,this.Pc=u}else this.Pc=null;return i!==this.Pc&&this.emit("selectionchange",this.Pc,this),t!==this.rn&&this.emit("directionchange",this.rn,this),this.emit("change",this),this},i.prototype.toObject=function(){for(var t=[],n=this.Mt,i=0,r=n.length;i<r;++i)t.push(n[i].toObject());return{points:t,direction:this.rn}},i.prototype.fromObject=function(t){var n=this.rn;this.rn=t.direction;var i=this.Mt,r=this.Pc,e=r?i.indexOf(r):-1;i.length=0;for(var u=this.Uc,s=0,h=t.points.length;s<h;++s){var o=t.points[s],a=new Bd(o.color,o.alpha,o.position,!1,u);i.push(a)}return i.sort(_d),0<=e&&e<i.length?((a=i[e]).Pc=!0,this.Pc=a):0<i.length?((a=i[i.length-1]).Pc=!0,this.Pc=a):this.Pc=null,r!==this.Pc&&this.emit("selectionchange",this.Pc,this),n!==this.rn&&this.emit("directionchange",this.rn,this),this.emit("change",this),this},i}(t.utils.EventEmitter),Ud=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DInputLabel"},n}(bo),Fd=function(t){function n(n){var i=t.call(this,n)||this;i.addChild(i.fs=new Ud(null==n?void 0:n.label)),i.addChild(i.Oo=i.createInput(null==n?void 0:n.input));var r=null==n?void 0:n.space;return null!=r&&i.addChild(new Xs(r)),i}return G(n,t),Object.defineProperty(n.prototype,"input",{get:function(){return this.Oo},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"label",{get:function(){return this.fs},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DInputAndLabel"},n}(xh),Gd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.createInput=function(t){return new ro(t)},n}(Fd),Hd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.createInput=function(t){return new so(t)},n}(Fd),zd=function(){function t(t,n,i){this.Gc=t,this.Hc=n,this.zc=i}return Object.defineProperty(t.prototype,"color",{get:function(){return this.Gc.color},set:function(t){if(this.Gc.color!==t){var n=this.Hc;null!=n&&n(t)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.Gc.alpha},set:function(t){if(this.Gc.alpha!==t){var n=this.zc;null!=n&&n(t)}},enumerable:!1,configurable:!0}),t}(),Vd=function(){function t(t){this.mu=t,this.Vc=[]}return t.prototype.indexOf=function(t){return this.Vc.indexOf(t)},t.prototype.close=function(t){for(var n=this.Vc,i=Math.max(0,t),r=n.length-1;i<=r;--r)n[r].close()},t.prototype.add=function(t){this.Vc.push(t)},t.prototype.trim=function(t){this.close(this.indexOf(t)+1)},t.prototype.remove=function(t){var n=this.indexOf(t);0<=n&&(this.close(n+1),this.Vc.splice(n,1))},t}(),Wd=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return G(i,n),i.prototype.init=function(t){var i,r,e,u=this;n.prototype.init.call(this,t),this.bh=function(){u.onPrerender()},this.Rt=rr(null!==(i=null==t?void 0:t.align)&&void 0!==i?i:xs.BOTTOM,xs),this.Wc=null!==(r=null==t?void 0:t.fit)&&void 0!==r&&r,this.dh=null!==(e=null==t?void 0:t.sticky)&&void 0!==e&&e,this.Xc=!1,this.mu=null,this.Qu=null,this.visible=!1,Hs.apply(this,(function(){u.close()})),this.on("select",(function(){u.close()}));var s=null==t?void 0:t.items;s&&xv.newItems(this,s,this.dh),this.mh=new zs(t)},i.prototype.findItem=function(t){for(var n=this.children,i=0,r=n.length;i<r;++i){var e=n[i];if(e instanceof Av&&e.value===t)return e}return null},i.prototype.getType=function(){return"DMenu"},i.prototype.getContext=function(){return this.Qu},i.prototype.getCloseable=function(){return this},i.prototype.open=function(r,e,u){var s;if(this.isHidden()){var h=this.mh.pick(this,r);this.mu=r;for(var o=this.children,a=0,c=o.length;a<c;++a){var f=o[a];f instanceof ru&&f.state.removeAll(gt.FOCUSED,gt.HOVERED)}var l=h.renderer,v=this.bh;if(this.dh?l.on("prerender",v):l.once("prerender",v),this.Wc){var b=r.getBounds(!1,null!==(s=i.WORK_BOUNDS)&&void 0!==s?s:i.WORK_BOUNDS=new t.Rectangle);null!=b&&(this.width=b.width)}this.Xc=null!=u,u=u||new Vd(r),null!=e&&u.trim(e),u.add(this),this.Qu=u,h.stage.addChild(this),this.wh=h.getFocusController().get(),this.focus(),n.prototype.show.call(this),this.emit("open",this)}return this},i.prototype.onPrerender=function(){var n,r=this.mu;if(r){var e=r.getBounds(!1,null!==(n=i.WORK_BOUNDS)&&void 0!==n?n:i.WORK_BOUNDS=new t.Rectangle);if(e){this.Wc&&(this.width=e.width);var u=this.mh.picked;if(u){var s=this.theme;Bs.attach(this,e,s.getOffsetX(),s.getOffsetY(),u.width,u.height,this.Rt)}}}},i.prototype.close=function(){if(this.isShown()){var t=this.Qu;t&&t.remove(this);var i=this.mh.picked;i&&i.renderer.off("prerender",this.bh),this.mu=null;var r=this.wh;if(null!=r)if(this.wh=null,i){var e=lt.getLayer(r);null!=e&&i!==e&&e.view.focus(),i.getFocusController().focus(r)}else this.blur(!0);else this.blur(!0);n.prototype.hide.call(this);var u=this.parent;u&&u.removeChild(this),this.emit("close",this)}return this},i.prototype.onKeyDown=function(t){return Qe.moveFocusVertically(t,this,this.mh),this.state.isActionable&&(Qe.isArrowLeftKey(t)||Qe.isCancelKey(t))&&this.close(),n.prototype.onKeyDown.call(this,t)},i.prototype.containsGlobalPoint=function(t){return!this.Xc},i}(Js);xv.setMenuCreator((function(t){return new Wd(t)}));var Xd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.onMenuSelect=function(t,n,i){this.emit("select",t,n,this)},n.prototype.onMenuClose=function(t){if(t){var n=this.Kc;n&&t.off("select",n);var i=this.Yc;i&&t.off("close",i)}},n.prototype.toMenu=function(t,n){var i=null==n?void 0:n.menu;return i instanceof Wd?i:new Wd(this.toMenuOptions(t,i))},n.prototype.toMenuOptions=function(t,n){return n?(null==n.fit&&(n.fit=!0),n):{fit:!0}},Object.defineProperty(n.prototype,"menu",{get:function(){var t=this.Ma;return null==t&&(t=this.toMenu(this.theme,this.tu),this.Ma=t),t},set:function(t){var n=this.Ma;n!=t&&(this.Ma=t,this.onMenuReplaced(t,n))},enumerable:!1,configurable:!0}),n.prototype.onMenuReplaced=function(t,n){null!=n&&this.onMenuClose(n)},n.prototype.getType=function(){return"DDropdownBase"},n.prototype.onKeyDown=function(n){return Qe.isArrowDownKey(n)&&this.onKeyDownArrowDown(n),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyDownArrowDown=function(t){return!(!this.state.isActionable||!this.state.isFocused||(this.activate(t),0))},n.prototype.onActivate=function(n){t.prototype.onActivate.call(this,n),this.open()},n.prototype.open=function(){var t=this,n=this.menu;if(n.isHidden()){var i=this.Kc;null==i&&(i=function(n,i,r){t.onMenuSelect(n,i,r)},this.Kc=i);var r=this.Yc;null==r&&(r=function(){t.onMenuClose(t.Ma)}),n.on("select",i),n.on("close",r),n.open(this),this.emit("open",n,this)}},n.prototype.close=function(){this.menu.close()},n}(yh),Kd=function(t){function n(n){var i=t.call(this,n)||this;i.Pt=null;var r=null==n?void 0:n.value;return null!=r&&(i.value=r),i}return G(n,t),n.prototype.onMenuSelect=function(n,i,r){t.prototype.onMenuSelect.call(this,n,i,r);var e=this.Pt;e!==n&&(this.Pt=n,this.text=i,this.onValueChange(n,e,i))},n.prototype.onMenuReplaced=function(n,i){t.prototype.onMenuReplaced.call(this,n,i);var r=this.Pt,e=this.findMenuItem(n,r);null!=e?(this.Pt=r,this.text=e):(this.Pt=null,this.text=null)},n.prototype.onValueChange=function(t,n,i){this.emit("change",t,n,i,this)},n.prototype.findMenuItem=function(t,n){for(var i=t.children,r=0,e=i.length;r<e;++r){var u=i[r];if(u instanceof Wv){var s=this.findMenuItem(u.menu,n);if(null!=s)return s}else if(u instanceof Av&&u.value===n)return u}return null},Object.defineProperty(n.prototype,"value",{get:function(){return this.Pt},set:function(t){if(this.Pt!==t){var n=this.findMenuItem(this.menu,t);null!=n?(this.Pt=t,this.text=n):(this.Pt=null,this.text=null)}},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DSelect"},n}(Xd),Yd={CUSTOM:0,STANDARD:1},Jd=function(t){function n(n){var i=t.call(this)||this;return i.Jc=n,i}return G(n,t),n.prototype.get=function(t){var n=this.Jc;return 0<=t&&t<n.length?n[t]:null},n.prototype.set=function(t,n){var i=this.Jc;if(0<=t&&t<i.length){var r=i[t];return i[t]=n,this.emit("change",this),r}return null},n.prototype.setAll=function(t){for(var n=!1,i=this.Jc,r=0,e=Math.min(t.length,i.length);r<e;++r)i[r]!==t[r]&&(i[r]=t[r],n=!0);return n&&this.emit("change",this),this},n.prototype.contains=function(t){for(var n=this.Jc,i=0,r=n.length;i<r;++i)if(n[i]===t)return!0;return!1},n.prototype.size=function(){return this.Jc.length},n}(t.utils.EventEmitter),Zd=function(){function t(){}return t.getInstance=function(){var t;return null!==(t=this.INSTANCE)&&void 0!==t?t:this.INSTANCE=this.newInstance()},t.newInstance=function(){var t=it.get("DColorStandard");return new Jd(t.newColors())},t}(),qd=function(t){function n(n,i){var r=t.call(this)||this;return r.Zc=n,r.Ft=i,r}return G(n,t),n.prototype.get=function(t){var n=this.Zc;return 0<=t&&t<n.length?n[n.length-1-t]:null},n.prototype.set=function(t,n){var i=this.Zc;if(0<=t&&t<i.length){var r=i[i.length-1-t];return i[i.length-1-t]={color:n.color,alpha:n.alpha},this.emit("change",this),r}return null},n.prototype.contains=function(t){for(var n=this.Zc,i=0,r=n.length;i<r;++i){var e=n[i];if(e.color===t.color&&e.alpha===t.alpha)return!0}return!1},n.prototype.clear=function(){var t=this.Zc;return 0<t.length&&(t.length=0,this.emit("change",this)),this},n.prototype.add=function(t){var n=this.Zc;return n.push({color:t.color,alpha:t.alpha}),this.Ft<n.length&&n.shift(),this.emit("change",this),this},n.prototype.addAll=function(t){var n=t.length;if(0<n){for(var i=this.Zc,r=0;r<n;++r){var e=t[r];i.push({color:e.color,alpha:e.alpha}),this.Ft<i.length&&i.shift()}this.emit("change",this)}return this},n.prototype.clearAndAddAll=function(t){var n=!1,i=this.Zc;0<i.length&&(i.length=0,n=!0);var r=t.length;if(0<r){for(var e=0;e<r;++e){var u=t[e];i.push({color:u.color,alpha:u.alpha}),this.Ft<i.length&&i.shift()}n=!0}return n&&this.emit("change",this),this},n.prototype.pop=function(){var t=this.Zc.shift();return null!=t?(this.emit("change",this),t):null},n.prototype.size=function(){return this.Zc.length},n}(t.utils.EventEmitter),Qd=function(){function t(){}return t.getInstance=function(){var t;return null!==(t=this.INSTANCE)&&void 0!==t?t:this.INSTANCE=this.newInstance()},t.newInstance=function(){var t=it.get("DColorRecent");return new qd(t.newColors(),t.getCapacity())},t}(),$d=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return G(i,n),Object.defineProperty(i.prototype,"current",{get:function(){return this.qc},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"new",{get:function(){return this.Qc},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"recent",{get:function(){return this.$c},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"standard",{get:function(){return this.tf},enumerable:!1,configurable:!0}),i.prototype.init=function(i){var r=this;n.prototype.init.call(this,i),this.Bn=16711680,this.nf={color:16777215,alpha:1},this.Qc=new zd(this.nf,(function(t){r.setColorNew(t)}),(function(t){r.setAlphaNew(t)})),this.Dr={color:16777215,alpha:1},this.qc=new zd(this.Dr,(function(t){r.setColorCurrent(t)}),(function(t){r.setAlphaCurrent(t)}));var e=this.theme,u=this.au,s=u.getTop(),h=u.getRight(),o=u.getBottom(),a=u.getLeft();this.if=new t.Point;var c=e.getMainWidth(),f=e.getMainHeight(),l=new Kd({parent:this,value:Yd.STANDARD,menu:{items:[{value:Yd.STANDARD,text:{value:e.toColorTypeLabel(Yd.STANDARD)}},{value:Yd.CUSTOM,text:{value:e.toColorTypeLabel(Yd.CUSTOM)}}]},on:{change:function(t){r.onTypeChange(t)}}});this.rf=l,l.x=a,l.y=s,l.width=c,l.interactive=!0,this.addChild(l);var v=new t.Sprite(e.getMainBaseTexture());this.ef=v,v.x=a,v.y=l.y+l.height+e.getBaseMargin(),v.width=c,v.height=f,v.interactive=!0,v.visible=!1,this.addChild(v);var b=new t.Sprite(e.getMainTexture());this.uf=b,b.x=a,b.y=l.y+l.height+e.getBaseMargin(),b.tint=this.Bn,b.interactive=!1,b.visible=!1,this.addChild(b),this.sf=function(t){r.onMainMove(t)},this.hf=function(t){r.onMainUp(t)},v.on(he.down,(function(t){r.onMainDown(t)}));var d=new t.Sprite(e.getBaseTexture());this.af=d,d.x=a,d.y=v.y+v.height+e.getBaseMargin(),d.interactive=!0,d.visible=!1,this.addChild(d),this.cf=function(t){r.onBaseMove(t)},this.ff=function(t){r.onBaseUp(t)},d.on(he.down,(function(t){r.onBaseDown(t)})),this.lf=[];var g=this.lf,m=e.getStandardColorCount(),w=e.getStandardColorWidth(),O=e.getStandardColorHeight(),p=e.getStandardColorMargin(),D=l.y+l.height+e.getBaseMargin(),E=e.getStandardTexture(),M=this.tf=Zd.getInstance();M.on("change",(function(){r.onStandardChange()}));for(var S=function(n){var i=n.currentTarget;i instanceof t.Sprite&&r.setColorNew(i.tint)},j=0;j<m;++j){var T=a+j%10*(w+p),I=D+Math.floor(j/10)*(O+p),C=new t.Sprite(E),N=M.get(j);null!=N?(C.tint=N,C.alpha=1):(C.tint=16777215,C.alpha=1),C.x=T,C.y=I,C.buttonMode=!0,C.interactive=!0,C.on(he.tap,S),g.push(C)}var A=new xh({width:"auto",height:"auto",row:8,children:g});this.vf=A,A.visible=!0,this.addChild(A);var R=new t.Sprite(e.getAlphaCheckerboardTexture());this.bf=R,R.x=u.getLeft(),R.y=d.y+e.getBaseHeight()+e.getBaseMargin(),R.interactive=!1,this.addChild(R);var y=new t.Sprite(e.getAlphaTexture());y.tint=this.nf.color,y.interactive=!0,R.addChild(y),this.df=function(t){r.onAlphaMove(t)},this.gf=function(t){r.onAlphaUp(t)},y.on(he.down,(function(t){r.onAlphaDown(t)}));var k=new t.Sprite(e.getMainPointerTexture());this.mf=k,k.x=a,k.y=l.y+l.height+e.getBaseMargin(),k.anchor.x=.5,k.anchor.y=.5,k.tint=e.getMainPointerColor(),k.alpha=e.getMainPointerAlpha(),k.interactive=!1,k.visible=!1,this.addChild(k);var L=new t.Sprite(e.getAlphaPointerTexture());this.wf=L,L.x=c,L.y=.5*R.height,L.tint=e.getAlphaPointerColor(),L.alpha=e.getAlphaPointerAlpha(),L.anchor.set(.5,.5),L.interactive=!1,R.addChild(L);var x=new t.Sprite(e.getBasePointerTexture());this.Of=x,x.x=0,x.y=.5*d.height,x.tint=e.getBasePointerColor(),x.alpha=e.getBasePointerAlpha(),x.anchor.set(.5,.5),x.interactive=!1,d.addChild(x),this.pf=[];var B=this.pf,_=e.getRecentColorCount(),P=e.getRecentColorWidth(),U=e.getRecentColorHeight(),F=e.getRecentColorMargin(),G=R.y+e.getAlphaHeight()+e.getRecentMargin(),H=e.getRecentCheckerboardTexture(),z=e.getRecentTexture(),V=this.$c=Qd.getInstance();V.on("change",(function(){r.onRecentChange()}));var W=function(n){var i=n.currentTarget;i instanceof t.Sprite&&(r.setColorNew(i.tint),r.setAlphaNew(i.alpha))};for(j=0;j<_;++j){T=a+j*(P+F),I=G;var X=new t.Sprite(H);X.x=T,X.y=I,X.interactive=!1,this.addChild(X),C=new t.Sprite(z);var K=V.get(j);null!=K?(C.tint=K.color,C.alpha=K.alpha):(C.tint=16777215,C.alpha=0),C.x=T,C.y=I,C.buttonMode=!0,C.interactive=!0,C.on(he.tap,W),this.addChild(C),B.push(C)}var Y=e.getInputMargin(),J=e.getInputLabelWidth(),Z=G+U+Y,q=.5*(c-Y),Q=new Hd({parent:this,x:a,y:Z,width:q,label:{width:J,text:{value:"#"},interactive:Re.NONE},input:{weight:1,text:{value:"FFFFFF"},on:{input:function(t){var n=gn.fromCode(t);null!=n&&r.setColorNew(n)}}}});this.Df=Q;var $=Q.height,tt=new Gd({parent:this,x:a,y:Z+$+Y,width:q,label:{width:J,text:{value:"A"},interactive:Re.NONE},input:{weight:1,text:{value:1},min:0,max:1,on:{input:function(t){r.setAlphaNew(t)}}}});this.Ef=tt;var nt=e.getSampleWidth(),it=e.getSampleHeight(),rt=a+.5*(c-Y)+Y,et=Z+.5*($+Y+tt.height-it),ut=e.getSampleMargin(),st=new t.Sprite(e.getSampleCheckerboardOldTexture());this.Mf=st,st.x=rt,st.y=et,st.width=nt,st.height=it,st.interactive=!1,this.addChild(st);var ht=this.Dr,ot=new t.Sprite(e.getSampleOldTexture());this.Sf=ot,ot.x=rt,ot.y=et,ot.tint=ht.color,ot.alpha=ht.alpha,ot.width=nt,ot.height=it,ot.interactive=!0,ot.buttonMode=!0,ot.on(he.tap,(function(){r.setColorNew(ht.color),r.setAlphaNew(ht.alpha)})),this.addChild(ot);var at=new t.Sprite(e.getSampleCheckerboardNewTexture());this.jf=at,at.x=rt+nt+ut,at.y=et,at.width=nt,at.height=it,at.interactive=!1,this.addChild(at);var ct=new t.Sprite(e.getSampleNewTexture());this.Tf=ct,ct.x=rt+nt+ut,ct.y=et,ct.tint=this.nf.color,ct.alpha=this.nf.alpha,ct.width=nt,ct.height=it,ct.interactive=!1,this.addChild(ct),null!=i&&null!=i.width||(this.width=a+c+h),null!=i&&null!=i.height||(this.height=Z+Q.height+Y+tt.height+o)},i.prototype.onMainDown=function(t){this.onMainPick(t.data.global);var n=lt.getLayer(this);if(n){var i=n.stage;i.on(he.move,this.sf),i.on(he.up,this.hf),i.on(he.upoutside,this.hf)}},i.prototype.onMainMove=function(t){this.onMainPick(t.data.global)},i.prototype.onMainUp=function(t){var n=lt.getLayer(this);if(n){var i=n.stage;i.off(he.move,this.sf),i.off(he.up,this.hf)}},i.prototype.toMainHex=function(t,n,i,r){return Math.max(0,Math.min(255,255*n+i*(t>>r&255)))<<r},i.prototype.toMainColor=function(t,n,i,r,e){var u=.5*r,s=Math.max(0,Math.min(1,((n-u)*(1-i/e)+u)/r)),h=Math.max(0,Math.min(1,i/e)),o=Math.abs(.5*h-s),a=1-o-h;return this.toMainHex(t,a,o,16)|this.toMainHex(t,a,o,8)|this.toMainHex(t,a,o,0)},i.prototype.onMainPick=function(t){var n=this.ef,i=this.if,r=this.theme,e=r.getMainWidth(),u=r.getMainHeight();this.toLocal(t,void 0,i);var s=Math.max(0,Math.min(e,i.x-n.x)),h=Math.max(0,Math.min(u,i.y-n.y));this.mf.position.set(n.x+s,n.y+h),this.onColorNew(this.toMainColor(this.Bn,s,h,e,u))},i.prototype.setColorCurrent=function(t){this.Sf.tint=this.Dr.color=t},i.prototype.setAlphaCurrent=function(t){this.Sf.alpha=this.Dr.alpha=t},i.prototype.setColorNew=function(t){var n=this.theme,i=n.getMainWidth(),r=n.getMainHeight(),e=this.ef,u=vd.fromRgb(t);this.uf.tint=this.Bn=vd.toRgb(u[0],255,255),this.Of.x=Math.max(0,Math.min(1,u[0]/360))*i;var s=Math.max(0,Math.min(1,u[1]/255)),h=Math.max(0,Math.min(1,1-u[2]/255)),o=this.mf;o.tint=h<.45?n.getMainPointerColor():16777215,o.position.set(e.x+s*i,e.y+h*r),this.onColorNew(t)},i.prototype.onColorNew=function(t){var n=lt.getLayer(this);n&&n.lock(),this.Tf.tint=this.nf.color=t,this.Df.input.value=gn.toCode(t),this.emit("newcolorchange",t,this),n&&(n.unlock(),n.update())},i.prototype.onBaseDown=function(t){this.onBasePick(t.data.global);var n=lt.getLayer(this);if(n){var i=n.stage;i.on(he.move,this.cf),i.on(he.up,this.ff)}},i.prototype.onBaseMove=function(t){this.onBasePick(t.data.global)},i.prototype.onBaseUp=function(t){var n=lt.getLayer(this);if(n){var i=n.stage;i.off(he.move,this.cf),i.off(he.up,this.ff)}},i.prototype.toBaseHex=function(t,n){return Math.max(0,Math.min(255,6*t*255))<<n},i.prototype.toBaseColor=function(t){return t<=.167?16711680+this.toBaseHex(t,8):t<=.333?(t=.333-t,65280+this.toBaseHex(t,16)):t<=.5?(t-=.333,65280+this.toBaseHex(t,0)):t<.667?(t=.667-t,255+this.toBaseHex(t,8)):t<.883?(t-=.667,255+this.toBaseHex(t,16)):(t=.883-t,16711680+this.toBaseHex(t,0))},i.prototype.onBasePick=function(t){var n=this.if,i=this.au,r=this.theme.getMainWidth();this.toLocal(t,void 0,n);var e=Math.max(0,Math.min(r,n.x-i.getLeft()));this.Of.x=e,this.onColorBase(this.toBaseColor(e/r))},i.prototype.setColorBase=function(t){var n=this.theme.getMainWidth();this.Of.x=Math.max(0,Math.min(1,t/360))*n,this.onColorBase(vd.toRgb(t,255,255))},i.prototype.onColorBase=function(t){this.uf.tint=this.Bn=t;var n=this.mf,i=this.theme,r=i.getMainWidth(),e=i.getMainHeight(),u=this.au;this.onColorNew(this.toMainColor(this.Bn,n.x-u.getLeft(),n.y-u.getTop(),r,e))},i.prototype.onAlphaDown=function(t){this.onAlphaPick(t.data.global);var n=lt.getLayer(this);if(n){var i=n.stage;i.on(he.move,this.df),i.on(he.up,this.gf)}},i.prototype.onAlphaMove=function(t){this.onAlphaPick(t.data.global)},i.prototype.onAlphaUp=function(t){var n=lt.getLayer(this);if(n){var i=n.stage;i.off(he.move,this.df),i.off(he.up,this.gf)}},i.prototype.onAlphaPick=function(t){var n=this.if,i=this.au,r=this.theme.getMainWidth();this.toLocal(t,void 0,n);var e=Math.max(0,Math.min(r,n.x-i.getLeft()));this.wf.x=e,this.onAlphaNew(e/r)},i.prototype.setAlphaNew=function(t){var n=this.theme.getMainWidth();this.wf.x=Math.max(0,Math.min(1,t))*n,this.onAlphaNew(t)},i.prototype.onAlphaNew=function(t){var n=lt.getLayer(this);n&&n.lock(),this.Tf.alpha=this.nf.alpha=t,this.Ef.input.value=Number(t.toFixed(2)),this.emit("newalphachange",t,this),n&&(n.unlock(),n.update())},i.prototype.onRecentChange=function(){for(var t=this.pf,n=this.$c,i=0,r=t.length;i<r;++i){var e=t[i],u=n.get(i);null!=u?(e.tint=u.color,e.alpha=u.alpha):(e.tint=16777215,e.alpha=0)}},i.prototype.onStandardChange=function(){for(var t=this.lf,n=this.tf,i=0,r=t.length;i<r;++i){var e=t[i],u=n.get(i);null!=u?(e.tint=u,e.alpha=1):(e.tint=16777215,e.alpha=1)}},i.prototype.onTypeChange=function(t){switch(t){case Yd.CUSTOM:this.ef.visible=!0,this.uf.visible=!0,this.mf.visible=!0,this.af.visible=!0,this.vf.visible=!1;break;case Yd.STANDARD:this.ef.visible=!1,this.uf.visible=!1,this.mf.visible=!1,this.af.visible=!1,this.vf.visible=!0;break;default:return}},i.prototype.getType=function(){return"DPickerColor"},i}(ru),tg=function(t,n){if(t.direction!==n.direction)return!1;var i=t.points,r=n.points;if(i.length!==r.length)return!1;for(var e=0,u=i.length;e<u;++e){var s=i[e],h=r[e];if(s.color!==h.color||s.alpha!==h.alpha||s.position!==h.position)return!1}return!0},ng=function(t){function n(n,i){var r=t.call(this)||this;return r.Zc=n,r.Ft=i,r}return G(n,t),n.prototype.getCapacity=function(){return this.Ft},n.prototype.get=function(t){var n=this.Zc;return 0<=t&&t<n.length?n[n.length-1-t]:null},n.prototype.set=function(t,n){var i=this.Zc;if(0<=t&&t<i.length){var r=i[i.length-1-t];return i[i.length-1-t]=n,this.emit("change",this),r}return null},n.prototype.contains=function(t){for(var n=this.Zc,i=0,r=n.length;i<r;++i)if(tg(n[i],t))return!0;return!1},n.prototype.add=function(t){var n=this.Zc;return n.push(t),this.Ft<n.length&&n.shift(),this.emit("change",this),this},n.prototype.pop=function(){var t=this.Zc.shift();return null!=t?(this.emit("change",this),t):null},n.prototype.size=function(){return this.Zc.length},n}(t.utils.EventEmitter),ig=function(n){function i(i,r,e,u,s,h,o,a){var c=n.call(this,o,a)||this;return c.interactive=!0,c.interactiveChildren=!1,c.cursor="pointer",c.If=i,c.Pe=r,c._uvs=e,c.Cf=u,c.Ue=s,c.Nf=-1,c.Fc=[0,0,0],c.Af=new t.Point,c.Rf=h,a.uniforms.uSampler.on("update",(function(){c.update(),lt.update(c)})),c.update(),c}return G(i,n),i.prototype.getRectangle=function(t){var n=this.Rf;return 0<=t&&t<n.length?n[t].rect:null},i.prototype.setRectangle=function(t,n,i,r,e){var u=this.Rf;if(0<=t&&t<u.length){var s=u[t].rect;s.x=n,s.y=i,s.width=r,s.height=e}},i.prototype.getData=function(t){var n=this.Rf;return 0<=t&&t<n.length?n[t].data:null},i.prototype.setData=function(t,n){var i=this.Rf;0<=t&&t<i.length&&(i[t].data=n)},i.prototype.getLastHitIndex=function(){return this.Nf},i.prototype.setColors=function(t,n,i,r){n[t+0]=i[0],n[t+1]=i[1],n[t+2]=i[2],n[t+3]=r,n[t+4]=i[0],n[t+5]=i[1],n[t+6]=i[2],n[t+7]=r},i.prototype.setColorsHex=function(n,i,r,e){var u=t.utils.hex2rgb(r,this.Fc);this.setColors(n,i,u,e)},i.prototype.setColorsWhite=function(t,n){var i=this.Fc;i[0]=1,i[1]=1,i[2]=1,this.setColors(t,n,i,0)},i.prototype.setColorsPoint=function(t,n,i,r){var e=n.points[i];null!=e?this.setColorsHex(t,r,e.color,e.alpha):this.setColorsWhite(t,r)},i.prototype.setVertices=function(t,n,i,r){var e=r.y+r.height*i;n[t+0]=r.x,n[t+1]=e,n[t+2]=r.x+r.width,n[t+3]=e},i.prototype.setUvs=function(t,n,i,r){var e=r.x0+(r.x3-r.x0)*i,u=r.y0+(r.y3-r.y0)*i,s=r.x1+(r.x2-r.x1)*i,h=r.y1+(r.y2-r.y1)*i;n[t+0]=e,n[t+1]=u,n[t+2]=s,n[t+3]=h},i.prototype.newIndices=function(t,n,i,r){for(var e=0;e<i;++e)r[t+0]=n+0,r[t+1]=n+1,r[t+2]=n+2,r[t+3]=n+2,r[t+4]=n+1,r[t+5]=n+3,t+=6,n+=2;return r},i.prototype._calculateBounds=function(){var t=this.transform.worldTransform,n=this.Rf[0].rect,i=this._bounds,r=this.Af;r.set(n.x,n.y),t.apply(r,r),i.addPoint(r),r.set(n.x+n.width,n.y+n.height),t.apply(r,r),i.addPoint(r)},i.prototype.update=function(){var t=this.Pe,n=this._uvs,i=this.Cf,r=this.Ue,e=this.shader.uniforms.uSampler;null==e._uvs&&e.updateUvs();for(var u=e._uvs,s=0,h=0,o=0,a=0,c=this.Rf,f=0,l=c.length;f<l;++f){var v=c[f].data,b=c[f].rect;if(null==v)this.setVertices(s,t,0,b),this.setUvs(s,n,0,u),this.setColorsWhite(o,i),this.setVertices(s+4,t,1,b),this.setUvs(s,n,1,u),this.setColorsWhite(o+8,i),this.newIndices(a,h,1,r),s+=8,o+=16,h+=4,a+=6;else{this.setVertices(s,t,0,b),this.setUvs(s,n,0,u),this.setColorsPoint(o,v,0,i),s+=4,o+=8;for(var d=v.points.length,g=0,m=Math.min(d,this.If);g<m;++g){var w=v.points[g];this.setVertices(s,t,w.position,b),this.setUvs(s,n,w.position,u),this.setColorsHex(o,i,w.color,w.alpha),s+=4,o+=8}this.setVertices(s,t,1,b),this.setUvs(s,n,1,u),this.setColorsPoint(o,v,d-1,i),s+=4,o+=8,this.newIndices(a,h,d+1,r),a+=6*(d+1),h+=2*(d+2)}}this.size=a;var O=this.geometry;O.getBuffer("aPosition").update(),O.getBuffer("aUv").update(),O.getBuffer("aColor").update(),O.getIndex().update()},i.prototype.containsPoint=function(t){for(var n=this.toLocal(t,void 0,this.Af),i=this.Rf,r=0,e=i.length;r<e;++r)if(i[r].rect.contains(n.x,n.y))return this.Nf=r,!0;return!1},i.from=function(n,r,e,u){void 0===u&&(u=t.Texture.WHITE);for(var s=new Float32Array(n*(r+2)*2*2),h=new Float32Array(n*(r+2)*2*2),o=new Float32Array(n*(r+2)*2*4),a=new Uint16Array(n*(r+1)*6),c=[],f=0;f<n;++f)c.push({data:null,rect:new t.Rectangle});var l=(new t.Geometry).addIndex(new t.Buffer(a,!1,!0)).addAttribute("aPosition",new t.Buffer(s,!1,!1),2).addAttribute("aUv",new t.Buffer(h,!1,!1),2).addAttribute("aColor",new t.Buffer(o,!1,!1),4),v=t.Program.from("\nattribute vec2 aPosition;\nattribute vec2 aUv;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\n\nvarying vec2 vUv;\nvarying vec4 vColor;\n\nvoid main(void) {\n\tvec3 position = vec3(aPosition.x, aPosition.y, 1.0);\n\tgl_Position = vec4((projectionMatrix * translationMatrix * position).xy, 0.0, 1.0);\n\tvUv = aUv;\n\tvColor = aColor;\n}\n","\nvarying vec2 vUv;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform vec2 uCheckerColors;\n\nvoid main(void) {\n\tvec4 texture = texture2D(uSampler, vUv);\n\tfloat cy = step( 1.0, mod( gl_FragCoord.y / 10.0, 2.0 ) );\n\tfloat cx = step( 1.0, mod( gl_FragCoord.x / 10.0 + cy, 2.0 ) );\n\tfloat c = mix( uCheckerColors.x, uCheckerColors.y, cx );\n\tgl_FragColor = texture * vec4( mix( vec3( c ), vColor.xyz, vColor.a ), 1.0 );\n}");return new i(r,s,h,o,a,c,l,new t.MeshMaterial(u,{program:v,uniforms:{uCheckerColors:e}}))},i}(t.Mesh),rg=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return G(i,n),i.prototype.init=function(r){var e=this;n.prototype.init.call(this,r);var u=this.theme,s=this.au,h=s.getTop(),o=s.getRight(),a=s.getBottom(),c=s.getLeft();this.Br=new t.Point;var f=u.getGradientPointsWidth(),l=u.getGradientPointsMargin(),v=new $d({x:c+f+l,y:h});this.Bo=v,v.on("newcolorchange",(function(t){e.onAnchorColorChange(t)})),v.on("newalphachange",(function(t){e.onAnchorAlphaChange(t)})),this.addChild(v);var b=this.Ju=ig.from(17,10,u.getGradientCheckerColors());b.setRectangle(0,c,h,f,v.height),this.addChild(b),b.on(he.down,(function(t){0===b.getLastHitIndex()&&e.onViewDown(t)})),this.yf=function(t){e.onAnchorDown(t)},this.kf=function(t){e.onAnchorMove(t)},this.Lf=function(t){e.onAnchorUp(t)},this.xf=[];var d=u.getGradientRecentColumn(),g=u.getGradientRecentWidth(),m=u.getGradientRecentMargin(),w=g+m,O=v.theme.getInputLabelWidth(),p=g*d+m*(d-1),D=u.getGradientDirectionMargin(),E=u.getGradientDirectionTexture(),M=v.x+v.width+D,S=new ro({parent:this,x:M+O+5,y:h,width:p-2*(O+5),step:1,image:{source:E,align:{with:Qs.BORDER},margin:{horizontal:-E.width-5}},on:{change:function(t){e.Pt.rn=t}}}),j=M,T=S.y+S.height+D;null==i.RECENT_COLOR_GRADIENT&&(i.RECENT_COLOR_GRADIENT=new ng(u.getGradientRecents(),u.getGradientRecentCount())),this.$c=i.RECENT_COLOR_GRADIENT;for(var I=this.$c,C=0,N=I.getCapacity();C<N;++C){var A=j+C%d*w,R=T+(C/d|0)*w;b.setRectangle(1+C,A,R,g,g)}I.on("change",(function(){e.onRecentUpdate()})),b.on(he.tap,(function(t){var n=b.getLastHitIndex();1<=n&&e.onRecentClick(b.getData(n))}));var y=new Pd;this.Pt=y,y.on("change",(function(){e.updateAnchors(),b.update()})),y.on("selectionchange",(function(t){e.onAnchorSelect(t)})),y.on("directionchange",(function(t){S.value=t})),b.setData(0,y),b.update(),S.value=y.direction,this.updateAnchors();var k=y.selected;null!=k&&this.onAnchorSelect(k),null!=r&&null!=r.width||(this.width=c+f+l+v.width+D+(d-1)*m+d*g+o),null!=r&&null!=r.height||(this.height=h+v.height+a)},Object.defineProperty(i.prototype,"value",{get:function(){return this.Pt},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"recent",{get:function(){return this.$c},enumerable:!1,configurable:!0}),i.prototype.onRecentClick=function(t){var n=this.Pt;null!=t?n.fromObject(t):n.reset()},i.prototype.onRecentUpdate=function(){for(var t=this.$c,n=this.Ju,i=0,r=t.size();i<r;++i)n.setData(1+i,t.get(i));n.update(),lt.update(this)},i.prototype.toAnchorPosition=function(t){var n=this.toLocal(t.data.global,void 0,this.Br);return Math.max(0,Math.min(1,(n.y-this.padding.getTop())/this.Bo.height))},i.prototype.onViewDown=function(t){this.Pt.addAt(this.toAnchorPosition(t)),this.onAnchorDragStart()},i.prototype.onAnchorDown=function(n){var i=n.target;if(i instanceof t.Sprite){var r=this.Pt,e=this.xf.indexOf(i);0<=e&&e<r.points.length&&(r.points[e].selected=!0,this.onAnchorDragStart())}},i.prototype.onAnchorSelect=function(t){var n=this.Bo;n.current.color=t.color,n.current.alpha=t.alpha,n.new.color=t.color,n.new.alpha=t.alpha},i.prototype.onAnchorColorChange=function(t){var n=this.Pt;if(null!=n){var i=n.selected;null!=i&&(i.color=t)}},i.prototype.onAnchorAlphaChange=function(t){var n=this.Pt;if(null!=n){var i=n.selected;null!=i&&(i.alpha=t)}},i.prototype.onAnchorDragStart=function(){var t=lt.getLayer(this);if(t){var n=t.stage;n.on(he.move,this.kf),n.on(he.up,this.Lf)}},i.prototype.onAnchorMove=function(t){var n=this.Pt;if(null!=n){var i=n.selected;null!=i&&(i.position=this.toAnchorPosition(t))}},i.prototype.onAnchorUp=function(t){var n=lt.getLayer(this);if(n){var i=n.stage;i.off(he.move,this.kf),i.off(he.up,this.Lf)}},i.prototype.updateAnchors=function(){for(var n=this.theme,i=n.getGradientAnchorTexture(),r=n.getGradientAnchorOutlinedTexture(),e=n.getGradientPointsWidth(),u=this.Pt,s=u.points.length,h=this.xf,o=h.length,a=o;a<s;++a){var c=new t.Sprite(i);c.anchor.set(.5,.5),c.cursor="pointer",c.interactive=!0,c.on(he.down,this.yf),h.push(c),this.addChild(c)}for(a=o-1;s<=a;--a){var f=h[a];f.off(he.down,this.yf),f.destroy()}h.length=s;var l=this.padding.getTop(),v=this.padding.getLeft()+e,b=this.Bo.height;for(a=0;a<s;++a){var d=u.points[a],g=h[a];g.tint=d.color,g.position.set(v,l+b*d.position),g.texture=d.selected?r:i}lt.update(this)},i.prototype.onKeyDown=function(t){if(Qe.isDeleteKey(t)){var i=this.Pt;if(null!=i){var r=i.selected;if(null!=r)return i.remove(r),n.prototype.onKeyDown.call(this,t),!0}}return n.prototype.onKeyDown.call(this,t)},i.prototype.getType=function(){return"DPickerColorGradient"},i.RECENT_COLOR_GRADIENT=null,i}(ru),eg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newContentChildren=function(n,i){var r=t.prototype.newContentChildren.call(this,n,i);return r.push(this.picker),r},n.prototype.onOk=function(n){t.prototype.onOk.call(this,n);var i=this.picker,r=i.value,e=i.recent;e.contains(r)||e.add(r.toObject())},Object.defineProperty(n.prototype,"value",{get:function(){return this.picker.value},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"recent",{get:function(){return this.picker.recent},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"picker",{get:function(){var t,n=this.Bo;return null==n&&(n=new rg(null===(t=this.tu)||void 0===t?void 0:t.picker),this.Bo=n),n},enumerable:!1,configurable:!0}),n.prototype.getResolvedValue=function(){return this.picker.value},n.prototype.onKeyDown=function(n){return this.picker.onKeyDown(n),t.prototype.onKeyDown.call(this,n)},n.prototype.getType=function(){return"DDialogColorGradient"},n}(co),ug=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return G(i,n),i.prototype.init=function(i){var r;if(n.prototype.init.call(this,i),void 0===(null===(r=null==i?void 0:i.image)||void 0===r?void 0:r.source)){var e=this.theme,u=e.getViewBaseTexture();if(u instanceof t.Texture){var s=e.getCheckerColors(),h=ig.from(1,10,s,u);this.Ju=h,h.setRectangle(0,0,0,u.width,u.height),h.setData(0,this.text.computed),h.update(),this.image=h}}},i.prototype.onActivate=function(t){var i=this;n.prototype.onActivate.call(this,t);var r=this.text.computed,e=this.dialog;null!=r&&e.value.fromObject(r),e.open(this).then((function(t){i.onValueChange(t,i.toClone(r))}))},i.prototype.toClone=function(t){var n=new Pd;return null!=t&&n.fromObject(t),n},i.prototype.onValueChange=function(t,n){var i=this.text.computed;null!=i&&i.fromObject(t);var r=this.Ju;null!=r&&r.update(),this.text.compute(!0),this.emit("change",t,n,this)},Object.defineProperty(i.prototype,"dialog",{get:function(){var t,n=this.Bf;if(null==n){var r=null===(t=this.tu)||void 0===t?void 0:t.dialog;r?n=this.newDialog(r):(null==i.DIALOG&&(i.DIALOG=this.newDialog({mode:"MENU",sticky:!0})),n=i.DIALOG),this.Bf=n}return n},enumerable:!1,configurable:!0}),i.prototype.newDialog=function(t){return new eg(t)},Object.defineProperty(i.prototype,"value",{get:function(){return this.text.computed},enumerable:!1,configurable:!0}),i.prototype.getType=function(){return"DButtonColorGradient"},i}(kh),sg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newContentChildren=function(n,i){var r=t.prototype.newContentChildren.call(this,n,i);return r.push(this.picker),r},n.prototype.onOk=function(n){t.prototype.onOk.call(this,n);var i=this.picker,r=i.recent;r.contains(i.new)||r.add(i.new)},Object.defineProperty(n.prototype,"current",{get:function(){return this.picker.current},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"new",{get:function(){return this.picker.new},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"recent",{get:function(){return this.picker.recent},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"picker",{get:function(){var t,n=this.Bo;return null==n&&(n=new $d(null===(t=this.tu)||void 0===t?void 0:t.picker),this.Bo=n),n},enumerable:!1,configurable:!0}),n.prototype.getResolvedValue=function(){return this.picker.new},n.prototype.getType=function(){return"DDialogColor"},n}(co),hg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.onActivate=function(n){var i=this;t.prototype.onActivate.call(this,n);var r=this.dialog,e=this.text.computed;if(null!=e){var u=r.current;u.color=e.color,u.alpha=e.alpha;var s=r.new;s.color=e.color,s.alpha=e.alpha}r.open(this).then((function(){i.onValueChange(i.toClone(r.new),i.toClone(r.current))}))},n.prototype.toClone=function(t){return{color:t.color,alpha:t.alpha}},n.prototype.onValueChange=function(t,n){var i=this.text.computed;null!=i&&(i.color=t.color,i.alpha=t.alpha),this.onColorChange(),this.emit("change",t,n,this)},n.prototype.onColorChange=function(){var t=this.image.get(0);if(null!=t){var n=this.text.computed;null!=n&&(t.tint.color=n.color)}this.text.compute(!0)},Object.defineProperty(n.prototype,"dialog",{get:function(){var t,i=this.Bf;if(null==i){var r=null===(t=this.tu)||void 0===t?void 0:t.dialog;r?i=this.newDialog(r):(null==n.DIALOG&&(n.DIALOG=this.newDialog({mode:"MENU",sticky:!0})),i=n.DIALOG),this.Bf=i}return i},enumerable:!1,configurable:!0}),n.prototype.newDialog=function(t){return new sg(t)},Object.defineProperty(n.prototype,"value",{get:function(){var t=this.Pt;return null==t&&(t=this.newValue(),this.Pt=t),t},enumerable:!1,configurable:!0}),n.prototype.newValue=function(){var t=this,n=this.text,i=n.computed;return new zd(i,(function(n){i.color=n,t.onColorChange()}),(function(t){i.alpha=t,n.compute(!0)}))},n.prototype.getType=function(){return"DButtonColor"},n}(kh),og=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DButtonDanger"},n}(kh),ag=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.onActivate=function(n){var i,r,e=this;t.prototype.onActivate.call(this,n);var u=null!==(r=null===(i=this.text.computed)||void 0===i?void 0:i.getTime())&&void 0!==r?r:Date.now(),s=this.dialog;s.current=new Date(u),s.new=new Date(u),s.page=new Date(u),s.open(this).then((function(){e.onValueChange(s.new,s.current)}))},n.prototype.onValueChange=function(t,n){this.text=new Date(t.getTime()),this.emit("change",t,n,this)},Object.defineProperty(n.prototype,"dialog",{get:function(){var t,i=this.Bf;if(null==i){var r=null===(t=this.tu)||void 0===t?void 0:t.dialog;r?i=this.newDialog(r):(null==n.DIALOG&&(n.DIALOG=this.newDialog({mode:"MENU",sticky:!0})),i=n.DIALOG),this.Bf=i}return i},enumerable:!1,configurable:!0}),n.prototype.newDialog=function(t){return new xo(t)},Object.defineProperty(n.prototype,"value",{get:function(){var t;return null!==(t=this.text.computed)&&void 0!==t?t:new Date},set:function(t){var n=this.text.computed;void 0!==n&&n.getTime()===t.getTime()||(this.text=t)},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DButtonDate"},n}(kh),cg=function(){function t(){}return t.format=function(t){var n=dn(String(t.getFullYear()),4,"0"),i=dn(String(t.getMonth()+1),2,"0"),r=dn(String(t.getDate()),2,"0");return"".concat(n,"/").concat(i,"/").concat(r)},t}(),fg=function(){function t(){}return t.format=function(t,n){var i="";return n&Oo.HOURS&&(i+=dn(String(t.getHours()),2,"0")),n&Oo.MINUTES&&(0<i.length&&(i+=":"),i+=dn(String(t.getMinutes()),2,"0")),n&Oo.SECONDS&&(0<i.length&&(i+=":"),i+=dn(String(t.getSeconds()),2,"0")),i},t.toMask=function(t){return po.from("DPickerTime",t)},t}(),lg=function(){function t(){}return t.format=function(t,n){var i=fg.format(t,n);return 0<i.length?"".concat(cg.format(t)," ").concat(i):"".concat(cg.format(t))},t.toMask=function(t){return po.from("DPickerDatetime",t)},t}(),vg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.onActivate=function(n){var i,r,e=this;t.prototype.onActivate.call(this,n);var u=null!==(r=null===(i=this.text.computed)||void 0===i?void 0:i.getTime())&&void 0!==r?r:Date.now(),s=this.dialog;s.current=new Date(u),s.new=new Date(u),s.page=new Date(u),s.open(this).then((function(){e.onValueChange(s.new,s.current)}))},n.prototype.onValueChange=function(t,n){this.text=new Date(t.getTime()),this.emit("change",t,n,this)},n.prototype.getDatetimeMask=function(){var t,n,i=this._f;return null==i&&(i=lg.toMask(null===(n=null===(t=this.tu)||void 0===t?void 0:t.dialog)||void 0===n?void 0:n.picker),this._f=i),i},Object.defineProperty(n.prototype,"dialog",{get:function(){var t,i=this.Bf;if(null==i){var r=null===(t=this.tu)||void 0===t?void 0:t.dialog;r?i=this.newDialog(r):(null==n.DIALOG&&(n.DIALOG=this.newDialog({mode:"MENU",sticky:!0})),i=n.DIALOG),this.Bf=i}return i},enumerable:!1,configurable:!0}),n.prototype.newDialog=function(t){return new No(t)},Object.defineProperty(n.prototype,"value",{get:function(){var t;return null!==(t=this.text.computed)&&void 0!==t?t:new Date},set:function(t){var n=this.text.computed;void 0!==n&&n.getTime()===t.getTime()||(this.text=t)},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DButtonDatetime"},n}(kh),bg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getChecker=function(){var t,n,i=this.ja;return void 0===i&&(i=null!==(n=null===(t=this.tu)||void 0===t?void 0:t.checker)&&void 0!==n?n:null,this.ja=i),i},n.prototype.getOpener=function(){var t=this.Eh;return null==t&&(t=this.newOpener(),this.Eh=t),t},n.prototype.newOpener=function(){var t,n;return new ld(rr(null!==(n=null===(t=this.tu)||void 0===t?void 0:t.as)&&void 0!==n?n:fd.TEXT,fd),this)},n.prototype.onActivate=function(n){var i=this;t.prototype.onActivate.call(this,n),this.check((function(){i.open()}))},n.prototype.check=function(t){var n=this.getChecker();if(null!=n){var i=n();!0===i?t():!1===i||i.then((function(){t()}))}else t()},n.prototype.open=function(){this.getOpener().open()},n.prototype.getType=function(){return"DButtonFile"},n}(kh),dg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.onClick=function(n){this.link.onClick(this,n)||t.prototype.onClick.call(this,n)},Object.defineProperty(n.prototype,"link",{get:function(){var t=this.Ta;return null==t&&(t=new Gv(this.tu),this.Ta=t),t},enumerable:!1,configurable:!0}),n.prototype.onActivate=function(n){t.prototype.onActivate.call(this,n),this.link.open(n)},n.prototype.open=function(t){this.link.open(t)},n.prototype.getType=function(){return"DButtonLink"},n}(yh),gg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DButtonRadio"},n}(yh),mg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DButtonRadioRight"},n}(gg),wg=function(t){function n(n){var i=t.call(this,n)||this,r=i.state,e=Cd.getCommandController();return r.isDisabled=!e.isRedoable(),e.on("change",(function(){r.isDisabled=!e.isRedoable()})),i}return G(n,t),n.prototype.onActivate=function(n){t.prototype.onActivate.call(this,n),Cd.getCommandController().redo()},n}(kh),Og=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DButtonSecondary"},n}(kh),pg={NONE:0,SINGLE:1,MULTIPLE:2},Dg=function(t){function n(n,i){var r=t.call(this,i)||this;return r.Vt=n,r.on(he.tap,(function(t){r.onClick(t)})),r}return G(n,t),Object.defineProperty(n.prototype,"link",{get:function(){var t=this.Ta;return void 0===t&&(t=this.newLink(),this.Ta=t),t},enumerable:!1,configurable:!0}),n.prototype.newLink=function(){var t=this.Vt.accessor.link;return t?new Gv(this.toLinkOptions(t)):null},n.prototype.onClick=function(t){var n;!0!==(null===(n=this.link)||void 0===n?void 0:n.onClick(this,t))&&this.state.isActionable&&this.activate(t)},n.prototype.activate=function(t){var n=this.Pt;void 0!==n&&this.onSelect(t,n)},n.prototype.toLinkOptions=function(t){return{url:this.toLinkUrl(t.toUrl),target:t.target,checker:this.toLinkChecker(t.checker)}},n.prototype.toLinkUrl=function(t){var n=this;return function(){var i=n.Pt;if(void 0!==i)return t(i)}},n.prototype.toLinkChecker=function(t){var n=this;if(t)return function(){var i=n.Pt;return null!=i&&t(i)}},Object.defineProperty(n.prototype,"value",{get:function(){return this.Pt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"index",{get:function(){return this.Or},enumerable:!1,configurable:!0}),n.prototype.onSelect=function(t,n){var i;this.emit("select",n,this);var r=this.Vt,e=r.selection;if(e.type!==pg.MULTIPLE)e.clearAndAdd(n);else{var u=t&&"data"in t?t.data.originalEvent:t;if(null==u?void 0:u.ctrlKey)e.toggle(n);else if(null==u?void 0:u.shiftKey){var s=r.mapped,h=e.last;if(n===h)e.clearAndAdd(n);else{var o=!1,a=!1,c=[];s.each((function(t){if(o){if(a){if(c.unshift(t),t===n)return!1}else if(c.push(t),t===h)return!1}else t===n?(o=!0,a=!1,c.push(t)):t===h&&(o=!0,a=!0,c.push(t))})),e.clearAndAddAll(c)}}else e.clearAndAdd(n)}null===(i=this.Ta)||void 0===i||i.open(t)},n.prototype.set=function(t,n,i){var r=this.Vt,e=i||this.Pt!==t;if(e){this.Pt=t,this.Or=n;var u=r.accessor;this.text=u.toLabel(t),this.title=u.toTitle(t)||"",this.image=u.toImage(t)}var s=this.state;s.lock(),s.set(gt.ACTIVE,r.selection.contains(t)),s.remove(gt.DISABLED),s.unlock(),e&&this.emit("set",t,n,this)},n.prototype.unset=function(){if(void 0!==this.Pt){this.Pt=void 0,this.Or=void 0,this.text=void 0,this.title="",this.image=void 0;var t=this.state;t.lock(),t.add(gt.DISABLED),t.remove(gt.ACTIVE),t.unlock(),this.emit("unset",this)}},n.prototype.onKeyDown=function(n){return Qe.isActivateKey(n)&&this.onKeyDownActivate(n),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyDownActivate=function(t){return!(!this.state.isActionable||!this.state.isFocused||(this.activate(t),0))},n.prototype.getType=function(){return"DListItem"},n}(Rh),Eg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DDialogSelectListItem"},n}(Dg),Mg=function(){function t(t,n,i,r){this.Pf=0,this.Uf=!1,this.Ff=!1,this.Gf=-1,this.Hf=-1,this.Sh=1,this.zf=0,this.Vf=0,this.Wf=[],this.Vt=t,this.do=n,this.Xf=i,this.Kf=this.toNewItem(r),this.Yf=this.toInitItem(r)}return t.prototype.toNewItem=function(t){return(null==t?void 0:t.newItem)||this.newItem},t.prototype.toInitItem=function(t){return t?t.initItem||(!1!==t.stripe?this.initItem:this.initItemNoStriping):this.initItem},t.prototype.initItem=function(t,n,i){return t.state.isAlternated=n%2==1,t},t.prototype.initItemNoStriping=function(t,n,i){return t},Object.defineProperty(t.prototype,"multiplicity",{get:function(){return this.Sh},enumerable:!1,configurable:!0}),t.prototype.lock=function(){this.Pf+=1,1===this.Pf&&(this.Uf=!1,this.Ff=!1)},t.prototype.unlock=function(t){this.Pf-=1,0===this.Pf&&(t&&this.Uf&&this.update(this.Ff),this.Uf=!1,this.Ff=!1)},t.prototype.update=function(t){var n=this;if(0<this.Pf)return this.Uf=!0,void(t&&(this.Ff=!0));var i=this.do,r=i.parent;if(null!=r){var e=this.Xf,u=e.children,s=r.height,h=this.Vt,o=this.toMapped(h),a=o.size(),c=this.zf,f=this.Vf,l=f-c,v=this.Kf,b=this.Yf,d=this.Gf,g=this.Hf;if(this.Gf<0){var m=void 0;0<u.length?m=u[0]:(m=b(v(h),c,h),e.addChild(m),f+=1,l+=1),d=Math.max(1,m.height),jt(m.getWidth())&&(g=Math.max(1,m.width)),this.Gf=d,this.Hf=g}var w=i.padding,O=w.getTop(),p=w.getBottom(),D=w.getLeft(),E=w.getRight(),M=Math.max(0,i.width-D-E),S=0<g?Math.max(1,Math.floor(M/g)):1;this.Sh=S;var j=i!==e?e.transform.position.y:O,T=Math.ceil(a/S)*d,I=Math.max(s,O+T+p),C=Math.max(s-I,i.position.y),N=Math.floor((0-(C+j))*S/d),A=Math.floor((s-(C+j))*S/d),R=N-S;R%2!=0&&(R-=1);var y=A+S+S;y%2!=0&&(y+=1);var k=y-R;if(k<l&&(y=R+(k=l)),l<k){for(var L=l;L<k;++L){var x=c+L;m=b(v(h),x,h),e.addChild(m)}f=c+(l=k)}else if(k<l){for(L=l-1;k<=L;--L)e.removeChild(u[L]);f=c+(l=k)}this.zf=R,this.Vf=y;var B=R-c,_=Math.abs(B),P=u.length;if(0<_&&_<P){var U=this.Wf;if(0<B){for(L=0;L<_;++L)m=u[L],this.reset(m),U.push(m);for(L=_;L<P;++L)u[L-_]=u[L];for(L=0;L<_;++L)u[P-_+L]=U[L]}else{for(L=0;L<_;++L)m=u[P-_+L],this.reset(m),U.push(m);for(L=P-_-1;0<=L;--L)u[L+_]=u[L];for(L=0;L<_;++L)u[L]=U[L]}U.length=0}var F=0,G=0;for(i===e&&(F=D,G=O),o.each((function(i,r){var e=u[r-R],s=r%S,h=Math.floor(r/S);e.position.set(F+s*g,G+h*d),n.set(e,i,r,t)}),R,R+P),L=0;R+L<0&&L<P;++L){m=u[L];var H=(V=R+L)%S,z=Math.floor(V/S);m.position.set(F+H*g,G+z*d),this.unset(m)}for(L=P-1;a<=R+L&&0<=L;--L){var V;m=u[L],H=(V=R+L)%S,z=Math.floor(V/S),m.position.set(F+H*g,G+z*d),this.unset(m)}this.lock(),i.position.y=C,i.height=I,i!==e&&(e.height=T),this.unlock(!1)}},t.prototype.set=function(t,n,i,r){t.set(n,i,r)},t.prototype.unset=function(t){t.unset()},t.prototype.reset=function(t){t.blur(!0);for(var n=t.children,i=0,r=n.length;i<r;++i){var e=n[i];if(e instanceof ru){var u=e.state;u.lock(),u.isPressed=!1,u.isHovered=!1,u.unlock()}}return t.state.isHovered=!1,t},t.prototype.moveFocus=function(t,n,i,r){if(!i&&!r)return!1;var e=i&&Qe.isArrowUpKey(t),u=i&&Qe.isArrowDownKey(t),s=r&&Qe.isArrowLeftKey(t),h=r&&Qe.isArrowRightKey(t);if(!(e||u||s||h))return!1;if(!n.state.isActionable)return!1;var o=lt.getLayer(n);if(null==o)return!1;var a=o.getFocusController(),c=a.get();if(null==c)return!1;var f=this.Xf;if(c.parent!==f)return!1;var l=c,v=l.index;if(null==v)return!1;var b=this.Sh,d=this.Vt,g=this.toMapped(d).size(),m=v;if((s||h)&&(s?0<=m-1&&(m-=1):m+1<g&&(m+=1)),(e||u)&&(e?0<=m-b&&(m-=b):m+b<g&&(m+=b)),m===v)return!1;var w=f.children,O=w.indexOf(l);if(O<0)return!1;var p=O+(m-v);if(p<0||w.length<=p)return!1;var D=w[p];return a.focus(D),!0},t}(),Sg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.toMapped=function(t){return t.mapped},n.prototype.newItem=function(t){return new Dg(t)},n}(Mg),jg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newItem=function(t){return new Eg(t)},n}(Sg),Tg=function(){function t(t){this.g=t}return t.prototype.size=function(){var t=this.g;return t.before.length+t.items.length+t.after.length},t.prototype.each=function(t,n,i){var r=this.g,e=this.Es(t,r.before,0,n,i);if(!(e<0)){var u=this.Es(t,r.items,e,n,i);u<0||this.Es(t,r.after,u,n,i)}},t.prototype.Es=function(t,n,i,r,e){for(var u=i+n.length,s=null!=r?Math.max(i,r):i,h=null!=e?Math.min(u,e):u,o=s;o<h;++o)if(!1===t(n[o-i],o))return-1;return h},t}(),Ig=function(t){function n(n,i,r){var e=t.call(this)||this;e.g=n,e.Jf=i,e.Zf=new Set;var u=null==r?void 0:r.on;if(u)for(var s in u){var h=u[s];h&&e.on(s,h)}return e}return G(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return pg.MULTIPLE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){return this.get(this.size()-1)},enumerable:!1,configurable:!0}),n.prototype.get=function(t){var n=this.Zf;if(0<=t&&t<n.size){var i=0,r=null;return n.forEach((function(n){i===t&&(r=n),i+=1})),r}return null},n.prototype.add=function(t){var n=this.Zf;return!n.has(t)&&(n.add(t),this.onChange(),!0)},n.prototype.remove=function(t){var n=this.Zf;return!!n.has(t)&&(n.delete(t),this.onChange(),!0)},n.prototype.toggle=function(t){var n=this.Zf;return n.has(t)?n.delete(t):n.add(t),this.onChange(),!0},n.prototype.clear=function(){var t=this.Zf;0<t.size&&(t.clear(),this.onChange())},n.prototype.clearAndAdd=function(t){var n=this.Zf;return 1===n.size?!n.has(t)&&(n.clear(),n.add(t),this.onChange(),!0):(n.clear(),n.add(t),this.onChange(),!0)},n.prototype.clearAndAddAll=function(t){for(var n=!1,i=new Set,r=this.Zf,e=0,u=t.length;e<u;++e){var s=t[e];r.has(s)||(n=!0),i.add(s)}return n||r.forEach((function(t){i.has(t)||(n=!0)})),n&&(this.Zf=i,this.onChange()),n},n.prototype.contains=function(t){return this.Zf.has(t)},n.prototype.size=function(){return this.Zf.size},n.prototype.isEmpty=function(){return this.size()<=0},n.prototype.each=function(t){var n=!1;this.Zf.forEach((function(i){n||!1===t(i)&&(n=!0)}))},n.prototype.toArray=function(){var t=[];return this.Zf.forEach((function(n){t.push(n)})),t},n.prototype.onChange=function(){this.g.update(),this.emit("change",this)},n.prototype.toItemIdMap=function(t,n,i){for(var r=0,e=t.length;r<e;++r){var u=t[r];i.set(n(u),u)}},n.prototype.toItemSet=function(t,n){for(var i=0,r=t.length;i<r;++i)n.add(t[i])},n.prototype.onItemChange=function(t,n,i){var r=this.Zf,e=new Set,u=this.Jf.toId;if(u){var s=new Map;this.toItemIdMap(t,u,s),this.toItemIdMap(n,u,s),this.toItemIdMap(i,u,s),r.forEach((function(t){var n=u(t),i=s.get(n);null!=i&&e.add(i)})),this.Zf=e,this.onChange()}else{var h=new Set;this.toItemSet(t,h),this.toItemSet(n,h),this.toItemSet(i,h),r.forEach((function(t){h.has(t)&&e.add(t)})),r.size!==e.size&&(this.Zf=e,this.onChange())}},n.prototype.newItems=function(t,n,i){for(var r=0,e=t.length;r<e;++r){var u=t[r];n.has(u)&&i.add(u)}return i},n}(t.utils.EventEmitter),Cg=function(t){function n(n,i,r){var e=t.call(this)||this;e.g=n;var u=null==r?void 0:r.on;if(u)for(var s in u){var h=u[s];h&&e.on(s,h)}return e}return G(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return pg.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"first",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){return null},enumerable:!1,configurable:!0}),n.prototype.get=function(t){return null},n.prototype.add=function(t){return!1},n.prototype.remove=function(t){return!1},n.prototype.toggle=function(t){return!1},n.prototype.clear=function(){},n.prototype.clearAndAdd=function(t){return!1},n.prototype.clearAndAddAll=function(t){return!1},n.prototype.contains=function(t){return!1},n.prototype.size=function(){return 0},n.prototype.isEmpty=function(){return!0},n.prototype.each=function(t){},n.prototype.toArray=function(){return[]},n.prototype.onChange=function(){this.g.update(),this.emit("change",this)},n.prototype.onItemChange=function(t,n,i){},n}(t.utils.EventEmitter),Ng=function(t){function n(n,i,r){var e=t.call(this)||this;e.g=n,e.Jf=i,e.qf=null;var u=null==r?void 0:r.on;if(u)for(var s in u){var h=u[s];h&&e.on(s,h)}return e}return G(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return pg.SINGLE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"first",{get:function(){return this.qf},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){return this.get(this.size()-1)},enumerable:!1,configurable:!0}),n.prototype.get=function(t){return 0===t?this.qf:null},n.prototype.add=function(t){return this.qf!==t&&(this.qf=t,this.onChange(),!0)},n.prototype.remove=function(t){return this.qf===t&&(this.qf=null,this.onChange(),!0)},n.prototype.toggle=function(t){return this.qf===t?this.qf=null:this.qf=t,this.onChange(),!0},n.prototype.clear=function(){null!=this.qf&&(this.qf=null,this.onChange())},n.prototype.clearAndAdd=function(t){return this.qf!==t&&(this.qf=t,this.onChange(),!0)},n.prototype.clearAndAddAll=function(t){var n=t.length;if(0<n){var i=t[n-1];if(this.qf!==i)return this.qf=i,this.onChange(),!0}else if(null!=this.qf)return this.qf=null,this.onChange(),!0;return!1},n.prototype.contains=function(t){return this.qf===t},n.prototype.size=function(){return null!=this.qf?1:0},n.prototype.isEmpty=function(){return this.size()<=0},n.prototype.each=function(t){var n=this.qf;null!=n&&t(n)},n.prototype.toArray=function(){var t=this.qf;return null!=t?[t]:[]},n.prototype.onChange=function(){this.g.update(),this.emit("change",this)},n.prototype.findById=function(t,n,i){for(var r=0,e=i.length;r<e;++r){var u=i[r];if(t===n(u))return u}return null},n.prototype.find=function(t,n){for(var i=0,r=n.length;i<r;++i){var e=n[i];if(t===e)return e}return null},n.prototype.onItemChange=function(t,n,i){var r=this.qf;if(null!=r){var e=null,u=this.Jf.toId;if(u){var s=u(r);e=this.findById(s,u,t)||this.findById(s,u,n)||this.findById(s,u,i)}else e=this.find(r,t)||this.find(r,n)||this.find(r,i);r!==e&&(this.qf=e,this.onChange())}},n}(t.utils.EventEmitter),Ag=function(t){return t.image},Rg=function(t){return t.title},yg=function(t){return t.url},kg=function(){function t(t){this.toLabel=(null==t?void 0:t.toLabel)||od,this.toTitle=(null==t?void 0:t.toTitle)||Rg,this.toImage=(null==t?void 0:t.toImage)||Ag,this.toId=null==t?void 0:t.toId,this.link=this.toLink(t)}return t.prototype.toLink=function(t){if(t){var n=t.link;if(n){var i=n.toUrl,r=n.target,e=n.checker;if(void 0!==i||void 0!==r||void 0!==e)return{toUrl:i||yg,target:r,checker:e}}}},t}(),Lg=function(){function t(t,n){this.g=t,n?(this.Ys=n.before||[],this.Zf=n.items||[],this.Js=n.after||[]):(this.Ys=[],this.Zf=[],this.Js=[]);var i=new kg(n);this.Jf=i,this.Qf=this.toSelection(i,n),this.$f=new Tg(this)}return t.prototype.toSelection=function(t,n){var i=null==n?void 0:n.selection;switch(null==i?void 0:i.type){case pg.NONE:case"NONE":return new Cg(this,t,i);case pg.MULTIPLE:case"MULTIPLE":return new Ig(this,t,i);default:return new Ng(this,t,i)}},Object.defineProperty(t.prototype,"before",{get:function(){return this.Ys},set:function(t){this.Ys=t,this.Qf.onItemChange(t,this.Zf,this.Js),this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this.Zf},set:function(t){this.Zf=t,this.Qf.onItemChange(this.Ys,t,this.Js),this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.Js},set:function(t){this.Js=t,this.Qf.onItemChange(this.Ys,this.Zf,t),this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapped",{get:function(){return this.$f},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"accessor",{get:function(){return this.Jf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){return this.Qf},enumerable:!1,configurable:!0}),t.prototype.update=function(t){this.g.update(t)},t.prototype.size=function(){return this.Zf.length},t.prototype.clear=function(){var t=this.Zf;return 0<t.length&&(t.length=0,this.onChange(),!0)},t.prototype.clearAndAdd=function(t){var n=this.Zf;return 1===n.length?n[0]!==t&&(n[0]=t,this.onChange(),!0):(n.length=0,n.push(t),this.onChange(),!0)},t.prototype.clearAndAddAll=function(t){var n=!1,i=this.Zf;if(0<i.length&&(i.length=0,n=!0),0<t.length){for(var r=0,e=t.length;r<e;++r)i.push(t[r]);n=!0}return!!n&&(this.onChange(),!0)},t.prototype.add=function(t,n){var i=this.Zf;return null==n?(i.push(t),this.onChange(),!0):0<=n&&n<i.length&&(i.splice(n,0,t),this.onChange(),!0)},t.prototype.addAll=function(t,n){if(0<t.length){var i=this.Zf,r=i.length;if(null==n){for(var e=0,u=t.length;e<u;++e)i.push(t[e]);return this.onChange(),!0}if(0<=n&&n<r){for(e=0,u=t.length;e<u;++e)i.splice(n+e,0,t[e]);return this.onChange(),!0}}return!1},t.prototype.get=function(t){var n=this.Zf;return 0<=t&&t<n.length?n[t]:null},t.prototype.set=function(t,n){var i=this.Zf;if(0<=t&&t<i.length){var r=i[t];return i[t]=n,this.onChange(),r}return null},t.prototype.remove=function(t){var n=this.Zf;if(0<=t&&t<n.length){var i=n.splice(t,1)[0];return this.onChange(),i}return null},t.prototype.each=function(t,n,i){for(var r=this.Zf,e=r.length,u=null!=n?Math.max(0,n):0,s=null!=i?Math.min(e,i):e,h=u;h<s&&!1!==t(r[h],h);++h);},t.prototype.onChange=function(){this.update()},t}(),xg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.initReflowable=function(){},n.prototype.getType=function(){return"DContent"},n}(ru),Bg=function(t){function n(n){var i,r,e=t.call(this,n)||this;e.tl=0,e.nl=1,e.visible=!1,e.il=-1,e.er=!1,e.rl=null,e.el=null!==(r=null===(i=null==n?void 0:n.fadeOut)||void 0===i?void 0:i.delay)&&void 0!==r?r:e.theme.getFadeOutDelay(),e.ul=!0,e.sl=function(){e.onFadeOutTimeout()};var u=e.newThumb(null==n?void 0:n.thumb);return u.on("statechange",(function(t,n){e.onThumbStateChange(t,n)})),e.hl=u,e.addChild(u),e}return G(n,t),Object.defineProperty(n.prototype,"thumb",{get:function(){return this.hl},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"start",{get:function(){return this.tl},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"end",{get:function(){return this.nl},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r){i<1?(t=0,n=1):(t=Math.max(0,Math.min(1,t/i)),n=Math.max(t,Math.min(1,n/i))),this.tl===t&&this.nl===n||(this.tl=t,this.nl=n,this.onChange(r))},n.prototype.onChange=function(t){this.updateThumb(this.width,this.height),t&&(this.ul=!0),this.er||(this.er=!0,lt.update(this))},n.prototype.touch=function(t){this.onChange(t)},n.prototype.isRegionVisible=function(){return 0<this.tl||this.nl<1},n.prototype.render=function(n){if(this.er)if(this.er=!1,!this.ul&&this.isRegionVisible()){var i=this.el;0<=i&&(this.il=Date.now(),null==this.rl&&(this.rl=window.setTimeout(this.sl,i))),this.visible||(this.visible=!0,this.updateTransform())}else this.el<0&&this.visible&&(this.visible=!1);this.ul&&(this.ul=!1),t.prototype.render.call(this,n)},n.prototype.onResize=function(n,i,r,e){t.prototype.onResize.call(this,n,i,r,e),this.updateThumb(n,i)},n.prototype.onFadeOutTimeout=function(){this.rl=null;var t=this.el,n=this.sl,i=this.state;if(i.isGesturing||i.onHovered||i.isHovered||i.isPressed)this.rl=window.setTimeout(n,t);else{var r=this.hl.state;if(r.isGesturing||r.isHovered||r.isPressed)this.rl=window.setTimeout(n,t);else{var e=t-(Date.now()-this.il);0<e?this.rl=window.setTimeout(n,e):this.visible&&(this.visible=!1,lt.update(this))}}},n.prototype.onThumbStateChange=function(t,n){t.isGesturing||t.isHovered||t.isPressed||(n.isGesturing||n.isHovered||n.isPressed)&&(this.il=Date.now())},n.prototype.onStateChange=function(n,i){t.prototype.onStateChange.call(this,n,i),n.isGesturing||n.isHovered||n.isPressed||(i.isGesturing||i.isHovered||i.isPressed)&&(this.il=Date.now())},n.prototype.getType=function(){return"DScrollBar"},n}(ru),_g=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return G(i,n),i.prototype.init=function(i){var r=this;n.prototype.init.call(this,i);var e=new t.Point;this.Ou=new be({bind:this,on:{start:function(){e.copyFrom(r.position)},move:function(t,n,i){e.set(e.x+n,e.y+i),r.onGestureMove(e.x,e.y)}}})},i.prototype.getMinimumLength=function(){return this.theme.getThumbMinimumLength()},i.prototype.getType=function(){return"DScrollBarThumb"},i}(ru),Pg=function(t){function n(n){var i=t.call(this)||this;return n.snippet.add(i,!0),n.reflowable.add(i),i}return G(n,t),n.prototype.onReflow=function(t,n,i){this.clear();var r=t.state,e=t.border,u=e.getColor(r);if(null!=u){var s=e.getAlpha(r),h=e.getWidth(r),o=e.getAlign(r);this.beginFill(u,s),this.lineStyle(0,0,0,0),this.drawRect(0,o*(i-h),n,h),this.endFill(),this.visible=!0}else this.visible=!1},n}(t.Graphics),Ug=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.onGestureMove=function(t,n){this.emit("regionmove",t,this)},n.prototype.initReflowable=function(){new Pg(this)},n}(_g),Fg=function(t){function n(n){var i=t.call(this,n)||this;return i.hl.on("regionmove",(function(t){i.onThumbRegionMove(t)})),i}return G(n,t),n.prototype.onThumbRegionMove=function(t){var n=this.width;if(0<n){var i=this.nl-this.tl,r=Math.min(1-i,Math.max(0,t/n));this.tl!==r&&this.emit("regionmove",r,this)}},n.prototype.onDownThis=function(n){t.prototype.onDownThis.call(this,n);var i=this.width;if(0<i){var r=this.nl-this.tl,e=n.data.getLocalPosition(this),u=Math.min(1-r,Math.max(0,e.x/i-.5*r));this.tl!==u&&this.emit("regionmove",u,this)}},n.prototype.newThumb=function(t){return new Ug(t)},n.prototype.updateThumb=function(t,n){var i=this.hl,r=Math.min(.5*t,i.getMinimumLength()),e=t-r,u=e*this.tl,s=e*this.nl+r-u;i.position.set(u,0),i.resize(s,n)},n}(Bg),Gg=function(t){function n(n){var i=t.call(this)||this;return n.snippet.add(i,!0),n.reflowable.add(i),i}return G(n,t),n.prototype.onReflow=function(t,n,i){this.clear();var r=t.state,e=t.border,u=e.getColor(r);if(null!=u){var s=e.getAlpha(r),h=e.getWidth(r),o=e.getAlign(r);this.beginFill(u,s),this.lineStyle(0,0,0,0),this.drawRect(o*(n-h),0,h,i),this.endFill(),this.visible=!0}else this.visible=!1},n}(t.Graphics),Hg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.onGestureMove=function(t,n){this.emit("regionmove",n,this)},n.prototype.initReflowable=function(){new Gg(this)},n}(_g),zg=function(t){function n(n){var i=t.call(this,n)||this;return i.hl.on("regionmove",(function(t){i.onThumbRegionMove(t)})),i}return G(n,t),n.prototype.onThumbRegionMove=function(t){var n=this.height;if(0<n){var i=this.nl-this.tl,r=Math.min(1-i,Math.max(0,t/n));this.tl!==r&&this.emit("regionmove",r,this)}},n.prototype.onDownThis=function(n){t.prototype.onDownThis.call(this,n);var i=this.height;if(0<i){var r=this.nl-this.tl,e=n.data.getLocalPosition(this),u=Math.min(1-r,Math.max(0,e.y/i-.5*r));this.tl!==u&&this.emit("regionmove",u,this)}},n.prototype.newThumb=function(t){return new Hg(t)},n.prototype.updateThumb=function(t,n){var i=this.hl,r=Math.min(.5*n,i.getMinimumLength()),e=n-r,u=e*this.tl,s=e*this.nl+r-u;i.position.set(0,u),i.resize(t,s),i.updateTransform()},n}(Bg),Vg=function(){function t(t,n,i){this.g=t,this.ol=i,this.ut=0,this.al=!1,this.vertical=new zg(null==n?void 0:n.vertical),this.horizontal=new Fg(null==n?void 0:n.horizontal)}return t.prototype.lock=function(){this.ut+=1,1===this.ut&&(this.al=!1,this.cl=void 0)},t.prototype.unlock=function(t){this.ut-=1,0===this.ut&&(t&&this.al&&this.update(this.cl),this.al=!1,this.cl=void 0)},t.prototype.update=function(t){if(0<this.ut)return this.al=!0,void(null!=t&&(this.cl||(this.cl=t)));var n=this.g,i=n.width,r=n.height,e=n.content,u=-e.x,s=-e.y,h=this.vertical,o=h.width,a=this.getOffsetVerticalStart(o),c=this.getOffsetVerticalEnd(o);h.set(s,s+r,e.height,t),h.position.set(i-o,a),h.height=r-a-c;var f=this.horizontal,l=f.height,v=this.getOffsetHorizontalStart(l),b=this.getOffsetHorizontalEnd(l);f.set(u,u+i,e.width,t),f.position.set(v,r-l),f.width=i-v-b,this.ol(h.isRegionVisible()||f.isRegionVisible())},t.prototype.touch=function(t){this.vertical.touch(t),this.horizontal.touch(t)},t.prototype.getOffsetHorizontalStart=function(t){return.5*t},t.prototype.getOffsetHorizontalEnd=function(t){return.5*t},t.prototype.getOffsetVerticalStart=function(t){return.5*t},t.prototype.getOffsetVerticalEnd=function(t){return.5*t},t}(),Wg=function(n){function i(t){var i,r=n.call(this,t)||this,e=r.theme;(null!==(i=null==t?void 0:t.mask)&&void 0!==i?i:e.isOverflowMaskEnabled())&&(r.mask=r.getOverflowMask()),r.addChild(r.content);var u=r.scrollbar;return r.addChild(u.vertical),r.addChild(u.horizontal),u.update(),r.initGesture(e,t),r}return G(i,n),i.prototype.initGesture=function(n,i){var r,e,u=this,s=rr(null!==(e=null===(r=null==i?void 0:i.gesture)||void 0===r?void 0:r.mode)&&void 0!==e?e:n.getGestureMode(),uu);if(s===uu.ON||s===uu.TOUCH){var h=new t.Point,o=this.content;this.Ou=new be({bind:this,touch:s===uu.TOUCH,on:{start:function(){h.copyFrom(o.position)},move:function(t,n,i){h.set(h.x+n,h.y+i),o.position.set(u.toContentX(o,h.x),u.toContentY(o,h.y))}}})}},Object.defineProperty(i.prototype,"scrollbar",{get:function(){var t,n=this.fl;return null==n&&(n=this.newScrollBar(null===(t=this.tu)||void 0===t?void 0:t.scrollbar),this.initScrollBar(n),this.fl=n),n},enumerable:!1,configurable:!0}),i.prototype.newScrollBar=function(t){var n=this;return new Vg(this,t,(function(t){n.onScrollBarUpdate(t)}))},i.prototype.onScrollBarUpdate=function(t){},i.prototype.initScrollBar=function(t){var n=this;t.vertical.on("regionmove",(function(t){n.onScrollBarMoveY(t)})),t.horizontal.on("regionmove",(function(t){n.onScrollBarMoveX(t)}))},i.prototype.onScrollBarMoveX=function(t){var n=this.Ou;null!=n&&n.stop(this);var i=this.content;i.x=-i.width*t},i.prototype.onScrollBarMoveY=function(t){var n=this.Ou;null!=n&&n.stop(this);var i=this.content;i.y=-i.height*t},i.prototype.onOver=function(t){n.prototype.onOver.call(this,t),this.scrollbar.touch()},i.prototype.getType=function(){return"DPane"},Object.defineProperty(i.prototype,"content",{get:function(){var t=this.do;return null==t&&(t=this.toContent(this.tu),this.initContent(t),this.do=t),t},enumerable:!1,configurable:!0}),i.prototype.toContent=function(t){var n=null==t?void 0:t.content;return n?n instanceof ru?n:this.newContent(n):this.newContent()},i.prototype.newContent=function(t){return new xg(t)},i.prototype.initContent=function(t){var n=this;t.on("move",(function(){n.onContentChange()})),t.on("resize",(function(){n.onContentChange()}))},i.prototype.getOverflowMask=function(){var t=this.Zu;return void 0===t&&(t=this.newOverflowMask(),this.Zu=t),t},i.prototype.newOverflowMask=function(){var t=new eu(this);return this.reflowable.add(t),this.toDirty(),t},i.prototype.onWheel=function(t,n,i){var r=this.content,e=this.getWheelContentX(r,n.deltaX*n.lowest),u=this.getWheelContentY(r,n.deltaY*n.lowest);if(r.x!==e||r.y!==u){var s=this.Ou;return null!=s&&s.stop(this),r.position.set(e,u),!0}return!1},i.prototype.getWheelContentX=function(t,n){if(0<n||n<0){var i=this.theme.getWheelSpeed();return this.toContentX(t,t.x-n*i)}return t.x},i.prototype.getWheelContentY=function(t,n){if(0<n||n<0){var i=this.theme.getWheelSpeed();return this.toContentY(t,t.y+n*i)}return t.y},i.prototype.toContentX=function(t,n){return Math.min(0,Math.max(this.width-t.width,n))},i.prototype.toContentY=function(t,n){return Math.min(0,Math.max(this.height-t.height,n))},i.prototype.isRefitable=function(t){return n.prototype.isRefitable.call(this,t)&&!(t instanceof Bg)},i.prototype.onResize=function(t,i,r,e){var u=this.scrollbar;u.lock(),n.prototype.onResize.call(this,t,i,r,e),u.update(),u.unlock(!0)},i.prototype.onContentChange=function(){this.scrollbar.update()},i.prototype.getFocusedChildClippingRect=function(t,n,i,r,e,u,s,h){return h.x=0,h.y=0,h.width=u,h.height=s,h},i.prototype.onChildFocus=function(r){var e=i.WORK_POINT||new t.Point;i.WORK_POINT=e;var u=this.content,s=u.x,h=u.y,o=u.width,a=u.height;e.set(0,0),r.toGlobal(e,e,!1),u.toLocal(e,void 0,e,!1);var c=s+Math.min(o,Math.max(0,e.x)),f=h+Math.min(a,Math.max(0,e.y));e.set(r.width,r.height),r.toGlobal(e,e,!0),u.toLocal(e,void 0,e,!0);var l=s+Math.min(o,Math.max(0,e.x)),v=h+Math.min(a,Math.max(0,e.y)),b=this.width,d=this.height,g=i.WORK_RECTANGLE||new t.Rectangle;i.WORK_RECTANGLE=g,this.getFocusedChildClippingRect(r,s,h,o,a,b,d,g);var m=g.x,w=g.y,O=m,p=w,D=m+g.width,E=w+g.height,M=null;c<O?l<=D&&(M=s+Math.min(O-c,D-l),M=Math.max(b-o,Math.min(0,M))):D<l&&(M=s-Math.min(c-O,l-D),M=Math.max(b-o,Math.min(0,M)));var S=null;f<p?v<=E&&(S=h+Math.min(p-f,E-v),S=Math.max(d-a,Math.min(0,S))):E<v&&(S=h-Math.min(f-p,v-E),S=Math.max(d-a,Math.min(0,S)));var j=u.position;null!=M?null!=S?j.set(M,S):j.x=M:null!=S&&(j.y=S),n.prototype.onChildFocus.call(this,r)},i.prototype.destroy=function(){var t=this.Zu;null!=t&&(this.Zu=null,t.destroy()),this.mask=null,n.prototype.destroy.call(this)},i}(ru),Xg=function(t){function n(n){var i=t.call(this,n)||this;return i.update(),i}return G(n,t),Object.defineProperty(n.prototype,"updater",{get:function(){var t=this.ll;return null==t&&(t=this.newUpdater(this.data,this.content,this.tu),this.ll=t),t},enumerable:!1,configurable:!0}),n.prototype.newUpdater=function(t,n,i){return new Sg(t,n,n,null==i?void 0:i.updater)},Object.defineProperty(n.prototype,"data",{get:function(){var t=this.Vt;return null==t&&(t=this.toData(this.tu),this.Vt=t),t},enumerable:!1,configurable:!0}),n.prototype.toData=function(t){var n=t&&(t.data||t.items),i=null==t?void 0:t.selection;return null==n?i?new Lg(this,{selection:i}):new Lg(this):Mt(n)?new Lg(this,i?{items:n,selection:i}:{items:n}):"each"in n?n:i?(void 0===n.selection&&(n.selection=i),new Lg(this,n)):new Lg(this,n)},n.prototype.onContentChange=function(){t.prototype.onContentChange.call(this),this.update()},n.prototype.onResize=function(n,i,r,e){var u=this.updater;u.lock(),t.prototype.onResize.call(this,n,i,r,e),u.update(),u.unlock(!0)},Object.defineProperty(n.prototype,"selection",{get:function(){return this.data.selection},enumerable:!1,configurable:!0}),n.prototype.lock=function(){this.updater.lock()},n.prototype.unlock=function(t){this.updater.unlock(t)},n.prototype.update=function(t){this.updater.update(t)},n.prototype.onKeyDown=function(n){return this.updater.moveFocus(n,this,!0,!0),t.prototype.onKeyDown.call(this,n)},n.prototype.getType=function(){return"DList"},n}(Wg),Kg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newUpdater=function(t,n,i){return new jg(t,n,n,null==i?void 0:i.updater)},n.prototype.getType=function(){return"DDialogSelectList"},n}(Xg),Yg=function(t){function n(n){var i=t.call(this)||this;return i.vl=null!=n?n:function(t,n){return Promise.resolve([])},i.A=0,i.bl=0,i}return G(n,t),n.prototype.create=function(t){var n=this,i=++this.A,r=this.vl;(t.length<=1?r(t[0]):r(t[0],t[1])).then((function(t){n.A===i&&(n.bl=i,n.emit("success",n,t),n.emit("change",n))}),(function(){n.A===i&&(n.bl=i,n.emit("fail",n),n.emit("change",n))})),this.emit("change",this)},n.prototype.isDone=function(){return this.A===this.bl},n}(t.utils.EventEmitter),Jg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DInputSearch"},n}(so),Zg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DNote"},n}(Rh),qg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DNoteSmall"},n}(Zg),Qg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DNoteSmallError"},n}(qg),$g=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DNoteSmallNoItemsFound"},n}(qg),tm=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DNoteSmallSearching"},n}(qg),nm=function(t){function n(n){var i,r,e=t.call(this,n)||this;e.Pt=null;var u=null!==(r=null===(i=null==n?void 0:n.category)||void 0===i?void 0:i.items)&&void 0!==r?r:[];e.dl=u,0<u.length&&e.onCategoriesChange(u);var s=new wd,h=e.search;return h.on("success",(function(t,n){0<n.length?s.hide():s.show(e.noteNoItemsFound),e.onSearched(n)})),h.on("fail",(function(){s.show(e.noteError),e.onSearched([])})),h.on("change",(function(){if(!h.isDone()){var t=e.noteSearching;t&&s.show(t)}})),e}return G(n,t),n.prototype.newContentChildren=function(n,i){var r=t.prototype.newContentChildren.call(this,n,i);return r.push(this.inputLayout,this.list,this.buttonDismiss),r},Object.defineProperty(n.prototype,"inputLayout",{get:function(){var t;return null!==(t=this.wo)&&void 0!==t?t:this.wo=this.newInputLayout()},enumerable:!1,configurable:!0}),n.prototype.newInputLayout=function(){return new xh({width:"padding",height:"auto",children:[this.selectCategory,this.input]})},n.prototype.newSpace=function(){return new Xs({width:this.toInputMargin(this.theme,this.tu)})},Object.defineProperty(n.prototype,"selectCategory",{get:function(){var t;return null!==(t=this.ml)&&void 0!==t?t:this.ml=this.newSelectCategory()},enumerable:!1,configurable:!0}),n.prototype.newSelectCategory=function(){var t=this,n=new Kd(this.toSelectCategoryOptions(this.theme,this.tu));return n.on("change",(function(n){t.onSelectCategoryChange(n)})),n},n.prototype.toSelectCategoryOptions=function(t,n){var i=(null==n?void 0:n.category)||{};return void 0===i.width&&void 0===i.weight&&(i.width=140),void 0===i.visible&&(i.visible=!1),i},n.prototype.onSelectCategoryChange=function(t){this.search.create([this.input.value,t])},Object.defineProperty(n.prototype,"input",{get:function(){var t;return null!==(t=this.Oo)&&void 0!==t?t:this.Oo=this.newInput()},enumerable:!1,configurable:!0}),n.prototype.newInput=function(){var t=this,n=new Jg(this.toInputOptions(this.theme,this.tu));return n.on("input",(function(n){t.onInputInput(n)})),n},n.prototype.toInputOptions=function(t,n){var i=(null==n?void 0:n.input)||{};return void 0===i.width&&void 0===i.weight&&(i.weight=1),i},n.prototype.toInputMargin=function(t,n){var i,r;return null!==(r=null===(i=null==n?void 0:n.input)||void 0===i?void 0:i.margin)&&void 0!==r?r:t.getInputMargin()},n.prototype.onInputInput=function(t){0<this.dl.length?this.search.create([t,this.selectCategory.value]):this.search.create([t])},Object.defineProperty(n.prototype,"list",{get:function(){var t;return null!==(t=this.qe)&&void 0!==t?t:this.qe=this.newList()},enumerable:!1,configurable:!0}),n.prototype.newList=function(){var t=this,n=new Kg(this.toListOptions(this.theme,this.tu));return n.selection.on("change",(function(n){t.onListSelectionChange(n)})),n},n.prototype.onListSelectionChange=function(t){var n=t.first;null!=n&&(this.Pt=n,this.onOk(n))},n.prototype.toListOptions=function(t,n){var i=(null==n?void 0:n.list)||{};return void 0===i.width&&(i.width="padding"),i},Object.defineProperty(n.prototype,"noteError",{get:function(){var t;return null!==(t=this.wl)&&void 0!==t?t:this.wl=this.newNoteError()},enumerable:!1,configurable:!0}),n.prototype.newNoteError=function(){var t,n,i=null===(n=null===(t=this.tu)||void 0===t?void 0:t.note)||void 0===n?void 0:n.error;return null!==i?new Qg(this.toNoteOptions(this.list,i)):null},Object.defineProperty(n.prototype,"noteNoItemsFound",{get:function(){var t;return null!==(t=this.Ol)&&void 0!==t?t:this.Ol=this.newNoteNoItemsFound()},enumerable:!1,configurable:!0}),n.prototype.newNoteNoItemsFound=function(){var t,n,i=null===(n=null===(t=this.tu)||void 0===t?void 0:t.note)||void 0===n?void 0:n.noItemsFound;return null!==i?new $g(this.toNoteOptions(this.list,i)):null},Object.defineProperty(n.prototype,"noteSearching",{get:function(){var t;return null!==(t=this.pl)&&void 0!==t?t:this.pl=this.newNoteSearching()},enumerable:!1,configurable:!0}),n.prototype.newNoteSearching=function(){var t,n,i=null===(n=null===(t=this.tu)||void 0===t?void 0:t.note)||void 0===n?void 0:n.searching;return null!=i?new tm(this.toNoteOptions(this.list,i)):null},n.prototype.toNoteOptions=function(t,n){return null!=n?(null==n.parent&&(n.parent=t),null==n.visible&&(n.visible=!1),n):{parent:t,visible:!1}},Object.defineProperty(n.prototype,"search",{get:function(){var t;return null!==(t=this.vl)&&void 0!==t?t:this.vl=this.newSearch()},enumerable:!1,configurable:!0}),n.prototype.newSearch=function(){var t=this.tu;if(t){var n=t.controller;if(n){var i=n.search;return"create"in i?i:new Yg(i)}}return new Yg},Object.defineProperty(n.prototype,"buttonDismiss",{get:function(){var t=this.Dl;return void 0===t&&(t=this.newButtonDismiss(),this.Dl=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonDismiss=function(){var t=this,n=this.toButtonDismissOptions(this.tu);if(!0===n.enabled){var i=new kh(n);return i.on("active",(function(){t.Pt=null,t.onOk(null)})),i}return null},n.prototype.toButtonDismissOptions=function(t){var n=this.theme;if(null!=t){var i=t.dismiss;if(null!=i){void 0===i.enabled&&(i.enabled=n.isDismissable()),void 0===i.weight&&void 0===i.width&&(i.width="padding");var r=i.text;return void 0===r?i.text={value:n.getDismissLabel()}:void 0===r.value&&(r.value=n.getDismissLabel()),i}}return{width:"padding",enabled:n.isDismissable(),text:{value:n.getDismissLabel()}}},Object.defineProperty(n.prototype,"value",{get:function(){return this.Pt},enumerable:!1,configurable:!0}),n.prototype.onSearched=function(t){this.list.data.items=t},n.prototype.getResolvedValue=function(){return this.Pt},n.prototype.getType=function(){return"DDialogSelect"},n.prototype.onOpen=function(){t.prototype.onOpen.call(this),this.list.selection.clear(),0<this.dl.length?this.search.create([this.input.value,this.selectCategory.value]):this.search.create([this.input.value])},Object.defineProperty(n.prototype,"categories",{get:function(){return this.dl},set:function(t){this.dl=t,this.onCategoriesChange(t)},enumerable:!1,configurable:!0}),n.prototype.onCategoriesChange=function(t){var n,i,r,e,u,s=this.selectCategory;if(0<t.length){var h=[],o=this.theme,a=null!==(r=null===(i=null===(n=this.options)||void 0===n?void 0:n.category)||void 0===i?void 0:i.dismiss)&&void 0!==r?r:{};(null!==(e=a.enable)&&void 0!==e?e:o.isCategoryDismissable())&&h.push({value:null,text:{value:null!==(u=a.label)&&void 0!==u?u:o.getCategoryDismissLabel()}});for(var c=0,f=t.length;c<f;++c){var l=t[c];h.push({value:l.id,text:{value:l.label}})}s.menu=new Wd({fit:!0,items:h}),s.show()}else s.hide()},n.prototype.onOk=function(n){this.emit("select",n,this),t.prototype.onOk.call(this,n)},n.prototype.destroy=function(){var n=this.Oo;n&&n.destroy();var i=this.wl;i&&i.destroy();var r=this.Ol;r&&(null==r||r.destroy());var e=this.pl;e&&(null==e||e.destroy());var u=this.qe;u&&u.destroy(),t.prototype.destroy.call(this)},n}(Gh),im=function(t){return t.value},rm=function(){},em=function(t){function n(n){var i,r,e=t.call(this,n)||this;return e.El=null!==(i=null==n?void 0:n.getter)&&void 0!==i?i:im,e.Ml=null!==(r=null==n?void 0:n.setter)&&void 0!==r?r:rm,e}return G(n,t),n.prototype.onActivate=function(n){var i,r=this;t.prototype.onActivate.call(this,n);var e=this.dialog,u=null!==(i=this.text.computed)&&void 0!==i?i:null;this.Ml(e,u),e.open(this).then((function(){var t=r.El(e);t!==u&&(r.text=t,r.emit("change",t,u,r))}))},Object.defineProperty(n.prototype,"dialog",{get:function(){var t,n=this.Bf;if(null==n){var i=null===(t=this.tu)||void 0===t?void 0:t.dialog;n=i&&"open"in i?i:new nm(i),this.Bf=n}return n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){var t;return null!==(t=this.text.computed)&&void 0!==t?t:null},set:function(t){this.text=t},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DButtonSelect"},n}(kh),um=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.onActivate=function(n){var i,r,e=this;t.prototype.onActivate.call(this,n);var u=null!==(r=null===(i=this.text.computed)||void 0===i?void 0:i.getTime())&&void 0!==r?r:Date.now(),s=this.dialog;s.current=new Date(u),s.new=new Date(u),s.open(this).then((function(){e.onValueChange(s.new,s.current)}))},n.prototype.onValueChange=function(t,n){this.text=new Date(t.getTime()),this.emit("change",t,n,this)},n.prototype.getDatetimeMask=function(){var t,n,i=this._f;return null==i&&(i=fg.toMask(null===(n=null===(t=this.tu)||void 0===t?void 0:t.dialog)||void 0===n?void 0:n.picker),this._f=i),i},Object.defineProperty(n.prototype,"dialog",{get:function(){var t,i=this.Bf;if(null==i){var r=null===(t=this.tu)||void 0===t?void 0:t.dialog;r?i=this.newDialog(r):(null==n.DIALOG&&(n.DIALOG=this.newDialog({mode:"MENU",sticky:!0})),i=n.DIALOG),this.Bf=i}return i},enumerable:!1,configurable:!0}),n.prototype.newDialog=function(t){return new Ro(t)},Object.defineProperty(n.prototype,"value",{get:function(){var t;return null!==(t=this.text.computed)&&void 0!==t?t:new Date},set:function(t){var n=this.text.computed;void 0!==n&&n.getTime()===t.getTime()||(this.text=t)},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DButtonTime"},n}(kh),sm=function(t){function n(n){var i=t.call(this,n)||this,r=i.state,e=Cd.getCommandController();return r.isDisabled=!e.isUndoable(),e.on("change",(function(){r.isDisabled=!e.isUndoable()})),i}return G(n,t),n.prototype.onActivate=function(n){t.prototype.onActivate.call(this,n),Cd.getCommandController().undo()},n}(kh),hm={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},om=function(){function t(t){this.Sl=t,this.Or=0}return Object.defineProperty(t.prototype,"shape",{get:function(){var t=this.Vn;return null==t&&(t=this.newShape(),this.Vn=t),t},enumerable:!1,configurable:!0}),t.prototype.newShape=function(){var t,n=this.Sl,i=n.bar,r=new fn;return r.points.position=this.newShapePosition(),r.points.style=null!==(t=i.style)&&void 0!==t?t:K.NONE,r.stroke.copy(i.stroke),r.text.copy(n.label),r},t.prototype.newShapePosition=function(){switch(this.Sl.position){case hm.LEFT:case hm.RIGHT:return ot.TOP;default:return ot.LEFT}},t.prototype.bind=function(t,n){this.Xf=t,this.Or=n,this.shape.attach(t.container)},t.prototype.unbind=function(){var t=this.Vn;null!=t&&t.detach(),this.Or=0,this.Xf=void 0},t.prototype.update=function(){var t=this.Xf,n=this.Or,i=this.Vn;if(null!=i&&null!=t){var r=this.Sl,e=t.plotArea.getAxisBounds(r.position),u=e.x,s=e.y,h=e.width,o=e.height,a=r.padding*n;i.lock(_t.UPLOADED);var c=i.transform.position,f=i.size;switch(r.position){case hm.TOP:c.set(u+.5*h,s-a),f.set(h,0);break;case hm.BOTTOM:c.set(u+.5*h,s+o+a),f.set(h,0);break;case hm.LEFT:c.set(u-a,s+.5*o),f.set(0,o);break;case hm.RIGHT:c.set(u+h+a,s+.5*o),f.set(0,o)}return i.unlock(_t.UPLOADED,!0),!0}return!1},t.prototype.destroy=function(){var t=this.Vn;null!=t&&(this.Vn=void 0,t.destroy()),this.Or=0,this.Xf=void 0},t}(),am=function(){function t(t){this.jl=t,this.Or=0,this.qe=[]}return t.prototype.add=function(t){this.qe.push(t);var n=this.Xf,i=this.Or;return null!=n&&t.bind(n,i,this.jl),this},t.prototype.get=function(t){var n=this.qe;return 0<=t&&t<n.length?n[t]:null},t.prototype.indexOf=function(t){return this.qe.indexOf(t)},t.prototype.clear=function(){for(var t=this.qe,n=0,i=t.length;n<i;++n)t[n].destroy();return t.length=0,this},t.prototype.size=function(){return this.qe.length},t.prototype.bind=function(t,n){this.Xf=t,this.Or=n;for(var i=this.jl,r=this.qe,e=0,u=r.length;e<u;++e)r[e].bind(t,n,i)},t.prototype.unbind=function(){for(var t=this.qe,n=0,i=t.length;n<i;++n)t[n].unbind();this.Or=0,this.Xf=void 0},t.prototype.update=function(){for(var t=!1,n=this.qe,i=0,r=n.length;i<r;++i)n[i].update()&&(t=!0);return t},t.prototype.destroy=function(){for(var t=this.qe,n=0,i=t.length;n<i;++n)t[n].destroy();t.length=0,this.Or=0,this.Xf=void 0},t}(),cm={INSIDE:0,OUTSIDE:1},fm=function(){function t(t,n){var i,r;this.coordinate=null!==(i=null==n?void 0:n.coordinate)&&void 0!==i?i:0,this.position=this.toPosition(t,n),this.tick=this.toTick(t,n),this.label=this.toLabel(t,n),this.padding=null!==(r=null==n?void 0:n.padding)&&void 0!==r?r:t.getPadding(),this.bar=this.toBar(t,n),this.guide=this.toGuide(t,n)}return t.prototype.toPosition=function(t,n){var i=null==n?void 0:n.position;return Tt(i)?hm[i]:null!=i?i:t.getPosition()},t.prototype.toGuide=function(t,n){var i,r;return{list:null!==(r=null===(i=null==n?void 0:n.guide)||void 0===i?void 0:i.list)&&void 0!==r?r:[]}},t.prototype.toBar=function(t,n){var i;return{style:null!==(i=null==n?void 0:n.style)&&void 0!==i?i:t.getStyle(),stroke:this.toBarStroke(t,null==n?void 0:n.stroke)}},t.prototype.toTick=function(t,n){var i,r=null==n?void 0:n.tick;return{enable:null!==(i=null==r?void 0:r.enable)&&void 0!==i?i:t.getTickEnable(),major:this.toTickMajor(t,r),minor:this.toTickMinor(t,r)}},t.prototype.toTickMajor=function(t,n){var i,r,e,u,s,h,o,a,c=null==n?void 0:n.major,f=null!==(r=null!==(i=null==c?void 0:c.position)&&void 0!==i?i:null==n?void 0:n.position)&&void 0!==r?r:t.getMajorTickPosition(),l=null==n?void 0:n.style,v=Fb.from(null!==(u=null!==(e=null==c?void 0:c.style)&&void 0!==e?e:l)&&void 0!==u?u:t.getMajorTickStyle()),b=null==n?void 0:n.stroke,d=this.toTickMajorStroke(t,null==c?void 0:c.stroke,b),g=null!==(s=null==c?void 0:c.count)&&void 0!==s?s:t.getMajorTickCount();return{count:g,capacity:null!==(h=null==c?void 0:c.capacity)&&void 0!==h?h:t.getMajorTickCapacity(g),step:null!==(o=null==c?void 0:c.step)&&void 0!==o?o:t.getMajorTickStep(),size:null!==(a=null==c?void 0:c.size)&&void 0!==a?a:t.getMajorTickSize(),position:this.toTickPosition(f),style:v,stroke:d,text:this.toTickMajorText(t,null==c?void 0:c.text),formatter:this.toTickMajorFormatter(t,c),gridline:this.toTickMajorGridline(t,null==c?void 0:c.gridline,l,b)}},t.prototype.toTickMajorGridline=function(t,n,i,r){var e,u,s,h=Fb.from(null!==(u=null!==(e=null==n?void 0:n.style)&&void 0!==e?e:i)&&void 0!==u?u:t.getMajorTickGridlineStyle());return{enable:null!==(s=null==n?void 0:n.enable)&&void 0!==s?s:t.getMajorTickGridlineEnable(),style:h,stroke:this.toTickMajorGridlineStroke(t,null==n?void 0:n.stroke,r)}},t.prototype.toTickPosition=function(t){var n=this.position;if(t===cm.OUTSIDE||"OUTSIDE"===t)switch(n){case hm.TOP:return ot.BOTTOM;case hm.BOTTOM:return ot.TOP;case hm.LEFT:return ot.RIGHT;case hm.RIGHT:return ot.LEFT;default:return ot.TOP}else switch(n){case hm.TOP:return ot.TOP;case hm.BOTTOM:return ot.BOTTOM;case hm.LEFT:return ot.LEFT;case hm.RIGHT:return ot.RIGHT;default:return ot.TOP}},t.prototype.toTickMinor=function(t,n){var i,r,e,u,s,h,o,a=null==n?void 0:n.minor,c=null!==(r=null!==(i=null==a?void 0:a.position)&&void 0!==i?i:null==n?void 0:n.position)&&void 0!==r?r:t.getMinorTickPosition(),f=Fb.from(null!==(u=null!==(e=null==a?void 0:a.style)&&void 0!==e?e:null==n?void 0:n.style)&&void 0!==u?u:t.getMinorTickStyle());return{count:null!==(s=null==a?void 0:a.count)&&void 0!==s?s:t.getMinorTickCount(),step:null!==(h=null==a?void 0:a.step)&&void 0!==h?h:t.getMinorTickStep(),size:null!==(o=null==a?void 0:a.size)&&void 0!==o?o:t.getMinorTickSize(),position:this.toTickPosition(c),style:f,stroke:this.toTickMinorStroke(t,null==a?void 0:a.stroke,null==n?void 0:n.stroke),text:this.toTickMinorText(t,null==a?void 0:a.text),formatter:this.toTickMinorFormatter(t,a)}},t.prototype.toBarStroke=function(t,n){return this.toStroke(n,void 0,t.getStrokeEnable(),t.getStrokeColor(),t.getStrokeAlpha(),t.getStrokeWidth(),t.getStrokeAlign(),t.getStrokeSide(),t.getStrokeStyle())},t.prototype.toTickMajorStroke=function(t,n,i){return this.toStroke(n,i,t.getMajorTickStrokeEnable(),t.getMajorTickStrokeColor(),t.getMajorTickStrokeAlpha(),t.getMajorTickStrokeWidth(),t.getMajorTickStrokeAlign(),t.getMajorTickStrokeSide(),t.getMajorTickStrokeStyle())},t.prototype.toTickMajorGridlineStroke=function(t,n,i){return this.toStroke(n,i,t.getMajorTickGridlineStrokeEnable(),t.getMajorTickGridlineStrokeColor(),t.getMajorTickGridlineStrokeAlpha(),t.getMajorTickGridlineStrokeWidth(),t.getMajorTickGridlineStrokeAlign(),t.getMajorTickGridlineStrokeSide(),t.getMajorTickGridlineStrokeStyle())},t.prototype.toTickMinorStroke=function(t,n,i){return this.toStroke(n,i,t.getMinorTickStrokeEnable(),t.getMinorTickStrokeColor(),t.getMinorTickStrokeAlpha(),t.getMinorTickStrokeWidth(),t.getMinorTickStrokeAlign(),t.getMinorTickStrokeSide(),t.getMinorTickStrokeStyle())},t.prototype.toStroke=function(t,n,i,r,e,u,s,h,o){var a,c,f,l,v,b,d,g,m,w,O,p,D,E,M,S,j,T,I,C,N,A,R,y,k,L,x,B;return t?n?{enable:null!==(c=null!==(a=t.enable)&&void 0!==a?a:n.enable)&&void 0!==c?c:i,color:null!==(l=null!==(f=t.color)&&void 0!==f?f:n.color)&&void 0!==l?l:r,alpha:null!==(b=null!==(v=t.alpha)&&void 0!==v?v:n.alpha)&&void 0!==b?b:e,width:null!==(g=null!==(d=t.width)&&void 0!==d?d:n.width)&&void 0!==g?g:u,align:null!==(w=null!==(m=t.align)&&void 0!==m?m:n.align)&&void 0!==w?w:s,side:null!==(p=null!==(O=t.side)&&void 0!==O?O:n.side)&&void 0!==p?p:h,style:this.toStrokeStyle(null!==(E=null!==(D=t.style)&&void 0!==D?D:n.style)&&void 0!==E?E:o)}:{enable:null!==(M=t.enable)&&void 0!==M?M:i,color:null!==(S=t.color)&&void 0!==S?S:r,alpha:null!==(j=t.alpha)&&void 0!==j?j:e,width:null!==(T=t.width)&&void 0!==T?T:u,align:null!==(I=t.align)&&void 0!==I?I:s,side:null!==(C=t.side)&&void 0!==C?C:h,style:this.toStrokeStyle(null!==(N=t.style)&&void 0!==N?N:o)}:n?{enable:null!==(A=n.enable)&&void 0!==A?A:i,color:null!==(R=n.color)&&void 0!==R?R:r,alpha:null!==(y=n.alpha)&&void 0!==y?y:e,width:null!==(k=n.width)&&void 0!==k?k:u,align:null!==(L=n.align)&&void 0!==L?L:s,side:null!==(x=n.side)&&void 0!==x?x:h,style:this.toStrokeStyle(null!==(B=n.style)&&void 0!==B?B:o)}:{enable:i,color:r,alpha:e,width:u,align:s,side:h,style:o}},t.prototype.toStrokeStyle=function(t){if(Tt(t))return s[t];if(Mt(t)){for(var n=s.NONE,i=0,r=t.length;i<r;++i)n|=s[t[i]];return n}return t},t.prototype.toTickMajorFormatter=function(t,n){var i=null==n?void 0:n.text;if(i){var r=i.format;if(null===r)return;if(null!=r)return Ai.create(r);var e=i.formatter;if(e)return{format:e}}var u=t.getMajorTickTextFormat();if(null!=u)return Ai.create(u)},t.prototype.toTickMajorText=function(t,n){return{format:(n=n||{}).format,color:this.toTickMajorTextColor(t,n.color),alpha:n.alpha,family:n.family,size:n.size,weight:rr(n.weight,O),align:this.toTickMajorTextAlign(t,n.align),offset:this.toTickMajorTextOffset(t,n.offset),style:rr(n.style,p),outline:this.toTickMajorTextOutline(t,n.outline),spacing:this.toTickMajorTextSpacing(t,n.spacing),direction:this.toTickMajorTextDirection(t,n.direction),padding:this.toTickMajorTextPadding(t,n.padding),clipping:n.clipping}},t.prototype.toTickMajorTextOutline=function(t,n){if(n)return{enable:n.enable,color:n.color,alpha:n.alpha,width:n.width}},t.prototype.toTickMajorTextAlign=function(t,n){var i,r,e=this.position;return{horizontal:null!==(i=null==n?void 0:n.horizontal)&&void 0!==i?i:t.getMajorTickTextAlignHorizontal(e),vertical:null!==(r=null==n?void 0:n.vertical)&&void 0!==r?r:t.getMajorTickTextAlignVertical(e)}},t.prototype.toTickMajorTextOffset=function(t,n){if(n)return{horizontal:n.horizontal,vertical:n.vertical}},t.prototype.toTickMajorTextSpacing=function(t,n){if(n)return{horizontal:n.horizontal,vertical:n.vertical}},t.prototype.toTickMajorTextPadding=function(t,n){var i,r;return{horizontal:null!==(i=null==n?void 0:n.horizontal)&&void 0!==i?i:t.getMajorTickTextPaddingHorizontal(),vertical:null!==(r=null==n?void 0:n.vertical)&&void 0!==r?r:t.getMajorTickTextPaddingVertical()}},t.prototype.toTickMajorTextDirection=function(t,n){return rr(null!=n?n:t.getMajorTickTextDirection(),M)},t.prototype.toTickMajorTextColor=function(t,n){return null!=n?n:t.getMajorTickTextColor()},t.prototype.toTickMinorFormatter=function(t,n){var i=null==n?void 0:n.text;if(i){var r=i.format;if(null===r)return;if(null!=r)return Ai.create(r);var e=i.formatter;if(e)return{format:e}}var u=t.getMinorTickTextFormat();if(null!=u)return Ai.create(u)},t.prototype.toTickMinorText=function(t,n){return{format:(n=n||{}).format,color:this.toTickMinorTextColor(t,n.color),alpha:n.alpha,family:n.family,size:n.size,weight:rr(n.weight,O),align:this.toTickMinorTextAlign(t,n.align),offset:this.toTickMinorTextOffset(t,n.offset),style:rr(n.style,p),outline:this.toTickMinorTextOutline(t,n.outline),spacing:this.toTickMinorTextSpacing(t,n.spacing),direction:this.toTickMinorTextDirection(t,n.direction),padding:this.toTickMinorTextPadding(t,n.padding),clipping:n.clipping}},t.prototype.toTickMinorTextOutline=function(t,n){if(n)return{enable:n.enable,color:n.color,alpha:n.alpha,width:n.width}},t.prototype.toTickMinorTextAlign=function(t,n){var i,r,e=this.position;return{horizontal:null!==(i=null==n?void 0:n.horizontal)&&void 0!==i?i:t.getMinorTickTextAlignHorizontal(e),vertical:null!==(r=null==n?void 0:n.vertical)&&void 0!==r?r:t.getMinorTickTextAlignVertical(e)}},t.prototype.toTickMinorTextOffset=function(t,n){if(n)return{horizontal:n.horizontal,vertical:n.vertical}},t.prototype.toTickMinorTextSpacing=function(t,n){if(n)return{horizontal:n.horizontal,vertical:n.vertical}},t.prototype.toTickMinorTextPadding=function(t,n){var i,r;return{horizontal:null!==(i=null==n?void 0:n.horizontal)&&void 0!==i?i:t.getMinorTickTextPaddingHorizontal(),vertical:null!==(r=null==n?void 0:n.vertical)&&void 0!==r?r:t.getMinorTickTextPaddingVertical()}},t.prototype.toTickMinorTextDirection=function(t,n){return rr(null!=n?n:t.getMinorTickTextDirection(),M)},t.prototype.toTickMinorTextColor=function(t,n){return null!=n?n:t.getMinorTickTextColor()},t.prototype.toLabel=function(t,n){var i=null==n?void 0:n.label;if(i)return{value:i.value,color:this.toLabelColor(t,i.color),alpha:i.alpha,family:i.family,size:i.size,weight:rr(i.weight,O),align:this.toLabelAlign(t,i.align),offset:this.toLabelOffset(t,i.offset),style:rr(i.style,p),outline:this.toLabelOutline(t,i.outline),spacing:this.toLabelSpacing(t,i.spacing),direction:this.toLabelDirection(t,i.direction),padding:this.toLabelPadding(t,i.padding),clipping:i.clipping}},t.prototype.toLabelOutline=function(t,n){if(n)return{enable:n.enable,color:n.color,alpha:n.alpha,width:n.width}},t.prototype.toLabelAlign=function(t,n){var i,r,e=this.position;return{horizontal:null!==(i=null==n?void 0:n.horizontal)&&void 0!==i?i:t.getLabelAlignHorizontal(e),vertical:null!==(r=null==n?void 0:n.vertical)&&void 0!==r?r:t.getLabelAlignVertical(e)}},t.prototype.toLabelOffset=function(t,n){if(n)return{horizontal:n.horizontal,vertical:n.vertical}},t.prototype.toLabelSpacing=function(t,n){if(n)return{horizontal:n.horizontal,vertical:n.vertical}},t.prototype.toLabelPadding=function(t,n){var i,r;return{horizontal:null!==(i=null==n?void 0:n.horizontal)&&void 0!==i?i:t.getLabelPaddingHorizontal(),vertical:null!==(r=null==n?void 0:n.vertical)&&void 0!==r?r:t.getLabelPaddingVertical()}},t.prototype.toLabelDirection=function(t,n){return rr(null!=n?n:t.getLabelDirection(),M)},t.prototype.toLabelColor=function(t,n){return null!=n?n:t.getLabelColor()},t}(),lm=function(){function t(t){this.Sl=t,this.Or=0}return Object.defineProperty(t.prototype,"shapes",{get:function(){var t;return null!==(t=this.Fn)&&void 0!==t?t:this.Fn=this.newShapes()},enumerable:!1,configurable:!0}),t.prototype.newShapes=function(){var t,n=[],i=this.Sl.tick,r=i.major,e=r.gridline;if(i.enable&&e.enable)for(var u=r.capacity,s=null!==(t=e.style)&&void 0!==t?t:K.NONE,h=this.newShapePosition(),o=0;o<u;++o){var a=new fn;a.points.position=h,a.points.style=s,a.stroke.copy(e.stroke),n.push(a)}return n},t.prototype.newShapePosition=function(){switch(this.Sl.position){case hm.LEFT:case hm.RIGHT:return ot.LEFT;default:return ot.TOP}},t.prototype.bind=function(t,n){this.Xf=t,this.Or=n;for(var i=this.shapes,r=t.container,e=0,u=i.length;e<u;++e)i[e].attach(r)},t.prototype.unbind=function(){var t=this.Fn;if(null!=t)for(var n=0,i=t.length;n<i;++n)t[n].detach();this.Or=0,this.Xf=void 0},t.prototype.destroy=function(){var t=this.Fn;if(null!=t){for(var n=0,i=t.length;n<i;++n)t[n].destroy();t.length=0,this.Fn=void 0}this.Or=0,this.Xf=void 0},t}(),vm=function(){function t(t){this.Sl=t,this.Or=0,this.Tl=new lm(t)}return Object.defineProperty(t.prototype,"shapes",{get:function(){var t;return null!==(t=this.Fn)&&void 0!==t?t:this.Fn=this.newShapes()},enumerable:!1,configurable:!0}),t.prototype.newShapes=function(){var t,n=[],i=this.Sl.tick;if(i.enable)for(var r=i.major,e=r.capacity,u=r.size,s=r.position,h=null!==(t=r.style)&&void 0!==t?t:K.NONE,o=0;o<e;++o){var a=new fn;a.points.position=s,a.points.size=u,a.points.style=h,a.stroke.copy(r.stroke),a.text.copy(r.text),a.size.set(0,0),n.push(a)}return n},Object.defineProperty(t.prototype,"gridline",{get:function(){return this.Tl},enumerable:!1,configurable:!0}),t.prototype.bind=function(t,n){this.Xf=t,this.Or=n,this.Tl.bind(t,n);for(var i=this.shapes,r=t.container,e=0,u=i.length;e<u;++e)i[e].attach(r)},t.prototype.unbind=function(){var t=this.Fn;if(null!=t)for(var n=0,i=t.length;n<i;++n)t[n].detach();this.Tl.unbind(),this.Or=0,this.Xf=void 0},t.prototype.destroy=function(){var t=this.Fn;if(null!=t){for(var n=0,i=t.length;n<i;++n)t[n].destroy();t.length=0,this.Fn=void 0}this.Tl.destroy(),this.Or=0,this.Xf=void 0},t}(),bm=function(){function t(t){this.Sl=t,this.Or=0}return Object.defineProperty(t.prototype,"shapes",{get:function(){var t;return null!==(t=this.Fn)&&void 0!==t?t:this.Fn=this.newShapes()},enumerable:!1,configurable:!0}),t.prototype.newShapes=function(){var t,n=[],i=this.Sl.tick;if(i.enable)for(var r=i.minor,e=r.count,u=r.size,s=r.position,h=null!==(t=r.style)&&void 0!==t?t:K.NONE,o=0,a=(i.major.capacity+1)*e;o<a;++o){var c=new fn;c.points.position=s,c.points.size=u,c.points.style=h,c.stroke.copy(r.stroke),c.text.copy(r.text),c.size.set(0,0),n.push(c)}return n},t.prototype.bind=function(t,n){this.Xf=t,this.Or=n;for(var i=this.shapes,r=t.container,e=0,u=i.length;e<u;++e)i[e].attach(r)},t.prototype.unbind=function(){var t=this.Fn;if(null!=t)for(var n=0,i=t.length;n<i;++n)t[n].detach();this.Or=0,this.Xf=void 0},t.prototype.destroy=function(){var t=this.Fn;if(null!=t){for(var n=0,i=t.length;n<i;++n)t[n].destroy();t.length=0,this.Fn=void 0}this.Or=0,this.Xf=void 0},t}(),dm=function(){function t(t,n){this.from=t,this.to=n}return t.prototype.set=function(t,n){return null!=t&&(this.from=t),null!=n&&(this.to=n),this},t.prototype.add=function(t,n){return yo(t)||(this.from=yo(this.from)?t:Math.min(this.from,t)),yo(n)||(this.to=yo(this.to)?n:Math.max(this.to,n)),this},t.prototype.clear=function(){return this.from=NaN,this.to=NaN,this},t}(),gm=function(){function t(t,n){this.Sl=t,this.Or=0,this.Il=this.newMajor(t,n),this.Cl=this.newMinor(t,n),this.Nl=[],this.Al=[],this.Br=new dm(0,0)}return Object.defineProperty(t.prototype,"major",{get:function(){return this.Il},enumerable:!1,configurable:!0}),t.prototype.newMajor=function(t,n){return new vm(t)},Object.defineProperty(t.prototype,"minor",{get:function(){return this.Cl},enumerable:!1,configurable:!0}),t.prototype.newMinor=function(t,n){return new bm(t)},t.prototype.bind=function(t,n){this.Xf=t,this.Or=n,this.Il.bind(t,n),this.Cl.bind(t,n)},t.prototype.unbind=function(){this.Cl.unbind(),this.Il.unbind(),this.Or=0,this.Xf=void 0},t.prototype.update=function(){var t=this.Sl,n=this.Xf,i=this.Il.shapes,r=this.Cl.shapes;if(t.tick.enable&&null!=n&&i&&r){var e=n.plotArea,u=e.getAxisBounds(t.position),s=u.x,h=u.y,o=u.width,a=u.height,c=e.container.transform.localTransform,f=this.Il.gridline.shapes,l=t.padding*this.Or,v=this.Br,b=void 0;switch(t.position){case hm.TOP:if(b=e.coordinate.x.get(t.coordinate)){var d=(O=this.getDomain(e,b,v)).from,g=O.to,m=(p=this.getDomainVisible(e,b,v)).from,w=p.to;return this.updateX(d,g,m,w,b,i,r,f,h-l,c,h,a)}break;case hm.BOTTOM:var O,p;if(b=e.coordinate.x.get(t.coordinate))return d=(O=this.getDomain(e,b,v)).from,g=O.to,m=(p=this.getDomainVisible(e,b,v)).from,w=p.to,this.updateX(d,g,m,w,b,i,r,f,h+a+l,c,h,a);break;case hm.LEFT:if(b=e.coordinate.y.get(t.coordinate)){var D=(j=this.getRange(e,b,v)).from,E=j.to,M=(T=this.getRangeVisible(e,b,v)).from,S=T.to;return this.updateY(D,E,M,S,b,i,r,f,s-l,c,s,o)}break;case hm.RIGHT:var j,T;if(b=e.coordinate.y.get(t.coordinate))return D=(j=this.getRange(e,b,v)).from,E=j.to,M=(T=this.getRangeVisible(e,b,v)).from,S=T.to,this.updateY(D,E,M,S,b,i,r,f,s+o+l,c,s,o)}}return!1},t.prototype.getDomain=function(t,n,i){var r=t.getContainerBounds(),e=n.transform;return i.set(n.unmap(e.unmap(r.x)),n.unmap(e.unmap(r.x+r.width)))},t.prototype.getDomainVisible=function(t,n,i){return i},t.prototype.getRange=function(t,n,i){var r=t.getContainerBounds(),e=n.transform;return i.set(n.unmap(e.unmap(r.y)),n.unmap(e.unmap(r.y+r.height)))},t.prototype.getRangeVisible=function(t,n,i){return i},t.prototype.updateX=function(t,n,i,r,e,u,s,h,o,a,c,f){var l=this.Sl.tick,v=l.major,b=v.count,d=v.capacity,g=v.step,m=v.formatter,w=l.minor,O=w.count,p=(d+1)*O,D=w.step,E=w.formatter,M=this.Nl,S=this.Al;this.newTicks(e,t,n,i,r,b,d,g,O,p,D,M,S);for(var j=a.a,T=a.tx,I=0;I<d;++I){var C=u[I],N=3*I,A=M[N+0];if(isNaN(A))this.hideMajor(C),I<h.length&&this.hideMajorGridline(h[I]);else{var R=j*M[N+1]+T,y=M[N+2];this.showMajor(C,R,o,null==m?void 0:m.format(A,y)),I<h.length&&this.showMajorGridline(h[I],A,R,c+.5*f,0,f)}}for(I=0;I<p;++I){var k=s[I],L=3*I,x=S[L+0];if(isNaN(x))this.hideMinor(k);else{var B=j*S[L+1]+T,_=S[L+2];this.showMinor(k,B,o,null==E?void 0:E.format(x,_))}}return!0},t.prototype.updateY=function(t,n,i,r,e,u,s,h,o,a,c,f){var l=this.Sl.tick,v=l.major,b=v.count,d=v.capacity,g=v.step,m=v.formatter,w=l.minor,O=w.count,p=(d+1)*O,D=w.step,E=w.formatter,M=this.Nl,S=this.Al;this.newTicks(e,t,n,i,r,b,d,g,O,p,D,M,S);for(var j=a.d,T=a.ty,I=0;I<d;++I){var C=u[I],N=3*I,A=M[N+0];if(isNaN(A))this.hideMajor(C),I<h.length&&this.hideMajorGridline(h[I]);else{var R=j*M[N+1]+T,y=M[N+2];this.showMajor(C,o,R,null==m?void 0:m.format(A,y)),I<h.length&&this.showMajorGridline(h[I],A,c+.5*f,R,f,0)}}for(I=0;I<p;++I){var k=s[I],L=3*I,x=S[L+0];if(isNaN(x))this.hideMinor(k);else{var B=j*S[L+1]+T,_=S[L+2];this.showMinor(k,o,B,null==E?void 0:E.format(x,_))}}return!0},t.prototype.showMajor=function(t,n,i,r){t.lock(_t.UPLOADED),t.visible=!0,t.transform.position.set(n,i),t.text.value=null!=r?r:"",t.unlock(_t.UPLOADED,!0)},t.prototype.showMajorGridline=function(t,n,i,r,e,u){t.lock(_t.UPLOADED),t.visible=!0,t.transform.position.set(i,r),t.size.set(e,u),t.unlock(_t.UPLOADED,!0)},t.prototype.hideMajor=function(t){t.visible=!1},t.prototype.hideMajorGridline=function(t){t.visible=!1},t.prototype.showMinor=function(t,n,i,r){t.lock(_t.UPLOADED),t.visible=!0,t.transform.position.set(n,i),t.text.value=null!=r?r:"",t.unlock(_t.UPLOADED,!0)},t.prototype.hideMinor=function(t){t.visible=!1},t.prototype.newTicks=function(t,n,i,r,e,u,s,h,o,a,c,f,l){t.ticks(n,i,r,e,u,s,h,o,a,c,f,l)},t.prototype.destroy=function(){this.Il.destroy(),this.Cl.destroy(),this.Or=0,this.Xf=void 0},t}(),mm=function(){function t(t){var n=this.toTheme(t);this.Te=n;var i=this.newParser(n,t);this.Sl=i,this.Or=0,this.Rl=this.newBar(i,n,t),this.yl=this.newTick(i,n,t),this.kl=this.newGuide(i,n,t)}return t.prototype.newParser=function(t,n){return new fm(t,n)},Object.defineProperty(t.prototype,"position",{get:function(){return this.Sl.position},set:function(t){this.Sl.position=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coordinate",{get:function(){return this.Sl.coordinate},set:function(t){this.Sl.coordinate=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this.Sl.padding},set:function(t){this.Sl.padding=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bar",{get:function(){return this.Rl},enumerable:!1,configurable:!0}),t.prototype.newBar=function(t,n,i){return new om(t)},Object.defineProperty(t.prototype,"tick",{get:function(){return this.yl},enumerable:!1,configurable:!0}),t.prototype.newTick=function(t,n,i){return new gm(t)},Object.defineProperty(t.prototype,"guide",{get:function(){return this.kl},enumerable:!1,configurable:!0}),t.prototype.newGuide=function(t,n,i){for(var r=new am(this),e=t.guide.list,u=0,s=e.length;u<s;++u)r.add(e[u]);return r},t.prototype.bind=function(t,n){this.Xf=t,this.Or=n,this.Rl.bind(t,n),this.yl.bind(t,n),this.kl.bind(t,n)},t.prototype.unbind=function(){this.kl.unbind(),this.yl.unbind(),this.Rl.unbind(),this.Or=0,this.Xf=void 0},t.prototype.update=function(){var t=this.Rl.update(),n=this.yl.update(),i=this.kl.update();if(t||n||i){var r=this.Xf;r&&lt.update(r.plotArea)}},t.prototype.onRender=function(){this.Rl.update(),this.yl.update(),this.kl.update()},t.prototype.destroy=function(){this.Rl.destroy(),this.yl.destroy(),this.kl.destroy(),this.Xf=void 0},t.prototype.toTheme=function(t){var n;return null!==(n=null==t?void 0:t.theme)&&void 0!==n?n:this.getThemeDefault()},t.prototype.getThemeDefault=function(){return it.getInstance().get(this.getType())},t.prototype.getType=function(){return"DChartAxisBase"},t}(),wm=function(){function t(t,n,i){this.Ll=t,this.Xf=n,this.qe=new Map}return Object.defineProperty(t.prototype,"container",{get:function(){return this.Xf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"plotArea",{get:function(){return this.Ll},enumerable:!1,configurable:!0}),t.prototype.add=function(t){var n=this.qe,i=n.get(t.position);null==i&&(i=[],n.set(t.position,i)),i.push(t),t.bind(this,i.length-1)},t.prototype.get=function(t,n){var i=this.qe.get(rr(t,hm));return i&&0<=n&&n<i.length?i[n]:null},t.prototype.indexOf=function(t){var n=this.qe.get(t.position);return n?n.indexOf(t):-1},t.prototype.clear=function(t){var n=this.qe.get(rr(t,hm));if(n){for(var i=0,r=n.length;i<r;++i)n[i].destroy();n.length=0}return this},t.prototype.size=function(t){var n=this.qe.get(rr(t,hm));return n?n.length:0},t.prototype.update=function(){this.qe.forEach((function(t){for(var n=0,i=t.length;n<i;++n)t[n].update()}))},t.prototype.onRender=function(){this.qe.forEach((function(t){for(var n=0,i=t.length;n<i;++n)t[n].onRender()}))},t.prototype.destroy=function(){this.qe.forEach((function(t){for(var n=0,i=t.length;n<i;++n)t[n].destroy();t.length=0}))},t}(),Om=function(){function t(t){this.tu=t}return Object.defineProperty(t.prototype,"bar",{get:function(){var t=this.Rl;return void 0===t&&(t=this.newBar(),this.Rl=t),t},enumerable:!1,configurable:!0}),t.prototype.newBar=function(){var t,n,i=null!==(n=null===(t=this.tu)||void 0===t?void 0:t.bar)&&void 0!==n?n:{};if(!1!==i.enable){var r=new fn;return r.stroke.copy(this.toStrokeOptions(i.stroke,s.DASHED)),r.text.copy(this.toTextOptions(i.text)),r}return null},t.prototype.toStrokeOptions=function(t,n){var i;return{enable:(t=t||{}).enable,color:t.color,alpha:t.alpha,width:t.width,align:t.align,side:rr(t.side,Z),style:rr(null!==(i=t.style)&&void 0!==i?i:n,s)}},t.prototype.toTextOptions=function(t){return{value:(t=t||{}).value,color:t.color,alpha:t.alpha,family:t.family,size:t.size,weight:rr(t.weight,O),align:this.toTextAlignOptions(t.align),offset:t.offset,style:rr(t.style,p),outline:t.outline,spacing:t.spacing,direction:rr(t.direction,M),padding:t.padding,clipping:t.clipping,fitting:t.fitting}},t.prototype.toTextAlignOptions=function(t){return{horizontal:rr(null==(t=t||{})?void 0:t.horizontal,D),vertical:rr(null==t?void 0:t.vertical,E)}},t.prototype.toBarPosition=function(t){switch(t.position){case hm.LEFT:case hm.RIGHT:return ot.LEFT;default:return ot.TOP}},Object.defineProperty(t.prototype,"label",{get:function(){var t=this.fs;return void 0===t&&(t=this.newLabel(),this.fs=t),t},enumerable:!1,configurable:!0}),t.prototype.newLabel=function(){var t,n,i,r,e=null!==(n=null===(t=this.tu)||void 0===t?void 0:t.label)&&void 0!==n?n:{};if(!0===e.enable){var u=new Va;return u.stroke.copy(this.toStrokeOptions(e.stroke)),u.fill.copy(e.fill),u.text.copy(this.toTextOptions(e.text)),u.size.set(null!==(i=e.width)&&void 0!==i?i:50,null!==(r=e.height)&&void 0!==r?r:30),u}return null},Object.defineProperty(t.prototype,"labelMargin",{get:function(){var t=this.xl;return null==t&&(t=this.newLabelMargin(),this.xl=t),t},enumerable:!1,configurable:!0}),t.prototype.newLabelMargin=function(){var t=this.tu;if(null!=t){var n=t.label;if(null!=n){var i=n.margin;if(null!=i)return i}}return 10},Object.defineProperty(t.prototype,"tick",{get:function(){var t=this.yl;return void 0===t&&(t=this.newTick(),this.yl=t),t},enumerable:!1,configurable:!0}),t.prototype.newTick=function(){var t,n,i,r=null!==(n=null===(t=this.tu)||void 0===t?void 0:t.tick)&&void 0!==n?n:{};if(!0===r.enable){var e=new fn;e.stroke.copy(this.toStrokeOptions(r.stroke)),e.text.copy(this.toTextOptions(r.text));var u=null!==(i=r.size)&&void 0!==i?i:5;return e.size.set(u,u),e}return null},Object.defineProperty(t.prototype,"tickMargin",{get:function(){var t=this.Bl;return null==t&&(t=this.newTickMargin(),this.Bl=t),t},enumerable:!1,configurable:!0}),t.prototype.newTickMargin=function(){var t=this.tu;if(null!=t){var n=t.tick;if(null!=n){var i=n.margin;if(null!=i)return i}}return 0},t.prototype.toTickPosition=function(t){switch(t.position){case hm.LEFT:case hm.RIGHT:return ot.LEFT;default:return ot.TOP}},t.prototype.bind=function(t,n,i){var r=this.bar;null!=r&&(r.points.position=this.toBarPosition(i),r.attach(t.container));var e=this.label;null!=e&&e.attach(t.container);var u=this.tick;null!=u&&(u.points.position=this.toTickPosition(i),u.attach(t.container))},t.prototype.unbind=function(){var t=this.Rl;null!=t&&t.detach();var n=this.fs;null!=n&&n.detach();var i=this.yl;null!=i&&i.detach()},t.prototype.update=function(t,n,i,r,e,u,s){var h=this.Rl;if(null!=h){switch(h.lock(_t.UPLOADED),t){case hm.TOP:case hm.BOTTOM:h.transform.position.set(n,i),h.size.set(0,u),h.visible=r;break;case hm.LEFT:case hm.RIGHT:h.transform.position.set(n,i),h.size.set(e,0),h.visible=r}h.unlock(_t.UPLOADED,!0)}var o=this.fs;if(null!=o){var a=this.labelMargin,c=s+.5*(v=o.size).x+a,f=s+.5*v.y+a;switch(o.lock(_t.UPLOADED),t){case hm.TOP:o.transform.position.set(n,-f),o.visible=r;break;case hm.BOTTOM:o.transform.position.set(n,u+f),o.visible=r;break;case hm.LEFT:o.transform.position.set(-c,i),o.visible=r;break;case hm.RIGHT:o.transform.position.set(e+c,i),o.visible=r}o.unlock(_t.UPLOADED,!0)}var l=this.yl;if(null!=l){var v;switch(a=this.tickMargin,c=s+.5*(v=l.size).x+a,f=s+.5*v.y+a,l.lock(_t.UPLOADED),t){case hm.TOP:l.transform.position.set(n,-f),l.visible=r;break;case hm.BOTTOM:l.transform.position.set(n,u+f),l.visible=r;break;case hm.LEFT:l.transform.position.set(-c,i),l.visible=r;break;case hm.RIGHT:l.transform.position.set(e+c,i),l.visible=r}l.unlock(_t.UPLOADED,!0)}return!0},t.prototype.destroy=function(){var t=this.Rl;null!=t&&t.destroy();var n=this.fs;null!=n&&n.destroy();var i=this.yl;null!=i&&i.destroy()},t}(),pm=function(){function n(t){var n,i;this.tu=t,this.Or=0,null!=t?(this.B=null!==(n=t.position)&&void 0!==n?n:0,this._l=null!==(i=t.fixed)&&void 0!==i&&i):(this.B=0,this._l=!1),this.Pl=!0}return Object.defineProperty(n.prototype,"shape",{get:function(){var t=this.Vn;return null==t&&(t=this.newShape(),this.Vn=t),t},enumerable:!1,configurable:!0}),n.prototype.newShape=function(){return new Om(this.tu)},Object.defineProperty(n.prototype,"position",{get:function(){return this.B},set:function(t){this.B=t},enumerable:!1,configurable:!0}),n.prototype.show=function(){return this.Pl=!0,this},n.prototype.isShown=function(){return this.Pl},n.prototype.hide=function(){return this.Pl=!1,this},n.prototype.isHidden=function(){return!this.Pl},n.prototype.bind=function(t,n,i){this.Xf=t,this.Or=n,this.jl=i,this.shape.bind(t,n,i)},n.prototype.unbind=function(){var t=this.Vn;null!=t&&t.unbind(),this.jl=void 0,this.Or=0,this.Xf=void 0},n.prototype.update=function(){var t=this.Xf,n=this.Or,i=this.Vn,r=this.jl;if(null!=i&&null!=t&&null!=r){var e=t.plotArea,u=e.getAxisBounds(r.position),s=u.x,h=u.y,o=u.width,a=u.height,c=r.padding*n;switch(r.position){case hm.TOP:case hm.BOTTOM:var f=this.getPositionX(r,e,s);i.update(r.position,f,h+.5*a,this.Pl&&s<=f&&f<=s+o,o,a,c);break;case hm.LEFT:case hm.RIGHT:var l=this.getPositionY(r,e,h);i.update(r.position,s+.5*o,l,this.Pl&&h<=l&&l<=h+a,o,a,c)}return!0}return!1},n.prototype.getPositionX=function(i,r,e){var u,s;if(this._l){var h=null!==(u=n.WORK_REGION)&&void 0!==u?u:n.WORK_REGION=new dm(0,0);return r.getPixelDomain(h),h.from+this.B*(h.to-h.from)}var o=r.coordinate.x.get(i.coordinate);return o?((h=null!==(s=n.WORK_POINT)&&void 0!==s?s:n.WORK_POINT=new t.Point).set(o.transform.map(o.map(this.B)),0),r.container.transform.localTransform.apply(h,h),h.x):e-100},n.prototype.getPositionY=function(i,r,e){var u,s;if(this._l){var h=null!==(u=n.WORK_REGION)&&void 0!==u?u:n.WORK_REGION=new dm(0,0);return r.getPixelRange(h),h.to+(1-this.B)*(h.from-h.to)}var o=r.coordinate.y.get(i.coordinate);return o?((h=null!==(s=n.WORK_POINT)&&void 0!==s?s:n.WORK_POINT=new t.Point).set(0,o.transform.map(o.map(this.B))),r.container.transform.localTransform.apply(h,h),h.y):e-100},n.prototype.destroy=function(){var t=this.Vn;null!=t&&t.destroy(),this.Or=0,this.Xf=void 0},n}(),Dm=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DChartAxisX"},n}(mm),Em=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DChartAxisXDatetime"},n}(Dm),Mm=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DChartAxisY"},n}(mm),Sm=[1095651,16667680,15778578,1858929],jm=[Sm[0],gn.brighten(Sm[0],.4),Sm[1],gn.brighten(Sm[1],.4),Sm[2],gn.brighten(Sm[2],.4),Sm[3],gn.brighten(Sm[3],.4)],Tm=function(t){return jm[t%jm.length]},Im={X:0,Y:1},Cm=function(){function t(t){this.Te=this.toTheme(t),this.A=0,this.Ul=null==t?void 0:t.translation,this.Fl=0,this.Gl=null==t?void 0:t.scaling,this.Qe=1,this.Hl=0,this.zl=1}return Object.defineProperty(t.prototype,"id",{get:function(){return this.A},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"translate",{get:function(){return this.Fl},set:function(t){this.set(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.Qe},set:function(t){this.set(void 0,t)},enumerable:!1,configurable:!0}),t.prototype.bind=function(t,n){this.set(0,n===Im.X?1:-1)},t.prototype.unbind=function(){},t.prototype.set=function(t,n){var i=!1;null!=t&&!1!==this.Ul&&this.Fl!==t&&(i=!0,this.Fl=t),null!=n&&!1!==this.Gl&&this.Qe!==n&&(i=!0,this.Qe=n),i&&(this.A+=1,this.zl=this.Te.isZero(this.Qe)?0:1/this.Qe,this.Hl=-this.Fl*this.zl)},t.prototype.blend=function(t,n){var i=1-t,r=n.newTranslate*t+n.oldTranslate*i,e=n.newScale*t+n.oldScale*i;this.set(r,e)},t.prototype.map=function(t){return this.Fl+this.Qe*t},t.prototype.mapAll=function(t,n,i,r,e){for(var u=this.Fl,s=this.Qe,h=n+e;h<i;h+=r)t[h]=u+s*t[h]},t.prototype.unmap=function(t){return this.Hl+this.zl*t},t.prototype.unmapAll=function(t,n,i,r,e){for(var u=this.Hl,s=this.zl,h=n+e;h<i;h+=r)t[h]=u+s*t[h]},t.prototype.toTheme=function(t){return t&&t.theme||this.getThemeDefault()},t.prototype.getThemeDefault=function(){return it.getInstance().get(this.getType())},t.prototype.getType=function(){return"DChartCoordinateTransform"},t}(),Nm=function(){function t(){this.oldTranslate=0,this.oldScale=1,this.newTranslate=0,this.newScale=1}return t.prototype.set=function(t,n){null!=t&&(this.newTranslate=t),null!=n&&(this.newScale=n)},t}(),Am=function(){function t(t){this.A=0,this.rn=Im.X,this.Te=this.toTheme(t),this.T=this.newTransform(null==t?void 0:t.transform),this.yl=this.newTick(null==t?void 0:t.tick),this.Br=this.newRegion(),this.Vl=this.newMark(),this.Lt=null==t?void 0:t.from,this.xt=null==t?void 0:t.to}return t.prototype.newTransform=function(t){return new Cm(t)},t.prototype.newRegion=function(){return new dm(NaN,NaN)},t.prototype.newMark=function(){return new Nm},Object.defineProperty(t.prototype,"from",{get:function(){return this.Lt},set:function(t){this.Lt=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.xt},set:function(t){this.xt=t},enumerable:!1,configurable:!0}),t.prototype.bind=function(t,n){this.Xf=t,this.rn=n,this.T.bind(t,n)},t.prototype.unbind=function(){this.Xf=void 0,this.T.unbind()},t.prototype.fit=function(t,n){this.doFit(t,n,this.T)},t.prototype.mark=function(t,n){var i=this.Vl,r=this.T;i.oldTranslate=r.translate,i.oldScale=r.scale,this.doFit(t,n,i)},t.prototype.blend=function(t){this.T.blend(t,this.Vl)},t.prototype.doFit=function(t,n,i){var r=this.Xf;if(r){var e=r.container.plotArea,u=this.Br;switch(this.rn){case Im.X:this.getPixelDomain(e,u),this.Wl(u.from,u.to,this.toFitDomain(t,n,e,u),i);break;case Im.Y:this.getPixelRange(e,u),this.Wl(u.from,u.to,this.toFitRange(t,n,e,u),i)}}},t.prototype.getPixelDomain=function(t,n){return t.getPixelDomain(n)},t.prototype.getPixelRange=function(t,n){return t.getPixelRange(n)},t.prototype.toFitDomain=function(t,n,i,r){return null==t&&(t=this.Lt),null==n&&(n=this.xt),null!=t&&null!=n||i.series.getDomain(this,r),r.set(t,n),r},t.prototype.toFitRange=function(t,n,i,r){return null==t&&(t=this.Lt),null==n&&(n=this.xt),null!=t&&null!=n||i.series.getRange(this,r),r.set(t,n),r},t.prototype.Wl=function(t,n,i,r){var e=i.from,u=i.to;if(!yo(e)&&!yo(u)){var s,h=this.map(e),o=this.map(u)-h,a=t-h*(s=this.Te.isZero(o)?n<t?-1:1:(n-t)/o);r.set(a,s)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.A},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transform",{get:function(){return this.T},enumerable:!1,configurable:!0}),t.prototype.map=function(t){return t},t.prototype.mapAll=function(t,n,i,r,e){},t.prototype.unmap=function(t){return t},t.prototype.unmapAll=function(t,n,i,r,e){},t.prototype.ticks=function(t,n,i,r,e,u,s,h,o,a,c,f){this.yl.calculate(t,n,i,r,e,u,s,h,o,a,c,f,this)},t.prototype.toTheme=function(t){var n;return null!==(n=null==t?void 0:t.theme)&&void 0!==n?n:this.getThemeDefault()},t.prototype.getThemeDefault=function(){return it.getInstance().get(this.getType())},t.prototype.getType=function(){return"DChartCoordinate"},t}(),Rm=function(){function t(t,n){this.Xf=t,this.rn=n,this.qe=[]}return Object.defineProperty(t.prototype,"container",{get:function(){return this.Xf},enumerable:!1,configurable:!0}),t.prototype.add=function(t,n){var i=this.qe;return null==n?i.push(t):0<=n&&n<i.length?i.splice(n,0,t):i.push(t),t.bind(this,this.rn),this},t.prototype.get=function(t){var n=this.qe;return 0<=t&&t<n.length?n[t]:null},t.prototype.indexOf=function(t){return this.qe.indexOf(t)},t.prototype.remove=function(t){var n=this.qe;if(jt(t)){if(0<=(r=t)&&r<n.length){var i=n.splice(r,1)[0];return i.unbind(),i}}else{var r,e=t;if(0<=(r=n.indexOf(e)))return n.splice(r,1),e.unbind(),e}return null},t.prototype.clear=function(){for(var t=this.qe,n=0,i=t.length;n<i;++n)t[n].unbind();return t.length=0,this},t.prototype.destroy=function(){return this.clear()},t.prototype.size=function(){return this.qe.length},t.prototype.fit=function(t,n){for(var i=this.qe,r=0,e=i.length;r<e;++r)i[r].fit(t,n);return this},t.prototype.mark=function(t,n){for(var i=this.qe,r=0,e=i.length;r<e;++r)i[r].mark(t,n);return this},t.prototype.blend=function(t){for(var n=this.qe,i=0,r=n.length;i<r;++i)n[i].blend(t);return this},t}(),ym=function(){function t(t,n){this.Ll=t;var i=new Rm(this,Im.X);this._x=i;var r=new Rm(this,Im.Y);if(this._y=r,n){var e=n.x;if(e)if(Mt(e))for(var u=0,s=e.length;u<s;++u)i.add(e[u]);else i.add(e);var h=n.y;if(h)if(Mt(h))for(u=0,s=h.length;u<s;++u)r.add(h[u]);else r.add(h)}}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"plotArea",{get:function(){return this.Ll},enumerable:!1,configurable:!0}),t.prototype.fit=function(t,n,i,r){return this._x.fit(t,n),this._y.fit(i,r),this},t.prototype.mark=function(t,n,i,r){return this._x.mark(t,n),this._y.mark(i,r),this},t.prototype.blend=function(t){return this._x.blend(t),this._y.blend(t),this},t}(),km=function(){function t(t){this.Te=this.toTheme(t)}return t.prototype.toMajorStep=function(t,n,i,r){return null==r?0<i?this.Te.toStep(t,n,i):-1:jt(r)?r:r(t,n,i)},t.prototype.toMinorStep=function(t,n,i){return null==i?0<=t?this.calcStepMinor(t,n):-1:jt(i)?i:i(t,n)},t.prototype.calcStepMinor=function(t,n){return t/(n+1)},t.prototype.calcTickMinorPositions=function(t,n,i,r,e,u,s){for(var h=0;h<n;h+=1){var o=i+(h+1)*t;r<=o&&o<=e&&(s[u++]=o)}},t.prototype.calculate=function(t,n,i,r,e,u,s,h,o,a,c,f,l){if(!(e<=0)){var v=l.transform,b=Math.min(t,n),d=Math.max(t,n),g=Math.min(i,r),m=Math.max(i,r),w=l.map(g),O=l.map(m),p=Math.min(w,O),D=Math.max(w,O),E=l.map(b),M=l.map(d),S=Math.min(E,M),j=Math.max(E,M),T=Math.max(p,S),I=Math.min(D,j),C=0,N=0,A=this.toMajorStep(E,M,e,s);if(A<=0)T<=E&&E<=I&&(c[0]=b,c[1]=v.map(E),c[2]=0,C+=1);else for(var R=Math.floor(E/A)-1,y=Math.ceil(M/A)+1,k=this.toMinorStep(A,h,a),L=R;L<=y;++L){var x=L*A;C<u&&T<=x&&x<=I&&(c[0+(P=3*C)]=l.unmap(x),c[P+1]=v.map(x),c[P+2]=A,C+=1);for(var B=0;B<h;B+=1)if(N<o){var _=x+(B+1)*k;T<=_&&_<=I&&(f[0+(U=3*N)]=l.unmap(_),f[U+1]=v.map(_),f[U+2]=k,N+=1)}}for(L=C;L<u;++L){var P;c[0+(P=3*L)]=NaN,c[P+1]=NaN,c[P+2]=NaN}for(L=N;L<o;++L){var U;f[0+(U=3*L)]=NaN,f[U+1]=NaN,f[U+2]=NaN}}},t.prototype.toTheme=function(t){var n;return null!==(n=null==t?void 0:t.theme)&&void 0!==n?n:this.getThemeDefault()},t.prototype.getThemeDefault=function(){return it.getInstance().get(this.getType())},t.prototype.getType=function(){return"DChartCoordinateTick"},t}(),Lm=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newTick=function(t){return new km(t)},n}(Am),xm=function(){function t(t){this.Te=this.toTheme(t)}return t.prototype.toMajorStep=function(t,n,i,r){return null==r?0<i?this.Te.toStep(t,n,i):-1:jt(r)?r:r(t,n,i)},t.prototype.toMinorStep=function(t,n,i){return null==i?0<=t?this.calcStepMinor(t,n):-1:jt(i)?i:i(t,n)},t.prototype.calcStepMinor=function(t,n){return t/(n+1)},t.prototype.calcTickMinorPositions=function(t,n,i,r,e,u,s){for(var h=0;h<n;h+=1){var o=i+(h+1)*t;r<=o&&o<=e&&(s[u++]=o)}},t.prototype.calculate=function(t,n,i,r,e,u,s,h,o,a,c,f,l){if(!(e<=0)){var v=l.transform,b=Math.min(t,n),d=Math.max(t,n),g=Math.min(i,r),m=Math.max(i,r),w=l.map(g),O=l.map(m),p=Math.min(w,O),D=Math.max(w,O),E=l.map(b),M=l.map(d),S=Math.min(E,M),j=Math.max(E,M),T=Math.max(p,S),I=Math.min(D,j),C=0,N=0,A=this.toMajorStep(E,M,e,s);if(A<=0)T<=E&&E<=I&&(c[0]=b,c[1]=v.map(E),c[2]=0,C+=1);else for(var R=Math.floor(E/A)-1,y=Math.ceil(M/A)+1,k=this.toMinorStep(A,h,a),L=R;L<=y;++L){var x=L*A;C<u&&T<=x&&x<=I&&(c[0+(P=3*C)]=l.unmap(x),c[P+1]=v.map(x),c[P+2]=l.unmap(x-1),C+=1);for(var B=0;B<h;B+=1)if(N<o){var _=x+(B+1)*k;T<=_&&_<=I&&(f[0+(U=3*N)]=l.unmap(_),f[U+1]=v.map(_),f[U+2]=l.unmap(_-1),N+=1)}}for(L=C;L<u;++L){var P;c[0+(P=3*L)]=NaN,c[P+1]=NaN,c[P+2]=NaN}for(L=N;L<o;++L){var U;f[0+(U=3*L)]=NaN,f[U+1]=NaN,f[U+2]=NaN}}},t.prototype.toTheme=function(t){var n;return null!==(n=null==t?void 0:t.theme)&&void 0!==n?n:this.getThemeDefault()},t.prototype.getThemeDefault=function(){return it.getInstance().get(this.getType())},t.prototype.getType=function(){return"DChartCoordinateTick"},t}(),Bm=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newTick=function(t){return new xm(t)},n.prototype.map=function(t){return Math.log(Math.max(0,t))/Math.LN10},n.prototype.mapAll=function(t,n,i,r,e){for(var u=1/Math.LN10,s=n+e;s<i;s+=r){var h=t[s];t[s]=Math.log(Math.max(0,h))*u}},n.prototype.unmap=function(t){return Math.pow(10,t)},n.prototype.unmapAll=function(t,n,i,r,e){for(var u=n+e;u<i;u+=r)t[u]=Math.pow(10,t[u])},n}(Am),_m=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DChartLegendItem"},n}(ru),Pm=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DChartLegend"},n}(ru),Um=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DChartOverview"},n}(ru),Fm=function(n){function i(i,r){var e=n.call(this,r)||this;return e.Xl=!0,e.Kl=new t.Rectangle,e.Af=new t.Point,e.Yl=new t.Rectangle,e.Jl=i,e.Zl=0,e.ql=1e3,e.Ql=null,e.$l=function(){e.onBlend()},e.tv=!0,e.Ju=e.newView(r),e}return G(i,n),i.prototype.onResize=function(t,i,r,e){this.tv=!0,this.Xl=!0,n.prototype.onResize.call(this,t,i,r,e)},Object.defineProperty(i.prototype,"chart",{get:function(){return this.Jl},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"view",{get:function(){return this.Ju},enumerable:!1,configurable:!0}),i.prototype.onWheel=function(t,i,r){var e=this.Ju.onWheel(t,i,r),u=n.prototype.onWheel.call(this,t,i,r);return e||u},i.prototype.onDblClick=function(t,i){var r=this.Ju.onDblClick(t,i),e=n.prototype.onDblClick.call(this,t,i);return r||e},i.prototype.onDown=function(t){this.Ju.onDown(t),n.prototype.onDown.call(this,t)},i.prototype.render=function(t){this.tv&&(this.tv=!1,this.onViewDirty()),n.prototype.render.call(this,t)},i.prototype.getPixelDomain=function(t){var n=this.padding;return t.set(n.getLeft(),this.width-n.getRight())},i.prototype.getPixelRange=function(t){var n=this.padding;return t.set(this.height-n.getBottom(),n.getTop())},i.prototype.getPixelBounds=function(){var t=this.Yl;return t.x=0,t.y=0,t.width=this.width,t.height=this.height,t},i.prototype.getAxisBounds=function(t){return this.getPixelBounds()},i.prototype.getSelectionBoundsX=function(){return this.getPixelBounds()},i.prototype.getSelectionBoundsY=function(){return this.getPixelBounds()},i.prototype.getContainerBounds=function(){var t=this.Kl;if(this.Xl){this.Xl=!1;var n=this.container;n.updateTransform();var i=n.transform.localTransform,r=this.Af;r.set(0,0),i.applyInverse(r,r),t.x=r.x,t.y=r.y,r.set(this.width,this.height),i.applyInverse(r,r),t.width=r.x-t.x,t.height=r.y-t.y}return t},i.prototype.getType=function(){return"DChartPlotArea"},i}(ru),Gm=function(n){function i(i){var r=n.call(this)||this,e=r.transform;return r.B=new Le(e.position,i),r.Qe=new Le(e.scale,i),r.Au=new t.Rectangle,r}return G(i,n),Object.defineProperty(i.prototype,"position",{get:function(){return this.B},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scale",{get:function(){return this.Qe},enumerable:!1,configurable:!0}),i.prototype.getBounds=function(t,i){return this._lastBoundsID=-1,n.prototype.getBounds.call(this,t,i)},i.prototype.calculateBounds=function(){var t=this._bounds,n=this.Br,i=this.Au,r=this.transform.worldTransform,e=0,u=0,s=0,h=0,o=this.children;if(0<o.length)for(var a=!0,c=0,f=o.length;c<f;++c){var l=o[c];l.visible&&(l.getBoundsInternal(!1,i),a?(a=!1,e=i.x,s=i.y,u=i.x+i.width,h=i.y+i.height):(e=Math.min(e,i.x),s=Math.min(s,i.y),u=Math.max(u,i.x+i.width),h=Math.max(h,i.y+i.height)))}t.clear(),n.set(e,s),r.apply(n,n),t.addPoint(n),n.set(u,h),r.apply(n,n),t.addPoint(n)},i}(ie),Hm=function(){function t(){this.shape=null,this.x=0,this.y=0,this.p0x=0,this.p0y=0,this.p1x=0,this.p1y=0,this.index=0,this.t=0,this.distance=0}return t.prototype.copyFrom=function(t){return this.shape=t.shape,this.x=t.x,this.y=t.y,this.p0x=t.p0x,this.p0y=t.p0y,this.p1x=t.p1x,this.p1y=t.p1y,this.index=t.index,this.t=t.t,this.distance=t.distance,this},t}(),zm=function(){function t(t,n,i){this.enable=t,this.color=n,this.alpha=i}return t.from=function(n,i,r){var e,u,s;return new t(null!==(e=null==r?void 0:r.enable)&&void 0!==e?e:n.enable(i),null!==(u=null==r?void 0:r.color)&&void 0!==u?u:n.color(i),null!==(s=null==r?void 0:r.alpha)&&void 0!==s?s:n.alpha(i))},t}(),Vm=function(){function t(){}return t.from=function(t,n){return Mt(t)?function(n){return t[n%t.length]}:St(t)?t:null!=t?function(){return t}:Mt(n)?function(t){return n[t%n.length]}:St(n)?n:function(){return n}},t}(),Wm=function(t){this.enable=Vm.from(null==t?void 0:t.enable,!0),this.color=Vm.from(null==t?void 0:t.color,Tm),this.alpha=Vm.from(null==t?void 0:t.alpha,rt.FILL_ALPHA)},Xm=function(){function t(t,n){this.outer=t,this.inner=n}return t.from=function(n,i,r){var e,u;return new t(null!==(e=null==r?void 0:r.outer)&&void 0!==e?e:n.outer(i),null!==(u=null==r?void 0:r.inner)&&void 0!==u?u:n.inner(i))},t}(),Km=function(t){this.outer=Vm.from(null==t?void 0:t.outer,.2),this.inner=Vm.from(null==t?void 0:t.inner,.1)},Ym=function(){function t(t,n){this.x=t,this.y=n}return t.from=function(n,i,r,e,u){var s,h;return new t(null!==(s=null==r?void 0:r.x)&&void 0!==s?s:null!=n.x?n.x(i):e,null!==(h=null==r?void 0:r.y)&&void 0!==h?h:null!=n.y?n.y(i):u)},t}(),Jm=function(t){t&&(null!=t.x&&(this.x=Vm.from(t.x,0)),null!=t.y&&(this.y=Vm.from(t.y,0)))},Zm=function(){function t(t,n,i,r,e,u,s){this.enable=t,this.color=n,this.alpha=i,this.width=r,this.align=e,this.side=u,this.style=s}return t.from=function(n,i,r){var e,u,s,h,o,a,c;return new t(null!==(e=null==r?void 0:r.enable)&&void 0!==e?e:n.enable(i),null!==(u=null==r?void 0:r.color)&&void 0!==u?u:n.color(i),null!==(s=null==r?void 0:r.alpha)&&void 0!==s?s:n.alpha(i),null!==(h=null==r?void 0:r.width)&&void 0!==h?h:n.width(i),null!==(o=null==r?void 0:r.align)&&void 0!==o?o:n.align(i),null!==(a=null==r?void 0:r.side)&&void 0!==a?a:n.side(i),null!==(c=null==r?void 0:r.style)&&void 0!==c?c:n.style(i))},t}(),qm=function(t){this.enable=Vm.from(null==t?void 0:t.enable,!0),this.color=Vm.from(null==t?void 0:t.color,Tm),this.alpha=Vm.from(null==t?void 0:t.alpha,rt.STROKE_ALPHA),this.width=Vm.from(null==t?void 0:t.width,rt.STROKE_WIDTH),this.align=Vm.from(null==t?void 0:t.width,rt.STROKE_ALIGN),this.side=Vm.from(null==t?void 0:t.side,Z.ALL),this.style=Vm.from(null==t?void 0:t.style,s.NON_SCALING)},Qm=function(){function t(t,n){this.Ll=t,this.nv=new dm(NaN,NaN),this.iv=new dm(NaN,NaN),this.Qf=null,this.I=new Wm(null==n?void 0:n.fill),this.Oa=new qm(null==n?void 0:n.stroke),this.j=new Jm(null==n?void 0:n.size),this.Ne=new Jm(null==n?void 0:n.offset),this.au=new Km(null==n?void 0:n.padding),this.qe=[]}return t.prototype.newFill=function(t,n){return zm.from(this.I,t,n)},t.prototype.newStroke=function(t,n){return Zm.from(this.Oa,t,n)},t.prototype.newSize=function(t,n,i,r){return Ym.from(this.j,t,n,i,r)},t.prototype.newOffset=function(t,n,i,r){return Ym.from(this.Ne,t,n,i,r)},t.prototype.newPadding=function(t,n){return Xm.from(this.au,t,n)},Object.defineProperty(t.prototype,"plotArea",{get:function(){return this.Ll},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){return this.Qf},set:function(t){this.Qf=t},enumerable:!1,configurable:!0}),t.prototype.update=function(){for(var t=this.qe,n=0,i=t.length;n<i;++n)t[n].update();var r=this.Qf;r&&r.update()},t.prototype.onRender=function(){for(var t=this.qe,n=0,i=t.length;n<i;++n)t[n].onRender();var r=this.Qf;r&&r.onRender()},t.prototype.add=function(t){var n=this.qe;t.bind(this,n.length),n.push(t)},t.prototype.get=function(t){var n=this.qe;return 0<=t&&t<n.length?n[t]:null},t.prototype.indexOf=function(t){return this.qe.indexOf(t)},t.prototype.clear=function(){for(var t=this.qe,n=0,i=t.length;n<i;++n)t[n].destroy();return t.length=0,this},t.prototype.size=function(){return this.qe.length},t.prototype.destroy=function(){this.clear();var t=this.Qf;t&&t.unbind()},t.prototype.getDomain=function(t,n){n.clear();for(var i=this.qe,r=0,e=i.length;r<e;++r){var u=i[r];if(u.coordinate.x===t){var s=u.domain;n.add(s.from,s.to)}}return n},t.prototype.getRange=function(t,n){n.clear();for(var i=this.qe,r=0,e=i.length;r<e;++r){var u=i[r];if(u.coordinate.y===t){var s=u.range;n.add(s.from,s.to)}}return n},Object.defineProperty(t.prototype,"domain",{get:function(){var t=this.nv;t.clear();for(var n=this.qe,i=0,r=n.length;i<r;++i){var e=n[i].domain;t.add(e.from,e.to)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"range",{get:function(){var t=this.iv;t.clear();for(var n=this.qe,i=0,r=n.length;i<r;++i){var e=n[i].range;t.add(e.from,e.to)}return t},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(t,n){for(var i=this.qe,r=i.length-1;0<=r;--r){var e=i[r];if(e.hitTest(t,n))return e}return null},t.prototype.calcHitPoint=function(n,i,r){var e=r,u=t.WORK_CALCHITPOINT,s=this.qe,h=null;u.distance=1/0;for(var o=s.length-1;0<=o;--o){var a=s[o];if(a.calcHitPoint(n,i,e)&&e.distance<u.distance){h=a;var c=e;e=u,u=c}}return h&&u!==r&&r.copyFrom(u),h},t.WORK_CALCHITPOINT=new Hm,t}(),$m=function(t){function n(n,i){var r,e=t.call(this,n,i)||this,u=new Gm((function(){e.tv=!0,e.Xl=!0,lt.update(e)}));e.Xf=u,e.addChild(u),(null!==(r=null==i?void 0:i.mask)&&void 0!==r?r:e.theme.isOverflowMaskEnabled())&&(u.mask=e.getOverflowMask()),e.tv=!0,e.Ju=new ou(e,(function(){return u}),null==i?void 0:i.view),e.rv=new ym(e,null==i?void 0:i.coordinate);var s=null==i?void 0:i.series,h=new Qm(e,s);e.ev=h;var o=null==i?void 0:i.axis,a=new wm(e,new ie,o);e.jl=a,e.addChild(a.container),e.addSeries(h,null==s?void 0:s.list),e.addAxes(a,null==o?void 0:o.list);var c=null==s?void 0:s.selection;return null!=c&&(h.selection=c,c.bind(h)),e}return G(n,t),n.prototype.getOverflowMask=function(){return null==this.Zu&&(this.Zu=new eu(this),this.reflowable.add(this.Zu),this.toDirty()),this.Zu},n.prototype.addSeries=function(t,n){if(null!=n){var i=n.length;if(0<i){for(var r=0;r<i;++r)t.add(n[r]);t.update()}}},n.prototype.addAxes=function(t,n){if(null!=n)for(var i=0,r=n.length;i<r;++i)t.add(n[i])},Object.defineProperty(n.prototype,"coordinate",{get:function(){return this.rv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"series",{get:function(){return this.ev},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"container",{get:function(){return this.Xf},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"axis",{get:function(){return this.jl},enumerable:!1,configurable:!0}),n.prototype.newView=function(t){var n=this;return new ou(this,(function(){return n.Xf}),null==t?void 0:t.view)},n.prototype.onViewDirty=function(){this.rv.fit(),this.jl.onRender(),this.ev.onRender()},n.prototype.fit=function(t,n,i,r,e){var u=this.rv,s=this.jl,h=this.ev;if(null!=t&&t<=0)u.fit(n,i,r,e),s.update(),h.update();else{this.ql=null!=t?t:200,this.Zl=Date.now(),u.mark(n,i,r,e);var o=this.Ql;null!=o&&window.clearTimeout(o),this.Ql=window.setTimeout(this.$l,0)}return this},n.prototype.onBlend=function(){var t=(Date.now()-this.Zl)/this.ql;t<1?this.Ql=window.setTimeout(this.$l,0):(this.Ql=null,t=1),this.rv.blend(ae.ELASTIC(t)),this.jl.update(),this.ev.update()},n.prototype.destroy=function(){this.Xf.destroy(),this.ev.destroy(),this.jl.destroy()},n}(Fm),tw=function(){function t(t,n,i,r){this.Ll=t,this.Xf=n,this.qe=new Map,this.uv=i,this.sv=r}return Object.defineProperty(t.prototype,"container",{get:function(){return this.Xf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"plotArea",{get:function(){return this.Ll},enumerable:!1,configurable:!0}),t.prototype.add=function(t){var n=this.qe,i=n.get(t.position);null==i&&(i=[],n.set(t.position,i)),i.push(t),t.bind(this,i.length-1)},t.prototype.get=function(t,n){var i=this.uv,r=i.size(t);if(0<=n&&n<r)return i.get(t,n);var e=this.sv,u=e.size(t);if(r<=n&&n<r+u)return e.get(t,n-r);var s=this.qe.get(rr(t,hm));return s&&r+u<=n&&n<r+u+s.length?s[n-r-u]:null},t.prototype.indexOf=function(t){var n=this.uv,i=n.indexOf(t);if(0<=i)return i;var r=this.sv;if(0<=(i=r.indexOf(t)))return n.size(t.position)+i;var e=this.qe.get(t.position);return e?n.size(t.position)+r.size(t.position)+e.indexOf(t):-1},t.prototype.clear=function(t){this.uv.clear(t),this.sv.clear(t);var n=this.qe.get(rr(t,hm));if(n){for(var i=0,r=n.length;i<r;++i)n[i].destroy();n.length=0}return this},t.prototype.size=function(t){var n=this.qe.get(rr(t,hm));return this.uv.size(t)+this.sv.size(t)+(null!=n?n.length:0)},t.prototype.update=function(){this.uv.update(),this.sv.update(),this.qe.forEach((function(t){for(var n=0,i=t.length;n<i;++n)t[n].update()}))},t.prototype.onRender=function(){this.uv.onRender(),this.sv.onRender(),this.qe.forEach((function(t){for(var n=0,i=t.length;n<i;++n)t[n].onRender()}))},t.prototype.destroy=function(){this.uv.destroy(),this.sv.destroy(),this.qe.forEach((function(t){for(var n=0,i=t.length;n<i;++n)t[n].destroy();t.length=0}))},t}(),nw=function(){function t(t,n,i){this.Xf=t,this.uv=n,this.sv=i}return Object.defineProperty(t.prototype,"container",{get:function(){return this.Xf},enumerable:!1,configurable:!0}),t.prototype.add=function(t,n){if(null!=n){var i=this.uv,r=i.size();return n<r?0<=n&&i.add(t,n):this.sv.add(t,n-r),this}return this.sv.add(t),this},t.prototype.get=function(t){var n=this.uv,i=n.size();if(0<=t&&t<i)return n.get(t);var r=this.sv,e=r.size();return i<=t&&t<i+e?r.get(t-i):null},t.prototype.indexOf=function(t){var n=this.uv,i=n.indexOf(t);return 0<=i?i:0<=(i=this.sv.indexOf(t))?n.size()+i:-1},t.prototype.remove=function(t){if(jt(t)){var n=t,i=this.uv,r=i.size();if(0<=n&&n<r)return i.remove(n);var e=this.sv,u=e.size();if(r<=n&&n<r+u)return e.remove(n-r)}else{var s=t,h=this.uv.remove(s);if(null!=h)return h;if(null!=(h=this.sv.remove(s)))return h}return null},t.prototype.clear=function(){return this.uv.clear(),this.sv.clear(),this},t.prototype.destroy=function(){return this.clear()},t.prototype.size=function(){return this.uv.size()+this.sv.size()},t.prototype.fit=function(t,n){return this.uv.fit(t,n),this.sv.fit(t,n),this},t.prototype.mark=function(t,n){return this.uv.mark(t,n),this.sv.mark(t,n),this},t.prototype.blend=function(t){return this.uv.blend(t),this.sv.blend(t),this},t}(),iw=function(){function t(t,n,i){this.Ll=t,this.uv=n,this.sv=i,this._x=new nw(this,n.x,i.x),this._y=new nw(this,n.y,i.y)}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"plotArea",{get:function(){return this.Ll},enumerable:!1,configurable:!0}),t.prototype.fit=function(t,n,i,r){return this._x.fit(t,n),this._y.fit(i,r),this},t.prototype.mark=function(t,n,i,r){return this._x.mark(t,n),this._y.mark(i,r),this},t.prototype.blend=function(t){return this._x.blend(t),this._y.blend(t),this},t}(),rw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.onReflow=function(t,n,i){if(!this.du||this.At!==n||this.rr!==i){this.du=!0,this.At=n,this.rr=i;var r=.5*i;this.clear(),this.beginFill(16777215,1),this.drawRect(0,0,n,r),this.endFill()}},n}(ch),ew=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.onReflow=function(t,n,i){if(!this.du||this.At!==n||this.rr!==i){this.du=!0,this.At=n,this.rr=i;var r=.5*i;this.clear(),this.beginFill(16777215,1),this.drawRect(0,r,n,r),this.endFill()}},n}(ch),uw=function(){function t(t,n,i){this.Ll=t,this.uv=n,this.sv=i,this.nv=new dm(NaN,NaN),this.iv=new dm(NaN,NaN)}return t.prototype.newFill=function(t,n){return this.sv.newFill(t,n)},t.prototype.newStroke=function(t,n){return this.sv.newStroke(t,n)},t.prototype.newSize=function(t,n,i,r){return this.sv.newSize(t,n,i,r)},t.prototype.newOffset=function(t,n,i,r){return this.sv.newOffset(t,n,i,r)},t.prototype.newPadding=function(t,n){return this.sv.newPadding(t,n)},Object.defineProperty(t.prototype,"plotArea",{get:function(){return this.Ll},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){return this.sv.selection},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.uv.update(),this.sv.update();var t=this.sv.selection;t&&t.update()},t.prototype.onRender=function(){this.uv.onRender(),this.sv.onRender();var t=this.sv.selection;t&&t.onRender()},t.prototype.add=function(t){this.sv.add(t)},t.prototype.get=function(t){var n=this.uv,i=n.size();if(0<=t&&t<i)return n.get(t);var r=this.sv,e=r.size();return i<=t&&t<i+e?r.get(t-i):null},t.prototype.indexOf=function(t){var n=this.uv,i=n.indexOf(t);return 0<=i?i:0<=(i=this.sv.indexOf(t))?n.size()+i:-1},t.prototype.clear=function(){return this.uv.clear(),this.sv.clear(),this},t.prototype.size=function(){return this.uv.size()+this.sv.size()},t.prototype.destroy=function(){this.clear();var t=this.sv.selection;t&&t.unbind()},t.prototype.getDomain=function(t,n){this.uv.getDomain(t,n);var i=n.from,r=n.to;return this.sv.getDomain(t,n),n.add(i,r),n},t.prototype.getRange=function(t,n){n.clear(),this.uv.getRange(t,n);var i=n.from,r=n.to;return this.sv.getRange(t,n),n.add(i,r),n},Object.defineProperty(t.prototype,"domain",{get:function(){var t=this.nv;t.clear();var n=this.uv.domain;t.add(n.from,n.to);var i=this.sv.domain;return t.add(i.from,i.to),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"range",{get:function(){var t=this.nv;t.clear();var n=this.uv.range;t.add(n.from,n.to);var i=this.sv.range;return t.add(i.from,i.to),t},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(t,n){var i=this.sv.hitTest(t,n);return null!=i?i:this.uv.hitTest(t,n)},t.prototype.calcHitPoint=function(n,i,r){var e,u=r,s=null!==(e=t.WORK_CALCHITPOINT)&&void 0!==e?e:t.WORK_CALCHITPOINT=new Hm,h=this.sv.calcHitPoint(n,i,s),o=this.uv.calcHitPoint(n,i,u);return null!=o?null!=h?u.distance<=s.distance?o:(u.copyFrom(s),h):o:null!=h?(u.copyFrom(s),h):null},t}(),sw=function(){function n(n,i,r,e,u,s){this.Xl=!0,this.Kl=new t.Rectangle,this.Af=new t.Point,this.ni=e,this.Ll=n;var h=new Gm(i);this.Xf=h,this.rv=new ym(this,null==s?void 0:s.coordinate),r&&(h.mask=this.getOverflowMask()),this.ev=new Qm(this,null==s?void 0:s.series),this.jl=new wm(this,u,null==s?void 0:s.axis)}return Object.defineProperty(n.prototype,"plotArea",{get:function(){return this.Ll},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"chart",{get:function(){return this.Ll.chart},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"container",{get:function(){return this.Xf},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"series",{get:function(){return this.ev},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"coordinate",{get:function(){return this.rv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"axis",{get:function(){return this.jl},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){return this.Ll.state},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"view",{get:function(){return this.Ll.view},enumerable:!1,configurable:!0}),n.prototype.on=function(t,n,i){return this.Ll.on(t,n,i),this},n.prototype.off=function(t,n,i){return this.Ll.off(t,n,i),this},n.prototype.getPixelDomain=function(t){var n=this.Ll,i=n.padding,r=n.width;return t.set(i.getLeft(),r-i.getRight())},n.prototype.getAxisBounds=function(t){return this.getPixelBounds()},n.prototype.getSelectionBoundsX=function(){return this.getPixelBounds()},n.prototype.getSelectionBoundsY=function(){return this.getPixelBounds()},n.prototype.toBoundsDirty=function(){this.Xl=!0},n.prototype.toLocal=function(t,n,i,r){return this.Ll.toLocal(t,n,i,r)},n.prototype.destroy=function(){this.Xf.destroy(),this.ev.destroy(),this.jl.destroy()},n}(),hw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getOverflowMask=function(){if(null==this.Zu){var t=this.Ll;this.Zu=new rw(t),t.reflowable.add(this.Zu),t.toDirty()}return this.Zu},n.prototype.getPixelRange=function(t){var n=this.Ll,i=n.padding.getTop(),r=n.height;return t.set(.5*(r-this.ni),i)},n.prototype.getPixelBounds=function(){var t=this.Ll.getPixelBounds();return t.height*=.5,t},n.prototype.getContainerBounds=function(){var t=this.Kl;if(this.Xl){this.Xl=!1;var n=this.Ll.getContainerBounds();t.width=n.width,t.height=.5*n.height,t.x=n.x,t.y=n.y}return t},n}(sw),ow=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getOverflowMask=function(){if(null==this.Zu){var t=this.Ll;this.Zu=new ew(t),t.reflowable.add(this.Zu),t.toDirty()}return this.Zu},n.prototype.getPixelRange=function(t){var n=this.Ll,i=n.padding.getBottom(),r=n.height;return t.set(r-i,.5*(r+this.ni))},n.prototype.getPixelBounds=function(){var t=this.Ll.getPixelBounds();return t.height*=.5,t.y=t.height,t},n.prototype.getContainerBounds=function(){var t=this.Kl;if(this.Xl){this.Xl=!1;var n=this.Ll.getContainerBounds();t.width=n.width,t.height=.5*n.height,t.x=n.x,t.y=n.y+t.height}return t},n}(sw),aw=function(){function t(t,n){this.uv=t,this.sv=n}return Object.defineProperty(t.prototype,"x",{get:function(){return this.sv.x},set:function(t){this.uv.x=t,this.sv.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.sv.y},set:function(t){this.uv.y=t,this.sv.y=t},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){return this.uv.set(t,n),this.sv.set(t,n),this},t}(),cw=function(){function t(t,n){this.uv=t,this.sv=n,this.Qe=new aw(t.scale,n.scale),this.B=new aw(t.position,n.position)}return Object.defineProperty(t.prototype,"scale",{get:function(){return this.Qe},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.B},enumerable:!1,configurable:!0}),t.prototype.getLocalBounds=function(t){this.uv.getLocalBounds(t);var n=t.x,i=t.y,r=t.width,e=t.height;this.sv.getLocalBounds(t);var u=t.x,s=t.y,h=t.width,o=t.height,a=Math.min(n,u),c=Math.min(i,s),f=Math.max(n+r,u+h),l=Math.max(i+e,s+o);return t.x=a,t.y=c,t.width=f-a,t.height=l-c,t},t}(),fw=function(t){function n(n,i){var r,e,u,s,h,o,a,c=t.call(this,n,i)||this,f=c.theme,l=null!==(r=null==i?void 0:i.margin)&&void 0!==r?r:f.getMargin();c.ni=l;var v=new ie,b=function(){c.onContainerChange()},d=null!==(e=null==i?void 0:i.mask)&&void 0!==e?e:f.isOverflowMaskEnabled(),g=null==i?void 0:i.primary,m=new hw(c,b,d,l,v,g);c.uv=m;var w=null==i?void 0:i.secondary,O=new ow(c,b,d,l,v,w);c.sv=O,c.addChild(m.container),c.addChild(O.container),c.rv=new iw(c,m.coordinate,O.coordinate);var p=m.series,D=O.series,E=new uw(c,p,D);c.ev=E;var M=m.axis,S=O.axis;c.addChild(v);var j=new tw(c,v,M,S);c.jl=j,c.addSeries(p,null===(u=null==g?void 0:g.series)||void 0===u?void 0:u.list),c.addSeries(D,null===(s=null==w?void 0:w.series)||void 0===s?void 0:s.list),c.addAxes(M,null===(h=null==g?void 0:g.axis)||void 0===h?void 0:h.list),c.addAxes(S,null===(o=null==w?void 0:w.axis)||void 0===o?void 0:o.list),c.addAxes(j,null===(a=null==i?void 0:i.axis)||void 0===a?void 0:a.list);var T=null==i?void 0:i.selection;return null!=T&&(p.selection=T,D.selection=T,T.bind(E)),c}return G(n,t),n.prototype.onResize=function(n,i,r,e){this.uv.toBoundsDirty(),this.sv.toBoundsDirty(),t.prototype.onResize.call(this,n,i,r,e)},n.prototype.addSeries=function(t,n){if(null!=n){var i=n.length;if(0<i){for(var r=0;r<i;++r)t.add(n[r]);t.update()}}},n.prototype.addAxes=function(t,n){if(null!=n)for(var i=0,r=n.length;i<r;++i)t.add(n[i])},Object.defineProperty(n.prototype,"primary",{get:function(){return this.uv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"secondary",{get:function(){return this.sv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"container",{get:function(){return this.secondary.container},enumerable:!1,configurable:!0}),n.prototype.onContainerChange=function(){this.tv=!0,this.Xl=!0,this.uv.toBoundsDirty(),this.sv.toBoundsDirty(),lt.update(this)},Object.defineProperty(n.prototype,"coordinate",{get:function(){return this.rv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"series",{get:function(){return this.ev},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"axis",{get:function(){return this.jl},enumerable:!1,configurable:!0}),n.prototype.newView=function(t){var n,i=this;return new ou(this,(function(){return null!=n?n:n=new cw(i.uv.container,i.sv.container)}),null==t?void 0:t.view)},n.prototype.onViewDirty=function(){this.rv.fit(),this.jl.onRender(),this.ev.onRender()},n.prototype.fit=function(t,n,i,r,e){if(null!=t&&t<=0){var u=this.primary;u.coordinate.fit(n,i,r,e),u.axis.update(),u.series.update();var s=this.secondary;s.coordinate.fit(n,i,r,e),s.axis.update(),s.series.update()}else{this.ql=null!=t?t:200,this.Zl=Date.now(),this.primary.coordinate.mark(n,i,r,e),this.secondary.coordinate.mark(n,i,r,e);var h=this.Ql;null!=h&&window.clearTimeout(h),this.Ql=window.setTimeout(this.$l,0)}return this},n.prototype.onBlend=function(){var t=(Date.now()-this.Zl)/this.ql;t<1?this.Ql=window.setTimeout(this.$l,0):(this.Ql=null,t=1);var n=ae.ELASTIC(t),i=this.primary;i.coordinate.blend(n),i.axis.update(),i.series.update();var r=this.secondary;r.coordinate.blend(n),r.axis.update(),r.series.update()},n.prototype.destroy=function(){var t,n;null===(t=this.uv)||void 0===t||t.destroy(),null===(n=this.sv)||void 0===n||n.destroy(),this.jl.destroy()},n}(Fm),lw=function(){function t(t,n,i){this.Lt=t,this.xt=n,this.et=i}return Object.defineProperty(t.prototype,"from",{get:function(){return this.Lt},set:function(t){this.set(t,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.xt},set:function(t){this.set(void 0,t)},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){var i=!1;return null!=t&&this.Lt!==t&&(yo(this.Lt)&&yo(t)||(this.Lt=t,i=!0)),null!=n&&this.xt!==n&&(yo(this.xt)&&yo(n)||(this.xt=n,i=!0)),i&&this.et(),this},t.prototype.add=function(t,n){var i,r;return yo(t)||(i=yo(this.from)?t:Math.min(this.from,t)),yo(n)||(r=yo(this.to)?n:Math.max(this.to,n)),this.set(i,r)},t.prototype.clear=function(){return this.set(NaN,NaN)},t}(),vw=function(){function t(t,n){this._x=t,this._y=n}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),t.prototype.bind=function(t){this._x.bind(t),this._y.bind(t)},t.prototype.unbind=function(){this._x.unbind(),this._y.unbind()},t.prototype.set=function(t,n,i,r){this._x.set(t,n,i,r),this._y.set(t,n,i,r)},t.prototype.unset=function(){this._x.unset(),this._y.unset()},t.prototype.update=function(t,n,i,r){var e=this._x.update(t,n,i,r),u=this._y.update(t,n,i,r);return e||u},t}(),bw=function(){function t(t){var n,i,r,e=this.toTheme(t);this.Te=e;var u=(new It).add(null!==(n=null==t?void 0:t.state)&&void 0!==n?n:gt.HOVERED);if(this.Nt=u,this.fh=null!==(i=null==t?void 0:t.enable)&&void 0!==i?i:e.isEnabled(u),null!=t){var s=t.shape;null!=s&&(St(s)?this.hv=s:this.Vn=s)}this.L=null!==(r=null==t?void 0:t.style)&&void 0!==r?r:this.setStyle}return t.prototype.bind=function(t){if(this.fh){var n=this.Vn;if(null==n){var i=this.Nt,r=this.hv;n=null!=r?r(i):this.newShape(i,this.Te)}this.Vn=n,n.attach(t.plotArea.axis.container),n.visible=!1}},t.prototype.unbind=function(){var t=this.Vn;t&&t.detach()},t.prototype.newShape=function(t,n){return n.newShape(t)},t.prototype.set=function(t,n,i,r){this.update(t,n,i,r);var e=this.Vn;null!=e&&this.L(e,r)},t.prototype.setStyle=function(t,n){},t.prototype.unset=function(){var t=this.Vn;t&&(t.visible=!1)},t.prototype.toTheme=function(t){var n=null==t?void 0:t.theme;return Tt(n)?this.getTheme(n):null!=n?n:this.getTheme(this.getType())},t.prototype.getTheme=function(t){return it.getInstance().get(t)},t}(),dw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.update=function(t,n,i,r){var e=this.Vn;if(e){var u=i.x,s=t.plotArea.getSelectionBoundsX();e.transform.position.set(u,s.y+.5*s.height),e.size.set(0,s.height);var h=.5*e.stroke.width;return e.visible=s.x<=u+h&&u-h<=s.x+s.width,!0}return!1},n.prototype.getType=function(){return"DChartSelectionGridlineX"},n}(bw),gw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.update=function(t,n,i,r){var e=this.Vn;if(e){var u=i.y,s=t.plotArea.getSelectionBoundsY();e.transform.position.set(s.x+.5*s.width,u),e.size.set(s.width,0);var h=.5*e.stroke.width;return e.visible=s.y<=u+h&&u-h<=s.y+s.height,!0}return!1},n.prototype.getType=function(){return"DChartSelectionGridlineY"},n}(bw),mw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.update=function(t,n,i,r){var e=this.Vn;return!!e&&(e.transform.position.copyFrom(i),e.visible=this.isVisible(t,n,i,r),!0)},n.prototype.isVisible=function(t,n,i,r){t=(null==r?void 0:r.container)||t;var e=i.x,u=i.y,s=t.plotArea.getPixelBounds();return s.x<=e&&e<=s.x+s.width&&s.y<=u&&u<=s.y+s.height},n.prototype.getType=function(){return"DChartSelectionMarker"},n}(bw),ww={PREVIOUS:0,NEXT:1,CLOSER:2,INTERSECTION:3},Ow=function(n){function i(i){var r,e,u,s=n.call(this)||this;s.Xf=null,s.ev=null,s.fh=null===(r=i.enable)||void 0===r||r,s.Zh=!1;var h=i.gridline;s.Tl=null!=h?new vw(new dw(h.x),new gw(h.y)):new vw(new dw,new gw),s.C=new mw(i.marker),s.Nt=null!==(e=i.state)&&void 0!==e?e:gt.HOVERED,s.ov=null,s.av=null,s.B=new t.Point,s.Le=null!==(u=i.point)&&void 0!==u?u:ww.CLOSER,s.Br=new t.Point;var o=i.on;if(o)for(var a in o){var c=o[a];c&&s.on(a,c)}return s}return G(i,n),i.prototype.bind=function(t){this.fh&&(this.Xf=t,this.Tl.bind(t),this.C.bind(t))},i.prototype.unbind=function(){this.C.unbind(),this.Tl.unbind(),this.Xf=null,this.ov=null,this.av=null},Object.defineProperty(i.prototype,"visible",{get:function(){return this.Zh},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"series",{get:function(){return this.ev},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this.B},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"gridline",{get:function(){return this.Tl},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"marker",{get:function(){return this.C},enumerable:!1,configurable:!0}),i.prototype.set=function(t,n){jt(t)?this.set1(t,n):this.set2(t,n)},i.prototype.set1=function(t,n){var i=this.Xf;if(null!=i){var r=this.Br;r.set(t,n);var e=i.plotArea;e.container.toLocal(r,void 0,r,!0);var u=e.coordinate,s=u.x.get(0),h=u.y.get(0),o=r.x,a=r.y;s&&h?(o=s.unmap(s.transform.unmap(o)),a=h.unmap(h.transform.unmap(a))):(s=null,h=null);var c=this.ev,f=this.B;if(!this.Zh||null!=c||o!==f.x||a!==f.y){if(this.Zh=!0,f.set(o,a),this.ov=s,this.av=h,e.container.localTransform.apply(r,r),this.Tl.set(i,f,r,null),this.C.set(i,f,r,null),null!=c){var l=this.Nt;c&&c.state.remove(l),this.ev=null}this.emit("change",this),lt.update(e)}}},i.prototype.set2=function(t,n){var i=this.Xf;if(null!=i){var r=this.Br,e=n.x,u=n.y;switch(this.Le){case ww.PREVIOUS:e=n.p0x,u=n.p0y;break;case ww.NEXT:e=n.p1x,u=n.p1y;break;case ww.CLOSER:Math.abs(n.p0x-n.x)<Math.abs(n.p1x-n.x)?(e=n.p0x,u=n.p0y):(e=n.p1x,u=n.p1y)}r.set(e,u);var s=i.plotArea;s.container.localTransform.apply(r,r);var h=t.coordinate.x,o=t.coordinate.y,a=e,c=u;h&&o?(a=h.unmap(h.transform.unmap(a)),c=o.unmap(o.transform.unmap(c))):(h=null,o=null);var f=this.ev,l=this.B;if(!this.Zh||f!==t||a!==l.x||c!==l.y){if(this.Zh=!0,l.set(a,c),this.ov=h,this.av=o,this.Tl.set(i,l,r,t),this.C.set(i,l,r,t),f!==t){var v=this.Nt;f&&f.state.remove(v),this.ev=t,t.state.add(v)}this.emit("change",this),lt.update(s)}}},i.prototype.unset=function(){var t=this.Xf;if(null!=t){var n=this.ev;(this.Zh||null!=n)&&(this.Zh=!1,this.ov=null,this.av=null,this.Tl.unset(),this.C.unset(),null!=n&&(this.ev=null,n.state.remove(this.Nt)),this.emit("change",this),lt.update(t.plotArea))}},i.prototype.update=function(){var t=this.Xf;if(null==t)return!1;if(!this.Zh)return!1;var n=this.B,i=this.Br,r=this.ov,e=this.av;r&&e?i.set(r.transform.map(r.map(n.x)),e.transform.map(e.map(n.y))):i.copyFrom(n),t.plotArea.container.localTransform.apply(i,i);var u=this.ev,s=this.Tl.update(t,n,i,u),h=this.C.update(t,n,i,u);return s||h},i}(t.utils.EventEmitter),pw=function(t){function n(n){var i,r=t.call(this)||this;r.Xf=null;var e=rr(null!==(i=null==n?void 0:n.point)&&void 0!==i?i:ww.CLOSER,ww);r.Pc=r.newSelected(e,null==n?void 0:n.selected),r.cv=r.newHovered(e,null==n?void 0:n.hovered),r.fv=r.toDismiss(n);var u=null==n?void 0:n.on;if(null!=u)for(var s in u){var h=u[s];h&&r.on(s,h)}return r.lv=function(t){r.onMove(t)},r.vv=function(t,n){r.onTap(n)},r.bv=function(t,n){r.onLongPress(n)},r}return G(n,t),n.prototype.toDismiss=function(t){var n;if(null!=t){var i=t.dismiss;if(null!=i)return{enable:null===(n=i.enable)||void 0===n||n,tap:this.toDismissTap(i.tap),longPress:this.toDismissLongPress(i.longPress),noSeries:this.toDismissNoSeries(i.noSeries)}}return{enable:!0,tap:this.toDismissTap(),longPress:this.toDismissLongPress(),noSeries:this.toDismissNoSeries()}},n.prototype.toDismissTap=function(t){var n,i;return{enable:null===(n=null==t?void 0:t.enable)||void 0===n||n,modifier:rr(null!==(i=null==t?void 0:t.modifier)&&void 0!==i?i:ue.NOT_NONE,ue)}},n.prototype.toDismissLongPress=function(t){var n;return{enable:null===(n=null==t?void 0:t.enable)||void 0===n||n}},n.prototype.toDismissNoSeries=function(t){var n;return{enable:null===(n=null==t?void 0:t.enable)||void 0===n||n}},n.prototype.newSelected=function(t,n){return new Ow(this.toSelectedOptions(t,n))},n.prototype.newHovered=function(t,n){return new Ow(this.toHoveredOptions(t,n))},n.prototype.toSelectedOptions=function(t,n){return this.toSubOptions(t,n,gt.ACTIVE)},n.prototype.toHoveredOptions=function(t,n){return this.toSubOptions(t,n,gt.HOVERED)},n.prototype.toSubOptions=function(t,n,i){var r,e,u,s,h,o,a;null==(n=n||{}).point&&(n.point=t),null==n.state&&(n.state=i);var c=null!==(r=n.gridline)&&void 0!==r?r:n.gridline={},f=null!==(e=c.x)&&void 0!==e?e:c.x={};null==f.state&&(f.state=i);var l=null!==(u=c.y)&&void 0!==u?u:c.y={};null==l.state&&(l.state=i);var v=null!==(s=n.marker)&&void 0!==s?s:n.marker={};null==v.state&&(v.state=i);var b=null!==(h=n.label)&&void 0!==h?h:n.label={},d=null!==(o=b.x)&&void 0!==o?o:b.x={};null==d.state&&(d.state=i);var g=null!==(a=b.y)&&void 0!==a?a:b.y={};return null==g.state&&(g.state=i),n},n.prototype.onTap=function(t){var i=this.Xf;if(null!=i){var r=this.fv,e=this.Pc;if(r.enable&&r.tap.enable&&se.match(t,r.tap.modifier))e.unset();else{var u=n.WORK_SELECT,s=t.data.global,h=i.calcHitPoint(s.x,s.y,u);null!=h?e.set(h,u):r.enable&&r.noSeries.enable?e.unset():e.set(s.x,s.y)}}},n.prototype.onLongPress=function(t){if(null!=this.Xf){var n=this.fv;n.enable&&n.longPress.enable&&this.Pc.unset()}},n.prototype.onMove=function(t){var i=this.Xf;if(null!=i&&!i.plotArea.state.isGesturing){var r=this.cv;if(t.target===i.plotArea){var e=n.WORK_SELECT,u=t.data.global,s=i.calcHitPoint(u.x,u.y,e);null!=s?r.set(s,e):r.unset()}else r.unset()}},n.prototype.bind=function(t){this.Xf=t,this.Pc.bind(t),this.cv.bind(t);var n=t.plotArea,i=n.view;n.on(he.move,this.lv),i.on("gesturetap",this.vv),i.on("gesturelongpress",this.bv)},n.prototype.unbind=function(){var t=this.Xf;if(this.Xf=null,null!=t){var n=t.plotArea,i=n.view;n.off(he.move,this.lv),i.off("gesturetap",this.vv),i.off("gesturelongpress",this.bv)}this.Pc.unbind(),this.cv.unbind()},Object.defineProperty(n.prototype,"selected",{get:function(){return this.Pc},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hovered",{get:function(){return this.cv},enumerable:!1,configurable:!0}),n.prototype.update=function(){var t=this.Pc.update(),n=this.cv.update();if(t||n){var i=this.Xf;null!=i&&lt.update(i.plotArea)}},n.prototype.onRender=function(){this.Pc.update(),this.cv.update()},n.WORK_SELECT=new Hm,n}(t.utils.EventEmitter),Dw=function(){function t(t,n){var i,r;this.g=t,this.dv=null!==(i=null==n?void 0:n.x)&&void 0!==i?i:0,this.gv=null!==(r=null==n?void 0:n.y)&&void 0!==r?r:0,this.mv=NaN,this.wv=NaN,this.Ov=NaN,this.pv=NaN}return Object.defineProperty(t.prototype,"x",{get:function(){var t=this.g.container;return t?t.plotArea.coordinate.x.get(this.dv):null},set:function(t){var n=this.toIndexX(t);this.dv!==n&&(this.dv=n,this.mv=NaN,this.Ov=NaN)},enumerable:!1,configurable:!0}),t.prototype.toIndexX=function(t){if(jt(t))return t;if(null!=t){var n=this.g.container;if(n)return n.plotArea.coordinate.x.indexOf(t)}return-1},Object.defineProperty(t.prototype,"y",{get:function(){var t=this.g.container;return t?t.plotArea.coordinate.y.get(this.gv):null},set:function(t){var n=this.toIndexY(t);this.gv!==n&&(this.gv=n,this.wv=NaN,this.pv=NaN)},enumerable:!1,configurable:!0}),t.prototype.toIndexY=function(t){if(jt(t))return t;if(null!=t){var n=this.g.container;if(n)return n.plotArea.coordinate.y.indexOf(t)}return-1},t.prototype.isDirty=function(t,n){var i=t.id,r=n.id,e=i!==this.mv,u=r!==this.wv;return this.mv=i,this.wv=r,e||u},t.prototype.isTransformDirty=function(t,n){var i=t.transform.id,r=n.transform.id,e=i!==this.Ov,u=r!==this.pv;return this.Ov=i,this.pv=r,e||u},t.prototype.reset=function(){this.mv=NaN,this.wv=NaN},t.prototype.destroy=function(){this.reset()},t}(),Ew=function(t){function n(n){var i=t.call(this)||this;i.rv=new Dw(i,null==n?void 0:n.coordinate),i.Or=0,i.nv=new dm(NaN,NaN),i.iv=new dm(NaN,NaN),i.Dv=NaN,i.Pl=!0,i.Nt=new Ct((function(t,n){i.onStateChange(t,n)}));var r=null==n?void 0:n.on;if(null!=r)for(var e in r){var u=r[e];u&&i.on(e,u)}return i}return G(n,t),n.prototype.bind=function(t,n){this.Xf=t,this.rv.reset(),this.Or=n;var i=t.plotArea.chart;return i&&(this.Nt.parent=i.state),this},n.prototype.unbind=function(){return this.Xf=void 0,this},Object.defineProperty(n.prototype,"domain",{get:function(){return this.updateRegion(),this.nv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"range",{get:function(){return this.updateRegion(),this.iv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"container",{get:function(){return this.Xf||null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"index",{get:function(){return this.Or},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"coordinate",{get:function(){return this.rv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),n.prototype.show=function(){return!0!==this.Pl&&(this.Pl=!0,this.onShow()),this},n.prototype.onShow=function(){var t=this.shape;null!=t&&(t.visible=!0)},n.prototype.isShown=function(){return this.Pl},n.prototype.hide=function(){return!1!==this.Pl&&(this.Pl=!1,this.onHide()),this},n.prototype.onHide=function(){var t=this.shape;null!=t&&(t.visible=!1)},n.prototype.isHidden=function(){return!this.Pl},n.prototype.destroy=function(){return this.Xf=void 0,this.rv.destroy(),this},n.prototype.hitTest=function(t,n){return!1},n.prototype.calcHitPoint=function(t,n,i){return!1},n.prototype.onStateChange=function(t,n){var i;this.toDirty();var r=null===(i=this.Xf)||void 0===i?void 0:i.plotArea.chart;lt.update(r),this.emit("statechange",t,n,this)},n}(t.utils.EventEmitter),Mw=function(n){function i(t){var i,r=n.call(this,t)||this;return r.Ev=null,r.tu=t,r.Mt=null!==(i=null==t?void 0:t.points)&&void 0!==i?i:[],r.Mv=0,r.Sv=NaN,r}return G(i,n),i.prototype.getSizeDefault=function(){return 10},i.prototype.getOffsetDefault=function(){return 0},i.prototype.bind=function(t,i){var r=this.Ev;if(!r){(r=this.Ev=this.newLineOfAny()).visible=this.Pl;var e=this.tu;this.initLine(r,e,t,i)}return r.attach(t.plotArea.container,i),this.Sv=NaN,n.prototype.bind.call(this,t,i),this},i.prototype.initLine=function(t,n,i,r){var e=i.newFill(r,null==n?void 0:n.fill);this.I=e,t.fill.copy(e);var u=i.newStroke(r,null==n?void 0:n.stroke);this.Oa=u,t.stroke.copy(u);var s=this.getSizeDefault(),h=i.newSize(r,null==n?void 0:n.size,s,s);this.j=h,t.points.size.set(h.x,h.y);var o=this.getOffsetDefault(),a=i.newOffset(r,n&&n.offset,o,o);this.Ne=a,t.points.offset.set(a.x,a.y)},i.prototype.unbind=function(){var t=this.Ev;return t&&t.detach(),n.prototype.unbind.call(this),this},Object.defineProperty(i.prototype,"shape",{get:function(){return this.Ev},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"points",{get:function(){return this.Mt},set:function(t){this.Mt=t,this.Mv+=1},enumerable:!1,configurable:!0}),i.prototype.toDirty=function(){return this.Mv+=1,this},i.prototype.update=function(){return this.doUpdate(!0),this},i.prototype.onRender=function(){return this.doUpdate(!1),this},i.prototype.doUpdate=function(t){var n=this.Ev;if(n){var i=this.rv,r=i.x,e=i.y;if(r&&e){var u=this.Mv,s=u!==this.Sv,h=i.isDirty(r,e),o=i.isTransformDirty(r,e);if(s||h||o)return this.Sv=u,this.doUpdateLine(n,r,e),t&&lt.update(n),!0}}return!1},i.prototype.doUpdateLine=function(t,n,r){for(var e=t.points.values,u=e.length,s=0,h=this.Mt,o=NaN,a=NaN,c=NaN,f=NaN,l=0,v=h.length;l<v;l+=2){var b=h[l],d=h[l+1];null!=b&&null!=d&&(s<u?(e[s]=b,e[s+1]=d):e.push(b,d),s+=2,o!=o?(o=b,a=b,c=d,f=d):(o=Math.min(o,b),a=Math.max(a,b),c=Math.min(c,d),f=Math.max(f,d)))}e.length!==s&&(e.length=s),n.mapAll(e,0,s,2,0),r.mapAll(e,0,s,2,1),n.transform.mapAll(e,0,s,2,0),r.transform.mapAll(e,0,s,2,1),o!=o&&(o=0,a=0,c=0,f=0);var g=i.WORK_REGION||{xmin:0,xmax:0,ymin:0,ymax:0};i.WORK_REGION=g,this.adjustLineRegion(o,a,c,f,g),o=n.transform.map(n.map(g.xmin)),a=n.transform.map(n.map(g.xmax)),c=r.transform.map(r.map(g.ymin)),f=r.transform.map(r.map(g.ymax));var m=Math.abs(a-o),w=Math.abs(f-c),O=.5*(o+a),p=.5*(c+f);for(l=0,v=e.length;l<v;l+=2)e[l+0]-=O,e[l+1]-=p;t.lock(_t.UPLOADED),this.applyLine(t,n,r,m,w,O,p,e),t.unlock(_t.UPLOADED,!0)},i.prototype.adjustLineRegion=function(t,n,i,r,e){return e.xmin=t,e.xmax=n,e.ymin=i,e.ymax=r,e},i.prototype.applyLine=function(t,n,i,r,e,u,s,h){t.points.set(h),t.points.toFitted(r,e),t.size.set(r,e),t.transform.position.set(u,s)},i.prototype.updateRegion=function(){var t=this.Mv;if(this.Dv!==t){this.Dv=t;var n=this.Mt,i=this.nv,r=this.iv;i.clear(),r.clear(),this.calcRegion(n,i,r)}},i.prototype.calcRegion=function(t,n,i){for(var r=0,e=t.length;r<e;r+=2){var u=t[r];null!=u&&n.add(u,u);var s=t[r+1];null!=s&&i.add(s,s)}},i.prototype.destroy=function(){var t=this.Ev;return t&&(this.Ev=null,t.detach(),t.destroy()),this.Mt.length=0,this.Mv=0,this.Sv=NaN,n.prototype.destroy.call(this),this},i.prototype.hitTest=function(t,n){var r=this.Ev;if(r){var e=i.WORK;return e.set(t,n),r.toLocal(e,void 0,e),null!=r.contains(e.x,e.y)}return!1},i.prototype.calcHitPoint=function(t,n,r){var e=this.Ev;if(e){var u=i.WORK;return u.set(t,n),e.toLocal(u,void 0,u),r.shape=e,e.calcHitPoint(u.x,u.y,null,this.calcHitPointTestRange,this.calcHitPointHitTester,r)}return!1},i.prototype.calcHitPointTestRange=function(t,n,i,r,e,u,s,h,o){for(var a=sd(h,t+i+e,2,0),c=0,f=a-1,l=f<<1;0<=f;f-=1,l-=2)if(h[l]<=t-i){c=f;break}return o[0]=c,o[1]=c!==a?a:Math.min(h.length<<1,a+1),o},i.prototype.calcHitPointHitTester=function(t,n,i,r,e,u,s,h,o,a,c,f,l,v){var b=v.shape;if(b.containsPointAbs(t,n,i,r,e,u,s,h,o,a,c)){var d=b.transform,g=d.position,m=d.scale;v.x=v.p0x=v.p1x=g.x+m.x*s,v.y=v.p0y=v.p1y=g.y+m.y*h,v.t=l,v.index=f;var w=t-(s+e),O=n-(h+u);return v.distance=Math.sqrt(w*w+O*O),!0}return!1},i.WORK=new t.Point,i}(Ew),Sw=function(t){function n(n){var i=t.call(this,n)||this;return i.jv=-1,i.Tv=-1,i.Iv=-1,i.Cv=-1,i.Nv=!1!==(n&&n.size&&n.size.auto),i}return G(n,t),n.prototype.bind=function(n,i){return this.jv=-1,this.Tv=-1,this.Iv=-1,this.Cv=-1,t.prototype.bind.call(this,n,i),this},n.prototype.initLine=function(n,i,r,e){t.prototype.initLine.call(this,n,i,r,e),this.au=r.newPadding(e,i&&i.padding)},n.prototype.newLineOfAny=function(){return new Il},n.prototype.getSizeDefault=function(){return 1},n.prototype.adjustLineRegion=function(n,i,r,e,u){return t.prototype.adjustLineRegion.call(this,n,i,Math.min(0,r),Math.max(0,e),u)},n.prototype.updateBarCountAndIndex=function(){if(this.Tv<0||this.jv<0){var t=0,i=0,r=this.Xf;if(r)for(var e=0,u=r.size();e<u;++e){var s=r.get(e);s===this&&(t=i),s instanceof n&&(i+=1)}return i=Math.max(1,i),this.jv=i,this.Tv=t,!0}return!1},n.prototype.applyLine=function(n,i,r,e,u,s,h,o){var a=n.points,c=a.offset,f=a.size,l=this.j,v=this.Ne,b=this.au;if(l&&v&&b){var d=i.id,g=i.transform.id;if(this.updateBarCountAndIndex()||this.Iv!==d||this.Cv!==g){var m=this.jv,w=this.Tv;this.Iv=d,this.Cv=g;var O=i.transform.map(i.map(0)),p=i.transform.map(i.map(l.x)),D=Math.abs(O-p)*(1-b.outer);if(m<=1)c.x=v.x,f.x=D;else{var E=D*(1-b.inner),M=E/m,S=M*(w+.5)+w*((D-E)/(m-1));c.x=v.x+S-.5*D,f.x=M}}}var j=f.y;Mt(j)||(j=[]);var T=j.length,I=c.y;Mt(I)||(I=[]);for(var C=I.length,N=0,A=r.transform.map(r.map(0))-h,R=0,y=o.length;R<y;R+=2,N+=1){var k=o[R+1]-A,L=Math.abs(k);N<T?j[N]=L:j.push(L);var x=-.5*k;N<C?I[N]=x:I.push(x)}j.length!==N&&(j.length=N),I.length!==N&&(I.length=N),c.y=I,f.y=j,t.prototype.applyLine.call(this,n,i,r,e,u,s,h,o)},n.prototype.calcSizeX=function(t){var n=this.Mt;if(2<n.length)for(var i=n.length,r=n[i-2],e=i-4;0<=e;e-=2){var u=n[e];if(null!=r&&null!=u)return Math.abs(r-u);r=u}return t},n.prototype.calcRegion=function(n,i,r){t.prototype.calcRegion.call(this,n,i,r);var e=this.j;if(e){var u=e.x;this.Nv&&(u=this.calcSizeX(u),e.x=u);var s=.5*u;i.set(i.from-s,i.to+s)}r.add(0,0)},n}(Mw),jw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newLineOfAny=function(){return new ml},n}(Mw),Tw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newLineOfAny=function(){return new El},n}(Mw),Iw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newLineOfAny=function(){return new Il},n}(Mw),Cw=function(t){function n(n){var i=t.call(this,n)||this;return i.Av=0,i}return G(n,t),n.prototype.newLineOfAny=function(){return new Jl},n.prototype.applyLine=function(n,i,r,e,u,s,h,o){var a=this.j,c=this.Ne;a&&c&&this.Av!==a.y&&(this.Av=a.y,n.points.offset.y=c.y-.2*a.y),t.prototype.applyLine.call(this,n,i,r,e,u,s,h,o)},n}(Mw),Nw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newLineOfAny=function(){return new zl},n}(Cw),Aw=function(n){function i(t){var i,r=n.call(this,t)||this;return r.Ev=null,r.tu=t,r.Mt=null!==(i=null==t?void 0:t.points)&&void 0!==i?i:[],r.Mv=0,r.Sv=NaN,r.Rv=0,r.yv=0,r}return G(i,n),i.prototype.bind=function(t,i){var r,e=this.Ev;if(!e){var u=t.newStroke(i,null===(r=this.tu)||void 0===r?void 0:r.stroke);this.Oa=u,(e=new Wf).stroke.copy(u),e.visible=this.Pl,this.Ev=e}return e.attach(t.plotArea.container,i),this.Sv=NaN,n.prototype.bind.call(this,t,i),this},i.prototype.unbind=function(){var t=this.Ev;return t&&t.detach(),n.prototype.unbind.call(this),this},Object.defineProperty(i.prototype,"shape",{get:function(){return this.Ev},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"points",{get:function(){return this.Mt},set:function(t){this.Mt=t,this.Mv+=1},enumerable:!1,configurable:!0}),i.prototype.toDirty=function(){return this.Mv+=1,this},i.prototype.update=function(){return this.doUpdate(!0),this},i.prototype.onRender=function(){return this.doUpdate(!1),this},i.prototype.doUpdate=function(t){var n=this.Ev;if(n){var i=this.rv,r=i.x,e=i.y;if(r&&e){var u=this.Mv,s=u!==this.Sv,h=i.isDirty(r,e),o=i.isTransformDirty(r,e);if(s||h||o)return this.Sv=u,this.doUpdateLine(n,r,e,s||h),t&&lt.update(n),!0}}return!1},i.prototype.doUpdateLine=function(t,n,i,r){if(t.lock(_t.UPLOADED),r){for(var e=t.points.values,u=t.points.segments,s=e.length,h=u.length,o=0,a=0,c=this.Mt,f=NaN,l=NaN,v=NaN,b=NaN,d=0,g=c.length;d<g;d+=2){var m=c[d],w=c[d+1];if(null!=m&&null!=w)o<s?(e[o]=m,e[o+1]=w):e.push(m,w),o+=2,f!=f?(f=m,l=m,v=w,b=w):(f=Math.min(f,m),l=Math.max(l,m),v=Math.min(v,w),b=Math.max(b,w));else{var O=(d>>1)-a;a<h?u[a]=O:u.push(O),a+=1}}e.length!==o&&(e.length=o),u.length!==a&&(u.length=a),n.mapAll(e,0,o,2,0),i.mapAll(e,0,o,2,1),f!=f&&(f=0,l=0,v=0,b=0),f=n.map(f),l=n.map(l),v=i.map(v),b=i.map(b);var p=Math.abs(l-f),D=Math.abs(b-v),E=.5*(f+l),M=.5*(v+b);for(d=0,g=e.length;d<g;d+=2)e[d+0]-=E,e[d+1]-=M;t.points.set(e,u),t.points.toFitted(p,D),t.size.set(p,D),this.Rv=E,this.yv=M}t.transform.position.set(n.transform.map(this.Rv),i.transform.map(this.yv)),t.transform.scale.set(n.transform.scale,i.transform.scale),t.unlock(_t.UPLOADED,!0)},i.prototype.updateRegion=function(){var t=this.Mv;if(this.Dv!==t){this.Dv=t;var n=this.Mt,i=this.nv,r=this.iv;if(i.clear(),r.clear(),null!=n)for(var e=0,u=n.length;e<u;e+=2){var s=n[e];null!=s&&i.add(s,s);var h=n[e+1];null!=h&&r.add(h,h)}}},i.prototype.destroy=function(){var t=this.Ev;return t&&(this.Ev=null,t.detach(),t.destroy()),this.Mt.length=0,this.Mv=0,this.Sv=NaN,n.prototype.destroy.call(this),this},i.prototype.hitTest=function(t,n){var r=this.Ev;if(r){var e=i.WORK;return e.set(t,n),r.toLocal(e,void 0,e),null!=r.contains(e.x,e.y)}return!1},i.prototype.calcHitPoint=function(t,n,r){var e=this.Ev;if(e){var u=i.WORK;return u.set(t,n),e.toLocal(u,void 0,u),r.shape=e,e.calcHitPoint(u.x,u.y,this.toThreshold,this.calcHitPointTestRange,this.calcHitPointHitTester,r)}return!1},i.prototype.toThreshold=function(t,n){return 1/0},i.prototype.calcHitPointTestRange=function(t,n,i,r,e){var u=sd(r,t,2,0);return e[0]=Math.max(0,u-1),e[1]=u,e},i.prototype.calcHitPointHitTester=function(t,n,i,r,e,u,s,h,o){if(i<=t&&t<e){var a=e-i;if(1e-4<Math.abs(a)){var c=(t-i)/a,f=t,l=r+c*(u-r),v=Math.abs(l-n);if(v<h){var b=o.shape.transform,d=b.position,g=d.x,m=d.y,w=b.scale,O=w.x,p=w.y;return o.x=g+O*f,o.y=m+p*l,o.p0x=g+O*i,o.p0y=m+p*r,o.p1x=g+O*e,o.p1y=m+p*u,o.t=c,o.index=s,o.distance=v,!0}}}return!1},i.WORK=new t.Point,i}(Ew),Rw=function(){function t(t,n,i,r){this.A=0,this.kv=NaN,this._a=t,this._b=n,this._x0=i,this._y0=r}return Object.defineProperty(t.prototype,"a",{get:function(){return this._a},set:function(t){this._a!==t&&(this.A+=1,this._a=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this._b},set:function(t){this._b!==t&&(this.A+=1,this._b=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x0",{get:function(){return this._x0},set:function(t){this._x0!==t&&(this.A+=1,this._x0=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y0",{get:function(){return this._y0},set:function(t){this._y0!==t&&(this.A+=1,this._y0=t)},enumerable:!1,configurable:!0}),t.prototype.toDirty=function(){this.A+=1},t.prototype.isDirty=function(){return this.A!==this.kv},t.prototype.toClean=function(){this.kv=this.A},t.from=function(n){var i,r,e,u;return new t(null!==(i=null==n?void 0:n.a)&&void 0!==i?i:1,null!==(r=null==n?void 0:n.b)&&void 0!==r?r:1,null!==(e=null==n?void 0:n.x0)&&void 0!==e?e:0,null!==(u=null==n?void 0:n.y0)&&void 0!==u?u:0)},t}(),yw=function(n){function i(t){var i=n.call(this,t)||this;return i.Ev=null,i.tu=t,i.Lv=Rw.from(t),i}return G(i,n),i.prototype.bind=function(t,i){var r,e=this.Ev;if(!e){var u=t.newStroke(i,null===(r=this.tu)||void 0===r?void 0:r.stroke);this.Oa=u,(e=new Wf).stroke.copy(u),e.visible=this.Pl,this.Ev=e}return e.attach(t.plotArea.container,i),n.prototype.bind.call(this,t,i),this},i.prototype.unbind=function(){var t=this.Ev;return t&&t.detach(),n.prototype.unbind.call(this),this},Object.defineProperty(i.prototype,"shape",{get:function(){return this.Ev},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parameters",{get:function(){return this.Lv},enumerable:!1,configurable:!0}),i.prototype.toDirty=function(){return this.Lv.toDirty(),this},i.prototype.update=function(){return this.doUpdate(!0),this},i.prototype.onRender=function(){return this.doUpdate(!1),this},i.prototype.doUpdate=function(t){var n=this.Ev,i=this.Xf;if(n&&i){var r=this.rv,e=r.x,u=r.y;if(e&&u)return this.doUpdateLine(n,i,e,u),t&&lt.update(n),!0}return!1},i.prototype.doUpdateLine=function(t,n,i,r){var e=t.points.values,u=t.points.segments,s=this.Lv,h=s.a,o=s.b,a=s.x0,c=s.y0,f=Math.abs(h),l=Math.abs(o),v=NaN,b=NaN,d=NaN,g=NaN,m=1e-5,w=n.plotArea.getContainerBounds();if(l<=f){var O=i.unmap(i.transform.unmap(w.x)),p=i.unmap(i.transform.unmap(w.x+w.width));v=Math.min(O,p),d=Math.max(O,p);var D=r.unmap(r.transform.unmap(w.y)),E=r.unmap(r.transform.unmap(w.y+w.height));if(b=Math.min(D,E),g=Math.max(D,E),m<l){var M=(I=o/h)*(D-c)+a,S=I*(E-c)+a,j=Math.min(M,S),T=Math.max(M,S);b=(C=1/I)*((v=Math.max(v,j))-a)+o*c,g=C*((d=Math.min(d,T))-a)+o*c}else v=a,d=a}else if(D=r.unmap(r.transform.unmap(w.y)),E=r.unmap(r.transform.unmap(w.y+w.height)),b=Math.min(D,E),g=Math.max(D,E),O=i.unmap(i.transform.unmap(w.x)),p=i.unmap(i.transform.unmap(w.x+w.width)),v=Math.min(O,p),d=Math.max(O,p),m<f){var I,C,N=(I=h/o)*(O-a)+c,A=I*(p-a)+c,R=Math.min(N,A),y=Math.max(N,A);v=(C=1/I)*((b=Math.max(b,R))-c)+h*a,d=C*((g=Math.min(g,y))-c)+h*a}else b=c,g=c;v=i.transform.map(i.map(v)),b=r.transform.map(r.map(b));var k=.5*(v+(d=i.transform.map(i.map(d)))),L=.5*(b+(g=r.transform.map(r.map(g)))),x=Math.abs(d-v),B=Math.abs(g-b);v-=k,b-=L,d-=k,g-=L,4!==e.length?(e.length=0,e.push(v,b,d,g)):(e[0]=v,e[1]=b,e[2]=d,e[3]=g),0<u.length&&(u.length=0),t.lock(_t.UPLOADED),t.points.set(e,u),t.points.toFitted(x,B),t.size.set(x,B),t.transform.position.set(k,L),t.unlock(_t.UPLOADED,!0)},i.prototype.updateRegion=function(){},i.prototype.destroy=function(){var t=this.Ev;return t&&(this.Ev=null,t.detach(),t.destroy()),n.prototype.destroy.call(this),this},i.prototype.hitTest=function(t,n){var r=this.Ev;if(r){var e=i.WORK;return e.set(t,n),r.toLocal(e,void 0,e),null!=r.contains(e.x,e.y)}return!1},i.prototype.calcHitPoint=function(t,n,r){var e=this.Ev;if(e){var u=i.WORK;return u.set(t,n),e.toLocal(u,void 0,u),r.shape=e,e.calcHitPoint(u.x,u.y,this.toThreshold,null,this.calcHitPointHitTester,r)}return!1},i.prototype.toThreshold=function(t,n){return 1/0},i.prototype.calcHitPointHitTester=function(t,n,i,r,e,u,s,h,o){if(i<=t&&t<e){var a=e-i;if(1e-4<Math.abs(a)){var c=(t-i)/a,f=t,l=r+c*(u-r),v=Math.abs(l-n);if(v<h){var b=o.shape.transform,d=b.position,g=d.x,m=d.y,w=b.scale,O=w.x,p=w.y;return o.x=o.p0x=o.p1x=g+O*f,o.y=o.p0y=o.p1y=m+p*l,o.t=c,o.index=s,o.distance=v,!0}}}return!1},i.WORK=new t.Point,i}(Ew),kw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.init=function(n){var i;t.prototype.init.call(this,n);var r=this.plotArea;(null!==(i=null==n?void 0:n.mask)&&void 0!==i?i:this.theme.isOverflowMaskEnabled())&&(r.axis.container.mask=this.getOverflowMask())},n.prototype.getOverflowMask=function(){return null==this.Zu&&(this.Zu=new eu(this),this.reflowable.add(this.Zu),this.toDirty()),this.Zu},Object.defineProperty(n.prototype,"plotArea",{get:function(){var t;return null!==(t=this.Ll)&&void 0!==t?t:this.Ll=this.newPlotArea()},enumerable:!1,configurable:!0}),n.prototype.newPlotArea=function(){var t,n=null===(t=this.tu)||void 0===t?void 0:t.plotArea;if(null!=n&&("primary"in n||"secondary"in n)){var i=new fw(this,n);return this.addChild(i),i}return i=new $m(this,n),this.addChild(i),i},n.prototype.destroy=function(){var n;this._destroyed||(null===(n=this.Ll)||void 0===n||n.destroy(),t.prototype.destroy.call(this))},n.prototype.getType=function(){return"DChart"},n}(ru),Lw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.isStorable=function(){return!1},n.prototype.isClear=function(){return!0},n}(Sd),xw=function(t){function n(n){var i=t.call(this)||this;return i.Un=n,i}return G(n,t),Object.defineProperty(n.prototype,"name",{get:function(){return this.Un},enumerable:!1,configurable:!0}),n.prototype.isStorable=function(){return!1},n.prototype.execute=function(){return Cd.getDocumentController().saveAs(this.Un),!0},n}(Sd),Bw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.isStorable=function(){return!1},n.prototype.execute=function(){return Cd.getDocumentController().save(),!0},n}(Sd),_w=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n}(Ru),Pw=function(){function t(t,n,i){var r=this;this.g=t,this.Pi=!0;var e=i.controller;this.ns=e;var u=function(){r.onChange()};e.grid.on("change",u),e.target.on("change",u);var s=new ie;s.visible=!1,this.Xf=s,t.addChildAt(s,t.children.length-1),this.xv=this.toGrid(n,i.grid),this.Bv=t.width,this._v=t.height,this.Pv=t.scale.x,this.Uv=this.newGridSize(),this.Pr=this.toTarget(n,i.target)}return t.prototype.toGrid=function(t,n){var i;return null!=n?{major:this.toGridMajor(t,n.major),minor:this.toGridMinor(t,n.minor),size:null!==(i=n.size)&&void 0!==i?i:t.getSnapGridSize()}:{major:this.toGridMajor(t),minor:this.toGridMinor(t),size:t.getSnapGridSize()}},t.prototype.toGridMajor=function(t,n){var i,r,e,u,s;return null!=n?{interval:null!==(i=n.interval)&&void 0!==i?i:t.getSnapGridMajorInterval(),color:null!==(r=n.color)&&void 0!==r?r:t.getSnapGridMajorColor(),alpha:null!==(e=n.alpha)&&void 0!==e?e:t.getSnapGridMajorAlpha(),width:null!==(u=n.width)&&void 0!==u?u:t.getSnapGridMajorWidth(),style:null!==(s=n.style)&&void 0!==s?s:t.getSnapGridMajorStyle()}:{interval:t.getSnapGridMajorInterval(),color:t.getSnapGridMajorColor(),alpha:t.getSnapGridMajorAlpha(),width:t.getSnapGridMajorWidth(),style:t.getSnapGridMajorStyle()}},t.prototype.toGridMinor=function(t,n){var i,r,e,u;return null!=n?{color:null!==(i=n.color)&&void 0!==i?i:t.getSnapGridMinorColor(),alpha:null!==(r=n.alpha)&&void 0!==r?r:t.getSnapGridMinorAlpha(),width:null!==(e=n.width)&&void 0!==e?e:t.getSnapGridMinorWidth(),style:null!==(u=n.style)&&void 0!==u?u:t.getSnapGridMinorStyle()}:{color:t.getSnapGridMinorColor(),alpha:t.getSnapGridMinorAlpha(),width:t.getSnapGridMinorWidth(),style:t.getSnapGridMinorStyle()}},t.prototype.toTarget=function(t,n){var i,r,e,u;return null!=n?{color:null!==(i=n.color)&&void 0!==i?i:t.getSnapTargetColor(),alpha:null!==(r=n.alpha)&&void 0!==r?r:t.getSnapTargetAlpha(),width:null!==(e=n.width)&&void 0!==e?e:t.getSnapTargetWidth(),style:null!==(u=n.style)&&void 0!==u?u:t.getSnapTargetStyle()}:{color:t.getSnapTargetColor(),alpha:t.getSnapTargetAlpha(),width:t.getSnapTargetWidth(),style:t.getSnapTargetStyle()}},t.prototype.onChange=function(){this.Pi=!0,lt.update(this.g)},Object.defineProperty(t.prototype,"container",{get:function(){return this.Xf},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){return this.ns.serialize()},t.prototype.onResize=function(t,n,i,r){this.Bv===t&&this._v===n||(this.Bv=t,this._v=n,this.Pi=!0,this.updateGridSize())},t.prototype.onScale=function(t,n,i,r){this.Pv!==t&&(this.Pv=t,this.updateGridSize())},t.prototype.updateGridSize=function(){var t=this.newGridSize();this.Uv!==t&&(this.Uv=t,this.Pi=!0)},t.prototype.newGridSize=function(){return this.xv.size(this.ns.grid.size,this.Bv,this._v,this.Pv)},t.prototype.onRender=function(){this.Pi&&(this.Pi=!1,this.updateAll())},t.prototype.updateAll=function(){var t=this.Xf,n=this.ns,i=n.grid.visible,r=n.target.visible;if(i||r){var e=this.Bv,u=this._v,s=.5*e,h=.5*u,o=ot.TOP,a=ot.LEFT,c=t.children,f=0;if(i){for(var l=this.xv,v=l.major,b=l.minor,d=v.interval,g=this.Uv,m=g,w=1;m<e;m+=g,w+=1,f+=1){var O=w%d==0?v:b;this.update(t,c,f,m,h,o,e,u,O)}for(var p=g,D=1;p<u;p+=g,D+=1,f+=1)O=D%d==0?v:b,this.update(t,c,f,s,p,a,e,u,O)}if(r)for(var E=n.target.values,M=this.Pr,S=0,j=E.length;S<j;S+=1,f+=1){var T=E[S],I=T.position;T.type===Vb.VERTICAL?this.update(t,c,f,I,h,o,e,u,M):this.update(t,c,f,s,I,a,e,u,M)}for(S=f,j=c.length;S<j;++S)c[S].visible=!1;t.visible=!0}else t.visible=!1},t.prototype.update=function(t,n,i,r,e,u,s,h,o){var a=null;i<n.length?((a=n[i]).lock(_t.UPLOADED),a.points.position=u,a.transform.position.set(r,e),a.stroke.set(!0,o.color,o.alpha,o.width,void 0,void 0,o.style),a.size.set(s,h),a.visible=!0,a.unlock(_t.UPLOADED,!0)):((a=new fn).lock(_t.UPLOADED),a.points.position=u,a.transform.position.set(r,e),a.stroke.set(!0,o.color,o.alpha,o.width,void 0,void 0,o.style),a.size.set(s,h),a.visible=!0,a.unlock(_t.UPLOADED,!0),a.attach(t))},t}(),Uw=function(t){function n(n){var i=t.call(this,n)||this;return i.Fv=i.toSnap(i.theme,n.snap),i}return G(n,t),n.prototype.toSnap=function(t,n){return n?new Pw(this,t,n):null},Object.defineProperty(n.prototype,"snap",{get:function(){return this.Fv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"shape",{get:function(){var t;return null!==(t=this.Vn)&&void 0!==t?t:this.Vn=this.newShape()},enumerable:!1,configurable:!0}),n.prototype.newShape=function(){return new _w(this)},n.prototype.serialize=function(t,n){var i,r=new Gb,e=[],u=this.ze,s=u.color,h=u.alpha;return{version:1,id:t,name:this.name,label:this.label,width:this.width,height:this.height,category:this.category,summary:this.summary,description:this.description,background:{color:jt(s)?s:16777215,alpha:jt(h)?h:0},tile:this.gs.serialize(),resources:r.resources,data:r.data,pieces:r.pieces,layers:this.cs.serialize(r,e),items:e,snap:null===(i=this.Fv)||void 0===i?void 0:i.serialize(),thumbnail:null==n?void 0:n.serialize()}},n.prototype.onResize=function(n,i,r,e){var u=this.Fv;null!=u&&u.onResize(n,i,r,e),t.prototype.onResize.call(this,n,i,r,e)},n.prototype.onScale=function(n,i,r,e){var u=this.Fv;null!=u&&u.onScale(n,i,r,e),t.prototype.onScale.call(this,n,i,r,e)},n.prototype.render=function(n){var i=this.Fv;null!=i&&i.onRender(),t.prototype.render.call(this,n)},n.prototype.getType=function(){return"DDiagramCanvasEditor"},n}(Cu),Fw=function(){function t(t,n,i){this.es=t,this.fh=this.toIsEnabled(n,i),this.tu=this.toCreateAsUrlOptions(n,i)}return t.prototype.toIsEnabled=function(t,n){var i;return null!==(i=null==n?void 0:n.enable)&&void 0!==i?i:t.isThumbnailEnabled()},t.prototype.toSize=function(t,n){return void 0!==n?n:t.getThumbnailSize()},t.prototype.toCleanup=function(t,n){var i,r;return null==n||!0===n?{snap:!0,background:!0}:!1===n?{snap:!1,background:!1}:{snap:null===(i=n.snap)||void 0===i||i,background:null===(r=n.background)||void 0===r||r}},t.prototype.toCreateAsUrlOptions=function(t,n){return{size:this.toSize(t,null==n?void 0:n.size),cleanup:this.toCleanup(t,null==n?void 0:n.cleanup)}},Object.defineProperty(t.prototype,"enable",{get:function(){return this.fh},set:function(t){this.fh=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.tu.size},set:function(t){this.tu.size=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cleanup",{get:function(){return this.tu.cleanup},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){if(this.fh)return this.es.createAsUrl(this.tu)},t}(),Gw=function(t){function n(n){var i=t.call(this,n)||this;i.Wt=!1,i.Wt=!1,Cd.getCommandController().on("dirty",(function(){!0!==i.Wt&&(i.Wt=!0,i.emit("change",i))}));var r=i.theme;return i.Gv=new Jb(i,r,null==n?void 0:n.snapper),i.Hv=new Fw(i.es,r,null==n?void 0:n.thumbnail),i}return G(n,t),Object.defineProperty(n.prototype,"thumbnail",{get:function(){return this.Hv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"snapper",{get:function(){return this.Gv},enumerable:!1,configurable:!0}),n.prototype.toMode=function(t){return(null==t?void 0:t.mapping)?Pi.EDITOR_DATA_MAPPED:Pi.EDITOR},n.prototype.newCanvas=function(t){return new Uw(this.toCanvasOptions(t))},n.prototype.toCanvasOptions=function(t){var n=this.toCanvasBaseOptions(t),i=this.Gv,r=n.snap;return null==r?n.snap={controller:i}:null==r.controller&&(r.controller=i),n},n.prototype.serialize=function(){var t=this.canvas,n=this.$u;if(null!=t&&null!=n){this.emit("serializing",t,this);try{var i=t.serialize(n.id,this.Hv);return this.emit("serialized",t,null,this),i}catch(n){return this.emit("serialized",t,"exception",this),null}}return null},n.prototype.save=function(){var t=this,n=this.serialize();if(null!=n){var i=this.ns;if(i){var r=Se.toSimple(n);return this.emit("saving",r,this),i.save(r).then((function(i){t.Wt=!1,n.id=i,t.$u=n,t.emit("change",t),t.emit("saved",null,t)}),(function(n){t.emit("saved",n,t)}))}return this.emit("saved","no-controller",this),Promise.reject()}return this.emit("saved",null,this),Promise.resolve()},n.prototype.saveAs=function(t){var n=this,i=this.serialize();if(null!=i){var r=this.ns;if(r){i.id=void 0,i.name=t;var e=Se.toSimple(i);return this.emit("saving",e,this),r.save(e).then((function(r){n.Wt=!1,i.id=r,n.$u=i;var e=n.canvas;null!=e&&(e.name=t),n.emit("change",n),n.emit("saved",null,n)}),(function(t){n.emit("saved",t,n)}))}return this.emit("saved","no-controller",this),Promise.reject("no-controller")}return this.emit("saved",null,this),Promise.resolve()},n.prototype.delete=function(){var t=this,n=this.$u;if(n&&null!=n.id){var i=this.ns;return i?(this.emit("deleting",this),i.delete(n.id).then((function(){var n=t.set(null);return t.emit("deleted",null,t),n}),(function(n){return t.emit("deleted",n,t),Promise.reject(n)}))):(this.emit("deleted","no-controller",this),Promise.reject("no-controller"))}return this.set(null),this.emit("deleted",null,this),Promise.resolve(null)},n.prototype.create=function(t){return this.set({version:1,id:void 0,name:t.name,label:t.label,width:t.width,height:t.height,category:t.category,summary:t.summary,description:t.description,background:t.background,resources:[],data:[],layers:[[this.theme.getBaseLayerLabel()]],items:[],snap:void 0})},n.prototype.onSet=function(n,i){t.prototype.onSet.call(this,n,i);var r=n.snap,e=this.Gv;null!=r?e.deserialize(r):e.reset(),this.rs&&(e.target.visible=!1,e.grid.visible=!1),this.Wt=!1,this.emit("change",this)},n.prototype.onUnset=function(){t.prototype.onUnset.call(this),this.Wt=!1,this.emit("change",this)},n.prototype.open=function(t){var n=this,i=this.ns;return i?(this.emit("opening",this),i.get(t).then((function(t){var i=n.set(Se.toSerialized(t));return n.emit("opened",null,n),i}),(function(t){return n.emit("opened",t,n),Promise.reject(t)}))):(this.emit("opened","no-controller",this),Promise.reject("no-controller"))},n.prototype.close=function(){return this.set(null)},n.prototype.isChanged=function(){return this.Wt||this.isNew()},n.prototype.isNew=function(){var t=this.$u;return null!=t&&null==t.id},n.prototype.getName=function(){var t=this.$u;return null!=t?t.name:null},n.prototype.getType=function(){return"DDiagramEditor"},n}(mu),Hw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DDialogConfirmMessage"},n}(Cv),zw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newContentChildren=function(n,i){var r=t.prototype.newContentChildren.call(this,n,i);return r.push(this.message),r},n.prototype.toMessage=function(t,n){var i=null==n?void 0:n.message;return null!=i?Tt(i)||St(i)?this.newMessage(this.toMessageOptions(i)):i instanceof ru?i:this.newMessage(this.toMessageOptionsMerged(i,t.getMessage())):this.newMessage(this.toMessageOptions(t.getMessage()))},n.prototype.toMessageOptionsMerged=function(t,n){var i=t.text;return null==i&&(i={},t.text=i),void 0===i.value&&(i.value=n),t},n.prototype.toMessageOptions=function(t){return{text:{value:t}}},n.prototype.newMessage=function(t){return new Hw(t)},Object.defineProperty(n.prototype,"message",{get:function(){var t=this.zv;return null==t&&(t=this.toMessage(this.theme,this.tu),this.zv=t),t},enumerable:!1,configurable:!0}),n.prototype.getResolvedValue=function(){},n.prototype.getType=function(){return"DDialogConfirm"},n}(Gh),Vw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DDialogConfirmDelete"},n}(zw),Ww=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DDialogConfirmDiscard"},n}(zw),Xw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DDialogMessage"},n}(zw),Kw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DDialogProcessingMessage"},n}(Hw),Yw=function(t){function n(n){var i,r=t.call(this,n)||this;r.Vv=!0,r.Ur=0;var e=r.theme,u=null==n?void 0:n.delay;r.Wv=null!==(i=null==u?void 0:u.done)&&void 0!==i?i:e.getDoneDelay();var s=null==u?void 0:u.close;return r.Xv=void 0!==s?s:e.getCloseDelay(),r.Kv=r.message.text.value,r}return G(n,t),n.prototype.newMessage=function(t){return new Kw(t)},n.prototype.onOpen=function(){this.Vv=!1,this.Ur=Date.now();var n=this.q;null!=n&&clearTimeout(n);var i=this.Yv;null!=i&&clearTimeout(i);var r=this.message;r.text=this.Kv,r.state.removeAll(gt.SUCCEEDED,gt.FAILED);var e=this.mo;null!=e&&e.hide(),t.prototype.onOpen.call(this)},n.prototype.onDone=function(t){var n=this;null!=t?this.Yv=window.setTimeout((function(){n.close()}),t):this.close()},n.prototype.onResolved=function(t){null!=t&&(this.message.text=t),this.message.state.set(gt.SUCCEEDED,gt.FAILED);var n=this.Xv;if(null!=n)this.onDone(n);else{var i=this.mo;null!=i?i.show():this.close()}},n.prototype.onRejected=function(t){null!=t&&(this.message.text=t),this.message.state.set(gt.FAILED,gt.SUCCEEDED);var n=this.mo;null!=n?n.show():this.onDone(this.Xv)},n.prototype.resolve=function(t){var n=this;if(!this.Vv){this.Vv=!0;var i=Date.now()-this.Ur,r=this.Wv-i;0<r?this.q=window.setTimeout((function(){n.q=void 0,n.onResolved(t)}),r):this.onResolved(t)}},n.prototype.reject=function(t){var n=this;if(!this.Vv){this.Vv=!0;var i=Date.now()-this.Ur,r=this.Wv-i;0<r?this.q=window.setTimeout((function(){n.q=void 0,n.onRejected(t)}),r):this.onRejected(t)}},n.prototype.onCloseOn=function(){this.Vv&&t.prototype.onCloseOn.call(this)},n.prototype.getType=function(){return"DDialogProcessing"},n}(zw),Jw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.onOpen=function(){var n=Cd.getDocumentController().getName();null!=n&&(this.input.value=n),t.prototype.onOpen.call(this)},n.prototype.onOk=function(n){t.prototype.onOk.call(this,n);var i=Cd.getCommandController();Tt(n)?i.push(new xw(n)):n.then((function(t){i.push(new xw(t))}))},n.prototype.getType=function(){return"DDialogSaveAs"},n}(ho),Zw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DDropdown"},n}(Xd),qw=function(t){function n(n){var i=t.call(this,n)||this;return i.on(he.down,(function(t){i.state.isActionable&&i.onSelect(t)})),i}return G(n,t),n.prototype.onSelect=function(t){this.emit("select",this)},n.prototype.onKeyDown=function(n){return Qe.isActivateKey(n)&&this.onKeyDownActivate(n),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyDownActivate=function(t){return!(!this.state.isActionable||!this.state.isFocused||(this.onSelect(t),0))},n.prototype.getType=function(){return"DExpandableHeader"},n}(Cv),Qw=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return G(i,n),i.prototype.init=function(t){var i=this;n.prototype.init.call(this,t);var r=this.theme,e=this.toHeader(r,t);this.bo=e,e.on("select",(function(){i.toggle()})),this.addChild(e);var u=this.toBody(r,t);this.Ri=u,this.addChild(u),this.state.isActive?this.onActivated():this.onDeactivated()},i.prototype.toHeader=function(n,i){return i&&i.header?i.header instanceof t.DisplayObject?i.header:this.newHeader(n,i.header):this.newHeader(n)},i.prototype.newHeader=function(t,n){return new qw(n)},i.prototype.toBody=function(t,n){return n.body},i.prototype.open=function(){this.state.isActive=!0},i.prototype.close=function(){this.state.isActive=!1},i.prototype.toggle=function(){this.state.isActive=!this.state.isActive},i.prototype.onActivated=function(){var t=this.Ri;t instanceof ru?t.show():t.visible=!0},i.prototype.onDeactivated=function(){var t=this.Ri;t instanceof ru?t.hide():t.visible=!1},i.prototype.onStateChange=function(t,i){n.prototype.onStateChange.call(this,t,i),t.isActive?i.isActive||this.onActivated():i.isActive&&this.onDeactivated()},i.prototype.getType=function(){return"DExpandable"},i}(Js),$w={INITIAL:0,STARTED:1,RESOLVED:2,REJECTED:3},tO=function(){function t(t,n){var i,r,e,u,s,h,o;this.g=t,this.Nt=$w.INITIAL,this.Ur=0;var a=this.theme,c=null==n?void 0:n.delay;this.Wv=null!==(i=null==c?void 0:c.done)&&void 0!==i?i:a.getProcessDoneDelay();var f=null==c?void 0:c.close;this.Xv=void 0!==f?f:a.getProcessCloseDelay();var l=null==n?void 0:n.text;this.Jv=null!==(r=null==l?void 0:l.enabled)&&void 0!==r?r:a.isProcessTextEnabled(),this.Zv=null!==(e=null==l?void 0:l.value)&&void 0!==e?e:a.newProcessTextValue();var v=null==n?void 0:n.image;this.qv=null!==(u=null==v?void 0:v.enabled)&&void 0!==u?u:a.isProcessImageEnabled(),this.Qv=null!==(s=null==v?void 0:v.index)&&void 0!==s?s:a.getProcessImageIndex(),this.$v=null!==(h=null==v?void 0:v.source)&&void 0!==h?h:a.newProcessImageSource(),this.tb=null!==(o=null==v?void 0:v.rotation)&&void 0!==o?o:a.newProcessImageRotation(),this.nb=!1}return t.prototype.start=function(){var t=this.Nt;return t===$w.INITIAL?(this.Nt=$w.STARTED,this.onBegin()):t!==$w.RESOLVED&&t!==$w.REJECTED||(this.Nt=$w.STARTED,this.onEnd(),this.onBegin()),this},t.prototype.onBegin=function(){this.Ur=Date.now();var t=this.q;null!=t&&clearTimeout(t);var n=this.Yv;null!=n&&clearTimeout(n);var i=this.g,r=i.state;if(r.lock(),r.ticker.remove(gt.PROCESSING).add(gt.PROCESSING,32),r.removeAll(gt.SUCCEEDED,gt.FAILED),this.nb=r.isReadOnly,this.nb||r.add(gt.READ_ONLY),r.unlock(),this.Jv){this.ib=i.text.value;var e=this.Zv;void 0!==e&&(i.text=e)}if(this.qv){var u=i.image.get(this.Qv);if(null!=u){this.rb=u.source,this.eb=u.rotation;var s=this.$v;void 0!==s&&(u.source=s);var h=this.tb;void 0!==h&&(u.rotation=h)}}},t.prototype.end=function(){var t=this.Nt;return t!==$w.STARTED&&t!==$w.RESOLVED&&t!==$w.REJECTED||(this.Nt=$w.INITIAL,this.onEnd()),this},t.prototype.onEnd=function(){var t=this.q;null!=t&&clearTimeout(t);var n=this.Yv;null!=n&&clearTimeout(n);var i=this.g,r=i.state;if(r.lock(),r.ticker.remove(gt.PROCESSING),r.removeAll(gt.SUCCEEDED,gt.FAILED),this.nb||r.remove(gt.READ_ONLY),r.unlock(),this.Jv&&(i.text=this.ib),this.qv){var e=i.image.get(this.Qv);null!=e&&(e.source=this.rb,e.rotation=this.eb)}},t.prototype.resolve=function(t){var n=this;if(this.Nt===$w.STARTED){this.Nt=$w.RESOLVED;var i=Date.now()-this.Ur,r=this.Wv-i;0<r?this.q=window.setTimeout((function(){n.q=void 0,n.onResolved(t)}),r):this.onResolved(t)}},t.prototype.onResolved=function(t){var n=this.g;this.Jv&&null!=t&&(n.text=t);var i=n.state;i.lock(),i.ticker.remove(gt.PROCESSING),i.add(gt.SUCCEEDED),i.remove(gt.FAILED),this.nb||i.remove(gt.READ_ONLY),i.unlock(),this.onDone(this.Xv)},t.prototype.reject=function(t){var n=this;if(this.Nt===$w.STARTED){this.Nt=$w.REJECTED;var i=Date.now()-this.Ur,r=this.Wv-i;0<r?this.q=window.setTimeout((function(){n.q=void 0,n.onRejected(t)}),r):this.onRejected(t)}},t.prototype.onRejected=function(t){var n=this.g;this.Jv&&null!=t&&(n.text=t);var i=n.state;i.lock(),i.ticker.remove(gt.PROCESSING),i.add(gt.FAILED),i.remove(gt.SUCCEEDED),this.nb||i.remove(gt.READ_ONLY),i.unlock(),this.onDone(this.Xv)},t.prototype.onDone=function(t){var n=this;null!=t?this.Yv=window.setTimeout((function(){n.Yv=void 0,n.end()}),t):this.end()},t.prototype.getType=function(){return"DIndicatorProcessing"},Object.defineProperty(t.prototype,"theme",{get:function(){return it.get(this.getType())},enumerable:!1,configurable:!0}),t}(),nO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.createInput=function(t){return new to(t)},n}(Fd),iO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newUtil=function(){return new bd(this,this.newOperation(),this.theme,this.tu)},n.prototype.getType=function(){return"DInputTextArea"},n}(qh),rO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DLayoutBoard"},n}(ru),eO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DListItemAmbient"},n}(Dg),uO=function(){function t(t){void 0===t&&(t=256),this.ub=t}return t.prototype.getTileSize=function(){return this.ub},t.prototype.lonLatToMeters=function(n,i){var r=t.CIRCUMFERENCE_HALF;return i.x=n.x*r/180,i.y=Math.log(Math.tan((90+n.y)*Math.PI/360))*r/Math.PI,i},t.prototype.metersToLonLat=function(n,i){var r=t.CIRCUMFERENCE_HALF;return i.x=n.x/r*180,i.y=360*Math.atan(Math.exp(n.y*Math.PI/r))/Math.PI-90,i},t.prototype.pixelsToMeters=function(n,i,r,e){var u=this.toResolution(i,r),s=t.CIRCUMFERENCE_HALF;return e.x=n.x*u-s,e.y=s-n.y*u,e},t.prototype.metersToPixels=function(n,i,r,e){var u=this.toResolution(i,r),s=t.CIRCUMFERENCE_HALF;return e.x=(n.x+s)/u,e.y=(s-n.y)/u,e},t.prototype.pixelsToTile=function(t,n,i){return i.x=Math.ceil(t.x/n)-1,i.y=Math.ceil(t.y/n)-1,i},t.prototype.metersToTile=function(n,i,r){var e=t.CIRCUMFERENCE_HALF,u=1<<i;return r.x=Math.ceil(.5*(n.x/e+1)*u)-1,r.y=Math.ceil(.5*(1-n.y/e)*u)-1,r},t.prototype.lonLatToTile=function(t,n,i){return this.metersToTile(this.lonLatToMeters(t,i),n,i)},t.prototype.lonLatToPixels=function(t,n,i,r){return this.metersToPixels(this.lonLatToMeters(t,r),n,i,r)},t.prototype.pixelsToLonLat=function(t,n,i,r){return this.metersToLonLat(this.pixelsToMeters(t,n,i,r),r)},t.prototype.tileToPixels=function(t,n,i){return i.x=t.x*n,i.y=t.y*n,i},t.prototype.tileToMeters=function(n,i,r){var e=this.toResolutionMeter(i),u=t.CIRCUMFERENCE_HALF;return r.x=n.x*e+u,r.y=u-n.y*e,r},t.prototype.toResolutionMeter=function(n){return 2*t.CIRCUMFERENCE_HALF/(1<<n)},t.prototype.toResolution=function(n,i){return 2*t.CIRCUMFERENCE_HALF/(i<<n)},t.prototype.toTileCount=function(t){return 1<<t},t.prototype.toTileCode=function(t,n,i){return(n<<t)+i},t.CIRCUMFERENCE_HALF=6378137*Math.PI,t}(),sO=function(){function t(){}return Object.defineProperty(t,"DEFAULT",{get:function(){return null==this.sb&&(this.sb=new uO),this.sb},enumerable:!1,configurable:!0}),t}(),hO=function(){function n(n,i,r,e,u,s){this.tx=i,this.ty=r;var h=new t.Sprite(t.Texture.EMPTY);h.parent=n,h.position.set(e,u),h.scale.set(s,s),this.hb=h}return n.prototype.load=function(n,i){var r=t.Texture.from(n,{resolution:1});this.hb.texture=r,r.valid?i():r.on("update",i)},n.prototype.transform=function(t,n,i){var r=this.hb;r.position.set(t,n),r.scale.set(i,i)},Object.defineProperty(n.prototype,"loaded",{get:function(){return this.hb.texture.valid},enumerable:!1,configurable:!0}),n.prototype.render=function(t){var n=this.hb;n.updateTransform(),n.render(t)},n.prototype.destroy=function(){var n=this.hb,i=n.texture,r=i.baseTexture.resource,e=null;r instanceof t.resources.BaseImageResource&&r.source instanceof HTMLImageElement&&(e=r.source),i.destroy(!0),n.destroy(),e&&(e.src="")},n}(),oO=function(){function n(t,n,i,r,e,u){var s=this;this.g=t,this.mr=n,this.ob=u,this.ab=!1,this.cb=!0,this.fb=function(){s.onLoaded()},this.lb=i,this._lon0=NaN,this._lat0=NaN,this._lon1=NaN,this._lat1=NaN,this.vb=new Map,this.bb=function(t){s.renderTile(t)},this.gb=NaN,this.mb=NaN,this.wb=NaN,this.Ob=NaN,this.pb=function(t,n,i){s.deleteTile(t,n,i)},this.Db=function(t){s.destroyTile(t)},this.Eb=function(t){t.loaded||(s.Mb=!1)},this.Sb=e.toTileCount(i),this.jb=1/this.Sb,this.Tb=r.scale*this.jb,this.ub=e.getTileSize()*r.scale,this.Kt=r,this.rv=e,this.Mb=!0}return n.prototype.newTile=function(t,n,i,r,e){return new hO(this.g,t,n,i,r,e)},n.prototype.renderTile=function(t){t.render(this.gr)},Object.defineProperty(n.prototype,"tz",{get:function(){return this.lb},enumerable:!1,configurable:!0}),n.prototype.render=function(t){this.gr=t,this.vb.forEach(this.bb)},n.prototype.move=function(t,i,r,e){var u=this._lon0,s=this._lat0,h=this._lon1,o=this._lat1;if(u!==t||s!==i||h!==r||o!==e){this._lon0=t,this._lat0=i,this._lon1=r,this._lat1=e;var a=this.lb,c=this.rv,f=n.WORK;f.set(t,i),c.lonLatToTile(f,a,f);var l=f.x,v=f.y;f.set(r,e),c.lonLatToTile(f,a,f);var b=f.x,d=f.y,g=this.Sb,m=Math.max(0,l),w=Math.min(g-1,b),O=Math.max(0,v),p=Math.min(g-1,d),D=m-this.gb,E=w-this.mb,M=O-this.wb,S=p-this.Ob,j=D!=D||D<0||1<D,T=E!=E||0<E||E<-1,I=M!=M||M<0||1<M,C=S!=S||0<S||S<-1;if(j||T||I||C){j?this.gb=m:m=this.gb,T?this.mb=w:w=this.mb,I?this.wb=O:O=this.wb,C?this.Ob=p:p=this.Ob,this.vb.forEach(this.pb);var N=m+w>>1,A=O+p>>1,R=Math.max(N-m,w-N),y=Math.max(A-O,p-A),k=Math.max(R,y);this.toOffset(f);var L=f.x,x=f.y;this.ab=!1,this.cb=!1,this.loadTile(a,N,A,L,x,f);for(var B=1;B<=k;++B){var _=N-B;m<=_&&this.loadTilesY(a,_,A,B,O,p,L,x,f);var P=N+B;P<=w&&this.loadTilesY(a,P,A,B,O,p,L,x,f);var U=A-B;O<=U&&this.loadTilesX(a,N,B-1,m,w,U,L,x,f);var F=A+B;F<=p&&this.loadTilesX(a,N,B-1,m,w,F,L,x,f)}this.cb=!0,this.ab&&this.onLoaded()}}},n.prototype.loadTilesX=function(t,n,i,r,e,u,s,h,o){this.loadTile(t,n,u,s,h,o);for(var a=1;a<=i;++a){var c=n-a;r<=c&&this.loadTile(t,c,u,s,h,o);var f=n+a;f<=e&&this.loadTile(t,f,u,s,h,o)}},n.prototype.loadTilesY=function(t,n,i,r,e,u,s,h,o){this.loadTile(t,n,i,s,h,o);for(var a=1;a<=r;++a){var c=i-a;e<=c&&this.loadTile(t,n,c,s,h,o);var f=i+a;f<=u&&this.loadTile(t,n,f,s,h,o)}},n.prototype.loadTile=function(t,n,i,r,e,u){var s=this.rv.toTileCode(t,n,i),h=this.vb,o=h.get(s);null==o&&(this.toTilePosition(n,i,r,e,u),o=this.newTile(n,i,u.x,u.y,this.Tb),h.set(s,o),o.load(this.mr(t,n,i),this.fb),this.Mb=!1)},n.prototype.toTilePosition=function(t,n,i,r,e){var u=this.ub,s=this.jb;return e.set(t,n),this.rv.tileToPixels(e,u,e),e.set(e.x*s+i,e.y*s+r),e},n.prototype.toOffset=function(t){var n=this.g,i=this.Kt,r=this.ub;return t.set(-i.x*r+.5*n.width,-i.y*r+.5*n.height),t},n.prototype.deleteTile=function(t,n,i){var r=t.tx,e=t.ty;(r<this.gb||this.mb<r||e<this.wb||this.Ob<e)&&(i.delete(n),t.destroy())},n.prototype.destroy=function(){var t=this.vb;t.forEach(this.Db),t.clear()},n.prototype.destroyTile=function(t){t.destroy()},n.prototype.updateLoadingState=function(){this.Mb=!0,this.vb.forEach(this.Eb)},n.prototype.onLoaded=function(){this.cb?this.ob():this.ab=!0},Object.defineProperty(n.prototype,"loaded",{get:function(){return this.Mb||this.updateLoadingState(),this.Mb},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"mapping",{get:function(){return this.Kt},set:function(t){var i=this,r=this.rv,e=t.scale*this.jb,u=r.getTileSize()*t.scale;this.Tb=e,this.ub=u,this.Kt=t;var s=n.WORK;this.toOffset(s);var h=s.x,o=s.y;this.vb.forEach((function(t){i.toTilePosition(t.tx,t.ty,h,o,s),t.transform(s.x,s.y,e)}))},enumerable:!1,configurable:!0}),n.WORK=new t.Point,n}(),aO=function(n){function i(t){var i=n.call(this)||this,r=t.canvas;i.ki=r,i.mr=t.builder;var e=t.mapping;i.Kt=e;var u=t.coordinate;i.rv=u,i.Ib=i.toMapping(r,e,u),i._z=NaN,i.lb=NaN,i.Cb=t.plane.min,i.Nb=t.plane.max,i.Ab=[],i.fb=function(){i.onLoaded()},i.Rb=function(){i.yb=void 0,i.fit()},i.kb=t.plane.throttle;var s=function(){i.fitThrottled()};return i.Lb=s,r.on("scale",s),r.on("move",s),r.snippet.add(i,!0),i}return G(i,n),Object.defineProperty(i.prototype,"coordinate",{get:function(){return this.rv},enumerable:!1,configurable:!0}),i.prototype.fitThrottled=function(){null==this.yb&&(this.yb=window.setTimeout(this.Rb,this.kb))},i.prototype.toMapping=function(t,n,r){var e=i.WORK_LONLAT,u=r.getTileSize();e.set(n.from.lon,n.from.lat),r.lonLatToPixels(e,0,u,e);var s=e.x,h=e.y;e.set(n.to.lon,n.to.lat),r.lonLatToPixels(e,0,u,e);var o=e.x,a=e.y,c=Math.abs(o-s),f=Math.abs(a-h),l=1e-7,v=1;return l<c?v=l<f?Math.max(t.width/c,t.height/f):t.width/c:l<f&&(v=t.height/f),{scale:v,x:.5*(o+s)/u,y:.5*(a+h)/u}},Object.defineProperty(i.prototype,"mapping",{get:function(){return this.Kt},set:function(t){var n=this.Ib,i=this.toMapping(this.ki,t,this.rv),r=1e-7;if(r<Math.abs(n.scale-i.scale)||r<Math.abs(n.x-i.x)||r<Math.abs(n.y-i.y)){this.Ib=i;for(var e=this.Ab,u=0,s=e.length;u<s;++u){var h=e[u];h&&(h.mapping=i)}lt.update(this.ki),this.Lb()}},enumerable:!1,configurable:!0}),i.prototype.newPlane=function(t){return new oO(this.ki,this.mr,t,this.Ib,this.rv,this.fb)},i.prototype.render=function(t){for(var n=this.lb,i=this.Ab,r=0;r<n;++r)null!=(e=i[r])&&e.render(t);for(r=i.length-1;n<r;--r){var e;null!=(e=i[r])&&e.render(t)}var u=i[n];null!=u&&u.render(t)},i.prototype.toTileZ=function(t){return Math.min(this.Nb,Math.max(this.Cb,Math.floor(t)))},i.prototype.updateTransform=function(){},i.prototype.toZ=function(t){return Math.log(this.Ib.scale*t)/Math.log(2)},i.prototype.move=function(t,n,i,r,e){var u=this.Ab,s=this.toZ(t);if(this._z!==s){this._z=s;var h=this.toTileZ(s);if(this.lb!==h){this.lb=h;var o=u[h];null==o&&(o=this.newPlane(h),u[h]=o)}}var a=u[this.lb];return null!=a&&a.move(n,i,r,e),this},i.prototype.fit=function(){var t=this.ki;if(null!=t){var n=t.parent;if(null!=n){var r=t.scale,e=r.x,u=r.y,s=t.x,h=t.y,o=this.rv,a=this.Ib,c=o.getTileSize()*a.scale,f=a.x*c-(s/e+.5*t.width),l=f+n.width/e,v=a.y*c-(h/u+.5*t.height),b=v+n.height/u,d=i.WORK_LONLAT;d.set(f,v),o.pixelsToLonLat(d,0,c,d);var g=d.x,m=d.y;d.set(l,b),o.pixelsToLonLat(d,0,c,d);var w=d.x,O=d.y;this.move(e,g,m,w,O)}}return this},i.prototype.destroyPlanesBefore=function(t,n){for(var i=0;i<t;++i){var r=n[i];r&&(r.destroy(),n[i]=void 0)}},i.prototype.destroyPlanesAfter=function(t,n){for(var i=t+1,r=n.length;i<r;++i){var e=n[i];e&&(e.destroy(),n[i]=void 0)}},i.prototype.cleanup=function(){var t=this.lb,n=this.Ab,i=n[t];if(i&&i.loaded)return this.destroyPlanesBefore(t,n),void this.destroyPlanesAfter(t,n);for(var r=t+1,e=n.length;r<e;++r)if((u=n[r])&&u.loaded)return this.destroyPlanesBefore(t,n),void this.destroyPlanesAfter(r,n);for(r=t-1;0<=r;--r){var u;if((u=n[r])&&u.loaded)return void this.destroyPlanesBefore(r,n)}},i.prototype.onLoaded=function(){this.cleanup(),lt.update(this.ki)},i.prototype.destroy=function(){for(var t=this.Ab,n=0,i=t.length;n<i;++n){var r=t[n];r&&(r.destroy(),t[n]=void 0)}var e=this.ki,u=this.Lb;return e.off("scale",u),e.off("move",u),e.snippet.remove(this,!0),this},i.WORK_LONLAT=new t.Point,i}(t.utils.EventEmitter),cO=function(t,n,i){return"https://j.tile.openstreetmap.jp/".concat(t,"/").concat(n,"/").concat(i,".png")},fO=function(){function t(){}return t.toPlaneOptions=function(t){var n,i,r,e=t.plane;return{min:null!==(n=null==e?void 0:e.min)&&void 0!==n?n:this.MIN,max:null!==(i=null==e?void 0:e.max)&&void 0!==i?i:this.MAX,throttle:null!==(r=null==e?void 0:e.throttle)&&void 0!==r?r:this.THROTTLE}},t.from=function(t){return new aO({canvas:t.canvas,builder:t.builder||cO,mapping:t.canvas.tile.mapping,coordinate:t.coordinate||sO.DEFAULT,plane:this.toPlaneOptions(t)})},t.MIN=0,t.MAX=18,t.THROTTLE=333,t}(),lO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.toMenu=function(t,n){var i=null==n?void 0:n.menu;return i instanceof Wd?i:new Wd(this.toMenuOptions(t,i))},n.prototype.newMenu=function(t,n){return new Wd(this.toMenuOptions(t,n))},n.prototype.toMenuOptions=function(t,n){return n?(null==n.fit&&(n.fit=!1),n):{fit:!1}},n.prototype.onActivate=function(n){t.prototype.onActivate.call(this,n),this.open()},n.prototype.open=function(){this.menu.open(this)},n.prototype.close=function(){this.menu.close()},Object.defineProperty(n.prototype,"menu",{get:function(){var t=this,n=this.Ma;return null==n&&((n=this.toMenu(this.theme,this.tu)).on("select",(function(n,i,r){t.onMenuSelect(n,i,r)})),this.Ma=n),n},enumerable:!1,configurable:!0}),n.prototype.onMenuSelect=function(t,n,i){this.emit("select",t,n,this);var r=this.parent;r&&r.emit("select",t,n,r)},n.prototype.onKeyDown=function(n){return Qe.isArrowDownKey(n)&&this.onKeyDownArrowDown(n),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyDownArrowDown=function(t){return!(!this.state.isActionable||!this.state.isFocused||(this.onActivate(t),0))},n.prototype.getType=function(){return"DMenuBarItem"},n}(kh),vO=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return G(i,n),i.prototype.init=function(t){n.prototype.init.call(this,t);var i=null==t?void 0:t.items;if(i)for(var r=0,e=i.length;r<e;++r){var u=this.toItem(i[r]);u&&this.addChild(u)}},i.prototype.toItem=function(n){return null==n?null:n instanceof t.DisplayObject?n:"space"in n?new Xs(n):new lO(n)},i.prototype.onKeyDown=function(t){return Qe.moveFocusHorizontally(t,this),n.prototype.onKeyDown.call(this,t)},i.prototype.getType=function(){return"DMenuBar"},i}(xh),bO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.initReflowable=function(){},n.prototype.getType=function(){return"DMenuSidedContent"},n}(xh),dO={NONE:0,SINGLE:1,SINGLE_ONCE:2},gO=function(){return!0},mO=function(n){function i(t,i){var r,e,u,s=n.call(this)||this;s.do=t,s.qf=null,s.Pi=!0,s.kt=rr(null!==(e=null!==(r=null==i?void 0:i.mode)&&void 0!==r?r:null==i?void 0:i.type)&&void 0!==e?e:dO.SINGLE_ONCE,dO),s.xb=null!==(u=null==i?void 0:i.filter)&&void 0!==u?u:s.getFilterDefault();var h=null==i?void 0:i.on;if(h)for(var o in h){var a=h[o];a&&s.on(o,a)}return s}return G(i,n),i.prototype.first=function(){return this.qf},i.prototype.toDirty=function(){this.Pi=!0},i.prototype.update=function(){this.Pi&&(this.Pi=!1,this.Rh(this.do))},i.prototype.hasMenu=function(t){return t&&t.menu instanceof Wd},i.prototype.Rh=function(n){for(var i=n.children,r=0,e=i.length;r<e;++r){var u=i[r];u instanceof Nv&&u.state.isActive&&this.Bb(u,!1),u instanceof t.Container&&this.Rh(u),this.hasMenu(u)&&this.Rh(u.menu)}},i.prototype.add=function(t){this.update(),this.Bb(t,!0)},i.prototype.set=function(t){this.update(),this.Bb(t,!0)},i.prototype.get=function(t){return this.update(),this.qf},i.prototype.getIndex=function(t){return null},i.prototype.size=function(){return this.qf?1:0},i.prototype.isEmpty=function(){return null==this.qf},i.prototype.remove=function(t){this.update(),this.qf===t&&this.Bb(null,!0)},i.prototype.clear=function(){this.update(),this.Bb(null,!0)},i.prototype.getFilterDefault=function(){return gO},i.prototype.Bb=function(t,n){var i=this.qf,r=this.kt;r!==dO.NONE&&this.xb(t)&&i!==t&&(this.setState(i,r,!1),this.qf=t,this.setState(t,r,!0),n&&this.emit("change",this))},i.prototype.setState=function(t,n,i){t&&(n===dO.SINGLE?t.state.isActive=i:i?t.state.addAll(gt.ACTIVE,gt.READ_ONLY):t.state.removeAll(gt.ACTIVE,gt.READ_ONLY))},i}(t.utils.EventEmitter),wO=function(t){function n(n){var i,r=t.call(this,n)||this,e=new Vd(r);r.Qu=e,e.add(r);var u=null==n?void 0:n.items;if(null!=u){var s=null!==(i=null==n?void 0:n.sticky)&&void 0!==i&&i;r.newItems(u,s)}var h=null==n?void 0:n.selection;return r.Qf=h instanceof mO?h:r.newSelection(h),r}return G(n,t),n.prototype.newSelection=function(t){return new mO(this.content,t)},n.prototype.onHierarchyDirty=function(){var n=this.Qf;null!=n&&n.toDirty(),t.prototype.onHierarchyDirty.call(this)},n.prototype.newItems=function(t,n){mb.newItems(this.content,t,n)},n.prototype.newContent=function(t){return new bO(t)},Object.defineProperty(n.prototype,"selection",{get:function(){return this.Qf},enumerable:!1,configurable:!0}),n.prototype.getContext=function(){return this.Qu},n.prototype.getCloseable=function(){return this},n.prototype.open=function(){},n.prototype.close=function(){},n.prototype.onKeyDown=function(n){return Qe.moveFocusVertically(n,this),t.prototype.onKeyDown.call(this,n)},n.prototype.getType=function(){return"DMenuSided"},n}(Wg),OO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DNoteError"},n}(Zg),pO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DNoteNoItemsFound"},n}(Zg),DO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DNoteSearching"},n}(Zg),EO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n}(ru),MO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DPaginationButtonLast"},n}(_h),SO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DPaginationButtonNext"},n}(_h),jO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DPaginationButtonPage"},n}(_h),TO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DPaginationButtonPrevious"},n}(_h),IO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DPaginationButtonTop"},n}(_h),CO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DPaginationDots"},n}(Rh),NO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DPaginationPage"},n}(Rh),AO=function(t){function n(n){var i,r,e,u,s=t.call(this,n)||this;null!=n?(s.j=null!==(r=null!==(i=n.size)&&void 0!==i?i:n.total)&&void 0!==r?r:10,s.Pt=null!==(u=null!==(e=n.value)&&void 0!==e?e:n.selected)&&void 0!==u?u:0):(s.j=10,s.Pt=0);var h=s.buttonTop;null!=h&&s.addChild(h);var o=s.buttonPrevious;null!=o&&s.addChild(o);var a=s.spaceLeft;null!=a&&s.addChild(a);var c=s.buttonPages0,f=c.length;s.addChild(c[0]),s.addChild(s.dots0);for(var l=1;l<f;++l)s.addChild(c[l]);s.addChild(s.page);for(var v=s.buttonPages1,b=v.length,d=(l=0,b-1);l<d;++l)s.addChild(v[l]);s.addChild(s.dots1),s.addChild(v[b-1]);var g=s.spaceRight;null!=g&&s.addChild(g);var m=s.buttonNext;null!=m&&s.addChild(m);var w=s.buttonLast;return null!=w&&s.addChild(w),s}return G(n,t),Object.defineProperty(n.prototype,"value",{get:function(){return this.Pt},set:function(t){0<=t&&t<this.j&&this.Pt!==t&&(this.Pt=t,this.toDirty(),lt.update(this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"selected",{get:function(){return this.value},set:function(t){this.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this.j},set:function(t){0<=t&&this.j!==t&&(this.j=t,this.Pt=0===t?-1:Math.max(0,Math.min(this.j-1,this.Pt)),this.toDirty(),lt.update(this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"total",{get:function(){return this.size},set:function(t){this.size=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dots0",{get:function(){var t=this._dots0;return null==t&&(t=this.newDots(),this._dots0=t),t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dots1",{get:function(){var t=this._dots1;return null==t&&(t=this.newDots(),this._dots1=t),t},enumerable:!1,configurable:!0}),n.prototype.newDots=function(){return new CO},Object.defineProperty(n.prototype,"buttonLast",{get:function(){var t=this.Pb;return void 0===t&&(t=this.newButtonLast(),this.Pb=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonLast=function(){var t,n,i=this,r=null===(n=null===(t=this.tu)||void 0===t?void 0:t.button)||void 0===n?void 0:n.last;if(null!==r&&!1!==r&&void 0!==r){var e=new MO(!0!==r?r:void 0);return e.on("active",(function(){i.onButtonLastActive()})),e}return null},n.prototype.onButtonLastActive=function(){this.goToLast()},n.prototype.goToLast=function(t){return this.goTo(this.j-1,t)},n.prototype.goTo=function(t,n){if(0<=t&&t<this.j&&this.Pt!==t){var i=this.Pt;return this.Pt=t,!0!==n&&this.emit("change",t,i,this),this.toDirty(),lt.update(this),!0}return!1},Object.defineProperty(n.prototype,"buttonNext",{get:function(){var t=this.Ub;return void 0===t&&(t=this.newButtonNext(),this.Ub=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonNext=function(){var t,n,i=this,r=null===(n=null===(t=this.tu)||void 0===t?void 0:t.button)||void 0===n?void 0:n.next;if(null!==r&&!1!==r){var e=new SO(!0!==r?r:void 0);return e.on("active",(function(){i.onButtonNextActive()})),e}return null},n.prototype.onButtonNextActive=function(){this.goToNext()},n.prototype.goToNext=function(t){return this.goTo(this.Pt+1,t)},Object.defineProperty(n.prototype,"buttonPrevious",{get:function(){var t=this.Fb;return void 0===t&&(t=this.newButtonPrevious(),this.Fb=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonPrevious=function(){var t,n,i=this,r=null===(n=null===(t=this.tu)||void 0===t?void 0:t.button)||void 0===n?void 0:n.previous;if(null!==r&&!1!==r){var e=new TO(!0!==r?r:void 0);return e.on("active",(function(){i.onButtonPreviousActive()})),e}return null},n.prototype.onButtonPreviousActive=function(){this.goToPrevious()},n.prototype.goToPrevious=function(t){return this.goTo(this.Pt-1,t)},Object.defineProperty(n.prototype,"buttonTop",{get:function(){var t=this.Gb;return void 0===t&&(t=this.newButtonTop(),this.Gb=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonTop=function(){var t,n,i=this,r=null===(n=null===(t=this.tu)||void 0===t?void 0:t.button)||void 0===n?void 0:n.top;if(null!==r&&!1!==r&&void 0!==r){var e=new IO(!0!==r?r:void 0);return e.on("active",(function(){i.onButtonTopActive()})),e}return null},n.prototype.onButtonTopActive=function(){this.goToTop()},n.prototype.goToTop=function(t){return this.goTo(0,t)},n.prototype.newButtonPage=function(){var t,n,i=this,r=new jO(null===(n=null===(t=this.tu)||void 0===t?void 0:t.button)||void 0===n?void 0:n.page);return r.on("active",(function(){i.onButtonPageActive(r)})),r},Object.defineProperty(n.prototype,"buttonPages0",{get:function(){var t=this._buttonPages0;return null==t&&(t=this.newButtonPages0(),this._buttonPages0=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonPages0=function(){return[this.newButtonPage(),this.newButtonPage(),this.newButtonPage(),this.newButtonPage()]},n.prototype.allocButtonPages0=function(t){for(var n=this.buttonPages0,i=n.length,r=this.getChildIndex(n[i-1])+1,e=0,u=t-i;e<u;++e){var s=this.newButtonPage();this.addChildAt(s,r+e),n.push(s)}},Object.defineProperty(n.prototype,"buttonPages1",{get:function(){var t=this._buttonPages1;return null==t&&(t=this.newButtonPages1(),this._buttonPages1=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonPages1=function(){return[this.newButtonPage(),this.newButtonPage(),this.newButtonPage(),this.newButtonPage()]},n.prototype.allocButtonPages1=function(t){for(var n=this.buttonPages1,i=n.length,r=this.getChildIndex(n[0]),e=0,u=t-i;e<u;++e){var s=this.newButtonPage();this.addChildAt(s,r),n.unshift(s)}},Object.defineProperty(n.prototype,"page",{get:function(){var t=this.Hb;return null==t&&(t=this.newPage(),this.Hb=t),t},enumerable:!1,configurable:!0}),n.prototype.newPage=function(){var t;return new NO(null===(t=this.tu)||void 0===t?void 0:t.page)},n.prototype.onButtonPageActive=function(t){var n=t.text.value;jt(n)&&(this.goTo(n-1),t.state.isFocused&&(t.state.isHovered=!1,this.page.focus()))},Object.defineProperty(n.prototype,"spaceLeft",{get:function(){var t=this.zb;return void 0===t&&(t=this.newSpaceLeft(),this.zb=t),t},enumerable:!1,configurable:!0}),n.prototype.newSpaceLeft=function(){return null!=this.buttonTop||null!=this.buttonPrevious?this.newSpace():null},Object.defineProperty(n.prototype,"spaceRight",{get:function(){var t=this.Vb;return void 0===t&&(t=this.newSpaceRight(),this.Vb=t),t},enumerable:!1,configurable:!0}),n.prototype.newSpaceRight=function(){return null!=this.buttonLast||null!=this.buttonNext?this.newSpace():null},n.prototype.newSpace=function(){var t,n,i=null===(n=null===(t=this.tu)||void 0===t?void 0:t.button)||void 0===n?void 0:n.space;return null!==i&&!1!==i?!0===i||void 0===i?new Xs({weight:1}):jt(i)?new Xs({width:i}):new Xs(i):null},n.prototype.onReflow=function(){this.update(),t.prototype.onReflow.call(this)},n.prototype.update=function(){var t=this.j,n=this.Pt;t<=0?this.doUpdate0(n,t):this.iu.width.isOn?this.doUpdate2(n,t,0,0,0,0):this.doUpdate1(n,t)},n.prototype.doUpdate0=function(t,n){var i=this.buttonTop;null!=i&&(i.state.isEnabled=!1);var r=this.buttonPrevious;null!=r&&(r.state.isEnabled=!1),this.hideDots(this.dots0);for(var e=this.buttonPages0,u=0,s=e.length;u<s;++u)this.hidePage(e[u]);this.hidePage(this.page);var h=this.buttonPages1;for(u=0,s=h.length;u<s;++u)this.hidePage(h[u]);this.hideDots(this.dots1);var o=this.buttonNext;null!=o&&(o.state.isEnabled=!1);var a=this.buttonLast;a&&(a.state.isEnabled=!1)},n.prototype.doUpdate1=function(t,n){var i=0,r=0,e=this.buttonTop;null!=e&&(i+=e.width,r+=1);var u=this.buttonPrevious;null!=u&&(i+=u.width,r+=1);var s=this.spaceLeft;null!=s&&(s.weight<0&&(i+=s.width),r+=1),i+=this.page.width,r+=1;var h=this.spaceRight;null!=h&&(h.weight<0&&(i+=h.width),r+=1);var o=this.buttonNext;null!=o&&(i+=o.width,r+=1);var a=this.buttonLast;a&&(i+=a.width,r+=1);var c=this.ni.horizontal;2<=r&&(i+=(r-1)*c);var f=this.padding,l=this.width-(f.getLeft()+f.getRight());if(l<=i)this.doUpdate2(t,n,4,4,0,0);else{var v=this.buttonPages0[0].width,b=t,d=b*(v+c),g=this.buttonPages1[0].width,m=n-(t+1),w=m*(g+c);if(i+d+w<=l)this.doUpdate2(t,n,0,0,0,0);else{var O=this.dots1.width,p=this.dots0.width,D=c+v,E=c+g,M=p+D,S=O+E,j=M+D,T=S+E;if(d<=w)if(3<=m&&i+d+T<=l){var I=l-(i+d+T),C=Math.floor(I/E);this.doUpdate2(t,n,0,1,0,C)}else if(3<=b&&3<=m&&i+j+T<=l){I=l-(i+j+T),C=Math.floor(.5*I/E);var N=Math.floor((I-C*E)/D);this.doUpdate2(t,n,1,1,N,C)}else 2<=m&&i+d+S<=l?this.doUpdate2(t,n,0,2,0,0):3<=b&&2<=m&&i+j+S<=l?(I=l-(i+j+S),N=Math.floor(I/D),this.doUpdate2(t,n,1,2,N,0)):2<=b&&2<=m&&i+M+S<=l?this.doUpdate2(t,n,2,2,0,0):1<=b&&1<=m&&i+p+O<=l?this.doUpdate2(t,n,3,3,0,0):this.doUpdate2(t,n,4,4,0,0);else 3<=b&&i+j+w<=l?(I=l-(i+j+w),N=Math.floor(I/D),this.doUpdate2(t,n,1,0,N,0)):3<=b&&3<=m&&i+j+T<=l?(I=l-(i+j+T),N=Math.floor(.5*I/D),C=Math.floor((I-N*D)/E),this.doUpdate2(t,n,1,1,N,C)):2<=b&&i+M+w<=l?this.doUpdate2(t,n,2,0,0,0):2<=b&&3<=m&&i+M+T<=l?(I=l-(i+M+T),C=Math.floor(I/E),this.doUpdate2(t,n,2,1,0,C)):2<=b&&2<=m&&i+M+S<=l?this.doUpdate2(t,n,2,2,0,0):1<=b&&1<=m&&i+p+O<=l?this.doUpdate2(t,n,3,3,0,0):this.doUpdate2(t,n,4,4,0,0)}}},n.prototype.doUpdate2=function(t,n,i,r,e,u){var s=this.buttonTop;null!=s&&(s.state.isEnabled=0<t);var h=this.buttonPrevious;null!=h&&(h.state.isEnabled=0<t);var o=this.buttonPages0;switch(i){case 0:this.hideDots(this.dots0),this.allocButtonPages0(t);for(var a=0,c=o.length;a<c;++a)a<t?this.showPage(o[a],a):this.hidePage(o[a]);break;case 1:for(this.showDots(this.dots0,1,t-2-e),this.allocButtonPages0(2+e),this.showPage(o[0],0),a=1,c=o.length-e-1;a<c;++a)this.hidePage(o[a]);for(a=0,c=1+e;a<c;++a)this.showPage(o[o.length-c+a],t-1-(c-1)+a);break;case 2:for(this.showDots(this.dots0,0,t-2),a=0,c=o.length-1;a<c;++a)this.hidePage(o[a]);this.showPage(o[o.length-1],t-1);break;case 3:for(this.showDots(this.dots0,0,t-1),a=0,c=o.length;a<c;++a)this.hidePage(o[a]);break;case 4:for(this.hideDots(this.dots0),a=0,c=o.length;a<c;++a)this.hidePage(o[a])}this.showPage(this.page,t);var f=this.buttonPages1;switch(r){case 0:for(this.allocButtonPages1(n-(t+1)),a=0,c=f.length;a<c;++a){var l=t+1+a;l<n?this.showPage(f[a],l):this.hidePage(f[a])}this.hideDots(this.dots1);break;case 1:for(this.allocButtonPages1(2+u),a=0,c=1+u;a<c;++a)this.showPage(f[a],t+1+a);for(a=1+u,c=f.length-1;a<c;++a)this.hidePage(f[a]);this.showPage(f[f.length-1],n-1),this.showDots(this.dots1,t+2+u,n-2);break;case 2:for(this.showPage(f[0],t+1),a=1,c=f.length;a<c;++a)this.hidePage(f[a]);this.showDots(this.dots1,t+2,n-1);break;case 3:for(a=0,c=f.length;a<c;++a)this.hidePage(f[a]);this.showDots(this.dots1,t+1,n-1);break;case 4:for(a=0,c=f.length;a<c;++a)this.hidePage(f[a]);this.hideDots(this.dots1)}var v=this.buttonNext;null!=v&&(v.state.isEnabled=t<n-1);var b=this.buttonLast;null!=b&&(b.state.isEnabled=t<n-1)},n.prototype.showPage=function(t,n){t.text=n+1,t.show()},n.prototype.hidePage=function(t){t.hide()},n.prototype.showDots=function(t,n,i){t.show()},n.prototype.hideDots=function(t){t.hide()},n.prototype.getType=function(){return"DPagination"},n}(xh),RO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n}(ru),yO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n}(ru),kO=function(t){function n(n){var i=t.call(this,n)||this;i.R=[];var r=null==n?void 0:n.values;return r&&(i.values=r),i}return G(n,t),n.prototype.onMenuSelect=function(n,i,r){if(t.prototype.onMenuSelect.call(this,n,i,r),i instanceof yv){var e=this.R,u=[],s=[];i.state.isActive?this.updateMenuItems(r,e,n,void 0,u,s):this.updateMenuItems(r,e,void 0,n,u,s),this.R=u,this.text=s,this.onValueChange(u,e,s)}},n.prototype.onMenuReplaced=function(n,i){t.prototype.onMenuReplaced.call(this,n,i);var r=this.R,e=[],u=[];this.updateMenuItems(n,r,void 0,void 0,e,u),this.R=e,this.text=u},n.prototype.onValueChange=function(t,n,i){this.emit("change",t,n,i,this)},n.prototype.open=function(){this.updateMenuItems(this.menu,this.R),t.prototype.open.call(this)},Object.defineProperty(n.prototype,"values",{get:function(){return this.R},set:function(t){var n=this.R;if(!this.isSameValues(t,n)){var i=[],r=[];this.updateMenuItems(this.menu,t,void 0,void 0,i,r),this.R=i,this.text=r}},enumerable:!1,configurable:!0}),n.prototype.isSameValues=function(t,n){if(t.length===n.length)for(var i=0,r=t.length;i<r;++i)if(n.indexOf(t[i])<0)return!1;return!1},n.prototype.updateMenuItems=function(t,n,i,r,e,u){for(var s=t.children,h=0,o=s.length;h<o;++h){var a=s[h];if(a instanceof Wv)this.updateMenuItems(a.menu,n,i,r,e,u);else if(a instanceof yv){var c=a.value;void 0!==r&&r===c?a.state.isActive=!1:void 0!==i&&a.value===i||0<=n.indexOf(a.value)?(e&&e.push(a.value),u&&u.push(a),a.state.isActive=!0):a.state.isActive=!1}}},n.prototype.getType=function(){return"DSelectMultiple"},n}(Xd),LO=function(t){function n(n,i,r,e,u){var s=t.call(this,n,i,r,i,r)||this;return s.Wb=e,s.Xb=u,s.gc=.5*i,s.mc=.5*r,s.interactive=!1,s.interactiveChildren=!1,n.on("update",(function(){s.onTextureUpdate()})),s}return G(n,t),n.prototype.onTextureUpdate=function(){this.emit("update",this)},n.prototype.onReflow=function(t,n,i){var r=this.gc,e=this.mc;this.x=-r+this.Wb,this.y=-e+this.Xb,this.width=r+n+r,this.height=e+i+e},n.prototype.render=function(n){var i=this.parent;if(i){var r=i.alpha;this.alpha=r*r*r}t.prototype.render.call(this,n)},n}(t.NineSlicePlane),xO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.init=function(n){var i;t.prototype.init.call(this,n),this.Pt=null!==(i=null==n?void 0:n.value)&&void 0!==i?i:0},Object.defineProperty(n.prototype,"value",{get:function(){return this.Pt},set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DSliderLabel"},n}(Eh),BO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DSliderThumb"},n}(kh),_O=function(t){function n(n){var i,r,e=t.call(this,n)||this;return e.Pt=null!==(i=null==n?void 0:n.value)&&void 0!==i?i:0,e.Kb=e.toRounder(n),e.Yb=null!==(r=null==n?void 0:n.delta)&&void 0!==r?r:1,e}return G(n,t),n.prototype.toRounder=function(t){var n,i=null==t?void 0:t.rounder;if(i)return i;var r=null!==(n=null==t?void 0:t.precision)&&void 0!==n?n:this.theme.getPrecision(),e=Math.pow(10,r);return function(t){return Math.round(t*e)/e}},Object.defineProperty(n.prototype,"value",{get:function(){return this.Pt},set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rounder",{get:function(){return this.Kb},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"delta",{get:function(){return this.Yb},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DSliderValue"},n}(Eh),PO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this.Jb=0,this.Zb=this.newTrack(n),this.addChild(this.Zb),this.qb=this.newTrackSelected(n),this.qb.state.isActive=!0,this.addChild(this.qb),this.hl=this.newThumb(n),this.addChild(this.hl),this.hh=this.newLabelMin(n),this.addChild(this.hh),this.oh=this.newLabelMax(n),this.addChild(this.oh),this.Pt=this.newValue(n),this.addChild(this.Pt),this.Zb.on(he.down,(function(t){i.Pt.visible=i.state.inEnabled,i.onTrackDown(t.data.global)})),this.qb.on(he.down,(function(t){i.Pt.visible=i.state.inEnabled,i.onTrackSelectedDown(t.data.global)})),this.Qb=function(t){i.onTrackUpBound(t),i.Pt.visible=!1},this.$b=function(t){i.onTrackSelectedUpBound(t),i.Pt.visible=!1},this.hl.on(he.down,(function(t){i.Pt.visible=!0,i.onThumbDown(t)})),this.td=function(t){i.onThumbMove(t)},this.nd=function(t){i.onThumbUp(t),i.Pt.visible=!1},this.onValuesChange()},n.prototype.newThumb=function(t){return new BO(null==t?void 0:t.thumb)},n.prototype.newValue=function(t){return new _O(this.toValueOptions(null==t?void 0:t.value))},n.prototype.toValueOptions=function(t){null==(t=t||{}).value&&(t.value=0);var n=t.text||{};return t.text=n,null==n.value&&(n.value=t.value),null==t.visible&&(t.visible=!1),t},n.prototype.newLabelMin=function(t){return new xO(this.toLabelMinOptions(null==t?void 0:t.min))},n.prototype.toLabelMinOptions=function(t){null==(t=t||{}).value&&(t.value=0);var n=t.text||{};return t.text=n,null==n.value&&(n.value="".concat(t.value)),t},n.prototype.newLabelMax=function(t){return new xO(this.toLabelMaxOptions(null==t?void 0:t.max))},n.prototype.toLabelMaxOptions=function(t){null==(t=t||{}).value&&(t.value=1);var n=t.text||{};return t.text=n,null==n.value&&(n.value="".concat(t.value)),t},n.prototype.getValueMargin=function(){return 14},n.prototype.onTrackDown=function(t){if(!this.state.inDisabled){var n=lt.getLayer(this);if(n){var i=n.renderer.plugins.interaction;this.rd=i;var r=this.Qb;i.on(he.up,r),i.on(he.upoutside,r),i.on(he.cancel,r)}this.onPick(t)}},n.prototype.onTrackSelectedDown=function(t){if(!this.state.inDisabled){var n=lt.getLayer(this);if(n){var i=n.renderer.plugins.interaction;this.rd=i;var r=this.$b;i.on(he.up,r),i.on(he.upoutside,r),i.on(he.cancel,r)}this.onPick(t)}},n.prototype.onTrackUpBound=function(t){var n=this.rd;if(n){this.rd=void 0;var i=this.Qb;n.off(he.up,i),n.off(he.upoutside,i),n.off(he.cancel,i)}},n.prototype.onTrackSelectedUpBound=function(t){var n=this.rd;if(n){this.rd=void 0;var i=this.$b;n.off(he.up,i),n.off(he.upoutside,i),n.off(he.cancel,i)}},n.prototype.onThumbMove=function(t){this.state.inDisabled||this.onPick(t.data.global)},n.prototype.onThumbDown=function(t){var n=lt.getLayer(this);if(n){var i=n.renderer.plugins.interaction;this.rd=i;var r=this.td;i.on(he.move,r);var e=this.nd;i.on(he.up,e),i.on(he.upoutside,e),i.on(he.cancel,e)}},n.prototype.onThumbUp=function(t){var n=this.rd;if(n){this.rd=void 0;var i=this.td;n.off(he.move,i);var r=this.nd;n.off(he.up,r),n.off(he.upoutside,r),n.off(he.cancel,r)}},n.prototype.updateValue=function(){var t=this.hh.value,n=this.oh.value,i=this.Pt,r=i.rounder(t+this.Jb*(n-t)),e=i.value;r!==e&&(i.value=r,i.text=i.value,this.emit("change",r,e,this))},n.prototype.onResize=function(n,i,r,e){t.prototype.onResize.call(this,n,i,r,e),this.onValuesChange()},Object.defineProperty(n.prototype,"value",{get:function(){return this.Pt.value},set:function(t){t=Math.max(this.hh.value,Math.min(this.oh.value,t)),this.Pt.value!==t&&(this.Pt.value=t,this.onValuesChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"min",{get:function(){return this.hh.value},set:function(t){var n=this.hh;if(t=Math.min(this.oh.value,t),n.value!==t){var i=this.Pt;n.text=n.value=t,i.value=Math.max(t,i.value),this.onValuesChange()}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"max",{get:function(){return this.oh.value},set:function(t){var n=this.oh;if(t=Math.max(this.hh.value,t),n.value!==t){var i=this.Pt;n.text=n.value=t,i.value=Math.min(t,i.value),this.onValuesChange()}},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DSlider"},n}(ru),UO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DSliderTrack"},n}(kh),FO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DSliderTrackHorizontal"},n}(UO),GO=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return G(i,n),i.prototype.newTrack=function(t){return new FO(null==t?void 0:t.track)},i.prototype.newTrackSelected=function(t){return new FO(null==t?void 0:t.track)},i.prototype.toValueOptions=function(t){var i=this;return null==(t=n.prototype.toValueOptions.call(this,t)).y&&(t.y=function(t,n){return.5*t-n-i.getValueMargin()}),t},i.prototype.toLabelMinOptions=function(t){return null==(t=n.prototype.toLabelMinOptions.call(this,t)).x&&(t.x=function(t,n){return.5*-n}),null==t.y&&(t.y=function(t,n){return-n}),t},i.prototype.toLabelMaxOptions=function(t){return null==(t=n.prototype.toLabelMaxOptions.call(this,t)).x&&(t.x=function(t,n){return t-.5*n}),null==t.y&&(t.y=function(t,n){return-n}),t},i.prototype.onPick=function(n){var i=new t.Point(0,0);this.toLocal(n,void 0,i);var r=Math.max(0,Math.min(this.Zb.width,i.x));this.Jb=r/this.Zb.width,this.moveThumbPosition(r)},i.prototype.onValuesChange=function(){var t=this.hh.value,n=this.oh.value,i=this.Pt.value;this.Jb=(i-t)/(n-t);var r=this.Jb*this.Zb.width;this.moveThumbPosition(r)},i.prototype.moveThumbPosition=function(t){var n=this.hl;n.x=t-.5*n.width,this.qb.width=t;var i=this.Pt;i.x=t-.5*i.width,this.updateValue()},i.prototype.onKeyDown=function(t){return Qe.isArrowRightKey(t)?this.value+=this.Pt.delta:Qe.isArrowLeftKey(t)&&(this.value-=this.Pt.delta),n.prototype.onKeyDown.call(this,t)},i.prototype.getType=function(){return"DSliderHorizontal"},i}(PO),HO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DSliderTrackVertical"},n}(UO),zO=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return G(i,n),i.prototype.newTrack=function(t){return new HO(null==t?void 0:t.track)},i.prototype.newTrackSelected=function(t){return new HO(null==t?void 0:t.track)},i.prototype.toLabelMinOptions=function(t){null==(t=n.prototype.toLabelMinOptions.call(this,t)).x&&(t.x=function(t,n){return-n}),null==t.y&&(t.y=function(t,n){return t-.5*n});var i=t.text||{};t.text=i;var r=i.align||{};return i.align=r,null==r.horizontal&&(r.horizontal=$s.RIGHT),t},i.prototype.toLabelMaxOptions=function(t){null==(t=n.prototype.toLabelMaxOptions.call(this,t)).x&&(t.x=function(t,n){return-n}),null==t.y&&(t.y=function(t,n){return.5*-n});var i=t.text||{};t.text=i;var r=i.align||{};return i.align=r,null==r.horizontal&&(r.horizontal=$s.RIGHT),t},i.prototype.onPick=function(n){var i=new t.Point(0,0);this.toLocal(n,void 0,i);var r=this.height,e=Math.max(0,Math.min(r,i.y));this.Jb=(r-e)/r,this.moveThumbPosition(e)},i.prototype.onValuesChange=function(){var t=this.hh.value,n=this.oh.value,i=this.Pt.value;this.Jb=(i-t)/(n-t);var r=this.height*(1-this.Jb);this.moveThumbPosition(r)},i.prototype.moveThumbPosition=function(t){var n=this.hl;n.y=t-.5*n.height;var i=this.qb;i.y=t,i.height=this.height-t;var r=this.Pt;r.y=t-r.height-this.getValueMargin(),this.updateValue()},i.prototype.onKeyDown=function(t){return Qe.isArrowUpKey(t)?this.value+=this.Pt.delta:Qe.isArrowDownKey(t)&&(this.value-=this.Pt.delta),n.prototype.onKeyDown.call(this,t)},i.prototype.getType=function(){return"DSliderVertical"},i}(PO),VO=function(){function t(){}return t.set=function(t,n,i,r,e){var u,s=this.toRenderable(n,i,r);t.renderable=s;var h=t.state;h.lock(),h.isDisabled=!s,!1!==e&&(h.isReadOnly=this.toReadOnly(n,i,r));var o=null===(u=r.state)||void 0===u?void 0:u.modifier;o&&o(n,i,t.state),h.unlock()},t.toReadOnly=function(t,n,i){var r=i.editing.enable;return!0!==r&&(!1===r||!r(t,n))},t.toRenderable=function(t,n,i){var r=i.renderable;return!0===r||!1!==r&&r(t,n)},t}(),WO=function(t){function n(n,i,r,e){var u,s=t.call(this,e)||this;return s.ed=-1,s.ud=n,s.sd=i,s.et=r,s.hd=null!==(u=null==e?void 0:e.sync)&&void 0!==u?u:s.theme.isSyncEnabled(),s}return G(n,t),n.prototype.onActivate=function(n){var i,r=this;t.prototype.onActivate.call(this,n);var e=this.sd.selecting,u=e.dialog;if(u){var s=null!==(i=this.text.computed)&&void 0!==i?i:null;e.setter(u,s),u.open(this).then((function(){var t=e.getter(u);r.hd?t!==s&&(r.text=t,r.onValueChange(t,s)):r.onValueChange(t,null)}))}},n.prototype.onValueChange=function(t,n){var i=this.od;if(void 0!==i){var r=this.ed,e=this.ud,u=this.sd;u.setter(i,e,t),this.emit("change",t,n,this),this.et(t,n,i,r,e,u,this)}},Object.defineProperty(n.prototype,"row",{get:function(){return this.od},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.ed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.ud},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.sd},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){var t;return null!==(t=this.text.computed)&&void 0!==t?t:null},set:function(t){this.text=t},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this.od=n,this.ed=r,u?this.text.setValue(t,!0):this.text=t,VO.set(this,n,e,this.sd)},n.prototype.unset=function(){this.od=void 0,this.ed=-1},n.prototype.getType=function(){return"DTableBodyCellSelectDialog"},n}(kh),XO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DTableBodyCellActionDialog"},n}(WO),KO=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.ed=-1,u.ud=n,u.sd=i,u.et=r,u}return G(n,t),n.prototype.onMenuSelect=function(n,i,r){var e=this.od;if(void 0!==e){var u=this.ed,s=this.ud,h=this.sd;h.setter(e,s,n),t.prototype.onMenuSelect.call(this,n,i,r),this.et(n,null,e,u,s,h,this)}},n.prototype.onKeyDownArrowDown=function(t){return!1},Object.defineProperty(n.prototype,"row",{get:function(){return this.od},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.ed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.ud},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.sd},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this.od=n,this.ed=r,this.text=t,VO.set(this,n,e,this.sd)},n.prototype.unset=function(){this.od=void 0,this.ed=-1},n.prototype.getType=function(){return"DTableBodyCellActionMenu"},n}(Zw),YO=function(t){function n(n,i,r,e){var u,s=t.call(this,e)||this;return s.ed=-1,s.ud=n,s.sd=i,s.et=r,s.hd=null!==(u=null==e?void 0:e.sync)&&void 0!==u?u:s.theme.isSyncEnabled(),s}return G(n,t),n.prototype.onActivate=function(n){var i=this;t.prototype.onActivate.call(this,n);var r=this.sd.selecting.promise;r&&r().then((function(t){var n;if(i.hd){var r=null!==(n=i.text.computed)&&void 0!==n?n:null;t!==r&&(i.text=t,i.onValueChange(t,r))}else i.onValueChange(t,null)}))},n.prototype.onValueChange=function(t,n){var i=this.od;if(void 0!==i){var r=this.ed,e=this.ud,u=this.sd;u.setter(i,e,t),this.emit("change",t,n,this),this.et(t,n,i,r,e,u,this)}},Object.defineProperty(n.prototype,"row",{get:function(){return this.od},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.ed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.ud},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.sd},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){var t;return null!==(t=this.text.computed)&&void 0!==t?t:null},set:function(t){this.text=t},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this.od=n,this.ed=r,u?this.text.setValue(t,!0):this.text=t,VO.set(this,n,e,this.sd)},n.prototype.unset=function(){this.od=void 0,this.ed=-1},n.prototype.getType=function(){return"DTableBodyCellSelectPromise"},n}(kh),JO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DTableBodyCellActionPromise"},n}(YO),ZO=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.ed=-1,u.ud=n,u.sd=i,u.et=r,u}return G(n,t),Object.defineProperty(n.prototype,"row",{get:function(){return this.od},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.ed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.ud},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.sd},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this.od=n,this.ed=r,this.text=t,VO.set(this,n,e,this.sd)},n.prototype.unset=function(){this.od=void 0,this.ed=-1},n.prototype.getType=function(){return"DTableBodyCellText"},n}(Rh),qO=function(t){function n(n,i,r,e){var u,s=t.call(this,n,i,r,e)||this;return s.uo=rr(null!==(u=null==e?void 0:e.when)&&void 0!==u?u:qs.CLICKED,qs),s.on(he.tap,(function(t){s.onClick(t)})),s}return G(n,t),n.prototype.onClick=function(t){this.uo===qs.CLICKED&&this.state.isActionable&&this.activate(t)},n.prototype.onDblClick=function(n,i){return this.uo===qs.DOUBLE_CLICKED&&this.state.isActionable&&this.activate(n),t.prototype.onDblClick.call(this,n,i)},n.prototype.activate=function(t){this.onActivate(t)},n.prototype.onActivate=function(t){this.emit("active",this);var n=this.od;if(void 0!==n){var i=this.ed,r=this.ud,e=this.sd;this.emit("change",null,null,this),this.et(null,null,n,i,r,e,this)}},n.prototype.onActivateKeyDown=function(t){this.state.isActionable&&(this.state.isPressed=!0)},n.prototype.onActivateKeyUp=function(t){this.state.isActionable&&(this.state.isPressed&&this.onActivate(t),this.state.isPressed=!1)},n.prototype.onKeyDown=function(n){return Qe.isActivateKey(n)&&this.onActivateKeyDown(n),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyUp=function(n){return Qe.isActivateKey(n)&&this.onActivateKeyUp(n),t.prototype.onKeyUp.call(this,n)},n.prototype.getType=function(){return"DTableBodyCellButton"},n}(ZO),QO={INDEX:0,TEXT:1,INTEGER:2,REAL:3,CHECK:4,CHECK_SINGLE:5,COLOR:6,BUTTON:7,SELECT:8,DATE:9,DATETIME:10,TIME:11,ACTION:12,LINK:13,TREE:14,TEXT_AREA:15},$O={CELL:0,ROW:1,ALL:2},tp=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.ed=-1,u.ud=n,u.sd=i,u.et=r,u}return G(n,t),n.prototype.onActivate=function(n){t.prototype.onActivate.call(this,n),this.onValueChange(!0,!1)},n.prototype.onInactivate=function(n){t.prototype.onInactivate.call(this,n),this.onValueChange(!1,!0)},n.prototype.onValueChange=function(t,n){var i=this.od;if(void 0!==i){var r=this.ed,e=this.ud,u=this.sd;u.setter(i,e,t),this.emit("change",t,n,this);var s=this.et;s(t,n,i,r,e,u,this),t&&u.type===QO.CHECK_SINGLE&&this.onChangeSingle(r,e,u,s)}},n.prototype.onChangeSingle=function(t,n,i,r){var e=this,u=this.parent;if(null!=u){var s=u.parent;if(null!=s){var h=!1,o=i.getter,a=i.setter;s.data.each((function(u,s){return t===s||!o(u,n)||(a(u,n,!1),h=!0,r(!1,!0,u,s,n,i,e),!1)})),h&&i.update!==$O.ALL&&s.update(!0)}}},Object.defineProperty(n.prototype,"row",{get:function(){return this.od},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.ed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.ud},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.sd},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this.od=n,this.ed=r,this.state.isActive=!!t,VO.set(this,n,e,this.sd)},n.prototype.unset=function(){this.od=void 0,this.ed=-1},n.prototype.getType=function(){return"DTableBodyCellCheck"},n}(Ld),np=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.ed=-1,u.ud=n,u.sd=i,u.et=r,u}return G(n,t),n.prototype.onValueChange=function(n,i){var r=this.od;if(void 0!==r){var e=this.ed,u=this.ud,s=this.sd;s.setter(r,u,n),t.prototype.onValueChange.call(this,n,i),this.et(n,i,r,e,u,s,this)}else t.prototype.onValueChange.call(this,n,i)},Object.defineProperty(n.prototype,"row",{get:function(){return this.od},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.ed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.ud},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.sd},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this.od=n,this.ed=r;var s=this.value;if(jt(t))s.color=t,s.alpha=1;else if(Tt(t)){var h=Number(t);s.color=h==h?h:16777215,s.alpha=1}else if(null!=t){var o=t.color,a=t.alpha;s.color=jt(o)?o:16777215,s.alpha=jt(a)?a:1}else s.color=16777215,s.alpha=1;VO.set(this,n,e,this.sd)},n.prototype.unset=function(){this.od=void 0,this.ed=-1},n.prototype.getType=function(){return"DTableBodyCellColor"},n}(hg),ip=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.ed=-1,u.ud=n,u.sd=i,u.et=r,u}return G(n,t),n.prototype.onValueChange=function(n,i){var r=this.od;if(void 0!==r){var e=this.ed,u=this.ud,s=this.sd;s.setter(r,u,n),t.prototype.onValueChange.call(this,n,i),this.et(n,i,r,e,u,s,this)}else t.prototype.onValueChange.call(this,n,i)},Object.defineProperty(n.prototype,"row",{get:function(){return this.od},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.ed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.ud},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.sd},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){if(this.od=n,this.ed=r,t instanceof Date)u?this.text.setValue(t,!0):this.text=t;else if(jt(t)){var s=this.text,h=s.computed;void 0===h?this.text=new Date(t):h.getTime()!==t&&(h.setTime(t),s.compute(!0))}VO.set(this,n,e,this.sd)},n.prototype.unset=function(){this.od=void 0,this.ed=-1},n.prototype.getType=function(){return"DTableBodyCellDate"},n}(ag),rp=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.ed=-1,u.ud=n,u.sd=i,u.et=r,u}return G(n,t),n.prototype.onValueChange=function(n,i){var r=this.od;if(void 0!==r){var e=this.ed,u=this.ud,s=this.sd;s.setter(r,u,n),t.prototype.onValueChange.call(this,n,i),this.et(n,i,r,e,u,s,this)}else t.prototype.onValueChange.call(this,n,i)},Object.defineProperty(n.prototype,"row",{get:function(){return this.od},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.ed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.ud},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.sd},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){if(this.od=n,this.ed=r,t instanceof Date)u?this.text.setValue(t,!0):this.text=t;else if(jt(t)){var s=this.text,h=s.computed;null==h?this.text=new Date(t):h.getTime()!==t&&(h.setTime(t),s.compute(!0))}VO.set(this,n,e,this.sd)},n.prototype.unset=function(){this.od=void 0,this.ed=-1},n.prototype.getType=function(){return"DTableBodyCellDatetime"},n}(vg),ep=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.ed=-1,u.ud=n,u.sd=i,u.et=r,u}return G(n,t),Object.defineProperty(n.prototype,"row",{get:function(){return this.od},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.ed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.ud},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.sd},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this.od=n,this.ed=r,this.text=r,VO.set(this,n,e,this.sd)},n.prototype.unset=function(){this.od=void 0,this.ed=-1},n.prototype.getType=function(){return"DTableBodyCellIndex"},n}(Rh),up=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.ed=-1,u.ud=n,u.sd=i,u.et=r,u}return G(n,t),n.prototype.onValueChange=function(n,i){var r=this.od;if(void 0!==r){var e=this.ed,u=this.ud,s=this.sd;s.setter(r,u,n),t.prototype.onValueChange.call(this,n,i),this.et(n,i,r,e,u,s,this)}},Object.defineProperty(n.prototype,"row",{get:function(){return this.od},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.ed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.ud},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.sd},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this.od=n,this.ed=r,this.text=Number(t),VO.set(this,n,e,this.sd)},n.prototype.unset=function(){this.od=void 0,this.ed=-1},n.prototype.getType=function(){return"DTableBodyCellInputInteger"},n}(to),sp=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.ed=-1,u.ud=n,u.sd=i,u.et=r,u}return G(n,t),n.prototype.onValueChange=function(n,i){var r=this.od;if(void 0!==r){var e=this.ed,u=this.ud,s=this.sd;s.setter(r,u,n),t.prototype.onValueChange.call(this,n,i),this.et(n,i,r,e,u,s,this)}},Object.defineProperty(n.prototype,"row",{get:function(){return this.od},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.ed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.ud},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.sd},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this.od=n,this.ed=r,this.text=Number(t),VO.set(this,n,e,this.sd)},n.prototype.unset=function(){this.od=void 0,this.ed=-1},n.prototype.getType=function(){return"DTableBodyCellInputReal"},n}(ro),hp=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.ed=-1,u.ud=n,u.sd=i,u.et=r,u}return G(n,t),n.prototype.onValueChange=function(n,i){var r=this.od;if(void 0!==r){var e=this.ed,u=this.ud,s=this.sd;s.setter(r,u,n),t.prototype.onValueChange.call(this,n,i),this.et(n,i,r,e,u,s,this)}},Object.defineProperty(n.prototype,"row",{get:function(){return this.od},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.ed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.ud},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.sd},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this.od=n,this.ed=r,this.text=String(t),VO.set(this,n,e,this.sd)},n.prototype.unset=function(){this.od=void 0,this.ed=-1},n.prototype.getType=function(){return"DTableBodyCellInputTextArea"},n}(iO),op=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.ed=-1,u.ud=n,u.sd=i,u.et=r,u}return G(n,t),n.prototype.onValueChange=function(n,i){var r=this.od;if(void 0!==r){var e=this.ed,u=this.ud,s=this.sd;s.setter(r,u,n),t.prototype.onValueChange.call(this,n,i),this.et(n,i,r,e,u,s,this)}},Object.defineProperty(n.prototype,"row",{get:function(){return this.od},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.ed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.ud},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.sd},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this.od=n,this.ed=r,this.text=String(t),VO.set(this,n,e,this.sd)},n.prototype.unset=function(){this.od=void 0,this.ed=-1},n.prototype.getType=function(){return"DTableBodyCellInputText"},n}(so),ap=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.newPadding=function(t,n,i){return new yd(t,n,i)},Object.defineProperty(n.prototype,"padding",{get:function(){return this.au},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DTableBodyCellInputTreeInput"},n}(so),cp=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DTableBodyCellInputTreeMarker"},n}(yh),fp={START:"START",END:"END",FROZEN:"FROZEN",FROZEN_END:"FROZEN_END",HAS_DATA:"HAS_DATA",SORTABLE:"SORTABLE",SORTED_ASCENDING:"SORTED_ASCENDING",SORTED_DESCENDING:"SORTED_DESCENDING",HAS_CHILDREN:"HAS_CHILDREN",OPENED:"OPENED",CHECKABLE:"CHECKABLE",SELECTABLE:"SELECTABLE",HOVERED_ON_EDGE:"HOVERED_ON_EDGE",RESIZING:"RESIZING"},lp=function(t){function n(n,i,r,e){var u=t.call(this,function(t){if(null!=t)return{weight:t.weight,width:t.width}}(e))||this;u.ed=-1,u.ud=n,u.sd=i,u.et=r;var s=u.newInput(e);u.Oo=s,u.addChild(s);var h=u.newMarker(e);return u.C=h,u.addChild(h),u}return G(n,t),n.prototype.newInput=function(t){return new ap(this.toInputOptions(t))},n.prototype.toInputOptions=function(t){var n=this;return{weight:1,text:null==t?void 0:t.text,editing:null==t?void 0:t.editing,when:null==t?void 0:t.when,cursor:null==t?void 0:t.cursor,on:{change:function(t,i){n.onInputChange(t,i)}}}},n.prototype.onInputChange=function(t,n){var i=this.od;if(void 0!==i){var r=this.ed,e=this.ud,u=this.sd;u.setter(i,e,t),this.emit("change",t,n,this),this.et(t,n,i,r,e,u,this)}},n.prototype.newMarker=function(t){var n=this;return new cp({visible:!1,on:{active:function(){n.onMarkerActive()}}})},n.prototype.onMarkerActive=function(){this.C.state.is(fp.HAS_CHILDREN)&&this.toggle()},Object.defineProperty(n.prototype,"row",{get:function(){return this.od},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.ed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.ud},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.sd},enumerable:!1,configurable:!0}),n.prototype.toggle=function(){var t=this.od;if(void 0!==t){var n=this.parent;if(null!=n){var i=n.parent;if(null!=i){var r=i.data;r&&r.toggle&&(r.isExpanded(t)?r.collapse(t)&&(this.emit("collapse",this),r.emit("collapse",t,this)):r.expand(t)&&(this.emit("expand",this),r.emit("expand",t,this)))}}}},n.prototype.onRowSelect=function(t,n){return n.x<=this.position.x+this.Oo.padding.getLeft()},n.prototype.set=function(t,n,i,r,e,u){this.od=n,this.ed=r;var s=this.Oo;s.visible=!0,s.text=String(t);var h=this.C;if(null!=i){var o=!!(1&i),a=!!(2&i),c=i>>2,f=h.state;f.lock(),f.set(fp.HAS_CHILDREN,a),f.set(gt.DISABLED,!a),f.set(fp.OPENED,o),f.unlock();var l=this.theme.getLevelPadding(c);h.width=l,a?h.show():h.hide(),s.padding.adjLeft(l)}else h.state.removeAll(fp.OPENED,fp.HAS_CHILDREN),h.hide(),s.padding.adjLeft(0);VO.set(this.Oo,n,e,this.sd)},n.prototype.unset=function(){this.od=void 0,this.ed=-1,this.Oo.visible=!1,this.C.hide()},n.prototype.getType=function(){return"DTableBodyCellInputTree"},n}(ru),vp=function(t,n){if(n)return{url:bp(t,n.url),target:n.target,checker:dp(t,n.checker),menu:n.menu}},bp=function(t,n){return Tt(n)||null==n?n:function(){var i=t.row;return void 0!==i?n(i,t.rowIndex,t.columnIndex,t):null}},dp=function(t,n){if(null!=n)return function(){var i=t.row;return void 0!==i&&n(i,t.rowIndex,t.columnIndex,t)}},gp=function(t){function n(n,i,r,e){var u;return t.call(this,n,i,r,Hv.toStateOptions(null===(u=null==e?void 0:e.link)||void 0===u?void 0:u.target,e))||this}return G(n,t),n.prototype.onClick=function(n){this.link.onClick(this,n)||t.prototype.onClick.call(this,n)},Object.defineProperty(n.prototype,"link",{get:function(){var t,n=this.Ta;return null==n&&(n=new Gv(vp(this,null===(t=this.tu)||void 0===t?void 0:t.link)),this.Ta=n),n},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DTableBodyCellLink"},n.prototype.onActivate=function(n){t.prototype.onActivate.call(this,n),this.link.open(n)},n.prototype.open=function(t){this.link.open(t)},n}(qO),mp=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.ed=-1,u.ud=n,u.sd=i,u.et=r,u}return G(n,t),n.prototype.onValueChange=function(n,i,r){var e=this.od;if(void 0!==e){var u=this.ed,s=this.ud,h=this.sd;h.setter(e,s,n),t.prototype.onValueChange.call(this,n,i,r),this.et(n,i,e,u,s,h,this)}},n.prototype.onKeyDownArrowDown=function(t){return!1},Object.defineProperty(n.prototype,"row",{get:function(){return this.od},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.ed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.ud},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.sd},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this.od=n,this.ed=r,this.value=t,VO.set(this,n,e,this.sd)},n.prototype.unset=function(){this.od=void 0,this.ed=-1},n.prototype.getType=function(){return"DTableBodyCellSelectMenu"},n}(Kd),wp=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.ed=-1,u.ud=n,u.sd=i,u.et=r,u}return G(n,t),n.prototype.onValueChange=function(n,i,r){var e=this.od;if(void 0!==e){var u=this.ed,s=this.ud,h=this.sd;h.setter(e,s,n),t.prototype.onValueChange.call(this,n,i,r),this.et(n,i,e,u,s,h,this)}},n.prototype.onKeyDownArrowDown=function(t){return!1},Object.defineProperty(n.prototype,"row",{get:function(){return this.od},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.ed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.ud},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.sd},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this.od=n,this.ed=r,this.values=t,VO.set(this,n,e,this.sd)},n.prototype.unset=function(){this.od=void 0,this.ed=-1},n.prototype.getType=function(){return"DTableBodyCellSelectMultiple"},n}(kO),Op=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getType=function(){return"DTableBodyCellTextArea"},n}(ZO),pp=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.ed=-1,u.ud=n,u.sd=i,u.et=r,u}return G(n,t),n.prototype.onValueChange=function(n,i){var r=this.od;if(void 0!==r){var e=this.ed,u=this.ud,s=this.sd;s.setter(r,u,n),t.prototype.onValueChange.call(this,n,i),this.et(n,i,r,e,u,s,this)}else t.prototype.onValueChange.call(this,n,i)},Object.defineProperty(n.prototype,"row",{get:function(){return this.od},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.ed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.ud},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.sd},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){if(this.od=n,this.ed=r,t instanceof Date)u?this.text.setValue(t,!0):this.text=t;else if(jt(t)){var s=this.text,h=s.computed;null==h?this.text=new Date(t):h.getTime()!==t&&(h.setTime(t),s.compute(!0))}VO.set(this,n,e,this.sd)},n.prototype.unset=function(){this.od=void 0,this.ed=-1},n.prototype.getType=function(){return"DTableBodyCellTime"},n}(um),Dp=function(t){function n(n,i,r,e){var u;return t.call(this,n,i,r,Hv.toStateOptions(null===(u=null==e?void 0:e.link)||void 0===u?void 0:u.target,e))||this}return G(n,t),n.prototype.newPadding=function(t,n,i){return new yd(t,n,i)},n.prototype.onClick=function(n){var i;!0!==(null===(i=this.link)||void 0===i?void 0:i.onClick(this,n))&&t.prototype.onClick.call(this,n)},Object.defineProperty(n.prototype,"link",{get:function(){var t=this.Ta;return void 0===t&&(t=this.newLink(),this.Ta=t),t},enumerable:!1,configurable:!0}),n.prototype.newLink=function(){var t,n=null===(t=this.tu)||void 0===t?void 0:t.link;return n?new Gv(vp(this,n)):null},n.prototype.onActivate=function(n){var i;t.prototype.onActivate.call(this,n),this.state.is(fp.HAS_CHILDREN)?this.toggle():null===(i=this.link)||void 0===i||i.open(n)},n.prototype.toggle=function(){var t=this.od;if(void 0!==t){var n=this.parent;if(null!=n){var i=n.parent;if(null!=i){var r=i.data;r&&r.toggle&&(r.isExpanded(t)?r.collapse(t)&&(this.emit("collapse",this),r.emit("collapse",t,this)):r.expand(t)&&(this.emit("expand",this),r.emit("expand",t,this)))}}}},n.prototype.onRowSelect=function(t,n){return n.x<=this.position.x+this.padding.getLeft()&&(this.toggle(),!0)},n.prototype.set=function(t,n,i,r,e,u){this.od=n,this.ed=r,this.text=t,VO.set(this,n,e,this.sd,!1);var s=this.link,h=this.au;if(null!=i){var o=!!(1&i),a=!!(2&i),c=i>>2,f=this.state;f.lock(),f.set(fp.HAS_CHILDREN,a),f.set(fp.OPENED,o),f.unlock(),h.adjLeft(this.theme.getLevelPadding(c)),s&&(s.menu.enable=!a)}else this.state.removeAll(fp.OPENED,fp.HAS_CHILDREN),h.adjLeft(0),s&&(s.menu.enable=!1)},n.prototype.getType=function(){return"DTableBodyCellTree"},n}(qO),Ep={NONE:0,SINGLE:1,MULTIPLE:2},Mp=function(t){function n(n,i,r){var e=t.call(this,r)||this;return e.Hr=!0,e.ad=i,e.fd=n,e}return G(n,t),n.prototype.initCells=function(){for(var t=this.fd,n=this.ad,i=this.tu,r=this.toIndexEnd(t),e=t.length-1;0<=e;--e){var u=this.newCell(e,t[e],t,i),s=u.state;s.lock(!1),0===e&&s.add(fp.START),e===r&&s.add(fp.END),e<n&&s.add(fp.FROZEN),e===n-1&&s.add(fp.FROZEN_END),s.unlock(),this.addChild(u)}},n.prototype.toIndexEnd=function(t){for(var n=t.length,i=0;i<n;++i)if(void 0!==t[i].weight)return n-1;return n},n.prototype.onRefit=function(){t.prototype.onRefit.call(this),this.resetFrozenCellPosition()},n.prototype.updateFrozenCellPosition=function(t){for(var n=this.fd,i=this.children,r=i.length,e=this.ad,u=0;u<e;++u){var s=n[u];i[r-1-u].position.x=-t+s.offset}},n.prototype.resetFrozenCellPosition=function(){for(var t=this.fd,n=this.children,i=n.length,r=this.ad,e=this.getContentPositionX(),u=0;u<r;++u){var s=t[u],h=n[i-1-u];s.offset=h.position.x,h.position.x=-e+s.offset}},n.prototype.getClippingRect=function(n,i){t.prototype.getClippingRect.call(this,n,i);var r=this.ad;if(0<r){var e=n;if(e&&e.parent===this){var u=this.children,s=u.indexOf(e);if(0<=s&&r<=u.length-1-s){var h=u[s+1],o=h.position.x+h.width;i.x+=o,i.width-=o}}}},n.prototype.getType=function(){return"DTableRow"},n}(xh),Sp=function(t){function n(n,i,r,e,u,s){var h=t.call(this,e,u,s)||this;return h.Or=-1,h.et=n,h.ld=function(t,n,i,r,e,u){h.onCellChange(t,n,i,r,e,u)},h.vd=r,h.state.isAlternated=!i,h.initCells(),h}return G(n,t),n.prototype.onCellChange=function(t,n,i,r,e,u){if(this.emit("change",t,n,i,r,e,this),u.update===$O.ROW){var s=this.Pt,h=this.bd,o=this.Or;void 0!==s&&void 0!==h&&this.set(s,h,o,!0)}this.et(t,n,i,r,e,u,this)},n.prototype.newCell=function(t,n,i,r){var e=this.ld,u=this.vd,s=u.get(t);if(null==s&&(s=this.toCellOptions(t,n,r),u.set(t,s)),!1!==n.editing.enable)return this.newCellEditable(t,n,e,s);var h=this.newCellUnediable(t,n,e,s);return n.type!==QO.TREE&&(h.state.isReadOnly=!0),h},n.prototype.newCellEditable=function(t,n,i,r){switch(n.type){case QO.INDEX:return new ep(t,n,i,r);case QO.TEXT:return new op(t,n,i,r);case QO.TEXT_AREA:return new hp(t,n,i,r);case QO.TREE:return new lp(t,n,i,r);case QO.INTEGER:return new up(t,n,i,r);case QO.REAL:return new sp(t,n,i,r);case QO.CHECK:case QO.CHECK_SINGLE:return new tp(t,n,i,r);case QO.COLOR:return new np(t,n,i,r);case QO.BUTTON:return new qO(t,n,i,r);case QO.LINK:return new gp(t,n,i,r);case QO.SELECT:return this.newCellSelect(t,n,i,r);case QO.ACTION:return this.newCellAction(t,n,i,r);case QO.DATE:return new ip(t,n,i,r);case QO.DATETIME:return new rp(t,n,i,r);case QO.TIME:return new pp(t,n,i,r);default:return new ZO(t,n,i,r)}},n.prototype.newCellUnediable=function(t,n,i,r){switch(n.type){case QO.INDEX:return new ep(t,n,i,r);case QO.TEXT:return new ZO(t,n,i,r);case QO.TEXT_AREA:return new Op(t,n,i,r);case QO.TREE:return new Dp(t,n,i,r);case QO.INTEGER:case QO.REAL:return new ZO(t,n,i,r);case QO.CHECK:case QO.CHECK_SINGLE:return new tp(t,n,i,r);case QO.COLOR:return new np(t,n,i,r);case QO.BUTTON:return new qO(t,n,i,r);case QO.LINK:return new gp(t,n,i,r);case QO.SELECT:return this.newCellSelect(t,n,i,r);case QO.ACTION:return this.newCellAction(t,n,i,r);case QO.DATE:return new ip(t,n,i,r);case QO.DATETIME:return new rp(t,n,i,r);case QO.TIME:return new pp(t,n,i,r);default:return new ZO(t,n,i,r)}},n.prototype.newCellSelect=function(t,n,i,r){var e=n.selecting;return null!=e.menu?new mp(t,n,i,r):null!=e.multiple?new wp(t,n,i,r):null!=e.dialog?new WO(t,n,i,r):null!=e.promise?new YO(t,n,i,r):new ZO(t,n,i,r)},n.prototype.newCellAction=function(t,n,i,r){var e=n.selecting;return null!=e.menu?new KO(t,n,i,r):null!=e.dialog?new XO(t,n,i,r):null!=e.promise?new JO(t,n,i,r):new ZO(t,n,i,r)},n.prototype.toCellOptions=function(t,n,i){var r,e,u,s,h,o,a,c,f,l,v,b,d,g,m=ad(n.body,null==i?void 0:i.cell);m.weight=n.weight,m.width=n.width,null!==(r=m.state)&&void 0!==r||(m.state=n.state.initial);var w=n.formatter;null!=w&&(null!==(u=(p=null!==(e=m.text)&&void 0!==e?e:m.text={}).formatter)&&void 0!==u||(p.formatter=w));var O=n.align;if(null!=O){var p,D=null!==(h=(p=null!==(s=m.text)&&void 0!==s?s:m.text={}).align)&&void 0!==h?h:p.align={};null!==(o=D.horizontal)&&void 0!==o||(D.horizontal=O)}var E=n.editing;if(!1!==E.enable){var M=null!==(a=(g=m).editing)&&void 0!==a?a:g.editing={};null!==(c=M.formatter)&&void 0!==c||(M.formatter=E.formatter),null!==(f=M.unformatter)&&void 0!==f||(M.unformatter=E.unformatter),null!==(l=M.validator)&&void 0!==l||(M.validator=E.validator)}var S=n.link;void 0!==S&&(m.link=S);var j=n.selecting,T=null!==(v=j.menu)&&void 0!==v?v:j.multiple;return void 0!==T&&(m.menu=T),(null!==(d=null===(b=null==i?void 0:i.selection)||void 0===b?void 0:b.type)&&void 0!==d?d:Ep.NONE)!==Ep.NONE&&(m.when="DOUBLE_CLICKED",m.cursor=function(t){if(t.in(fp.SELECTABLE))return"pointer"}),m},n.prototype.getType=function(){return"DTableBodyRow"},Object.defineProperty(n.prototype,"value",{get:function(){return this.Pt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"index",{get:function(){return this.Or},enumerable:!1,configurable:!0}),n.prototype.isCell=function(t){return null!=t&&"set"in t},n.prototype.set=function(t,n,i,r){if(r||this.Pt!==t||this.bd!==n||this.Or!==i){this.Pt=t,this.bd=n,this.Or=i;for(var e=this.children,u=e.length,s=this.fd,h=s.length,o=0;o<u;++o){var a=e[o],c=h-1-o,f=s[c];this.isCell(a)&&a.set(f.getter(t,c),t,n,i,c,r)}this.onSet(t,i)}},n.prototype.onSet=function(t,n){this.emit("set",t,n,this)},n.prototype.unset=function(){if(void 0!==this.Pt){this.Pt=void 0,this.Or=-1;for(var t=this.children,n=t.length,i=0;i<n;++i){var r=t[i];this.isCell(r)&&r.unset()}this.onUnset()}},n.prototype.onUnset=function(){this.emit("unset",this)},n.prototype.getContentPositionX=function(){var t=this.parent;if(t){var n=t.parent;if(n)return n.position.x}return 0},n}(Mp),jp=function(t){function n(n){var i=t.call(this)||this;return i.A=0,i.kv=-1,i.dd=!1,i.gd=-1,i.g=n,i.xb=null,i.md=null,i}return G(n,t),Object.defineProperty(n.prototype,"id",{get:function(){return this.A},enumerable:!1,configurable:!0}),n.prototype.apply=function(){this.dd=!0,this.A+=1,this.g.update()},n.prototype.unapply=function(){this.dd&&(this.dd=!1,this.A+=1,this.g.update())},n.prototype.isApplied=function(){return this.dd},n.prototype.newFiltered=function(){var t=this.xb;if(null!=t){var n,i=[],r=this.g,e=r.sorter,u=r.rows;if(St(t))if(n=e.indices)for(var s=0,h=n.length;s<h;++s)t(u[o=n[s]],o)&&i.push(s);else for(s=0,h=u.length;s<h;++s)t(u[s],s)&&i.push(s);else if(n=e.indices)for(s=0,h=n.length;s<h;++s){var o=n[s];t.test(u[o],o)&&i.push(s)}else for(s=0,h=u.length;s<h;++s)t.test(u[s],s)&&i.push(s);return i}return null},n.prototype.get=function(){return this.xb},n.prototype.set=function(t){this.xb!==t&&(this.xb=t)},n.prototype.toDirty=function(){this.A+=1},n.prototype.update=function(){this.A===this.kv&&this.g.sorter.id===this.gd||(this.kv=this.A,this.gd=this.g.sorter.id,this.dd?(this.md=this.newFiltered(),this.emit("change",this)):null!=this.md&&(this.md=null,this.emit("change",this)))},Object.defineProperty(n.prototype,"indices",{get:function(){return this.update(),this.md},enumerable:!1,configurable:!0}),n.prototype.map=function(t){var n=t,i=this.indices;if(i){var r=i.indexOf(n);if(!(0<=r))return null;n=r}return n},n.prototype.unmap=function(t){var n=t,i=this.indices;return i&&(n=i[n]),n},n}(t.utils.EventEmitter),Tp=function(){function t(t){this.g=t}return Object.defineProperty(t.prototype,"rows",{get:function(){var t=[];return this.each((function(n){t.push(n)})),t},enumerable:!1,configurable:!0}),t.prototype.map=function(t){var n=this.g,i=n.sorter.map(t);return null!=i?n.filter.map(i):null},t.prototype.unmap=function(t){var n=this.g;return n.sorter.unmap(n.filter.unmap(t))},t.prototype.size=function(){var t=this.g,n=t.filter.indices;return null!=n?n.length:t.size()},t.prototype.get=function(t){return this.g.get(this.unmap(t))},t.prototype.each=function(t,n,i){var r=this.g,e=r.rows,u=r.supplimentals,s=r.filter.indices,h=r.sorter.indices;if(n=null!=n?Math.max(0,n):0,s){var o=s.length;if(i=null!=i?Math.min(o,i):o,h)for(var a=n;a<i&&!1!==t(e[c=h[s[a]]],u?u[c]:null,a,c);++a);else for(a=n;a<i&&!1!==t(e[c=s[a]],u?u[c]:null,a,c);++a);}else if(o=e.length,i=null!=i?Math.min(o,i):o,h)for(a=n;a<i;++a){var c;if(!1===t(e[c=h[a]],u?u[c]:null,a,c))break}else for(a=n;a<i&&!1!==t(e[a],u?u[a]:null,a,a);++a);},t}(),Ip=function(t,n){return t[0]-n[0]},Cp=function(t){function n(n,i){var r,e=t.call(this)||this;e.g=n,e.kt=rr(null!==(r=null==i?void 0:i.type)&&void 0!==r?r:Ep.NONE,Ep),e.Ue=new Set;var u=null==i?void 0:i.on;if(u)for(var s in u){var h=u[s];h&&e.on(s,h)}return e}return G(n,t),Object.defineProperty(n.prototype,"parent",{get:function(){return this.g},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return this.kt},enumerable:!1,configurable:!0}),n.prototype.onChange=function(){this.g.update(),this.emit("change",this)},n.prototype.toggle=function(t){var n=this.Ue;n.has(t)?n.delete(t):n.add(t),this.onChange()},n.prototype.add=function(t){var n=this.Ue,i=n.size;n.add(t),i!==n.size&&this.onChange()},Object.defineProperty(n.prototype,"first",{get:function(){var t=this.Ue;if(0<t.size){var n=-1;return t.forEach((function(t){n<0&&(n=t)})),n}return null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){var t=this.Ue;if(0<t.size){var n=0;return t.forEach((function(t){n=t})),n}return null},enumerable:!1,configurable:!0}),n.prototype.addTo=function(t){var n=this.last;null!=n&&this.addRange(n,!1,t,!0)},n.prototype.addRange=function(t,n,i,r){var e=this.Ue,u=e.size;if(t<i)for(var s=i+(r?1:0),h=t+(n?0:1);h<s;++h)e.add(h);else for(s=t+(n?1:0),h=i+(r?0:1);h<s;++h)e.add(h);u!==e.size&&this.onChange()},n.prototype.addAll=function(t){for(var n=this.Ue,i=n.size,r=0,e=t.length;r<e;++r)n.add(t[r]);i!==n.size&&this.onChange()},n.prototype.contains=function(t){return this.Ue.has(t)},n.prototype.remove=function(t){this.Ue.delete(t)&&this.onChange()},n.prototype.clear=function(){var t=this.Ue;0<t.size&&(t.clear(),this.onChange())},n.prototype.clearAndAdd=function(t){var n=this.Ue;n.has(t)&&1===n.size||(n.clear(),n.add(t),this.onChange())},n.prototype.clearAndAddAll=function(t){var n=this.Ue;if(0<n.size||0<t.length){n.clear();for(var i=0,r=t.length;i<r;++i)n.add(t[i]);this.onChange()}},n.prototype.shift=function(t,n){var i=[],r=this.Ue;if(r.forEach((function(n){t<=n&&i.push(n)})),0<i.length){for(var e=0,u=i.length;e<u;++e)r.delete(i[e]);for(e=0,u=i.length;e<u;++e)r.add(i[e]+n);this.onChange()}},n.prototype.size=function(){return this.Ue.size},n.prototype.isEmpty=function(){return 0===this.Ue.size},n.prototype.each=function(t){var n=!1;this.Ue.forEach((function(i){n||!1===t(i)&&(n=!0)}))},Object.defineProperty(n.prototype,"indices",{get:function(){var t=[];return this.Ue.forEach((function(n){t.push(n)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rows",{get:function(){var t=[],n=this.g;return this.Ue.forEach((function(i){t.push(n.get(i))})),t},enumerable:!1,configurable:!0}),n.prototype.toArray=function(){var t=[],n=this.g;return this.Ue.forEach((function(i){t.push([i,n.get(i)])})),t},n.prototype.toSortedArray=function(){return this.toArray().sort(Ip)},n.prototype.toObject=function(){var t={},n=this.g;return this.Ue.forEach((function(i){t[i]=n.get(i)})),t},n.prototype.toMap=function(){var t=new Map,n=this.g;return this.Ue.forEach((function(i){t.set(i,n.get(i))})),t},n}(t.utils.EventEmitter),Np={ASCENDING:0,DESCENDING:1},Ap=function(t){function n(n){var i=t.call(this)||this;return i.A=0,i.kv=-1,i.dd=!1,i.g=n,i.wd=null,i.Od=null,i.Gt=Np.ASCENDING,i}return G(n,t),Object.defineProperty(n.prototype,"id",{get:function(){return this.A},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"order",{get:function(){return this.Gt},set:function(t){this.Gt=t},enumerable:!1,configurable:!0}),n.prototype.apply=function(){this.dd=!0,this.A+=1,this.g.update()},n.prototype.unapply=function(){this.dd&&(this.dd=!1,this.A+=1,this.g.update())},n.prototype.isApplied=function(){return this.dd},n.prototype.newSorted=function(){var t=this.wd;if(null!=t){for(var n=[],i=this.g.rows,r=0,e=i.length;r<e;++r)n.push(r);return n.sort(this.toComparator(i,t)),n}return null},n.prototype.toComparator=function(t,n){var i=this.Gt;return St(n)?i===Np.ASCENDING?function(i,r){return n(t[i],t[r],i,r)}:function(i,r){return n(t[r],t[i],r,i)}:i===Np.ASCENDING?function(i,r){return n.compare(t[i],t[r],i,r)}:function(i,r){return n.compare(t[r],t[i],r,i)}},n.prototype.get=function(){return this.wd},n.prototype.set=function(t){this.wd!==t&&(this.wd=t)},n.prototype.toDirty=function(){this.A+=1},n.prototype.update=function(){this.A!==this.kv&&(this.kv=this.A,this.dd?(this.Od=this.newSorted(),this.emit("change",this)):null!=this.Od&&(this.Od=null,this.emit("change",this)))},Object.defineProperty(n.prototype,"indices",{get:function(){return this.update(),this.Od},enumerable:!1,configurable:!0}),n.prototype.map=function(t){var n=t,i=this.indices;if(i){var r=i.indexOf(n);if(!(0<=r))return null;n=r}return n},n.prototype.unmap=function(t){var n=t,i=this.indices;return i&&(n=i[n]),n},n}(t.utils.EventEmitter),Rp=function(n){function i(t){var i=n.call(this)||this;if(i.g=null,i.pd=i.toRows(null==t?void 0:t.rows),i.$f=new Tp(i),i.Qf=i.toSelection(null==t?void 0:t.selection),i.xb=new jp(i),i.Dd=new Ap(i),t){var r=t.filter;r&&i.xb.set(r);var e=t.comparator;e&&i.Dd.set(e);var u=t.on;if(u)for(var s in u){var h=u[s];h&&i.on(s,h)}}return i}return G(i,n),i.prototype.toSelection=function(n){return n instanceof t.utils.EventEmitter?n:St(n)?n(this):this.newSelection(n)},i.prototype.newSelection=function(t){return new Cp(this,t)},i.prototype.bind=function(t){this.g=t},i.prototype.toRows=function(t){var n=[];if(null!=t)for(var i=0,r=t.length;i<r;++i)n.push(t[i]);return n},Object.defineProperty(i.prototype,"rows",{get:function(){return this.pd},enumerable:!1,configurable:!0}),i.prototype.update=function(t){var n=this.g;n&&n.update(t)},i.prototype.lock=function(){var t=this.g;t&&t.lock()},i.prototype.unlock=function(t){var n=this.g;n&&n.unlock(t)},i.prototype.size=function(){return this.pd.length},i.prototype.clear=function(){var t=this.pd;0<t.length&&(t.length=0,this.lock(),this.Qf.clear(),this.Dd.toDirty(),this.xb.toDirty(),this.update(),this.unlock(!0))},i.prototype.clearAndAdd=function(t){var n=this.pd;n.length=0,n.push(t),this.lock(),this.Qf.clear(),this.Dd.toDirty(),this.xb.toDirty(),this.update(),this.unlock(!0)},i.prototype.clearAndAddAll=function(t){var n=this.pd;n.length=0;for(var i=0,r=t.length;i<r;++i)n.push(t[i]);this.lock(),this.Qf.clear(),this.Dd.toDirty(),this.xb.toDirty(),this.update(),this.unlock(!0)},i.prototype.add=function(t,n){var i=this.pd,r=this.Qf,e=this.Dd,u=this.xb;null==n?(i.push(t),this.lock(),e.toDirty(),u.toDirty(),this.update(),this.unlock(!0)):0<=n&&n<i.length&&(i.splice(n,0,t),this.lock(),r.shift(n,1),e.toDirty(),u.toDirty(),this.update(),this.unlock(!0))},i.prototype.addAll=function(t,n){var i=this.pd,r=i.length,e=this.Qf,u=this.Dd,s=this.xb;if(null==n){for(var h=0,o=a=t.length;h<o;++h)i.push(t[h]);this.lock(),u.toDirty(),s.toDirty(),this.update(),this.unlock(!0)}else if(0<=n&&n<r){var a=t.length;for(h=0;h<a;++h)i.splice(n+h,0,t[h]);this.lock(),e.shift(n,a),u.toDirty(),s.toDirty(),this.update(),this.unlock(!0)}},i.prototype.get=function(t){var n=this.pd;return 0<=t&&t<n.length?n[t]:null},i.prototype.set=function(t,n){var i=this.pd;if(0<=t&&t<i.length){var r=i[t];return i[t]=n,this.lock(),this.Dd.toDirty(),this.xb.toDirty(),this.update(),this.unlock(!0),r}return null},i.prototype.remove=function(t){var n=this.pd;if(0<=t&&t<n.length){var i=n.splice(t,1)[0];return this.lock(),this.Qf.remove(t),this.Dd.toDirty(),this.xb.toDirty(),this.update(),this.unlock(!0),i}return null},i.prototype.each=function(t,n,i){var r=this.pd;n=null!=n?Math.max(0,n):0,i=null!=i?Math.min(r.length,i):r.length;for(var e=n;e<i&&!1!==t(r[e],e);++e);},Object.defineProperty(i.prototype,"selection",{get:function(){return this.Qf},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filter",{get:function(){return this.xb},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorter",{get:function(){return this.Dd},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mapped",{get:function(){return this.$f},enumerable:!1,configurable:!0}),i}(t.utils.EventEmitter),yp=function(n){function i(t,i,r,e){var u=n.call(this,e)||this;u.transform.position.y=r;var s=u.toData(e.data);u.Vt=s,s.bind(u);var h=u.theme;u.fd=t,u.ad=i;var o=function(t,n,i){var r=n.row;return null!=r?(null==r.height&&(r.height=t.getRowHeight()),void 0===r.selection?r.selection={type:i}:void 0===r.selection.type&&(r.selection.type=i)):r={height:t.getRowHeight(),selection:{type:i}},r}(h,e,s.selection.type);return u.Ed=o,u.Md=null!=o.height?o.height:h.getRowHeight(),u.Sd=0,u.jd=0,u.Td=0,u.Id=!1,u.Cd=!1,u.Nd=[],u.Ad=function(t,n,i,r,e,s){u.onRowChange(t,n,i,r,e,s)},u.vd=new Map,u.Vt.emit("init",u.Vt),u}return G(i,n),i.prototype.onRowChange=function(t,n,i,r,e,u){var s=this.Vt;s.emit("change",t,n,i,r,e,s),u.update===$O.ALL&&this.update(!0)},i.prototype.toData=function(t){return this.isData(t)?t:new Rp(t)},i.prototype.isData=function(t){return null!=t&&"mapped"in t},i.prototype.onResize=function(t,i,r,e){n.prototype.onResize.call(this,t,i,r,e),this.update()},Object.defineProperty(i.prototype,"selection",{get:function(){return this.Vt.selection},enumerable:!1,configurable:!0}),i.prototype.lock=function(){this.Td+=1,1===this.Td&&(this.Id=!1,this.Cd=!1)},i.prototype.unlock=function(t){this.Td-=1,0===this.Td&&(t&&this.Id&&this.update(this.Cd),this.Id=!1,this.Cd=!1)},i.prototype.update=function(t){if(0<this.Td)return this.Id=!0,void(t&&(this.Cd=!0));var n=this.parent;if(null!=n){var i=n.parent;if(null!=i){var r=this.children,e=i.height,u=this.Md,s=this.Vt,h=s.mapped.size(),o=this.Sd,a=this.jd,c=a-o,f=this.transform.position.y,l=f+h*u,v=Math.max(e,l),b=Math.max(e-v,n.position.y),d=-b/u,g=(e-(b+f))/u,m=Math.floor(d);m-=m%2==0?2:1;var w=Math.floor(g),O=(w+=(w-m)%2==1?3:2)-m;if(O<c&&(w=m+(O=c)),c<O){for(var p=c;p<O;++p){var D=o+p,E=this.newRow(D%2==0);this.addChild(E)}a=o+(c=O)}else if(O<c){for(p=c-1;O<=p;--p)this.removeChild(r[p]);a=o+(c=O)}this.Sd=m,this.jd=w;var M=m-o,S=Math.abs(M),j=r.length;if(0<S&&S<j){var T=this.Nd;if(0<M){for(p=0;p<S;++p)T.push(this.resetRow(r[p]));for(p=S;p<j;++p)r[p-S]=r[p];for(p=0;p<S;++p)r[j-S+p]=T[p]}else{for(p=0;p<S;++p)T.push(this.resetRow(r[j-S+p]));for(p=j-S-1;0<=p;--p)r[p+S]=r[p];for(p=0;p<S;++p)r[p]=T[p]}T.length=0}var I=s.selection,C=I.type!==Ep.NONE;for(s.mapped.each((function(n,i,e,s){var h=r[e-m];h.position.y=e*u;var o=h.state;o.lock(),o.add(fp.HAS_DATA),o.set(fp.SELECTABLE,C),o.set(gt.ACTIVE,I.contains(s)),o.remove(gt.DISABLED),o.unlock(),h.set(n,i,s,t)}),m,m+j),p=0;m+p<0&&p<j;++p)(N=r[p]).position.y=(m+p)*u,(A=N.state).lock(),A.add(gt.DISABLED),A.removeAll(fp.HAS_DATA,fp.SELECTABLE,gt.ACTIVE),A.unlock(),N.unset();for(p=j-1;h<=m+p&&0<=p;--p){var N,A;(N=r[p]).position.y=(m+p)*u,(A=N.state).lock(),A.add(gt.DISABLED),A.removeAll(fp.HAS_DATA,fp.SELECTABLE,gt.ACTIVE),A.unlock(),N.unset()}this.lock(),n.position.y=b,n.height=v,this.height=l,this.unlock(!1),this.emit("update",d,g,this)}}},i.prototype.resetRow=function(t){t.blur(!0);for(var n=t.children,i=0,r=n.length;i<r;++i){var e=n[i];e instanceof ru&&(e.state.isPressed=!1)}return t},i.prototype.newRow=function(t){return new Sp(this.Ad,t,this.vd,this.fd,this.ad,this.Ed)},i.prototype.onParentMove=function(t,i,r,e){n.prototype.onParentMove.call(this,t,i,r,e),this.updateFrozenCellPosition(t)},i.prototype.updateFrozenCellPosition=function(t){var n=this.ad;if(null!=n&&0<n)for(var i=this.children,r=0,e=i.length;r<e;++r)i[r].updateFrozenCellPosition(t)},i.prototype.getClippingRect=function(t,i){n.prototype.getClippingRect.call(this,t,i);var r=this.parent;if(r){var e=-r.transform.position.y;i.y+=e,i.height-=e}},i.prototype.scrollTo=function(t){var n=this.parent;if(null==n)return!1;var i=n.parent;if(null==i)return!1;var r=-1;return jt(t)?0<=t&&t<this.data.mapped.size()&&(r=t):this.data.mapped.each((function(n,i,e){return n!==t||(r=e,!1)})),!(r<0||(n.position.y=Math.max(Math.min(0,i.height-n.height),-r*this.Md),lt.update(this),0))},i.prototype.toRowIndexMapped=function(t){if(0<=this.parent.position.y+t){var n=Math.floor(t/this.Md);if(0<=n&&n<this.Vt.mapped.size())return n}return-1},i.prototype.toRow=function(t){var n=t-this.Sd,i=this.children;return 0<=n&&n<i.length?i[n]:null},i.prototype.toCell=function(t,n){for(var i=t.children,r=i.length,e=this.fd.length,u=0,s=Math.min(r,e);u<s;++u){var h=i[r-u-1],o=n-h.position.x;if(0<=o&&o<=h.width)return h}return null},i.prototype.onRowClick=function(t){if(this.state.isActionable){var n=i.WORK_ON_CLICK;n.copyFrom(t.data.global),this.toLocal(n,void 0,n,!1);var r=this.toRowIndexMapped(n.y);if(0<=r){var e=this.toRow(r);if(e){var u=this.toCell(e,n.x);if(u&&u.onRowSelect&&u.onRowSelect(t,n))return}this.onRowSelect(t,r)}}},i.prototype.onRowSelect=function(t,n){var i=this.Vt,r=i.selection,e=r.type===Ep.SINGLE,u=!e,s=i.mapped.unmap(n),h=t.data.originalEvent,o=h.ctrlKey,a=h.shiftKey;if(e||r.isEmpty()||!u||!o&&!a)r.clearAndAdd(s);else if(o)r.toggle(s);else if(a){var c=r.last;if(null!=c){var f=i.sorter,l=i.filter,v=f.map(s),b=f.map(c);if(null!=v&&null!=b){var d=b+1,g=v+1;if(v<b&&(d=v,g=b),d<g){var m=[],w=l.indices,O=f.indices;if(w)if(O)for(var p=0,D=w.length;p<D;++p)d<=(E=w[p])&&E<g&&m.push(O[E]);else for(p=0,D=w.length;p<D;++p){var E;d<=(E=w[p])&&E<g&&m.push(E)}else if(O)for(p=d;p<g;++p)m.push(O[p]);else for(p=d;p<g;++p)m.push(p);r.addAll(m)}}}}},i.prototype.onDblClick=function(t,i){return n.prototype.onDblClick.call(this,t,i)},i.prototype.getType=function(){return"DTableBody"},Object.defineProperty(i.prototype,"data",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),i.WORK_ON_CLICK=new t.Point,i}(ru),kp={NONE:0,LEFT:1,RIGHT:2,BOTH:3},Lp=function(){function n(t,n,i,r){this.od=t,this.Rd=n,this.ud=i,this.j=r,this.yd=!1,this.kd=8}return n.prototype.findResizableCell=function(t,n,i){var r=this.od.children,e=r.length;if(n){for(var u=t;u<e;++u)if((h=(s=r[e-u-1]).column).resizable){if(null==i)return s;if(!0===i){if(null!=h.weight)return s}else if(null==h.weight)return s}}else for(u=t;0<=u;--u){var s,h;if((h=(s=r[e-u-1]).column).resizable){if(null==i)return s;if(!0===i){if(null!=h.weight)return s}else if(null==h.weight)return s}}return null},n.prototype.findCells=function(t,n,i){var r=[],e=this.od.children,u=e.length;if(n)for(var s=t;s<u;++s){var h=e[u-s-1];i?null!=h.column.weight&&r.push(h):null==h.column.weight&&r.push(h)}else for(s=t;0<=s;--s)h=e[u-s-1],i?null!=h.column.weight&&r.push(h):null==h.column.weight&&r.push(h);return r},n.prototype.calcData=function(t){var n=this.findResizableCell(t,!1,null);if(null!=n){var i=n.column,r=this.findResizableCell(t+1,!0,null);if(null!=r){var e=r.column;return null==i.weight?null==e.weight?[1,n,r]:[2,n,r,this.findCells(0,!0,!0)]:null==e.weight?[3,n,r,this.findCells(0,!0,!0)]:[1,n,r]}return null==i.weight&&this.findCells(n.columnIndex-1,!1,!0).length<=0?[0,n]:null}return null},Object.defineProperty(n.prototype,"left",{get:function(){var t=this.Ae;return void 0===t&&(t=this.calcData(this.ud-1),this.Ae=t),t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){var t=this.ye;return void 0===t&&(t=this.calcData(this.ud),this.ye=t),t},enumerable:!1,configurable:!0}),n.prototype.onDown=function(t){var n=this.Rd,i=n.state.valueOf(fp.HOVERED_ON_EDGE);if(null!=i){this.yd=!0;var r=lt.getLayer(n);if(null!=r){var e=r.renderer.plugins.interaction;if(i===kp.LEFT){var u=this.left;null!=u&&this.Ld(t.data.global.x,u,e)}else{var s=this.right;null!=s&&this.Ld(t.data.global.x,s,e)}}return!0}return this.yd=!1,!1},n.prototype.Ld=function(t,n,i){switch(n[0]){case 0:this.onDown0(t,n,i);break;case 1:this.onDown1(t,n,i);break;case 2:this.onDown2(t,n,i);break;case 3:this.onDown3(t,n,i)}},n.prototype.onOver=function(t){var n,i=this;if(null!=this.left||null!=this.right){var r=null!==(n=this.xd)&&void 0!==n?n:this.xd=function(t){i.onHovered(t)},e=this.Rd;e.off(he.move,r),e.on(he.move,r),this.onHovered(t);var u=lt.getLayer(e);null!=u&&(u.renderer.plugins.interaction.cursor=e.cursor)}},n.prototype.onOut=function(t){var n=this.xd;if(null!=n){var i=this.Rd;i.state.remove(fp.HOVERED_ON_EDGE),i.off(he.move,n)}},n.prototype.onHovered=function(t){var n=this.Rd,i=n.width,r=this.toX(t),e=this.j,u=0<=r&&r<=e,s=i-e<=r&&r<=i;u&&s&&(r<=i-r?s=!1:u=!1),u?null!=this.left?n.state.add(fp.HOVERED_ON_EDGE,kp.LEFT):n.state.remove(fp.HOVERED_ON_EDGE):s&&null!=this.right?n.state.add(fp.HOVERED_ON_EDGE,kp.RIGHT):n.state.remove(fp.HOVERED_ON_EDGE)},n.prototype.toX=function(n){var i,r=null!==(i=this.Bd)&&void 0!==i?i:this.Bd=new t.Point;return this.Rd.toLocal(n.data.global,void 0,r,!0).x},n.prototype.onDown0=function(t,n,i){var r=n[1],e=r.column,u=r.width,s=Math.max(this.kd,e.minWidth);this.newOnUp((function(n){e.width=Math.max(s,u+n.data.global.x-t)}),i)},n.prototype.onDown1=function(t,n,i){var r=this.kd,e=n[1],u=e.column,s=e.width,h=n[2],o=h.column,a=h.width,c=s+a;if(null==u.weight){var f=Math.max(r,u.minWidth),l=Math.max(r,o.minWidth),v=c-l;if(c<=0||v<=f)return;var b=function(n){var i=Math.max(f,Math.min(v,s+n.data.global.x-t));u.width=i,o.width=c-i};this.newOnUp(b,i)}else{var d=e.weight+h.weight,g=u.minWeight,m=o.minWeight,w=d-m,O=r,p=c-(l=r);if(c<=0||p<=O||w<=g)return;b=function(n){var i=Math.max(O,Math.min(p,s+n.data.global.x-t)),r=Math.max(g,Math.min(w,d*(i/c)));u.weight=r,o.weight=d-r},this.newOnUp(b,i)}},n.prototype.onDown2=function(t,n,i){n[3].length<=1?this.onDown2a(t,n,i):this.onDown2b(t,n,i)},n.prototype.onDown2a=function(t,n,i){var r=this.kd,e=n[1],u=e.column,s=e.width,h=Math.max(r,u.minWidth),o=n[2].width,a=s+o,c=a-r;a<=0||c<=h||this.newOnUp((function(n){u.width=Math.max(h,Math.min(c,s+n.data.global.x-t))}),i)},n.prototype.onDown2b=function(t,n,i){for(var r=this.kd,e=n[1],u=e.column,s=e.width,h=Math.max(r,u.minWidth),o=n[2],a=o.column,c=o.width,f=a.minWeight,l=s+c,v=n[3],b=0,d=0,g=0,m=v.length;g<m;++g){var w=v[g];b+=w.weight,d+=w.width}if(b<=0||d<=0){var O=l-(S=r);if(l<=0||O<=h)return;if(b<=0)for(b=0,g=0,m=v.length;g<m;++g){var p=(w=v[g]).column;if(w!==o){var D=p.minWeight;p.weight=D,b+=D}else{var E=Math.max(1,f);p.weight=E,b+=E}}var M=function(n){u.width=Math.max(h,Math.min(O,s+n.data.global.x-t))};this.newOnUp(M,i)}else{var S=Math.max(r,d*(f/b)),j=l-S;if(l<=0||j<=h)return;M=function(n){var i=Math.max(h,Math.min(j,s+n.data.global.x-t)),r=l-i,e=Math.max(f,b*(r/d));u.width=i,a.weight=e},this.newOnUp(M,i)}},n.prototype.onDown3=function(t,n,i){n[3].length<=1?this.onDown3a(t,n,i):this.onDown3b(t,n,i)},n.prototype.onDown3a=function(t,n,i){var r=this.kd,e=n[1].width,u=r,s=n[2],h=s.column,o=s.width,a=Math.max(r,h.minWidth),c=e+o,f=c-u;c<=0||f<=a||this.newOnUp((function(n){h.width=Math.max(a,Math.min(f,o+t-n.data.global.x))}),i)},n.prototype.onDown3b=function(t,n,i){for(var r=this.kd,e=n[1],u=e.column,s=e.width,h=u.minWeight,o=n[2],a=o.column,c=o.width,f=Math.max(r,a.minWidth),l=s+c,v=n[3],b=0,d=0,g=0,m=v.length;g<m;++g){var w=v[g];b+=w.weight,d+=w.width}if(b<=0||d<=0){var O=l-(S=r);if(l<=0||O<=f)return;if(b<=0)for(b=0,g=0,m=v.length;g<m;++g){var p=(w=v[g]).column;if(w!==e){var D=p.minWeight;p.weight=D,b+=D}else{var E=Math.max(1,h);p.weight=E,b+=E}}var M=function(n){a.width=Math.max(f,Math.min(O,c+t-n.data.global.x))};this.newOnUp(M,i)}else{var S=Math.max(r,d*(h/b)),j=l-S;if(l<=0||j<=f)return;M=function(n){var i=Math.max(f,Math.min(j,c+t-n.data.global.x)),r=l-i,e=Math.max(h,b*(r/d));a.width=i,u.weight=e},this.newOnUp(M,i)}},n.prototype.newOnUp=function(t,n){var i=this.od;i.state.add(fp.RESIZING);var r=function(){i.state.remove(fp.RESIZING),n.off(he.move,t),n.off(he.up,r),n.off(he.upoutside,r),n.off(he.cancel,r)};return n.on(he.move,t),n.on(he.up,r),n.on(he.upoutside,r),n.on(he.cancel,r),r},n.prototype.isClicked=function(n){return n instanceof t.InteractionEvent&&(this.Rd.state.is(fp.HOVERED_ON_EDGE)||this.yd)},n}(),xp=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.ls=n,u.ud=i,u.sd=r,u.Wn=new Lp(u.ls,u,i,u.theme.getEdgeWidth()),u}return G(n,t),Object.defineProperty(n.prototype,"column",{get:function(){return this.sd},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.ud},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"category",{get:function(){return this.ls},enumerable:!1,configurable:!0}),n.prototype.onDown=function(n){this.Wn.onDown(n)||t.prototype.onDown.call(this,n)},n.prototype.onOver=function(n){t.prototype.onOver.call(this,n),this.Wn.onOver(n)},n.prototype.onOut=function(n){t.prototype.onOut.call(this,n),this.Wn.onOut(n)},n.prototype.getType=function(){return"DTableCategoryCell"},n}(Cv),Bp=function(t){function n(n,i){var r=t.call(this)||this,e=i.category;e&&(Tt(e)?0===n&&(r.label=e):n<e.length&&(r.label=e[n])),r.nn=i.weight,r.At=i.width,r.ut=!1,r.offset=0,r.fd=[i],r.resizable=i.resizable;var u=function(){r.onResize()};return r._d=u,i.on("resize",u),r}return G(n,t),n.prototype.onResize=function(){if(!this.ut){var t=this.fd;if(null!=this.nn){for(var n=0,i=0,r=t.length;i<r;++i){var e=t[i].weight;null!=e&&(n+=e)}this.nn!==n&&(this.nn=n,this.emit("resize",this))}else{var u=0;for(i=0,r=t.length;i<r;++i){var s=t[i].width;null!=s&&(u+=s)}this.At!==u&&(this.At=u,this.emit("resize",this))}}},Object.defineProperty(n.prototype,"weight",{get:function(){return this.nn},set:function(t){var n=this.nn;if(null!=n&&n!==t){var i=this.fd,r=i.length,e=this.minWeight,u=Math.max(e,t);if(this.nn!==u){if(this.ut=!0,e<n)for(var s=u/n,h=0;h<r;++h)null!=(a=(o=i[h]).weight)&&(o.weight=Math.max(o.minWeight,a*s));else for(h=0;h<r;++h){var o,a;null!=(a=(o=i[h]).weight)&&(o.weight=o.minWeight)}this.ut=!1,this.onResize()}}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"minWeight",{get:function(){for(var t=0,n=this.fd,i=n.length,r=0;r<i;++r){var e=n[r];null!=e.weight&&(t+=e.minWeight)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this.At},set:function(t){var n=this.At;if(null!=n&&n!==t){var i=this.fd,r=i.length,e=this.minWidth,u=Math.max(e,t);if(n!==u){if(this.ut=!0,e<n)for(var s=u/n,h=0;h<r;++h)null!=(a=(o=i[h]).width)&&(o.width=Math.max(o.minWidth,a*s));else for(h=0;h<r;++h){var o,a;null!=(a=(o=i[h]).width)&&(o.width=o.minWidth)}this.ut=!1,this.onResize()}}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"minWidth",{get:function(){for(var t=0,n=this.fd,i=n.length,r=0;r<i;++r){var e=n[r];null!=e.width&&(t+=e.minWidth)}return t},enumerable:!1,configurable:!0}),n.prototype.add=function(t){if(this.fd.push(t),null!=this.nn){var n=t.weight;null!=n&&(this.nn+=n,t.on("resize",this._d))}else if(null!=this.At){var i=t.width;null!=i&&(this.At+=i,t.on("resize",this._d))}},n}(t.utils.EventEmitter),_p=function(t){function n(n,i,r,e){var u=t.call(this,n,i,e)||this;u.fd=n,u.ad=i,u.Ne=r,u.transform.position.y=r,u.initCells();for(var s=0,h=n.length;s<h;++s){var o=n[s];o.on("resize",u.newOnColumnResize(s,o))}return u}return G(n,t),n.prototype.newOnColumnResize=function(t,n){var i=this;return function(){i.onColumnResize(t,n)}},n.prototype.onColumnResize=function(t,n){var i=n.weight;if(null!=i)this.onColumnResizeWeight(this,t,i);else{var r=n.width;null!=r&&this.onColumnResizeWidth(this,t,r)}},n.prototype.onColumnResizeWeight=function(t,n,i){var r=t.children,e=r.length,u=e-n-1;0<=u&&u<e&&(r[u].weight=i)},n.prototype.onColumnResizeWidth=function(t,n,i){var r=t.children,e=r.length,u=e-n-1;0<=u&&u<e&&(r[u].width=i)},n.prototype.onParentMove=function(n,i,r,e){t.prototype.onParentMove.call(this,n,i,r,e),this.transform.position.y=-i+this.Ne,this.updateFrozenCellPosition(n)},n.prototype.getContentPositionX=function(){var t=this.parent;return t?t.position.x:0},n.prototype.newCell=function(t,n,i,r){return new xp(this,t,n,this.toCellOptions(t,n,r))},n.prototype.toCellOptions=function(t,n,i){var r=null==i?void 0:i.cell;if(r){r.weight=n.weight,r.width=n.width;var e=r.text||{};return r.text=e,e.value=e.value||n.label,r}return{weight:n.weight,width:n.width,text:{value:n.label}}},n.prototype.getType=function(){return"DTableCategory"},n}(Mp),Pp=function(){function t(t,n,i){for(var r=[],e=0,u=this.toCount(t)-1;0<=u;--u){var s=new _p(this.toColumns(u,t,n),n,e,i);r.push(s),e+=s.height}this.items=r}return t.prototype.toCount=function(t){for(var n=0,i=0,r=t.length;i<r;++i){var e=t[i].category;if(null!=e){var u=Tt(e)?1:e.length;n=Math.max(n,u)}}return n},t.prototype.isEqual=function(t,n,i){if(null!=n){if(null!=i){if(Tt(n))return Tt(i)?0<t||n===i:0<t?i.length<=t:1===i.length&&n===i[0];if(Tt(i))return 0<t?n.length<=t:1===n.length&&n[0]===i;if(n.length<=t&&i.length<=t)return!0;if(i.length===n.length){for(var r=t,e=n.length;r<e;++r)if(n[r]!==i[r])return!1;return!0}return!1}return Tt(n)?0<t:n.length<=t}return null==i||(Tt(i)?0<t:i.length<=t)},t.prototype.toColumns=function(t,n,i){for(var r=[],e=null,u=null,s=0,h=n.length;s<h;++s){var o=n[s];s!==i&&u&&e&&this.isEqual(t,e.category,o.category)&&u.resizable===o.resizable&&(null!=u.weight&&null!=o.weight||null!=u.width&&null!=o.width)?u.add(o):(e=o,u=new Bp(t,o),r.push(u))}return r},t}(),Up=function(t,n){return t[n]},Fp=function(t,n,i){t[n]=i},Gp=function(){return""},Hp=function(){},zp=function(t){if(null!=t){var n=t.length;if(n<=1){var i=t[0];return function(t){return Object.prototype.hasOwnProperty.call(t,i)}}return function(i){for(var r=0;r<n;++r){var e=t[r];if(!(e in i))return!1;i=i[e]}return!0}}return function(t,n){return n<t.length}},Vp=function(t,n){return Tt(t)?zp(n):null!=t&&t},Wp=function(t,n){return function(i,r){var e=t(i,n),u=t(r,n);return e<u?-1:u<e?1:0}},Xp=function(t){return null==t?void 0:t instanceof Wd?t:new Wd(t)},Kp=function(t){return null==t?void 0:"open"in t?t:new nm(t)},Yp=function(t){return t.value},Jp=function(){},Zp=function(t){function n(n,i){var r,e,u,s=t.call(this)||this,h=i.weight,o=i.width;null!=h?null!=o&&(o=void 0):null==o&&(h=1);var a=rr(null!==(r=i.type)&&void 0!==r?r:QO.TEXT,QO),c=function(t,n){var i=t.align;if(null!=i)return Tt(i)?$s[i]:i;switch(n){case QO.TEXT:case QO.TEXT_AREA:return $s.LEFT;case QO.REAL:case QO.INTEGER:return $s.RIGHT;case QO.BUTTON:case QO.INDEX:case QO.SELECT:case QO.ACTION:case QO.LINK:case QO.CHECK:case QO.CHECK_SINGLE:case QO.COLOR:return $s.CENTER;default:return $s.LEFT}}(i,a),f=i.label||"",l=function(t){return null!=t.path?t.path.split("."):null}(i),v=function(t,n,i){var r=t.getter;if(r)return r;switch(n){case QO.ACTION:case QO.LINK:return Gp;default:return null==i?Up:function(t,n){if(t.length<=1){var i=t[0];return void 0===n?function(t){return t[i]}:function(t){return Object.prototype.hasOwnProperty.call(t,i)?t[i]:n}}return void 0===n?function(n){for(var i=0,r=t.length-1;i<r;++i)n=n[t[i]];return n[t[t.length-1]]}:function(i){for(var r=0,e=t.length-1;r<e;++r)i=i[t[r]];var u=t[t.length-1];return Object.prototype.hasOwnProperty.call(i,u)?i[u]:n}}(i,t.default)}}(i,a,l),b=function(t,n,i){var r=t.setter;if(r)return r;switch(n){case QO.BUTTON:case QO.ACTION:case QO.LINK:return Hp;default:return null==i?Fp:function(t){if(t.length<=1){var n=t[0];return function(t,i,r){t[n]=r}}return function(n,i,r){for(var e=0,u=t.length-1;e<u;++e)n=n[t[e]]||{};n[t[t.length-1]]=r}}(i)}}(i,a,l);return s.nn=h,s.minWeight=0,s.At=o,s.minWidth=0,s.resizable=null!==(e=i.resizable)&&void 0!==e&&e,s.type=a,s.label=f,s.getter=v,s.setter=b,s.formatter=i.formatter,s.renderable=function(t,n){var i=t.renderable;return Tt(i)?zp(n):null==i||i}(i,l),s.align=c,s.state=function(t){var n=t.state;return null!=n?Tt(n)||Mt(n)?{initial:n,modifier:void 0}:{initial:void 0,modifier:n}:{initial:void 0,modifier:void 0}}(i),s.editing=function(t,n){var i,r=t.editing,e=t.editable;return r?{enable:Vp(null!==(i=r.enable)&&void 0!==i?i:e,n),formatter:r.formatter,unformatter:r.unformatter,validator:r.validator}:{enable:Vp(e,n)}}(i,l),s.sorting=function(t,n,i){var r=i.sorting,e=i.sortable;return r?r.enable||e?{enable:!0,comparator:r.comparator||Wp(t,n)}:{enable:!1}:e?{enable:!0,comparator:Wp(t,n)}:{enable:!1}}(v,n,i),s.header=i.header,s.body=i.body,s.selecting=function(t){return t?{getter:t.getter||Yp,setter:t.setter||Jp,menu:Xp(t.menu),multiple:Xp(t.multiple),dialog:Kp(t.dialog),promise:t.promise}:{getter:Yp,setter:Jp}}(i.selecting),s.category=i.category,s.frozen=i.frozen,s.offset=0,s.link=i.link,s.update=rr(null!==(u=i.update)&&void 0!==u?u:$O.CELL,$O),s}return G(n,t),Object.defineProperty(n.prototype,"weight",{get:function(){return this.nn},set:function(t){null!=this.nn&&this.nn!==t&&(this.nn=t,this.emit("resize",this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this.At},set:function(t){null!=this.At&&this.At!==t&&(this.At=t,this.emit("resize",this))},enumerable:!1,configurable:!0}),n}(t.utils.EventEmitter),qp=function(t){function n(n,i){var r=t.call(this)||this;r.parent=n;var e=[];if(null!=i)for(var u=0,s=i.length;u<s;++u){var h=new Zp(u,i[u]);e.push(h),h.on("resize",r.newOnColumnResize(u,h))}r.items=e;var o=0;for(u=e.length-1;0<=u;--u)if(!0===e[u].frozen){o=u+1;break}return r.frozen=o,r}return G(n,t),n.prototype.newOnColumnResize=function(t,n){var i=this;return function(){i.onColumnResize(t,n)}},n.prototype.onColumnResize=function(t,n){this.onColumnResizeHeader(t,n),this.onColumnResizeBody(t,n),this.emit("resize",t,n,this)},n.prototype.onColumnResizeHeader=function(t,n){var i=this.parent.header;if(null!=i){var r=n.weight;if(null!=r)this.onColumnResizeWeight(i,t,r);else{var e=n.width;null!=e&&this.onColumnResizeWidth(i,t,e)}}},n.prototype.onColumnResizeBody=function(t,n){var i=this.parent.body.children,r=n.weight;if(null!=r)for(var e=0,u=i.length;e<u;++e)this.onColumnResizeWeight(i[e],t,r);else{var s=n.width;if(null!=s)for(e=0,u=i.length;e<u;++e)this.onColumnResizeWidth(i[e],t,s)}},n.prototype.onColumnResizeWeight=function(t,n,i){var r=t.children,e=r.length,u=e-n-1;0<=u&&u<e&&(r[u].weight=i)},n.prototype.onColumnResizeWidth=function(t,n,i){var r=t.children,e=r.length,u=e-n-1;0<=u&&u<e&&(r[u].width=i)},Object.defineProperty(n.prototype,"width",{get:function(){for(var t=0,n=this.items,i=n.length,r=0;r<i;++r){var e=n[r].width;null!=e&&(t+=e)}return t},enumerable:!1,configurable:!0}),n.prototype.get=function(t){var n=this.items;return 0<=t&&t<n.length?n[t]:null},n.prototype.each=function(t){for(var n=this.items,i=0,r=n.length;i<r&&!1!==t(n[i],i);++i);return this},n.prototype.size=function(){return this.items.length},n}(t.utils.EventEmitter),Qp=function(t){function n(n){var i=t.call(this)||this;return i.A=0,i.kv=-1,i.dd=!1,i.g=n,i.xb=null,i.md=null,i}return G(n,t),Object.defineProperty(n.prototype,"id",{get:function(){return this.A},enumerable:!1,configurable:!0}),n.prototype.apply=function(){this.dd=!0,this.A+=1,this.g.update()},n.prototype.unapply=function(){this.dd&&(this.dd=!1,this.A+=1,this.g.update())},n.prototype.isApplied=function(){return this.dd},n.prototype.isFiltered=function(t,n,i){return St(i)?i(t,n):i.test(t,n)},n.prototype.hasFiltered=function(t,n,i){for(var r=this.g.accessor,e=r.toChildren,u=r.hasChildren,s=0,h=n.length;s<h;++s){var o=n[s];if(this.isFiltered(o,-1,i))return!0;var a=e(o);if(u(o,a)&&this.hasFiltered(t,a,i))return!0}return!1},n.prototype.addAllToFiltered=function(t,n,i,r){for(var e=this.g.accessor,u=e.toChildren,s=e.hasChildren,h=0,o=n.length;h<o;++h){var a=n[h];i.push(r[0]),r[0]+=1;var c=u(a);s(a,c)&&t.isOpened(a)&&this.addAllToFiltered(t,c,i,r)}},n.prototype.newFilteredSub=function(t,n,i,r,e){for(var u=!1,s=this.g.accessor,h=s.toChildren,o=s.hasChildren,a=0,c=n.length;a<c;++a){var f=n[a],l=e[0];e[0]+=1;var v=this.isFiltered(f,l,i),b=h(f);if(o(f,b))if(t.isOpened(f))if(v)r.push(l),u=!0,this.addAllToFiltered(t,b,r,e);else{var d=r.length;this.newFilteredSub(t,b,i,r,e)&&(r.splice(d,0,l),u=!0)}else(v||this.hasFiltered(t,b,i))&&(r.push(l),u=!0);else v&&(r.push(l),u=!0)}return u},n.prototype.newFiltered=function(){var t=this.xb;if(null!=t){var n=[],i=this.g,r=i.nodes;return r&&this.newFilteredSub(i,r,t,n,[0]),n}return null},n.prototype.get=function(){return this.xb},n.prototype.set=function(t){this.xb!==t&&(this.xb=t)},n.prototype.toDirty=function(){this.A+=1},n.prototype.update=function(){this.A!==this.kv&&(this.kv=this.A,this.dd?(this.md=this.newFiltered(),this.emit("change",this)):null!=this.md&&(this.md=null,this.emit("change",this)))},Object.defineProperty(n.prototype,"indices",{get:function(){return this.update(),this.md},enumerable:!1,configurable:!0}),n.prototype.map=function(t){var n=t,i=this.indices;if(i){var r=i.indexOf(n);if(!(0<=r))return null;n=r}return n},n.prototype.unmap=function(t){var n=t,i=this.indices;return i&&(n=i[n]),n},n}(t.utils.EventEmitter),$p=function(t){return t.parent},tD=function(t){return t.children},nD=function(t,n){return null!=n&&0<n.length},iD=function(t){null!=t?(this.toParent=t.toParent||$p,this.toChildren=t.toChildren||tD,this.hasChildren=t.hasChildren||nD):(this.toParent=$p,this.toChildren=tD,this.hasChildren=nD)},rD=function(t,n){return t[0]-n[0]},eD=function(t){function n(n,i){var r,e=t.call(this)||this;e.g=n,e.kt=rr(null!==(r=null==i?void 0:i.type)&&void 0!==r?r:Ep.NONE,Ep),e.pd=new Set;var u=null==i?void 0:i.on;if(u)for(var s in u){var h=u[s];h&&e.on(s,h)}return e}return G(n,t),Object.defineProperty(n.prototype,"parent",{get:function(){return this.g},enumerable:!1,configurable:!0}),n.prototype.onNodeChange=function(t){if(null!=t){var n=this.g.accessor,i=n.toChildren,r=n.hasChildren,e=this.pd,u=this.newRows(t,i,r,e,new Set);e.size!==u.size&&(this.pd=u,this.onChange())}else{var s=this.pd;0<s.size&&(s.clear(),this.onChange())}},n.prototype.newRows=function(t,n,i,r,e){for(var u=0,s=t.length;u<s;++u){var h=t[u];r.has(h)&&e.add(h);var o=n(h);i(h,o)&&this.newRows(o,n,i,r,e)}return e},Object.defineProperty(n.prototype,"indices",{get:function(){var t=this.pd,n=[];return this.g.each((function(i,r){t.has(i)&&n.push(r)})),n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rows",{get:function(){var t=[];return this.pd.forEach((function(n){t.push(n)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return this.kt},enumerable:!1,configurable:!0}),n.prototype.getFirst=function(){var t=this.pd;if(0<t.size){var n=null;return t.forEach((function(t){null==n&&(n=t)})),n}return null},n.prototype.getLast=function(){var t=this.pd;if(0<t.size){var n=null;return t.forEach((function(t){n=t})),n}return null},n.prototype.toIndex=function(t){var n=null;return this.g.each((function(i,r){return t!==i||(n=r,!1)})),n},Object.defineProperty(n.prototype,"first",{get:function(){var t=this.getFirst();return t?this.toIndex(t):null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){var t=this.getLast();return t?this.toIndex(t):null},enumerable:!1,configurable:!0}),n.prototype.onChange=function(){this.g.update(),this.emit("change",this)},n.prototype.toggle=function(t){var n=this.g.get(t);if(n){var i=this.pd;i.has(n)?i.delete(n):i.add(n),this.onChange()}},n.prototype.add=function(t){var n=this.g.get(t);if(n){var i=this.pd;i.has(n)||(i.add(n),this.onChange())}},n.prototype.addTo=function(t){var n=this.last;null!=n&&this.addRange(n,!1,t,!0)},n.prototype.addRange=function(t,n,i,r){var e=this.pd,u=e.size,s=this.g;t<i?s.each((function(t){e.add(t)}),t+(n?0:1),i+(r?1:0)):s.each((function(t){e.add(t)}),i+(r?0:1),t+(n?1:0)),u!==e.size&&this.onChange()},n.prototype.addAll=function(t){if(0<t.length){for(var n=this.pd,i=this.g,r=0,e=t.length;r<e;++r){var u=i.get(t[r]);u&&n.add(u)}this.onChange()}},n.prototype.contains=function(t){var n=this.g.get(t);return!!n&&this.pd.has(n)},n.prototype.remove=function(t){var n=this.g.get(t);if(n){var i=this.pd;i.has(n)&&(i.delete(n),this.onChange())}},n.prototype.clear=function(){var t=this.pd;0<t.size&&(t.clear(),this.onChange())},n.prototype.clearAndAdd=function(t){var n=this.g.get(t);if(n){var i=this.pd;i.has(n)?1<i.size&&(i.clear(),i.add(n),this.onChange()):(i.clear(),i.add(n),this.onChange())}},n.prototype.clearAndAddAll=function(t){var n=this.pd;if(0<n.size||0<t.length){n.clear();for(var i=this.g,r=0,e=t.length;r<e;++r){var u=i.get(t[r]);u&&n.add(u)}this.onChange()}},n.prototype.shift=function(t,n){},n.prototype.size=function(){return this.pd.size},n.prototype.isEmpty=function(){return this.pd.size<=0},n.prototype.each=function(t){var n=this.pd;this.g.each((function(i,r){return!n.has(i)||!1!==t(r)}))},n.prototype.toArray=function(){var t=this.pd,n=[];return this.g.each((function(i,r){t.has(i)&&n.push([r,i])})),n},n.prototype.toSortedArray=function(){return this.toArray().sort(rD)},n.prototype.toObject=function(){var t=this.pd,n={};return this.g.each((function(i,r){t.has(i)&&(n[r]=i)})),n},n.prototype.toMap=function(){var t=this.pd,n=new Map;return this.g.each((function(i,r){t.has(i)&&n.set(r,i)})),n},n}(t.utils.EventEmitter),uD=function(t){function n(){return t.call(this)||this}return G(n,t),Object.defineProperty(n.prototype,"id",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"order",{get:function(){return Np.ASCENDING},set:function(t){},enumerable:!1,configurable:!0}),n.prototype.apply=function(){},n.prototype.unapply=function(){},n.prototype.isApplied=function(){return!1},n.prototype.get=function(){return null},n.prototype.set=function(t){},n.prototype.toDirty=function(){},n.prototype.update=function(){},Object.defineProperty(n.prototype,"indices",{get:function(){return null},enumerable:!1,configurable:!0}),n.prototype.map=function(t){return t},n.prototype.unmap=function(t){return t},n}(t.utils.EventEmitter),sD=function(n){function i(t){var i=n.call(this)||this;if(i.g=null,i.Jf=i.toAccessor(t),i.$f=new Tp(i),i.pd=[],i.Pd=!1,i.Ud=[],i.Fd=new WeakMap,i.Hr=!!(null==t?void 0:t.reverse),i.Qf=i.toSelection(null==t?void 0:t.selection),i.xb=new Qp(i),i.Dd=new uD,t){var r=t.filter;r&&i.xb.set(r);var e=t.on;if(e)for(var u in e){var s=e[u];s&&i.on(u,s)}}return i.nodes=null==t?void 0:t.nodes,i}return G(i,n),i.prototype.toSelection=function(n){return n instanceof t.utils.EventEmitter?n:St(n)?n(this):this.newSelection(n)},i.prototype.newSelection=function(t){return new eD(this,t)},i.prototype.toAccessor=function(t){return new iD(t)},i.prototype.bind=function(t){this.g=t},Object.defineProperty(i.prototype,"nodes",{get:function(){return this.Gd},set:function(t){this.Gd=t,this.Pd=!0,this.Qf.onNodeChange(t),this.xb.toDirty(),this.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this.Pd&&(this.Pd=!1,this.updateRows(this.Gd)),this.pd},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"supplimentals",{get:function(){return this.Ud},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"accessor",{get:function(){return this.Jf},enumerable:!1,configurable:!0}),i.prototype.updateRows=function(t){var n=this.pd,i=this.Ud,r=this.Fd;if(null!=t){var e=this.Jf,u=this.newRows(t,0,0,n,i,r,this.Hr,e.toChildren,e.hasChildren);u!==n.length&&(n.length=u,i.length=u)}else n.length=0,i.length=0},i.prototype.toSupplimental=function(t,n,i){return t<<2|(n?2:0)|(i?1:0)},i.prototype.newRows=function(t,n,i,r,e,u,s,h,o){for(var a=t.length,c=s?-1:1,f=s?a-1:0;0<=f&&f<a;f+=c){var l=t[f],v=h(l),b=u.has(l),d=this.toSupplimental(i,o(l,v),b);n<r.length?(r[n]=l,e[n]=d):(r.push(l),e.push(d)),n+=1,b&&v&&(n=this.newRows(v,n,i+1,r,e,u,s,h,o))}return n},i.prototype.update=function(t){var n=this.g;n&&n.update(t)},i.prototype.lock=function(){var t=this.g;t&&t.lock()},i.prototype.unlock=function(t){var n=this.g;n&&n.unlock(t)},i.prototype.size=function(){return this.rows.length},i.prototype.get=function(t){var n=this.rows;return 0<=t&&t<n.length?n[t]:null},i.prototype.expand=function(t){var n=this.Fd;return!n.has(t)&&(n.set(t,1),this.Pd=!0,this.xb.toDirty(),this.update(!0),!0)},i.prototype.collapse=function(t){var n=this.Fd;return!!n.has(t)&&(n.delete(t),this.Pd=!0,this.xb.toDirty(),this.update(!0),!0)},i.prototype.isCollapsed=function(t){return!this.Fd.has(t)},i.prototype.isExpanded=function(t){return this.Fd.has(t)},i.prototype.toggle=function(t){return this.isExpanded(t)?this.collapse(t):this.expand(t)},i.prototype.open=function(t){return this.expand(t)},i.prototype.close=function(t){return this.collapse(t)},i.prototype.isOpened=function(t){return this.isExpanded(t)},i.prototype.each=function(t,n,i){var r=this.rows;n=null!=n?Math.max(0,n):0,i=null!=i?Math.min(r.length,i):r.length;for(var e=n;e<i&&!1!==t(r[e],e);++e);},Object.defineProperty(i.prototype,"selection",{get:function(){return this.Qf},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filter",{get:function(){return this.xb},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorter",{get:function(){return this.Dd},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mapped",{get:function(){return this.$f},enumerable:!1,configurable:!0}),i}(t.utils.EventEmitter),hD=function(){function t(t,n){var i,r,e;this.g=t,this.fh=null!==(i=null==n?void 0:n.enable)&&void 0!==i&&i,this.Hd=null===(r=null==n?void 0:n.filterable)||void 0===r||r,this.zd=null===(e=null==n?void 0:n.emittable)||void 0===e||e}return Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this.fh},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFilterable",{get:function(){return this.Hd},set:function(t){this.Hd=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmittable",{get:function(){return this.zd},set:function(t){this.zd=t},enumerable:!1,configurable:!0}),t.prototype.newIteratee=function(t,n){var i=this.g,r=i.column,e=i.columnIndex;if(null!=r&&null!=e){var u=r.getter,s=r.setter;if(this.zd){var h=t.data;return function(t,i){return u(t,e)!==n&&(s(t,e,n),h.emit("change",n,!n,t,i,e,h),!0)}}return function(t){return u(t,e)!==n&&(s(t,e,n),!0)}}return null},t.prototype.execute=function(t){var n,i=null===(n=this.g.header)||void 0===n?void 0:n.table;if(i){var r=this.newIteratee(i,t);if(r){var e=!1;this.Hd?i.data.mapped.each((function(t,n,i,u){r(t,u)&&(e=!0)})):i.data.each((function(t,n){r(t,n)&&(e=!0)})),e&&i.body.update(!0)}}},t}(),oD=function(n){function i(t,i,r,e){var u=n.call(this,e)||this;u.bo=t,u.sd=r,u.ud=i;var s=new hD(u,null==e?void 0:e.check);u.Vd=s,u.Wn=new Lp(u.bo,u,i,u.theme.getEdgeWidth());var h=r.sorting.enable,o=s.isEnabled;if(o||h){u.on(he.tap,(function(t){u.onClick(t)}));var a=u.state;a.lock(),a.set(fp.SORTABLE,h),a.set(fp.CHECKABLE,o),a.unlock()}return u}return G(i,n),Object.defineProperty(i.prototype,"column",{get:function(){return this.sd},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columnIndex",{get:function(){return this.ud},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"header",{get:function(){return this.bo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"check",{get:function(){return this.Vd},enumerable:!1,configurable:!0}),i.prototype.onDown=function(t){this.Wn.onDown(t)||n.prototype.onDown.call(this,t)},i.prototype.onOver=function(t){n.prototype.onOver.call(this,t),this.Wn.onOver(t)},i.prototype.onOut=function(t){n.prototype.onOut.call(this,t),this.Wn.onOut(t)},Object.defineProperty(i.prototype,"sorter",{get:function(){var t=this,n=this.Dd;if(null==n){var i=this.bo;if(!i)return null;var r=i.table;if(!r)return null;n=r.data.sorter,this.Dd=n,this.Wd=this.Wd||function(){t.onSorterChange()},n.on("change",this.Wd)}return n},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"comparator",{get:function(){return this.sd.sorting.comparator||null},enumerable:!1,configurable:!0}),i.prototype.onSorterChange=function(){var t=this.comparator;if(t){var n=this.Dd;if(n){var i=fp.SORTED_ASCENDING,r=fp.SORTED_DESCENDING;n.isApplied()&&n.get()===t?n.order===Np.ASCENDING?this.state.set(i,r):this.state.set(r,i):this.state.removeAll(i,r)}}},i.prototype.toClickPosition=function(n){var i,r=null!==(i=this.Bd)&&void 0!==i?i:this.Bd=new t.Point;return n.data.getLocalPosition(this,r).x},i.prototype.isCheckClicked=function(n){if(n instanceof t.InteractionEvent&&this.Vd.isEnabled){if(!this.isSortable)return!0;var i=this.image.get(1);if(i){var r=this.toClickPosition(n),e=i.object;if(null!=e){var u=e.getLocalBounds(),s=i.margin.horizontal,h=e.x;return h+u.left-s<=r&&r<=h+u.right+s}}}return!1},i.prototype.onClick=function(t){this.state.isActionable&&this.activate(t)},i.prototype.activate=function(t){this.onActivate(t)},i.prototype.onActivate=function(t){this.Wn.isClicked(t)||(this.isCheckClicked(t)?(this.onToggleStart(),this.onToggleEnd()):(this.doSort(t),this.emit("active",this)))},i.prototype.doSort=function(t){if(this.isSortable){var n=this.comparator;if(n){var i=this.sorter;i&&(i.get()===n?i.order===Np.ASCENDING?(i.order=Np.DESCENDING,i.apply()):(i.set(null),i.apply()):(i.set(n),i.order=Np.ASCENDING,i.apply()))}}},Object.defineProperty(i.prototype,"isSortable",{get:function(){return this.sd.sorting.enable},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isResizable",{get:function(){return this.sd.resizable},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isToggle",{get:function(){return this.Vd.isEnabled},enumerable:!1,configurable:!0}),i.prototype.toggle=function(){this.state.isActionable&&this.isToggle&&(this.onToggleStart(),this.onToggleEnd())},i.prototype.onToggleStart=function(){this.state.isActive=!this.state.isActive},i.prototype.onToggleEnd=function(){this.state.isActive?(this.Vd.execute(!0),this.emit("active",this)):(this.Vd.execute(!1),this.emit("inactive",this))},i.prototype.onActivateKeyDown=function(t){this.state.isActionable&&(this.isToggle?this.onToggleStart():this.state.isPressed=!0)},i.prototype.onActivateKeyUp=function(t){this.state.isActionable&&(this.isToggle?this.onToggleEnd():(this.state.isPressed&&this.activate(t),this.state.isPressed=!1))},i.prototype.onKeyDown=function(t){return Qe.isActivateKey(t)&&this.onActivateKeyDown(t),n.prototype.onKeyDown.call(this,t)},i.prototype.onKeyUp=function(t){return Qe.isActivateKey(t)&&this.onActivateKeyUp(t),n.prototype.onKeyUp.call(this,t)},i.prototype.getType=function(){return"DTableHeaderCell"},i.prototype.destroy=function(){var t=this.Dd,i=this.Wd;t&&i&&t.off("change",i),this.Dd=void 0,this.Wd=void 0,n.prototype.destroy.call(this)},i}(Cv),aD=function(t){function n(n,i,r,e,u){var s=t.call(this,i,r,u)||this;return s.Xd=n,s.Ne=e,s.transform.position.y=e,s.initCells(),s}return G(n,t),Object.defineProperty(n.prototype,"table",{get:function(){return this.Xd},enumerable:!1,configurable:!0}),n.prototype.onParentMove=function(n,i,r,e){t.prototype.onParentMove.call(this,n,i,r,e),this.transform.position.y=-i+this.Ne,this.updateFrozenCellPosition(n)},n.prototype.getContentPositionX=function(){var t=this.parent;return t?t.position.x:0},n.prototype.newCell=function(t,n,i,r){return new oD(this,t,n,this.toCellOptions(n,r))},n.prototype.toCellOptions=function(t,n){var i=t.header||(null==n?void 0:n.cell);return null!=i?(void 0===i.weight&&(i.weight=t.weight),void 0===i.width&&(i.width=t.width),void 0===i.text?i.text={value:t.label}:void 0===i.text.value&&(i.text.value=t.label),i):{weight:t.weight,width:t.width,text:{value:t.label}}},n.prototype.getType=function(){return"DTableHeader"},n}(Mp),cD=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.getOffsetVerticalStart=function(t){return.5*t+this.g.body.position.y},n}(Vg),fD=function(t){function n(n){var i=t.call(this,n)||this,r=i.content,e=i.body;r.addChild(e),e.data.selection.type!==Ep.NONE&&i.on(he.tap,(function(t){e.onRowClick(t)}));var u=i.header;u&&r.addChild(u);for(var s=i.categories,h=s.length-1;0<=h;--h)r.addChild(s[h]);return e.update(),i}return G(n,t),Object.defineProperty(n.prototype,"column",{get:function(){var t;return null!==(t=this.sd)&&void 0!==t?t:this.sd=this.newColumn()},enumerable:!1,configurable:!0}),n.prototype.newColumn=function(){var t;return new qp(this,null===(t=this.tu)||void 0===t?void 0:t.columns)},Object.defineProperty(n.prototype,"columns",{get:function(){return this.column.items},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"frozen",{get:function(){return this.column.frozen},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"category",{get:function(){return this.ls=this.newCategory()},enumerable:!1,configurable:!0}),n.prototype.newCategory=function(){var t,n=this.column;return new Pp(n.items,n.frozen,null===(t=this.tu)||void 0===t?void 0:t.category)},Object.defineProperty(n.prototype,"categories",{get:function(){return this.category.items},enumerable:!1,configurable:!0}),n.prototype.initContent=function(n){t.prototype.initContent.call(this,n),n.state.isFocusReverse=!0},n.prototype.onContentChange=function(){t.prototype.onContentChange.call(this),this.body.update()},n.prototype.onResize=function(n,i,r,e){var u=this.scrollbar;u.lock();var s=this.body;s.lock(),t.prototype.onResize.call(this,n,i,r,e),s.update(),s.unlock(!0),u.unlock(!0)},n.prototype.onDblClick=function(n,i){var r=this.body.onDblClick(n,i);return t.prototype.onDblClick.call(this,n,i)||r},n.prototype.newScrollBar=function(t){var n=this;return new cD(this,t,(function(t){n.onScrollBarUpdate(t)}))},n.prototype.newContent=function(n){var i=this,r=t.prototype.newContent.call(this,n),e=this.column,u=e.width;return 0<u?(e.on("resize",(function(){u=e.width;var t=i.width,n=i.height,s=t-Math.max(t,u);r.x<s&&(r.x=s),r.onParentResize(t,n,i.padding)})),r.setWidth((function(t){return Math.max(t,u)}))):r.setWidth("100%"),r},n.prototype.getHeaderOffset=function(){var t=this.Kd;return null==t&&(t=this.newHeaderOffset(),this.Kd=t),t},n.prototype.newHeaderOffset=function(){for(var t=0,n=this.categories,i=0,r=n.length;i<r;++i)t+=n[i].height;return t},Object.defineProperty(n.prototype,"header",{get:function(){var t=this.bo;return void 0===t&&(t=this.newHeader(),this.bo=t),t},enumerable:!1,configurable:!0}),n.prototype.hasHeader=function(t){if(t)for(var n=t.columns,i=0,r=n.length;i<r;++i)if(null!=n[i].label)return!0;return!1},n.prototype.newHeader=function(){var t=this.tu;if(this.hasHeader(t)){var n=this.column;return new aD(this,n.items,n.frozen,this.getHeaderOffset(),null==t?void 0:t.header)}return null},n.prototype.getBodyOffset=function(){var t;return null!==(t=this.Yd)&&void 0!==t?t:this.Yd=this.newBodyOffset()},n.prototype.newBodyOffset=function(){var t,n;return this.getHeaderOffset()+(null!==(n=null===(t=this.header)||void 0===t?void 0:t.height)&&void 0!==n?n:0)},Object.defineProperty(n.prototype,"body",{get:function(){var t;return null!==(t=this.Ri)&&void 0!==t?t:this.Ri=this.newBody()},enumerable:!1,configurable:!0}),n.prototype.newBody=function(){var t=this.tu,n=this.column;return new yp(n.items,n.frozen,this.getBodyOffset(),this.toBodyOptions(null==t?void 0:t.body,null==t?void 0:t.data))},n.prototype.toBodyOptions=function(t,n){return null!=t?(void 0===t.data&&void 0!==n&&(Mt(n)?t.data={rows:n}:t.data=n),void 0===t.height&&void 0===t.weight&&(t.weight=1),t):Mt(n)?{data:{rows:n},weight:1}:{data:n,weight:1}},Object.defineProperty(n.prototype,"data",{get:function(){return this.body.data},enumerable:!1,configurable:!0}),n.prototype.getFocusedChildClippingRect=function(n,i,r,e,u,s,h,o){t.prototype.getFocusedChildClippingRect.call(this,n,i,r,e,u,s,h,o);var a=this.toCell(n);if(a){var c=i+this.toFrozenCellX(a)-o.x;if(0<c&&(o.x+=c,o.width-=c),a.parent.parent===this.body){var f=this.getBodyOffset();o.y+=f,o.height-=f}}return o},n.prototype.toFrozenCellX=function(t){var n=this.frozen;if(0<n){var i=t.parent.children,r=i.indexOf(t);if(0<=r){var e=i.length;if(n<=e-1-r){var u=i[e-n];return u.position.x+u.width}}}return 0},n.prototype.onKeyDown=function(n){Qe.moveFocusHorizontally(n,this);var i=Qe.isArrowUpKey(n),r=Qe.isArrowDownKey(n);return(i||r)&&this.onKeyDownArrowUpOrDown(n,r),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyDownArrowUpOrDown=function(t,n){var i=lt.getLayer(this);if(null==i)return!1;var r=i.getFocusController(),e=r.get();if(null==e)return!1;var u=this.toCell(e);if(null==u)return!1;var s=u.parent;if(null==s)return!1;var h=r.find(s,!1,!1,n,this);if(null==h)return!1;var o=this.toCell(h);if(null==o)return!1;var a=o.parent;if(null==a)return!1;var c=s.children.indexOf(u);if(c<0)return!1;var f=a.children[c];if(null==f||f===u||!("state"in f))return!1;var l=r.find(f,!0,!0,n,this);return null!=l&&(r.focus(l),!0)},n.prototype.toCell=function(t){for(var n=t;null!=n;){var i=n.parent;if(i instanceof Mp)return n instanceof ru?n:null;n=i}return null},n.prototype.getType=function(){return"DTable"},n}(Wg),lD=function(t){var n=t.text;if(Tt(n))return n;var i=t.label;if(Tt(i))return i;var r=t.name;return Tt(r)?r:void 0},vD=function(t){var n=t.title;if(Tt(n))return n},bD=function(t){return t.image},dD=function(t){return t.children},gD=function(t){return t.children=[]},mD=function(t){var n,i,r,e,u;this.toLabel=null!==(n=null==t?void 0:t.toLabel)&&void 0!==n?n:lD,this.toTitle=null!==(i=null==t?void 0:t.toTitle)&&void 0!==i?i:vD,this.toImage=null!==(r=null==t?void 0:t.toImage)&&void 0!==r?r:bD,this.toChildren=null!==(e=null==t?void 0:t.toChildren)&&void 0!==e?e:dD,this.newChildren=null!==(u=null==t?void 0:t.newChildren)&&void 0!==u?u:gD},wD={NONE:0,SINGLE:1,MULTIPLE:2},OD=function(){function t(t,n){this.g=t,this.Gd=[],this.Jd=[],this.Hr=n,this.Pi=!1}return Object.defineProperty(t.prototype,"nodes",{get:function(){return this.update(),this.Gd},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return this.update(),this.Jd},enumerable:!1,configurable:!0}),t.prototype.toDirty=function(){this.Pi=!0},t.prototype.size=function(){return this.update(),this.Gd.length},t.prototype.each=function(t,n,i){this.update();for(var r=this.Gd,e=null!=n?Math.max(0,n):0,u=null!=i?Math.min(r.length,i):r.length,s=e;s<u&&!1!==t(r[s],s);++s);},t.prototype.update=function(){if(this.Pi){this.Pi=!1;var t=this.g,n=t.nodes,i=t.accessor.toChildren,r=this.Gd,e=this.Jd,u=this.newNodes(t,n,0,0,r,e,this.Hr,i);r.length!==u&&(r.length=u,e.length=u)}},t.prototype.newNodes=function(t,n,i,r,e,u,s,h){for(var o=n.length,a=s?-1:1,c=s?o-1:0;0<=c&&c<o;c+=a){var f=n[c];i<e.length?(e[i]=f,u[i]=r):(e.push(f),u.push(r)),i+=1;var l=h(f);l&&t.isExpanded(f)&&(i=this.newNodes(t,l,i,r+1,e,u,s,h))}return i},t}(),pD=function(t){function n(n,i){var r=t.call(this)||this;r.g=n,r.Gd=new Set;var e=null==i?void 0:i.on;if(e)for(var u in e){var s=e[u];s&&r.on(u,s)}return r}return G(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return wD.MULTIPLE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"first",{get:function(){var t=this.Gd;if(0<t.size){var n=null;return t.forEach((function(t){null==n&&(n=t)})),n}return null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){var t=this.Gd;if(0<t.size){var n=null;return t.forEach((function(t){n=t})),n}return null},enumerable:!1,configurable:!0}),n.prototype.get=function(t){var n=this.Gd;if(0<=t&&t<n.size){var i=0,r=null;return n.forEach((function(n){i===t&&(r=n),i+=1})),r}return null},n.prototype.add=function(t){var n=this.Gd;return!n.has(t)&&(n.add(t),this.onChange(),!0)},n.prototype.remove=function(t){var n=this.Gd;return!!n.has(t)&&(n.delete(t),this.onChange(),!0)},n.prototype.toggle=function(t){var n=this.Gd;return n.has(t)?n.delete(t):n.add(t),this.onChange(),!0},n.prototype.clear=function(){var t=this.Gd;return 0<t.size&&(t.clear(),this.onChange(),!0)},n.prototype.clearAndAdd=function(t){var n=this.Gd;return 1===n.size?!n.has(t)&&(n.clear(),n.add(t),this.onChange(),!0):(n.clear(),n.add(t),this.onChange(),!0)},n.prototype.clearAndAddAll=function(t){for(var n=!1,i=new Set,r=this.Gd,e=0,u=t.length;e<u;++e){var s=t[e];r.has(s)||(n=!0),i.add(s)}return n||r.forEach((function(t){i.has(t)||(n=!0)})),n&&(this.Gd=i,this.onChange()),n},n.prototype.contains=function(t){return this.Gd.has(t)},n.prototype.size=function(){return this.Gd.size},n.prototype.isEmpty=function(){return this.Gd.size<=0},n.prototype.each=function(t){var n=!1;this.Gd.forEach((function(i){n||!1===t(i)&&(n=!0)}))},n.prototype.toArray=function(){var t=[];return this.Gd.forEach((function(n){t.push(n)})),t},n.prototype.onChange=function(){this.g.update(),this.emit("change",this)},n.prototype.onNodeChange=function(t){var n=this.Gd;if(0<n.size){var i=this.newNodes(t,n,new Set);n.size!==i.size&&(this.Gd=i,this.onChange())}},n.prototype.newNodes=function(t,n,i){for(var r=this.g.accessor.toChildren,e=0,u=t.length;e<u;++e){var s=t[e];n.has(s)&&i.add(s);var h=r(s);h&&this.newNodes(h,n,i)}return i},n}(t.utils.EventEmitter),DD=function(t){function n(n,i){var r=t.call(this)||this;r.g=n,r.Xe=null;var e=null==i?void 0:i.on;if(e)for(var u in e){var s=e[u];s&&r.on(u,s)}return r}return G(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return wD.SINGLE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"first",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),n.prototype.get=function(t){return 0===t?this.Xe:null},n.prototype.add=function(t){return this.Xe!==t&&(this.Xe=t,this.onChange(),!0)},n.prototype.remove=function(t){return this.Xe===t&&(this.Xe=null,this.onChange(),!0)},n.prototype.toggle=function(t){return this.Xe===t?this.Xe=null:this.Xe=t,this.onChange(),!0},n.prototype.clear=function(){return null!=this.Xe&&(this.Xe=null,this.onChange(),!0)},n.prototype.clearAndAdd=function(t){return this.Xe!==t&&(this.Xe=t,this.onChange(),!0)},n.prototype.clearAndAddAll=function(t){if(0<t.length){var n=t[t.length-1];return this.clearAndAdd(n)}return this.clear()},n.prototype.contains=function(t){return this.Xe===t},n.prototype.size=function(){return null!=this.Xe?1:0},n.prototype.isEmpty=function(){return null==this.Xe},n.prototype.each=function(t){var n=this.Xe;null!=n&&t(n)},n.prototype.toArray=function(){var t=this.Xe;return null!=t?[t]:[]},n.prototype.onChange=function(){this.g.update(),this.emit("change",this)},n.prototype.onNodeChange=function(t){var n=this.Xe;if(null!=n){var i=this.newNode(t,n);n!==i&&(this.Xe=i,this.onChange())}},n.prototype.newNode=function(t,n){for(var i=this.g.accessor.toChildren,r=0,e=t.length;r<e;++r){var u=t[r];if(n===u)return u;var s=i(u);if(s){var h=this.newNode(s,n);if(null!=h)return h}}return null},n}(t.utils.EventEmitter),ED=function(t){function n(n,i){var r=t.call(this)||this;r.g=n;var e=null==i?void 0:i.on;if(e)for(var u in e){var s=e[u];s&&r.on(u,s)}return r}return G(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return wD.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"first",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){return null},enumerable:!1,configurable:!0}),n.prototype.get=function(t){return null},n.prototype.add=function(t){return!1},n.prototype.remove=function(t){return!1},n.prototype.toggle=function(t){return!1},n.prototype.clear=function(){return!1},n.prototype.clearAndAdd=function(t){return!1},n.prototype.clearAndAddAll=function(t){return!1},n.prototype.contains=function(t){return!1},n.prototype.size=function(){return 0},n.prototype.isEmpty=function(){return!0},n.prototype.each=function(t){},n.prototype.toArray=function(){return[]},n.prototype.onNodeChange=function(t){},n}(t.utils.EventEmitter),MD=function(){function t(t,n){this.g=t,this.Zd=new WeakMap,this.Qf=this.toSelection(n),this.Jf=new mD(n);var i=new OD(this,!!(null==n?void 0:n.reverse));this.$f=i;var r=null==n?void 0:n.nodes;null!=r?(this.Gd=r,i.toDirty()):this.Gd=[]}return t.prototype.toSelection=function(t){var n=null==t?void 0:t.selection;switch(null==n?void 0:n.type){case wD.NONE:case"NONE":return new ED(this,n);case wD.MULTIPLE:case"MULTIPLE":return new pD(this,n);default:return new DD(this,n)}},Object.defineProperty(t.prototype,"nodes",{get:function(){return this.Gd},set:function(t){this.Gd=t,this.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapped",{get:function(){return this.$f},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"accessor",{get:function(){return this.Jf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){return this.Qf},enumerable:!1,configurable:!0}),t.prototype.update=function(t){t&&(this.$f.toDirty(),this.Qf.onNodeChange(this.Gd)),this.g.update(t)},t.prototype.toggle=function(t){var n=this.Zd;return n.has(t)?n.delete(t):n.set(t,1),this.$f.toDirty(),this.update(),!0},t.prototype.expand=function(t){var n=this.Zd;return!n.has(t)&&(n.set(t,1),this.$f.toDirty(),this.update(),!0)},t.prototype.collapse=function(t){var n=this.Zd;return!!n.has(t)&&(n.delete(t),this.$f.toDirty(),this.update(),!0)},t.prototype.expandAll=function(){var t=!1,n=this.Zd;return this.each((function(i){n.has(i)||(n.set(i,1),t=!0)})),!!t&&(this.$f.toDirty(),this.update(),!0)},t.prototype.collapseAll=function(){var t=!1,n=this.Zd;return this.each((function(i){n.has(i)&&(n.delete(i),t=!0)})),!!t&&(this.$f.toDirty(),this.update(),!0)},t.prototype.isCollapsed=function(t){return!this.isExpanded(t)},t.prototype.isExpanded=function(t){return this.Zd.has(t)},t.prototype.clear=function(){var t=this.Gd;return 0<t.length&&(t.length=0,this.$f.toDirty(),this.Qf.clear(),this.update(),!0)},t.prototype.remove=function(t){var n=!1;return this.each((function(i,r,e){return i!==t||(e.splice(r,1),n=!0,!1)})),!!n&&(this.$f.toDirty(),this.Qf.remove(t),this.update(),!0)},t.prototype.add=function(t,n){var i=!1;if(n){var r=this.Jf,e=r.toChildren(n);if(e)e.push(t),i=!0;else{var u=r.newChildren(n);u&&(u.push(t),i=!0)}}else{var s=this.Gd;s?s.push(t):this.Gd=[t],i=!0}return i&&(this.$f.toDirty(),this.update()),!0},t.prototype.addBefore=function(t,n){var i=!1;return this.each((function(r,e,u){return r!==n||(u.splice(e,0,t),i=!0,!1)})),i&&(this.$f.toDirty(),this.update()),i},t.prototype.addAfter=function(t,n){var i=!1;return this.each((function(r,e,u){return r!==n||(u.splice(e+1,0,t),i=!0,!1)})),i&&(this.$f.toDirty(),this.update()),i},t.prototype.each=function(t){var n=this.Gd;n&&this.Es(n,null,t)},t.prototype.Es=function(t,n,i){for(var r=this.Jf.toChildren,e=0,u=t.length;e<u;++e){var s=t[e];if(!1===i(s,e,t,n))return;var h=r(s);h&&this.Es(h,s,i)}},t}(),SD={HAS_CHILDREN:"HAS_CHILDREN",OPENED:"OPENED"},jD=function(t){function n(n,i){var r=t.call(this,i)||this;return r.Vt=n,r}return G(n,t),n.prototype.newPadding=function(t,n,i){return new yd(t,n,i)},Object.defineProperty(n.prototype,"node",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"index",{get:function(){return this.Or},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"data",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),n.prototype.toggle=function(){var t=this.Xe;void 0!==t&&this.Vt.toggle(t)},n.prototype.set=function(t,n,i){var r,e=this.Vt,u=i||this.Xe!==t;if(u){this.Xe=t,this.Or=n;var s=e.accessor;this.text=s.toLabel(t),this.title=null!==(r=s.toTitle(t))&&void 0!==r?r:"",this.image=s.toImage(t)}var h=e.mapped.levels[n];this.au.adjLeft(this.theme.getLevelPadding(h));var o=e.accessor.toChildren(t),a=!!(o&&0<o.length),c=this.state;c.lock(),c.set(gt.ACTIVE,e.selection.contains(t)),c.remove(gt.DISABLED),c.set(SD.HAS_CHILDREN,a),c.set(SD.OPENED,e.isExpanded(t)),c.unlock(),u&&this.emit("set",t,n,this)},n.prototype.unset=function(){if(void 0!==this.Xe){this.Xe=void 0,this.Or=void 0,this.text=void 0,this.title="",this.image=void 0;var t=this.state;t.lock(),t.add(gt.DISABLED),t.remove(gt.ACTIVE),t.unlock(),this.emit("unset",this)}},n.prototype.onSelect=function(t,n){var i=this.Vt,r=i.selection;if(r.type!==wD.MULTIPLE)r.clearAndAdd(n);else{var e=t&&"data"in t?t.data.originalEvent:t;if(null==e?void 0:e.ctrlKey)r.toggle(n);else if(null==e?void 0:e.shiftKey){var u=i.mapped,s=r.last;if(n===s)r.clearAndAdd(n);else{var h=!1,o=!1,a=[];u.each((function(t){if(h){if(o){if(a.unshift(t),t===n)return!1}else if(a.push(t),t===s)return!1}else t===n?(h=!0,o=!1,a.push(t)):t===s&&(h=!0,o=!0,a.push(t))})),r.clearAndAddAll(a)}}else r.clearAndAdd(n)}},n.prototype.onKeyDown=function(n){var i;return Qe.isActivateKey(n)&&this.onKeyDownActivate(n),Qe.isArrowRightKey(n)&&void 0!==(i=this.Xe)&&this.state.is(SD.HAS_CHILDREN)&&this.Vt.expand(i),Qe.isArrowLeftKey(n)&&void 0!==(i=this.Xe)&&this.state.is(SD.HAS_CHILDREN)&&this.Vt.collapse(i),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyDownActivate=function(t){if(this.state.isActionable&&this.state.isFocused){var n=this.Xe;return void 0!==n&&this.onSelect(t,n),!0}return!1},n.prototype.getType=function(){return"DTreeItemText"},n}(Rh),TD=function(t){function n(n,i){var r,e=t.call(this,n,i)||this;return e.uo=rr(null!==(r=null==i?void 0:i.when)&&void 0!==r?r:qs.CLICKED,qs),e.on(he.tap,(function(t){e.onClick(t)})),e}return G(n,t),n.prototype.onClick=function(t){this.uo===qs.CLICKED&&this.state.isActionable&&this.activate(t)},n.prototype.onDblClick=function(n,i){return this.uo===qs.DOUBLE_CLICKED&&this.activate(n),t.prototype.onDblClick.call(this,n,i)},n.prototype.activate=function(t){this.onActivate(t)},n.prototype.onActivate=function(t){this.emit("active",this)},n.prototype.onActivateKeyDown=function(t){this.state.isActionable&&(this.state.isPressed=!0)},n.prototype.onActivateKeyUp=function(t){this.state.isActionable&&(this.state.isPressed&&this.activate(t),this.state.isPressed=!1)},n.prototype.onKeyDown=function(n){return Qe.isActivateKey(n)&&this.onActivateKeyDown(n),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyUp=function(n){return Qe.isActivateKey(n)&&this.onActivateKeyUp(n),t.prototype.onKeyUp.call(this,n)},n.prototype.getType=function(){return"DTreeItemButton"},n}(jD),ID=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.onActivate=function(i){t.prototype.onActivate.call(this,i);var r=this.Xe;void 0!==r&&(this.state.is(SD.HAS_CHILDREN)?i&&"data"in i&&(this.toLocal(i.data.global,void 0,n.WORK_CONTAINS_POINT).x<=this.padding.getLeft()?this.toggle():this.onSelect(i,r)):this.onSelect(i,r))},n.prototype.getType=function(){return"DTreeItemNonEditable"},n}(TD),CD=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return G(n,t),n.prototype.toMapped=function(t){return t.mapped},n.prototype.newItem=function(t){return new ID(t)},n}(Mg),ND=function(t){function n(n){var i=t.call(this,n)||this;return i.update(),i}return G(n,t),n.prototype.onContentChange=function(){t.prototype.onContentChange.call(this),this.update()},n.prototype.onResize=function(n,i,r,e){var u=this.updater;u.lock(),t.prototype.onResize.call(this,n,i,r,e),u.update(),u.unlock(!0)},Object.defineProperty(n.prototype,"updater",{get:function(){var t=this.ll;return null==t&&(t=this.newUpdater(this.data,this.content,this.tu),this.ll=t),t},enumerable:!1,configurable:!0}),n.prototype.newUpdater=function(t,n,i){return new CD(t,n,n,null==i?void 0:i.updater)},Object.defineProperty(n.prototype,"data",{get:function(){var t=this.Vt;return null==t&&(t=this.toData(this.tu),this.Vt=t),t},enumerable:!1,configurable:!0}),n.prototype.toData=function(t){var n=t&&(t.data||t.nodes||t.value)||[];return Mt(n)?new MD(this,{nodes:n}):"add"in n?n:new MD(this,n)},n.prototype.update=function(t){this.updater.update(t)},n.prototype.lock=function(){this.updater.lock()},n.prototype.unlock=function(t){this.updater.unlock(t)},Object.defineProperty(n.prototype,"selection",{get:function(){return this.data.selection},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.data.nodes},set:function(t){this.data.nodes=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"nodes",{get:function(){return this.data.nodes},set:function(t){this.data.nodes=t},enumerable:!1,configurable:!0}),n.prototype.toggle=function(t){return this.data.toggle(t)},n.prototype.expand=function(t){return this.data.expand(t)},n.prototype.collapse=function(t){return this.data.collapse(t)},n.prototype.expandAll=function(){return this.data.expandAll()},n.prototype.collapseAll=function(){return this.data.collapseAll()},n.prototype.isCollapsed=function(t){return this.data.isCollapsed(t)},n.prototype.isExpanded=function(t){return this.data.isExpanded(t)},n.prototype.clear=function(){return this.data.clear()},n.prototype.remove=function(t){return this.data.remove(t)},n.prototype.add=function(t,n){return this.data.add(t,n)},n.prototype.addBefore=function(t,n){return this.data.addBefore(t,n)},n.prototype.addAfter=function(t,n){return this.data.addAfter(t,n)},n.prototype.each=function(t){return this.data.each(t)},n.prototype.onKeyDown=function(n){return this.updater.moveFocus(n,this,!0,!1),t.prototype.onKeyDown.call(this,n)},n.prototype.getType=function(){return"DTree"},n}(Wg),AD={__proto__:null,loadAll:Ab,loadMenuItemAll:Nb,loadMenuItemExpandable:cb,loadMenuItem:$v,loadMenuSidedItemExpandable:Cb,loadMenuSidedItem:wb,deserializeActionValue:Ea,EShapeActionBases:wn,EShapeActionEnvironment:On,EShapeActionExpressions:pn,EShapeActionMiscExtensions:Ns,EShapeActionOpenDialogExtensions:Uo,EShapeActionOpenExtensions:Ho,EShapeActionOpenOpeners:je,EShapeActionRuntimeBase:Dn,EShapeActionRuntimeBlinkBrighten:Sn,EShapeActionRuntimeBlinkColorFill:jn,EShapeActionRuntimeBlinkColorStroke:Tn,EShapeActionRuntimeBlinkDarken:In,EShapeActionRuntimeBlinkOpacity:Cn,EShapeActionRuntimeBlinkVisibility:Nn,EShapeActionRuntimeBlink:Mn,EShapeActionRuntimeChangeColorBrightness:Vn,EShapeActionRuntimeChangeColorCode:Xn,EShapeActionRuntimeChangeColor:Un,EShapeActionRuntimeChangeCursor:Yn,EShapeActionRuntimeChangeTextNumber:Ri,EShapeActionRuntimeChangeTextText:yi,EShapeActionRuntimeConditional:En,EShapeActionRuntimeEmitEvent:Qu,EShapeActionRuntimeGestureLayer:ge,EShapeActionRuntimeGestureShape:me,EShapeActionRuntimeMiscEmitEvent:ts,EShapeActionRuntimeMiscExecute:Is,EShapeActionRuntimeMiscExtension:As,EShapeActionRuntimeMiscHtmlElement:as,EShapeActionRuntimeMiscInputInput:gs,EShapeActionRuntimeMiscInputInteger:ws,EShapeActionRuntimeMiscInputNumber:ms,EShapeActionRuntimeMiscInputReal:Os,EShapeActionRuntimeMiscInputText:Ds,EShapeActionRuntimeMiscInput:ds,EShapeActionRuntimeMiscWriteBoth:Ms,EShapeActionRuntimeMiscWriteLocal:Ss,EShapeActionRuntimeMiscWriteRemote:js,EShapeActionRuntimeMiscWrite:Es,EShapeActionRuntimeOpenDialogBoolean:Jh,EShapeActionRuntimeOpenDialogDate:Bo,EShapeActionRuntimeOpenDialogDatetime:Ao,EShapeActionRuntimeOpenDialogExtension:Fo,EShapeActionRuntimeOpenDialogInteger:io,EShapeActionRuntimeOpenDialogReal:uo,EShapeActionRuntimeOpenDialogText:oo,EShapeActionRuntimeOpenDialogTime:ko,EShapeActionRuntimeOpenDialog:Yh,EShapeActionRuntimeOpen:ys,EShapeActionRuntimeShowHideLayer:Ko,EShapeActionRuntimeShowHideShape:Jo,EShapeActionRuntimeShowHide:Wo,EShapeActionRuntimeTransformMoveAbsoluteX:Qo,EShapeActionRuntimeTransformMoveAbsoluteY:$o,EShapeActionRuntimeTransformMoveForwardOrBackward:ta,EShapeActionRuntimeTransformMoveLeftOrRight:na,EShapeActionRuntimeTransformMoveRelativeX:ia,EShapeActionRuntimeTransformMoveRelativeY:ra,EShapeActionRuntimeTransformMove:qo,EShapeActionRuntimeTransformResizeHeightAbsolute:ca,EShapeActionRuntimeTransformResizeHeightRelative:fa,EShapeActionRuntimeTransformResizeSizeAbsolute:la,EShapeActionRuntimeTransformResizeSizeRelative:va,EShapeActionRuntimeTransformResizeWidthAbsolute:ba,EShapeActionRuntimeTransformResizeWidthRelative:da,EShapeActionRuntimeTransformResize:aa,EShapeActionRuntimeTransformRotateAbsolute:wa,EShapeActionRuntimeTransformRotateRelative:Oa,EShapeActionRuntimeTransformRotate:ma,EShapeActionRuntimes:Bu,EShapeActionValueBase:Rn,EShapeActionValueBlinkType:An,EShapeActionValueBlink:xn,EShapeActionValueChangeColorBrightness:Wn,EShapeActionValueChangeColorCode:Kn,EShapeActionValueChangeColorTarget:Pn,EShapeActionValueChangeColorTypeLegacy:Gn,EShapeActionValueChangeColorType:Fn,EShapeActionValueChangeColorTypes:Hn,EShapeActionValueChangeColor:zn,EShapeActionValueChangeCursor:Jn,EShapeActionValueChangeTextType:ki,EShapeActionValueChangeText:Li,EShapeActionValueDeserializers:Ma,EShapeActionValueEmitEvent:$u,EShapeActionValueGestureOperationType:de,EShapeActionValueGestureType:we,EShapeActionValueGesture:pe,EShapeActionValueMiscEmitEvent:Rb,EShapeActionValueMiscExecute:Cs,EShapeActionValueMiscExtension:Rs,EShapeActionValueMiscHtmlElement:yb,EShapeActionValueMiscInput:kb,EShapeActionValueMiscType:Oe,EShapeActionValueMiscWrite:Lb,EShapeActionValueMisc:Ts,EShapeActionValueOnInputAction:vs,EShapeActionValueOnInputActions:bs,EShapeActionValueOpenDialogExtension:Go,EShapeActionValueOpenDialogType:_o,EShapeActionValueOpenDialog:Po,EShapeActionValueOpenExtension:zo,EShapeActionValueOpenType:ks,EShapeActionValueOpen:Ls,EShapeActionValueOpetyped:ea,EShapeActionValueShowHideLayer:Yo,EShapeActionValueShowHideShape:Zo,EShapeActionValueShowHideType:Vo,EShapeActionValueShowHide:Xo,EShapeActionValueSubtyped:yn,EShapeActionValueTransformMoveType:ua,EShapeActionValueTransformMove:ha,EShapeActionValueTransformResizeType:oa,EShapeActionValueTransformResize:ga,EShapeActionValueTransformRotateType:pa,EShapeActionValueTransformRotate:Da,EShapeActionValueTransformType:sa,EShapeActionValueType:kn,EShapeActionValues:Ln,EShapeAction:vt,EShapeActions:qu,loadShapeAll:Iv,loadShapeBar:Aa,loadShapeButton:Za,loadShapeCircle:sc,loadShapeClipperEx:function(){ss=!0},isShapeClipperExLoaded:hs,loadShapeConnectorElbow:uf,loadShapeConnectorLine:sf,loadShapeEmbedded:bf,loadShapeGroupShadowed:Sf,loadShapeGroup:pf,loadShapeImage:Nf,loadShapeLabel:Vf,loadShapeLineOfCircles:Ol,loadShapeLineOfRectangleRoundeds:Sl,loadShapeLineOfRectangles:Nl,loadShapeLineOfTriangleRoundeds:Wl,loadShapeLineOfTriangles:ql,loadShapeLine:Kf,loadShapeNull:nv,loadShapeRectangleRounded:sv,loadShapeRectangle:rv,loadShapeSemicircle:wv,loadShapeTriangleRounded:Tv,loadShapeTriangle:Ev,BAR_VERTEX_COUNT:4,BAR_INDEX_COUNT:2,buildBarIndex:g,buildBarVertexStep:m,buildBarUv:w,CIRCLE_VERTEX_COUNT:9,CIRCLE_INDEX_COUNT:8,CIRCLE_WORLD_SIZE:qa,buildCircleIndex:$a,buildCircleVertex:tc,buildCircleStep:nc,buildCircleUv:ic,buildColor:J,IMAGE_SDF_VERTEX_COUNT:9,IMAGE_SDF_INDEX_COUNT:8,IMAGE_SDF_WORLD_SIZE:Af,buildImageSdfIndex:yf,buildImageSdfStep:kf,buildImageSdfVertex:Lf,buildImageSdfUv:xf,toLineOfAnyPointCount:qf,buildLineOfAnyColor:Qf,toPointCount:cc,toLinePointCount:fc,toLineVertexCount:lc,toLineIndexCount:vc,buildLineIndex:bc,buildLineUv:dc,buildLineVertexStep:gc,buildNullIndex:function(t,n,i,r){for(var e=3*i,u=3*(i+r);e<u;e+=3)t[e+0]=n,t[e+1]=n,t[e+2]=n},buildNullVertex:Yf,buildNullStep:Jf,buildNullUv:Zf,RECTANGLE_ROUNDED_VERTEX_COUNT:Ra,RECTANGLE_ROUNDED_INDEX_COUNT:ya,RECTANGLE_ROUNDED_WORLD_SIZE:ka,buildRectangleRoundedIndex:xa,buildRectangleRoundedVertex:Ba,buildRectangleRoundedStep:_a,buildRectangleRoundedUv:Pa,RECTANGLE_VERTEX_COUNT:_c,RECTANGLE_INDEX_COUNT:8,RECTANGLE_WORLD_SIZE:Pc,buildRectangleIndex:Fc,buildRectangleVertex:Gc,buildRectangleStep:Hc,buildRectangleUv:zc,SEMICIRCLE_VERTEX_COUNT:6,SEMICIRCLE_INDEX_COUNT:4,SEMICIRCLE_WORLD_SIZE:hv,buildSemicircleIndex:av,buildSemicircleVertex:cv,buildSemicircleStep:fv,buildSemicircleUv:lv,TEXT_VERTEX_COUNT:4,TEXT_VERTEX_COUNT_SHIFT:2,TEXT_INDEX_COUNT:2,TEXT_INDEX_COUNT_SHIFT:1,TEXT_FMIN:T,toTextBufferCount:C,buildTextIndex:N,buildTextStep:A,buildTextVertex:y,TRIANGLE_ROUNDED_VERTEX_COUNT:Al,TRIANGLE_ROUNDED_INDEX_COUNT:Rl,TRIANGLE_ROUNDED_WORLD_SIZE:yl,buildTriangleRoundedIndex:Ll,buildTriangleRoundedVertex:xl,buildTriangleRoundedStep:Bl,buildTriangleRoundedUv:_l,TRIANGLE_VERTEX_COUNT:7,TRIANGLE_INDEX_COUNT:3,TRIANGLE_WORLD_SIZE:Mc,buildTriangleIndex:jc,buildTriangleVertex:Tc,buildTriangleStep:Ic,buildTriangleUv:Cc,BuilderBar:ln,BuilderBase:q,BuilderCircle:rc,BuilderImageSdf:Bf,BuilderLabel:Ff,BuilderLineOfAny:rl,BuilderLineOfCircles:bl,BuilderLineOfRectangleRoundeds:pl,BuilderLineOfRectangles:jl,BuilderLineOfTriangleRoundeds:Pl,BuilderLineOfTriangles:Xl,BuilderLine:Ec,BuilderMarkerCircleHead:Lc,BuilderMarkerCircleTail:xc,BuilderMarkerCircle:kc,BuilderMarkerRectangleHead:Xc,BuilderMarkerRectangleTail:Wc,BuilderMarkerRectangle:Vc,BuilderMarkerTriangleHead:Rc,BuilderMarkerTriangleTail:yc,BuilderMarkerTriangle:Ac,BuilderNull:Bc,BuilderRectanglePivoted:hf,BuilderRectangleRounded:Ua,BuilderRectangle:jf,BuilderSemicircle:vv,BuilderText:vn,BuilderTriangleRounded:Mv,BuilderTriangle:Ov,BuilderFlag:Y,toTransformLocalId:Q,toTexture:$,toTextureTransformId:tt,toTextureUvs:nt,copyIndex:el,copyStep:ul,copyUvs:sl,copyVertex:hl,createBarUploaded:bn,createButtonUploaded:Ga,createCircleUploaded:ec,createRectanglePivotedUploaded:of,createGroupUploaded:af,createImageSdfUploaded:_f,createImageSdf:xb,createImage:function(t){return Ia(t).then((function(t){return new If(t)}))},createLabelUploaded:Gf,createLineOfAnyUploaded:dl,createLineOfCirclesUploaded:gl,createLineOfRectangleRoundedsUploaded:Dl,createLineOfRectanglesUploaded:Tl,createLineOfTriangleRoundedsUploaded:Ul,createLineOfTrianglesUploaded:Kl,createLineUploaded:qc,createLine:function(t,n,i,r){for(var e=fr(t,[0,0,0,0]),u=.5*(e[2]+e[0]),s=.5*(e[3]+e[1]),h=e[2]-e[0],o=e[3]-e[1],a=[],c=0,f=t.length;c<f;c+=2)a.push(t[c]-u,t[c+1]-s);var l=new Wf;return l.stroke.set(!0,void 0,void 0,i),l.transform.position.set(u,s),l.size.set(h,o),l.points.set(a,n,r),l},createNullUploaded:Ql,createRectangleRoundedUploaded:Fa,createRectangleUploaded:Tf,createSemicircleUploaded:bv,createTriangleRoundedUploaded:Sv,createTriangleUploaded:pv,deserializeAll:tr,deserializeBar:Na,deserializeBase:Ca,deserializeButton:Xa,deserializeCircle:uc,deserializeConnectorElbow:tf,deserializeConnectorLine:rf,onDeserializedConnectorLine:ef,deserializeEmbeddedAcceptorEdge:vf,deserializeEmbeddedLayer:Ee,deserializeEmbedded:lf,deserializeGradient:ja,deserializeGroupShadowed:Mf,deserializeGroup:Of,deserializeImageSdf:Uf,deserializeImage:Cf,deserializeLabel:zf,deserializeLineOfCircles:wl,deserializeLineOfRectangleRoundeds:Ml,deserializeLineOfRectangles:Cl,deserializeLineOfTriangleRoundeds:Vl,deserializeLineOfTriangles:Zl,deserializeLine:Xf,deserializeNull:tv,deserializeRectanglePivoted:ev,deserializeRectangleRounded:uv,deserializeRectangle:iv,deserializeSemicircle:mv,deserializeTriangleRounded:jv,deserializeTriangle:Dv,deserialize:$i,EShapeBarPoints:at,EShapeBarPosition:ot,EShapeBar:fn,EShapeBaseHitTestData:yt,EShapeBase:Pt,EShapeButtonRuntimeActionToggle:Ya,EShapeButtonRuntimeAction:Ka,EShapeButtonRuntime:Ja,EShapeButton:Wa,EShapeCircle:Gi,EShapeConnectorElbowPointsFiller:Qc,EShapeConnectorElbow:$c,EShapeConnectorLine:kr,EShapeEmbeddedAcceptorEdge:Hi,EShapeEmbeddedAcceptor:ur,EShapeEmbeddedDatum:ir,EShapeEmbeddedLayerContainer:Me,EShapeEmbeddedLayer:re,EShapeEmbedded:qi,EShapeEmbeddeds:Bb,EShapeFillImpl:ut,EShapeGroupFillEditor:df,EShapeGroupFillViewer:Yi,EShapeGroupPoints:gf,EShapeGroupShadowed:Ef,EShapeGroupSizeEditor:Xi,EShapeGroupSizeLayout:Wi,EShapeGroupSizeShadowed:Df,EShapeGroupSizeViewer:Ki,EShapeGroupStrokeEditor:mf,EShapeGroupStrokeViewer:Ji,EShapeGroupViewer:Zi,EShapeGroup:wf,EShapeImageSdf:Pf,EShapeImage:If,EShapeLabel:Hf,EShapeLineBaseHitPart:ct,EShapeLineBase:cn,EShapeLineOfAnyPointsFillImpl:cl,EShapeLineOfAnyPointsImpl:vl,EShapeLineOfAnyPointsPointImpl:fl,EShapeLineOfAnyPointsStrokeImpl:ll,EShapeLineOfCircles:ml,EShapeLineOfRectangleRoundeds:El,EShapeLineOfRectangles:Il,EShapeLineOfTriangleRoundeds:zl,EShapeLineOfTriangles:Jl,EShapeLinePoints:Rr,EShapeLine:Wf,EShapeLockPart:_t,EShapeLock:Bt,EShapeNull:$l,EShapePrimitive:en,EShapeRectanglePivoted:ju,EShapeRectangleRounded:Va,EShapeRectangle:Su,EShapeSemicircle:gv,EShapeStrokeImpl:Ut,EShapeTextAlignImpl:Qt,EShapeTextImpl:nn,EShapeTextOffsetImpl:$t,EShapeTextOutlineImpl:tn,EShapeTriangleRounded:Hl,EShapeTriangle:Yl,hitTestBBox:kt,hitTestCircle:un,hitTestSemicircle:dv,hitTestRectangleRounded:za,hitTestRectangle:sn,hitTestTriangleRounded:Gl,hitTestTriangleFilled:hn,hitTestTriangle:on,isStatic:ol,toComputed:al,toDash:h,toGradientImageUrl:function(t){for(var n=t.direction,i=t.points,r="",e=0,u=i.length;e<u;++e){var s=i[e],h=gn.toCode(s.color),o=s.alpha,a=100*s.position;r+='<stop offset="'.concat(a,'%" stop-color="#').concat(h,'" stop-opacity="').concat(o,'" />')}var c=n*Math.PI/180,f=.5*Math.cos(c),l=-.5*Math.sin(c);return _b('<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><defs>'+'<linearGradient id="o2glkm3aeu2oio" x1="'.concat(.5-f,'" x2="').concat(.5+f,'" y1="').concat(.5-l,'" y2="').concat(.5+l,'">')+r+'</linearGradient></defs><rect x="0" y="0" width="32" height="32" stroke="none" fill="url(#o2glkm3aeu2oio)" /></svg>')},toGradientSerialized:rn,toImageElement:Ia,toLength:S,toResized:function(t,n,i,r,e){var u=zi.contains(t,Lt.POSITION),s=zi.contains(t,Lt.WIDTH),h=zi.contains(t,Lt.HEIGHT);t.lock(_t.UPLOADED);var o=t.transform.position;if(r){var a=Math.abs(i.x-n.x),c=Math.abs(i.y-n.y);if(e){var f=Math.max(a,c),l=Vi(f+f),v=Pb(n.x),b=Pb(n.y),d=t.size;s&&h?d.set(l,l):s?d.x=l:h&&(d.y=l),u&&o.set(v,b)}else{var g=Vi(a+a),m=Vi(c+c);v=Pb(n.x),b=Pb(n.y),d=t.size,s&&h?d.set(g,m):s?d.x=g:h&&(d.y=m),u&&o.set(v,b)}}else if(e){a=i.x-n.x,c=i.y-n.y,f=Math.max(Math.abs(a),Math.abs(c));var w=n.x+(a<0?-f:+f),O=n.y+(c<0?-f:+f),p=.5*f;l=Vi(f),v=Pb(Math.min(n.x,w)+p),b=Pb(Math.min(n.y,O)+p),d=t.size,s&&h?d.set(l,l):s?d.x=l:h&&(d.y=l),u&&o.set(v,b)}else{var D=Math.min(n.x,i.x),E=Math.min(n.y,i.y),M=.5*(a=Math.max(n.x,i.x)-D),S=.5*(c=Math.max(n.y,i.y)-E);g=Vi(a),m=Vi(c),v=Pb(D+M),b=Pb(E+S),d=t.size,s&&h?d.set(g,m):s?d.x=g:h&&(d.y=m),u&&o.set(v,b)}t.unlock(_t.UPLOADED,!0)},toScaleInvariant:o,toSizeNormalized:Vi,toSizeRounded:Pb,toThresholdDefault:an,EShapeAcceptorEdgeSide:Ui,EShapeAcceptorEdgeType:Fi,EShapeAcceptorImpl:er,EShapeAcceptorType:Ub,EShapeAcceptors:sr,EShapeBufferUnitBuilder:Zr,EShapeBufferUnit:Jr,EShapeBuffer:qr,EShapeCapabilities:zi,EShapeCapabilityContainerImpl:xt,EShapeCapability:Lt,EShapeConnectorBodies:nf,EShapeConnectorBodyImpl:yr,EShapeConnectorContainerImpl:bt,EShapeConnectorEdgeAcceptorImpl:hr,EShapeConnectorEdgeContainerImpl:ar,EShapeConnectorEdgeImpl:or,EShapeConnectors:Lr,EShapeContainer:ie,EShapeCopyPart:dt,EShapeCorner:ft,EShapeDataImpl:qt,EShapeDataMapperImpl:Bi,EShapeDataMappingImpl:Yt,EShapeDataScopedImpl:Jt,EShapeDataSystemImpl:Zt,EShapeDataValueExtensions:xu,EShapeDataValueImpl:Kt,EShapeDataValueOrder:Ht,EShapeDataValueRangeImpl:Gt,EShapeDataValueRangeType:Ft,EShapeDataValueScope:Vt,EShapeDataValueState:Wt,EShapeDataValueType:zt,EShapeDefaults:rt,EShapeDeserializers:n,EShapeOnDeserializeds:i,EShapeEditor:function(){this.localTransform=new t.Matrix,this.internalTransform=new t.Matrix,this.internalTransformParentInverse=new t.Matrix,this.rotation=0,this.size=new t.Point},EShapeLayerState:De,toPointsBoundary:fr,eShapePointsFormatterCurveBezierQuadratic:Nr,eShapePointsFormatterCurve:jr,EShapePointsFormatters:Ar,EShapePointsMarkerBase:lr,EShapePointsMarkerContainerImplNoop:ht,EShapePointsMarkerContainerImpl:dr,EShapePointsMarkerHead:vr,EShapePointsMarkerNoop:st,EShapePointsMarkerTail:br,EShapePointsMarkerType:et,EShapePointsStyle:K,EShapePointsStyles:Fb,EShapeRendererIteratorDatum:$r,EShapeRendererIterator:te,EShapeRenderer:ne,EShapeResourceManagerDeserializationMode:Pi,EShapeResourceManagerDeserialization:_i,EShapeResourceManagerSerialization:Gb,EShapeRuntimeImpl:Mu,EShapeRuntimeReset:mn,EShapeRuntimes:Nu,EShapeStateSetImplObservable:At,EShapeState:Nt,EShapeStrokeSide:Z,EShapeStrokeStyle:s,EShapeTextAlignHorizontal:D,EShapeTextAlignVertical:E,EShapeTextDirection:M,EShapeTextWeight:O,EShapeTextStyle:p,EShapeTransformImpl:Rt,EShapeType:r,EShapeUploadedImpl:u,EShapeUploadeds:e,EShapeUuidMappingImpl:Qi,ESnapperGrid:Hb,ESnapperResultScale:function(){this.distance=NaN,this.scale=new t.Point},ESnapperResult:zb,ESnapperTargetValueType:Vb,ESnapperTargetValue:Wb,ESnapperTarget:Xb,ESnapperModifierAnchor:Yb,ESnapper:Jb,DThemes:it,FormatNodeA:Zn,FormatNodea:qn,FormatNodeD:Qn,FormatNoded:$n,FormatNodee:ni,FormatNodef:ii,FormatNodefsi:ri,FormatNodeg:ei,FormatNodeH:ui,FormatNodeh:si,FormatNodeM:hi,FormatNodem:oi,FormatNodemi:ai,FormatNodeP:ci,FormatNodep:fi,FormatNodePadding:li,FormatNodeParenthesis:vi,FormatNodePlus:bi,FormatNodePrecision:ti,FormatNoderd:Si,FormatNodeRP:di,FormatNoderp:gi,FormatNodesdt:mi,FormatNodeSpace:wi,FormatNodessi:Oi,FormatNodeString:pi,FormatNodeY:Di,FormatNodey:Ei,FormatNodez:Mi,FormatNodes:ji,Character:j,DynamicAtlasItemEmpty:Br,DynamicAtlasItemFontAtlas:Ur,DynamicAtlasItemImage:Yr,DynamicAtlasItemText:Zb,DynamicAtlasItemWhite:_r,DynamicAtlasItem:xr,DynamicAtlas:Pr,DynamicFontAtlasCharacterOrigin:Fr,DynamicFontAtlasCharacterType:Hr,DynamicFontAtlasCharacter:Gr,DynamicFontAtlasFont:qb,DynamicFontAtlas:Qb,DynamicFontAtlases:rd,DynamicSDFFontAtlasFont:zr,DynamicSDFFontAtlas:Xr,DynamicSDFFontAtlases:Kr,DynamicSDFFontGenerator:Vr,isArray:Mt,isFunction:St,isNaN:yo,isNumber:jt,isObject:ed,isString:Tt,Lazy:ud,NumberFormatterImpl:Ni,NumberFormatters:Ai,toCeilingIndex:sd,toCloned:hd,toEnum:rr,toId:function(t){if(null!=t){if(Tt(t))return t;if(jt(t))return t;if("id"in t)return t.id;if("name"in t)return t.name;if("label"in t)return t.label}return 0},toIndexOf:cr,toLabel:od,toMerged:ad,toPadded:dn,toString:function(t){return null!=t?String(t):""},toSvgTexture:function(n,i){return t.Texture.from(_b(n),{resolution:i})},toSvgUrl:_b,UtilAlpha:Bn,UtilSvgAtlasBuilder:cd,UtilAttachAlign:xs,UtilAttach:Bs,UtilCharacterIterator:vh,UtilClickOutside:Hs,UtilClipboard:Fv,UtilGestureData:oe,UtilGestureEasingHistory:fe,UtilGestureEasing:le,UtilGestureMode:uu,UtilGestureModifier:ue,UtilGestureModifiers:se,UtilGestureTap:ve,UtilGesture:be,UtilExtract:du,UtilExtractorCanvas:cu,UtilExtractor:fu,UtilFileDownloader:lu,UtilFileAs:fd,UtilFileOpener:ld,UtilFont:Wr,UtilHsv:vd,UtilHtmlElementClipperExImpl:is,UtilHtmlElementClipperExRectsImpl:rs,UtilHtmlElementWhen:es,UtilHtmlElement:us,UtilInputInput:fs,UtilInputNumber:ls,UtilInputTextArea:bd,UtilInputText:ps,UtilInput:cs,UtilKeyboardEvent:Qe,UtilName:dd,UtilOverlay:zs,UtilPointerEvent:he,UtilRgb:gn,UtilRgba:gd,UtilStateBlinker:md,UtilTransition:wd,UtilWheelEvent:Od,DAlignHorizontal:$s,DAlignVertical:th,DAlignWith:Qs,DAnimationBase:ce,DAnimationEmpty:pd,DAnimationFadeIn:Dd,DAnimationTimings:ae,DApplicationLayerOptions:Md,DApplicationLayer:Nd,DApplicationPadding:Ed,DApplication:Rd,DApplications:lt,DBaseAutoSet:tu,DBaseAuto:$e,DBaseBackgroundMeshGeometry:Be,DBaseBackgroundMesh:_e,DBaseBackgroundSnippet:Pe,DBaseBackground:Te,DBaseBorderMeshGeometry:Ue,DBaseBorderMesh:Fe,DBaseBorderSnippet:Ge,DBaseBorder:Ce,DBaseCorner:Ae,DBaseInteractive:Re,DBaseMeshGeometry:xe,DBaseOutlineSnippet:He,DBaseOutline:ye,DBaseOverflowMaskSimple:ch,DBaseOverflowMask:eu,DBasePaddingAdjustable:yd,DBasePadding:ke,DBasePoint:Le,DBaseReflowableContainer:iu,DBaseReflowableImpl:ze,DBaseSnippetContainer:nu,DBaseStateSetBlinkerDatumImpl:wt,DBaseStateSetBlinkerImpl:pt,DBaseStateSetImplObservable:Ct,DBaseStateSetImpl:It,DBaseStateSetSubDatumImp:mt,DBaseStateSetSubImpl:Ot,DBaseStateSetTickerDatumImpl:Dt,DBaseStateSetTickerImpl:Et,DBaseState:gt,DBase:ru,DBoard:kd,DBorderMask:Ie,DButtonAmbient:_h,DButtonBaseWhen:qs,DButtonBase:yh,DButtonCheckRight:xd,DButtonCheck:Ld,DButtonColorGradient:ug,DButtonColor:hg,DButtonDanger:og,DButtonDate:ag,DButtonDatetime:vg,DButtonFileAs:fd,DButtonFile:bg,DButtonGroup:zh,DButtonLink:dg,DButtonPrimary:Lh,DButtonRadioRight:mg,DButtonRadio:gg,DButtonRedo:wg,DButtonSecondary:Og,DButtonSelect:em,DButtonTime:um,DButtonUndo:sm,DButton:kh,DCanvasContainer:au,DCanvas:wu,DChartAxisBaseBar:om,DChartAxisBaseGuideContainer:am,DChartAxisBaseOptionParser:fm,DChartAxisBaseTickContainer:gm,DChartAxisBaseTickMajorGridline:lm,DChartAxisBaseTickMajor:vm,DChartAxisBaseTickMinor:bm,DChartAxisBase:mm,DChartAxisContainerImpl:wm,DChartAxisGuideSimpleShapeImpl:Om,DChartAxisGuideSimple:pm,DChartAxisPosition:hm,DChartAxisTickPosition:cm,DChartAxisXDatetime:Em,DChartAxisX:Dm,DChartAxisY:Mm,DChartColorSet1:function(t){return Sm[t%Sm.length]},DChartColorSet2:Tm,DChartCoordinateBase:Am,DChartCoordinateContainerImpl:ym,DChartCoordinateContainerSubImpl:Rm,DChartCoordinateDirection:Im,DChartCoordinateLinearTick:km,DChartCoordinateLinear:Lm,DChartCoordinateLogTick:xm,DChartCoordinateLog:Bm,DChartCoordinateTransformImpl:Cm,DChartCoordinateTransformMarkImpl:Nm,DChartLegendItem:_m,DChartLegend:Pm,DChartOverview:Um,DChartPlotAreaBase:Fm,DChartPlotAreaContainer:Gm,DChartPlotAreaOnefold:$m,DChartPlotAreaTwofoldAxisContainer:tw,DChartPlotAreaTwofoldCoorinateContainerSub:nw,DChartPlotAreaTwofoldCoorinateContainer:iw,DChartPlotAreaTwofoldOverflowMaskPrimary:rw,DChartPlotAreaTwofoldOverflowMaskSecondary:ew,DChartPlotAreaTwofoldSeriesContainer:uw,DChartPlotAreaTwofoldSubBase:sw,DChartPlotAreaTwofoldSubPrimary:hw,DChartPlotAreaTwofoldSubSecondary:ow,DChartPlotAreaTwofoldViewTargetPoint:aw,DChartPlotAreaTwofoldViewTarget:cw,DChartPlotAreaTwofold:fw,DChartRegionImplObservable:lw,DChartRegionImpl:dm,DChartSelectionContainerImpl:vw,DChartSelectionGridlineX:dw,DChartSelectionGridlineY:gw,DChartSelectionMarker:mw,DChartSelectionShapeBase:bw,DChartSelectionSimple:pw,DChartSelectionSubImpl:Ow,DChartSelectionPoint:ww,DChartSeriesBar:Sw,DChartSeriesBaseCoordinateContainer:Dw,DChartSeriesBase:Ew,DChartSeriesContainerImpl:Qm,DChartSeriesFillComputedImpl:zm,DChartSeriesFillImpl:Wm,DChartSeriesLineOfAny:Mw,DChartSeriesLineOfCircles:jw,DChartSeriesLineOfRectangleRoundeds:Tw,DChartSeriesLineOfRectangles:Iw,DChartSeriesLineOfTriangleRoundeds:Nw,DChartSeriesLineOfTriangles:Cw,DChartSeriesLine:Aw,DChartSeriesExpressionParametersImpl:Rw,DChartSeriesLinear:yw,DChartSeriesPaddingComputedImpl:Xm,DChartSeriesPaddingImpl:Km,DChartSeriesPointComputedImpl:Ym,DChartSeriesPointImpl:Jm,DChartSeriesScalars:Vm,DChartSeriesStrokeComputedImpl:Zm,DChartSeriesStrokeImpl:qm,DChartSeriesHitResult:Hm,DChart:kw,DColorGradientObservable:Pd,DColorGradientPointObservable:Bd,DColorRecent:qd,DColorRecents:Qd,DColorStandard:Jd,DColorStandards:Zd,DColorType:Yd,DCommandBase:Sd,DCommandClear:jd,DCommandCreate:Lw,DCommandSaveAs:xw,DCommandSave:Bw,DContent:xg,DControllerCommandImpl:Td,DControllerFocusImpl:Ad,DControllerKeyboardImpl:Id,DControllers:Cd,DCornerMask:Ne,DDiagramBaseControllerOpenType:xi,DDiagramBase:mu,DDiagramCanvasBase:Cu,DDiagramCanvasBaseShapeImpl:Ru,DDiagramCanvasDataImpl:Au,DDiagramCanvasEditorBackground:Ou,DDiagramCanvasEditorShapeImpl:_w,DDiagramCanvasEditorSnap:Pw,DDiagramCanvasEditor:Uw,DDiagramCanvasTileMappingImpl:Du,DDiagramCanvasTileMappingPointImpl:pu,DDiagramCanvasShapeImpl:yu,DDiagramCanvasTickerImpl:Lu,DDiagramCanvasTile:Eu,DDiagramCanvas:zu,DDiagramDataImpl:Ju,DDiagramDataPrivateImpl:Wu,DDiagramDataRemoteImpl:Ku,DDiagramEditorThumbnail:Fw,DDiagramEditor:Gw,DDiagramLayerContainer:Iu,DDiagramLayer:Tu,DDiagramLayers:ee,DDiagramSerializedVersion:1,DDiagramShape:Vu,DDiagramSnapshot:gu,DDiagramTicker:ku,DDiagram:Zu,DDiagrams:Se,DDialogAlign:xs,DDialogCloseOn:_s,DDialogColorGradient:eg,DDialogColor:sg,DDialogConfirmDelete:Vw,DDialogConfirmDiscard:Ww,DDialogConfirmMessage:Hw,DDialogConfirm:zw,DDialogDate:xo,DDialogDatetime:No,DDialogFittedContent:ao,DDialogFitted:co,DDialogGestureImpl:Us,DDialogGestureMode:Ps,DDialogInputBoolean:Kh,DDialogInputInteger:no,DDialogInputReal:eo,DDialogInputText:ho,DDialogInput:Hh,DDialogLayeredContent:Zs,DDialogLayeredFooter:Bh,DDialogLayeredHeaderButtonClose:Ph,DDialogLayeredHeaderSeparator:Uh,DDialogLayeredHeader:Fh,DDialogLayered:Gh,DDialogMessage:Xw,DDialogMode:Fs,DDialogProcessingMessage:Kw,DDialogProcessing:Yw,DDialogSaveAs:Jw,DDialogSelectListItemUpdater:jg,DDialogSelectListItem:Eg,DDialogSelectList:Kg,DDialogSelectSearhImpl:Yg,DDialogSelect:nm,DDialogState:Gs,DDialogTime:Ro,DDialog:Vs,DDropdownBase:Xd,DDropdown:Zw,DDynamicTextGeometry:gh,DDynamicTextMeasureResultCharacter:fh,DDynamicTextMeasureResult:lh,DDynamicTextMeasure:dh,DDynamicTextStyleWordWrap:bh,DDynamicTextStyle:wh,DDynamicText:mh,DExpandableHeader:qw,DExpandable:Qw,DHtmlElementState:ns,DHtmlElement:Zh,DImageBaseThemeWrapperOther:Mh,DImageBaseThemeWrapperSecondary:Sh,DImageBaseThemeWrapperTertiary:jh,DImageBase:Rh,DImagePieceAlignImpl:Ch,DImagePieceContainerImpl:Ah,DImagePieceImpl:Nh,DImagePieceLayouterPartBottom:ih,DImagePieceLayouterPartCenter:rh,DImagePieceLayouterPartContainer:oh,DImagePieceLayouterPartLeft:eh,DImagePieceLayouterPartMiddle:uh,DImagePieceLayouterPartRight:sh,DImagePieceLayouterPartTop:hh,DImagePieceLayouterPart:nh,DImagePieceLayouter:ah,DImagePieceMarginImpl:Ih,DImagePieceTintImpl:Th,DImage:Cv,DIndicatorProcessingState:$w,DIndicatorProcessing:tO,DInputAndLabel:Fd,DInputBooleanButtonOff:Vh,DInputBooleanButtonOn:Wh,DInputBoolean:Xh,DInputInput:Qh,DInputIntegerAndLabel:nO,DInputInteger:to,DInputLabel:Ud,DInputNumber:$h,DInputRealAndLabel:Gd,DInputReal:ro,DInputSearch:Jg,DInputTextAndLabel:Hd,DInputTextArea:iO,DInputText:so,DInput:qh,DItemUpdater:Mg,DLayoutBoard:rO,DLayoutClearType:Ve,DLayoutDirection:Ws,DLayoutHorizontal:xh,DLayoutSpace:Xs,DLayoutVertical:Js,DLayout:Ys,DLinkMenuItemId:Lv,DLinkMenu:Bv,DLinkTarget:_v,DLink:Gv,DLinks:Hv,DListDataImpl:Lg,DListDataMappedImpl:Tg,DListDataSelectionMultiple:Ig,DListDataSelectionNone:Cg,DListDataSelectionSingle:Ng,DListDataSelectionType:pg,DListItemAccessorImpl:kg,DListItemAmbient:eO,DListItemUpdater:Sg,DListItem:Dg,DList:Xg,DMapCoordinateEPSG3857:uO,DMapCoordinates:sO,DMapTilePlane:oO,DMapTilePyramidImpl:aO,DMapTileUrlBuilderKokudo:function(t,n,i){return 5<=t?"https://cyberjapandata.gsi.go.jp/xyz/pale/".concat(t,"/").concat(n,"/").concat(i,".png"):2<=t?"https://cyberjapandata.gsi.go.jp/xyz/std/".concat(t,"/").concat(n,"/").concat(i,".png"):"https://cyberjapandata.gsi.go.jp/xyz/earthhillshade/".concat(t,"/").concat(n,"/").concat(i,".png")},DMapTileUrlBuilderOsm:function(t,n,i){return"https://".concat("abc"[(n+i)%3],".tile.openstreetmap.org/").concat(t,"/").concat(n,"/").concat(i,".png")},DMapTileUrlBuilderOsmfj:cO,DMapTilePyramids:fO,DMapTile:hO,DMenuAlign:xs,DMenuBarItem:lO,DMenuBar:vO,DMenuContext:Vd,DMenuItemBase:Nv,DMenuItemCheckIsCompatible:kv,DMenuItemCheck:yv,DMenuItemExpandableBody:tb,DMenuItemExpandableHeader:nb,DMenuItemExpandableIsCompatible:eb,DMenuItemExpandableItemCheck:ub,DMenuItemExpandableItemLink:sb,DMenuItemExpandableItemMenu:Mb,DMenuItemExpandableItemSeparator:hb,DMenuItemExpandableItemSpace:ob,DMenuItemExpandableItemText:ab,DMenuItemExpandable:rb,DMenuItemExpandables:ib,DMenuItemLinkIsCompatible:Vv,DMenuItemLink:zv,DMenuItemMenuIsCompatible:Xv,DMenuItemMenuToSubMenuOptions:Kv,DMenuItemMenu:Wv,DMenuItemSeparatorReflowable:Yv,DMenuItemSeparatorIsCompatible:Jv,DMenuItemSeparator:Zv,DMenuItemSpaceIsCompatible:Qv,DMenuItemSpace:qv,DMenuItemText:Rv,DMenuItem:Av,DMenuSidedContent:bO,DMenuSidedItemCheck:fb,DMenuSidedItemExpandableItemCheck:Db,DMenuSidedItemExpandableItemLink:Eb,DMenuSidedItemExpandableItemMenu:Sb,DMenuSidedItemExpandableItemSeparator:jb,DMenuSidedItemExpandableItemSpace:Tb,DMenuSidedItemExpandableItemText:Ib,DMenuSidedItemExpandable:pb,DMenuSidedItemExpandables:Ob,DMenuSidedItemLink:lb,DMenuSidedItemMenu:vb,DMenuSidedItemSeparator:bb,DMenuSidedItemSpace:db,DMenuSidedItemText:gb,DMenuSidedSelectionType:dO,DMenuSidedSelection:mO,DMenuSided:wO,DMenuSideds:mb,DMenu:Wd,DMenus:xv,DNoteError:OO,DNoteNoItemsFound:pO,DNoteSearching:DO,DNoteSmallError:Qg,DNoteSmallNoItemsFound:$g,DNoteSmallSearching:tm,DNoteSmall:qg,DNote:Zg,DNotification:EO,DPaginationButtonLast:MO,DPaginationButtonNext:SO,DPaginationButtonPage:jO,DPaginationButtonPrevious:TO,DPaginationButtonTop:IO,DPaginationDots:CO,DPaginationPage:NO,DPagination:AO,DPaneScrollBar:Vg,DPane:Wg,DPickerColorAndAlpha:zd,DPickerColorGradientRecent:ng,DPickerColorGradientView:ig,DPickerColorGradient:rg,DPickerColor:$d,DPickerDate:Lo,DPickerDates:cg,DPickerDatetimeButtonBack:fo,DPickerDatetimeButtonDate:lo,DPickerDatetimeButtonNext:vo,DPickerDatetimeLabelDate:mo,DPickerDatetimeLabel:go,DPickerDatetimeMask:Oo,DPickerDatetimeMasks:po,DPickerDatetimeRange:RO,DPickerDatetimeSpace:wo,DPickerDatetime:Co,DPickerDatetimes:lg,DPickerTimeBoundHours:Eo,DPickerTimeBoundMinutes:Mo,DPickerTimeBoundSeconds:So,DPickerTimeBound:Do,DPickerTimeBounds:jo,DPickerTimeRange:yO,DPickerTime:Io,DPickerTimes:fg,DScalarExpressionNodeType:We,DScalarExpression:Xe,DScalarFunctions:qe,DScrollBarHorizontal:Fg,DScrollBarThumbHorizontal:Ug,DScrollBarThumbReflowableHorizontal:Pg,DScrollBarThumbReflowableVertical:Gg,DScrollBarThumbVertical:Hg,DScrollBarThumb:_g,DScrollBarVertical:zg,DScrollBar:Bg,DSelectMultiple:kO,DSelect:Kd,DShadowImpl:LO,DSliderHorizontal:GO,DSliderLabel:xO,DSliderThumb:BO,DSliderTrackHorizontal:FO,DSliderTrackVertical:HO,DSliderTrack:UO,DSliderValue:_O,DSliderVertical:zO,DSlider:PO,DTableBodyCellActionDialog:XO,DTableBodyCellActionMenu:KO,DTableBodyCellActionPromise:JO,DTableBodyCellButton:qO,DTableBodyCellCheck:tp,DTableBodyCellColor:np,DTableBodyCellDate:ip,DTableBodyCellDatetime:rp,DTableBodyCellIndex:ep,DTableBodyCellInputInteger:up,DTableBodyCellInputReal:sp,DTableBodyCellInputTextArea:hp,DTableBodyCellInputText:op,DTableBodyCellInputTreeInput:ap,DTableBodyCellInputTreeMarker:cp,DTableBodyCellInputTree:lp,toLinkOptions:vp,toUrl:bp,toChecker:dp,DTableBodyCellLink:gp,DTableBodyCellSelectDialog:WO,DTableBodyCellSelectMenu:mp,DTableBodyCellSelectMultiple:wp,DTableBodyCellSelectPromise:YO,DTableBodyCellTextArea:Op,DTableBodyCellText:ZO,DTableBodyCellTime:pp,DTableBodyCellTree:Dp,DTableBodyCells:VO,DTableBodyRow:Sp,DTableBody:yp,DTableCategoryCell:xp,DTableCategoryColumnImpl:Bp,DTableCategoryContainerImpl:Pp,DTableCategory:_p,DTableCellEdgeHovered:kp,DTableCellEdge:Lp,DTableColumnContainerImpl:qp,DTableColumnImpl:Zp,DTableColumnType:QO,DTableColumnUpdate:$O,DTableDataListFilter:jp,DTableDataListMapped:Tp,DTableDataListSelection:Cp,DTableDataListSorter:Ap,DTableDataList:Rp,DTableDataSelectionType:Ep,DTableDataOrder:Np,DTableDataTreeFilter:Qp,DTableDataTreeItemAccessor:iD,DTableDataTreeSelectionImpl:eD,DTableDataTreeSorter:uD,DTableDataTree:sD,DTableHeaderCellCheck:hD,DTableHeaderCell:oD,DTableHeader:aD,DTableRow:Mp,DTableScrollBar:cD,DTableState:fp,DTable:fD,DTextBase:Eh,DTextPieceAlignImpl:Oh,DTextPieceImpl:Dh,DTextPieceStyleImpl:ph,DText:bo,DTreeDataImpl:MD,DTreeDataMappedImpl:OD,DTreeDataSelectionMultiple:pD,DTreeDataSelectionNone:ED,DTreeDataSelectionSingle:DD,DTreeDataSelectionType:wD,DTreeItemButton:TD,DTreeItemNonEditable:ID,DTreeItemState:SD,DTreeItemText:jD,DTreeItemUpdater:CD,DTreeNodeAccessorImpl:mD,DTree:ND,DViewGestureImpl:su,DViewImpl:ou,DViewTransformImpl:hu};Ab();var RD=window;RD.wcardinal=RD.wcardinal||{},RD.wcardinal.ui=AD}(PIXI);
//# sourceMappingURL=wcardinal-ui.min.js.map
