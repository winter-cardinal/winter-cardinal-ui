{"version":3,"file":"wcardinal-ui.min.js","sources":["../../../node_modules/tslib/tslib.es6.js","wcardinal/ui/d-applications.ts","wcardinal/ui/d-border.ts","wcardinal/ui/util/util-is-function.ts","wcardinal/ui/d-base-background.ts","wcardinal/ui/util/util-is-string.ts","wcardinal/ui/d-corner.ts","wcardinal/ui/d-base-border.ts","wcardinal/ui/util/util-is-number.ts","wcardinal/ui/d-base-interactive.ts","wcardinal/ui/d-base-corner.ts","wcardinal/ui/d-base-outline.ts","wcardinal/ui/d-base-state.ts","wcardinal/ui/d-base-padding.ts","wcardinal/ui/d-base-point.ts","wcardinal/ui/d-base-background-mesh-geometry.ts","wcardinal/ui/d-base-background-mesh.ts","wcardinal/ui/d-base-border-mesh-geometry.ts","wcardinal/ui/d-base-border-mesh.ts","wcardinal/ui/d-base-outline-mesh.ts","wcardinal/ui/d-base-reflowable.ts","wcardinal/ui/d-base-states.ts","wcardinal/ui/d-command-flag.ts","wcardinal/ui/d-command-clear.ts","wcardinal/ui/d-scalar-expression.ts","wcardinal/ui/d-command-redo.ts","wcardinal/ui/d-command-undo.ts","wcardinal/ui/d-controller-default-command.ts","wcardinal/ui/d-controller-default-focus.ts","wcardinal/ui/util/util-keyboard-event.ts","wcardinal/ui/d-controller-keyboard.ts","wcardinal/ui/d-controllers.ts","wcardinal/ui/d-coordinates.ts","wcardinal/ui/d-scalar-functions.ts","wcardinal/ui/d-layout-clear-type.ts","wcardinal/ui/theme/d-themes.ts","wcardinal/ui/d-align-horizontal.ts","wcardinal/ui/d-align-vertical.ts","wcardinal/ui/d-align-with.ts","wcardinal/ui/util/util-name.ts","wcardinal/ui/util/util-pointer-event.ts","wcardinal/ui/d-base.ts","wcardinal/ui/d-dynamic-text-geometry.ts","wcardinal/ui/d-dynamic-text-style.ts","wcardinal/ui/util/ascii.ts","wcardinal/ui/util/dynamic-font-atlas-chaaracter-origin.ts","wcardinal/ui/util/dynamic-font-atlas-character.ts","wcardinal/ui/util/dynamic-font-atlas-font.ts","wcardinal/ui/util/dynamic-font-atlas.ts","wcardinal/ui/util/dynamic-font-atlases.ts","wcardinal/ui/d-dynamic-text.ts","wcardinal/ui/d-base-overflow-mask-simple.ts","wcardinal/ui/d-text-base.ts","wcardinal/ui/d-image-base.ts","wcardinal/ui/d-image.ts","wcardinal/ui/d-list-item.ts","wcardinal/ui/d-menu-item.ts","wcardinal/ui/d-menu-item-text.ts","wcardinal/ui/d-menu-item-check.ts","wcardinal/ui/d-menus.ts","wcardinal/ui/util/dynamic-atlas-item.ts","wcardinal/ui/util/dynamic-atlas-item-empty.ts","wcardinal/ui/util/dynamic-atlas-item-font-atlas.ts","wcardinal/ui/util/dynamic-atlas-item-image.ts","wcardinal/ui/util/dynamic-atlas-item-text.ts","wcardinal/ui/util/dynamic-atlas-item-white.ts","wcardinal/ui/util/dynamic-atlas.ts","wcardinal/ui/util/dynamic-sdf-font-generator.ts","wcardinal/ui/util/dynamic-sdf-font-atlas.ts","wcardinal/ui/util/dynamic-sdf-font-atlases.ts","wcardinal/ui/util/lazy.ts","wcardinal/ui/util/format-node/format-node-a-large.ts","wcardinal/ui/util/format-node/format-node-a-small.ts","wcardinal/ui/util/format-node/format-node-d-large.ts","wcardinal/ui/util/format-node/format-node-d-small.ts","wcardinal/ui/util/format-node/format-node-precision.ts","wcardinal/ui/util/format-node/format-node-e.ts","wcardinal/ui/util/format-node/format-node-f.ts","wcardinal/ui/util/format-node/format-node-fsi.ts","wcardinal/ui/util/format-node/format-node-g.ts","wcardinal/ui/util/format-node/format-node-h-large.ts","wcardinal/ui/util/format-node/format-node-h-small.ts","wcardinal/ui/util/format-node/format-node-m-large.ts","wcardinal/ui/util/format-node/format-node-m-small.ts","wcardinal/ui/util/format-node/format-node-mi.ts","wcardinal/ui/util/format-node/format-node-p-large.ts","wcardinal/ui/util/format-node/format-node-p-small.ts","wcardinal/ui/util/util-pad.ts","wcardinal/ui/util/format-node/format-node-padding.ts","wcardinal/ui/util/format-node/format-node-parenthesis.ts","wcardinal/ui/util/format-node/format-node-plus.ts","wcardinal/ui/util/format-node/format-node-rp-large.ts","wcardinal/ui/util/format-node/format-node-rp-small.ts","wcardinal/ui/util/format-node/format-node-sdt.ts","wcardinal/ui/util/format-node/format-node-space.ts","wcardinal/ui/util/format-node/format-node-ssi.ts","wcardinal/ui/util/format-node/format-node-string.ts","wcardinal/ui/util/format-node/format-node-y-large.ts","wcardinal/ui/util/format-node/format-node-y-small.ts","wcardinal/ui/util/format-node/format-node-z.ts","wcardinal/ui/util/format-node/format-noder-d.ts","wcardinal/ui/util/format-node/format-nodes.ts","wcardinal/ui/util/number-formatter-impl.ts","wcardinal/ui/util/number-formatters.ts","wcardinal/ui/util/util-alpha.ts","wcardinal/ui/resource/svg-resource.ts","wcardinal/ui/util/util-to-svg-url.ts","wcardinal/ui/util/util-atlas-builder.ts","wcardinal/ui/util/util-attach.ts","wcardinal/ui/d-mouse-modifier.ts","wcardinal/ui/util/util-click-outside.ts","wcardinal/ui/util/util-clipboard.ts","wcardinal/ui/util/util-drag-easing-history.ts","wcardinal/ui/d-animation-timings.ts","wcardinal/ui/d-animation-base.ts","wcardinal/ui/util/util-drag-easing.ts","wcardinal/ui/d-mouse-modifiers.ts","wcardinal/ui/util/util-file-opener.ts","wcardinal/ui/util/util-drag.ts","wcardinal/ui/util/util-extractor.ts","wcardinal/ui/util/util-file-downloader.ts","wcardinal/ui/util/util-extract.ts","wcardinal/ui/d-menu-item-link.ts","wcardinal/ui/util/util-hsv.ts","wcardinal/ui/util/util-index-of.ts","wcardinal/ui/util/util-is-array.ts","wcardinal/ui/util/util-is-nan.ts","wcardinal/ui/util/util-promise.ts","wcardinal/ui/util/util-rgb.ts","wcardinal/ui/util/util-rgba.ts","wcardinal/ui/util/util-texture-plane.ts","wcardinal/ui/util/util-texture.ts","wcardinal/ui/util/util-to-string.ts","wcardinal/ui/util/util-transition.ts","wcardinal/ui/util/util-wheel-event.ts","wcardinal/ui/d-layout.ts","wcardinal/ui/d-menu-align.ts","wcardinal/ui/d-menu-item-menu.ts","wcardinal/ui/d-list-item-separator-reflowable.ts","wcardinal/ui/d-list-item-separator.ts","wcardinal/ui/d-menu-item-separator.ts","wcardinal/ui/d-layout-space.ts","wcardinal/ui/d-menu-item-space.ts","wcardinal/ui/load/load-menu-item.ts","wcardinal/ui/shape/e-shape-type.ts","wcardinal/ui/d-layout-vertical.ts","wcardinal/ui/d-menu-item-expandable-body.ts","wcardinal/ui/d-menu-item-expandable-header.ts","wcardinal/ui/d-menu-item-expandables.ts","wcardinal/ui/d-menu-item-expandable.ts","wcardinal/ui/d-menu-item-expandable-item-check.ts","wcardinal/ui/d-menu-item-expandable-item-link.ts","wcardinal/ui/d-menu-item-expandable-item-separator.ts","wcardinal/ui/d-menu-item-expandable-item-space.ts","wcardinal/ui/d-menu-item-expandable-item-text.ts","wcardinal/ui/load/load-menu-item-expandable.ts","wcardinal/ui/d-menu-sided-item-check.ts","wcardinal/ui/d-menu-sided-item-link.ts","wcardinal/ui/d-menu-sided-item-menu.ts","wcardinal/ui/d-menu-sided-item-separator.ts","wcardinal/ui/d-menu-sided-item-space.ts","wcardinal/ui/d-menu-sided-item-text.ts","wcardinal/ui/d-menu-sideds.ts","wcardinal/ui/load/load-menu-sided-item.ts","wcardinal/ui/d-menu-sided-item-expandables.ts","wcardinal/ui/d-menu-sided-item-expandable.ts","wcardinal/ui/d-menu-sided-item-expandable-item-check.ts","wcardinal/ui/d-menu-sided-item-expandable-item-link.ts","wcardinal/ui/d-menu-item-expandable-item-menu.ts","wcardinal/ui/d-menu-sided-item-expandable-item-menu.ts","wcardinal/ui/d-menu-sided-item-expandable-item-separator.ts","wcardinal/ui/d-menu-sided-item-expandable-item-space.ts","wcardinal/ui/d-menu-sided-item-expandable-item-text.ts","wcardinal/ui/load/load-menu-sided-item-expandable.ts","wcardinal/ui/load/load-menu-item-all.ts","wcardinal/ui/shape/e-shape-deserializers.ts","wcardinal/ui/shape/e-shape-uploadeds.ts","wcardinal/ui/shape/e-shape-points.ts","wcardinal/ui/shape/e-shape-points-style-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-bar-position.ts","wcardinal/ui/shape/variant/e-shape-bar-points.ts","wcardinal/ui/shape/e-shape-corner.ts","wcardinal/ui/shape/e-shape-stroke.ts","wcardinal/ui/shape/e-shape-defaults.ts","wcardinal/ui/shape/e-shape.ts","wcardinal/ui/shape/e-shape-runtime.ts","wcardinal/ui/shape/action/e-shape-action.ts","wcardinal/ui/shape/e-shape-tag-value.ts","wcardinal/ui/shape/e-shape-tag-value-range.ts","wcardinal/ui/shape/e-shape-transform.ts","wcardinal/ui/shape/variant/e-shape-gradients.ts","wcardinal/ui/shape/variant/e-shape-base.ts","wcardinal/ui/shape/variant/e-shape-fill-impl.ts","wcardinal/ui/shape/variant/e-shape-stroke-impl.ts","wcardinal/ui/shape/variant/e-shape-tag-value-range-impl.ts","wcardinal/ui/shape/e-shape-text.ts","wcardinal/ui/shape/e-shape-text-align-horizontal.ts","wcardinal/ui/shape/e-shape-text-align-vertical.ts","wcardinal/ui/shape/e-shape-text-direction.ts","wcardinal/ui/shape/variant/e-shape-tag-value-impl.ts","wcardinal/ui/shape/variant/e-shape-tag-impl.ts","wcardinal/ui/shape/variant/e-shape-text-align-impl.ts","wcardinal/ui/shape/action/e-shape-action-value-blink-type.ts","wcardinal/ui/shape/variant/e-shape-text-offset-impl.ts","wcardinal/ui/shape/variant/e-shape-text-outline-impl.ts","wcardinal/ui/shape/variant/e-shape-text-impl.ts","wcardinal/ui/shape/variant/e-shape-primitive.ts","wcardinal/ui/shape/variant/e-shape-line-base.ts","wcardinal/ui/shape/variant/e-shape-bar.ts","wcardinal/ui/shape/e-shape-uploaded.ts","wcardinal/ui/shape/variant/e-shape-text-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-text-uploaded.ts","wcardinal/ui/shape/variant/e-shape-bar-uploaded.ts","wcardinal/ui/shape/variant/e-shape-bar-uploadeds.ts","wcardinal/ui/shape/action/e-shape-action-bases.ts","wcardinal/ui/shape/action/e-shape-action-runtime.ts","wcardinal/ui/shape/action/e-shape-action-runtime-conditional.ts","wcardinal/ui/shape/action/e-shape-action-runtime-blink.ts","wcardinal/ui/shape/action/e-shape-action-runtime-blink-brighten.ts","wcardinal/ui/shape/action/e-shape-action-runtime-blink-color-fill.ts","wcardinal/ui/shape/action/e-shape-action-runtime-blink-color-stroke.ts","wcardinal/ui/shape/action/e-shape-action-runtime-blink-darken.ts","wcardinal/ui/shape/action/e-shape-action-runtime-blink-opacity.ts","wcardinal/ui/shape/action/e-shape-action-runtime-blink-visibility.ts","wcardinal/ui/shape/action/e-shape-action-value-base.ts","wcardinal/ui/shape/action/e-shape-action-value-type.ts","wcardinal/ui/shape/action/e-shape-action-value-subtyped.ts","wcardinal/ui/shape/action/e-shape-action-values.ts","wcardinal/ui/shape/action/e-shape-action-value-change-color-type.ts","wcardinal/ui/shape/action/e-shape-action-value-blink.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color.ts","wcardinal/ui/shape/action/e-shape-action-value-change-text-type.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-all.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-fill.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-fill-and-stroke.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-stroke.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-text.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-text-outline.ts","wcardinal/ui/shape/action/e-shape-action-value-change-color.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-brightness.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-brightness-all.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-brightness-fill.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-brightness-fill-and-stroke.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-brightness-stroke.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-brightness-text.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-brightness-text-outline.ts","wcardinal/ui/shape/action/e-shape-action-value-change-color-brightness.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-code.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-code-all.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-code-fill.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-code-fill-and-stroke.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-code-stroke.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-code-text.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-code-text-outline.ts","wcardinal/ui/shape/action/e-shape-action-value-change-color-code.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-cursor.ts","wcardinal/ui/shape/action/e-shape-action-value-change-cursor.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-text-number.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-text-text.ts","wcardinal/ui/shape/action/e-shape-action-value-change-text.ts","wcardinal/ui/shape/action/e-shape-action-value-misc-type.ts","wcardinal/ui/shape/action/e-shape-action-runtime-emit-event.ts","wcardinal/ui/shape/action/e-shape-action-value-emit-event.ts","wcardinal/ui/shape/action/e-shape-action-runtime-misc-input-data.ts","wcardinal/ui/shape/action/e-shape-action-runtime-misc-input.ts","wcardinal/ui/shape/action/e-shape-action-value-misc.ts","wcardinal/ui/shape/action/e-shape-action-value-open-type.ts","wcardinal/ui/shape/action/e-shape-action-runtime-open.ts","wcardinal/ui/shape/action/e-shape-action-runtime-open-flow.ts","wcardinal/ui/shape/action/e-shape-action-runtime-open-page.ts","wcardinal/ui/shape/action/e-shape-action-runtime-open-page-inplace.ts","wcardinal/ui/shape/action/e-shape-action-value-open.ts","wcardinal/ui/shape/action/e-shape-action-value-show-hide-type.ts","wcardinal/ui/shape/action/e-shape-action-runtime-show-hide.ts","wcardinal/ui/shape/action/e-shape-action-value-transform-move-type.ts","wcardinal/ui/shape/action/e-shape-action-value-transform-type.ts","wcardinal/ui/shape/action/e-shape-action-value-show-hide.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-move.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-move-absolute-x.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-move-absolute-y.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-move-forward-or-backward.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-move-left-or-right.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-move-relative-x.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-move-relative-y.ts","wcardinal/ui/shape/action/e-shape-action-value-opetyped.ts","wcardinal/ui/shape/action/e-shape-action-value-transform-move.ts","wcardinal/ui/shape/action/e-shape-action-value-transform-resize-type.ts","wcardinal/ui/shape/e-shape-sizes.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-resize.ts","wcardinal/ui/shape/action/e-shape-action-value-transform-rotate-type.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-resize-height-absolute.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-resize-height-relative.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-resize-size-absolute.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-resize-size-relative.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-resize-width-absolute.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-resize-width-relative.ts","wcardinal/ui/shape/action/e-shape-action-value-transform-resize.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-rotate.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-rotate-absolute.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-rotate-relative.ts","wcardinal/ui/shape/action/e-shape-action-value-transform-rotate.ts","wcardinal/ui/shape/e-shape-capability.ts","wcardinal/ui/shape/action/e-shape-action-value-deserializer.ts","wcardinal/ui/shape/e-shape-image-elements.ts","wcardinal/ui/shape/e-shape-resource-manager-deserialization.ts","wcardinal/ui/shape/e-shape-deserializer.ts","wcardinal/ui/shape/variant/e-shape-bars.ts","wcardinal/ui/load/load-shape-bar.ts","wcardinal/ui/shape/variant/e-shape-circle-uploaded.ts","wcardinal/ui/shape/variant/e-shape-circle-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-circle.ts","wcardinal/ui/shape/variant/e-shape-circles.ts","wcardinal/ui/load/load-shape-circle.ts","wcardinal/ui/shape/variant/e-shape-group-uploaded.ts","wcardinal/ui/shape/variant/e-shape-group-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-group-fill-editor.ts","wcardinal/ui/shape/variant/e-shape-group-points.ts","wcardinal/ui/shape/e-shape-editor.ts","wcardinal/ui/shape/e-shape-transforms.ts","wcardinal/ui/shape/variant/e-shape-group-size-layout.ts","wcardinal/ui/shape/variant/e-shape-group-size-editor.ts","wcardinal/ui/shape/variant/e-shape-group-size-viewer.ts","wcardinal/ui/shape/variant/e-shape-group-stroke-editor.ts","wcardinal/ui/shape/variant/e-shape-group-text-align-editor.ts","wcardinal/ui/shape/variant/e-shape-group-text-offset-editor.ts","wcardinal/ui/shape/variant/e-shape-group-text-outline-editor.ts","wcardinal/ui/shape/variant/e-shape-group-text-padding-editor.ts","wcardinal/ui/shape/variant/e-shape-group-text-spacing-editor.ts","wcardinal/ui/shape/variant/e-shape-group-text-editor.ts","wcardinal/ui/shape/variant/e-shape-group.ts","wcardinal/ui/shape/variant/e-shape-groups.ts","wcardinal/ui/load/load-shape-group.ts","wcardinal/ui/shape/variant/e-shape-group-size-shadowed.ts","wcardinal/ui/shape/variant/e-shape-group-shadowed.ts","wcardinal/ui/shape/variant/e-shape-group-shadoweds.ts","wcardinal/ui/load/load-shape-group-shadowed.ts","wcardinal/ui/shape/variant/e-shape-rectangle.ts","wcardinal/ui/shape/variant/e-shape-image.ts","wcardinal/ui/shape/variant/e-shape-images.ts","wcardinal/ui/shape/variant/e-shape-rectangle-uploaded.ts","wcardinal/ui/shape/variant/e-shape-rectangle-uploadeds.ts","wcardinal/ui/load/load-shape-image.ts","wcardinal/ui/shape/variant/e-shape-label-uploaded.ts","wcardinal/ui/shape/variant/e-shape-label-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-label.ts","wcardinal/ui/shape/variant/e-shape-labels.ts","wcardinal/ui/load/load-shape-label.ts","wcardinal/ui/shape/variant/e-shape-line-uploaded.ts","wcardinal/ui/shape/variant/e-shape-line-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-line-points.ts","wcardinal/ui/shape/variant/e-shape-line.ts","wcardinal/ui/shape/variant/e-shape-lines.ts","wcardinal/ui/load/load-shape-line.ts","wcardinal/ui/shape/variant/e-shape-null-uploaded.ts","wcardinal/ui/shape/variant/e-shape-null-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-null.ts","wcardinal/ui/shape/variant/e-shape-nulls.ts","wcardinal/ui/load/load-shape-null.ts","wcardinal/ui/shape/e-shape-capabilities.ts","wcardinal/ui/shape/variant/e-shape-rectangles.ts","wcardinal/ui/load/load-shape-rectangle.ts","wcardinal/ui/shape/variant/e-shape-rectangle-rounded-uploaded.ts","wcardinal/ui/shape/variant/e-shape-rectangle-rounded-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-rectangle-rounded.ts","wcardinal/ui/shape/variant/e-shape-rectangle-roundeds.ts","wcardinal/ui/load/load-shape-rectangle-rounded.ts","wcardinal/ui/shape/variant/e-shape-triangle-uploaded.ts","wcardinal/ui/shape/variant/e-shape-triangle-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-triangle.ts","wcardinal/ui/shape/variant/e-shape-triangles.ts","wcardinal/ui/load/load-shape-triangle.ts","wcardinal/ui/shape/variant/e-shape-triangle-rounded-uploaded.ts","wcardinal/ui/shape/variant/e-shape-triangle-rounded-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-triangle-rounded.ts","wcardinal/ui/shape/variant/e-shape-triangle-roundeds.ts","wcardinal/ui/load/load-shape-triangle-rounded.ts","wcardinal/ui/load/load-shape-all.ts","wcardinal/ui/theme/white/d-theme-white-atlas.ts","wcardinal/ui/theme/white/d-theme-white.ts","wcardinal/ui/load/load-theme-white.ts","wcardinal/ui/d-shadow-impl.ts","wcardinal/ui/theme/white/d-theme-white-constants.ts","wcardinal/ui/theme/white/d-theme-white-font.ts","wcardinal/ui/theme/white/d-theme-white-base.ts","wcardinal/ui/load/load-theme-white-base.ts","wcardinal/ui/theme/white/d-theme-white-board.ts","wcardinal/ui/load/load-theme-white-board.ts","wcardinal/ui/theme/white/d-theme-white-text-base.ts","wcardinal/ui/theme/white/d-theme-white-image-base.ts","wcardinal/ui/theme/white/d-theme-white-button-base.ts","wcardinal/ui/theme/white/d-theme-white-button.ts","wcardinal/ui/load/load-theme-white-button.ts","wcardinal/ui/theme/white/d-theme-white-button-ambient.ts","wcardinal/ui/load/load-theme-white-button-ambient.ts","wcardinal/ui/theme/white/d-theme-white-button-check.ts","wcardinal/ui/load/load-theme-white-button-check.ts","wcardinal/ui/theme/white/d-theme-white-button-check-right.ts","wcardinal/ui/load/load-theme-white-button-check-right.ts","wcardinal/ui/theme/white/d-theme-white-button-color.ts","wcardinal/ui/d-dialog.ts","wcardinal/ui/d-animation-fade-in.ts","wcardinal/ui/theme/white/d-theme-white-dialog.ts","wcardinal/ui/theme/white/d-theme-white-dialog-command.ts","wcardinal/ui/theme/white/d-theme-white-dialog-color.ts","wcardinal/ui/theme/white/d-theme-white-picker-color.ts","wcardinal/ui/load/load-theme-white-picker-color.ts","wcardinal/ui/load/load-theme-white-dialog-color.ts","wcardinal/ui/load/load-theme-white-button-color.ts","wcardinal/ui/d-picker-color-gradient-point.ts","wcardinal/ui/d-picker-color-gradient-data.ts","wcardinal/ui/theme/white/d-theme-white-button-color-gradient.ts","wcardinal/ui/d-picker-datetime-mask.ts","wcardinal/ui/theme/white/d-theme-white-dialog-color-gradient.ts","wcardinal/ui/theme/white/d-theme-white-picker-color-gradient.ts","wcardinal/ui/load/load-theme-white-picker-color-gradient.ts","wcardinal/ui/load/load-theme-white-dialog-color-gradient.ts","wcardinal/ui/load/load-theme-white-button-color-gradient.ts","wcardinal/ui/theme/white/d-theme-white-button-danger.ts","wcardinal/ui/load/load-theme-white-button-danger.ts","wcardinal/ui/d-picker-dates.ts","wcardinal/ui/theme/white/d-theme-white-button-date.ts","wcardinal/ui/theme/white/d-theme-white-dialog-date.ts","wcardinal/ui/theme/white/d-theme-white-picker-time.ts","wcardinal/ui/theme/white/d-theme-white-picker-datetime.ts","wcardinal/ui/theme/white/d-theme-white-picker-date.ts","wcardinal/ui/theme/white/d-theme-white-picker-datetime-button-back.ts","wcardinal/ui/theme/white/d-theme-white-picker-datetime-button-date.ts","wcardinal/ui/theme/white/d-theme-white-picker-datetime-button-next.ts","wcardinal/ui/theme/white/d-theme-white-text.ts","wcardinal/ui/theme/white/d-theme-white-picker-datetime-label.ts","wcardinal/ui/theme/white/d-theme-white-picker-datetime-label-date.ts","wcardinal/ui/theme/white/d-theme-white-picker-datetime-space.ts","wcardinal/ui/load/load-theme-white-picker-time.ts","wcardinal/ui/load/load-theme-white-picker-datetime.ts","wcardinal/ui/load/load-theme-white-picker-date.ts","wcardinal/ui/load/load-theme-white-dialog-date.ts","wcardinal/ui/load/load-theme-white-button-date.ts","wcardinal/ui/d-picker-times.ts","wcardinal/ui/d-picker-datetimes.ts","wcardinal/ui/theme/white/d-theme-white-button-datetime.ts","wcardinal/ui/theme/white/d-theme-white-dialog-datetime.ts","wcardinal/ui/load/load-theme-white-dialog-datetime.ts","wcardinal/ui/load/load-theme-white-button-datetime.ts","wcardinal/ui/theme/white/d-theme-white-button-file.ts","wcardinal/ui/load/load-theme-white-button-file.ts","wcardinal/ui/theme/white/d-theme-white-button-primary.ts","wcardinal/ui/load/load-theme-white-button-primary.ts","wcardinal/ui/theme/white/d-theme-white-button-radio.ts","wcardinal/ui/d-drag-mode.ts","wcardinal/ui/load/load-theme-white-button-radio.ts","wcardinal/ui/theme/white/d-theme-white-button-radio-right.ts","wcardinal/ui/load/load-theme-white-button-radio-right.ts","wcardinal/ui/theme/white/d-theme-white-button-secondary.ts","wcardinal/ui/load/load-theme-white-button-secondary.ts","wcardinal/ui/theme/white/d-theme-white-button-time.ts","wcardinal/ui/theme/white/d-theme-white-dialog-time.ts","wcardinal/ui/load/load-theme-white-dialog-time.ts","wcardinal/ui/load/load-theme-white-button-time.ts","wcardinal/ui/load/load-theme-white-button-all.ts","wcardinal/ui/theme/white/d-theme-white-canvas.ts","wcardinal/ui/theme/white/d-theme-white-canvas-container.ts","wcardinal/ui/d-chart-axis.ts","wcardinal/ui/load/load-theme-white-canvas-container.ts","wcardinal/ui/theme/white/d-theme-white-chart.ts","wcardinal/ui/shape/variant/e-shape-group-fill-viewer.ts","wcardinal/ui/shape/variant/e-shape-group-stroke-viewer.ts","wcardinal/ui/shape/variant/e-shape-group-text-align-viewer.ts","wcardinal/ui/shape/variant/e-shape-group-text-offset-viewer.ts","wcardinal/ui/shape/variant/e-shape-group-text-outline-viewer.ts","wcardinal/ui/shape/variant/e-shape-group-text-padding-viewer.ts","wcardinal/ui/shape/variant/e-shape-group-text-spacing-viewer.ts","wcardinal/ui/shape/variant/e-shape-group-text-viewer.ts","wcardinal/ui/shape/e-shape-buffer-count.ts","wcardinal/ui/shape/e-shape-buffer-unit.ts","wcardinal/ui/shape/e-shape-buffer-unit-builder.ts","wcardinal/ui/shape/e-shape-buffer.ts","wcardinal/ui/shape/e-shape-renderer-iterator-datum.ts","wcardinal/ui/shape/e-shape-renderer-iterator.ts","wcardinal/ui/shape/e-shape-renderer.ts","wcardinal/ui/shape/e-shape-container.ts","wcardinal/ui/shape/e-shape-search.ts","wcardinal/ui/shape/e-shape-deleter.ts","wcardinal/ui/shape/e-shape-resource-manager-serialization.ts","wcardinal/ui/shape/e-shape-runtimes.ts","wcardinal/ui/theme/white/d-theme-white-chart-axis-base.ts","wcardinal/ui/theme/white/d-theme-white-chart-axis-x.ts","wcardinal/ui/theme/white/d-theme-white-chart-axis-y.ts","wcardinal/ui/theme/white/d-theme-white-chart-coordinate-linear.ts","wcardinal/ui/theme/white/d-theme-white-diagram-base.ts","wcardinal/ui/theme/white/d-theme-white-diagram.ts","wcardinal/ui/theme/white/d-theme-white-diagram-canvas-base.ts","wcardinal/ui/theme/white/d-theme-white-diagram-canvas.ts","wcardinal/ui/load/load-theme-white-diagram.ts","wcardinal/ui/theme/white/d-theme-white-diagram-canvas-editor.ts","wcardinal/ui/theme/white/d-theme-white-diagram-editor.ts","wcardinal/ui/theme/white/e-theme-white-shape-action-value.ts","wcardinal/ui/load/load-theme-white-shape-action-value.ts","wcardinal/ui/load/load-theme-white-diagram-editor.ts","wcardinal/ui/load/load-theme-white-dialog.ts","wcardinal/ui/load/load-theme-white-dialog-command.ts","wcardinal/ui/theme/white/d-theme-white-dialog-confirm.ts","wcardinal/ui/theme/white/d-theme-white-image.ts","wcardinal/ui/theme/white/d-theme-white-dialog-confirm-message.ts","wcardinal/ui/load/load-theme-white-dialog-confirm.ts","wcardinal/ui/theme/white/d-theme-white-dialog-confirm-delete.ts","wcardinal/ui/load/load-theme-white-dialog-confirm-delete.ts","wcardinal/ui/theme/white/d-theme-white-dialog-confirm-discard.ts","wcardinal/ui/load/load-theme-white-dialog-confirm-discard.ts","wcardinal/ui/theme/white/d-theme-white-dialog-input-text.ts","wcardinal/ui/load/load-theme-white-dialog-input-text.ts","wcardinal/ui/theme/white/d-theme-white-dialog-message.ts","wcardinal/ui/load/load-theme-white-dialog-message.ts","wcardinal/ui/theme/white/d-theme-white-dialog-processing.ts","wcardinal/ui/theme/white/d-theme-white-dialog-processing-message.ts","wcardinal/ui/load/load-theme-white-dialog-processing.ts","wcardinal/ui/theme/white/d-theme-white-dialog-save-as.ts","wcardinal/ui/load/load-theme-white-dialog-save-as.ts","wcardinal/ui/theme/white/d-theme-white-dialog-select.ts","wcardinal/ui/theme/white/d-theme-white-pane.ts","wcardinal/ui/theme/white/d-theme-white-list.ts","wcardinal/ui/theme/white/d-theme-white-dialog-select-list.ts","wcardinal/ui/theme/white/d-theme-white-list-item.ts","wcardinal/ui/theme/white/d-theme-white-dialog-select-list-item.ts","wcardinal/ui/load/load-theme-white-dialog-select.ts","wcardinal/ui/load/load-theme-white-dialog-all.ts","wcardinal/ui/theme/white/d-theme-white-dropdown.ts","wcardinal/ui/theme/white/d-theme-white-layout.ts","wcardinal/ui/theme/white/d-theme-white-layout-vertical.ts","wcardinal/ui/theme/white/d-theme-white-menu.ts","wcardinal/ui/theme/white/d-theme-white-menu-item.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-text.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-check.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-expandable.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-expandable-body.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-expandable-header.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-expandable-item-check.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-link.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-expandable-item-link.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-menu.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-expandable-item-menu.ts","wcardinal/ui/theme/white/d-theme-white-list-item-separator.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-separator.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-expandable-item-separator.ts","wcardinal/ui/theme/white/d-theme-white-layout-space.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-space.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-expandable-item-space.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-expandable-item-text.ts","wcardinal/ui/load/load-theme-white-menu.ts","wcardinal/ui/load/load-theme-white-dropdown.ts","wcardinal/ui/theme/white/d-theme-white-expandable.ts","wcardinal/ui/theme/white/d-theme-white-expandable-header.ts","wcardinal/ui/snapper/e-snapper-target-value.ts","wcardinal/ui/load/load-theme-white-expandable.ts","wcardinal/ui/load/load-theme-white-image.ts","wcardinal/ui/theme/white/d-theme-white-layout-horizontal.ts","wcardinal/ui/theme/white/d-theme-white-input-and-label.ts","wcardinal/ui/load/load-theme-white-input-and-label.ts","wcardinal/ui/theme/white/d-theme-white-input.ts","wcardinal/ui/theme/white/d-theme-white-input-number.ts","wcardinal/ui/theme/white/d-theme-white-input-integer.ts","wcardinal/ui/load/load-theme-white-input-integer.ts","wcardinal/ui/theme/white/d-theme-white-input-label.ts","wcardinal/ui/load/load-theme-white-input-label.ts","wcardinal/ui/theme/white/d-theme-white-input-real.ts","wcardinal/ui/load/load-theme-white-input-real.ts","wcardinal/ui/theme/white/d-theme-white-input-text.ts","wcardinal/ui/load/load-theme-white-input-text.ts","wcardinal/ui/load/load-theme-white-input-all.ts","wcardinal/ui/load/load-theme-white-layout.ts","wcardinal/ui/load/load-theme-white-list.ts","wcardinal/ui/theme/white/d-theme-white-menu-bar.ts","wcardinal/ui/theme/white/d-theme-white-menu-bar-item.ts","wcardinal/ui/load/load-theme-white-menu-bar.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-content.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-check.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-expandable.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-expandable-item-check.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-expandable-item-link.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-expandable-item-menu.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-expandable-item-separator.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-expandable-item-space.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-expandable-item-text.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-link.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-menu.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-separator.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-space.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-text.ts","wcardinal/ui/load/load-theme-white-menu-sided.ts","wcardinal/ui/theme/white/d-theme-white-note.ts","wcardinal/ui/load/load-theme-white-note.ts","wcardinal/ui/theme/white/d-theme-white-content.ts","wcardinal/ui/theme/white/d-theme-white-scroll-bar.ts","wcardinal/ui/theme/white/d-theme-white-scroll-bar-thumb.ts","wcardinal/ui/load/load-theme-white-scroll-bar.ts","wcardinal/ui/load/load-theme-white-pane.ts","wcardinal/ui/theme/white/d-theme-white-select.ts","wcardinal/ui/load/load-theme-white-select.ts","wcardinal/ui/theme/white/d-theme-white-table.ts","wcardinal/ui/theme/white/d-theme-white-table-body.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cells.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-check.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-color.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-date.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-datetime.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-index.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-input-integer.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-input-real.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-input-text.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-select-dialog.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-select-fetcher.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-select-menu.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-text.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-time.ts","wcardinal/ui/theme/white/d-theme-white-table-row.ts","wcardinal/ui/theme/white/d-theme-white-table-body-row.ts","wcardinal/ui/theme/white/d-theme-white-table-body-row-even.ts","wcardinal/ui/theme/white/d-theme-white-table-body-row-odd.ts","wcardinal/ui/theme/white/d-theme-white-table-header.ts","wcardinal/ui/theme/white/d-theme-white-table-header-cell.ts","wcardinal/ui/load/load-theme-white-table.ts","wcardinal/ui/load/load-theme-white-text.ts","wcardinal/ui/load/load-theme-white-all.ts","wcardinal/ui/load/load-theme-white-chart.ts","wcardinal/ui/load/load-all.ts","wcardinal/ui/snapper/e-snapper-grid.ts","wcardinal/ui/snapper/e-snapper-result.ts","wcardinal/ui/snapper/e-snapper.ts","wcardinal/ui/snapper/e-snapper-target.ts","wcardinal/ui/d-animation-empty.ts","wcardinal/ui/d-application-padding.ts","wcardinal/ui/d-application-options.ts","wcardinal/ui/d-application.ts","wcardinal/ui/d-chart-coordinate.ts","wcardinal/ui/d-board.ts","wcardinal/ui/d-button-base.ts","wcardinal/ui/d-button.ts","wcardinal/ui/d-button-ambient.ts","wcardinal/ui/d-button-check.ts","wcardinal/ui/d-button-check-right.ts","wcardinal/ui/d-button-primary.ts","wcardinal/ui/d-layout-horizontal.ts","wcardinal/ui/d-dialog-command.ts","wcardinal/ui/d-input.ts","wcardinal/ui/d-input-number.ts","wcardinal/ui/d-input-real.ts","wcardinal/ui/d-text.ts","wcardinal/ui/d-input-label.ts","wcardinal/ui/d-input-and-label.ts","wcardinal/ui/d-input-real-and-label.ts","wcardinal/ui/d-input-text.ts","wcardinal/ui/d-input-text-and-label.ts","wcardinal/ui/d-picker-color-and-alpha.ts","wcardinal/ui/d-picker-color-recent.ts","wcardinal/ui/d-picker-color.ts","wcardinal/ui/d-picker-color-gradient-data-view.ts","wcardinal/ui/d-picker-color-gradient-recent.ts","wcardinal/ui/d-picker-color-gradient.ts","wcardinal/ui/d-dialog-color-gradient.ts","wcardinal/ui/d-button-color-gradient.ts","wcardinal/ui/d-dialog-color.ts","wcardinal/ui/d-button-color.ts","wcardinal/ui/d-button-danger.ts","wcardinal/ui/d-picker-datetime-button-back.ts","wcardinal/ui/d-picker-datetime-button-date.ts","wcardinal/ui/d-picker-datetime-button-next.ts","wcardinal/ui/d-picker-datetime-label.ts","wcardinal/ui/d-picker-datetime-label-date.ts","wcardinal/ui/d-picker-datetime-space.ts","wcardinal/ui/d-input-integer.ts","wcardinal/ui/d-picker-time-bound.ts","wcardinal/ui/d-picker-time-bound-hours.ts","wcardinal/ui/d-picker-time-bound-minutes.ts","wcardinal/ui/d-picker-time-bound-seconds.ts","wcardinal/ui/d-picker-time-bounds.ts","wcardinal/ui/d-picker-time.ts","wcardinal/ui/d-picker-datetime.ts","wcardinal/ui/d-picker-date.ts","wcardinal/ui/d-dialog-date.ts","wcardinal/ui/d-dialog-dates.ts","wcardinal/ui/d-button-date.ts","wcardinal/ui/d-dialog-datetime.ts","wcardinal/ui/d-dialog-datetimes.ts","wcardinal/ui/d-button-datetime.ts","wcardinal/ui/d-button-file.ts","wcardinal/ui/d-button-group.ts","wcardinal/ui/d-button-radio.ts","wcardinal/ui/d-button-radio-right.ts","wcardinal/ui/d-button-redo.ts","wcardinal/ui/d-button-secondary.ts","wcardinal/ui/d-dialog-time.ts","wcardinal/ui/d-dialog-times.ts","wcardinal/ui/d-button-time.ts","wcardinal/ui/d-button-undo.ts","wcardinal/ui/d-base-overflow-mask.ts","wcardinal/ui/d-canvas-container-view-drag.ts","wcardinal/ui/d-canvas-container-view-transform.ts","wcardinal/ui/d-canvas-container-view.ts","wcardinal/ui/d-canvas-container.ts","wcardinal/ui/d-canvas.ts","wcardinal/ui/d-chart-axis-base-options.ts","wcardinal/ui/d-chart-axis-base.ts","wcardinal/ui/d-chart-axis-container-impl.ts","wcardinal/ui/d-chart-axis-x.ts","wcardinal/ui/d-chart-axis-y.ts","wcardinal/ui/d-chart-color-set.ts","wcardinal/ui/d-chart-coordinate-container-sub-impl.ts","wcardinal/ui/d-chart-plot-area.ts","wcardinal/ui/d-chart-coordinate-container-impl.ts","wcardinal/ui/d-chart-region-impl-observable.ts","wcardinal/ui/d-chart-coordinate-linear.ts","wcardinal/ui/d-chart-region-impl.ts","wcardinal/ui/d-chart-series-stroke-impl.ts","wcardinal/ui/d-chart-series-container-impl.ts","wcardinal/ui/d-chart-plot-area-impl.ts","wcardinal/ui/d-chart-series-line.ts","wcardinal/ui/d-list-selection.ts","wcardinal/ui/d-chart.ts","wcardinal/ui/d-command-create.ts","wcardinal/ui/d-command-delete.ts","wcardinal/ui/d-command-save-as.ts","wcardinal/ui/d-command-save.ts","wcardinal/ui/d-content.ts","wcardinal/ui/d-diagram-canvas-mapping-point-impl.ts","wcardinal/ui/d-diagram-canvas-mapping-impl.ts","wcardinal/ui/d-diagram-canvas-tile.ts","wcardinal/ui/d-diagram-layer.ts","wcardinal/ui/d-diagram-layer-container.ts","wcardinal/ui/d-diagram-canvas-base.ts","wcardinal/ui/d-diagram-canvas-editor.ts","wcardinal/ui/d-diagram-serialized.ts","wcardinal/ui/d-diagram-canvas.ts","wcardinal/ui/d-diagrams.ts","wcardinal/ui/d-diagram-base.ts","wcardinal/ui/d-diagram-editor.ts","wcardinal/ui/d-diagram.ts","wcardinal/ui/d-dialog-confirm-message.ts","wcardinal/ui/d-dialog-confirm.ts","wcardinal/ui/d-dialog-confirm-delete.ts","wcardinal/ui/d-dialog-confirm-discard.ts","wcardinal/ui/d-dialog-input-text.ts","wcardinal/ui/d-dialog-message.ts","wcardinal/ui/d-dialog-processing-message.ts","wcardinal/ui/d-dialog-processing.ts","wcardinal/ui/d-dialog-save-as.ts","wcardinal/ui/d-dialog-select-list-item.ts","wcardinal/ui/d-scroll-bar.ts","wcardinal/ui/d-scroll-bar-thumb.ts","wcardinal/ui/d-scroll-bar-thumb-reflowable-horizontal.ts","wcardinal/ui/d-scroll-bar-thumb-horizontal.ts","wcardinal/ui/d-scroll-bar-horizontal.ts","wcardinal/ui/d-scroll-bar-thumb-reflowable-vertical.ts","wcardinal/ui/d-scroll-bar-thumb-vertical.ts","wcardinal/ui/d-scroll-bar-vertical.ts","wcardinal/ui/d-pane.ts","wcardinal/ui/d-list.ts","wcardinal/ui/d-dialog-select-list.ts","wcardinal/ui/d-note.ts","wcardinal/ui/d-dialog-select.ts","wcardinal/ui/d-menu-context.ts","wcardinal/ui/d-menu.ts","wcardinal/ui/d-dropdown.ts","wcardinal/ui/d-menu-sided-selection.ts","wcardinal/ui/d-expandable-header.ts","wcardinal/ui/d-expandable.ts","wcardinal/ui/d-input-integer-and-label.ts","wcardinal/ui/d-map-coordinate-epsg3857.ts","wcardinal/ui/d-map-coordinates.ts","wcardinal/ui/d-map-tile.ts","wcardinal/ui/d-map-tile-plane.ts","wcardinal/ui/d-map-tile-pyramid-impl.ts","wcardinal/ui/d-map-tiles.ts","wcardinal/ui/d-menu-bar-item.ts","wcardinal/ui/d-menu-bar-blocker.ts","wcardinal/ui/d-menu-bar.ts","wcardinal/ui/d-menu-sided-content.ts","wcardinal/ui/d-table-column.ts","wcardinal/ui/d-menu-sided.ts","wcardinal/ui/d-notification.ts","wcardinal/ui/d-pagination.ts","wcardinal/ui/d-picker-datetime-range.ts","wcardinal/ui/d-picker-time-range.ts","wcardinal/ui/d-select.ts","wcardinal/ui/d-slider-range.ts","wcardinal/ui/d-slider.ts","wcardinal/ui/d-table-body-cell-check.ts","wcardinal/ui/d-table-body-cell-color.ts","wcardinal/ui/d-table-body-cell-index.ts","wcardinal/ui/d-table-body-cell-input-integer.ts","wcardinal/ui/d-table-body-cell-input-real.ts","wcardinal/ui/d-table-body-cell-input-text.ts","wcardinal/ui/d-table-body-cell-select-dialog.ts","wcardinal/ui/d-table-body-cell-select-fetcher.ts","wcardinal/ui/d-table-body-cell-select-menu.ts","wcardinal/ui/d-table-body-cell-text.ts","wcardinal/ui/d-table-body-filter.ts","wcardinal/ui/d-table-body-cell-date.ts","wcardinal/ui/d-table-body-cell-datetime.ts","wcardinal/ui/d-table-body-cell-time.ts","wcardinal/ui/d-table-row.ts","wcardinal/ui/d-table-selection.ts","wcardinal/ui/d-table-body-row.ts","wcardinal/ui/d-table-body-row-even.ts","wcardinal/ui/d-table-body-row-odd.ts","wcardinal/ui/d-table-body.ts","wcardinal/ui/d-table-header-cell.ts","wcardinal/ui/d-table-header.ts","wcardinal/ui/d-table.ts","wcardinal/ui/d-tree.ts","wcardinal/ui/snapper/e-snapper-result-scale.ts","wcardinal/ui/util/util-ceiling-index.ts","wcardinal/ui/util/util-to-svg-texture.ts","wcardinal-ui.browser.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Application } from \"pixi.js\";\nimport { DPadding } from \"./d-padding\";\n\ninterface DApplicationLike extends Application {\n\treadonly width: number;\n\treadonly height: number;\n\treadonly padding: DPadding;\n\n\tdisallowUpdate(): void;\n\tallowUpdate(): void;\n\tupdate(): void;\n\trender(): void;\n\trefit(): void;\n\treflow(): void;\n\tgetRootElement(): HTMLElement;\n}\n\nexport class DApplications {\n\tprotected static INSTANCE: DApplicationLike | null = null;\n\n\tstatic setInstace( instance: DApplicationLike ): DApplicationLike | null {\n\t\tconst result = DApplications.INSTANCE;\n\t\tDApplications.INSTANCE = instance;\n\t\treturn result;\n\t}\n\n\tstatic getInstance(): DApplicationLike {\n\t\tif( DApplications.INSTANCE == null ) {\n\t\t\tthrow new Error( \"Must create a DApplication instance at first\" );\n\t\t}\n\t\treturn DApplications.INSTANCE;\n\t}\n\n\tstatic update(): void {\n\t\tthis.getInstance().update();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\n\n/**\n * A border mask.\n * Borders on masked parts are not rendered.\n */\nexport enum DBorderMask {\n\tNONE = 0,\n\n\tTOP = 1,\n\tRIGHT = 2,\n\tBOTTOM = 4,\n\tLEFT = 8,\n\n\tTOP_RIGHT = TOP | RIGHT,\n\tTOP_BOTTOM = TOP | BOTTOM,\n\tTOP_LEFT = TOP | LEFT,\n\n\tRIGHT_BOTTOM = RIGHT | BOTTOM,\n\tRIGHT_LEFT = RIGHT | LEFT,\n\n\tBOTTOM_LEFT = BOTTOM | LEFT,\n\n\tNOT_TOP = RIGHT | BOTTOM | LEFT,\n\tNOT_RIGHT = TOP | BOTTOM | LEFT,\n\tNOT_BOTTOM = TOP | RIGHT | LEFT,\n\tNOT_LEFT = TOP | RIGHT | BOTTOM,\n\n\tALL = TOP | RIGHT | BOTTOM | LEFT\n}\n\nexport interface DBorder {\n\tcolor?: DStateAwareOrValueMightBe<number | null>;\n\talpha?: DStateAwareOrValueMightBe<number>;\n\twidth?: DStateAwareOrValueMightBe<number>;\n\talign?: DStateAwareOrValueMightBe<number>;\n\tmask?: DStateAwareOrValueMightBe<DBorderMask>;\n}\n\nexport interface DBorderStateAware extends DBorder {\n\tgetTheme(): DThemeBase;\n\tsetTheme( theme: DThemeBase ): void;\n\tgetColor( state: DBaseState ): number | null;\n\tgetAlpha( state: DBaseState ): number;\n\tgetWidth( state: DBaseState ): number;\n\tgetAlign( state: DBaseState ): number;\n\tgetMask( state: DBaseState ): DBorderMask;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilIsFunction = ( target: unknown ): target is Function => {\n\treturn (typeof target) === \"function\";\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBackgroundStateAware } from \"./d-background\";\nimport { DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\nimport { utilIsFunction } from \"./util/util-is-function\";\n\ntype Callback = () => void;\n\nexport class DBaseBackground implements DBackgroundStateAware {\n\tprotected _theme: DThemeBase;\n\tprotected _color?: DStateAwareOrValueMightBe<number | null>;\n\tprotected _alpha?: DStateAwareOrValueMightBe<number>;\n\tprotected _callback: Callback | undefined;\n\n\tconstructor( theme: DThemeBase, options?: DBaseOptions<any>, callback?: Callback ) {\n\t\tthis._theme = theme;\n\t\tthis._callback = callback;\n\t\tif( options != null && options.background != null ) {\n\t\t\tconst background = options.background;\n\t\t\tthis._color = background.color;\n\t\t\tthis._alpha = background.alpha;\n\t\t}\n\t}\n\n\tgetTheme(): DThemeBase {\n\t\treturn this._theme;\n\t}\n\n\tsetTheme( theme: DThemeBase ): void {\n\t\tthis._theme = theme;\n\t}\n\n\tgetColor( state: DBaseState ): number | null {\n\t\tconst color = this._color;\n\t\tif( color !== undefined ) {\n\t\t\tif( utilIsFunction( color ) ) {\n\t\t\t\tconst result = color( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn color;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getBackgroundColor( state );\n\t}\n\n\tget color(): DStateAwareOrValueMightBe<number | null> {\n\t\treturn this._color;\n\t}\n\n\tset color( color: DStateAwareOrValueMightBe<number | null> ) {\n\t\tif( this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\tconst alpha = this._alpha;\n\t\tif( alpha !== undefined ) {\n\t\t\tif( utilIsFunction( alpha ) ) {\n\t\t\t\tconst result = alpha( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn alpha;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getBackgroundAlpha( state );\n\t}\n\n\tget alpha(): DStateAwareOrValueMightBe<number> {\n\t\treturn this._alpha;\n\t}\n\n\tset alpha( alpha: DStateAwareOrValueMightBe<number> ) {\n\t\tif( this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tprotected onChange(): void {\n\t\tconst callback = this._callback;\n\t\tif( callback != null ) {\n\t\t\tcallback();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilIsString = ( target: unknown ): target is string => {\n\treturn ( typeof target === \"string\" ) ||\n\t\t( Object.prototype.toString.call( target ) === \"[object String]\" );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeBase } from \"./d-base\";\n\nexport enum DCornerMask {\n\tNONE = 0,\n\tTOP_LEFT = 1,\n\tTOP_RIGHT = 2,\n\tBOTTOM_LEFT = 4,\n\tBOTTOM_RIGHT = 8,\n\tTOP = TOP_LEFT | TOP_RIGHT,\n\tBOTTOM = BOTTOM_LEFT | BOTTOM_RIGHT,\n\tLEFT = TOP_LEFT | BOTTOM_LEFT,\n\tRIGHT = TOP_RIGHT | BOTTOM_RIGHT,\n\tALL = TOP_LEFT | TOP_RIGHT | BOTTOM_LEFT | BOTTOM_RIGHT\n}\n\nexport interface DCornerLike {\n\tradius?: number;\n\tmask?: DCornerMask;\n}\n\nexport interface DCorner extends DCornerLike {\n\tset( radius: number, mask: DCornerMask ): void;\n\tgetTheme(): DThemeBase;\n\tsetTheme( theme: DThemeBase ): void;\n\tgetRadius(): number;\n\tgetMask(): DCornerMask;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DBorderMask, DBorderStateAware } from \"./d-border\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\nimport { utilIsFunction } from \"./util/util-is-function\";\nimport { utilIsString } from \"./util/util-is-string\";\n\ntype Callback = () => void;\n\nexport class DBaseBorder implements DBorderStateAware {\n\tprotected _theme: DThemeBase;\n\tprotected _color?: DStateAwareOrValueMightBe<number | null>;\n\tprotected _alpha?: DStateAwareOrValueMightBe<number>;\n\tprotected _width?: DStateAwareOrValueMightBe<number>;\n\tprotected _align?: DStateAwareOrValueMightBe<number>;\n\tprotected _mask?: DStateAwareOrValueMightBe<DBorderMask>;\n\tprotected _callback: Callback | undefined;\n\n\tconstructor( theme: DThemeBase, options?: DBaseOptions<any>, callback?: Callback ) {\n\t\tthis._theme = theme;\n\t\tthis._callback = callback;\n\t\tif( options != null && options.border != null ) {\n\t\t\tconst border = options.border;\n\t\t\tthis._color = border.color;\n\t\t\tthis._alpha = border.alpha;\n\t\t\tthis._width = border.width;\n\t\t\tthis._align = border.align;\n\t\t\tthis._mask = ( utilIsString( border.mask ) ? DBorderMask[ border.mask ] : border.mask );\n\t\t}\n\t}\n\n\tgetTheme(): DThemeBase {\n\t\treturn this._theme;\n\t}\n\n\tsetTheme( theme: DThemeBase ): void {\n\t\tthis._theme = theme;\n\t}\n\n\tgetColor( state: DBaseState ): number | null {\n\t\tconst color = this._color;\n\t\tif( color !== undefined ) {\n\t\t\tif( utilIsFunction( color ) ) {\n\t\t\t\tconst result = color( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn color;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getBorderColor( state );\n\t}\n\n\tget color(): DStateAwareOrValueMightBe<number | null> {\n\t\treturn this._color;\n\t}\n\n\tset color( color: DStateAwareOrValueMightBe<number | null> ) {\n\t\tif( this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\tconst alpha = this._alpha;\n\t\tif( alpha !== undefined ) {\n\t\t\tif( utilIsFunction( alpha ) ) {\n\t\t\t\tconst result = alpha( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn alpha;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getBorderAlpha( state );\n\t}\n\n\tget alpha(): DStateAwareOrValueMightBe<number> {\n\t\treturn this._alpha;\n\t}\n\n\tset alpha( alpha: DStateAwareOrValueMightBe<number> ) {\n\t\tif( this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tgetWidth( state: DBaseState ): number {\n\t\tconst width = this._width;\n\t\tif( width !== undefined ) {\n\t\t\tif( utilIsFunction( width ) ) {\n\t\t\t\tconst result = width( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn width;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getBorderWidth( state );\n\t}\n\n\tget width(): DStateAwareOrValueMightBe<number> {\n\t\treturn this._width;\n\t}\n\n\tset width( width: DStateAwareOrValueMightBe<number> ) {\n\t\tif( this._width !== width ) {\n\t\t\tthis._width = width;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tgetAlign( state: DBaseState ): number {\n\t\tconst align = this._align;\n\t\tif( align !== undefined ) {\n\t\t\tif( utilIsFunction( align ) ) {\n\t\t\t\tconst result = align( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn align;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getBorderAlign( state );\n\t}\n\n\tget align(): DStateAwareOrValueMightBe<number> {\n\t\treturn this._align;\n\t}\n\n\tset align( align: DStateAwareOrValueMightBe<number> ) {\n\t\tif( this._align !== align ) {\n\t\t\tthis._align = align;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tgetMask( state: DBaseState ): number {\n\t\tconst mask = this._mask;\n\t\tif( mask !== undefined ) {\n\t\t\tif( utilIsFunction( mask ) ) {\n\t\t\t\tconst result = mask( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn mask;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getBorderMask( state );\n\t}\n\n\tget mask(): DStateAwareOrValueMightBe<DBorderMask> {\n\t\treturn this._mask;\n\t}\n\n\tset mask( mask: DStateAwareOrValueMightBe<DBorderMask> ) {\n\t\tif( this._mask !== mask ) {\n\t\t\tthis._mask = mask;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tprotected onChange(): void {\n\t\tconst callback = this._callback;\n\t\tif( callback != null ) {\n\t\t\tcallback();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilIsNumber = ( target: unknown ): target is number => {\n\treturn ( typeof target === \"number\" ) ||\n\t\t( Object.prototype.toString.call( target ) === \"[object Number]\" );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\n /**\n  * DBase interactivity.\n  * Mouse / touch events are triggered only on interactive objects.\n  */\nexport enum DBaseInteractive {\n\t/**\n\t * Not interactive.\n\t */\n\tNONE = 0,\n\n\t/**\n\t * Interactive.\n\t * However children are not interactive.\n\t */\n\tSELF = 1,\n\n\t/**\n\t * Not interactive.\n\t * However children are interactive.\n\t */\n\tCHILDREN = 2,\n\n\t/**\n\t * Interactive.\n\t * Children are also interactive.\n\t */\n\tBOTH = SELF | CHILDREN\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DCorner, DCornerMask } from \"./d-corner\";\nimport { utilIsNumber } from \"./util/util-is-number\";\nimport { utilIsString } from \"./util/util-is-string\";\n\ntype Callback = () => void;\n\nexport class DBaseCorner implements DCorner {\n\tprotected _theme: DThemeBase;\n\tprotected _radius?: number;\n\tprotected _mask?: DCornerMask;\n\tprotected _callback: Callback | undefined;\n\n\tconstructor( theme: DThemeBase, options?: DBaseOptions<any>, callback?: () => void ) {\n\t\tthis._theme = theme;\n\t\tthis._callback = callback;\n\t\tif( options != null && options.corner != null ) {\n\t\t\tconst corner = options.corner;\n\t\t\tif( utilIsNumber( corner ) ) {\n\t\t\t\tthis._radius = corner;\n\t\t\t\tthis._mask = undefined;\n\t\t\t} else {\n\t\t\t\tthis._radius = corner.radius;\n\t\t\t\tthis._mask = ( utilIsString( corner.mask ) ? DCornerMask[ corner.mask ] : corner.mask );\n\t\t\t}\n\t\t}\n\t}\n\n\tgetTheme(): DThemeBase {\n\t\treturn this._theme;\n\t}\n\n\tsetTheme( theme: DThemeBase ): void {\n\t\tthis._theme = theme;\n\t}\n\n\tgetRadius(): number {\n\t\tconst radius = this._radius;\n\t\treturn ( radius !== undefined ? radius : this._theme.getCornerRadius() );\n\t}\n\n\tget radius(): number | undefined {\n\t\treturn this._radius;\n\t}\n\n\tset radius( radius: number | undefined ) {\n\t\tif( this._radius !== radius ) {\n\t\t\tthis._radius = radius;\n\t\t\tconst callback = this._callback;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetMask(): DCornerMask {\n\t\tconst mask = this._mask;\n\t\treturn ( mask !== undefined ? mask : this._theme.getCornerMask() );\n\t}\n\n\tget mask(): DCornerMask | undefined {\n\t\treturn this._mask;\n\t}\n\n\tset mask( mask: DCornerMask | undefined ) {\n\t\tif( this._mask !== mask ) {\n\t\t\tthis._mask = mask;\n\t\t\tconst callback = this._callback;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n\n\tset( radius?: number, mask?: DCornerMask ): void {\n\t\tlet isChanged = false;\n\n\t\tif( this._radius !== radius ) {\n\t\t\tthis._radius = radius;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( this._mask !== mask ) {\n\t\t\tthis._mask = mask;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tconst callback = this._callback;\n\t\tif( isChanged && callback != null ) {\n\t\t\tcallback();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DBorderMask } from \"./d-border\";\nimport { DOutline } from \"./d-outline\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\nimport { utilIsFunction } from \"./util/util-is-function\";\nimport { utilIsString } from \"./util/util-is-string\";\n\ntype Callback = () => void;\n\nexport class DBaseOutline implements DOutline {\n\tprotected _theme: DThemeBase;\n\tprotected _color?: DStateAwareOrValueMightBe<number | null>;\n\tprotected _alpha?: DStateAwareOrValueMightBe<number>;\n\tprotected _width?: DStateAwareOrValueMightBe<number>;\n\tprotected _offset?: DStateAwareOrValueMightBe<number>;\n\tprotected _align?: DStateAwareOrValueMightBe<number>;\n\tprotected _mask?: DStateAwareOrValueMightBe<DBorderMask>;\n\tprotected _callback: Callback | undefined;\n\n\tconstructor( theme: DThemeBase, options?: DBaseOptions<any>, callback?: Callback ) {\n\t\tthis._theme = theme;\n\t\tthis._callback = callback;\n\t\tif( options != null && options.outline != null ) {\n\t\t\tconst outline = options.outline;\n\t\t\tthis._color = outline.color;\n\t\t\tthis._alpha = outline.alpha;\n\t\t\tthis._width = outline.width;\n\t\t\tthis._offset = outline.offset;\n\t\t\tthis._align = outline.align;\n\t\t\tthis._mask = ( utilIsString( outline.mask ) ? DBorderMask[ outline.mask ] : outline.mask );\n\t\t}\n\t}\n\n\tgetTheme(): DThemeBase {\n\t\treturn this._theme;\n\t}\n\n\tsetTheme( theme: DThemeBase ): void {\n\t\tthis._theme = theme;\n\t}\n\n\tgetColor( state: DBaseState ): number | null {\n\t\tconst color = this._color;\n\t\tif( color !== undefined ) {\n\t\t\tif( utilIsFunction( color ) ) {\n\t\t\t\tconst result = color( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn color;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getOutlineColor( state );\n\t}\n\n\tget color(): DStateAwareOrValueMightBe<number | null> {\n\t\treturn this._color;\n\t}\n\n\tset color( color: DStateAwareOrValueMightBe<number | null> ) {\n\t\tif( this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tconst callback = this._callback;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\tconst alpha = this._alpha;\n\t\tif( alpha !== undefined ) {\n\t\t\tif( utilIsFunction( alpha ) ) {\n\t\t\t\tconst result = alpha( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn alpha;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getOutlineAlpha( state );\n\t}\n\n\tget alpha(): DStateAwareOrValueMightBe<number> {\n\t\treturn this._alpha;\n\t}\n\n\tset alpha( alpha: DStateAwareOrValueMightBe<number> ) {\n\t\tif( this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tconst callback = this._callback;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetWidth( state: DBaseState ): number {\n\t\tconst width = this._width;\n\t\tif( width !== undefined ) {\n\t\t\tif( utilIsFunction( width ) ) {\n\t\t\t\tconst result = width( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn width;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getOutlineWidth( state );\n\t}\n\n\tget width(): DStateAwareOrValueMightBe<number> {\n\t\treturn this._width;\n\t}\n\n\tset width( width: DStateAwareOrValueMightBe<number> ) {\n\t\tif( this._width !== width ) {\n\t\t\tthis._width = width;\n\t\t\tconst callback = this._callback;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetOffset( state: DBaseState ): number {\n\t\tconst offset = this._offset;\n\t\tif( offset !== undefined ) {\n\t\t\tif( utilIsFunction( offset ) ) {\n\t\t\t\tconst result = offset( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn offset;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getOutlineOffset( state );\n\t}\n\n\tget offset(): DStateAwareOrValueMightBe<number> {\n\t\treturn this._offset;\n\t}\n\n\tset offset( offset: DStateAwareOrValueMightBe<number> ) {\n\t\tif( this._offset !== offset ) {\n\t\t\tthis._offset = offset;\n\t\t\tconst callback = this._callback;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetAlign( state: DBaseState ): number {\n\t\tconst align = this._align;\n\t\tif( align !== undefined ) {\n\t\t\tif( utilIsFunction( align ) ) {\n\t\t\t\tconst result = align( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn align;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getOutlineAlign( state );\n\t}\n\n\tget align(): DStateAwareOrValueMightBe<number> {\n\t\treturn this._align;\n\t}\n\n\tset align( align: DStateAwareOrValueMightBe<number> ) {\n\t\tif( this._align !== align ) {\n\t\t\tthis._align = align;\n\t\t\tconst callback = this._callback;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetMask( state: DBaseState ): number {\n\t\tconst mask = this._mask;\n\t\tif( mask !== undefined ) {\n\t\t\tif( utilIsFunction( mask ) ) {\n\t\t\t\tconst result = mask( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn mask;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getOutlineMask( state );\n\t}\n\n\tget mask(): DStateAwareOrValueMightBe<DBorderMask> {\n\t\treturn this._mask;\n\t}\n\n\tset mask( mask: DStateAwareOrValueMightBe<DBorderMask> ) {\n\t\tif( this._mask !== mask ) {\n\t\t\tthis._mask = mask;\n\t\t\tconst callback = this._callback;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum DBaseState {\n\tNONE\t\t= 0,\n\tHOVERED\t\t= 1 << 0,\n\tACTIVE\t\t= 1 << 1,\n\tACTIVE_IN\t= 1 << 2,\n\tFOCUSED\t\t= 1 << 3,\n\tFOCUSED_IN\t= 1 << 4,\n\tUNFOCUSABLE\t= 1 << 5,\n\tFOCUS_ROOT\t= 1 << 6,\n\tREAD_ONLY\t= 1 << 7,\n\tDISABLED\t= 1 << 8,\n\tDRAGGING\t= 1 << 9,\n\tPRESSED\t\t= 1 << 10,\n\tINVALID\t\t= 1 << 11,\n\tSUCCEEDED\t= 1 << 12,\n\tFAILED\t\t= 1 << 13,\n\n\tEXTENSION_0\t= 1 << 20,\n\tEXTENSION_1\t= 1 << 21,\n\tEXTENSION_2\t= 1 << 22,\n\tEXTENSION_3\t= 1 << 23,\n\n\tCUSTOM\t\t= 1 << 24\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DPadding } from \"./d-padding\";\nimport { utilIsNumber } from \"./util/util-is-number\";\n\ntype Callback = () => void;\n\nexport class DBasePadding implements DPadding {\n\tprotected _theme: DThemeBase;\n\tprotected _left?: number;\n\tprotected _top?: number;\n\tprotected _right?: number;\n\tprotected _bottom?: number;\n\tprotected _callback: Callback | undefined;\n\n\tconstructor( theme: DThemeBase, options?: DBaseOptions<any>, callback?: () => void ) {\n\t\tthis._theme = theme;\n\t\tthis._callback = callback;\n\n\t\tif( options != null && options.padding != null ) {\n\t\t\tconst padding = options.padding;\n\t\t\tif( utilIsNumber( padding ) ) {\n\t\t\t\tthis._left = padding;\n\t\t\t\tthis._top = padding;\n\t\t\t\tthis._right = padding;\n\t\t\t\tthis._bottom = padding;\n\t\t\t} else {\n\t\t\t\tthis._left = padding.left;\n\t\t\t\tthis._top = padding.top;\n\t\t\t\tthis._right = padding.right;\n\t\t\t\tthis._bottom = padding.bottom;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetTheme(): DThemeBase {\n\t\treturn this._theme;\n\t}\n\n\tsetTheme( theme: DThemeBase ): void {\n\t\tthis._theme = theme;\n\t}\n\n\tgetLeft(): number {\n\t\tconst left = this._left;\n\t\treturn left !== undefined ? left : this._theme.getPaddingLeft();\n\t}\n\n\tget left(): number | undefined {\n\t\treturn this._left;\n\t}\n\n\tset left( left: number | undefined ) {\n\t\tif( this._left !== left ) {\n\t\t\tthis._left = left;\n\t\t\tif( this._callback != null ) {\n\t\t\t\tthis._callback();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetTop(): number {\n\t\tconst top = this._top;\n\t\treturn top !== undefined ? top : this._theme.getPaddingTop();\n\t}\n\n\tget top(): number | undefined {\n\t\treturn this._top;\n\t}\n\n\tset top( top: number | undefined ) {\n\t\tif( this._top !== top ) {\n\t\t\tthis._top = top;\n\t\t\tif( this._callback != null ) {\n\t\t\t\tthis._callback();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetRight(): number {\n\t\tconst right = this._right;\n\t\treturn right !== undefined ? right : this._theme.getPaddingRight();\n\t}\n\n\tget right(): number | undefined {\n\t\treturn this._right;\n\t}\n\n\tset right( right: number | undefined ) {\n\t\tif( this._right !== right ) {\n\t\t\tthis._right = right;\n\t\t\tif( this._callback != null ) {\n\t\t\t\tthis._callback();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetBottom(): number {\n\t\tconst bottom = this._bottom;\n\t\treturn bottom !== undefined ? bottom : this._theme.getPaddingBottom();\n\t}\n\n\tget bottom(): number | undefined {\n\t\treturn this._bottom;\n\t}\n\n\tset bottom( bottom: number | undefined ) {\n\t\tif( this._bottom !== bottom ) {\n\t\t\tthis._bottom = bottom;\n\t\t\tif( this._callback != null ) {\n\t\t\t\tthis._callback();\n\t\t\t}\n\t\t}\n\t}\n\n\tset( padding: number ): void;\n\tset( topAndBottom: number, leftAndRight: number ): void;\n\tset( top: number, leftAndRight: number, bottom: number ): void;\n\tset( top: number, right?: number, bottom?: number, left?: number ) {\n\t\tif( right == null ) {\n\t\t\tthis.top = top;\n\t\t\tthis.right = top;\n\t\t\tthis.bottom = top;\n\t\t\tthis.left = top;\n\t\t} else if( bottom == null ) {\n\t\t\tthis.top = top;\n\t\t\tthis.right = right;\n\t\t\tthis.bottom = top;\n\t\t\tthis.left = right;\n\t\t} else if( left == null ) {\n\t\t\tthis.top = top;\n\t\t\tthis.right = right;\n\t\t\tthis.bottom = bottom;\n\t\t\tthis.left = right;\n\t\t} else {\n\t\t\tthis.top = top;\n\t\t\tthis.right = right;\n\t\t\tthis.bottom = bottom;\n\t\t\tthis.left = left;\n\t\t}\n\t\tif( this._callback != null ) {\n\t\t\tthis._callback();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint } from \"pixi.js\";\n\ntype Callback = () => any;\n\nexport class DBasePoint {\n\tprotected _point: IPoint;\n\tcb: Callback;\n\tscope: any;\n\n\tconstructor( point: IPoint, cb: Callback, scope?: any ) {\n\t\tthis._point = point;\n\t\tthis.cb = cb;\n\t}\n\n\tget x() {\n\t\treturn this._point.x;\n\t}\n\n\tset x( x: number ) {\n\t\tconst point = this._point;\n\t\tif( point.x !== x ) {\n\t\t\tpoint.x = x;\n\t\t\tthis.cb.call( this.scope );\n\t\t}\n\t}\n\n\tget y() {\n\t\treturn this._point.y;\n\t}\n\n\tset y( y: number ) {\n\t\tconst point = this._point;\n\t\tif( point.y !== y ) {\n\t\t\tpoint.y = y;\n\t\t\tthis.cb.call( this.scope );\n\t\t}\n\t}\n\n\tset( x: number, y: number ) {\n\t\tconst point = this._point;\n\t\tif( point.x !== x || point.y !== y ) {\n\t\t\tpoint.set( x, y );\n\t\t\tthis.cb.call( this.scope );\n\t\t}\n\t}\n\n\tcopyFrom( target: IPoint ): this {\n\t\tconst point = this._point;\n\t\tif( point.x !== target.x || point.y !== target.y ) {\n\t\t\tpoint.copyFrom( target );\n\t\t\tthis.cb.call( this.scope );\n\t\t}\n\t\treturn this;\n\t}\n\n\tcopyTo( target: IPoint ): IPoint {\n\t\treturn target.copyFrom( this._point );\n\t}\n\n\tcopy(): this {\n\t\treturn this.copyFrom( arguments[ 0 ] );\n\t}\n\n\tclone( cb?: Function, scope?: any ): IPoint {\n\t\tcb = cb || this.cb;\n\t\tscope = scope || this.scope;\n\t\treturn new DBasePoint( this._point, cb as Callback, scope );\n\t}\n\n\tequals( p: IPoint ): boolean {\n\t\treturn this._point.equals( p );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer, MeshGeometry, Texture, TextureUvs } from \"pixi.js\";\nimport { DCornerMask } from \"./d-corner\";\n\nexport class DBaseBackgroundMeshGeometry extends MeshGeometry {\n\tprotected _texture: Texture;\n\tprotected _width: number;\n\tprotected _height: number;\n\tprotected _borderSize: number;\n\tprotected _cornerMask: DCornerMask;\n\tprotected _isDirty: boolean;\n\tprotected _textureId: number;\n\tprotected _vertices: Float32Array;\n\tprotected _uvs: Float32Array;\n\tprotected _indices: Uint16Array;\n\tprotected _vertexBuffer: Buffer;\n\tprotected _uvBuffer: Buffer;\n\tprotected _indexBuffer: Buffer;\n\n\tconstructor( texture: Texture, width: number, height: number, borderSize: number, cornerMask: DCornerMask ) {\n\t\tsuper( new Float32Array( 56 ), new Float32Array( 56 ), new Uint16Array( 42 ) );\n\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tthis._texture = texture;\n\t\tthis._borderSize = borderSize;\n\t\tthis._cornerMask = cornerMask;\n\t\tthis._isDirty = true;\n\t\tthis._textureId = NaN;\n\n\t\tthis._vertexBuffer = this.getBuffer( \"aVertexPosition\" );\n\t\tthis._vertices = this._vertexBuffer.data as Float32Array;\n\t\tthis._uvBuffer = this.getBuffer( \"aTextureCoord\" );\n\t\tthis._uvs = this._uvBuffer.data as Float32Array;\n\t\tthis._indexBuffer = this.getIndex();\n\t\tthis._indices = this._indexBuffer.data as Uint16Array;\n\t}\n\n\tget borderSize(): number {\n\t\treturn this._borderSize;\n\t}\n\n\tset borderSize( borderSize: number ) {\n\t\tif( this._borderSize !== borderSize ) {\n\t\t\tthis._borderSize = borderSize;\n\t\t\tthis._isDirty = true;\n\t\t}\n\t}\n\n\tget cornerMask(): DCornerMask {\n\t\treturn this._cornerMask;\n\t}\n\n\tset cornerMask( cornerMask: DCornerMask ) {\n\t\tif( this._cornerMask !== cornerMask ) {\n\t\t\tthis._cornerMask = cornerMask;\n\t\t\tthis._isDirty = true;\n\t\t}\n\t}\n\n\tget width(): number {\n\t\treturn this._width;\n\t}\n\n\tset width( width: number ) {\n\t\tif( this._width !== width ) {\n\t\t\tthis._width = width;\n\t\t\tthis._isDirty = true;\n\t\t}\n\t}\n\n\tget height(): number {\n\t\treturn this._height;\n\t}\n\n\tset height( height: number ) {\n\t\tif( this._height !== height ) {\n\t\t\tthis._height = height;\n\t\t\tthis._isDirty = true;\n\t\t}\n\t}\n\n\tget texture(): Texture {\n\t\treturn this._texture;\n\t}\n\n\tset texture( texture: Texture ) {\n\t\tif( this._texture !== texture ) {\n\t\t\tthis._texture = texture;\n\t\t\tthis._isDirty = true;\n\t\t\tthis._textureId = NaN;\n\t\t}\n\t}\n\n\tprotected getTextureId(): number {\n\t\treturn (this._texture as any)._updateID;\n\t}\n\n\tprotected fillVertices( iv: number, array: Float32Array, x0: number, x1: number, y0: number, y1: number ): void {\n\t\tarray[ iv + 0 ] = x0;\n\t\tarray[ iv + 1 ] = y0;\n\t\tarray[ iv + 2 ] = x1;\n\t\tarray[ iv + 3 ] = y0;\n\t\tarray[ iv + 4 ] = x0;\n\t\tarray[ iv + 5 ] = y1;\n\t\tarray[ iv + 6 ] = x1;\n\t\tarray[ iv + 7 ] = y1;\n\t}\n\n\tprotected fillIndices( ii: number, indices: Uint16Array, iv: number ): void {\n\t\tindices[ ii + 0 ] = iv + 0;\n\t\tindices[ ii + 1 ] = iv + 1;\n\t\tindices[ ii + 2 ] = iv + 2;\n\t\tindices[ ii + 3 ] = iv + 1;\n\t\tindices[ ii + 4 ] = iv + 3;\n\t\tindices[ ii + 5 ] = iv + 2;\n\t}\n\n\tprotected fillUvsCorner(\n\t\tiv: number, uvs: Float32Array, c: boolean,\n\t\tu0: number, u1: number, u2: number, u3: number,\n\t\tv0: number, v1: number, v2: number, v3: number\n\t): void {\n\t\tif( c ) {\n\t\t\tthis.fillVertices( iv, uvs, u0, u1, v0, v1 );\n\t\t} else {\n\t\t\tthis.fillVertices( iv, uvs, u3, u2, v0, v1 );\n\t\t}\n\t}\n\n\tprotected fillUvs( iv: number, uvs: Float32Array, u0: number, u1: number, v0: number, v1: number ): void {\n\t\tthis.fillVertices( iv, uvs, u0, u1, v0, v1 );\n\t}\n\n\tupdate(): void {\n\t\tconst texture = this.texture as any;\n\t\tif( ! texture.valid ) {\n\t\t\treturn;\n\t\t}\n\t\tconst textureId = this.getTextureId();\n\t\tif( this._isDirty || this._textureId !== textureId ) {\n\t\t\tthis._isDirty = false;\n\t\t\tthis._textureId = textureId;\n\t\t\tconst vertices = this._vertices;\n\t\t\tconst uvs = this._uvs;\n\t\t\tconst indices = this._indices;\n\n\t\t\tconst width = this._width;\n\t\t\tconst height = this._height;\n\t\t\tconst borderSize = this._borderSize;\n\n\t\t\tconst x0 = 0;\n\t\t\tconst x1 = Math.min( width * 0.5, borderSize );\n\t\t\tconst x2 = Math.max( width * 0.5, width - borderSize );\n\t\t\tconst x3 = width;\n\n\t\t\tconst y0 = 0;\n\t\t\tconst y1 = Math.min( height * 0.5, borderSize );\n\t\t\tconst y2 = Math.max( height * 0.5, height - borderSize );\n\t\t\tconst y3 = height;\n\n\t\t\tconst textureUvs: TextureUvs = texture._uvs;\n\n\t\t\tconst l = textureUvs.x0;\n\t\t\tconst r = textureUvs.x1;\n\t\t\tconst t = textureUvs.y0;\n\t\t\tconst b = textureUvs.y3;\n\t\t\tconst w = (r - l) * (borderSize / texture.width);\n\t\t\tconst h = (b - t) * (borderSize / texture.height);\n\n\t\t\tconst u0 = l;\n\t\t\tconst u1 = l + w;\n\t\t\tconst u2 = r - w;\n\t\t\tconst u3 = r;\n\n\t\t\tconst v0 = t;\n\t\t\tconst v1 = t + h;\n\t\t\tconst v2 = b - h;\n\t\t\tconst v3 = b;\n\n\t\t\tconst cornerMask = this._cornerMask;\n\t\t\tconst ctl = ! (cornerMask & DCornerMask.TOP_LEFT);\n\t\t\tconst ctr = ! (cornerMask & DCornerMask.TOP_RIGHT);\n\t\t\tconst cbl = ! (cornerMask & DCornerMask.BOTTOM_LEFT);\n\t\t\tconst cbr = ! (cornerMask & DCornerMask.BOTTOM_RIGHT);\n\n\t\t\t// Vertices & UVs\n\t\t\tlet iv = 0;\n\t\t\tlet ia = 0;\n\t\t\tlet ii = 0;\n\n\t\t\t// Top left\n\t\t\tthis.fillVertices( iv, vertices, x0, x1, y0, y1 );\n\t\t\tthis.fillUvsCorner( iv, uvs, ctl, u0, u1, u2, u3, v0, v1, v2, v3 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Top middle\n\t\t\tthis.fillVertices( iv, vertices, x1, x2, y0, y1 );\n\t\t\tthis.fillUvs( iv, uvs, u1, u2, v0, v1 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Top right\n\t\t\tthis.fillVertices( iv, vertices, x3, x2, y0, y1 );\n\t\t\tthis.fillUvsCorner( iv, uvs, ctr, u0, u1, u2, u3, v0, v1, v2, v3 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Middle\n\t\t\tthis.fillVertices( iv, vertices, x0, x3, y1, y2 );\n\t\t\tthis.fillUvs( iv, uvs, u0, u3, v1, v2 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Bottom left\n\t\t\tthis.fillVertices( iv, vertices, x0, x1, y3, y2 );\n\t\t\tthis.fillUvsCorner( iv, uvs, cbl, u0, u1, u2, u3, v0, v1, v2, v3 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Bottom middle\n\t\t\tthis.fillVertices( iv, vertices, x1, x2, y2, y3 );\n\t\t\tthis.fillUvs( iv, uvs, u1, u2, v2, v3 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Bottom right\n\t\t\tthis.fillVertices( iv, vertices, x3, x2, y3, y2 );\n\t\t\tthis.fillUvsCorner( iv, uvs, cbr, u3, u2, u1, u0, v3, v2, v1, v0 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\n\t\t\tthis._vertexBuffer.update();\n\t\t\tthis._uvBuffer.update();\n\t\t\tthis._indexBuffer.update();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Mesh, MeshMaterial, Texture } from \"pixi.js\";\nimport { DBaseBackgroundMeshGeometry } from \"./d-base-background-mesh-geometry\";\nimport { DCornerMask } from \"./d-corner\";\n\nexport class DBaseBackgroundMesh extends Mesh {\n\tgeometry!: DBaseBackgroundMeshGeometry;\n\tshader!: MeshMaterial;\n\n\tconstructor( texture: Texture, borderSize: number, cornerMask: DCornerMask ) {\n\t\tsuper(\n\t\t\tnew DBaseBackgroundMeshGeometry( texture, 100, 100, borderSize, cornerMask ),\n\t\t\tnew MeshMaterial( texture )\n\t\t);\n\t}\n\n\tget texture() {\n\t\treturn this.shader.texture;\n\t}\n\n\tset texture( texture: Texture ) {\n\t\tif( this.shader.texture !== texture ) {\n\t\t\tthis.shader.texture = texture;\n\t\t\tthis.geometry.texture = texture;\n\t\t}\n\t}\n\n\tget width(): number {\n\t\treturn this.geometry.width;\n\t}\n\n\tset width( width: number ) {\n\t\tthis.geometry.width = width;\n\t}\n\n\tget height(): number {\n\t\treturn this.geometry.height;\n\t}\n\n\tset height( height: number ) {\n\t\tthis.geometry.height = height;\n\t}\n\n\tget borderSize(): number {\n\t\treturn this.geometry.cornerMask;\n\t}\n\n\tset borderSize( borderSize: number ) {\n\t\tthis.geometry.borderSize = borderSize;\n\t}\n\n\tget cornerMask(): DCornerMask {\n\t\treturn this.geometry.cornerMask;\n\t}\n\n\tset cornerMask( cornerMask: DCornerMask ) {\n\t\tthis.geometry.cornerMask = cornerMask;\n\t}\n\n\tprotected _render( renderer: PIXI.Renderer ): void {\n\t\tthis.geometry.update();\n\t\tsuper._render( renderer );\n\t}\n\n\tupdate(): void {\n\t\tthis.geometry.update();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer, MeshGeometry, Texture, TextureUvs } from \"pixi.js\";\nimport { DBorderMask } from \"./d-border\";\nimport { DCornerMask } from \"./d-corner\";\n\nexport class DBaseBorderMeshGeometry extends MeshGeometry {\n\tprotected _texture: Texture;\n\tprotected _width: number;\n\tprotected _height: number;\n\tprotected _borderSize: number;\n\tprotected _borderMask: DBorderMask;\n\tprotected _cornerMask: DCornerMask;\n\tprotected _isDirty: boolean;\n\tprotected _textureId: number;\n\tprotected _vertices: Float32Array;\n\tprotected _uvs: Float32Array;\n\tprotected _indices: Uint16Array;\n\tprotected _vertexBuffer: Buffer;\n\tprotected _uvBuffer: Buffer;\n\tprotected _indexBuffer: Buffer;\n\n\tconstructor(\n\t\ttexture: Texture, width: number, height: number,\n\t\tborderSize: number, borderMask: DBorderMask, cornerMask: DCornerMask\n\t) {\n\t\tsuper( new Float32Array( 64 ), new Float32Array( 64 ), new Uint16Array( 48 ) );\n\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tthis._texture = texture;\n\t\tthis._borderSize = borderSize;\n\t\tthis._borderMask = borderMask;\n\t\tthis._cornerMask = cornerMask;\n\t\tthis._isDirty = true;\n\t\tthis._textureId = NaN;\n\n\t\tthis._vertexBuffer = this.getBuffer( \"aVertexPosition\" );\n\t\tthis._vertices = this._vertexBuffer.data as Float32Array;\n\t\tthis._uvBuffer = this.getBuffer( \"aTextureCoord\" );\n\t\tthis._uvs = this._uvBuffer.data as Float32Array;\n\t\tthis._indexBuffer = this.getIndex();\n\t\tthis._indices = this._indexBuffer.data as Uint16Array;\n\t}\n\n\tget borderMask(): DBorderMask {\n\t\treturn this._borderMask;\n\t}\n\n\tset borderMask( borderMask: DBorderMask ) {\n\t\tif( this._borderMask !== borderMask ) {\n\t\t\tthis._borderMask = borderMask;\n\t\t\tthis._isDirty = true;\n\t\t}\n\t}\n\n\tget cornerMask(): DCornerMask {\n\t\treturn this._cornerMask;\n\t}\n\n\tset cornerMask( cornerMask: DCornerMask ) {\n\t\tif( this._cornerMask !== cornerMask ) {\n\t\t\tthis._cornerMask = cornerMask;\n\t\t\tthis._isDirty = true;\n\t\t}\n\t}\n\n\tget borderSize(): number {\n\t\treturn this._borderSize;\n\t}\n\n\tset borderSize( borderSize: number ) {\n\t\tif( this._borderSize !== borderSize ) {\n\t\t\tthis._borderSize = borderSize;\n\t\t\tthis._isDirty = true;\n\t\t}\n\t}\n\n\tget width(): number {\n\t\treturn this._width;\n\t}\n\n\tset width( width: number ) {\n\t\tif( this._width !== width ) {\n\t\t\tthis._width = width;\n\t\t\tthis._isDirty = true;\n\t\t}\n\t}\n\n\tget height(): number {\n\t\treturn this._height;\n\t}\n\n\tset height( height: number ) {\n\t\tif( this._height !== height ) {\n\t\t\tthis._height = height;\n\t\t\tthis._isDirty = true;\n\t\t}\n\t}\n\n\tget texture(): Texture {\n\t\treturn this._texture;\n\t}\n\n\tset texture( texture: Texture ) {\n\t\tif( this._texture !== texture ) {\n\t\t\tthis._texture = texture;\n\t\t\tthis._isDirty = true;\n\t\t\tthis._textureId = NaN;\n\t\t}\n\t}\n\n\tprotected fillVertices( iv: number, array: Float32Array, x0: number, x1: number, y0: number, y1: number ): void {\n\t\tarray[ iv + 0 ] = x0;\n\t\tarray[ iv + 1 ] = y0;\n\t\tarray[ iv + 2 ] = x1;\n\t\tarray[ iv + 3 ] = y0;\n\t\tarray[ iv + 4 ] = x0;\n\t\tarray[ iv + 5 ] = y1;\n\t\tarray[ iv + 6 ] = x1;\n\t\tarray[ iv + 7 ] = y1;\n\t}\n\n\tprotected fillIndices( ii: number, indices: Uint16Array, iv: number ): void {\n\t\tindices[ ii + 0 ] = iv + 0;\n\t\tindices[ ii + 1 ] = iv + 1;\n\t\tindices[ ii + 2 ] = iv + 2;\n\t\tindices[ ii + 3 ] = iv + 1;\n\t\tindices[ ii + 4 ] = iv + 3;\n\t\tindices[ ii + 5 ] = iv + 2;\n\t}\n\n\tprotected fillUvsCorner(\n\t\tiv: number, uvs: Float32Array, b1: boolean, b2: boolean, c: boolean,\n\t\tu0: number, u1: number, u2: number, u3: number,\n\t\tv0: number, v1: number, v2: number, v3: number\n\t): void {\n\t\tif( b1 || b2 ) {\n\t\t\tif( c ) {\n\t\t\t\tthis.fillVertices( iv, uvs, u0, u1, v0, v1 );\n\t\t\t} else if( b1 && b2 ) {\n\t\t\t\tthis.fillVertices( iv, uvs, u3, u2, v0, v1 );\n\t\t\t} else if( b1 ) {\n\t\t\t\tthis.fillVertices( iv, uvs, u1, u2, v0, v1 );\n\t\t\t} else {\n\t\t\t\tthis.fillVertices( iv, uvs, u0, u1, v1, v2 );\n\t\t\t}\n\t\t} else {\n\t\t\tthis.fillVertices( iv, uvs, u1, u1, v1, v1 );\n\t\t}\n\t}\n\n\tprotected fillUvs(\n\t\tiv: number, uvs: Float32Array, b: boolean,\n\t\tu0: number, u1: number, v0: number, v1: number,\n\t\tuz: number, vz: number\n\t): void {\n\t\tif( b ) {\n\t\t\tthis.fillVertices( iv, uvs, u0, u1, v0, v1 );\n\t\t} else {\n\t\t\tthis.fillVertices( iv, uvs, uz, uz, vz, vz );\n\t\t}\n\t}\n\n\tupdate(): void {\n\t\tconst texture = this._texture as any;\n\t\tif( ! texture.valid ) {\n\t\t\treturn;\n\t\t}\n\t\tconst textureId = texture._updateID;\n\t\tif( this._isDirty || this._textureId !== textureId ) {\n\t\t\tthis._isDirty = false;\n\t\t\tthis._textureId = textureId;\n\t\t\tconst vertices = this._vertices;\n\t\t\tconst uvs = this._uvs;\n\t\t\tconst indices = this._indices;\n\n\t\t\tconst width = this._width;\n\t\t\tconst height = this._height;\n\t\t\tconst borderSize = this._borderSize;\n\n\t\t\tconst x0 = 0;\n\t\t\tconst x1 = Math.min( width * 0.5, borderSize );\n\t\t\tconst x2 = Math.max( width * 0.5, width - borderSize );\n\t\t\tconst x3 = width;\n\n\t\t\tconst y0 = 0;\n\t\t\tconst y1 = Math.min( height * 0.5, borderSize );\n\t\t\tconst y2 = Math.max( height * 0.5, height - borderSize );\n\t\t\tconst y3 = height;\n\n\t\t\tconst textureUvs: TextureUvs = texture._uvs;\n\n\t\t\tconst l = textureUvs.x0;\n\t\t\tconst r = textureUvs.x1;\n\t\t\tconst t = textureUvs.y0;\n\t\t\tconst b = textureUvs.y3;\n\t\t\tconst w = (r - l) * (borderSize / texture.width);\n\t\t\tconst h = (b - t) * (borderSize / texture.height);\n\n\t\t\tconst u0 = l;\n\t\t\tconst u1 = l + w;\n\t\t\tconst u2 = r - w;\n\t\t\tconst u3 = r;\n\n\t\t\tconst v0 = t;\n\t\t\tconst v1 = t + h;\n\t\t\tconst v2 = b - h;\n\t\t\tconst v3 = b;\n\n\t\t\tconst borderMask = this._borderMask;\n\t\t\tconst bt = ! (borderMask & DBorderMask.TOP);\n\t\t\tconst bb = ! (borderMask & DBorderMask.BOTTOM);\n\t\t\tconst bl = ! (borderMask & DBorderMask.LEFT);\n\t\t\tconst br = ! (borderMask & DBorderMask.RIGHT);\n\n\t\t\tconst cornerMask = this._cornerMask;\n\t\t\tconst ctl = ! (cornerMask & DCornerMask.TOP_LEFT);\n\t\t\tconst ctr = ! (cornerMask & DCornerMask.TOP_RIGHT);\n\t\t\tconst cbl = ! (cornerMask & DCornerMask.BOTTOM_LEFT);\n\t\t\tconst cbr = ! (cornerMask & DCornerMask.BOTTOM_RIGHT);\n\n\t\t\t// Vertices & UVs\n\t\t\tlet iv = 0;\n\t\t\tlet ia = 0;\n\t\t\tlet ii = 0;\n\n\t\t\t// Top left\n\t\t\tthis.fillVertices( iv, vertices, x0, x1, y0, y1 );\n\t\t\tthis.fillUvsCorner( iv, uvs, bt, bl, ctl, u0, u1, u2, u3, v0, v1, v2, v3 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Top middle\n\t\t\tthis.fillVertices( iv, vertices, x1, x2, y0, y1 );\n\t\t\tthis.fillUvs( iv, uvs, bt, u1, u2, v0, v1, u1, v1 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Top right\n\t\t\tthis.fillVertices( iv, vertices, x3, x2, y0, y1 );\n\t\t\tthis.fillUvsCorner( iv, uvs, bt, br, ctr, u0, u1, u2, u3, v0, v1, v2, v3 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Middle left\n\t\t\tthis.fillVertices( iv, vertices, x0, x1, y1, y2 );\n\t\t\tthis.fillUvs( iv, uvs, bl, u0, u1, v1, v2, u1, v1 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Middle right\n\t\t\tthis.fillVertices( iv, vertices, x2, x3, y1, y2 );\n\t\t\tthis.fillUvs( iv, uvs, br, u2, u3, v1, v2, u2, v2 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Bottom left\n\t\t\tthis.fillVertices( iv, vertices, x0, x1, y3, y2 );\n\t\t\tthis.fillUvsCorner( iv, uvs, bb, bl, cbl, u0, u1, u2, u3, v0, v1, v2, v3 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Bottom middle\n\t\t\tthis.fillVertices( iv, vertices, x1, x2, y2, y3 );\n\t\t\tthis.fillUvs( iv, uvs, bb, u1, u2, v2, v3, u2, v2 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Bottom right\n\t\t\tthis.fillVertices( iv, vertices, x3, x2, y3, y2 );\n\t\t\tthis.fillUvsCorner( iv, uvs, bb, br, cbr, u3, u2, u1, u0, v3, v2, v1, v0 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\n\t\t\tthis._vertexBuffer.update();\n\t\t\tthis._uvBuffer.update();\n\t\t\tthis._indexBuffer.update();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Mesh, MeshMaterial, Texture } from \"pixi.js\";\nimport { DBaseBorderMeshGeometry } from \"./d-base-border-mesh-geometry\";\nimport { DBorderMask } from \"./d-border\";\nimport { DCornerMask } from \"./d-corner\";\n\nexport class DBaseBorderMesh extends Mesh {\n\tgeometry!: DBaseBorderMeshGeometry;\n\tshader!: MeshMaterial;\n\n\tconstructor( texture: Texture, borderSize: number, borderMask: DBorderMask, cornerMask: DCornerMask ) {\n\t\tsuper(\n\t\t\tnew DBaseBorderMeshGeometry( texture, 100, 100, borderSize, borderMask, cornerMask ),\n\t\t\tnew MeshMaterial( texture )\n\t\t);\n\t}\n\n\tget texture() {\n\t\treturn this.shader.texture;\n\t}\n\n\tset texture( texture: Texture ) {\n\t\tif( this.shader.texture !== texture ) {\n\t\t\tthis.shader.texture = texture;\n\t\t\tthis.geometry.texture = texture;\n\t\t}\n\t}\n\n\tget width(): number {\n\t\treturn this.geometry.width;\n\t}\n\n\tset width( width: number ) {\n\t\tthis.geometry.width = width;\n\t}\n\n\tget height(): number {\n\t\treturn this.geometry.height;\n\t}\n\n\tset height( height: number ) {\n\t\tthis.geometry.height = height;\n\t}\n\n\tget borderSize(): number {\n\t\treturn this.geometry.borderSize;\n\t}\n\n\tset borderSize( borderSize: number ) {\n\t\tthis.geometry.borderSize = borderSize;\n\t}\n\n\tget borderMask(): DBorderMask {\n\t\treturn this.geometry.borderMask;\n\t}\n\n\tset borderMask( borderMask: DBorderMask ) {\n\t\tthis.geometry.borderMask = borderMask;\n\t}\n\n\tget cornerMask(): DCornerMask {\n\t\treturn this.geometry.cornerMask;\n\t}\n\n\tset cornerMask( cornerMask: DCornerMask ) {\n\t\tthis.geometry.cornerMask = cornerMask;\n\t}\n\n\tprotected _render( renderer: PIXI.Renderer ): void {\n\t\tthis.geometry.update();\n\t\tsuper._render( renderer );\n\t}\n\n\tupdate(): void {\n\t\tthis.geometry.update();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseBorderMesh } from \"./d-base-border-mesh\";\n\nexport class DBaseOutlineMesh extends DBaseBorderMesh {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DReflowable } from \"./d-base\";\nimport { DBaseBackgroundMesh } from \"./d-base-background-mesh\";\nimport { DBaseBorderMesh } from \"./d-base-border-mesh\";\nimport { DBaseOutlineMesh } from \"./d-base-outline-mesh\";\n\nexport class DBaseReflowable implements DReflowable {\n\tprotected _lastBackgroundCornerRadius: number;\n\tprotected _lastBorderCornerRadius: number;\n\tprotected _lastBorderWidth: number;\n\tprotected _lastOutlineCornerRadius: number;\n\tprotected _lastOutlineWidth: number;\n\tprotected _backgroundPlane: DBaseBackgroundMesh;\n\tprotected _borderPlane: DBaseBorderMesh;\n\tprotected _outlinePlane: DBaseOutlineMesh;\n\n\tconstructor( base: DBase ) {\n\t\tconst theme = base.theme;\n\t\tconst corner = base.corner;\n\t\tconst cornerRadius = corner.getRadius();\n\t\tconst cornerHeight = cornerRadius + 1;\n\t\tconst cornerMask = corner.getMask();\n\t\tconst backgroundPlane = this._backgroundPlane = new DBaseBackgroundMesh(\n\t\t\ttheme.getBackgroundTexture( cornerRadius ),\n\t\t\tcornerHeight, cornerMask\n\t\t);\n\t\tbase.appendRenderable( backgroundPlane, true );\n\n\t\tconst state = base.state;\n\n\t\tconst border = base.border;\n\t\tconst borderWidth = border.getWidth( state );\n\t\tconst borderMask = border.getMask( state );\n\t\tconst borderPlane = this._borderPlane = new DBaseBorderMesh(\n\t\t\ttheme.getBorderTexture( cornerRadius, borderWidth ),\n\t\t\tcornerHeight,\n\t\t\tborderMask,\n\t\t\tcornerMask\n\t\t);\n\t\tbase.appendRenderable( borderPlane, false );\n\n\t\tconst outline = base.outline;\n\t\tconst outlineWidth = outline.getWidth( state );\n\t\tconst outlineMask = outline.getMask( state );\n\t\tconst outlinePlane = this._outlinePlane = new DBaseOutlineMesh(\n\t\t\ttheme.getBorderTexture( cornerRadius, outlineWidth ),\n\t\t\tcornerHeight,\n\t\t\toutlineMask,\n\t\t\tcornerMask\n\t\t);\n\t\tbase.appendRenderable( outlinePlane, false );\n\n\t\tthis._lastBackgroundCornerRadius = cornerRadius;\n\t\tthis._lastBorderCornerRadius = cornerRadius;\n\t\tthis._lastBorderWidth = borderWidth;\n\t\tthis._lastOutlineCornerRadius = cornerRadius;\n\t\tthis._lastOutlineWidth = outlineWidth;\n\n\t\tbase.addReflowable( this );\n\t}\n\n\tonReflow( base: DBase, width: number, height: number ): void {\n\t\tconst theme = base.theme;\n\t\tconst state = base.state;\n\t\tconst corner = base.corner;\n\t\tconst cornerRadius = corner.getRadius();\n\t\tconst cornerHeight = cornerRadius + 1;\n\t\tconst cornerMask = corner.getMask();\n\n\t\t// Background\n\t\tconst background = base.background;\n\t\tconst backgroundPlane = this._backgroundPlane;\n\t\tconst backgroundColor = background.getColor( state );\n\t\tif( backgroundColor != null ) {\n\t\t\tconst backgroundAlpha = background.getAlpha( state );\n\t\t\tif( 0 < backgroundAlpha ) {\n\t\t\t\tif( this._lastBackgroundCornerRadius !== cornerRadius ) {\n\t\t\t\t\tthis._lastBackgroundCornerRadius = cornerRadius;\n\t\t\t\t\tbackgroundPlane.texture = theme.getBackgroundTexture( cornerRadius);\n\t\t\t\t\tbackgroundPlane.borderSize = cornerHeight;\n\t\t\t\t}\n\t\t\t\tbackgroundPlane.tint = backgroundColor;\n\t\t\t\tbackgroundPlane.alpha = backgroundAlpha;\n\t\t\t\tbackgroundPlane.width = width;\n\t\t\t\tbackgroundPlane.height = height;\n\t\t\t\tbackgroundPlane.cornerMask = cornerMask;\n\t\t\t\tbackgroundPlane.visible = true;\n\t\t\t} else {\n\t\t\t\tbackgroundPlane.visible = false;\n\t\t\t}\n\t\t} else {\n\t\t\tbackgroundPlane.visible = false;\n\t\t}\n\n\t\t// Border\n\t\tconst border = base.border;\n\t\tconst borderPlane = this._borderPlane;\n\t\tconst borderColor = border.getColor( state );\n\t\tif( borderColor != null ) {\n\t\t\tconst borderAlpha = border.getAlpha( state );\n\t\t\tif( 0 < borderAlpha ) {\n\t\t\t\tconst borderWidth = border.getWidth( state );\n\t\t\t\tif( this._lastBorderCornerRadius !== cornerRadius || this._lastBorderWidth !== borderWidth ) {\n\t\t\t\t\tthis._lastBorderCornerRadius = cornerRadius;\n\t\t\t\t\tthis._lastBorderWidth = borderWidth;\n\t\t\t\t\tborderPlane.texture = theme.getBorderTexture( cornerRadius, borderWidth );\n\t\t\t\t\tborderPlane.borderSize = cornerHeight;\n\t\t\t\t}\n\t\t\t\tconst borderAlign = border.getAlign( state );\n\t\t\t\tconst borderMask = border.getMask( state );\n\t\t\t\tborderPlane.tint = borderColor;\n\t\t\t\tborderPlane.alpha = borderAlpha;\n\t\t\t\tconst borderOffset = borderAlign * borderWidth;\n\t\t\t\tborderPlane.x = -borderOffset;\n\t\t\t\tborderPlane.y = -borderOffset;\n\t\t\t\tborderPlane.width = width + borderOffset * 2;\n\t\t\t\tborderPlane.height = height + borderOffset * 2;\n\t\t\t\tborderPlane.borderMask = borderMask;\n\t\t\t\tborderPlane.cornerMask = cornerMask;\n\t\t\t\tborderPlane.visible = true;\n\t\t\t} else {\n\t\t\t\tborderPlane.visible = false;\n\t\t\t}\n\t\t} else {\n\t\t\tborderPlane.visible = false;\n\t\t}\n\n\t\t// Outline\n\t\tconst outline = base.outline;\n\t\tconst outlinePlane = this._outlinePlane;\n\t\tconst outlineColor = outline.getColor( state );\n\t\tif( outlineColor != null ) {\n\t\t\tconst outlineAlpha = outline.getAlpha( state );\n\t\t\tif( 0 < outlineAlpha ) {\n\t\t\t\tconst outlineWidth = outline.getWidth( state );\n\t\t\t\tif( this._lastOutlineCornerRadius !== cornerRadius || this._lastOutlineWidth !== outlineWidth ) {\n\t\t\t\t\tthis._lastOutlineCornerRadius = cornerRadius;\n\t\t\t\t\tthis._lastOutlineWidth = outlineWidth;\n\t\t\t\t\toutlinePlane.texture = theme.getBorderTexture( cornerRadius, outlineWidth );\n\t\t\t\t\toutlinePlane.borderSize = cornerHeight;\n\t\t\t\t}\n\t\t\t\tconst outlineMask = outline.getMask( state );\n\t\t\t\tconst outlineOffset = outline.getOffset( state );\n\t\t\t\tconst outlineAlign = outline.getAlign( state );\n\t\t\t\toutlinePlane.tint = outlineColor;\n\t\t\t\toutlinePlane.alpha = outlineAlpha;\n\t\t\t\tconst outlineOffsetAccumulative = outlineOffset + outlineAlign * outlineWidth;\n\t\t\t\toutlinePlane.x = -outlineOffsetAccumulative;\n\t\t\t\toutlinePlane.y = -outlineOffsetAccumulative;\n\t\t\t\toutlinePlane.width = width + outlineOffsetAccumulative * 2;\n\t\t\t\toutlinePlane.height = height + outlineOffsetAccumulative * 2;\n\t\t\t\toutlinePlane.borderMask = outlineMask;\n\t\t\t\toutlinePlane.cornerMask = cornerMask;\n\t\t\t\toutlinePlane.visible = true;\n\t\t\t} else {\n\t\t\t\toutlinePlane.visible = false;\n\t\t\t}\n\t\t} else {\n\t\t\toutlinePlane.visible = false;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\n\nexport class DBaseStates {\n\tstatic is( target: DBaseState, state: DBaseState ): boolean {\n\t\treturn ( (target & state) !== 0 );\n\t}\n\n\tstatic isHovered( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.HOVERED );\n\t}\n\n\tstatic isDragging( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.DRAGGING );\n\t}\n\n\tstatic isFocused( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.FOCUSED );\n\t}\n\n\tstatic isFocusedIn( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.FOCUSED | DBaseState.FOCUSED_IN );\n\t}\n\n\tstatic isActive( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.ACTIVE );\n\t}\n\n\tstatic isActiveIn( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.ACTIVE | DBaseState.ACTIVE_IN );\n\t}\n\n\tstatic isNotActive( state: DBaseState ): boolean {\n\t\treturn DBaseStates.is( state, DBaseState.DISABLED ) || ! DBaseStates.is( state, DBaseState.ACTIVE );\n\t}\n\n\tstatic isPressed( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.PRESSED );\n\t}\n\n\tstatic isDisabled( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.DISABLED );\n\t}\n\n\tstatic isReadOnly( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.READ_ONLY );\n\t}\n\n\tstatic isActionable( target: DBaseState ) {\n\t\treturn ! DBaseStates.is( target, DBaseState.DISABLED | DBaseState.READ_ONLY );\n\t}\n\n\tstatic isInvalid( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.INVALID );\n\t}\n\n\tstatic isSucceeded( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.SUCCEEDED );\n\t}\n\n\tstatic isFailed( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.FAILED );\n\t}\n\n\tstatic bind(\n\t\tdestination: DBase<any, any>, destinationState: DBaseState,\n\t\tsource: DBase<any, any>, when: ( sourceState: DBaseState ) => boolean\n\t) {\n\t\tdestination.setState( destinationState, when( source.state ) );\n\t\tsource.on( \"statechange\", ( newSourceState: DBaseState ) => {\n\t\t\tdestination.setState( destinationState, when( newSourceState ) );\n\t\t});\n\t}\n\n\tstatic disable(\n\t\tdestination: DBase<any, any>, source: DBase<any, any>,\n\t\twhen: ( sourceState: DBaseState ) => boolean = DBaseStates.isNotActive\n\t) {\n\t\tDBaseStates.bind( destination, DBaseState.DISABLED, source, when );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum DCommandFlag {\n\tNONE = 0,\n\n\t/**\n\t * Commands with a `UNSTORABLE` flag will not be queued to the `done` queue.\n\t */\n\tUNSTORABLE = 1,\n\n\t/**\n\t * Commands with a `CLEAR` flag clears the command queue.\n\t */\n\tCLEAR = 2\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCommand } from \"./d-command\";\nimport { DCommandFlag } from \"./d-command-flag\";\n\nexport class DCommandClear implements DCommand {\n\texecute(): Promise<unknown> | boolean {\n\t\treturn true;\n\t}\n\n\tredo(): Promise<unknown> | boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tundo(): Promise<unknown> | boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tdestroy(): void {\n\t\t// DO NOTHING\n\t}\n\n\tgetFlag(): DCommandFlag {\n\t\treturn DCommandFlag.UNSTORABLE | DCommandFlag.CLEAR;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DScalar } from \"./d-scalar\";\nimport { utilIsNumber } from \"./util/util-is-number\";\n\nconst enum NodeType {\n\t// Parensesis\n\tOPEN,\n\tCLOSE,\n\tPARENSESIS,\n\n\t// Operations\n\tADD_OR_PLUS,\n\tSUB_OR_MINUS,\n\n\tPLUS,\n\tMINUS,\n\n\tADD,\n\tSUB,\n\tMUL,\n\tDIV,\n\n\t// Literals\n\tPARENT,\n\tSELF,\n\tPADDING,\n\tCURRENT,\n\tNUMBER\n}\n\ntype NodeTypeOperator = NodeType.SUB_OR_MINUS | NodeType.ADD_OR_PLUS |\n\tNodeType.SUB | NodeType.ADD | NodeType.MUL | NodeType.DIV |\n\tNodeType.OPEN | NodeType.CLOSE;\ntype NodeTypeLiteral = NodeType.NUMBER | NodeType.PARENT | NodeType.SELF | NodeType.PADDING | NodeType.CURRENT;\ntype Token = NodeTypeOperator | [ NodeTypeLiteral, number ];\n\ninterface NodeOrTokenParensesis {\n\t[ 0 ]: NodeType.PARENSESIS;\n\t[ 1 ]: NodeOrToken[];\n}\n\ninterface NodeOrTokenUnary {\n\t[ 0 ]: NodeType.PLUS | NodeType.MINUS;\n\t[ 1 ]: NodeOrToken;\n}\n\ntype NodeArithmeticOperator = NodeType.SUB | NodeType.ADD | NodeType.MUL | NodeType.DIV;\n\ninterface NodeOrTokenArithmetic {\n\t[ 0 ]: NodeArithmeticOperator;\n\t[ 1 ]: NodeOrToken;\n\t[ 2 ]: NodeOrToken;\n}\n\ninterface NodeLiteral {\n\t[ 0 ]: NodeTypeLiteral;\n\t[ 1 ]: number;\n}\n\ntype NodeOrToken = Token | NodeOrTokenParensesis | NodeOrTokenUnary | NodeOrTokenArithmetic;\n\ninterface NodeParensesis {\n\t[ 0 ]: NodeType.PARENSESIS;\n\t[ 1 ]: Node[];\n}\n\ninterface NodeUnary {\n\t[ 0 ]: NodeType.PLUS | NodeType.MINUS;\n\t[ 1 ]: Node;\n}\n\ninterface NodeArithmetic {\n\t[ 0 ]: NodeArithmeticOperator;\n\t[ 1 ]: Node;\n\t[ 2 ]: Node;\n}\n\ntype Node = NodeParensesis | NodeUnary | NodeArithmetic | NodeLiteral;\n\nconst TOKEN_MAPPING_OPERATOR: { [ token: string ]: NodeTypeOperator | undefined } = {\n\t\"+\": NodeType.ADD_OR_PLUS,\n\t\"-\": NodeType.SUB_OR_MINUS,\n\t\"*\": NodeType.MUL,\n\t\"/\": NodeType.DIV,\n\t\"(\": NodeType.OPEN,\n\t\")\": NodeType.CLOSE\n};\n\nconst TOKEN_MAPPING_LITERAL: { [ token: string ]: NodeTypeLiteral | undefined } = {\n\t\"%\": NodeType.PARENT,\n\t\"s\": NodeType.SELF,\n\t\"p\": NodeType.PADDING,\n\t\"c\": NodeType.CURRENT\n};\n\n/**\n * Parser and evaluator of the scalar expressions like `100% - 50s`.\n *\n * Literals\n *\n * * x%: 0.01 * x * parent value\n * * xs: 0.01 * x * self value\n * * xp: 0.01 * x * padding\n * * xc: 0.01 * x * current\n *\n * Operators\n *\n * * `+`\n * * `-`\n * * `*`\n * * `/`\n * * `(` and `)`\n *\n * Examples\n *\n * * `90%`: 0.9 * parent value\n * * `50s`: 0.5 * self value\n * * `90% - 50s`: 0.9 * parent value - 0.5 * self value\n * * `90% - (50s + 100) * 2`: 0.9 * parent value - ( 0.5 * self value + 100 ) * 2\n */\nexport class DScalarExpression implements DScalar {\n\tprotected _node: Node;\n\n\tconstructor( expression: string ) {\n\t\tconst nodes: NodeOrToken[] = this.toToken( expression );\n\t\tthis.toParensesis( nodes, 0 );\n\t\tthis.toUnary( nodes );\n\t\tthis.toArithmetic( nodes, NodeType.MUL, NodeType.DIV );\n\t\tthis.toArithmetic( nodes, NodeType.ADD, NodeType.SUB );\n\t\tif( nodes.length === 1 ) {\n\t\t\tconst node = nodes[ 0 ];\n\t\t\tif( ! utilIsNumber( node ) ) {\n\t\t\t\tthis._node = node as any;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tthrow new Error( `Failed to parse '${expression}'` );\n\t}\n\n\ttoParensesis( nodes: NodeOrToken[], from: number ): void {\n\t\tfor( let i = from, imax = nodes.length; i < imax; ++i ) {\n\t\t\tconst inode = nodes[ i ];\n\t\t\tif( inode === NodeType.OPEN ) {\n\t\t\t\tfor( let j = i + 1, jmax = nodes.length; j < jmax; ++j ) {\n\t\t\t\t\tconst jnode = nodes[ j ];\n\t\t\t\t\tswitch( jnode ) {\n\t\t\t\t\tcase NodeType.CLOSE:\n\t\t\t\t\t\tconst operand = nodes.splice( i + 1, j - i );\n\t\t\t\t\t\toperand.length -= 1;\n\t\t\t\t\t\tnodes[ i ] = [ NodeType.PARENSESIS, operand ];\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase NodeType.OPEN:\n\t\t\t\t\t\tthis.toParensesis( nodes, j );\n\t\t\t\t\t\tjmax = nodes.length;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthrow new Error( `Malformed parensesis` );\n\t\t\t}\n\t\t}\n\t}\n\n\ttoUnaryNode( node: NodeOrToken ): void {\n\t\tif( ! utilIsNumber( node ) && node[ 0 ] === NodeType.PARENSESIS ) {\n\t\t\tthis.toUnary( node[ 1 ] );\n\t\t}\n\t}\n\n\ttoUnary( nodes: NodeOrToken[] ): void {\n\t\tfor( let i = 0, imax = nodes.length; i < imax; ++i ) {\n\t\t\tconst node = nodes[ i ];\n\t\t\tif( node === NodeType.ADD_OR_PLUS || node === NodeType.SUB_OR_MINUS ) {\n\t\t\t\tif( i <= 0 || utilIsNumber( nodes[ i - 1 ] ) ) {\n\t\t\t\t\tif( i + 1 < imax && ! utilIsNumber( nodes[ i + 1 ] ) ) {\n\t\t\t\t\t\tconst operand = nodes.splice( i + 1, 1 )[ 0 ];\n\t\t\t\t\t\tconst type = ( node === NodeType.ADD_OR_PLUS ? NodeType.PLUS : NodeType.MINUS );\n\t\t\t\t\t\tnodes[ i ] = [ type, operand ];\n\t\t\t\t\t\timax = nodes.length;\n\t\t\t\t\t\tthis.toUnaryNode( operand );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error( \"Malformed unary operator\" );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst type = ( node === NodeType.ADD_OR_PLUS ? NodeType.ADD : NodeType.SUB );\n\t\t\t\t\tnodes[ i ] = type;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.toUnaryNode( node );\n\t\t\t\timax = nodes.length;\n\t\t\t}\n\t\t}\n\t}\n\n\ttoArithmeticNode( node: NodeOrToken, operatorA: NodeArithmeticOperator, operatorB: NodeArithmeticOperator ): void {\n\t\tif( ! utilIsNumber( node ) ) {\n\t\t\tif( node[ 0 ] === NodeType.PARENSESIS ) {\n\t\t\t\tthis.toArithmetic( node[ 1 ], operatorA, operatorB );\n\t\t\t} else if( node[ 0 ] === NodeType.PLUS || node[ 0 ] === NodeType.MINUS ) {\n\t\t\t\tthis.toArithmeticNode( node[ 1 ], operatorA, operatorB );\n\t\t\t} else if( node[ 0 ] === NodeType.ADD || node[ 0 ] === NodeType.SUB ||\n\t\t\t\tnode[ 0 ] === NodeType.MUL || node[ 0 ] === NodeType.DIV ) {\n\t\t\t\tthis.toArithmeticNode( node[ 1 ], operatorA, operatorB );\n\t\t\t\tthis.toArithmeticNode( node[ 2 ], operatorA, operatorB );\n\t\t\t}\n\t\t}\n\t}\n\n\ttoArithmetic( nodes: NodeOrToken[], operatorA: NodeArithmeticOperator, operatorB: NodeArithmeticOperator ): void {\n\t\tfor( let i = 0, imax = nodes.length; i < imax; ++i ) {\n\t\t\tconst node = nodes[ i ];\n\t\t\tif( node === operatorA || node === operatorB ) {\n\t\t\t\tif( 0 < i && i + 1 < imax ) {\n\t\t\t\t\tconst left = nodes[ i - 1 ];\n\t\t\t\t\tconst right = nodes[ i + 1 ];\n\t\t\t\t\tif( ! utilIsNumber( left ) && ! utilIsNumber( right ) ) {\n\t\t\t\t\t\tnodes.splice( i, 2 );\n\t\t\t\t\t\tnodes[ i - 1 ] = [ node, left, right ];\n\t\t\t\t\t\ti -= 1;\n\t\t\t\t\t\timax = nodes.length;\n\t\t\t\t\t\tthis.toArithmeticNode( left, operatorA, operatorB );\n\t\t\t\t\t\tthis.toArithmeticNode( right, operatorA, operatorB );\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthrow new Error( `Malformed operands for the operator ${node}` );\n\t\t\t} else {\n\t\t\t\tthis.toArithmeticNode( node, operatorA, operatorB );\n\t\t\t\timax = nodes.length;\n\t\t\t}\n\t\t}\n\t}\n\n\ttoToken( expression: string ): Token[] {\n\t\tconst tokenRegEx = /(?:\\+|-|\\*|\\/|\\(|\\)|(?:\\d+(?:\\.\\d*)?[%psc]?))/g;\n\t\tconst tokens: Token[] = [];\n\t\twhile( true ) {\n\t\t\tconst matched = tokenRegEx.exec( expression );\n\t\t\tif( matched != null ) {\n\t\t\t\tconst token = matched[ 0 ];\n\t\t\t\tconst tokenTypeOperator = TOKEN_MAPPING_OPERATOR[ token ];\n\t\t\t\tif( tokenTypeOperator != null ) {\n\t\t\t\t\ttokens.push( tokenTypeOperator );\n\t\t\t\t} else {\n\t\t\t\t\tconst parsedToken = parseFloat( token );\n\t\t\t\t\tif( parsedToken !== parsedToken ) {\n\t\t\t\t\t\tthrow new Error( `Unexpected token '${token}' at ${matched.index} in '${expression}'` );\n\t\t\t\t\t}\n\n\t\t\t\t\tconst tokenTypeLiteral = TOKEN_MAPPING_LITERAL[ token[ token.length - 1 ] ];\n\t\t\t\t\tif( tokenTypeLiteral != null ) {\n\t\t\t\t\t\ttokens.push([ tokenTypeLiteral, parsedToken * 0.01 ]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttokens.push([ NodeType.NUMBER, parsedToken ]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn tokens;\n\t}\n\n\tprotected evaluate( node: Node, parent: number, self: number, padding: number, current: number ): number {\n\t\tswitch( node[ 0 ] ) {\n\t\tcase NodeType.PARENSESIS:\n\t\t\treturn this.evaluate( node[ 1 ][ 0 ], parent, self, padding, current );\n\n\t\t// Unary operators\n\t\tcase NodeType.PLUS:\n\t\t\treturn + this.evaluate( node[ 1 ], parent, self, padding, current );\n\n\t\tcase NodeType.MINUS:\n\t\t\treturn - this.evaluate( node[ 1 ], parent, self, padding, current );\n\n\t\t// Four arithmetic operators\n\t\tcase NodeType.ADD:\n\t\t\treturn this.evaluate( node[ 1 ], parent, self, padding, current ) +\n\t\t\t\tthis.evaluate( node[ 2 ], parent, self, padding, current );\n\t\tcase NodeType.SUB:\n\t\t\treturn this.evaluate( node[ 1 ], parent, self, padding, current ) -\n\t\t\t\tthis.evaluate( node[ 2 ], parent, self, padding, current );\n\t\tcase NodeType.MUL:\n\t\t\treturn this.evaluate( node[ 1 ], parent, self, padding, current ) *\n\t\t\t\tthis.evaluate( node[ 2 ], parent, self, padding, current );\n\t\tcase NodeType.DIV:\n\t\t\treturn this.evaluate( node[ 1 ], parent, self, padding, current ) /\n\t\t\t\tthis.evaluate( node[ 2 ], parent, self, padding, current );\n\n\t\t// Literals\n\t\tcase NodeType.PARENT:\n\t\t\treturn node[ 1 ] * parent;\n\t\tcase NodeType.SELF:\n\t\t\treturn node[ 1 ] * self;\n\t\tcase NodeType.PADDING:\n\t\t\treturn node[ 1 ] * padding;\n\t\tcase NodeType.CURRENT:\n\t\t\treturn node[ 1 ] * current;\n\t\tcase NodeType.NUMBER:\n\t\t\treturn node[ 1 ];\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tcalculate( parent: number, self: number, padding: number, current: number ): number {\n\t\treturn this.evaluate( this._node, parent, self, padding, current );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCommand } from \"./d-command\";\nimport { DCommandFlag } from \"./d-command-flag\";\n\nexport class DCommandRedo implements DCommand {\n\texecute(): Promise<void> | boolean {\n\t\tthrow new Error( \"Not supported\" );\n\t}\n\n\tredo(): Promise<void> | boolean {\n\t\tthrow new Error( \"Not supported\" );\n\t}\n\n\tundo(): Promise<void> | boolean {\n\t\tthrow new Error( \"Not supported\" );\n\t}\n\n\tdestroy(): void {\n\t\t// DO NOTHING\n\t}\n\n\tgetFlag(): DCommandFlag {\n\t\treturn DCommandFlag.UNSTORABLE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCommand } from \"./d-command\";\nimport { DCommandFlag } from \"./d-command-flag\";\n\nexport class DCommandUndo implements DCommand {\n\texecute(): Promise<void> | boolean {\n\t\tthrow new Error( \"Not supported\" );\n\t}\n\n\tredo(): Promise<void> | boolean {\n\t\tthrow new Error( \"Not supported\" );\n\t}\n\n\tundo(): Promise<void> | boolean {\n\t\tthrow new Error( \"Not supported\" );\n\t}\n\n\tdestroy(): void {\n\t\t// DO NOTHING\n\t}\n\n\tgetFlag(): DCommandFlag {\n\t\treturn DCommandFlag.UNSTORABLE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\nimport { DCommand } from \"./d-command\";\nimport { DCommandClear } from \"./d-command-clear\";\nimport { DCommandFlag } from \"./d-command-flag\";\nimport { DCommandRedo } from \"./d-command-redo\";\nimport { DCommandUndo } from \"./d-command-undo\";\nimport { DControllerCommand } from \"./d-controller-command\";\n\nconst isCommandStorable = ( command: DCommand ): boolean => {\n\treturn ( command.getFlag() & DCommandFlag.UNSTORABLE ) === 0;\n};\n\nconst isCommandClear = ( command: DCommand ): boolean => {\n\treturn ( command.getFlag() & DCommandFlag.CLEAR ) !== 0;\n};\n\nexport class DControllerDefaultCommand extends utils.EventEmitter implements DControllerCommand {\n\tprotected _position: number;\n\tprotected _done: DCommand[];\n\tprotected _waiting: DCommand[];\n\tprotected _executing: Promise<void> | null;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._position = 0;\n\t\tthis._done = [];\n\t\tthis._waiting = [];\n\t\tthis._executing = null;\n\t}\n\n\tlast(): DCommand | null {\n\t\tconst done = this._done;\n\t\tconst waiting = this._waiting;\n\n\t\tif( waiting.length <= 0 ) {\n\t\t\tif( 0 < done.length ) {\n\t\t\t\treturn done[ done.length - 1 ];\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else {\n\t\t\treturn waiting[ waiting.length - 1 ];\n\t\t}\n\t}\n\n\tpush( command: DCommand ): void {\n\t\tconst waiting = this._waiting;\n\t\twaiting.push( command );\n\t\tthis.next();\n\t}\n\n\tnext() {\n\t\tif( this._executing == null ) {\n\t\t\tconst waiting = this._waiting;\n\t\t\tif( 0 < waiting.length ) {\n\t\t\t\tconst command = waiting.shift();\n\t\t\t\tif( command != null ) {\n\t\t\t\t\tif( command instanceof DCommandUndo ) {\n\t\t\t\t\t\tconst done = this._done;\n\t\t\t\t\t\tif( this._position < done.length ) {\n\t\t\t\t\t\t\tconst current = done[ done.length - 1 - this._position ];\n\t\t\t\t\t\t\tthis._position += 1;\n\t\t\t\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\t\t\t\tconst result = current.undo();\n\t\t\t\t\t\t\tif( result === true ) {\n\t\t\t\t\t\t\t\tthis.onSuccess( command );\n\t\t\t\t\t\t\t} else if( result === false ) {\n\t\t\t\t\t\t\t\tthis.onFail( command );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis._executing = result.then(() => {\n\t\t\t\t\t\t\t\t\tthis.onSuccess( command );\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tthis.onFail( command );\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if( command instanceof DCommandRedo ) {\n\t\t\t\t\t\tconst done = this._done;\n\t\t\t\t\t\tif( 0 < this._position ) {\n\t\t\t\t\t\t\tconst current = done[ done.length - this._position ];\n\t\t\t\t\t\t\tthis._position -= 1;\n\t\t\t\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\t\t\t\tconst result = current.redo();\n\t\t\t\t\t\t\tif( result === true ) {\n\t\t\t\t\t\t\t\tthis.onSuccess( command );\n\t\t\t\t\t\t\t} else if( result === false ) {\n\t\t\t\t\t\t\t\tthis.onFail( command );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis._executing = result.then(() => {\n\t\t\t\t\t\t\t\t\tthis.onSuccess( command );\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tthis.onFail( command );\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst isClear = isCommandClear( command );\n\t\t\t\t\t\tconst isStorable = isCommandStorable( command );\n\t\t\t\t\t\tif( isClear || isStorable ) {\n\t\t\t\t\t\t\tconst size = ( isClear ? this._done.length : this._position );\n\t\t\t\t\t\t\tif( 0 < size ) {\n\t\t\t\t\t\t\t\tthis.remove( size );\n\t\t\t\t\t\t\t\tthis._position = 0;\n\t\t\t\t\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.cleanup();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst result = command.execute();\n\t\t\t\t\t\tif( result === true ) {\n\t\t\t\t\t\t\tthis.onSuccess( command );\n\t\t\t\t\t\t} else if( result === false ) {\n\t\t\t\t\t\t\tthis.onFail( command );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._executing = result.then(() => {\n\t\t\t\t\t\t\t\tthis.onSuccess( command );\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\tthis.onFail( command );\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected cleanup(): void {\n\t\tconst done = this._done;\n\t\tconst size = done.length - 100;\n\t\tif( 0 < size ) {\n\t\t\tfor( let i = 0; i < size; ++i ) {\n\t\t\t\tdone[ i ].destroy();\n\t\t\t\tdone.shift();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected remove( size: number ): boolean {\n\t\tconst done = this._done;\n\t\tif( 0 < size ) {\n\t\t\tconst ifrom = Math.max( 0, done.length - size );\n\t\t\tsize = done.length - ifrom;\n\t\t\tif( 0 < size ) {\n\t\t\t\tfor( let i = ifrom, imax = done.length; i < imax; ++i ) {\n\t\t\t\t\tdone[ i ].destroy();\n\t\t\t\t}\n\n\t\t\t\tdone.splice( ifrom, done.length - ifrom );\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected onSuccess( command: DCommand ) {\n\t\tthis._executing = null;\n\t\tif( isCommandStorable( command ) ) {\n\t\t\tthis._done.push( command );\n\t\t\tthis.emit( \"dirty\", this );\n\t\t} else if( command instanceof DCommandUndo || command instanceof DCommandRedo ) {\n\t\t\tthis.emit( \"dirty\", this );\n\t\t}\n\t\tthis.emit( \"change\", this );\n\t\tthis.next();\n\t}\n\n\tprotected onFail( command: DCommand ) {\n\t\tthis._executing = null;\n\t\tconst waiting = this._waiting;\n\t\tcommand.destroy();\n\t\tfor( let i = 0, imax = waiting.length; i < imax; ++i ) {\n\t\t\twaiting[ i ].destroy();\n\t\t}\n\t\twaiting.length = 0;\n\t\tthis.emit( \"change\", this );\n\t}\n\n\tsize(): number {\n\t\treturn this._done.length;\n\t}\n\n\tclear(): void {\n\t\tthis.push( new DCommandClear() );\n\t}\n\n\tredo(): void {\n\t\tif( this.isRedoable() ) {\n\t\t\tthis._waiting.push( new DCommandRedo() );\n\t\t\tthis.next();\n\t\t}\n\t}\n\n\tundo(): void {\n\t\tif( this.isUndoable() ) {\n\t\t\tthis._waiting.push( new DCommandUndo() );\n\t\t\tthis.next();\n\t\t}\n\t}\n\n\tisRedoable(): boolean {\n\t\treturn ( 0 < this._position && this._executing == null );\n\t}\n\n\tisUndoable(): boolean {\n\t\treturn ( this._position < this._done.length && this._executing == null );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport {\n\tDControllerFocus, DFocusable, DFocusableContainer, DFocusableMightBe\n} from \"./d-controller-focus\";\n\nconst isFocusable = ( target: any ): target is DFocusable => {\n\treturn ( target != null && (\"setState\" in target) );\n};\n\nconst isFocusableContainer = ( target: any ): target is DFocusableContainer => {\n\treturn ( target != null && \"children\" in target );\n};\n\ninterface Selectable {\n\tselect(): void;\n}\n\nconst isSelectable = ( target: any ): target is Selectable => {\n\treturn ( target != null && \"select\" in target );\n};\n\nexport class DControllerDefaultFocus implements DControllerFocus {\n\tprivate _focused: DFocusable | null = null;\n\n\tsetFocused( focusable: DFocusable | null, isFocused: boolean, select: boolean ): DFocusable | null {\n\t\tif( isFocused ) {\n\t\t\tconst previous = this._focused;\n\t\t\tif( previous !== focusable ) {\n\t\t\t\tif( previous != null ) {\n\t\t\t\t\tprevious.setState( DBaseState.FOCUSED, false );\n\t\t\t\t}\n\n\t\t\t\tthis._focused = focusable;\n\t\t\t\tif( focusable != null && this.isFocusable( focusable ) ) {\n\t\t\t\t\tfocusable.setState( DBaseState.FOCUSED, true );\n\t\t\t\t\tif( select && isSelectable( focusable ) ) {\n\t\t\t\t\t\tfocusable.select();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn previous;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else {\n\t\t\tif( focusable != null && this._focused === focusable ) {\n\t\t\t\tfocusable.setState( DBaseState.FOCUSED, false );\n\t\t\t\tif( select && isSelectable( focusable ) ) {\n\t\t\t\t\tfocusable.select();\n\t\t\t\t}\n\t\t\t\treturn focusable;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetFocused(): DFocusable | null {\n\t\treturn this._focused;\n\t}\n\n\tfindFocusableParent( mightBeFocusable: DFocusableMightBe | null ): DFocusable | null {\n\t\tlet current: DFocusableMightBe | DFocusableContainer | null = mightBeFocusable;\n\t\twhile( current != null ) {\n\t\t\tif( this.isFocusable( current ) ) {\n\t\t\t\treturn current;\n\t\t\t} else {\n\t\t\t\tcurrent = current.parent;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected isFocusable( target: unknown ): target is DFocusable {\n\t\treturn (\n\t\t\tisFocusable( target ) &&\n\t\t\t! target.hasState( DBaseState.DISABLED | DBaseState.UNFOCUSABLE ) &&\n\t\t\ttarget.visible\n\t\t);\n\t}\n\n\tprotected isFocusRoot( target: unknown ): target is DFocusable {\n\t\treturn (\n\t\t\tisFocusable( target ) &&\n\t\t\ttarget.hasState( DBaseState.FOCUS_ROOT ) &&\n\t\t\ttarget.visible\n\t\t);\n\t}\n\n\tfindFocusable(\n\t\ttarget: DFocusableMightBe, includesTarget: boolean, includesTargetChildren: boolean, direction: boolean\n\t): DFocusable | null {\n\t\tif( direction ) {\n\t\t\tconst result = this.findFocusableNext( target, includesTarget, includesTargetChildren );\n\t\t\tif( result != null ) {\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tconst parent = target.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tconst children = parent.children;\n\t\t\t\tconst index = children.indexOf( target );\n\t\t\t\tif( 0 <= index ) {\n\t\t\t\t\t// Siblings\n\t\t\t\t\tfor( let i = index + 1, imax = children.length; i < imax; ++i ) {\n\t\t\t\t\t\tconst found = this.findFocusableNext( children[ i ], true, true );\n\t\t\t\t\t\tif( found != null ) {\n\t\t\t\t\t\t\treturn found;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif( this.isFocusRoot( parent ) ) {\n\t\t\t\t\t\tfor( let i = 0, imax = index + 1; i < imax; ++i ) {\n\t\t\t\t\t\t\tconst found = this.findFocusableNext( children[ i ], true, true );\n\t\t\t\t\t\t\tif( found != null ) {\n\t\t\t\t\t\t\t\treturn found;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Parent\n\t\t\t\t\treturn this.findFocusable( parent, false, false, true );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tconst result = this.findFocusablePrevious( target, includesTarget, includesTargetChildren );\n\t\t\tif( result != null ) {\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tconst parent = target.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tconst children = parent.children;\n\t\t\t\tconst index = children.indexOf( target );\n\t\t\t\tif( 0 <= index ) {\n\t\t\t\t\t// Siblings\n\t\t\t\t\tfor( let i = index - 1; 0 <= i; --i ) {\n\t\t\t\t\t\tconst found = this.findFocusablePrevious( children[ i ], true, true );\n\t\t\t\t\t\tif( found != null ) {\n\t\t\t\t\t\t\treturn found;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif( this.isFocusRoot( parent ) ) {\n\t\t\t\t\t\tfor( let i = children.length - 1; index <= i; --i ) {\n\t\t\t\t\t\t\tconst found = this.findFocusablePrevious( children[ i ], true, true );\n\t\t\t\t\t\t\tif( found != null ) {\n\t\t\t\t\t\t\t\treturn found;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn parent;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Parent\n\t\t\t\t\treturn this.findFocusable( parent, true, false, false );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected findFocusableNext(\n\t\ttarget: DFocusableMightBe, includesTarget: boolean, includesTargetChildren: boolean\n\t): DFocusable | null {\n\t\t// Target itself\n\t\tif( includesTarget ) {\n\t\t\tif( this.isFocusable( target ) ) {\n\t\t\t\treturn target;\n\t\t\t}\n\t\t}\n\n\t\t// Target children\n\t\tif( includesTargetChildren && isFocusableContainer( target ) && target.visible ) {\n\t\t\tconst children = target.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst found = this.findFocusableNext( children[ i ], true, true );\n\t\t\t\tif( found != null ) {\n\t\t\t\t\treturn found;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Siblings\n\t\tif( this.isFocusRoot( target ) ) {\n\t\t\treturn target;\n\t\t}\n\n\t\t// Found nothing\n\t\treturn null;\n\t}\n\n\tprotected findFocusablePrevious(\n\t\ttarget: DFocusableMightBe, includesTarget: boolean, includesTargetChildren: boolean\n\t): DFocusable | null {\n\t\t// Target children\n\t\tif( includesTargetChildren && isFocusableContainer( target ) && target.visible ) {\n\t\t\tconst children = target.children;\n\t\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\t\tconst found = this.findFocusablePrevious( children[ i ], true, true );\n\t\t\t\tif( found != null ) {\n\t\t\t\t\treturn found;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Target itself\n\t\tif( includesTarget ) {\n\t\t\tif( this.isFocusable( target ) ) {\n\t\t\t\treturn target;\n\t\t\t}\n\t\t}\n\n\t\t// Siblings\n\t\tif( this.isFocusRoot( target ) ) {\n\t\t\treturn target;\n\t\t}\n\n\t\t// Found nothing\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"../d-base\";\nimport { utilIsString } from \"./util-is-string\";\n\nexport interface UtilKeyboardEventShortcut {\n\talt: boolean;\n\tctrl: boolean;\n\tshift: boolean;\n\tkey: string;\n\twhich: number;\n\tevent?: string;\n}\n\nconst setShortcutKeyAndWhich = ( shortcut: UtilKeyboardEventShortcut ): UtilKeyboardEventShortcut => {\n\tconst key = shortcut.key;\n\tif( key.length <= 1 ) {\n\t\tif( shortcut.shift ) {\n\t\t\tshortcut.key = key.toUpperCase();\n\t\t}\n\t\tconst code = key.charCodeAt( 0 );\n\t\tif( 97 <= code && code <= 122 ) {\n\t\t\t// a ... z\n\t\t\tshortcut.which = code - 32;\n\t\t} else {\n\t\t\tshortcut.which = code;\n\t\t}\n\t} else {\n\t\tswitch( key ) {\n\t\tcase \"Enter\":\n\t\t\tshortcut.which = 13;\n\t\t\tbreak;\n\t\tcase \"Space\":\n\t\t\tshortcut.key = \" \";\n\t\t\tshortcut.which = 32;\n\t\t\tbreak;\n\t\tcase \"Escape\":\n\t\t\tshortcut.which = 27;\n\t\t\tbreak;\n\t\tcase \"F1\":\n\t\t\tshortcut.which = 112;\n\t\t\tbreak;\n\t\tcase \"F2\":\n\t\t\tshortcut.which = 113;\n\t\t\tbreak;\n\t\tcase \"F3\":\n\t\t\tshortcut.which = 114;\n\t\t\tbreak;\n\t\tcase \"F4\":\n\t\t\tshortcut.which = 115;\n\t\t\tbreak;\n\t\tcase \"F5\":\n\t\t\tshortcut.which = 116;\n\t\t\tbreak;\n\t\tcase \"F6\":\n\t\t\tshortcut.which = 117;\n\t\t\tbreak;\n\t\tcase \"F7\":\n\t\t\tshortcut.which = 118;\n\t\t\tbreak;\n\t\tcase \"F8\":\n\t\t\tshortcut.which = 119;\n\t\t\tbreak;\n\t\tcase \"F9\":\n\t\t\tshortcut.which = 120;\n\t\t\tbreak;\n\t\tcase \"F10\":\n\t\t\tshortcut.which = 121;\n\t\t\tbreak;\n\t\tcase \"F11\":\n\t\t\tshortcut.which = 122;\n\t\t\tbreak;\n\t\tcase \"F12\":\n\t\t\tshortcut.which = 123;\n\t\t\tbreak;\n\t\tcase \"CapsLock\":\n\t\t\tif( shortcut.shift ) {\n\t\t\t\tshortcut.which = 20;\n\t\t\t} else {\n\t\t\t\tshortcut.which = 240;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"ArrowUp\":\n\t\t\tshortcut.which = 38;\n\t\t\tbreak;\n\t\tcase \"ArrowDown\":\n\t\t\tshortcut.which = 40;\n\t\t\tbreak;\n\t\tcase \"ArrowLeft\":\n\t\t\tshortcut.which = 37;\n\t\t\tbreak;\n\t\tcase \"ArrowRight\":\n\t\t\tshortcut.which = 39;\n\t\t\tbreak;\n\t\tcase \"Insert\":\n\t\t\tshortcut.which = 45;\n\t\t\tbreak;\n\t\tcase \"Delete\":\n\t\t\tshortcut.which = 46;\n\t\t\tbreak;\n\t\tcase \"PageUp\":\n\t\t\tshortcut.which = 33;\n\t\t\tbreak;\n\t\tcase \"PageDown\":\n\t\t\tshortcut.which = 34;\n\t\t\tbreak;\n\t\tcase \"Backspace\":\n\t\t\tshortcut.which = 8;\n\t\t\tbreak;\n\t\tcase \";\":\n\t\t\tshortcut.which = 187;\n\t\t\tbreak;\n\t\tcase \"Pause\":\n\t\t\tshortcut.which = 19;\n\t\t\tbreak;\n\t\tcase \"ScrollLock\":\n\t\t\tshortcut.which = 145;\n\t\t\tbreak;\n\t\tcase \"Tab\":\n\t\t\tshortcut.which = 9;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn shortcut;\n};\n\nexport class UtilKeyboardEvent {\n\tstatic isActivateKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.key === \"Space\" || e.key === \"Enter\" || e.which === 32 || e.which === 13 );\n\t}\n\n\tstatic isArrowUpKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.key === \"ArrowUp\" || e.which === 38 );\n\t}\n\n\tstatic isArrowDownKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.key === \"ArrowDown\" || e.which === 40 );\n\t}\n\n\tstatic isArrowLeftKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.key === \"ArrowLeft\" || e.which === 37 );\n\t}\n\n\tstatic isArrowRightKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.key === \"ArrowRight\" || e.which === 39 );\n\t}\n\n\tstatic isCancelKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.key === \"Esc\" || e.which === 27 );\n\t}\n\n\tstatic isFocusKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.key === \"Tab\" || e.which === 9 );\n\t}\n\n\tstatic isUndoKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.ctrlKey && ( e.key === \"z\" || e.which === 90 ) );\n\t}\n\n\tstatic isRedoKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.ctrlKey && ( e.key === \"y\" || e.which === 89 ) );\n\t}\n\n\tstatic isSaveKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.ctrlKey && ! e.shiftKey && ( e.key === \"s\" || e.which === 83 ) );\n\t}\n\n\tstatic isSaveAsKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.ctrlKey && e.shiftKey && ( e.key === \"S\" || e.which === 83 ) );\n\t}\n\n\tstatic isDeleteKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.key === \"Delete\" || e.which === 46 );\n\t}\n\n\tstatic isSelectAllKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.ctrlKey && ! e.shiftKey && ( e.key === \"a\" || e.which === 65 ) );\n\t}\n\n\tstatic isOkKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.key === \"Enter\" || e.which === 13 );\n\t}\n\n\tstatic getFocusDirection( e: KeyboardEvent ): boolean {\n\t\treturn ( e.shiftKey !== true );\n\t}\n\n\tstatic toShortcut( expressionOrShortcut: string | UtilKeyboardEventShortcut ): UtilKeyboardEventShortcut {\n\t\tif( ! utilIsString( expressionOrShortcut ) ) {\n\t\t\treturn expressionOrShortcut;\n\t\t} else {\n\t\t\tconst expression = expressionOrShortcut;\n\t\t\tconst arrowIndex = expression.indexOf(\"->\");\n\t\t\tlet keyExpression: string;\n\t\t\tlet event: string | undefined;\n\t\t\tif( 0 <= arrowIndex ) {\n\t\t\t\tkeyExpression = expression.substring( 0, arrowIndex ).trim();\n\t\t\t\tevent = expression.substring( arrowIndex + 2 ).trim();\n\t\t\t} else {\n\t\t\t\tkeyExpression = expression.trim();\n\t\t\t}\n\t\t\tconst keys = keyExpression.toLowerCase().split( \"+\" );\n\t\t\tconst alt: boolean = 0 <= keys.indexOf( \"alt\" );\n\t\t\tconst ctrl: boolean = 0 <= keys.indexOf( \"ctrl\" );\n\t\t\tconst shift: boolean = 0 <= keys.indexOf( \"shift\" );\n\t\t\tconst key: string = keys[ keys.length - 1 ];\n\t\t\treturn setShortcutKeyAndWhich({\n\t\t\t\talt,\n\t\t\t\tctrl,\n\t\t\t\tshift,\n\t\t\t\tkey,\n\t\t\t\twhich: 0,\n\t\t\t\tevent\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic toString( shortcut: UtilKeyboardEventShortcut ): string {\n\t\tconst parts = [];\n\t\tif( shortcut.ctrl ) {\n\t\t\tparts.push( \"Ctrl\" );\n\t\t}\n\t\tif( shortcut.shift ) {\n\t\t\tparts.push( \"Shift\" );\n\t\t}\n\t\tif( shortcut.alt ) {\n\t\t\tparts.push( \"Alt\" );\n\t\t}\n\t\tparts.push( shortcut.key.toUpperCase() );\n\t\treturn parts.join( \"+\" );\n\t}\n\n\tstatic on(\n\t\ttarget: DBase<any, any>,\n\t\texpressionOrShortcut: string | UtilKeyboardEventShortcut,\n\t\thandler?: ( e: KeyboardEvent ) => void\n\t): void {\n\t\tconst shortcut = this.toShortcut( expressionOrShortcut );\n\t\tdocument.body.addEventListener( \"keydown\", ( e: KeyboardEvent ): void => {\n\t\t\tif(\n\t\t\t\te.altKey === shortcut.alt && e.ctrlKey === shortcut.ctrl &&\n\t\t\t\te.shiftKey === shortcut.shift &&\n\t\t\t\t( e.key === shortcut.key || e.which === shortcut.which )\n\t\t\t) {\n\t\t\t\tif( target.isActionable() ) {\n\t\t\t\t\tif( shortcut.event != null ) {\n\t\t\t\t\t\ttarget.emit( shortcut.event );\n\t\t\t\t\t} else if( handler != null ) {\n\t\t\t\t\t\thandler( e );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t});\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, utils } from \"pixi.js\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DControllerFocus, DFocusable, DFocusableContainer } from \"./d-controller-focus\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\n\nexport class DControllerKeyboard extends utils.EventEmitter {\n\tinit( element: HTMLElement, stage: Container, focusController: DControllerFocus ) {\n\t\telement.addEventListener( \"keydown\", ( e: KeyboardEvent ): void => {\n\t\t\tthis.emit( \"keydown\", e );\n\n\t\t\tconst focused = focusController.getFocused();\n\t\t\tif( focused != null ) {\n\t\t\t\tlet current: DFocusable | DFocusableContainer | null = focused;\n\t\t\t\twhile( current != null ) {\n\t\t\t\t\tif( this.hasOnKeyDown( current ) ) {\n\t\t\t\t\t\tif( current.onKeyDown( e ) ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcurrent = current.parent;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif( UtilKeyboardEvent.isFocusKey( e ) ) {\n\t\t\t\tconst direction = UtilKeyboardEvent.getFocusDirection( e );\n\t\t\t\tconst next = ( focused != null ?\n\t\t\t\t\tfocusController.findFocusable(\n\t\t\t\t\t\tfocused, false, focused.hasState( DBaseState.FOCUS_ROOT ) || direction, direction\n\t\t\t\t\t) :\n\t\t\t\t\tfocusController.findFocusable( stage, false, true, direction )\n\t\t\t\t);\n\t\t\t\tif( next != null ) {\n\t\t\t\t\tfocusController.setFocused( next, true, true );\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener( \"keyup\", ( e: KeyboardEvent ): void => {\n\t\t\tthis.emit( \"keyup\", e );\n\n\t\t\tconst focused = focusController.getFocused();\n\t\t\tif( focused != null ) {\n\t\t\t\tlet current: DFocusable | DFocusableContainer | null = focused;\n\t\t\t\twhile( current != null ) {\n\t\t\t\t\tif( this.hasOnKeyUp( current ) ) {\n\t\t\t\t\t\tif( current.onKeyUp( e ) ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcurrent = current.parent;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected hasOnKeyDown( target: any ): target is { onKeyDown( e: KeyboardEvent ): boolean; } {\n\t\treturn \"onKeyDown\" in target;\n\t}\n\n\tprotected hasOnKeyUp( target: any ): target is { onKeyUp( e: KeyboardEvent ): boolean; } {\n\t\treturn \"onKeyUp\" in target;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DControllerCommand } from \"./d-controller-command\";\nimport { DControllerDefaultCommand } from \"./d-controller-default-command\";\nimport { DControllerDefaultFocus } from \"./d-controller-default-focus\";\nimport { DControllerDocument } from \"./d-controller-document\";\nimport { DControllerFocus } from \"./d-controller-focus\";\nimport { DControllerKeyboard } from \"./d-controller-keyboard\";\nimport { DDocument } from \"./d-document\";\n\nexport class DControllers {\n\tprotected static FOCUS: DControllerFocus | null;\n\tprotected static KEYBOARD: DControllerKeyboard | null;\n\tprotected static COMMAND: DControllerCommand | null;\n\tprotected static DOCUMENT: DControllerDocument<any> | null;\n\n\t// Focus\n\tstatic getFocusController(): DControllerFocus {\n\t\tif( this.FOCUS == null ) {\n\t\t\tthis.FOCUS = new DControllerDefaultFocus();\n\t\t}\n\t\treturn this.FOCUS;\n\t}\n\n\tstatic setFocusController( instance: DControllerFocus ): DControllerFocus | null {\n\t\tconst result = this.FOCUS;\n\t\tthis.FOCUS = instance;\n\t\treturn result;\n\t}\n\n\t// Keyboard\n\tstatic getKeyboardController(): DControllerKeyboard {\n\t\tif( this.KEYBOARD == null ) {\n\t\t\tthis.KEYBOARD = new DControllerKeyboard();\n\t\t}\n\t\treturn this.KEYBOARD;\n\t}\n\n\tstatic setKeyboardController( instance: DControllerKeyboard ): DControllerKeyboard | null {\n\t\tconst result = this.KEYBOARD;\n\t\tthis.KEYBOARD = instance;\n\t\treturn result;\n\t}\n\n\t// Command\n\tstatic getCommandController(): DControllerCommand {\n\t\tif( this.COMMAND == null ) {\n\t\t\tthis.COMMAND = new DControllerDefaultCommand();\n\t\t}\n\t\treturn this.COMMAND;\n\t}\n\n\tstatic setCommandController( instance: DControllerCommand ): DControllerCommand | null {\n\t\tconst result = this.COMMAND;\n\t\tthis.COMMAND = instance;\n\t\treturn result;\n\t}\n\n\t// Document\n\tstatic getDocumentController<DOCUMENT extends DDocument>(): DControllerDocument<DOCUMENT> {\n\t\tif( this.DOCUMENT == null ) {\n\t\t\tthrow new Error( \"Not supported\" );\n\t\t}\n\t\treturn this.DOCUMENT;\n\t}\n\n\tstatic setDocumentController<DOCUMENT extends DDocument>(\n\t\tinstance: DControllerDocument<DOCUMENT>\n\t): DControllerDocument<DOCUMENT> | null {\n\t\tconst result = this.DOCUMENT;\n\t\tthis.DOCUMENT = instance;\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplications } from \"./d-applications\";\nimport { DBase } from \"./d-base\";\nimport { DCoordinate } from \"./d-coordinate\";\nimport { DScalarFunctions } from \"./d-scalar-functions\";\nimport { DScalarSet } from \"./d-scalar-set\";\nimport { utilIsNumber } from \"./util/util-is-number\";\n\nconst enum AutoFlag {\n\tNONE = 0,\n\tWIDTH = 1,\n\tHEIGHT = 2\n}\n\nexport class DCoordinateSet {\n\tprotected _base: DBase<any, any>;\n\tprotected _scalarSet: DScalarSet;\n\tprotected _autoFlags: AutoFlag;\n\n\tconstructor( base: DBase<any, any>, scalarSet: DScalarSet ) {\n\t\tthis._base = base;\n\t\tthis._scalarSet = scalarSet;\n\t\tthis._autoFlags = AutoFlag.NONE;\n\t}\n\n\tget x(): DCoordinate {\n\t\tconst scalarSet = this._scalarSet;\n\t\tif( scalarSet.x != null ) {\n\t\t\treturn scalarSet.x;\n\t\t} else {\n\t\t\treturn this._base.x;\n\t\t}\n\t}\n\n\tset x( x: DCoordinate ) {\n\t\tconst base = this._base;\n\t\tif( utilIsNumber( x ) ) {\n\t\t\tbase.x = x;\n\t\t} else {\n\t\t\tconst scalarSet = this._scalarSet;\n\t\t\tconst scalar = DScalarFunctions.position( x );\n\t\t\tif( scalarSet.x !== scalar ) {\n\t\t\t\tscalarSet.x = scalar;\n\t\t\t\tbase.layout();\n\t\t\t}\n\t\t}\n\t}\n\n\tget y(): DCoordinate {\n\t\tconst scalarSet = this._scalarSet;\n\t\tif( scalarSet.y != null ) {\n\t\t\treturn scalarSet.y;\n\t\t} else {\n\t\t\treturn this._base.y;\n\t\t}\n\t}\n\n\tset y( y: DCoordinate ) {\n\t\tconst base = this._base;\n\t\tif( utilIsNumber( y ) ) {\n\t\t\tbase.y = y;\n\t\t} else {\n\t\t\tconst scalarSet = this._scalarSet;\n\t\t\tconst scalar = DScalarFunctions.position( y );\n\t\t\tif( scalarSet.y !== scalar ) {\n\t\t\t\tscalarSet.y = scalar;\n\t\t\t\tbase.layout();\n\t\t\t}\n\t\t}\n\t}\n\n\ttoAutoWidth() {\n\t\tthis._autoFlags |= AutoFlag.WIDTH;\n\t}\n\n\tisWidthAuto(): boolean {\n\t\treturn ( this._autoFlags & AutoFlag.WIDTH ) !== 0;\n\t}\n\n\tget width(): DCoordinate {\n\t\tconst scalarSet = this._scalarSet;\n\t\tif( this.isWidthAuto() ) {\n\t\t\treturn \"auto\";\n\t\t} else if( scalarSet.width != null ) {\n\t\t\treturn scalarSet.width;\n\t\t} else {\n\t\t\treturn this._base.width;\n\t\t}\n\t}\n\n\tset width( width: DCoordinate ) {\n\t\tif( utilIsNumber( width ) ) {\n\t\t\tthis._base.width = width;\n\t\t} else if( width === \"auto\" ) {\n\t\t\tif( ! this.isWidthAuto() ) {\n\t\t\t\tthis.toAutoWidth();\n\t\t\t\tconst base = this._base;\n\t\t\t\tbase.toChildrenDirty();\n\t\t\t\tDApplications.update();\n\t\t\t}\n\t\t} else {\n\t\t\tconst scalarSet = this._scalarSet;\n\t\t\tconst scalar = DScalarFunctions.size( width );\n\t\t\tif( scalarSet.width !== scalar ) {\n\t\t\t\tscalarSet.width = scalar;\n\t\t\t\tthis._base.layout();\n\t\t\t}\n\t\t}\n\t}\n\n\ttoAutoHeight() {\n\t\tthis._autoFlags |= AutoFlag.HEIGHT;\n\t}\n\n\tisHeightAuto(): boolean {\n\t\treturn ( this._autoFlags & AutoFlag.HEIGHT ) !== 0;\n\t}\n\n\tget height(): DCoordinate {\n\t\tconst scalarSet = this._scalarSet;\n\t\tif( this.isHeightAuto() ) {\n\t\t\treturn \"auto\";\n\t\t} else if( scalarSet.height != null ) {\n\t\t\treturn scalarSet.height;\n\t\t} else {\n\t\t\treturn this._base.height;\n\t\t}\n\t}\n\n\tset height( height: DCoordinate ) {\n\t\tif( utilIsNumber( height ) ) {\n\t\t\tthis._base.height = height;\n\t\t} else if( height === \"auto\" ) {\n\t\t\tif( ! this.isHeightAuto() ) {\n\t\t\t\tthis.toAutoHeight();\n\t\t\t\tconst base = this._base;\n\t\t\t\tbase.toChildrenDirty();\n\t\t\t\tDApplications.update();\n\t\t\t}\n\t\t} else {\n\t\t\tconst scalarSet = this._scalarSet;\n\t\t\tconst scalar = DScalarFunctions.size( height );\n\t\t\tif( scalarSet.height !== scalar ) {\n\t\t\t\tscalarSet.height = scalar;\n\t\t\t\tthis._base.layout();\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"./d-coordinate\";\nimport { DScalarExpression } from \"./d-scalar-expression\";\nimport { DScalarFunction } from \"./d-scalar-function\";\nimport { utilIsFunction } from \"./util/util-is-function\";\nimport { utilIsNumber } from \"./util/util-is-number\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport class DScalarFunctions {\n\tstatic POSITION = {\n\t\tPADDING: ( p: number, s: number, d: number ) => d,\n\t\tCENTER: ( p: number, s: number ) => ( p - s ) * 0.5\n\t};\n\n\tstatic SIZE = {\n\t\tMAXIMIZED: ( p: number ) => p,\n\t\tPADDING: ( p: number, s: number, d: number ) => p - d\n\t};\n\n\tstatic position( coordinate: DCoordinate | undefined ): DScalarFunction | null {\n\t\treturn this.from( coordinate, true );\n\t}\n\n\tstatic size( coordinate: DCoordinate | undefined ): DScalarFunction | null {\n\t\treturn this.from( coordinate, false );\n\t}\n\n\tprotected static from( coordinate: DCoordinate | undefined, isPosition: boolean ): DScalarFunction | null {\n\t\tif( coordinate == null || utilIsNumber( coordinate ) ) {\n\t\t\treturn null;\n\t\t} else if( utilIsString( coordinate ) ) {\n\t\t\tif( isPosition ) {\n\t\t\t\tswitch( coordinate ) {\n\t\t\t\tcase \"center\":\n\t\t\t\t\treturn DScalarFunctions.POSITION.CENTER;\n\t\t\t\tcase \"padding\":\n\t\t\t\t\treturn DScalarFunctions.POSITION.PADDING;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tswitch( coordinate ) {\n\t\t\t\tcase \"100%\":\n\t\t\t\tcase \"maximized\":\n\t\t\t\t\treturn DScalarFunctions.SIZE.MAXIMIZED;\n\t\t\t\tcase \"padding\":\n\t\t\t\t\treturn DScalarFunctions.SIZE.PADDING;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst scalarExpression = new DScalarExpression( coordinate );\n\t\t\treturn ( parent: number, self: number, padding: number, current: number ): number => {\n\t\t\t\treturn scalarExpression.calculate( parent, self, padding, current );\n\t\t\t};\n\t\t} else if( utilIsFunction( coordinate ) ) {\n\t\t\treturn coordinate;\n\t\t} else {\n\t\t\tconst scalar = coordinate;\n\t\t\treturn ( parent: number, self: number, padding: number, current: number ): number => {\n\t\t\t\treturn scalar.calculate( parent, self, padding, current );\n\t\t\t};\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum DLayoutClearType {\n\tNONE = 0,\n\tBEFORE = 1,\n\tAFTER = 2,\n\tBOTH = BEFORE | AFTER\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DTheme } from \"./d-theme\";\n\nexport class DThemes {\n\tprivate static DEFAULT_THEME_CLASS: (new () => DTheme) | null = null;\n\tprivate static INSTANCE: DTheme | null = null;\n\n\tpublic static setDefaultThemeClass( theme: new () => DTheme ): void {\n\t\tthis.DEFAULT_THEME_CLASS = theme;\n\t}\n\n\tpublic static getDefaultThemeClass(): (new () => DTheme) | null {\n\t\treturn this.DEFAULT_THEME_CLASS;\n\t}\n\n\tpublic static getInstance(): DTheme {\n\t\tif( this.INSTANCE == null ) {\n\t\t\tconst defaultThemeClass = this.getDefaultThemeClass();\n\t\t\tif( defaultThemeClass == null ) {\n\t\t\t\tthrow new Error( \"No default theme class found\" );\n\t\t\t}\n\t\t\tthis.INSTANCE = new defaultThemeClass();\n\t\t}\n\t\treturn this.INSTANCE;\n\t}\n\n\tpublic static setInstance( instance: DTheme ): DTheme | null {\n\t\tconst result = this.INSTANCE;\n\t\tthis.INSTANCE = instance;\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum DAlignHorizontal {\n\tLEFT,\n\tCENTER,\n\tRIGHT\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum DAlignVertical {\n\tTOP,\n\tMIDDLE,\n\tBOTTOM\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum DAlignWith {\n\tTEXT,\n\tPADDING,\n\tBORDER\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class UtilName {\n\tprotected static _mapping: { [ key: string]: number } = {};\n\n\tstatic create( type: string ) {\n\t\tconst mapping = this._mapping;\n\t\tif( type in mapping ) {\n\t\t\treturn `${type} ${++mapping[ type ]}`;\n\t\t} else {\n\t\t\tmapping[ type ] = 1;\n\t\t\treturn `${type} 1`;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, interaction, IPoint } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DApplications } from \"../d-applications\";\n\nexport type UtilPointerEventClickHandler = ( e: InteractionEvent ) => void;\n\nexport interface UtilPointerEventClickTarget {\n\ton( name: string, handler: UtilPointerEventClickHandler ): void;\n}\n\nexport class UtilPointerEvent {\n\tstatic CLICK_DISTANCE_THRESHOLD: number = 5;\n\tstatic DBLCLICK_INTERVAL_THRESHOLD: number = 333;\n\tstatic LONG_CLICK_THRESHOLD: number = 750;\n\n\tstatic get touchable(): boolean {\n\t\treturn ( \"ontouchstart\" in document );\n\t}\n\n\tstatic get tap(): string {\n\t\treturn \"pointertap\";\n\t}\n\n\tstatic get down(): string {\n\t\treturn \"pointerdown\";\n\t}\n\n\tstatic get enter(): string {\n\t\treturn \"pointerenter\";\n\t}\n\n\tstatic get leave(): string {\n\t\treturn \"pointerleave\";\n\t}\n\n\tstatic get move(): string {\n\t\treturn \"pointermove\";\n\t}\n\n\tstatic get out(): string {\n\t\treturn \"pointerout\";\n\t}\n\n\tstatic get over(): string {\n\t\treturn \"pointerover\";\n\t}\n\n\tstatic get up(): string {\n\t\treturn \"pointerup\";\n\t}\n\n\tstatic get cancel(): string {\n\t\treturn \"pointercancel\";\n\t}\n\n\tstatic toGlobal( e: MouseEvent | TouchEvent, result: IPoint ): IPoint {\n\t\tconst interactionManager = DApplications.getInstance().renderer.plugins.interaction;\n\t\tif( \"touches\" in e ) {\n\t\t\tconst touches = e.changedTouches;\n\t\t\tconst touch = touches[ touches.length - 1 ];\n\t\t\tif( touch != null ) {\n\t\t\t\tinteractionManager.mapPositionToPoint( result, touch.clientX, touch.clientY );\n\t\t\t} else {\n\t\t\t\tinteractionManager.mapPositionToPoint( result, 0, 0 );\n\t\t\t}\n\t\t} else {\n\t\t\tinteractionManager.mapPositionToPoint( result, e.clientX, e.clientY );\n\t\t}\n\t\treturn result;\n\t}\n\n\tstatic onClick( target: UtilPointerEventClickTarget, handler: UtilPointerEventClickHandler ): void {\n\t\tif( ! this.touchable ) {\n\t\t\ttarget.on( \"click\", handler );\n\t\t} else {\n\t\t\tlet isDowned = false;\n\t\t\tlet downX = 0;\n\t\t\tlet downY = 0;\n\t\t\tconst cleanup = (): void => {\n\t\t\t\tisDowned = false;\n\t\t\t\tinteractionManager.off( up, onUp );\n\t\t\t};\n\t\t\tconst isValidDistance = ( e: InteractionEvent ): boolean => {\n\t\t\t\tconst global = e.data.global;\n\t\t\t\tconst dx = Math.abs( downX - global.x );\n\t\t\t\tconst dy = Math.abs( downY - global.y );\n\t\t\t\tconst threshold = this.CLICK_DISTANCE_THRESHOLD;\n\t\t\t\treturn ( dx < threshold && dy < threshold );\n\t\t\t};\n\t\t\ttarget.on( \"click\", ( e: InteractionEvent ): void => {\n\t\t\t\tif( isDowned ) {\n\t\t\t\t\tcleanup();\n\t\t\t\t}\n\t\t\t\thandler( e );\n\t\t\t});\n\t\t\tconst up = this.up;\n\t\t\tconst onUp = ( e: InteractionEvent ): void => {\n\t\t\t\tif( isDowned ) {\n\t\t\t\t\tcleanup();\n\t\t\t\t\tif( this.contains( target, e.target ) ) {\n\t\t\t\t\t\tif( isValidDistance( e ) ) {\n\t\t\t\t\t\t\thandler( e );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst interactionManager = DApplications.getInstance().renderer.plugins.interaction;\n\t\t\ttarget.on( this.down, ( e: InteractionEvent ): void => {\n\t\t\t\tif( ! isDowned ) {\n\t\t\t\t\tisDowned = true;\n\t\t\t\t\tconst global = e.data.global;\n\t\t\t\t\tdownX = global.x;\n\t\t\t\t\tdownY = global.y;\n\t\t\t\t\tinteractionManager.off( up, onUp );\n\t\t\t\t\tinteractionManager.once( up, onUp );\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic onLongClick(\n\t\ttarget: UtilPointerEventClickTarget,\n\t\tonClick: UtilPointerEventClickHandler,\n\t\tonLongClick: UtilPointerEventClickHandler\n\t): void {\n\t\tif( ! this.touchable ) {\n\t\t\ttarget.on( \"click\", onClick );\n\t\t} else {\n\t\t\tlet isDowned = false;\n\t\t\tlet downX = 0;\n\t\t\tlet downY = 0;\n\t\t\tlet timeoutId: number | null = null;\n\t\t\tconst cleanupTimeout = (): void => {\n\t\t\t\tif( timeoutId != null ) {\n\t\t\t\t\tclearTimeout( timeoutId );\n\t\t\t\t\ttimeoutId = null;\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst cleanup = (): void => {\n\t\t\t\tisDowned = false;\n\t\t\t\tinteractionManager.off( up, onUp );\n\t\t\t\tinteractionManager.off( move, onMove );\n\t\t\t\tcleanupTimeout();\n\t\t\t};\n\t\t\tconst isValidDistance = ( e: InteractionEvent ): boolean => {\n\t\t\t\tconst global = e.data.global;\n\t\t\t\tconst dx = Math.abs( downX - global.x );\n\t\t\t\tconst dy = Math.abs( downY - global.y );\n\t\t\t\tconst threshold = this.CLICK_DISTANCE_THRESHOLD;\n\t\t\t\treturn ( dx < threshold && dy < threshold );\n\t\t\t};\n\t\t\ttarget.on( \"click\", ( e: InteractionEvent ): void => {\n\t\t\t\tif( isDowned ) {\n\t\t\t\t\tcleanup();\n\t\t\t\t}\n\t\t\t\tonClick( e );\n\t\t\t});\n\t\t\tconst up = this.up;\n\t\t\tconst move = this.move;\n\t\t\tconst onUp = ( e: InteractionEvent ): void => {\n\t\t\t\tif( isDowned ) {\n\t\t\t\t\tcleanup();\n\t\t\t\t\tif( this.contains( target, e.target ) ) {\n\t\t\t\t\t\tif( isValidDistance( e ) ) {\n\t\t\t\t\t\t\tonClick( e );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst onMove = ( e: InteractionEvent ): void => {\n\t\t\t\tif( isDowned ) {\n\t\t\t\t\tif( this.contains( target, e.target ) ) {\n\t\t\t\t\t\tif( ! isValidDistance( e ) ) {\n\t\t\t\t\t\t\tcleanup();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst interactionManager = DApplications.getInstance().renderer.plugins.interaction;\n\t\t\ttarget.on( this.down, ( e: InteractionEvent ): void => {\n\t\t\t\tif( ! isDowned ) {\n\t\t\t\t\tisDowned = true;\n\t\t\t\t\tconst global = e.data.global;\n\t\t\t\t\tdownX = global.x;\n\t\t\t\t\tdownY = global.y;\n\t\t\t\t\tcleanupTimeout();\n\t\t\t\t\tconst oe = e.data.originalEvent;\n\t\t\t\t\tif( \"touches\" in oe ) {\n\t\t\t\t\t\ttimeoutId = window.setTimeout((): void => {\n\t\t\t\t\t\t\tif( isDowned ) {\n\t\t\t\t\t\t\t\tcleanup();\n\t\t\t\t\t\t\t\tonLongClick( e );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, this.LONG_CLICK_THRESHOLD );\n\t\t\t\t\t}\n\t\t\t\t\tinteractionManager.off( up, onUp );\n\t\t\t\t\tinteractionManager.off( move, onMove );\n\t\t\t\t\tinteractionManager.once( up, onUp );\n\t\t\t\t\tinteractionManager.on( move, onMove );\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic onDblClick( target: HTMLElement, handler: ( e: MouseEvent | TouchEvent ) => void ): void {\n\t\tif( ! this.touchable ) {\n\t\t\ttarget.addEventListener( \"dblclick\", handler );\n\t\t} else {\n\t\t\tlet isDowned = 0;\n\t\t\tlet downX = 0;\n\t\t\tlet downY = 0;\n\t\t\tlet clickTime = 0;\n\n\t\t\ttarget.addEventListener( \"dblclick\", handler );\n\n\t\t\ttarget.addEventListener( \"touchend\", ( e: TouchEvent ): void => {\n\t\t\t\tif( isDowned === 1 || isDowned === 3 ) {\n\t\t\t\t\tconst touches = e.changedTouches;\n\t\t\t\t\tconst touch: Touch | null = touches[ touches.length - 1 ];\n\t\t\t\t\tif( touch != null ) {\n\t\t\t\t\t\tconst dx = downX - touch.clientX;\n\t\t\t\t\t\tconst dy = downY - touch.clientY;\n\t\t\t\t\t\tif( Math.abs( dx ) + Math.abs( dy ) < this.CLICK_DISTANCE_THRESHOLD ) {\n\t\t\t\t\t\t\tisDowned += 1;\n\t\t\t\t\t\t\tif( isDowned === 4 ) {\n\t\t\t\t\t\t\t\tisDowned = 0;\n\t\t\t\t\t\t\t\tconst elapsedTime = e.timeStamp - clickTime;\n\t\t\t\t\t\t\t\tif( elapsedTime < this.DBLCLICK_INTERVAL_THRESHOLD ) {\n\t\t\t\t\t\t\t\t\thandler( e );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tclickTime = e.timeStamp;\n\t\t\t\t\t\t\t\t\tisDowned = 2;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tclickTime = e.timeStamp;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tisDowned = 0;\n\t\t\t});\n\n\t\t\ttarget.addEventListener( \"touchstart\", ( e: TouchEvent ): void => {\n\t\t\t\tif( isDowned === 0 ) {\n\t\t\t\t\tconst touch: Touch | null = e.touches.item( e.touches.length - 1 );\n\t\t\t\t\tif( touch != null ) {\n\t\t\t\t\t\tisDowned = 1;\n\t\t\t\t\t\tdownX = touch.clientX;\n\t\t\t\t\t\tdownY = touch.clientY;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else if( isDowned === 2 ) {\n\t\t\t\t\tconst touch: Touch | null = e.touches.item( e.touches.length - 1 );\n\t\t\t\t\tif( touch != null ) {\n\t\t\t\t\t\tisDowned = 3;\n\t\t\t\t\t\tdownX = touch.clientX;\n\t\t\t\t\t\tdownY = touch.clientY;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tisDowned = 0;\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic contains( target: unknown, targetOrChild: DisplayObject | null ): boolean {\n\t\tlet current = targetOrChild;\n\t\twhile( current != null && current !== target ) {\n\t\t\tcurrent = current.parent;\n\t\t}\n\t\treturn current === target;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, DisplayObject, interaction, Point, Renderer, Texture, Transform } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DApplications } from \"./d-applications\";\nimport { DBackgroundStateAware } from \"./d-background\";\nimport { DBaseBackground } from \"./d-base-background\";\nimport { DBaseBorder } from \"./d-base-border\";\nimport { DBaseCorner } from \"./d-base-corner\";\nimport { DBaseInteractive } from \"./d-base-interactive\";\nimport { DBaseOutline } from \"./d-base-outline\";\nimport { DBasePadding } from \"./d-base-padding\";\nimport { DBasePoint } from \"./d-base-point\";\nimport { DBaseReflowable } from \"./d-base-reflowable\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DBaseStates } from \"./d-base-states\";\nimport { DBorderMask, DBorderStateAware } from \"./d-border\";\nimport { DControllers } from \"./d-controllers\";\nimport { DCoordinate } from \"./d-coordinate\";\nimport { DCoordinateSet } from \"./d-coordinates\";\nimport { DCorner, DCornerMask } from \"./d-corner\";\nimport { DThemeFont } from \"./d-font\";\nimport { DLayoutClearType } from \"./d-layout-clear-type\";\nimport { DOutline } from \"./d-outline\";\nimport { DPadding } from \"./d-padding\";\nimport { DScalarFunctions } from \"./d-scalar-functions\";\nimport { DScalarSet } from \"./d-scalar-set\";\nimport { DShadow } from \"./d-shadow\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\nimport { DThemes } from \"./theme/d-themes\";\nimport { utilIsFunction } from \"./util/util-is-function\";\nimport { utilIsNumber } from \"./util/util-is-number\";\nimport { utilIsString } from \"./util/util-is-string\";\nimport { UtilKeyboardEvent, UtilKeyboardEventShortcut } from \"./util/util-keyboard-event\";\nimport { UtilName } from \"./util/util-name\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\nimport { UtilWheelEventDeltas } from \"./util/util-wheel-event\";\n\nexport interface DBaseOptions<THEME extends DThemeBase = DThemeBase> {\n\tparent?: Container;\n\tchildren?: Array<DisplayObject | null>;\n\tname?: string;\n\tx?: DCoordinate;\n\ty?: DCoordinate;\n\twidth?: DCoordinate;\n\theight?: DCoordinate;\n\tvisible?: boolean;\n\tstate?: (keyof typeof DBaseState) | Array<keyof typeof DBaseState> | DBaseState;\n\tinteractive?: (keyof typeof DBaseInteractive) | DBaseInteractive;\n\tpadding?: number | {\n\t\ttop?: number,\n\t\tright?: number,\n\t\tbottom?: number,\n\t\tleft?: number\n\t};\n\tcorner?: number | {\n\t\tradius?: number,\n\t\tmask?: (keyof typeof DCornerMask) | DCornerMask\n\t};\n\ttheme?: THEME | string;\n\ton?: {\n\t\t[name: string]: Function;\n\t};\n\tweight?: number;\n\ttitle?: string;\n\tshortcut?: string | UtilKeyboardEventShortcut;\n\tshortcuts?: Array<string | UtilKeyboardEventShortcut>;\n\tbackground?: {\n\t\tcolor?: DStateAwareOrValueMightBe<number | null>;\n\t\talpha?: DStateAwareOrValueMightBe<number>;\n\t};\n\tborder?: {\n\t\tcolor?: DStateAwareOrValueMightBe<number | null>;\n\t\talpha?: DStateAwareOrValueMightBe<number>;\n\t\twidth?: DStateAwareOrValueMightBe<number>;\n\t\talign?: DStateAwareOrValueMightBe<number>;\n\t\tmask?: DStateAwareOrValueMightBe<DBorderMask> | (keyof typeof DBorderMask);\n\t};\n\toutline?: {\n\t\tcolor?: DStateAwareOrValueMightBe<number | null>;\n\t\talpha?: DStateAwareOrValueMightBe<number>;\n\t\twidth?: DStateAwareOrValueMightBe<number>;\n\t\toffset?: DStateAwareOrValueMightBe<number>;\n\t\talign?: DStateAwareOrValueMightBe<number>;\n\t\tmask?: DStateAwareOrValueMightBe<DBorderMask> | (keyof typeof DBorderMask);\n\t};\n\tshadow?: DShadow;\n\tclear?: (keyof typeof DLayoutClearType) | DLayoutClearType;\n}\n\n/**\n * DBase theme\n */\nexport interface DThemeBase extends DThemeFont {\n\t/**\n\t * Returns a X coordinate.\n\t */\n\tgetX(): DCoordinate;\n\n\t/**\n\t * Returns a Y coordinate.\n\t */\n\tgetY(): DCoordinate;\n\n\t/**\n\t * Returns a height.\n\t */\n\tgetHeight(): DCoordinate;\n\n\t/**\n\t * Returns a width.\n\t */\n\tgetWidth(): DCoordinate;\n\n\t/**\n\t * Returns a background color.\n\t * If the color is null, backgrounds are not be rendered.\n\t *\n\t * @param state a state\n\t */\n\tgetBackgroundColor( state: DBaseState ): number | null;\n\n\t/**\n\t * Returns a background alpha.\n\t *\n\t * @param state a state\n\t */\n\tgetBackgroundAlpha( state: DBaseState ): number;\n\n\t/**\n\t * Returns a background texture of the given radius.\n\t *\n\t * @param radius a corner radius\n\t */\n\tgetBackgroundTexture( radius: number ): Texture;\n\n\t/**\n\t * Returns a border color.\n\t * If the color is null, borders are not be rendered.\n\t *\n\t * @param state a state\n\t */\n\tgetBorderColor( state: DBaseState ): number | null;\n\n\t/**\n\t * Returns a border alpha.\n\t *\n\t * @param state a state\n\t */\n\tgetBorderAlpha( state: DBaseState ): number;\n\n\t/**\n\t * Returns a border width.\n\t *\n\t * @param state a state\n\t */\n\tgetBorderWidth( state: DBaseState ): number;\n\n\t/**\n\t * Returns a border align.\n\t *\n\t * @param state a state\n\t */\n\tgetBorderAlign( state: DBaseState ): number;\n\n\t/**\n\t * Returns a border mask.\n\t *\n\t * @param state a mask\n\t */\n\tgetBorderMask( state: DBaseState ): DBorderMask;\n\n\t/**\n\t * Returns a border texture of the given radius and width.\n\t *\n\t * @param radius a corner radius\n\t * @param width a border width\n\t */\n\tgetBorderTexture( radius: number, width: number ): Texture;\n\n\t/**\n\t * Returns a left padding.\n\t */\n\tgetPaddingLeft(): number;\n\n\t/**\n\t * Returns a right padding.\n\t */\n\tgetPaddingRight(): number;\n\n\t/**\n\t * Returns a top padding.\n\t */\n\tgetPaddingTop(): number;\n\n\t/**\n\t * Returns a bottom padding.\n\t */\n\tgetPaddingBottom(): number;\n\n\t/**\n\t * Returns a corner radius.\n\t */\n\tgetCornerRadius(): number;\n\n\t/**\n\t * Returns a corner mask.\n\t */\n\tgetCornerMask(): DCornerMask;\n\n\t/**\n\t * Returns an outline color.\n\t * If the color is null, outlines are not be rendered.\n\t *\n\t * @param state a state\n\t */\n\tgetOutlineColor( state: DBaseState ): number | null;\n\n\t/**\n\t * Returns an outline alpha.\n\t *\n\t * @param state a state\n\t */\n\tgetOutlineAlpha( state: DBaseState ): number;\n\n\t/**\n\t * Returns an outline width.\n\t *\n\t * @param state a state\n\t */\n\tgetOutlineWidth( state: DBaseState ): number;\n\n\t/**\n\t * Returns an outline offset.\n\t *\n\t * @param state a state\n\t */\n\tgetOutlineOffset( state: DBaseState ): number;\n\n\t/**\n\t * Returns an outline align.\n\t *\n\t * @param state a state\n\t */\n\tgetOutlineAlign( state: DBaseState ): number;\n\n\t/**\n\t * Returns an outline mask.\n\t *\n\t * @param state a state\n\t */\n\tgetOutlineMask( state: DBaseState ): DBorderMask;\n\n\t/**\n\t * Returns a shadow.\n\t * If a shadow is null, no shadow is rendered.\n\t */\n\tgetShadow(): DShadow | null;\n\n\t/**\n\t * Returns an interactivity.\n\t */\n\tgetInteractive(): DBaseInteractive;\n\n\t/**\n\t * Returns a tooltip text.\n\t */\n\tgetTitle(): string;\n\n\t/**\n\t * Returns a clear type.\n\t * A clear type is for layout classes including {@link ui.DLayoutVertical}.\n\t */\n\tgetClearType(): DLayoutClearType;\n\n\t/**\n\t * Returns a weight.\n\t * Weights are for layout classes including {@link ui.DLayoutVertical}.\n\t * If a weight is less than or equals to zero, layout classes are supposed not to change a width / height.\n\t */\n\tgetWeight(): number;\n\n\t/**\n\t * Creates a new shadow.\n\t */\n\tnewShadow(): DShadow | null;\n\n\t/**\n\t * Creates a new weak shadow.\n\t */\n\tnewShadowWeak(): DShadow | null;\n}\n\nconst toTheme = <THEME extends DThemeBase>( options?: DBaseOptions<THEME> ): THEME | null => {\n\tif( options != null && options.theme != null ) {\n\t\tconst theme = options.theme;\n\t\tif( utilIsString( theme ) ) {\n\t\t\treturn DThemes.getInstance().get( theme );\n\t\t} else {\n\t\t\treturn theme;\n\t\t}\n\t}\n\treturn null;\n};\n\nexport interface DRefitable {\n\treadonly width: number;\n\treadonly height: number;\n}\n\nconst toShortcuts = <THEME extends DThemeBase>(\n\toptions?: DBaseOptions<THEME>\n): UtilKeyboardEventShortcut[] | undefined => {\n\tif( options != null && ( options.shortcuts != null || options.shortcut != null ) ) {\n\t\tconst result: UtilKeyboardEventShortcut[] = [];\n\t\tif( options.shortcut != null ) {\n\t\t\tresult.push( UtilKeyboardEvent.toShortcut( options.shortcut ) );\n\t\t}\n\n\t\tif( options.shortcuts != null ) {\n\t\t\tconst shortcuts = options.shortcuts;\n\t\t\tfor( let i = 0, imax = shortcuts.length; i < imax; ++i ) {\n\t\t\t\tUtilKeyboardEvent.toShortcut( shortcuts[ i ] );\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\treturn undefined;\n};\n\nexport interface DRenderable {\n\trender( renderer: Renderer ): void;\n\tupdateTransform(): void;\n}\n\nexport interface DReflowable {\n\tonReflow( base: DBase, width: number, height: number ): void;\n}\n\nexport class DBase<\n\tTHEME extends DThemeBase = DThemeBase,\n\tOPTIONS extends DBaseOptions<THEME> = DBaseOptions<THEME>\n> extends Container {\n\tprotected static WORK_CONTAINS_POINT: Point = new Point();\n\n\tprivate _name: string;\n\tprivate _state: DBaseState;\n\tprivate _stateLocal: DBaseState;\n\tprivate _theme: THEME;\n\tprotected _options: OPTIONS | undefined;\n\tprivate _width: number;\n\tprivate _height: number;\n\tprotected _padding: DPadding;\n\tprotected _corner: DCorner;\n\tprivate _scalarSet: DScalarSet;\n\tprotected _coordinateSet: DCoordinateSet;\n\tprivate _isDirty: boolean;\n\tprivate _hasDirty: boolean;\n\tprotected _isChildrenDirty: boolean;\n\tprivate _shadow: DShadow | null;\n\tprivate _onShadowUpdateBound: () => void;\n\tprivate _transform: Transform;\n\tprivate _weight: number;\n\tprivate _position: DBasePoint;\n\tprivate _scale: DBasePoint;\n\tprivate _skew: DBasePoint;\n\tprotected _title: string;\n\tprotected _background: DBackgroundStateAware;\n\tprotected _border: DBorderStateAware;\n\tprotected _outline: DOutline;\n\tprotected _clearType: DLayoutClearType;\n\tprotected _shortcuts?: UtilKeyboardEventShortcut[];\n\tprotected _befores: DRenderable[];\n\tprotected _afters: DRenderable[];\n\tprotected _reflowables: DReflowable[];\n\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper();\n\n\t\t// Transform\n\t\tconst transform: Transform = this._transform = this.transform;\n\t\tthis._position = new DBasePoint( transform.position, (): void => {\n\t\t\tthis.onMove();\n\t\t});\n\t\tthis._scale = new DBasePoint( transform.scale, (): void => {\n\t\t\tthis.onScale();\n\t\t});\n\t\tthis._skew = new DBasePoint( transform.skew, (): void => {\n\t\t\tthis.onSkew();\n\t\t});\n\n\t\t//\n\t\tthis._options = options;\n\t\tconst scalarSet: DScalarSet = this._scalarSet = {};\n\t\tthis._coordinateSet = new DCoordinateSet( this, scalarSet );\n\t\tthis._isDirty = true;\n\t\tthis._hasDirty = false;\n\t\tthis._isChildrenDirty = false;\n\t\tthis._shadow = null;\n\t\tthis._name = ( options && options.name != null ? options.name : UtilName.create( this.getType() ) );\n\t\tconst theme = this._theme = toTheme( options ) || this.getThemeDefault();\n\t\tthis._befores = [];\n\t\tthis._afters = [];\n\t\tthis._reflowables = [];\n\t\tthis._clearType = ( options && options.clear != null ?\n\t\t\t( utilIsString( options.clear ) ? DLayoutClearType[ options.clear ] : options.clear ) :\n\t\t\ttheme.getClearType()\n\t\t);\n\t\tthis._padding = new DBasePadding( theme, options, (): void => {\n\t\t\tthis.layout();\n\t\t\tthis.toChildrenDirty();\n\t\t\tDApplications.update();\n\t\t});\n\t\tconst toDirtyAndUpdate = (): void => {\n\t\t\tthis.toDirty();\n\t\t\tDApplications.update();\n\t\t};\n\t\tthis._background = new DBaseBackground( theme, options, toDirtyAndUpdate );\n\t\tthis._border = new DBaseBorder( theme, options, toDirtyAndUpdate );\n\t\tthis._outline = new DBaseOutline( theme, options, toDirtyAndUpdate );\n\t\tthis._corner = new DBaseCorner( theme, options, toDirtyAndUpdate );\n\t\tthis.initReflowable();\n\n\t\t// X\n\t\tconst position = transform.position;\n\t\tconst x = ( options && options.x != null ? options.x : theme.getX() );\n\t\tif( utilIsNumber( x ) ) {\n\t\t\tposition.x = x;\n\t\t} else {\n\t\t\tposition.x = 0;\n\t\t\tscalarSet.x = DScalarFunctions.position( x );\n\t\t}\n\n\t\t// Y\n\t\tconst y = ( options && options.y != null ? options.y : theme.getY() );\n\t\tif( utilIsNumber( y ) ) {\n\t\t\tposition.y = y;\n\t\t} else {\n\t\t\tposition.y = 0;\n\t\t\tscalarSet.y = DScalarFunctions.position( y );\n\t\t}\n\n\t\t// Width\n\t\tconst width = ( options && options.width != null ? options.width : theme.getWidth() );\n\t\tif( utilIsNumber( width ) ) {\n\t\t\tthis._width = width;\n\t\t} else if( width === \"auto\" ) {\n\t\t\tthis._width = 100;\n\t\t\tthis._coordinateSet.toAutoWidth();\n\t\t} else {\n\t\t\tthis._width = 100;\n\t\t\tscalarSet.width = DScalarFunctions.size( width );\n\t\t}\n\n\t\t// Height\n\t\tconst height = ( options && options.height != null ? options.height : theme.getHeight() );\n\t\tif( utilIsNumber( height ) ) {\n\t\t\tthis._height = height;\n\t\t} else if( height === \"auto\" ) {\n\t\t\tthis._height = 100;\n\t\t\tthis._coordinateSet.toAutoHeight();\n\t\t} else {\n\t\t\tthis._height = 100;\n\t\t\tscalarSet.height = DScalarFunctions.size( height );\n\t\t}\n\n\t\t// Visibility\n\t\tif( options && options.visible != null ) {\n\t\t\tthis.visible = options.visible;\n\t\t}\n\n\t\t// State\n\t\tthis._state = DBaseState.NONE;\n\t\tthis._stateLocal = DBaseState.NONE;\n\n\t\t// Interactive\n\t\tconst interactive = ( options && options.interactive != null ?\n\t\t\t( utilIsString( options.interactive ) ? DBaseInteractive[ options.interactive ] : options.interactive ) :\n\t\t\ttheme.getInteractive()\n\t\t);\n\t\tthis.interactive = ( ( interactive & DBaseInteractive.SELF ) !== 0 );\n\t\tthis.interactiveChildren = ( ( interactive & DBaseInteractive.CHILDREN ) !== 0 );\n\n\t\t// Events\n\t\tif( options != null ) {\n\t\t\tconst on = options.on;\n\t\t\tif( on != null ) {\n\t\t\t\tfor( const name in on ) {\n\t\t\t\t\tthis.on( name, on[ name ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Title\n\t\tthis._title = ( options && options.title != null ? options.title : theme.getTitle() );\n\n\t\t// Weight\n\t\tthis._weight = ( options && options.weight != null ? options.weight : theme.getWeight() );\n\n\t\t// Shadow\n\t\tthis._onShadowUpdateBound = (): void => {\n\t\t\tDApplications.update();\n\t\t};\n\t\tconst shadow = (options && options.shadow) || theme.getShadow();\n\t\tif( shadow ) {\n\t\t\tthis.shadow = shadow;\n\t\t}\n\n\t\t// Event handlers\n\t\tthis.on( UtilPointerEvent.over, ( e: InteractionEvent ): void => {\n\t\t\t// Hover\n\t\t\tthis.setHovered( true );\n\n\t\t\t// Title\n\t\t\tif( e.target === this ) {\n\t\t\t\tthis.applyTitle();\n\t\t\t}\n\t\t});\n\n\t\tthis.on( UtilPointerEvent.out, (): void => {\n\t\t\tthis.setHovered( false );\n\t\t});\n\n\t\tthis.on( UtilPointerEvent.down, ( e: InteractionEvent ): void => {\n\t\t\tthis.onDown( e );\n\t\t});\n\n\t\t// Children change detection\n\t\tthis.on( \"added\", (): void => {\n\t\t\tthis.layout();\n\t\t\tif( this.isDirty() || this.hasDirty() ) {\n\t\t\t\tthis.toParentHasDirty();\n\t\t\t}\n\t\t\tif( this._isChildrenDirty ) {\n\t\t\t\tthis.toParentChildrenDirty();\n\t\t\t}\n\t\t\tthis.updateState();\n\t\t\tDApplications.update();\n\t\t});\n\n\t\tthis.on( \"removed\", (): void => {\n\t\t\tthis.blur( true );\n\t\t\tthis.updateState();\n\t\t\tDApplications.update();\n\t\t});\n\n\t\t// Shortcut\n\t\tconst shortcuts = this._shortcuts = toShortcuts( options );\n\t\tif( shortcuts != null ) {\n\t\t\tconst onShortcutBound = ( e: KeyboardEvent ): void => {\n\t\t\t\tthis.onShortcut( e );\n\t\t\t};\n\t\t\tfor( let i = 0, imax = shortcuts.length; i < imax; ++i ) {\n\t\t\t\tUtilKeyboardEvent.on( this, shortcuts[ i ], onShortcutBound );\n\t\t\t}\n\t\t}\n\n\t\t// Other initialization\n\t\tthis.init( options );\n\n\t\t// State Override\n\t\tif( options && options.state != null ) {\n\t\t\tif( utilIsString( options.state ) ) {\n\t\t\t\tthis.setState( DBaseState[ options.state ], true );\n\t\t\t} else if( utilIsNumber( options.state ) ) {\n\t\t\t\tthis.setState( options.state, true );\n\t\t\t} else {\n\t\t\t\tconst states = options.state;\n\t\t\t\tfor( let i = 0, imax = states.length; i < imax; ++i ) {\n\t\t\t\t\tthis.setState( DBaseState[ states[ i ] ], true );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Parent\n\t\tif( options && options.parent != null ) {\n\t\t\toptions.parent.addChild( this );\n\t\t}\n\n\t\t// Children\n\t\tif( options && options.children != null ) {\n\t\t\tconst children = options.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child != null ) {\n\t\t\t\t\tthis.addChild( child );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Done\n\t\tthis.emit( \"init\", this );\n\t}\n\n\tprependRenderable( renderable: DRenderable, phase: boolean ): void {\n\t\t(renderable as any).parent = this;\n\t\tconst list = ( phase ? this._befores : this._afters );\n\t\tlist.unshift( renderable );\n\t}\n\n\tappendRenderable( renderable: DRenderable, phase: boolean ): void {\n\t\t(renderable as any).parent = this;\n\t\tconst list = ( phase ? this._befores : this._afters );\n\t\tlist.push( renderable );\n\t}\n\n\tremoveRenderable( renderable: DRenderable, phase: boolean ): void {\n\t\t(renderable as any).parent = null;\n\t\tconst list = ( phase ? this._befores : this._afters );\n\t\tconst index = list.indexOf( renderable );\n\t\tif( 0 <= index ) {\n\t\t\tlist.splice( index, 1 );\n\t\t}\n\t}\n\n\taddReflowable( reflowable: DReflowable ): void {\n\t\tthis._reflowables.push( reflowable );\n\t}\n\n\tremoveReflowable( reflowable: DReflowable ): void {\n\t\tconst reflowables = this._reflowables;\n\t\tconst index = reflowables.indexOf( reflowable );\n\t\tif( 0 <= index ) {\n\t\t\treflowables.splice( index, 1 );\n\t\t}\n\t}\n\n\tprotected initReflowable(): void {\n\t\tnew DBaseReflowable( this );\n\t}\n\n\tprotected onChildrenChange(): void {\n\t\tthis.toChildrenDirty();\n\t\tsuper.onChildrenChange();\n\t}\n\n\tprotected onShortcut( e: KeyboardEvent ): void {\n\t\t// DO NOTHING\n\t}\n\n\tget coordinate(): DCoordinateSet {\n\t\treturn this._coordinateSet;\n\t}\n\n\tprotected init( options?: OPTIONS ): void {\n\t\t// OTHER INITIALIZATIONS BEFORE `parent.addChild( this )`\n\t}\n\n\tget weight(): number {\n\t\treturn this._weight;\n\t}\n\n\tonMove(): void {\n\t\tthis.moveChildren();\n\t\tDApplications.update();\n\t\tthis.emit( \"move\", this );\n\t}\n\n\tresize( width: number, height: number ): boolean {\n\t\tconst oldWidth = this._width;\n\t\tconst oldHeight = this._height;\n\t\tconst widthResized = oldWidth !== width;\n\t\tconst heightResized = oldHeight !== height;\n\n\t\tif( widthResized ) {\n\t\t\tthis._width = width;\n\t\t}\n\n\t\tif( heightResized ) {\n\t\t\tthis._height = height;\n\t\t}\n\n\t\tconst resized = widthResized || heightResized;\n\t\tif( resized ) {\n\t\t\tthis.onResize( width, height, oldWidth, oldHeight );\n\t\t}\n\n\t\tif( widthResized ) {\n\t\t\tconst scalarSet = this._scalarSet;\n\t\t\tif( scalarSet.x != null ) {\n\t\t\t\tconst position = this._transform.position;\n\t\t\t\tconst parent = this.getParentOfSize();\n\t\t\t\tthis.x = scalarSet.x( parent.width, width, parent.padding.getLeft(), position.x );\n\t\t\t}\n\t\t}\n\n\t\tif( heightResized ) {\n\t\t\tconst scalarSet = this._scalarSet;\n\t\t\tif( scalarSet.y != null ) {\n\t\t\t\tconst position = this._transform.position;\n\t\t\t\tconst parent = this.getParentOfSize();\n\t\t\t\tthis.y = scalarSet.y( parent.height, height, parent.padding.getTop(), position.y );\n\t\t\t}\n\t\t}\n\n\t\treturn resized;\n\t}\n\n\tgetClearType(): DLayoutClearType {\n\t\treturn this._clearType;\n\t}\n\n\tonResize( newWidth: number, newHeight: number, oldWidth: number, oldHeight: number ): void {\n\t\tthis.toDirty();\n\t\tthis.toChildrenDirty();\n\t\tthis.resizeChildren();\n\t\tDApplications.update();\n\t\tthis.emit( \"resize\", newWidth, newHeight, oldWidth, oldHeight, this );\n\t}\n\n\tonScale(): void {\n\t\tDApplications.update();\n\t\tthis.emit( \"scale\", this );\n\t}\n\n\tonSkew(): void {\n\t\tDApplications.update();\n\t\tthis.emit( \"skew\", this );\n\t}\n\n\tget type(): string {\n\t\treturn this.getType();\n\t}\n\n\tget name(): string {\n\t\treturn this._name;\n\t}\n\n\tset name( name: string ) {\n\t\tthis._name = name;\n\t}\n\n\tget x(): number {\n\t\treturn this._position.x;\n\t}\n\n\tset x( x: number ) {\n\t\tthis._position.x = x;\n\t}\n\n\tget y(): number {\n\t\treturn this._position.y;\n\t}\n\n\tset y( y: number ) {\n\t\tthis._position.y = y;\n\t}\n\n\tget width(): number {\n\t\treturn this._width;\n\t}\n\n\tset width( width: number ) {\n\t\tconst oldWidth = this._width;\n\t\tif( oldWidth !== width ) {\n\t\t\tthis._width = width;\n\t\t\tconst height = this._height;\n\t\t\tthis.onResize( width, height, oldWidth, height );\n\n\t\t\t// Layout\n\t\t\tconst scalarSet = this._scalarSet;\n\t\t\tif( scalarSet.x != null ) {\n\t\t\t\tconst position = this._transform.position;\n\t\t\t\tconst parent = this.getParentOfSize();\n\t\t\t\tthis.x = scalarSet.x( parent.width, width, parent.padding.getLeft(), position.x );\n\t\t\t}\n\t\t}\n\t}\n\n\tget height(): number {\n\t\treturn this._height;\n\t}\n\n\tset height( height: number ) {\n\t\tconst oldHeight = this._height;\n\t\tif( oldHeight !== height ) {\n\t\t\tthis._height = height;\n\t\t\tconst width = this._width;\n\t\t\tthis.onResize( width, height, width, oldHeight );\n\n\t\t\t// Layout\n\t\t\tconst scalarSet = this._scalarSet;\n\t\t\tif( scalarSet.y != null ) {\n\t\t\t\tconst position = this._transform.position;\n\t\t\t\tconst parent = this.getParentOfSize();\n\t\t\t\tthis.y = scalarSet.y( parent.height, height, parent.padding.getTop(), position.y );\n\t\t\t}\n\t\t}\n\t}\n\n\tget position() {\n\t\treturn this._position;\n\t}\n\n\tget scale() {\n\t\treturn this._scale;\n\t}\n\n\tget skew() {\n\t\treturn this._skew;\n\t}\n\n\tget padding(): DPadding {\n\t\treturn this._padding;\n\t}\n\n\tget corner(): DCorner {\n\t\treturn this._corner;\n\t}\n\n\tget background(): DBackgroundStateAware {\n\t\treturn this._background;\n\t}\n\n\tget border(): DBorderStateAware {\n\t\treturn this._border;\n\t}\n\n\tget outline(): DOutline {\n\t\treturn this._outline;\n\t}\n\n\tget unsafe(): Transform {\n\t\treturn this._transform;\n\t}\n\n\tget title(): string {\n\t\treturn this._title;\n\t}\n\n\tset title( title: string ) {\n\t\tif( this._title !== title ) {\n\t\t\tthis._title = title;\n\t\t\tif( this.isHovered() ) {\n\t\t\t\tthis.applyTitle();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected applyTitle(): void {\n\t\tDApplications.getInstance().view.title = this._title;\n\t}\n\n\tshow(): this {\n\t\tif( ! this.visible ) {\n\t\t\tthis.visible = true;\n\t\t\tthis.toParentChildrenDirty();\n\t\t\tDApplications.update();\n\t\t}\n\t\treturn this;\n\t}\n\n\tisShown(): boolean {\n\t\treturn this.visible;\n\t}\n\n\thide(): this {\n\t\tif( this.visible ) {\n\t\t\tthis.visible = false;\n\t\t\tthis.toParentChildrenDirty();\n\t\t\tDApplications.update();\n\t\t}\n\t\treturn this;\n\t}\n\n\tisHidden(): boolean {\n\t\treturn ! this.visible;\n\t}\n\n\ttoDirty(): boolean {\n\t\tif( ! this._isDirty ) {\n\t\t\tthis._isDirty = true;\n\t\t\tthis.toParentHasDirty();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\ttoHasDirty(): boolean {\n\t\tif( ! this._hasDirty ) {\n\t\t\tthis._hasDirty = true;\n\t\t\tthis.toParentHasDirty();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\ttoParentHasDirty(): void {\n\t\tconst parent = this.parent;\n\t\tif( parent instanceof DBase ) {\n\t\t\tparent.toHasDirty();\n\t\t}\n\t}\n\n\ttoChildrenDirty(): boolean {\n\t\tif( ! this._isChildrenDirty ) {\n\t\t\tthis._isChildrenDirty = true;\n\t\t\tthis.onChildrenDirty();\n\t\t\tthis.toParentChildrenDirty();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\ttoParentChildrenDirty(): void {\n\t\tconst parent = this.parent;\n\t\tif( parent instanceof DBase ) {\n\t\t\tparent.toChildrenDirty();\n\t\t}\n\t}\n\n\tisChildrenDirty(): boolean {\n\t\treturn this._isChildrenDirty;\n\t}\n\n\tprotected onChildrenDirty() {\n\t\t// DO NOTHING\n\t}\n\n\tisDirty() {\n\t\treturn this._isDirty;\n\t}\n\n\thasDirty() {\n\t\treturn this._hasDirty;\n\t}\n\n\tsetHovered( isHovered: boolean ) {\n\t\treturn this.setState( DBaseState.HOVERED, isHovered );\n\t}\n\n\tsetActive( isActive: boolean ) {\n\t\treturn this.setState( DBaseState.ACTIVE, isActive );\n\t}\n\n\tsetPressed( isPressed: boolean ) {\n\t\treturn this.setState( DBaseState.PRESSED, isPressed );\n\t}\n\n\tsetReadOnly( isReadOnly: boolean ) {\n\t\treturn this.setState( DBaseState.READ_ONLY, isReadOnly );\n\t}\n\n\tsetDisabled( isDisabled: boolean ) {\n\t\treturn this.setState( DBaseState.DISABLED, isDisabled );\n\t}\n\n\tsetDragging( isDragging: boolean ) {\n\t\treturn this.setState( DBaseState.DRAGGING, isDragging );\n\t}\n\n\tsetInvalid( isInvalid: boolean ) {\n\t\treturn this.setState( DBaseState.INVALID, isInvalid );\n\t}\n\n\tsetSucceeded( isSucceeded: boolean ) {\n\t\treturn this.setState( DBaseState.SUCCEEDED, isSucceeded );\n\t}\n\n\tsetFailed( isFailed: boolean ) {\n\t\treturn this.setState( DBaseState.FAILED, isFailed );\n\t}\n\n\tsetFocused( isFocused: boolean ) {\n\t\tif( this.isFocused() !== isFocused ) {\n\t\t\tDControllers.getFocusController().setFocused( this, isFocused, false );\n\t\t}\n\t\treturn this;\n\t}\n\n\tfocus(): this {\n\t\treturn this.setFocused( true );\n\t}\n\n\tblur( recursively?: boolean ): this {\n\t\tif( recursively ) {\n\t\t\tconst focusController = DControllers.getFocusController();\n\t\t\tconst focused = focusController.getFocused();\n\t\t\tif( focused instanceof DBase ) {\n\t\t\t\tlet current: Container = focused;\n\t\t\t\twhile( current ) {\n\t\t\t\t\tif( current === this ) {\n\t\t\t\t\t\tfocused.setFocused( false );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcurrent = current.parent;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setFocused( false );\n\t\t}\n\t\treturn this;\n\t}\n\n\tisHovered(): boolean {\n\t\treturn this.hasState( DBaseState.HOVERED );\n\t}\n\n\tisActive(): boolean {\n\t\treturn this.hasState( DBaseState.ACTIVE );\n\t}\n\n\tisActiveIn(): boolean {\n\t\treturn this.hasState( DBaseState.ACTIVE | DBaseState.ACTIVE_IN );\n\t}\n\n\tisPressed(): boolean {\n\t\treturn this.hasState( DBaseState.PRESSED );\n\t}\n\n\tisReadOnly(): boolean {\n\t\treturn this.hasState( DBaseState.READ_ONLY );\n\t}\n\n\tisDisabled(): boolean {\n\t\treturn this.hasState( DBaseState.DISABLED );\n\t}\n\n\tisActionable(): boolean {\n\t\treturn ! this.hasState( DBaseState.DISABLED | DBaseState.READ_ONLY );\n\t}\n\n\tisDragging(): boolean {\n\t\treturn this.hasState( DBaseState.DRAGGING );\n\t}\n\n\tisFocused(): boolean {\n\t\treturn this.hasState( DBaseState.FOCUSED );\n\t}\n\n\tisFocusedIn(): boolean {\n\t\treturn this.hasState( DBaseState.FOCUSED | DBaseState.FOCUSED_IN );\n\t}\n\n\tisUnfocusable(): boolean {\n\t\treturn this.hasState( DBaseState.UNFOCUSABLE );\n\t}\n\n\tisInvalid(): boolean {\n\t\treturn this.hasState( DBaseState.INVALID );\n\t}\n\n\tisSucceeded(): boolean {\n\t\treturn this.hasState( DBaseState.SUCCEEDED );\n\t}\n\n\tisFailed(): boolean {\n\t\treturn this.hasState( DBaseState.FAILED );\n\t}\n\n\tsetState( state: DBaseState, isOn: boolean ) {\n\t\tconst oldStateLocal = this._stateLocal;\n\t\tconst newStateLocal = ( isOn ? (oldStateLocal | state) : (oldStateLocal & ~state) );\n\t\tif( oldStateLocal !== newStateLocal ) {\n\t\t\tthis._stateLocal = newStateLocal;\n\t\t\tthis.updateState();\n\t\t}\n\t\treturn this;\n\t}\n\n\tsetStates( statesOn: DBaseState, statesOff: DBaseState ) {\n\t\tconst oldStateLocal = this._stateLocal;\n\t\tconst newStateLocal = ( (oldStateLocal | statesOn) & ~statesOff );\n\t\tif( oldStateLocal !== newStateLocal ) {\n\t\t\tthis._stateLocal = newStateLocal;\n\t\t\tthis.updateState();\n\t\t}\n\t\treturn this;\n\t}\n\n\tprotected updateState(): void {\n\t\tconst parent = this.parent;\n\t\tconst stateLocal = this._stateLocal;\n\t\tconst newState = ( parent instanceof DBase ?\n\t\t\tthis.mergeState( stateLocal, parent.state ) :\n\t\t\tstateLocal\n\t\t);\n\t\tconst oldState = this._state;\n\t\tif( oldState !== newState ) {\n\t\t\tthis._state = newState;\n\t\t\tthis.onStateChange( newState, oldState );\n\t\t}\n\t}\n\n\tprotected mergeState( stateLocal: DBaseState, stateParent: DBaseState ): DBaseState {\n\t\treturn stateLocal | ( stateParent & DBaseState.DISABLED ) |\n\t\t\t( stateParent & (DBaseState.FOCUSED | DBaseState.FOCUSED_IN) ? DBaseState.FOCUSED_IN : DBaseState.NONE ) |\n\t\t\t( stateParent & (DBaseState.ACTIVE | DBaseState.ACTIVE_IN) ? DBaseState.ACTIVE_IN : DBaseState.NONE );\n\t}\n\n\tprotected onStateChange( newState: number, oldState: number ) {\n\t\tthis.toDirty();\n\t\tDApplications.update();\n\t\tthis.emit( \"statechange\", newState, oldState, this );\n\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child instanceof DBase ) {\n\t\t\t\tchild.onParentStateChange( newState, oldState );\n\t\t\t}\n\t\t}\n\n\t\tif( DBaseStates.isFocused( newState ) ) {\n\t\t\tif( ! DBaseStates.isFocused( oldState ) ) {\n\t\t\t\tthis.onFocused();\n\t\t\t}\n\t\t} else {\n\t\t\tif( DBaseStates.isFocused( oldState ) ) {\n\t\t\t\tthis.onBlured();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onChildFocused( focused: DBase ): void {\n\t\tconst parent = this.parent;\n\t\tif( parent instanceof DBase ) {\n\t\t\tparent.onChildFocused( focused );\n\t\t}\n\t}\n\n\tprotected onFocused(): void {\n\t\tconst parent = this.parent;\n\t\tif( parent instanceof DBase ) {\n\t\t\tparent.onChildFocused( this );\n\t\t}\n\t}\n\n\tprotected onBlured(): void {\n\t\t//\n\t}\n\n\tprotected onParentStateChange( newStateParent: number, oldStateParent: number ) {\n\t\tconst newState = this.mergeState( this._stateLocal, newStateParent );\n\t\tconst oldState = this._state;\n\t\tif( oldState !== newState ) {\n\t\t\tthis._state = newState;\n\t\t\tthis.onStateChange( newState, oldState );\n\t\t}\n\t}\n\n\tget state(): DBaseState {\n\t\treturn this._state;\n\t}\n\n\tgetState(): DBaseState {\n\t\treturn this._state;\n\t}\n\n\thasState( state: DBaseState ): boolean {\n\t\treturn DBaseStates.is( this._state, state );\n\t}\n\n\tget theme(): THEME {\n\t\treturn this._theme;\n\t}\n\n\tset theme( theme: THEME ) {\n\t\tconst result = this._theme;\n\t\tif( result !== theme ) {\n\t\t\tthis._theme = theme;\n\t\t\tthis._padding.setTheme( theme );\n\t\t\tthis._background.setTheme( theme );\n\t\t\tthis._border.setTheme( theme );\n\t\t\tthis._outline.setTheme( theme );\n\t\t\tthis._corner.setTheme( theme );\n\t\t\tthis.toDirty();\n\t\t\tDApplications.update();\n\t\t}\n\t}\n\n\trefit(): void {\n\t\tif( this._isChildrenDirty ) {\n\t\t\tthis._isChildrenDirty = false;\n\n\t\t\tconst children = this.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child instanceof DBase ) {\n\t\t\t\t\tchild.refit();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.onRefit();\n\t\t}\n\t}\n\n\tprotected onRefit(): void {\n\t\tconst coordinateSet = this._coordinateSet;\n\t\tconst isWidthAuto = coordinateSet.isWidthAuto();\n\t\tconst isHeightAuto = coordinateSet.isHeightAuto();\n\t\tif( isWidthAuto && isHeightAuto ) {\n\t\t\tlet width = 0;\n\t\t\tlet height = 0;\n\t\t\tconst children = this.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child.visible ) {\n\t\t\t\t\tif( this.hasRefitableWidth( child ) ) {\n\t\t\t\t\t\twidth = Math.max( width, child.x + child.width );\n\t\t\t\t\t}\n\t\t\t\t\tif( this.hasRefitableHeight( child ) ) {\n\t\t\t\t\t\theight = Math.max( height, child.y + child.height );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst padding = this.padding;\n\t\t\tthis.resize( width + padding.getRight(), height + padding.getBottom() );\n\t\t} else if( isWidthAuto ) {\n\t\t\tlet width = 0;\n\t\t\tconst children = this.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child.visible && this.hasRefitableWidth( child ) ) {\n\t\t\t\t\twidth = Math.max( width, child.x + child.width );\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst padding = this.padding;\n\t\t\tthis.width = width + padding.getRight();\n\t\t} else if( isHeightAuto ) {\n\t\t\tlet height = 0;\n\t\t\tconst children = this.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child.visible && this.hasRefitableHeight( child ) ) {\n\t\t\t\t\theight = Math.max( height, child.y + child.height );\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst padding = this.padding;\n\t\t\tthis.height = height + padding.getBottom();\n\t\t}\n\t}\n\n\tprotected isRefitable( target: any ): target is DRefitable {\n\t\treturn target instanceof DBase;\n\t}\n\n\tprotected hasRefitableHeight( target: any ): target is DRefitable {\n\t\treturn this.isRefitable( target ) &&\n\t\t\t! ( target instanceof DBase && utilIsFunction( target.coordinate.height ) );\n\t}\n\n\tprotected hasRefitableWidth( target: any ): target is DBase<any, any> {\n\t\treturn this.isRefitable( target ) &&\n\t\t\t! ( target instanceof DBase && utilIsFunction( target.coordinate.width ) );\n\t}\n\n\treflow(): void {\n\t\tif( this._isDirty ) {\n\t\t\tthis.onReflow();\n\t\t\tthis._isDirty = false;\n\t\t}\n\n\t\tif( this._hasDirty ) {\n\t\t\tconst children = this.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child instanceof DBase ) {\n\t\t\t\t\tchild.reflow();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._hasDirty = false;\n\t\t}\n\t}\n\n\tprotected onReflow(): void {\n\t\tconst width = this.width;\n\t\tconst height = this.height;\n\t\tconst reflowables = this._reflowables;\n\t\tfor( let i = 0, imax = reflowables.length; i < imax; ++i ) {\n\t\t\treflowables[ i ].onReflow( this, width, height );\n\t\t}\n\t}\n\n\tget shadow(): DShadow | null {\n\t\treturn this._shadow;\n\t}\n\n\tset shadow( shadow: DShadow | null ) {\n\t\tconst previous = this._shadow;\n\t\tif( previous !== shadow ) {\n\t\t\tif( previous != null ) {\n\t\t\t\tprevious.off( \"update\", this._onShadowUpdateBound );\n\t\t\t\tthis.removeReflowable( previous );\n\t\t\t\tthis.removeRenderable( previous, true );\n\t\t\t}\n\n\t\t\tthis._shadow = shadow;\n\t\t\tif( shadow != null ) {\n\t\t\t\tshadow.on( \"update\", this._onShadowUpdateBound );\n\t\t\t\tthis.addReflowable( shadow );\n\t\t\t\tthis.prependRenderable( shadow, true );\n\t\t\t}\n\n\t\t\tDApplications.update();\n\t\t}\n\t}\n\n\tlayout(): void {\n\t\tconst parent = this.getParentOfSize();\n\t\tthis.onParentResize( parent.width, parent.height, parent.padding );\n\t}\n\n\tprotected getParentOfSize(): { width: number, height: number, padding: DPadding } {\n\t\tconst parent = this.parent;\n\t\tif( parent instanceof DBase ) {\n\t\t\treturn parent;\n\t\t} else {\n\t\t\treturn DApplications.getInstance();\n\t\t}\n\t}\n\n\t/**\n\t * Called when a parent resized.\n\t *\n\t * @param parentWidth a parent's local width\n\t * @param parentHeight a parent's local height\n\t */\n\tonParentResize( parentWidth: number, parentHeight: number, parentPadding: DPadding ): void {\n\t\tconst scalarSet = this._scalarSet;\n\t\tconst position = this._transform.position;\n\t\tconst x = position.x;\n\t\tconst y = position.y;\n\t\tconst width = this._width;\n\t\tconst height = this._height;\n\n\t\t// Width & height\n\t\tconst paddingWidth = parentPadding.getLeft() + parentPadding.getRight();\n\t\tconst paddingHeight = parentPadding.getTop() + parentPadding.getBottom();\n\t\tconst newWidth = ( scalarSet.width != null ?\n\t\t\tscalarSet.width( parentWidth, width, paddingWidth, width ) : width );\n\t\tconst newHeight = ( scalarSet.height != null ?\n\t\t\tscalarSet.height( parentHeight, height, paddingHeight, height ) : height );\n\t\tthis.resize( newWidth, newHeight );\n\n\t\t// X & Y\n\t\tconst newX = ( scalarSet.x != null ? scalarSet.x( parentWidth, this.width, parentPadding.getLeft(), x ) : x );\n\t\tconst newY = ( scalarSet.y != null ? scalarSet.y( parentHeight, this.height, parentPadding.getTop(), y ) : y );\n\t\tthis.position.set( newX, newY );\n\t}\n\n\tresizeChildren(): void {\n\t\tconst width = this.width;\n\t\tconst height = this.height;\n\t\tconst padding = this._padding;\n\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child instanceof DBase ) {\n\t\t\t\tchild.onParentResize( width, height, padding );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Called when a parent moved.\n\t *\n\t * @param x a parent's local x position\n\t * @param y a parent's local y position\n\t */\n\tonParentMove( x: number, y: number ): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected moveChildren() {\n\t\tconst x = this.x;\n\t\tconst y = this.y;\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child instanceof DBase ) {\n\t\t\t\tchild.onParentMove( x, y );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Wheel\n\tonWheel( e: WheelEvent, deltas: UtilWheelEventDeltas, global: Point ): boolean {\n\t\tthis.emit( \"wheel\", e, deltas, global, this );\n\t\treturn false;\n\t}\n\n\t// Keydown\n\tonKeyDown( e: KeyboardEvent ): boolean {\n\t\tthis.emit( \"keydown\", e, this );\n\t\treturn false;\n\t}\n\n\tonKeyUp( e: KeyboardEvent ): boolean {\n\t\tthis.emit( \"keyup\", e, this );\n\t\treturn false;\n\t}\n\n\t// Down\n\tprotected onDown( e: InteractionEvent ): void {\n\t\tconst target = e.target;\n\t\tif( target === this ) {\n\t\t\tthis.onDownThis( e );\n\t\t} else if( !( target instanceof DBase ) ) {\n\t\t\tlet parent = target.parent;\n\t\t\twhile( parent != null && ! ( parent instanceof DBase ) ) {\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\t\t\tif( parent === this ) {\n\t\t\t\tthis.onDownThis( e );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onDownThis( e: InteractionEvent ): void {\n\t\tconst focusController = DControllers.getFocusController();\n\t\tfocusController.setFocused( focusController.findFocusableParent( this ), true, true );\n\t}\n\n\t// Double click\n\tonDblClick( e: MouseEvent | TouchEvent ): boolean {\n\t\tthis.emit( \"dblclick\", e, this );\n\t\treturn false;\n\t}\n\n\t//\n\trender( renderer: Renderer ): void {\n\t\tif( this.visible && 0 < this.worldAlpha && this.renderable ) {\n\t\t\tthis.renderBefore( renderer );\n\t\t\tsuper.render( renderer );\n\t\t\tthis.renderAfter( renderer );\n\t\t}\n\t}\n\n\tprotected renderBefore( renderer: Renderer ): void {\n\t\tconst befores = this._befores;\n\t\tfor( let i = 0, imax = befores.length; i < imax; ++i ) {\n\t\t\tconst before = befores[ i ];\n\t\t\tbefore.updateTransform();\n\t\t\tbefore.render( renderer );\n\t\t}\n\t}\n\n\tprotected renderAfter( renderer: Renderer ): void {\n\t\tconst afters = this._afters;\n\t\tfor( let i = 0, imax = afters.length; i < imax; ++i ) {\n\t\t\tconst after = afters[ i ];\n\t\t\tafter.updateTransform();\n\t\t\tafter.render( renderer );\n\t\t}\n\t}\n\n\t//\n\tprotected getThemeDefault(): THEME {\n\t\treturn DThemes.getInstance().get( this.getType() );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DBase\";\n\t}\n\n\t//\n\tprotected _calculateBounds(): void {\n\t\tconst worldTransform = this._transform.worldTransform;\n\t\tconst bounds = this._bounds;\n\n\t\tconst work = DBase.WORK_CONTAINS_POINT;\n\t\twork.set( 0, 0 );\n\t\tworldTransform.apply( work, work );\n\t\tbounds.addPoint( work );\n\n\t\twork.set( this._width, this._height );\n\t\tworldTransform.apply( work, work );\n\t\tbounds.addPoint( work );\n\n\t\tsuper._calculateBounds();\n\t}\n\n\tcontainsPoint( point: Point ): boolean {\n\t\treturn this.containsGlobalPoint( point ) || this.containsLocalPoint(\n\t\t\tthis.worldTransform.applyInverse( point, DBase.WORK_CONTAINS_POINT )\n\t\t);\n\t}\n\n\tprotected containsGlobalPoint( point: Point ): boolean {\n\t\treturn false;\n\t}\n\n\tprotected containsLocalPoint( point: Point ): boolean {\n\t\treturn (\n\t\t\t0 <= point.x && point.x <= this.width &&\n\t\t\t0 <= point.y && point.y <= this.height\n\t\t);\n\t}\n\n\tdestroy(): void {\n\t\t// Layout\n\t\tconst scalarSet = this._scalarSet;\n\t\tscalarSet.x = null;\n\t\tscalarSet.y = null;\n\t\tscalarSet.width = null;\n\t\tscalarSet.height = null;\n\n\t\t// Shadow\n\t\tconst shadow = this._shadow;\n\t\tif( shadow ) {\n\t\t\tthis._shadow = null;\n\t\t\tshadow.destroy();\n\t\t}\n\n\t\t// Children\n\t\tconst children = this.children;\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\tchildren[ i ].destroy();\n\t\t}\n\t\tchildren.length = 0;\n\n\t\t//\n\t\tsuper.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { MeshGeometry } from \"pixi.js\";\nimport { DynamicFontAtlas } from \"./util/dynamic-font-atlas\";\nimport { DynamicFontAtlasCharacter } from \"./util/dynamic-font-atlas-character\";\n\nexport class DDynamicTextGeometry extends MeshGeometry {\n\tprotected static WORK: Uint32Array | null = null;\n\twidth: number;\n\theight: number;\n\n\tconstructor() {\n\t\tsuper( new Float32Array( 64 ), new Float32Array( 64 ), new Uint16Array( 48 ) );\n\t\tthis.width = 0;\n\t\tthis.height = 0;\n\t}\n\n\tupdate( text: string, atlas: DynamicFontAtlas | null, clippingWidth: number | undefined ): void {\n\t\tconst vertexBuffer = this.getBuffer( \"aVertexPosition\" );\n\t\tconst uvBuffer = this.getBuffer( \"aTextureCoord\" );\n\t\tconst indexBuffer = this.getIndex();\n\n\t\tconst result = this.measureText( text, atlas, clippingWidth );\n\t\tconst requiredTextSize = Math.ceil( result[ 1 ] / 8 ) << 3;\n\t\tconst requiredVertexSize = requiredTextSize << 3;\n\t\tif( (vertexBuffer.data as Float32Array).length < requiredVertexSize ) {\n\t\t\tvertexBuffer.data = new Float32Array( requiredVertexSize );\n\t\t\tuvBuffer.data = new Float32Array( requiredVertexSize );\n\t\t}\n\t\tconst requiredIndexSize = requiredTextSize * 6;\n\t\tif( (indexBuffer.data as Uint16Array).length < requiredIndexSize ) {\n\t\t\tindexBuffer.data = new Uint16Array( requiredIndexSize );\n\t\t}\n\n\t\tconst vertices = vertexBuffer.data as Float32Array;\n\t\tconst uvs = uvBuffer.data as Float32Array;\n\t\tconst indices = indexBuffer.data as Uint16Array;\n\n\t\tif( atlas != null ) {\n\t\t\tlet x = 0;\n\t\t\tlet y = 0;\n\t\t\tlet ichar = 0;\n\t\t\tfor( let i = 0, imax = result[ 0 ]; i < imax; ++i ) {\n\t\t\t\tconst k = (1 + i) * 3;\n\t\t\t\tfor( let j = result[ k + 0 ], jmax = result[ k + 1 ]; j < jmax; j += 1, ichar += 1 ) {\n\t\t\t\t\tconst a = atlas.get( text[ j ] );\n\t\t\t\t\tif( a != null ) {\n\t\t\t\t\t\tthis.writeCharacter(\n\t\t\t\t\t\t\tvertices, uvs, indices,\n\t\t\t\t\t\t\tichar, x, y,\n\t\t\t\t\t\t\ta, atlas.width, atlas.height\n\t\t\t\t\t\t);\n\t\t\t\t\t\tx += a.advance;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.writeCharacterEmpty( vertices, uvs, indices, ichar );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif( result[ k + 2 ] ) {\n\t\t\t\t\tconst a = atlas.get( \"...\" );\n\t\t\t\t\tif( a != null ) {\n\t\t\t\t\t\tthis.writeCharacter(\n\t\t\t\t\t\t\tvertices, uvs, indices,\n\t\t\t\t\t\t\tichar, x, y,\n\t\t\t\t\t\t\ta, atlas.width, atlas.height\n\t\t\t\t\t\t);\n\t\t\t\t\t\tx += a.advance;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.writeCharacterEmpty( vertices, uvs, indices, ichar );\n\t\t\t\t\t}\n\t\t\t\t\tichar += 1;\n\t\t\t\t}\n\t\t\t\tx = 0;\n\t\t\t\ty += atlas.font.height;\n\t\t\t}\n\t\t\tfor( let i = ichar, imax = vertices.length >> 3; i < imax; ++i ) {\n\t\t\t\tthis.writeCharacterEmpty( vertices, uvs, indices, i );\n\t\t\t}\n\t\t\tthis.width = result[ 2 ];\n\t\t\tthis.height = y;\n\t\t} else {\n\t\t\tfor( let i = 0, imax = vertices.length >> 3; i < imax; ++i ) {\n\t\t\t\tthis.writeCharacterEmpty( vertices, uvs, indices, i );\n\t\t\t}\n\t\t\tthis.width = 0;\n\t\t\tthis.height = 0;\n\t\t}\n\n\t\tvertexBuffer.update();\n\t\tuvBuffer.update();\n\t\tindexBuffer.update();\n\t}\n\n\tprotected writeCharacter(\n\t\tvertices: Float32Array, uvs: Float32Array, indices: Uint16Array,\n\t\tindex: number, x: number, y: number,\n\t\tcharacter: DynamicFontAtlasCharacter,\n\t\twidth: number, height: number\n\t): void {\n\t\tconst offsetX = character.x - character.origin.x;\n\t\tconst offsetY = 0;\n\n\t\tconst iv = index << 3;\n\t\tvertices[ iv + 0 ] = x + offsetX;\n\t\tvertices[ iv + 1 ] = y + offsetY;\n\t\tvertices[ iv + 2 ] = x + offsetX + character.width;\n\t\tvertices[ iv + 3 ] = y + offsetY;\n\t\tvertices[ iv + 4 ] = x + offsetX + character.width;\n\t\tvertices[ iv + 5 ] = y + offsetY + character.height;\n\t\tvertices[ iv + 6 ] = x + offsetX;\n\t\tvertices[ iv + 7 ] = y + offsetY + character.height;\n\n\t\tconst x0 = character.x / width;\n\t\tconst y0 = character.y / height;\n\t\tconst x1 = ( character.x + character.width ) / width;\n\t\tconst y1 = ( character.y + character.height ) / height;\n\t\tuvs[ iv + 0 ] = x0;\n\t\tuvs[ iv + 1 ] = y0;\n\t\tuvs[ iv + 2 ] = x1;\n\t\tuvs[ iv + 3 ] = y0;\n\t\tuvs[ iv + 4 ] = x1;\n\t\tuvs[ iv + 5 ] = y1;\n\t\tuvs[ iv + 6 ] = x0;\n\t\tuvs[ iv + 7 ] = y1;\n\n\t\tconst ii = index * 6;\n\t\tconst vo = index << 2;\n\t\tindices[ ii + 0 ] = vo + 0;\n\t\tindices[ ii + 1 ] = vo + 1;\n\t\tindices[ ii + 2 ] = vo + 3;\n\t\tindices[ ii + 3 ] = vo + 1;\n\t\tindices[ ii + 4 ] = vo + 2;\n\t\tindices[ ii + 5 ] = vo + 3;\n\t}\n\n\tprotected writeCharacterEmpty(\n\t\tvertices: Float32Array, uvs: Float32Array, indices: Uint16Array,\n\t\tindex: number\n\t): void {\n\t\tconst iv = index << 3;\n\t\tvertices[ iv + 0 ] = 0;\n\t\tvertices[ iv + 1 ] = 0;\n\t\tvertices[ iv + 2 ] = 0;\n\t\tvertices[ iv + 3 ] = 0;\n\t\tvertices[ iv + 4 ] = 0;\n\t\tvertices[ iv + 5 ] = 0;\n\t\tvertices[ iv + 6 ] = 0;\n\t\tvertices[ iv + 7 ] = 0;\n\n\t\tuvs[ iv + 0 ] = 0;\n\t\tuvs[ iv + 1 ] = 0;\n\t\tuvs[ iv + 2 ] = 0;\n\t\tuvs[ iv + 3 ] = 0;\n\t\tuvs[ iv + 4 ] = 0;\n\t\tuvs[ iv + 5 ] = 0;\n\t\tuvs[ iv + 6 ] = 0;\n\t\tuvs[ iv + 7 ] = 0;\n\n\t\tconst ii = index * 6;\n\t\tconst vo = index << 2;\n\t\tindices[ ii + 0 ] = vo + 0;\n\t\tindices[ ii + 1 ] = vo + 1;\n\t\tindices[ ii + 2 ] = vo + 3;\n\t\tindices[ ii + 3 ] = vo + 1;\n\t\tindices[ ii + 4 ] = vo + 2;\n\t\tindices[ ii + 5 ] = vo + 3;\n\t}\n\n\tprotected measureText(\n\t\ttext: string, atlas: DynamicFontAtlas | null, clippingWidth: number | undefined\n\t): Uint32Array {\n\t\tlet result = DDynamicTextGeometry.WORK = DDynamicTextGeometry.WORK || new Uint32Array( 3 * 16 );\n\t\tresult[ 0 ] = 0;\n\t\tresult[ 1 ] = 0;\n\t\tresult[ 2 ] = 0;\n\t\tresult[ 3 ] = 0;\n\t\tif( atlas != null ) {\n\t\t\tlet x = 0;\n\t\t\tconst l = text.length;\n\t\t\tfor( let i = 0; i < l; ++i ) {\n\t\t\t\tconst char = text[ i ];\n\t\t\t\tif( char === \"\\n\" ) {\n\t\t\t\t\tresult = this.setResult( result, i, false, x, i + 1 );\n\t\t\t\t\tx = 0;\n\t\t\t\t} else {\n\t\t\t\t\tconst a = atlas.get( char );\n\t\t\t\t\tif( a != null ) {\n\t\t\t\t\t\tif( clippingWidth != null && clippingWidth < x + a.advance ) {\n\t\t\t\t\t\t\tconst dots = atlas.get( \"...\" );\n\t\t\t\t\t\t\tconst iend = ( (dots != null && clippingWidth < x + dots.advance) ? i - 1 : i );\n\t\t\t\t\t\t\tlet inext = i + 1;\n\t\t\t\t\t\t\tfor( ; inext < l; ++inext ) {\n\t\t\t\t\t\t\t\tif( text[ inext ] === \"\\n\" ) {\n\t\t\t\t\t\t\t\t\tinext += 1;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tresult = this.setResult( result, iend, true, x, inext );\n\t\t\t\t\t\t\ti = inext - 1;\n\t\t\t\t\t\t\tx = 0;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tx += a.advance;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tresult = this.setResult( result, l, false, x, l );\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected setResult( result: Uint32Array, iend: number, hasDots: boolean, x: number, inext: number ): Uint32Array {\n\t\tconst iresult = ( 1 + result[ 0 ] ) * 3;\n\t\tlet istart = result[ iresult + 0 ];\n\t\tif( istart < iend || hasDots ) {\n\t\t\tistart = Math.min( istart, iend );\n\t\t\tresult[ iresult + 0 ] = istart;\n\t\t\tresult[ iresult + 1 ] = iend;\n\t\t\tresult[ iresult + 2 ] = ( hasDots ? 1 : 0 );\n\t\t\tif( result.length <= iresult + 3 ) {\n\t\t\t\tconst newResult = new Uint32Array( result.length + 3 * 16 );\n\t\t\t\tnewResult.set( result );\n\t\t\t\tresult = newResult;\n\t\t\t\tDDynamicTextGeometry.WORK = newResult;\n\t\t\t}\n\t\t\tresult[ 0 ] += 1;\n\t\t\tresult[ 1 ] += iend - istart;\n\t\t\tresult[ 2 ] = Math.max( result[ 2 ], Math.ceil( x ) );\n\t\t\tresult[ iresult + 3 ] = inext;\n\t\t} else {\n\t\t\tresult[ iresult + 0 ] = inext;\n\t\t}\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DFontStyle, DFontVariant, DFontWeight, DThemeFont } from \"./d-font\";\nimport { DThemes } from \"./theme/d-themes\";\n\nexport type DDynamicTextAlign = \"left\" | \"center\" | \"right\";\n\nexport interface DDynamicTextStyleOptions {\n\talign?: DDynamicTextAlign;\n\tfontFamily?: string;\n\tfontSize?: number;\n\tfontStyle?: DFontStyle;\n\tfontVariant?: DFontVariant;\n\tfontWeight?: DFontWeight;\n\tfill?: number;\n\tclipping?: boolean;\n}\n\nexport class DDynamicTextStyle {\n\tprotected static FONT: DThemeFont | null = null;\n\n\tprotected _id: number;\n\tprotected _idApproved: number;\n\tprotected _fontIdId: number;\n\tprotected _fontId: string;\n\tprotected _fontIdApproved: string;\n\tprotected _align: DDynamicTextAlign;\n\tprotected _fontFamily: string;\n\tprotected _fontSize: number;\n\tprotected _fontStyle: DFontStyle;\n\tprotected _fontVariant: DFontVariant;\n\tprotected _fontWeight: DFontWeight;\n\tprotected _fill: number;\n\tprotected _fillApproved: number;\n\tprotected _clipping: boolean;\n\tprotected _onChange: () => void;\n\n\tconstructor( options: DDynamicTextStyleOptions | undefined, onChange: () => void ) {\n\t\tthis._id = 0;\n\t\tthis._idApproved = -1;\n\n\t\tconst font = DDynamicTextStyle.FONT = (\n\t\t\tDDynamicTextStyle.FONT || DThemes.getInstance().get( \"DBase\" ) as DThemeFont\n\t\t);\n\t\tthis._align = (options && options.align) || \"left\";\n\t\tthis._fontFamily = (options && options.fontFamily) || font.getFontFamilly();\n\t\tthis._fontSize = (options && options.fontSize) || font.getFontSize();\n\t\tthis._fontStyle = (options && options.fontStyle) || \"normal\";\n\t\tthis._fontVariant = (options && options.fontVariant) || \"normal\";\n\t\tthis._fontWeight = (options && options.fontWeight) || \"normal\";\n\n\t\tthis._fontIdId = -1;\n\t\tthis._fontId = \"\";\n\t\tthis._fontIdApproved = \"\";\n\n\t\tthis._fill = (options && options.fill) || font.getColor( 0 );\n\t\tthis._fillApproved = 0x000000;\n\n\t\tthis._clipping = ((options && options.clipping != null) ? options.clipping : true);\n\n\t\tthis._onChange = onChange;\n\t}\n\n\tget id(): number {\n\t\treturn this._id;\n\t}\n\n\tget idApproved(): number {\n\t\treturn this._idApproved;\n\t}\n\n\tget fontId(): string {\n\t\tthis.update();\n\t\treturn this._fontId;\n\t}\n\n\tget fontIdApproved(): string {\n\t\treturn this._fontIdApproved;\n\t}\n\n\tget fill(): number {\n\t\treturn this._fill;\n\t}\n\n\tset fill( fill: number ) {\n\t\tif( this._fill !== fill ) {\n\t\t\tthis._fill = fill;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tprotected onChange(): void {\n\t\tthis._id += 1;\n\t\tthis._onChange();\n\t}\n\n\tget fillApproved(): number {\n\t\treturn this._fillApproved;\n\t}\n\n\tapprove(): void {\n\t\tthis.update();\n\t\tthis._idApproved = this._id;\n\t\tthis._fontIdApproved = this._fontId;\n\t\tthis._fillApproved = this._fill;\n\t}\n\n\tget fontFamily(): string {\n\t\treturn this._fontFamily;\n\t}\n\n\tset fontFamily( fontFamily: string ) {\n\t\tif( this._fontFamily !== fontFamily ) {\n\t\t\tthis._fontFamily = fontFamily;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tget fontSize(): number {\n\t\treturn this._fontSize;\n\t}\n\n\tset fontSize( fontSize: number ) {\n\t\tif( this._fontSize !== fontSize ) {\n\t\t\tthis._fontSize = fontSize;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tget fontStyle(): DFontStyle {\n\t\treturn this._fontStyle;\n\t}\n\n\tset fontStyle( fontStyle: DFontStyle ) {\n\t\tif( this._fontStyle !== fontStyle ) {\n\t\t\tthis._fontStyle = fontStyle;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tget fontVariant(): DFontVariant {\n\t\treturn this._fontVariant;\n\t}\n\n\tset fontVariant( fontVariant: DFontVariant ) {\n\t\tif( this._fontVariant !== fontVariant ) {\n\t\t\tthis._fontVariant = fontVariant;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tget fontWeight(): DFontWeight {\n\t\treturn this._fontWeight;\n\t}\n\n\tset fontWeight( fontWeight: DFontWeight ) {\n\t\tif( this._fontWeight !== fontWeight ) {\n\t\t\tthis._fontWeight = fontWeight;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tprotected update(): void {\n\t\tif( this._fontIdId !== this._id ) {\n\t\t\tthis._fontIdId = this._id;\n\t\t\tthis._fontId = this.newFontId();\n\t\t}\n\t}\n\n\tprotected newFontId(): string {\n\t\treturn `${this._fontStyle} ${this._fontVariant} ${this._fontWeight} ${this._fontSize}px ${this._fontFamily}`;\n\t}\n\n\tget clipping(): boolean {\n\t\treturn this._clipping;\n\t}\n\n\tset clipping( clipping: boolean ) {\n\t\tif( this._clipping !== clipping ) {\n\t\t\tthis._clipping = clipping;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const ASCII_CHARACTERS =\n\t\" !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\";\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class DynamicFontAtlasCharacterOrigin {\n\tx: number;\n\ty: number;\n\n\tconstructor( x: number, y: number ) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DynamicFontAtlasCharacterOrigin } from \"./dynamic-font-atlas-chaaracter-origin\";\n\nexport class DynamicFontAtlasCharacter {\n\tref: number;\n\tlife: number;\n\tx: number;\n\ty: number;\n\twidth: number;\n\theight: number;\n\tadvance: number;\n\torigin: DynamicFontAtlasCharacterOrigin;\n\treserved: boolean;\n\n\tconstructor( advance: number, width: number, height: number, reserved: boolean ) {\n\t\tthis.ref = 1;\n\t\tthis.life = 10;\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.advance = advance;\n\t\tthis.origin = new DynamicFontAtlasCharacterOrigin( 0, 0 );\n\t\tthis.reserved = reserved;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { TextMetrics, utils } from \"pixi.js\";\n\nexport class DynamicFontAtlasFont {\n\tid: string;\n\tsize: number;\n\tcolor: string;\n\theight: number;\n\n\tascent: number;\n\tdescent: number;\n\n\tconstructor( fontId: string, size: number, color: number, padding: number ) {\n\t\tthis.id = fontId;\n\t\tthis.size = size;\n\t\tthis.color = utils.hex2string( color );\n\t\tthis.height = this.size + padding * 2;\n\t\tconst metrics = TextMetrics.measureFont( fontId );\n\t\tthis.ascent = metrics.ascent;\n\t\tthis.descent = metrics.descent;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { MIPMAP_MODES, SCALE_MODES, settings, Texture } from \"pixi.js\";\nimport { ASCII_CHARACTERS } from \"./ascii\";\nimport { DynamicFontAtlasCharacter } from \"./dynamic-font-atlas-character\";\nimport { DynamicFontAtlasCharacters } from \"./dynamic-font-atlas-characters\";\nimport { DynamicFontAtlasFont } from \"./dynamic-font-atlas-font\";\n\nconst PADDING = 3;\n\nexport class DynamicFontAtlas {\n\tprotected _id: string;\n\tprotected _canvas: HTMLCanvasElement | null;\n\tprotected _context: CanvasRenderingContext2D | null;\n\tprotected _font: DynamicFontAtlasFont;\n\tprotected _characters: DynamicFontAtlasCharacters;\n\tprotected _length: number;\n\tprotected _unrefCount: number;\n\tprotected _width: number;\n\tprotected _height: number;\n\tprotected _revision: number;\n\tprotected _revisionUpdated: number;\n\tprotected _texture: Texture;\n\n\tconstructor( fontId: string, fontSize: number, fontColor: number ) {\n\t\tthis._id = fontId;\n\t\tthis._canvas = document.createElement( \"canvas\" );\n\t\tthis._context = null;\n\t\tthis._font = new DynamicFontAtlasFont( fontId, fontSize, fontColor, PADDING );\n\t\tthis._characters = {};\n\t\tthis._length = 0;\n\t\tthis._unrefCount = 0;\n\t\tthis._width = 1;\n\t\tthis._height = 1;\n\t\tthis._revision = 0;\n\t\tthis._revisionUpdated = 0;\n\t\tthis._texture = Texture.from( this._canvas, {\n\t\t\tmipmap: MIPMAP_MODES.OFF,\n\t\t\tresolution: settings.RESOLUTION,\n\t\t\tscaleMode: SCALE_MODES.NEAREST\n\t\t});\n\n\t\tthis.add( ASCII_CHARACTERS, true );\n\t\tthis.add_( \"...\", this._characters, true );\n\t}\n\n\tget id() {\n\t\treturn this._id;\n\t}\n\n\tget font(): DynamicFontAtlasFont {\n\t\treturn this._font;\n\t}\n\n\tget width(): number {\n\t\treturn this._width;\n\t}\n\n\tget height(): number {\n\t\treturn this._height;\n\t}\n\n\tget canvas(): HTMLCanvasElement | null {\n\t\treturn this._canvas;\n\t}\n\n\tget characters(): DynamicFontAtlasCharacters {\n\t\treturn this._characters;\n\t}\n\n\tget texture(): Texture {\n\t\treturn this._texture;\n\t}\n\n\tprotected add_( character: string, characters: DynamicFontAtlasCharacters, reserved?: boolean ): void {\n\t\tif( character !== \"\\n\" ) {\n\t\t\tconst data = characters[ character ];\n\t\t\tif( data != null ) {\n\t\t\t\tif( ! data.reserved ) {\n\t\t\t\t\tif( data.ref === 0 ) {\n\t\t\t\t\t\tthis._unrefCount -= 1;\n\t\t\t\t\t}\n\t\t\t\t\tdata.ref += 1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst advance = this.getAdvance( character );\n\t\t\t\tconst width = Math.ceil( PADDING + advance + PADDING );\n\t\t\t\tconst height = this.font.height;\n\t\t\t\tcharacters[ character ] = new DynamicFontAtlasCharacter( advance, width, height, !! reserved );\n\t\t\t\tthis._length += 1;\n\t\t\t\tthis._revision += 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected remove_( character: string, characters: DynamicFontAtlasCharacters ): void {\n\t\tif( character !== \"\\n\" ) {\n\t\t\tconst data = characters[ character ];\n\t\t\tif( data != null ) {\n\t\t\t\tif( ! data.reserved && 0 < data.ref ) {\n\t\t\t\t\tdata.ref -= 1;\n\t\t\t\t\tif( data.ref === 0 ) {\n\t\t\t\t\t\tthis._unrefCount += 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected cleanup_(): void {\n\t\tif( (this._length >> 1) <= this._unrefCount ) {\n\t\t\tconst characters = this._characters;\n\t\t\tfor( const character in characters ) {\n\t\t\t\tif( characters[ character ].ref <= 0 ) {\n\t\t\t\t\tdelete characters[ character ];\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._length -= this._unrefCount;\n\t\t\tthis._revision += 1;\n\t\t\tthis._unrefCount = 0;\n\t\t}\n\t}\n\n\tadd( targets: string, reserved?: boolean ): void {\n\t\tconst characters = this._characters;\n\t\tfor( let i = 0, imax = targets.length; i < imax; ++i ) {\n\t\t\tthis.add_( targets[ i ], characters, reserved );\n\t\t}\n\t}\n\n\tremove( targets: string ): void {\n\t\tconst characters = this._characters;\n\t\tfor( let i = 0, imax = targets.length; i < imax; ++i ) {\n\t\t\tthis.remove_( targets[ i ], characters );\n\t\t}\n\t}\n\n\tget( character: string ): DynamicFontAtlasCharacter | undefined {\n\t\treturn this._characters[ character ];\n\t}\n\n\tgetAdvance( target: string ): number {\n\t\tconst context = this.getContext();\n\t\tif( context != null ) {\n\t\t\treturn context.measureText( target ).width;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetContext(): CanvasRenderingContext2D | null {\n\t\tlet context = this._context;\n\t\tif( context == null ) {\n\t\t\tconst canvas = this._canvas;\n\t\t\tif( canvas != null ) {\n\t\t\t\tcontext = this._context = canvas.getContext( \"2d\", { alpha: true } );\n\t\t\t\tif( context == null ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\tconst font = this._font;\n\t\tif( context.font !== font.id ) {\n\t\t\tcontext.font = font.id;\n\t\t\tfont.id = context.font;\n\t\t\tcontext.textAlign = \"left\";\n\t\t\tcontext.textBaseline = \"alphabetic\";\n\t\t\tcontext.lineWidth = 0;\n\t\t\tcontext.lineCap = \"round\";\n\t\t\tcontext.lineJoin = \"miter\";\n\t\t\tcontext.miterLimit = 0;\n\t\t\tcontext.fillStyle = font.color;\n\t\t\tcontext.strokeStyle = \"#0000ff\";\n\t\t}\n\t\treturn context;\n\t}\n\n\tupdate(): boolean {\n\t\tthis.cleanup_();\n\n\t\tif( this._revisionUpdated < this._revision ) {\n\t\t\tthis._revisionUpdated = this._revision;\n\n\t\t\tconst canvas = this._canvas;\n\t\t\tif( canvas != null ) {\n\t\t\t\tconst font = this._font;\n\t\t\t\tconst fontHeight = font.height;\n\t\t\t\tconst characters = this._characters;\n\t\t\t\tconst width = this._width = this.toPowerOf2( Math.ceil( Math.sqrt( this._length ) ) * fontHeight );\n\n\t\t\t\tconst offsetX = PADDING;\n\t\t\t\tconst offsetY = Math.round( (fontHeight - (font.ascent + font.descent)) * 0.5 + font.ascent );\n\t\t\t\tlet x = 0;\n\t\t\t\tlet y = 0;\n\t\t\t\tfor( const key in characters ) {\n\t\t\t\t\tconst character = characters[ key ];\n\t\t\t\t\tif( width <= x + character.width ) {\n\t\t\t\t\t\tx = 0;\n\t\t\t\t\t\ty += fontHeight;\n\t\t\t\t\t}\n\n\t\t\t\t\tcharacter.x = x;\n\t\t\t\t\tcharacter.y = y;\n\t\t\t\t\tcharacter.origin.x = x + offsetX;\n\t\t\t\t\tcharacter.origin.y = y + offsetY;\n\n\t\t\t\t\tx += character.width;\n\t\t\t\t}\n\t\t\t\tconst height = this._height = y + fontHeight;\n\n\t\t\t\t// Make a input canvas\n\t\t\t\t// Here, we need to reset the context because\n\t\t\t\t// context settings will be lost when we set the width/height.\n\t\t\t\tconst baseTexture = this._texture.baseTexture;\n\t\t\t\tconst resolution = baseTexture.resolution;\n\t\t\t\tconst realWidth = Math.ceil( width * resolution );\n\t\t\t\tconst realHeight = Math.ceil( height * resolution );\n\t\t\t\tcanvas.width = realWidth;\n\t\t\t\tcanvas.height = realHeight;\n\t\t\t\tconst context = this.getContext();\n\t\t\t\tif( context != null ) {\n\t\t\t\t\tcontext.save();\n\t\t\t\t\tcontext.scale( resolution, resolution );\n\t\t\t\t\tcontext.clearRect( 0, 0, width, height );\n\t\t\t\t\tfor( const key in characters ) {\n\t\t\t\t\t\tconst character = characters[ key ];\n\t\t\t\t\t\tcontext.fillText( key, character.origin.x, character.origin.y );\n\t\t\t\t\t}\n\t\t\t\t\tcontext.restore();\n\t\t\t\t}\n\t\t\t\tbaseTexture.setRealSize( realWidth, realHeight );\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tgetRevision(): number {\n\t\treturn this._revision;\n\t}\n\n\tgetRevisionUpdate(): number {\n\t\treturn this._revisionUpdated;\n\t}\n\n\tget length(): number {\n\t\treturn this._length;\n\t}\n\n\tdestroy() {\n\t\tconst canvas = this._canvas;\n\t\tif( canvas != null ) {\n\t\t\tthis._canvas = null;\n\t\t}\n\n\t\tconst characters = this._characters;\n\t\tfor( const character in characters ) {\n\t\t\tdelete characters[ character ];\n\t\t}\n\t}\n\n\ttoPowerOf2( size: number ): number {\n\t\tlet result = 32;\n\t\twhile( result < size ) {\n\t\t\tresult <<= 1;\n\t\t}\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplications } from \"../d-applications\";\nimport { DynamicFontAtlas } from \"./dynamic-font-atlas\";\n\nconst update = ( atlas: DynamicFontAtlas ): void => {\n\tatlas.update();\n};\n\nconst updateAll = ( colorToAltas: Map<number, DynamicFontAtlas> ): void => {\n\tcolorToAltas.forEach( update );\n};\n\nconst destroy = ( atlas: DynamicFontAtlas ): void => {\n\tatlas.update();\n};\n\nconst destroyAll = ( colorToAltas: Map<number, DynamicFontAtlas> ): void => {\n\tcolorToAltas.forEach( destroy );\n};\n\nexport class DynamicFontAtlases {\n\tprotected static INSTANCE: DynamicFontAtlases | null = null;\n\tprotected _atlases: Map<string, Map<number, DynamicFontAtlas>>;\n\n\tconstructor() {\n\t\tthis._atlases = new Map<string, Map<number, DynamicFontAtlas>>();\n\n\t\tDApplications.getInstance().renderer.on( \"prerender\", (): void => {\n\t\t\tthis.update();\n\t\t});\n\t}\n\n\tadd( fontId: string, fontSize: number, fontColor: number, targets: string ): void {\n\t\tconst atlases = this._atlases;\n\t\tlet colorToAtlas = atlases.get( fontId );\n\t\tif( colorToAtlas == null ) {\n\t\t\tcolorToAtlas = new Map<number, DynamicFontAtlas>();\n\t\t\tatlases.set( fontId, colorToAtlas );\n\t\t}\n\t\tlet atlas = colorToAtlas.get( fontColor );\n\t\tif( atlas == null ) {\n\t\t\tatlas = new DynamicFontAtlas( fontId, fontSize, fontColor );\n\t\t\tcolorToAtlas.set( fontColor, atlas );\n\t\t}\n\t\tatlas.add( targets );\n\t}\n\n\tremove( fontId: string, fontColor: number, targets: string ): void {\n\t\tconst colorToAtlas = this._atlases.get( fontId );\n\t\tif( colorToAtlas != null ) {\n\t\t\tconst atlas = colorToAtlas.get( fontColor );\n\t\t\tif( atlas != null ) {\n\t\t\t\tatlas.remove( targets );\n\t\t\t}\n\t\t}\n\t}\n\n\tget( fontId: string, fontColor: number ): DynamicFontAtlas | null {\n\t\tconst atlases = this._atlases;\n\t\tconst colorToAtlas = atlases.get( fontId );\n\t\tif( colorToAtlas == null ) {\n\t\t\treturn null;\n\t\t}\n\t\tconst atlas = colorToAtlas.get( fontColor );\n\t\tif( atlas == null ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn atlas;\n\t}\n\n\tupdate(): void {\n\t\tthis._atlases.forEach( updateAll );\n\t}\n\n\tdestroy() {\n\t\tconst atlases = this._atlases;\n\t\tatlases.forEach( destroyAll );\n\t\tatlases.clear();\n\t}\n\n\tstatic getInstance(): DynamicFontAtlases {\n\t\tif( DynamicFontAtlases.INSTANCE == null ) {\n\t\t\tDynamicFontAtlases.INSTANCE = new DynamicFontAtlases();\n\t\t}\n\t\treturn DynamicFontAtlases.INSTANCE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Mesh, MeshMaterial, Renderer, Texture } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\nimport { DDynamicTextGeometry } from \"./d-dynamic-text-geometry\";\nimport { DDynamicTextStyle, DDynamicTextStyleOptions } from \"./d-dynamic-text-style\";\nimport { DynamicFontAtlas } from \"./util/dynamic-font-atlas\";\nimport { DynamicFontAtlases } from \"./util/dynamic-font-atlases\";\n\nexport class DDynamicText extends Mesh {\n\tprotected _style: DDynamicTextStyle;\n\tprotected _text: string;\n\tprotected _textApproved: string;\n\tprotected _isDirty: boolean;\n\tprotected _isGeometryDirty: boolean;\n\tprotected _atlas: DynamicFontAtlas | null;\n\tprotected _atlasRevisionUpdated: number;\n\tprotected _width: number;\n\tprotected _height: number;\n\tprotected _clippingWidth: number | undefined;\n\tprotected _clippingWidthDelta: number;\n\n\treadonly geometry!: DDynamicTextGeometry;\n\n\tconstructor( text: string, options?: DDynamicTextStyleOptions ) {\n\t\tsuper( new DDynamicTextGeometry(), new MeshMaterial( Texture.EMPTY ) );\n\n\t\tthis._style = new DDynamicTextStyle( options, (): void => {\n\t\t\tthis._isDirty = true;\n\t\t\tthis._isGeometryDirty = true;\n\t\t\tthis._atlas = null;\n\t\t\tthis.update_();\n\t\t});\n\t\tthis._text = text;\n\t\tthis._textApproved = \"\";\n\t\tthis._isDirty = true;\n\t\tthis._isGeometryDirty = true;\n\t\tthis._atlas = null;\n\t\tthis._atlasRevisionUpdated = 0;\n\t\tthis._width = 0;\n\t\tthis._height = 0;\n\t\tthis._clippingWidthDelta = 0;\n\t\tthis.update_();\n\t}\n\n\tprotected update_(): void {\n\t\tconst style = this._style;\n\t\tif( this._isDirty ) {\n\t\t\tthis._isDirty = false;\n\n\t\t\tconst text = this._text;\n\t\t\tconst textApproved = this._textApproved;\n\t\t\tthis._textApproved = text;\n\t\t\tconst fontId = style.fontId;\n\t\t\tconst fontIdApproved = style.fontIdApproved;\n\t\t\tconst fontSize = style.fontSize;\n\t\t\tconst fill = style.fill;\n\t\t\tconst fillApproved = style.fillApproved;\n\t\t\tstyle.approve();\n\n\t\t\tconst atlases = DynamicFontAtlases.getInstance();\n\t\t\tif( text !== textApproved || fontId !== fontIdApproved || fill !== fillApproved ) {\n\t\t\t\tatlases.add( fontId, fontSize, fill, text );\n\t\t\t\tatlases.remove( fontIdApproved, fillApproved, textApproved );\n\t\t\t}\n\t\t}\n\t}\n\n\tget text(): string {\n\t\treturn this._text;\n\t}\n\n\tset text( text: string ) {\n\t\tif( this._text !== text ) {\n\t\t\tthis._text = text;\n\t\t\tthis._isDirty = true;\n\t\t\tthis._isGeometryDirty = true;\n\t\t\tthis.update_();\n\t\t}\n\t}\n\n\tget width(): number {\n\t\tthis.update();\n\t\treturn Math.abs( this.scale.x ) * this.geometry.width;\n\t}\n\n\tset width( width: number ) {\n\t\tthis.update();\n\t\tconst geometryWidth = this.geometry.width;\n\t\tif( +1e-4 < geometryWidth ) {\n\t\t\tconst newScale = width / geometryWidth;\n\t\t\tthis.scale.x = ( 0 <= this.scale.x ? +newScale : -newScale );\n\t\t}\n\t}\n\n\tget height(): number {\n\t\tthis.update();\n\t\treturn Math.abs( this.scale.y ) * this.geometry.height;\n\t}\n\n\tset height( height: number ) {\n\t\tthis.update();\n\t\tconst geometryHeight = this.geometry.height;\n\t\tif( +1e-4 < geometryHeight ) {\n\t\t\tconst newScale = height / geometryHeight;\n\t\t\tthis.scale.y = ( 0 <= this.scale.y ? +newScale : -newScale );\n\t\t}\n\t}\n\n\tget style(): DDynamicTextStyle {\n\t\treturn this._style;\n\t}\n\n\tupdate(): void {\n\t\tthis.update_();\n\n\t\tlet atlas = this._atlas;\n\t\tif( atlas == null ) {\n\t\t\tconst style = this._style;\n\t\t\tatlas = DynamicFontAtlases.getInstance().get( style.fontId, style.fill );\n\t\t\tif( atlas != null ) {\n\t\t\t\tthis._atlasRevisionUpdated = atlas.getRevisionUpdate();\n\t\t\t\tthis._atlas = atlas;\n\t\t\t\tthis.texture = atlas.texture;\n\t\t\t\tthis._isGeometryDirty = true;\n\t\t\t}\n\t\t} else {\n\t\t\tconst revisionUpdate = atlas.getRevisionUpdate();\n\t\t\tif( revisionUpdate !== this._atlasRevisionUpdated ) {\n\t\t\t\tthis._atlasRevisionUpdated = revisionUpdate;\n\t\t\t\tthis._isGeometryDirty = true;\n\t\t\t}\n\t\t}\n\n\t\tconst clippingWidth = this._clippingWidth;\n\t\tconst newClippingWidth = this.getClippingWidth();\n\t\tif( clippingWidth !== newClippingWidth ) {\n\t\t\tthis._clippingWidth = newClippingWidth;\n\t\t\tthis._isGeometryDirty = true;\n\t\t}\n\n\t\tif( this._isGeometryDirty ) {\n\t\t\tthis._isGeometryDirty = false;\n\t\t\tthis.geometry.update( this._text, atlas, newClippingWidth );\n\t\t}\n\t}\n\n\tprotected getClippingWidth(): number | undefined {\n\t\tif( this._style.clipping ) {\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent instanceof DBase ) {\n\t\t\t\treturn parent.width - parent.padding.getLeft() - parent.padding.getRight() - this._clippingWidthDelta;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tsetClippingWidthDelta( width: number ): void {\n\t\tthis._clippingWidthDelta = width;\n\t}\n\n\t_calculateBounds(): void {\n\t\tthis.update();\n\t\tsuper._calculateBounds();\n\t}\n\n\t_render( renderer?: Renderer ): void {\n\t\tthis.update();\n\t\t(super._render as any)( renderer );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Graphics, Renderer } from \"pixi.js\";\nimport { DBase, DReflowable } from \"./d-base\";\n\nexport class DBaseOverflowMaskSimple extends Graphics implements DReflowable {\n\tconstructor( parent: DBase ) {\n\t\tsuper();\n\t\t(this as any).parent = parent;\n\t}\n\n\trender( renderer: Renderer ): void {\n\t\tthis.updateTransform();\n\t\tsuper.render( renderer );\n\t}\n\n\tonReflow( base: DBase, width: number, height: number): void {\n\t\tthis.clear();\n\t\tthis.beginFill( 0xFFFFFF, 1 );\n\t\tthis.drawRect( 0, 0, width, height );\n\t\tthis.endFill();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Graphics, Text } from \"pixi.js\";\nimport { DAlignHorizontal } from \"./d-align-horizontal\";\nimport { DAlignVertical } from \"./d-align-vertical\";\nimport { DApplications } from \"./d-applications\";\nimport { DBase, DBaseOptions, DRefitable, DThemeBase } from \"./d-base\";\nimport { DBaseOverflowMaskSimple } from \"./d-base-overflow-mask-simple\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DDynamicText } from \"./d-dynamic-text\";\nimport { DDynamicTextStyleOptions } from \"./d-dynamic-text-style\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\nimport { utilIsFunction } from \"./util/util-is-function\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport interface DTextBaseOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeTextBase = DThemeTextBase\n> extends DBaseOptions<THEME> {\n\ttext?: {\n\t\tvalue?: DStateAwareOrValueMightBe<VALUE>,\n\t\tcolor?: DStateAwareOrValueMightBe<number>,\n\t\talpha?: DStateAwareOrValueMightBe<number>,\n\t\tstyle?: DDynamicTextStyleOptions,\n\t\talign?: {\n\t\t\tvertical?: (keyof typeof DAlignVertical) | DAlignVertical,\n\t\t\thorizontal?: (keyof typeof DAlignHorizontal) | DAlignHorizontal\n\t\t},\n\t\tformatter?: ( value: VALUE, caller: any ) => string;\n\t\tdynamic?: boolean;\n\t};\n\tmask?: boolean;\n}\n\nexport interface DThemeTextBase extends DThemeBase {\n\tgetTextFormatter(): ( value: any, caller: any ) => string;\n\tnewTextValue(): any;\n\tgetTextValue( state: DBaseState ): any;\n\tgetTextAlignVertical(): DAlignVertical;\n\tgetTextAlignHorizontal(): DAlignHorizontal;\n\tgetTextStyleClipping(): boolean;\n\tisOverflowMaskEnabled(): boolean;\n\tisTextDynamic(): boolean;\n}\n\n// Option parser\nconst isOverflowMaskEnabled = <VALUE, THEME extends DThemeTextBase>(\n\ttheme: DThemeTextBase, options?: DTextBaseOptions<VALUE, THEME>\n) => {\n\tif( options && options.mask != null ) {\n\t\treturn options.mask;\n\t}\n\treturn theme.isOverflowMaskEnabled();\n};\n\nconst toTextValue = <VALUE, THEME extends DThemeTextBase>(\n\ttheme: DThemeTextBase,\n\toptions: DTextBaseOptions<VALUE, THEME> | undefined\n): DStateAwareOrValueMightBe<VALUE> => {\n\tif( options && options.text && options.text.value !== undefined ) {\n\t\treturn options.text.value;\n\t}\n\treturn theme.newTextValue();\n};\n\nconst toTextStyle = <VALUE, THEME extends DThemeTextBase>(\n\ttheme: DThemeTextBase, options: DTextBaseOptions<VALUE, THEME> | undefined, state: DBaseState\n): DDynamicTextStyleOptions => {\n\tif( options && options.text && options.text.style != null ) {\n\t\tconst style = options.text.style;\n\t\tconst fill = style.fill != null ? style.fill : theme.getColor( state );\n\t\tconst fontSize = style.fontSize != null ? style.fontSize : theme.getFontSize();\n\t\tconst fontFamily = style.fontFamily != null ? style.fontFamily : theme.getFontFamilly();\n\t\tconst fontWeight = style.fontWeight != null ? style.fontWeight : theme.getFontWeight();\n\t\tconst fontStyle = style.fontStyle != null ? style.fontStyle : theme.getFontStyle();\n\t\tconst fontVariant = style.fontVariant != null ? style.fontVariant : theme.getFontVariant();\n\t\tconst clipping = style.clipping != null ? style.clipping : theme.getTextStyleClipping();\n\t\treturn {\n\t\t\tfill,\n\t\t\tfontSize,\n\t\t\tfontFamily,\n\t\t\tfontWeight,\n\t\t\tfontStyle,\n\t\t\tfontVariant,\n\t\t\tclipping\n\t\t};\n\t}\n\n\treturn {\n\t\tfill: theme.getColor( state ),\n\t\tfontSize: theme.getFontSize(),\n\t\tfontFamily: theme.getFontFamilly(),\n\t\tfontWeight: theme.getFontWeight(),\n\t\tfontStyle: theme.getFontStyle(),\n\t\tfontVariant: theme.getFontVariant(),\n\t\tclipping: theme.getTextStyleClipping()\n\t};\n};\n\nconst toTextAlign = <VALUE, THEME extends DThemeTextBase>(\n\ttheme: DThemeTextBase, options?: DTextBaseOptions<VALUE, THEME>\n): { vertical: DAlignVertical, horizontal: DAlignHorizontal } => {\n\tif( options && options.text && options.text.align ) {\n\t\tconst align = options.text.align;\n\t\tconst vertical = ( align.vertical != null ?\n\t\t\t( utilIsString( align.vertical ) ? DAlignVertical[ align.vertical ] : align.vertical ) :\n\t\t\ttheme.getTextAlignVertical()\n\t\t);\n\t\tconst horizontal = ( align.horizontal != null ?\n\t\t\t( utilIsString( align.horizontal ) ? DAlignHorizontal[ align.horizontal ] : align.horizontal ) :\n\t\t\ttheme.getTextAlignHorizontal()\n\t\t);\n\t\treturn {\n\t\t\tvertical,\n\t\t\thorizontal\n\t\t};\n\t}\n\treturn {\n\t\tvertical: theme.getTextAlignVertical(),\n\t\thorizontal: theme.getTextAlignHorizontal()\n\t};\n};\n\nconst toTextFormatter = <VALUE, THEME extends DThemeTextBase>(\n\ttheme: DThemeTextBase,\n\toptions: DTextBaseOptions<VALUE, THEME> | undefined\n): ( value: VALUE, caller: any ) => string => {\n\tif( options && options.text && options.text.formatter ) {\n\t\treturn options.text.formatter;\n\t}\n\treturn theme.getTextFormatter();\n};\n\nconst toTextDynamic = <VALUE, THEME extends DThemeTextBase>(\n\ttheme: DThemeTextBase, options?: DTextBaseOptions<VALUE, THEME>\n): boolean => {\n\tif( options && options.text && options.text.dynamic != null ) {\n\t\treturn options.text.dynamic;\n\t}\n\treturn theme.isTextDynamic();\n};\n\nexport class DTextBase<\n\tVALUE = unknown,\n\tTHEME extends DThemeTextBase = DThemeTextBase,\n\tOPTIONS extends DTextBaseOptions<VALUE, THEME> = DTextBaseOptions<VALUE, THEME>\n> extends DBase<THEME, OPTIONS> {\n\tprotected _text!: DDynamicText | Text | null;\n\tprotected _textValue!: DStateAwareOrValueMightBe<VALUE>;\n\tprotected _textValueComputed!: VALUE;\n\tprotected _textColor!: DStateAwareOrValueMightBe<number>;\n\tprotected _textAlpha!: DStateAwareOrValueMightBe<number>;\n\tprotected _textStyle!: DDynamicTextStyleOptions;\n\tprotected _textAlign!: {\n\t\tvertical: DAlignVertical,\n\t\thorizontal: DAlignHorizontal\n\t};\n\tprotected _textFormatter!: ( value: VALUE, caller: any ) => string;\n\tprotected _isOverflowMaskEnabled!: boolean;\n\tprotected _overflowMask!: DBaseOverflowMaskSimple | null;\n\tprotected _textDynamic!: boolean;\n\n\tprotected init( options?: OPTIONS ): void {\n\t\tsuper.init( options );\n\n\t\tthis._text = null;\n\t\tconst theme = this.theme;\n\t\tthis._textValue = toTextValue( theme, options );\n\t\tthis._textValueComputed = this.computeTextValue();\n\t\tthis._textColor = ( options && options.text && options.text.color );\n\t\tthis._textAlpha = ( options && options.text && options.text.alpha );\n\t\tthis._textStyle = toTextStyle( theme, options, this.state );\n\t\tthis._textAlign = toTextAlign( theme, options );\n\t\tthis._textFormatter = toTextFormatter( theme, options );\n\t\tthis._textDynamic = toTextDynamic( theme, options );\n\t\tthis._isOverflowMaskEnabled = isOverflowMaskEnabled( theme, options );\n\t\tthis._overflowMask = null;\n\t\tthis.onTextChange();\n\t\tthis.createOrUpdateText();\n\t}\n\n\tset text( text: DStateAwareOrValueMightBe<VALUE> ) {\n\t\tif( this._textValue !== text ) {\n\t\t\tthis._textValue = text;\n\t\t\tthis.updateTextValue();\n\t\t}\n\t}\n\n\tget text(): DStateAwareOrValueMightBe<VALUE> {\n\t\treturn this._textValue;\n\t}\n\n\tprotected onTextChange() {\n\t\t// DO NOTHING\n\t}\n\n\tprotected computeTextValue(): VALUE {\n\t\tconst textValue = this._textValue;\n\t\tif( textValue !== undefined ) {\n\t\t\tif( utilIsFunction( textValue ) ) {\n\t\t\t\tconst result = textValue( this.state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn textValue;\n\t\t\t}\n\t\t}\n\t\treturn this.theme.getTextValue( this.state ) as VALUE;\n\t}\n\n\tprotected createOrUpdateText(): void {\n\t\tconst formatted = this._textFormatter( this._textValueComputed, this );\n\t\tif( this._text == null ) {\n\t\t\tif( 0 < formatted.length ) {\n\t\t\t\tconst text = this.createText( formatted );\n\t\t\t\tthis._text = text;\n\t\t\t\tthis.addChild( text );\n\t\t\t\tthis.updateTextPosition( text );\n\t\t\t\tif( this._isOverflowMaskEnabled ) {\n\t\t\t\t\ttext.mask = this.getOrCreateOverflowMask();\n\t\t\t\t}\n\t\t\t\tthis.toDirty();\n\t\t\t\tDApplications.update();\n\t\t\t}\n\t\t} else {\n\t\t\tthis._text.text = formatted;\n\t\t\tthis.toDirty();\n\t\t\tDApplications.update();\n\t\t}\n\t}\n\n\tprotected createText( formatted: string ): Text | DDynamicText {\n\t\treturn ( this._textDynamic ?\n\t\t\tnew DDynamicText( formatted, this._textStyle ) :\n\t\t\tnew Text( formatted, this._textStyle )\n\t\t);\n\t}\n\n\tprotected getOrCreateOverflowMask(): Graphics {\n\t\tif( this._overflowMask == null ) {\n\t\t\tthis._overflowMask = new DBaseOverflowMaskSimple( this );\n\t\t\tthis.addReflowable( this._overflowMask );\n\t\t\tthis.toDirty();\n\t\t}\n\t\treturn this._overflowMask;\n\t}\n\n\tprotected updateTextPosition( text: DDynamicText | Text ): void {\n\t\tconst align = this._textAlign;\n\t\tconst padding = this._padding;\n\n\t\tswitch( align.horizontal ) {\n\t\tcase DAlignHorizontal.LEFT:\n\t\t\ttext.x = this.toRounded( padding.getLeft() );\n\t\t\tbreak;\n\t\tcase DAlignHorizontal.CENTER:\n\t\t\ttext.x = this.toRounded( ( this.width - text.width ) * 0.5 );\n\t\t\tbreak;\n\t\tcase DAlignHorizontal.RIGHT:\n\t\t\ttext.x = this.toRounded( this.width - text.width - padding.getRight() );\n\t\t\tbreak;\n\t\t}\n\n\t\tswitch( align.vertical ) {\n\t\tcase DAlignVertical.TOP:\n\t\t\ttext.y = this.toRounded( padding.getTop() );\n\t\t\tbreak;\n\t\tcase DAlignVertical.MIDDLE:\n\t\t\ttext.y = this.toRounded( ( this.height - text.height ) * 0.5 );\n\t\t\tbreak;\n\t\tcase DAlignVertical.BOTTOM:\n\t\t\ttext.y = this.toRounded( this.height - text.height - padding.getBottom() );\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tprotected toRounded( value: number ): number {\n\t\treturn Math.round( value );\n\t}\n\n\tprotected getTextColor( theme: THEME, state: DBaseState ): number {\n\t\tconst color = this._textColor;\n\t\tif( color !== undefined ) {\n\t\t\tif( utilIsFunction( color ) ) {\n\t\t\t\tconst result = color( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn color;\n\t\t\t}\n\t\t}\n\t\treturn theme.getColor( state );\n\t}\n\n\tprotected getTextAlpha( theme: THEME, state: DBaseState ): number {\n\t\tconst alpha = this._textAlpha;\n\t\tif( alpha !== undefined ) {\n\t\t\tif( utilIsFunction( alpha ) ) {\n\t\t\t\tconst result = alpha( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn alpha;\n\t\t\t}\n\t\t}\n\t\treturn theme.getAlpha( state );\n\t}\n\n\tprotected updateTextColor( text: DDynamicText | Text ): void {\n\t\tconst theme = this.theme;\n\t\tconst state = this.state;\n\t\ttext.style.fill = this.getTextColor( theme, state );\n\t\ttext.alpha = this.getTextAlpha( theme, state );\n\t}\n\n\tprotected updateTextValue(): void {\n\t\tconst newTextValueComputed = this.computeTextValue();\n\t\tif( this._textValueComputed !== newTextValueComputed ) {\n\t\t\tthis._textValueComputed = newTextValueComputed;\n\t\t\tthis.onTextChange();\n\t\t\tthis.createOrUpdateText();\n\t\t}\n\t}\n\n\tprotected updateText(): void {\n\t\tconst text = this._text;\n\t\tif( text != null ) {\n\t\t\tthis.updateTextValue();\n\t\t\tthis.updateTextPosition( text );\n\t\t\tthis.updateTextColor( text );\n\t\t}\n\t}\n\n\tprotected onReflow(): void {\n\t\tsuper.onReflow();\n\t\tthis.updateText();\n\t}\n\n\tprotected isRefitable( target: any ): target is DRefitable {\n\t\treturn super.isRefitable( target ) ||\n\t\t\t(target != null && target === this._text);\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTextBase\";\n\t}\n\n\tdestroy(): void {\n\t\t// Text\n\t\tconst text = this._text;\n\t\tif( text != null ) {\n\t\t\tthis._text = null;\n\t\t\ttext.destroy();\n\t\t}\n\n\t\t// Overflow mask\n\t\tconst overflowMask = this._overflowMask;\n\t\tif( overflowMask != null ) {\n\t\t\tthis._overflowMask = null;\n\t\t\toverflowMask.destroy();\n\t\t}\n\n\t\tsuper.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Point, Rectangle, Sprite, Text, Texture } from \"pixi.js\";\nimport { DAlignHorizontal } from \"./d-align-horizontal\";\nimport { DAlignVertical } from \"./d-align-vertical\";\nimport { DAlignWith } from \"./d-align-with\";\nimport { DApplications } from \"./d-applications\";\nimport { DRefitable } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DDynamicText } from \"./d-dynamic-text\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\nimport { DTextBase, DTextBaseOptions, DThemeTextBase } from \"./d-text-base\";\nimport { utilIsFunction } from \"./util/util-is-function\";\nimport { utilIsString } from \"./util/util-is-string\";\n\ninterface DImageBaseTintOptions {\n\tcolor?: DStateAwareOrValueMightBe<number | null>;\n\talpha?: DStateAwareOrValueMightBe<number>;\n}\n\nexport interface DImageBaseOptions<\n\tVALUE,\n\tTHEME extends DThemeImageBase = DThemeImageBase\n> extends DTextBaseOptions<VALUE, THEME> {\n\timage?: {\n\t\tsource?: DStateAwareOrValueMightBe<Texture | DisplayObject | null>;\n\t\ttint?: DImageBaseTintOptions,\n\t\talign?: {\n\t\t\twith?: (keyof typeof DAlignWith) | DAlignWith,\n\t\t\tvertical?: (keyof typeof DAlignVertical) | DAlignVertical,\n\t\t\thorizontal?: (keyof typeof DAlignHorizontal) | DAlignHorizontal\n\t\t};\n\t\tmargin?: {\n\t\t\tvertical?: number,\n\t\t\thorizontal?: number\n\t\t};\n\t};\n}\n\nexport interface DThemeImageBase extends DThemeTextBase {\n\tgetImageAlignHorizontal(): DAlignHorizontal;\n\tgetImageAlignVertical(): DAlignVertical;\n\tgetImageAlignWith(): DAlignWith;\n\tgetImageMarginHorizontal(): number;\n\tgetImageMarginVertial(): number;\n\tgetImageTintColor( state: DBaseState ): number | null;\n\tgetImageTintAlpha( state: DBaseState ): number;\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null;\n}\n\n// Option parser\nconst toImageAlign = <VALUE, THEME extends DThemeImageBase>(\n\ttheme: DThemeImageBase, options?: DImageBaseOptions<VALUE, THEME>\n) => {\n\tif( options != null && options.image != null && options.image.align != null ) {\n\t\tconst align = options.image.align;\n\t\tconst alignWith: DAlignWith = ( align.with != null ?\n\t\t\t( utilIsString( align.with ) ? DAlignWith[ align.with ] : align.with ) :\n\t\t\ttheme.getImageAlignWith()\n\t\t);\n\t\tconst alignVertical: DAlignVertical = ( align.vertical != null ?\n\t\t\t( utilIsString( align.vertical ) ? DAlignVertical[ align.vertical ] : align.vertical ) :\n\t\t\ttheme.getImageAlignVertical()\n\t\t);\n\t\tconst alignHorizontal: DAlignHorizontal = ( align.horizontal != null ?\n\t\t\t( utilIsString( align.horizontal ) ? DAlignHorizontal[ align.horizontal ] : align.horizontal ) :\n\t\t\ttheme.getImageAlignHorizontal()\n\t\t);\n\t\treturn {\n\t\t\twith: alignWith,\n\t\t\tvertical: alignVertical,\n\t\t\thorizontal: alignHorizontal\n\t\t};\n\t}\n\treturn {\n\t\twith: theme.getImageAlignWith(),\n\t\tvertical: theme.getImageAlignVertical(),\n\t\thorizontal: theme.getImageAlignHorizontal()\n\t};\n};\n\nconst toImageMargin = <VALUE, THEME extends DThemeImageBase>(\n\ttheme: DThemeImageBase, options?: DImageBaseOptions<VALUE, THEME>\n) => {\n\tif( options != null && options.image != null && options.image.margin != null ) {\n\t\tconst margin = options.image.margin;\n\t\tconst vertical = ( margin.vertical != null ? margin.vertical : theme.getImageMarginVertial() );\n\t\tconst horizontal = ( margin.horizontal != null ? margin.horizontal : theme.getImageMarginHorizontal() );\n\t\treturn {\n\t\t\tvertical,\n\t\t\thorizontal\n\t\t};\n\t}\n\treturn {\n\t\tvertical: theme.getImageMarginVertial(),\n\t\thorizontal: theme.getImageMarginHorizontal()\n\t};\n};\n\nconst toImageTint = <VALUE, THEME extends DThemeImageBase>(\n\ttheme: DThemeImageBase, options?: DImageBaseOptions<VALUE, THEME>\n): DImageBaseTintOptions | undefined => {\n\tif( options != null && options.image != null && options.image.tint != null ) {\n\t\treturn options.image.tint;\n\t}\n\treturn undefined;\n};\n\nexport class DImageBase<\n\tVALUE = unknown,\n\tTHEME extends DThemeImageBase = DThemeImageBase,\n\tOPTIONS extends DImageBaseOptions<VALUE, THEME> = DImageBaseOptions<VALUE, THEME>\n> extends DTextBase<VALUE, THEME, OPTIONS> {\n\tprotected _image!: DisplayObject | null;\n\tprotected _imageSourceComputed!: Texture | DisplayObject | null;\n\tprotected _imageSource!: DStateAwareOrValueMightBe<Texture | DisplayObject | null>;\n\tprotected _imageAlign!: {\n\t\twith: DAlignWith,\n\t\tvertical: DAlignVertical,\n\t\thorizontal: DAlignHorizontal\n\t};\n\tprotected _imageMargin!: {\n\t\tvertical: number,\n\t\thorizontal: number\n\t};\n\tprotected _imageTint!: DImageBaseTintOptions | undefined;\n\tprotected _imageBound!: Rectangle;\n\tprotected _imageBoundPoint!: Point;\n\tprotected _onImageChangeBound!: () => void;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis._image = null;\n\t\tconst theme = this.theme;\n\t\tthis._imageAlign = toImageAlign( theme, options );\n\t\tthis._imageMargin = toImageMargin( theme, options );\n\t\tthis._imageTint = toImageTint( theme, options );\n\t\tthis._imageBound = new Rectangle();\n\t\tthis._imageBoundPoint = new Point();\n\t\tthis._imageSource = ( options && options.image && options.image.source );\n\t\tthis._imageSourceComputed = null;\n\t\tthis._onImageChangeBound = () => {\n\t\t\tthis.onImageChange();\n\t\t};\n\t}\n\n\tget image(): DStateAwareOrValueMightBe<Texture | DisplayObject | null> {\n\t\treturn this._imageSource;\n\t}\n\n\tset image( imageSource: DStateAwareOrValueMightBe<Texture | DisplayObject | null> ) {\n\t\tif( this._imageSource !== imageSource ) {\n\t\t\tthis._imageSource = imageSource;\n\t\t\tthis.toDirty();\n\t\t\tDApplications.update();\n\t\t}\n\t}\n\n\tprotected computeImageSource(): Texture | DisplayObject | null {\n\t\tconst imageSource = this._imageSource;\n\t\tif( imageSource !== undefined ) {\n\t\t\tif( utilIsFunction( imageSource ) ) {\n\t\t\t\tconst result = imageSource( this.state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn imageSource;\n\t\t\t}\n\t\t}\n\t\treturn this.theme.getImageSource( this.state );\n\t}\n\n\tprotected onImageChange(): void {\n\t\tthis.toDirty();\n\t\tDApplications.update();\n\t}\n\n\tprotected onStateChange( newState: DBaseState, oldState: DBaseState ): void {\n\t\tsuper.onStateChange( newState, oldState );\n\n\t\tconst image = this._image;\n\t\tif( image != null ) {\n\t\t\tthis.updateImageTint( image );\n\t\t}\n\t}\n\n\tprotected getImageRect( image: DisplayObject ): Rectangle {\n\t\timage.updateTransform();\n\t\tconst bounds = image.getLocalBounds( this._imageBound );\n\t\tconst point = this._imageBoundPoint;\n\t\tpoint.set( bounds.left, bounds.top );\n\t\timage.localTransform.apply( point, point );\n\t\tconst x0 = point.x;\n\t\tconst y0 = point.y;\n\t\tpoint.set( bounds.right, bounds.top );\n\t\timage.localTransform.apply( point, point );\n\t\tconst x1 = point.x;\n\t\tconst y1 = point.y;\n\t\tpoint.set( bounds.right, bounds.bottom );\n\t\timage.localTransform.apply( point, point );\n\t\tconst x2 = point.x;\n\t\tconst y2 = point.y;\n\t\tpoint.set( bounds.left, bounds.bottom );\n\t\timage.localTransform.apply( point, point );\n\t\tconst x3 = point.x;\n\t\tconst y3 = point.y;\n\t\tbounds.x = Math.min( x0, x1, x2, x3 );\n\t\tbounds.y = Math.min( y0, y1, y2, y3 );\n\t\tbounds.width = Math.max( x0, x1, x2, x3 ) - bounds.x;\n\t\tbounds.height = Math.max( y0, y1, y2, y3 ) - bounds.y;\n\t\treturn bounds;\n\t}\n\n\tprotected updateTextAndImagePosition( text: DDynamicText | Text, image: DisplayObject ): void {\n\t\tconst bounds = this.getImageRect( image );\n\t\tconst imageWidth = bounds.width;\n\t\tconst imageHeight = bounds.height;\n\n\t\tconst textAlign = this._textAlign;\n\t\tconst imageAlign = this._imageAlign;\n\t\tconst margin = this._imageMargin;\n\t\tconst padding = this._padding;\n\n\t\tconst marginHorizontal = margin.horizontal;\n\t\tconst imageWaMH = imageWidth + marginHorizontal;\n\t\tswitch( imageAlign.horizontal ) {\n\t\tcase DAlignHorizontal.LEFT:\n\t\t\tswitch( textAlign.horizontal ) {\n\t\t\tcase DAlignHorizontal.LEFT:\n\t\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\t\ttext.setClippingWidthDelta( imageWaMH );\n\t\t\t\t}\n\t\t\t\timage.x = this.toRounded( padding.getLeft() );\n\t\t\t\tbreak;\n\t\t\tcase DAlignHorizontal.CENTER:\n\t\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\t\ttext.setClippingWidthDelta( imageWaMH );\n\t\t\t\t}\n\t\t\t\timage.x = this.toRounded( ( this.width - text.width - imageWaMH ) * 0.5 );\n\t\t\t\tbreak;\n\t\t\tcase DAlignHorizontal.RIGHT:\n\t\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\t\ttext.setClippingWidthDelta( 0 );\n\t\t\t\t}\n\t\t\t\timage.x = this.toRounded( this.width - text.width - padding.getRight() - imageWaMH );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\ttext.x = this.toRounded( image.x + imageWaMH );\n\t\t\tbreak;\n\t\tcase DAlignHorizontal.CENTER:\n\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\ttext.setClippingWidthDelta( 0 );\n\t\t\t}\n\t\t\tswitch( textAlign.horizontal ) {\n\t\t\tcase DAlignHorizontal.LEFT:\n\t\t\t\ttext.x = this.toRounded( padding.getLeft() );\n\t\t\t\tbreak;\n\t\t\tcase DAlignHorizontal.CENTER:\n\t\t\t\ttext.x = this.toRounded( ( this.width - text.width ) * 0.5 );\n\t\t\t\tbreak;\n\t\t\tcase DAlignHorizontal.RIGHT:\n\t\t\t\ttext.x = this.toRounded( this.width - text.width - padding.getRight() );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\timage.x = this.toRounded( text.x + ( text.width - imageWidth ) * 0.5 );\n\t\t\tbreak;\n\t\tcase DAlignHorizontal.RIGHT:\n\t\t\tswitch( textAlign.horizontal ) {\n\t\t\tcase DAlignHorizontal.LEFT:\n\t\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\t\ttext.setClippingWidthDelta( 0 );\n\t\t\t\t}\n\t\t\t\ttext.x = this.toRounded( padding.getLeft() );\n\t\t\t\tbreak;\n\t\t\tcase DAlignHorizontal.CENTER:\n\t\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\t\ttext.setClippingWidthDelta( imageWaMH );\n\t\t\t\t}\n\t\t\t\ttext.x = this.toRounded( ( this.width - text.width - imageWaMH ) * 0.5 );\n\t\t\t\tbreak;\n\t\t\tcase DAlignHorizontal.RIGHT:\n\t\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\t\ttext.setClippingWidthDelta( imageWaMH );\n\t\t\t\t}\n\t\t\t\ttext.x = this.toRounded( this.width - text.width - padding.getRight() - imageWaMH );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\timage.x = this.toRounded( text.x + text.width + marginHorizontal );\n\t\t\tbreak;\n\t\t}\n\n\t\tconst marginVertical = margin.vertical;\n\t\tconst imageHaMV = imageWidth + marginHorizontal;\n\t\tswitch( imageAlign.vertical ) {\n\t\tcase DAlignVertical.TOP:\n\t\t\tswitch( textAlign.vertical ) {\n\t\t\tcase DAlignVertical.TOP:\n\t\t\t\timage.y = this.toRounded( padding.getTop() );\n\t\t\t\tbreak;\n\t\t\tcase DAlignVertical.MIDDLE:\n\t\t\t\timage.y = this.toRounded( ( this.height - text.height - imageHaMV ) * 0.5 );\n\t\t\t\tbreak;\n\t\t\tcase DAlignVertical.BOTTOM:\n\t\t\t\timage.y = this.toRounded( this.height - text.height - padding.getBottom() - imageHaMV );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\ttext.y = this.toRounded( image.y + imageHaMV );\n\t\t\tbreak;\n\t\tcase DAlignVertical.MIDDLE:\n\t\t\tswitch( textAlign.vertical ) {\n\t\t\tcase DAlignVertical.TOP:\n\t\t\t\ttext.y = this.toRounded( padding.getTop() );\n\t\t\t\tbreak;\n\t\t\tcase DAlignVertical.MIDDLE:\n\t\t\t\ttext.y = this.toRounded( ( this.height - text.height ) * 0.5 );\n\t\t\t\tbreak;\n\t\t\tcase DAlignVertical.BOTTOM:\n\t\t\t\ttext.y = this.toRounded( this.height - text.height - padding.getBottom() );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\timage.y = this.toRounded( text.y + ( text.height - imageHeight ) * 0.5 );\n\t\t\tbreak;\n\t\tcase DAlignVertical.BOTTOM:\n\t\t\tswitch( textAlign.vertical ) {\n\t\t\tcase DAlignVertical.TOP:\n\t\t\t\ttext.y = this.toRounded( padding.getTop() );\n\t\t\t\tbreak;\n\t\t\tcase DAlignVertical.MIDDLE:\n\t\t\t\ttext.y = this.toRounded( ( this.height - text.height - imageHaMV ) * 0.5 );\n\t\t\t\tbreak;\n\t\t\tcase DAlignVertical.BOTTOM:\n\t\t\t\ttext.y = this.toRounded( this.height - text.height - padding.getBottom() - imageHaMV );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\timage.y = this.toRounded( text.y + text.height + marginVertical );\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tprotected updateImagePositionText( image: DisplayObject ): void {\n\t\tconst bounds = this.getImageRect( image );\n\t\timage.x = this.toRounded( ( this.width - bounds.width ) * 0.5 );\n\t\timage.y = this.toRounded( ( this.height - bounds.height ) * 0.5 );\n\t}\n\n\tprotected updateImagePositionPadding( image: DisplayObject ): void {\n\t\tconst margin = this._imageMargin;\n\t\tconst align = this._imageAlign;\n\t\tconst padding = this._padding;\n\t\tconst bounds = this.getImageRect( image );\n\t\tconst imageWidth = bounds.width;\n\t\tconst imageHeight = bounds.height;\n\n\t\tconst marginHorizontal = margin.horizontal;\n\t\tswitch( align.horizontal ) {\n\t\tcase DAlignHorizontal.LEFT:\n\t\t\timage.x = this.toRounded( padding.getLeft() + marginHorizontal );\n\t\t\tbreak;\n\t\tcase DAlignHorizontal.CENTER:\n\t\t\timage.x = this.toRounded( ( this.width - imageWidth ) * 0.5 );\n\t\t\tbreak;\n\t\tcase DAlignHorizontal.RIGHT:\n\t\t\timage.x = this.toRounded( this.width - padding.getRight() - marginHorizontal - imageWidth );\n\t\t\tbreak;\n\t\t}\n\n\t\tconst marginVertical = margin.vertical;\n\t\tswitch( align.vertical ) {\n\t\tcase DAlignVertical.TOP:\n\t\t\timage.y = this.toRounded( padding.getTop() + marginVertical );\n\t\t\tbreak;\n\t\tcase DAlignVertical.MIDDLE:\n\t\t\timage.y = this.toRounded( ( this.height - imageHeight ) * 0.5 );\n\t\t\tbreak;\n\t\tcase DAlignVertical.BOTTOM:\n\t\t\timage.y = this.toRounded( this.height - padding.getBottom() - marginVertical );\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tprotected updateImagePositionBorder( image: DisplayObject ): void {\n\t\tconst margin = this._imageMargin;\n\t\tconst align = this._imageAlign;\n\t\tconst bounds = this.getImageRect( image );\n\t\tconst imageWidth = bounds.width;\n\t\tconst imageHeight = bounds.height;\n\n\t\tconst marginHorizontal = margin.horizontal;\n\t\tswitch( align.horizontal ) {\n\t\tcase DAlignHorizontal.LEFT:\n\t\t\timage.x = this.toRounded( marginHorizontal );\n\t\t\tbreak;\n\t\tcase DAlignHorizontal.CENTER:\n\t\t\timage.x = this.toRounded( ( this.width - imageWidth ) * 0.5 );\n\t\t\tbreak;\n\t\tcase DAlignHorizontal.RIGHT:\n\t\t\timage.x = this.toRounded( this.width - marginHorizontal - imageWidth );\n\t\t\tbreak;\n\t\t}\n\n\t\tconst marginVertical = margin.vertical;\n\t\tswitch( align.vertical ) {\n\t\tcase DAlignVertical.TOP:\n\t\t\timage.y = this.toRounded( marginVertical );\n\t\t\tbreak;\n\t\tcase DAlignVertical.MIDDLE:\n\t\t\timage.y = this.toRounded( ( this.height - imageHeight ) * 0.5 );\n\t\t\tbreak;\n\t\tcase DAlignVertical.BOTTOM:\n\t\t\timage.y = this.toRounded( this.height - marginVertical );\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tprotected getImageTintColor( theme: THEME, state: DBaseState ): number | null {\n\t\tconst imageTint = this._imageTint;\n\t\tif( imageTint != null ) {\n\t\t\tconst color = imageTint.color;\n\t\t\tif( color !== undefined ) {\n\t\t\t\tif( utilIsFunction( color ) ) {\n\t\t\t\t\tconst result = color( state );\n\t\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn color;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn theme.getImageTintColor( state );\n\t}\n\n\tprotected getImageTintAlpha( theme: THEME, state: DBaseState ): number {\n\t\tconst imageTint = this._imageTint;\n\t\tif( imageTint != null ) {\n\t\t\tconst alpha = imageTint.alpha;\n\t\t\tif( alpha !== undefined ) {\n\t\t\t\tif( utilIsFunction( alpha ) ) {\n\t\t\t\t\tconst result = alpha( state );\n\t\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn alpha;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn theme.getImageTintAlpha( state );\n\t}\n\n\tprotected updateImageTint( image: DisplayObject ): void {\n\t\tif( this.isTintAware( image ) ) {\n\t\t\tconst theme = this.theme;\n\t\t\tconst state = this.state;\n\t\t\tconst color = this.getImageTintColor( theme, state );\n\t\t\tif( color != null ) {\n\t\t\t\tif( image.tint !== color ) {\n\t\t\t\t\timage.tint = color;\n\t\t\t\t}\n\t\t\t\tconst alpha = this.getImageTintAlpha( theme, state );\n\t\t\t\tif( image.alpha !== alpha ) {\n\t\t\t\t\timage.alpha = alpha;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected isTintAware( target: DisplayObject | null ): target is DisplayObject & { tint: number } {\n\t\treturn ( target != null && \"tint\" in target );\n\t}\n\n\tprotected updateImageSource(): void {\n\t\tconst newImageSourceComputed = this.computeImageSource();\n\t\tconst oldImageSourceComputed = this._imageSourceComputed;\n\t\tif( newImageSourceComputed !== oldImageSourceComputed ) {\n\t\t\tthis._imageSourceComputed = newImageSourceComputed;\n\n\t\t\tconst oldImage = this._image;\n\t\t\tif( newImageSourceComputed instanceof Texture ) {\n\t\t\t\tif( oldImageSourceComputed instanceof Texture ) {\n\t\t\t\t\toldImageSourceComputed.off( \"update\", this._onImageChangeBound );\n\t\t\t\t\tif( oldImage instanceof Sprite ) {\n\t\t\t\t\t\toldImage.texture = newImageSourceComputed;\n\t\t\t\t\t\tnewImageSourceComputed.on( \"update\", this._onImageChangeBound );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif( oldImage != null ) {\n\t\t\t\t\t\tthis.removeChild( oldImage );\n\t\t\t\t\t}\n\n\t\t\t\t\tconst newImage = new Sprite( newImageSourceComputed );\n\t\t\t\t\tif( this._isOverflowMaskEnabled ) {\n\t\t\t\t\t\tnewImage.mask = this.getOrCreateOverflowMask();\n\t\t\t\t\t}\n\t\t\t\t\tnewImageSourceComputed.on( \"update\", this._onImageChangeBound );\n\t\t\t\t\tthis.addChild( newImage );\n\t\t\t\t\tthis._image = newImage;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( oldImageSourceComputed instanceof Texture ) {\n\t\t\t\t\toldImageSourceComputed.off( \"update\", this._onImageChangeBound );\n\t\t\t\t\tif( oldImage != null ) {\n\t\t\t\t\t\tthis.removeChild( oldImage );\n\t\t\t\t\t\toldImage.destroy();\n\t\t\t\t\t}\n\t\t\t\t} else if( oldImage != null ) {\n\t\t\t\t\tthis.removeChild( oldImage );\n\t\t\t\t}\n\n\t\t\t\tif( newImageSourceComputed != null ) {\n\t\t\t\t\tif( this._isOverflowMaskEnabled ) {\n\t\t\t\t\t\tnewImageSourceComputed.mask = this.getOrCreateOverflowMask();\n\t\t\t\t\t}\n\t\t\t\t\tthis.addChild( newImageSourceComputed );\n\t\t\t\t}\n\t\t\t\tthis._image = newImageSourceComputed;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected updateText(): void {\n\t\tthis.updateTextValue();\n\t\tthis.updateImageSource();\n\n\t\tconst text = this._text;\n\t\tconst image = this._image;\n\t\tif( text != null ) {\n\t\t\tif( image != null ) {\n\t\t\t\tconst align = this._imageAlign;\n\t\t\t\tswitch( align.with ) {\n\t\t\t\tcase DAlignWith.TEXT:\n\t\t\t\t\tthis.updateTextAndImagePosition( text, image );\n\t\t\t\t\tbreak;\n\t\t\t\tcase DAlignWith.PADDING:\n\t\t\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\t\t\ttext.setClippingWidthDelta( 0 );\n\t\t\t\t\t}\n\t\t\t\t\tthis.updateTextPosition( text );\n\t\t\t\t\tthis.updateImagePositionPadding( image );\n\t\t\t\t\tbreak;\n\t\t\t\tcase DAlignWith.BORDER:\n\t\t\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\t\t\ttext.setClippingWidthDelta( 0 );\n\t\t\t\t\t}\n\t\t\t\t\tthis.updateTextPosition( text );\n\t\t\t\t\tthis.updateImagePositionBorder( image );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthis.updateTextColor( text );\n\t\t\t\tthis.updateImageTint( image );\n\t\t\t} else {\n\t\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\t\ttext.setClippingWidthDelta( 0 );\n\t\t\t\t}\n\t\t\t\tthis.updateTextPosition( text );\n\t\t\t\tthis.updateTextColor( text );\n\t\t\t}\n\t\t} else if( image != null ) {\n\t\t\tconst align = this._imageAlign;\n\t\t\tswitch( align.with ) {\n\t\t\tcase DAlignWith.TEXT:\n\t\t\t\tthis.updateImagePositionText( image );\n\t\t\t\tbreak;\n\t\t\tcase DAlignWith.PADDING:\n\t\t\t\tthis.updateImagePositionPadding( image );\n\t\t\t\tbreak;\n\t\t\tcase DAlignWith.BORDER:\n\t\t\t\tthis.updateImagePositionBorder( image );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis.updateImageTint( image );\n\t\t}\n\t}\n\n\tprotected isRefitable( target: any ): target is DRefitable {\n\t\treturn super.isRefitable( target ) ||\n\t\t\t(target != null && target === this._image);\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DImageBase\";\n\t}\n\n\tdestroy(): void {\n\t\t// Image\n\t\tconst image = this._image;\n\t\tif( image != null ) {\n\t\t\tthis._image = null;\n\t\t\tconst imageSourceComputed = this._imageSourceComputed;\n\t\t\tif( imageSourceComputed instanceof Texture ) {\n\t\t\t\timageSourceComputed.off( \"update\", this._onImageChangeBound, this );\n\t\t\t\timage.destroy();\n\t\t\t}\n\t\t}\n\n\t\t//\n\t\tsuper.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DImageBase, DImageBaseOptions, DThemeImageBase } from \"./d-image-base\";\n\nexport interface DImageOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeImage = DThemeImage\n> extends DImageBaseOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeImage extends DThemeImageBase {\n\n}\n\nexport class DImage<\n\tVALUE = unknown,\n\tTHEME extends DThemeImage = DThemeImage,\n\tOPTIONS extends DImageOptions<VALUE, THEME> = DImageOptions<VALUE, THEME>\n> extends DImageBase<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DImage\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DBaseStates } from \"./d-base-states\";\nimport { DImage, DImageOptions, DThemeImage } from \"./d-image\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\n\nexport interface DListItemOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeListItem = DThemeListItem\n> extends DImageOptions<string, THEME> {\n\tvalue?: VALUE;\n}\n\nexport interface DThemeListItem extends DThemeImage {\n\tgetTextValue( state: DBaseState ): string;\n\tnewTextValue(): DStateAwareOrValueMightBe<string>;\n}\n\n// Option parser\nconst toValue = <VALUE, THEME extends DThemeListItem>( options?: DListItemOptions<VALUE, THEME> ): VALUE | null => {\n\treturn ( options != null && options.value != null ?\n\t\toptions.value : null );\n};\n\nexport interface DListItemSelection {\n\tadd( item: DBase ): void;\n}\n\nexport class DListItem<\n\tVALUE = unknown,\n\tTHEME extends DThemeListItem = DThemeListItem,\n\tOPTIONS extends DListItemOptions<VALUE, THEME> = DListItemOptions<VALUE, THEME>\n> extends DImage<string, THEME, OPTIONS> {\n\tprotected _value!: VALUE | null;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis.buttonMode = true;\n\t\tthis._value = toValue( options );\n\t}\n\n\tget value(): VALUE | null {\n\t\treturn this._value;\n\t}\n\n\tset value( value: VALUE | null ) {\n\t\tthis._value = value;\n\t}\n\n\tprotected hasSelection( target: any ): target is { selection: DListItemSelection } {\n\t\treturn ( target && target.selection && target.selection.add );\n\t}\n\n\tprotected getSelection(): DListItemSelection | null {\n\t\tlet parent = this.parent as any;\n\t\twhile( parent ) {\n\t\t\tif( this.hasSelection( parent ) ) {\n\t\t\t\treturn parent.selection;\n\t\t\t}\n\t\t\tparent = parent.parent;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected onSelect( e: KeyboardEvent | interaction.InteractionEvent ): void {\n\t\tconst selection = this.getSelection();\n\t\tif( selection ) {\n\t\t\tselection.add( this );\n\t\t}\n\t}\n\n\tonKeyDown( e: KeyboardEvent ): boolean {\n\t\tif( this.isActionable() && this.isFocused() && UtilKeyboardEvent.isActivateKey( e ) ) {\n\t\t\tthis.onSelect( e );\n\t\t}\n\n\t\treturn super.onKeyDown( e );\n\t}\n\n\tprotected onStateChange( newState: number, oldState: number ) {\n\t\tsuper.onStateChange( newState, oldState );\n\t\tthis.buttonMode = DBaseStates.isActionable( newState );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DListItem\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DListItem, DListItemOptions, DThemeListItem } from \"./d-list-item\";\nimport { Closeable, DMenuContext } from \"./d-menu-context\";\n\nexport interface DMenuItemOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItem = DThemeMenuItem\n> extends DListItemOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeMenuItem extends DThemeListItem {\n\n}\n\nexport class DMenuItem<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItem = DThemeMenuItem,\n\tOPTIONS extends DMenuItemOptions<VALUE, THEME> = DMenuItemOptions<VALUE, THEME>\n> extends DListItem<VALUE, THEME, OPTIONS> {\n\tgetContext(): DMenuContext | null {\n\t\tlet parent = this.parent as any;\n\t\twhile( parent ) {\n\t\t\tif( parent.getContext ) {\n\t\t\t\treturn parent.getContext();\n\t\t\t}\n\t\t\tparent = parent.parent;\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetCloseable(): Closeable | null {\n\t\tlet parent = this.parent as any;\n\t\twhile( parent ) {\n\t\t\tif( parent.getCloseable ) {\n\t\t\t\treturn parent.getCloseable();\n\t\t\t}\n\t\t\tparent = parent.parent;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuItem\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction, Text } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\nimport { DDynamicText } from \"./d-dynamic-text\";\nimport { DMenuItem, DMenuItemOptions, DThemeMenuItem } from \"./d-menu-item\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport interface DMenuItemTextOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemText = DThemeMenuItemText\n> extends DMenuItemOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeMenuItemText extends DThemeMenuItem {\n\tgetShortcutTextMargin(): number;\n}\n\nexport class DMenuItemText<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemText = DThemeMenuItemText,\n\tOPTIONS extends DMenuItemTextOptions<VALUE, THEME> = DMenuItemTextOptions<VALUE, THEME>\n> extends DMenuItem<VALUE, THEME, OPTIONS> {\n\tprotected _shortcutText!: Text | DDynamicText | null;\n\tprotected _shortcutMargin!: number;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis.initOnClick( options );\n\t\tthis.initOnOver( options );\n\t\tthis.initShortcuts( options );\n\t}\n\n\tprotected initOnClick( options?: OPTIONS ): void {\n\t\tUtilPointerEvent.onClick( this, ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( this.isActionable() ) {\n\t\t\t\tthis.onSelect( e );\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected initOnOver( options?: OPTIONS ): void {\n\t\tthis.on( UtilPointerEvent.over, (): void => {\n\t\t\tconst context = this.getContext();\n\t\t\tif( context != null ) {\n\t\t\t\tconst parent = this.parent;\n\t\t\t\tif( parent instanceof DBase ) {\n\t\t\t\t\tcontext.trim( this.getCloseable() );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected initShortcuts( options?: OPTIONS ): void {\n\t\tconst shortcuts = this._shortcuts;\n\t\tthis._shortcutMargin = this.theme.getShortcutTextMargin();\n\t\tif( shortcuts != null && 0 < shortcuts.length ) {\n\t\t\tconst shortcut = shortcuts[ 0 ];\n\t\t\tconst shortcutTextValue = UtilKeyboardEvent.toString( shortcut );\n\t\t\tthis._shortcutText = ( this._textDynamic ?\n\t\t\t\tnew DDynamicText( shortcutTextValue, this._textStyle ) :\n\t\t\t\tnew Text( shortcutTextValue, this._textStyle )\n\t\t\t);\n\t\t\tthis.appendRenderable( this._shortcutText, true );\n\t\t} else {\n\t\t\tthis._shortcutText = null;\n\t\t}\n\t}\n\n\tprotected updateShortcutText(): void {\n\t\tconst text = this._shortcutText;\n\t\tif( text != null ) {\n\t\t\ttext.position.set(\n\t\t\t\tthis.toRounded( this.width - this._shortcutMargin - text.width ),\n\t\t\t\tthis.toRounded( ( this.height - text.height ) * 0.5 )\n\t\t\t);\n\t\t}\n\t}\n\n\tprotected updateTextColor( text: DDynamicText | Text ): void {\n\t\tsuper.updateTextColor( text );\n\n\t\tconst shortcutText = this._shortcutText;\n\t\tif( shortcutText != null ) {\n\t\t\tconst theme = this.theme;\n\t\t\tconst state = this.state;\n\t\t\tshortcutText.style.fill = theme.getColor( state );\n\t\t\tshortcutText.alpha = theme.getAlpha( state );\n\t\t}\n\t}\n\n\tprotected updateText(): void {\n\t\tsuper.updateText();\n\t\tthis.updateShortcutText();\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuItemText\";\n\t}\n\n\tprotected onSelect( e: KeyboardEvent | interaction.InteractionEvent ): void {\n\t\tconst closeable = this.getCloseable();\n\t\tif( closeable != null ) {\n\t\t\tcloseable.emit( \"select\", this.value, this, closeable );\n\t\t}\n\n\t\tsuper.onSelect( e );\n\t}\n\n\tprotected onShortcut( e: KeyboardEvent ) {\n\t\tsuper.onShortcut( e );\n\t\tthis.onSelect( e );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction } from \"pixi.js\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\nimport { DMenuItemText, DMenuItemTextOptions, DThemeMenuItemText } from \"./d-menu-item-text\";\n\nexport interface DMenuItemCheckOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemCheck = DThemeMenuItemCheck\n> extends DMenuItemTextOptions<VALUE, THEME> {\n\tcheck: boolean;\n}\n\nexport interface DThemeMenuItemCheck extends DThemeMenuItemText {\n\n}\n\nexport class DMenuItemCheck<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemCheck = DThemeMenuItemCheck,\n\tOPTIONS extends DMenuItemCheckOptions<VALUE, THEME> = DMenuItemCheckOptions<VALUE, THEME>\n> extends DMenuItemText<VALUE, THEME, OPTIONS> {\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tif( options && options.check ) {\n\t\t\tthis.setActive( true );\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuItemCheck\";\n\t}\n\n\tprotected onSelect( e: KeyboardEvent | interaction.InteractionEvent ): void {\n\t\tthis.setActive( ! this.isActive() );\n\t\tsuper.onSelect( e );\n\t}\n\n\tstatic isCompatible<VALUE>( options: DMenuItemOptionsUnion<VALUE> ): options is DMenuItemCheckOptions<VALUE> {\n\t\treturn \"check\" in options;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, DisplayObject } from \"pixi.js\";\nimport { DMenu, DMenuOptions } from \"./d-menu\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\n\nexport type DMenuItemCreator = ( options: DMenuItemOptionsUnion<any>, sticky: boolean ) => DisplayObject | null;\n\nexport type DMenuMenuCreator = ( options?: DMenuOptions ) => DMenu<any>;\n\nexport class DMenus {\n\tprotected static CREATORS: DMenuItemCreator[] = [];\n\tprotected static CREATOR_DEFAULT: DMenuItemCreator | null = null;\n\tprotected static MENU_CREATOR?: DMenuMenuCreator;\n\n\tstatic addItemCreator( creator: DMenuItemCreator ): void {\n\t\tthis.CREATORS.push( creator );\n\t}\n\n\tstatic setItemCreatorDefault( creator: DMenuItemCreator ): void {\n\t\tthis.CREATOR_DEFAULT = creator;\n\t}\n\n\tstatic setMenuCreator( creator: DMenuMenuCreator ): void {\n\t\tthis.MENU_CREATOR = creator;\n\t}\n\n\tstatic newItemOf<VALUE>(\n\t\tcreators: DMenuItemCreator[],\n\t\tcreatorDefault: DMenuItemCreator | null,\n\t\toptions: DMenuItemOptionsUnion<VALUE>,\n\t\tsticky: boolean\n\t): DisplayObject | null {\n\t\tfor( let i = 0, imax = creators.length; i < imax; ++i ) {\n\t\t\tconst created = creators[ i ]( options, sticky );\n\t\t\tif( created != null ) {\n\t\t\t\treturn created;\n\t\t\t}\n\t\t}\n\t\tif( creatorDefault ) {\n\t\t\treturn creatorDefault( options, sticky );\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic newItem<VALUE>( options: DMenuItemOptionsUnion<VALUE>, sticky: boolean ): DisplayObject | null {\n\t\treturn this.newItemOf( this.CREATORS, this.CREATOR_DEFAULT, options, sticky );\n\t}\n\n\tstatic newItemsOf<VALUE>(\n\t\tcreator: { newItem( options: DMenuItemOptionsUnion<VALUE>, sticky: boolean ): DisplayObject | null },\n\t\tparent: Container,\n\t\titems: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject>,\n\t\tsticky: boolean\n\t): void {\n\t\tfor( let i = 0, imax = items.length; i < imax; ++i ) {\n\t\t\tconst item = items[ i ];\n\t\t\tif( item instanceof DisplayObject ) {\n\t\t\t\tparent.addChild( item );\n\t\t\t} else {\n\t\t\t\tconst created = creator.newItem( item, sticky );\n\t\t\t\tif( created != null ) {\n\t\t\t\t\tparent.addChild( created );\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error( `No matching menu item creator found: ${JSON.stringify( item )}` );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic newItems<VALUE>(\n\t\tparent: Container,\n\t\titems: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject>,\n\t\tsticky: boolean\n\t): void {\n\t\tthis.newItemsOf( this, parent, items, sticky );\n\t}\n\n\tstatic newMenu<VALUE>( options?: DMenuOptions<VALUE> ): DMenu<VALUE> {\n\t\tif( this.MENU_CREATOR != null ) {\n\t\t\treturn this.MENU_CREATOR( options );\n\t\t} else {\n\t\t\tthrow new Error( \"Missing DMenu creator.\" );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { BaseTexture, Rectangle, Texture } from \"pixi.js\";\n\nexport abstract class DynamicAtlasItem {\n\tid: string;\n\tref: number;\n\tframe: Rectangle;\n\ttexture: Texture;\n\n\twidth: number;\n\theight: number;\n\tstrokeWidth: number;\n\n\tconstructor(\n\t\tid: string,\n\t\twidth: number, height: number, strokeWidth: number,\n\t\tbaseTexture: BaseTexture\n\t) {\n\t\tthis.id = id;\n\t\tthis.ref = 0;\n\t\tconst resolution = baseTexture.resolution;\n\t\tthis.frame = new Rectangle( 0, 0, width * resolution, height * resolution );\n\t\tthis.texture = new Texture( baseTexture, new Rectangle( 0, 0, 1, 1 ) );\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.strokeWidth = strokeWidth;\n\t}\n\n\tabstract render( context: CanvasRenderingContext2D ): void;\n\n\tapplyFrame(): void {\n\t\tconst resolutionInverse = 1 / this.texture.baseTexture.resolution;\n\t\tthis.texture.frame.x = this.frame.x * resolutionInverse;\n\t\tthis.texture.frame.y = this.frame.y * resolutionInverse;\n\t\tthis.texture.frame.width = this.width;\n\t\tthis.texture.frame.height = this.height;\n\t\tthis.texture.updateUvs();\n\t\tthis.texture.emit( \"update\", this );\n\t}\n\n\tdestroy(): void {\n\t\tthis.texture.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DynamicAtlasItem } from \"./dynamic-atlas-item\";\n\nexport class DynamicAtlasItemEmpty extends DynamicAtlasItem {\n\trender( context: CanvasRenderingContext2D ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { BaseTexture } from \"pixi.js\";\nimport { DynamicAtlasItem } from \"./dynamic-atlas-item\";\nimport { DynamicSDFFontAtlas } from \"./dynamic-sdf-font-atlas\";\n\nexport class DynamicAtlasItemFontAtlas extends DynamicAtlasItem {\n\tcanvas: HTMLCanvasElement | null;\n\n\tconstructor( atlas: DynamicSDFFontAtlas, baseTexture: BaseTexture ) {\n\t\tsuper( atlas.id, atlas.width / baseTexture.resolution, atlas.height / baseTexture.resolution, 0, baseTexture );\n\t\tthis.canvas = atlas.canvas;\n\t}\n\n\trender( context: CanvasRenderingContext2D ): void {\n\t\tconst canvas = this.canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst frame = this.frame;\n\t\t\tcontext.drawImage( canvas, frame.x, frame.y, frame.width, frame.height );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { BaseTexture } from \"pixi.js\";\nimport { DynamicAtlasItem } from \"./dynamic-atlas-item\";\n\nexport class DynamicAtlasItemImage extends DynamicAtlasItem {\n\timage: HTMLImageElement;\n\n\tconstructor( image: HTMLImageElement, baseTexture: BaseTexture ) {\n\t\tsuper( image.src, image.width / baseTexture.resolution, image.height / baseTexture.resolution, 0, baseTexture );\n\t\tthis.image = image;\n\t}\n\n\trender( context: CanvasRenderingContext2D ): void {\n\t\tconst frame = this.frame;\n\t\tconst x = frame.x;\n\t\tconst y = frame.y;\n\t\tconst w = frame.width;\n\t\tconst h = frame.height;\n\t\tconst image = this.image;\n\n\t\tcontext.drawImage( image, x, y, w, h );\n\n\t\tcontext.drawImage( image, 0, 0, 1, h, x - 1, y - 1, 1, h + 2 );\n\t\tcontext.drawImage( image, 0, 0, w, 1, x, y - 1, w, 1 );\n\t\tcontext.drawImage( image, w - 1, 0, 1, h, x + w, y - 1, 1, h + 2 );\n\t\tcontext.drawImage( image, 0, h - 1, w, 1, x, y + h, w, 1 );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { BaseTexture, Text } from \"pixi.js\";\nimport { DynamicAtlasItem } from \"./dynamic-atlas-item\";\n\nexport class DynamicAtlasItemText extends DynamicAtlasItem {\n\tprotected _text: Text;\n\n\tconstructor( id: string, text: Text, baseTexture: BaseTexture ) {\n\t\tsuper( id, text.width, text.height, 0, baseTexture );\n\t\tthis._text = text;\n\t}\n\n\trender( context: CanvasRenderingContext2D ): void {\n\t\tconst frame = this.frame;\n\t\tcontext.drawImage( this._text.canvas, frame.x, frame.y, frame.width, frame.height );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DynamicAtlasItem } from \"./dynamic-atlas-item\";\n\nexport class DynamicAtlasItemWhite extends DynamicAtlasItem {\n\trender( context: CanvasRenderingContext2D ): void {\n\t\tconst frame = this.frame;\n\n\t\tcontext.save();\n\t\tcontext.fillStyle = \"#ffffff\";\n\t\tcontext.fillRect( frame.x - 1, frame.y - 1, frame.width + 2, frame.height + 2 );\n\t\tcontext.restore();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { BaseTexture, MIPMAP_MODES, settings, Texture } from \"pixi.js\";\nimport { DynamicAtlasItem } from \"./dynamic-atlas-item\";\nimport { DynamicAtlasItemEmpty } from \"./dynamic-atlas-item-empty\";\nimport { DynamicAtlasItemWhite } from \"./dynamic-atlas-item-white\";\n\nconst MAXIMUM_TEXTURE_SIZE = 4096;\n\nexport class DynamicAtlas {\n\tprotected static INSTANCE: DynamicAtlas | null;\n\n\tprotected _canvas: HTMLCanvasElement;\n\tprotected _sortedData: DynamicAtlasItem[];\n\tprotected _idToDatum: { [ id: string ]: DynamicAtlasItem };\n\tprotected _baseTexture: BaseTexture;\n\tprotected _isDirty: boolean;\n\tprotected _predefined: { [ id: string ]: DynamicAtlasItem };\n\n\tconstructor() {\n\t\tconst canvas = this._canvas = document.createElement( \"canvas\" );\n\t\tcanvas.width = canvas.height = 256;\n\n\t\tconst baseTexture = this._baseTexture = BaseTexture.from( canvas, {\n\t\t\tmipmap: MIPMAP_MODES.OFF,\n\t\t\tresolution: settings.RESOLUTION\n\t\t});\n\n\t\tthis._idToDatum = {};\n\t\tthis._sortedData = [];\n\t\tthis._predefined = {\n\t\t\tempty: new DynamicAtlasItemEmpty(\n\t\t\t\t\"empty\", 10, 10, 0, baseTexture\n\t\t\t),\n\t\t\twhite: new DynamicAtlasItemWhite(\n\t\t\t\t\"white\", 10, 10, 0, baseTexture\n\t\t\t)\n\t\t};\n\n\t\tthis._isDirty = true;\n\t}\n\n\tupdateFrames( width: number, data: DynamicAtlasItem[] ): number {\n\t\tconst padding = 4;\n\t\tlet x = padding;\n\t\tlet y = padding;\n\t\tlet maxRowHeight = 0;\n\t\tfor( let i = 0, imax = data.length; i < imax; ++i ) {\n\t\t\tconst datum = data[ i ];\n\t\t\tif( width < x + datum.frame.width + padding ) {\n\t\t\t\tx = padding;\n\t\t\t\ty += maxRowHeight + padding;\n\t\t\t\tmaxRowHeight = 0;\n\t\t\t}\n\t\t\tdatum.frame.x = x | 0;\n\t\t\tdatum.frame.y = y | 0;\n\t\t\tx += datum.frame.width + padding;\n\t\t\tmaxRowHeight = Math.max( maxRowHeight, datum.frame.height );\n\t\t}\n\n\t\tconst minHeight = y + maxRowHeight + padding;\n\t\tlet result = 256;\n\t\twhile( result < minHeight ) {\n\t\t\tresult <<= 1;\n\t\t}\n\t\treturn Math.min( MAXIMUM_TEXTURE_SIZE, result );\n\t}\n\n\trenderFrames( width: number, height: number, data: DynamicAtlasItem[] ): void {\n\t\tconst canvas = this._canvas;\n\t\tcanvas.width = width;\n\t\tcanvas.height = height;\n\t\tconst context = canvas.getContext( \"2d\" );\n\t\tif( context != null ) {\n\t\t\tfor( let i = 0, imax = data.length; i < imax; ++i ) {\n\t\t\t\tconst datum = data[ i ];\n\t\t\t\tdatum.render( context );\n\t\t\t}\n\t\t}\n\t}\n\n\tapplyFrames( data: DynamicAtlasItem[] ): void {\n\t\tfor( let i = 0, imax = data.length; i < imax; ++i ) {\n\t\t\tconst datum = data[ i ];\n\t\t\tdatum.applyFrame();\n\t\t}\n\t}\n\n\tcalcCanvasWidth( data: DynamicAtlasItem[] ): number {\n\t\tlet result = 128;\n\t\tfor( let i = data.length - 1; 0 <= i; --i ) {\n\t\t\tconst datum = data[ i ];\n\t\t\tconst size = Math.max( datum.frame.width, datum.frame.height );\n\t\t\twhile( result < size ) {\n\t\t\t\tresult <<= 1;\n\t\t\t}\n\t\t}\n\t\treturn Math.min( MAXIMUM_TEXTURE_SIZE, result << 1 );\n\t}\n\n\tcleanup( data: DynamicAtlasItem[] ): void {\n\t\tdata.sort( DynamicAtlas.ITEM_COMPARATOR );\n\t\tfor( let i = data.length - 1; 0 <= i; --i ) {\n\t\t\tconst datum = data[ i ];\n\t\t\tif( 0 < datum.ref ) {\n\t\t\t\tdata.length = i + 1;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tdata.length = 0;\n\t}\n\n\tbegin(): void {\n\t\tconst data = this._sortedData;\n\t\tfor( let i = 0, imax = data.length; i < imax; ++i ) {\n\t\t\tconst datum = data[ i ];\n\t\t\tdatum.ref = 0;\n\t\t}\n\n\t\tthis._isDirty = false;\n\t}\n\n\tend(): void {\n\t\tconst idToDatum = this._idToDatum;\n\t\tconst data = this._sortedData;\n\t\tfor( let i = 0, imax = data.length; i < imax; ++i ) {\n\t\t\tconst datum = data[ i ];\n\t\t\tif( datum.ref <= 0 ) {\n\t\t\t\tif( !( datum.id in this._predefined ) ) {\n\t\t\t\t\tdatum.destroy();\n\t\t\t\t}\n\t\t\t\tdelete idToDatum[ datum.id ];\n\t\t\t\tthis._isDirty = true;\n\t\t\t}\n\t\t}\n\t}\n\n\trepack( forcibly?: boolean ): void {\n\t\tif( forcibly === true || this._isDirty ) {\n\t\t\tthis._isDirty = false;\n\t\t\tconst data = this._sortedData;\n\t\t\tthis.cleanup( data );\n\t\t\tconst canvasWidth = this.calcCanvasWidth( data );\n\t\t\tconst canvasHeight = this.updateFrames( canvasWidth, data );\n\t\t\tthis.renderFrames( canvasWidth, canvasHeight, data );\n\t\t\tthis._baseTexture.setRealSize( canvasWidth, canvasHeight );\n\t\t\tthis.applyFrames( data );\n\t\t}\n\t}\n\n\tget( id: string ): DynamicAtlasItem | null {\n\t\tconst idToDatum = this._idToDatum;\n\t\tconst datum =  idToDatum[ id ];\n\t\tif( datum != null ) {\n\t\t\tdatum.ref += 1;\n\t\t\treturn datum;\n\t\t} else {\n\t\t\tconst predefined = this._predefined[ id ];\n\t\t\tif( predefined != null ) {\n\t\t\t\tthis.set( id, predefined );\n\t\t\t\treturn predefined;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tset( id: string, item: DynamicAtlasItem ): DynamicAtlasItem | undefined {\n\t\tconst result = this._idToDatum[ id ];\n\t\titem.ref += 1;\n\t\tthis._idToDatum[ id ] = item;\n\t\tthis._sortedData.push( item );\n\t\tthis._isDirty = true;\n\t\treturn result;\n\t}\n\n\ttoDirty(): void {\n\t\tthis._isDirty = true;\n\t}\n\n\tgetDefaultTexture(): Texture {\n\t\treturn this.get( \"white\" )!.texture;\n\t}\n\n\tgetBaseTexture(): BaseTexture {\n\t\treturn this._baseTexture;\n\t}\n\n\trelease( id: string ): void {\n\t\tconst idToDatum = this._idToDatum;\n\t\tconst datum = idToDatum[ id ];\n\t\tif( datum != null ) {\n\t\t\tdatum.ref -= 1;\n\t\t\tif( datum.ref <= 0 ) {\n\t\t\t\tif( !( datum.id in this._predefined ) ) {\n\t\t\t\t\tdatum.destroy();\n\t\t\t\t}\n\t\t\t\tdelete idToDatum[ id ];\n\t\t\t\tthis._isDirty = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic ITEM_COMPARATOR = ( a: DynamicAtlasItem, b: DynamicAtlasItem ): number => {\n\t\tif( a.ref <= 0 ) {\n\t\t\tif( b.ref <= 0 ) {\n\t\t\t\treturn 0;\n\t\t\t} else {\n\t\t\t\treturn +1;\n\t\t\t}\n\t\t} else {\n\t\t\tif( b.ref <= 0 ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\n\t\tif( a.frame.height < b.frame.height ) {\n\t\t\treturn -1;\n\t\t} else if( b.frame.height < a.frame.height ) {\n\t\t\treturn +1;\n\t\t} else {\n\t\t\treturn a.frame.width - b.frame.width;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nconst VERTEX_SHADER = `\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nvarying mediump vec2 vTextureCoord;\nvoid main(void) {\n\tgl_Position = vec4(aVertexPosition, 0.0, 1.0);\n\tvTextureCoord = aTextureCoord;\n}\n`;\n\nconst FRAGMENT_SHADER = `\nprecision mediump float;\n\nvarying mediump vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec2 uSize;\n\nfloat calcDistance( float x, float y, float dx, float dy ) {\n\tfloat xd = x + dx;\n\tfloat yd = y + dy;\n\tfloat u = xd / uSize.x;\n\tfloat v = yd / uSize.y;\n\tfloat ul = (xd - 1.0) / uSize.x;\n\tfloat vt = (yd - 1.0) / uSize.y;\n\n\tfloat m = texture2D(uSampler, vec2(u , v )).a;\n\tfloat l = texture2D(uSampler, vec2(ul, v )).a;\n\tfloat t = texture2D(uSampler, vec2(u , vt)).a;\n\n\tfloat xl = mix( xd - 1.0, xd, (0.5 - l) / (m - l) );\n\tfloat yt = mix( yd - 1.0, yd, (0.5 - t) / (m - t) );\n\n\tbool bl = ( min(l, m) < 0.5 && 0.5 <= max(l, m) );\n\tbool bt = ( min(t, m) < 0.5 && 0.5 <= max(t, m) );\n\n\tfloat ll = (bl ? length( vec2( xl - x, yd - y ) ) : 100.0);\n\tfloat lt = (bt ? length( vec2( xd - x, yt - y ) ) : 100.0);\n\n\treturn min( ll, lt );\n}\n\nfloat calcDistancesY( float x, float y, float dx ) {\n\tfloat d = 100.0;\n\tfor( float dy=-6.0; dy<6.5; dy++ ) {\n\t\td = min( d, calcDistance( x, y, dx, dy ) );\n\t}\n\treturn d;\n}\n\nfloat calcDistances( float x, float y ) {\n\tfloat d = 100.0;\n\tfor( float dx=-6.0; dx<6.5; dx++ ) {\n\t\td = min( d, calcDistancesY( x, y, dx ) );\n\t}\n\treturn d;\n}\n\nvoid main(void) {\n\tfloat t = texture2D(uSampler, vTextureCoord).a;\n\tfloat x = vTextureCoord.x * uSize.x;\n\tfloat y = vTextureCoord.y * uSize.y;\n\tfloat d = min( 6.0, calcDistances( x, y ) ) / 12.0;\n\td = clamp( mix( 0.5 - d, 0.5 + d, step( 0.5, t ) ), 0.0, 1.0 );\n\tgl_FragColor = vec4(1.0, 1.0, 1.0, d);\n}\n`;\n\nexport class DynamicSDFFontGenerator {\n\tprotected _canvas: HTMLCanvasElement | null;\n\tprotected _onLostBound: EventListener;\n\tprotected _onRestoreBound: EventListener;\n\tprotected _onUnloadBound: EventListener;\n\tprotected _gl: WebGLRenderingContext | null;\n\tprotected _texture: WebGLTexture | null;\n\tprotected _shaderProgram: WebGLProgram | null;\n\tprotected _vertexPositionAttribute: number;\n\tprotected _textureCoordAttribute: number;\n\tprotected _samplerUniform: WebGLUniformLocation | null;\n\tprotected _sizeUniform: WebGLUniformLocation | null;\n\tprotected _vb: WebGLBuffer | null;\n\tprotected _uvb: WebGLBuffer | null;\n\n\tconstructor() {\n\t\tthis._gl = null;\n\t\tthis._texture = null;\n\t\tthis._shaderProgram = null;\n\t\tthis._vertexPositionAttribute = NaN;\n\t\tthis._textureCoordAttribute = NaN;\n\t\tthis._samplerUniform = NaN;\n\t\tthis._sizeUniform = NaN;\n\t\tthis._vb = null;\n\t\tthis._uvb = null;\n\n\t\tconst canvas = this._canvas = document.createElement( \"canvas\" );\n\t\tcanvas.width = 64;\n\t\tcanvas.height = 64;\n\t\tthis._onLostBound = ( e: Event ): void => {\n\t\t\te.preventDefault();\n\t\t};\n\t\tthis._onRestoreBound = (): void => {\n\t\t\tthis.restore();\n\t\t};\n\t\tthis._onUnloadBound = (): void => {\n\t\t\tthis.destroy();\n\t\t};\n\t\tcanvas.addEventListener( \"webglcontextlost\", this._onLostBound, false);\n\t\tcanvas.addEventListener( \"webglcontextrestored\", this._onRestoreBound, false);\n\t\twindow.addEventListener( \"unload\", this._onUnloadBound, false );\n\t}\n\n\tinit(): this {\n\t\tconst canvas = this._canvas;\n\t\tif( canvas != null && (this._gl == null || this._gl.isContextLost()) ) {\n\t\t\tconst config: WebGLContextAttributes = {\n\t\t\t\talpha: true,\n\t\t\t\tantialias: false,\n\t\t\t\tdepth: false,\n\t\t\t\tstencil: false,\n\t\t\t\tpremultipliedAlpha: false\n\t\t\t};\n\t\t\tconst gl = this._gl = (\n\t\t\t\tcanvas.getContext( \"webgl\", config ) ||\n\t\t\t\tcanvas.getContext( \"experimental-webgl\", config ) as WebGLRenderingContext | null\n\t\t\t);\n\t\t\tif( gl != null ) {\n\t\t\t\tgl.clearColor(1.0, 1.0, 1.0, 0.0);\n\t\t\t\tthis.makeVertexBuffer();\n\t\t\t\tthis.makeUvBuffer();\n\t\t\t\tthis.makeShaders();\n\t\t\t\tthis._texture = null;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\trestore(): void {\n\t\tthis.init();\n\t}\n\n\tgetCanvas(): HTMLCanvasElement | null {\n\t\treturn this._canvas;\n\t}\n\n\tgetShader( gl: WebGLRenderingContext, code: string, type: boolean ): WebGLShader | null {\n\t\tconst shader = ( type ?\n\t\t\tgl.createShader( gl.FRAGMENT_SHADER ) :\n\t\t\tgl.createShader( gl.VERTEX_SHADER )\n\t\t);\n\t\tif( shader != null ) {\n\t\t\tgl.shaderSource( shader, code );\n\t\t\tgl.compileShader( shader );\n\t\t\tif( ! gl.getShaderParameter( shader, gl.COMPILE_STATUS ) ) {\n\t\t\t\t// tslint:disable-next-line: no-console no-unused-expression\n\t\t\t\tconsole && console.error( `Failed to compile the shader: ${gl.getShaderInfoLog(shader)}` );\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\treturn shader;\n\t}\n\n\tmakeShaders(): WebGLShader | null {\n\t\tconst gl = this._gl;\n\t\tif( gl != null && gl.isContextLost() !== true ) {\n\t\t\tconst vertexShader = this.getShader( gl, VERTEX_SHADER, false );\n\t\t\tif( vertexShader != null ) {\n\t\t\t\tconst fragmentShader = this.getShader( gl, FRAGMENT_SHADER, true );\n\t\t\t\tif( fragmentShader != null ) {\n\t\t\t\t\tconst shaderProgram = this._shaderProgram = gl.createProgram();\n\t\t\t\t\tif( shaderProgram != null ) {\n\t\t\t\t\t\tgl.attachShader( shaderProgram, vertexShader );\n\t\t\t\t\t\tgl.attachShader( shaderProgram, fragmentShader );\n\t\t\t\t\t\tgl.linkProgram( shaderProgram );\n\t\t\t\t\t\tif( ! gl.getProgramParameter(shaderProgram, gl.LINK_STATUS) ) {\n\t\t\t\t\t\t\t// tslint:disable-next-line: no-console no-unused-expression\n\t\t\t\t\t\t\tconsole && console.error( `Failed to link the program: ${gl.getError()}` );\n\t\t\t\t\t\t\tgl.deleteShader( vertexShader );\n\t\t\t\t\t\t\tgl.deleteShader( fragmentShader );\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tgl.deleteShader( vertexShader );\n\t\t\t\t\t\t\tgl.deleteShader( fragmentShader );\n\n\t\t\t\t\t\t\tgl.useProgram( shaderProgram );\n\t\t\t\t\t\t\tthis._vertexPositionAttribute = gl.getAttribLocation( shaderProgram, \"aVertexPosition\" );\n\t\t\t\t\t\t\tthis._textureCoordAttribute = gl.getAttribLocation( shaderProgram, \"aTextureCoord\" );\n\t\t\t\t\t\t\tthis._samplerUniform = gl.getUniformLocation( shaderProgram, \"uSampler\" );\n\t\t\t\t\t\t\tthis._sizeUniform = gl.getUniformLocation( shaderProgram, \"uSize\" );\n\t\t\t\t\t\t\tgl.useProgram( null );\n\t\t\t\t\t\t\treturn shaderProgram;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tgl.deleteShader( vertexShader );\n\t\t\t\t\t\tgl.deleteShader( fragmentShader );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tgl.deleteShader( vertexShader );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tdestroyShaders(): void {\n\t\tconst gl = this._gl;\n\t\tif( gl != null && gl.isContextLost() !== true ) {\n\t\t\tconst shaderProgram = this._shaderProgram;\n\t\t\tif( shaderProgram != null ) {\n\t\t\t\tthis._shaderProgram = null;\n\t\t\t\tgl.useProgram( null );\n\t\t\t\tgl.deleteProgram( shaderProgram );\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateTexture( textureCanvas: HTMLCanvasElement ): WebGLTexture | null {\n\t\tconst gl = this._gl;\n\t\tconst canvas = this._canvas;\n\t\tif( gl != null && gl.isContextLost() !== true && canvas != null ) {\n\t\t\tconst width = textureCanvas.width;\n\t\t\tconst height = textureCanvas.height;\n\t\t\tif( canvas.width !== width || canvas.height !== height ) {\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\t\t\t\tgl.viewport( 0, 0, width, height );\n\t\t\t}\n\n\t\t\tlet texture = this._texture;\n\t\t\tif( texture == null ) {\n\t\t\t\ttexture = this._texture = gl.createTexture();\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, texture );\n\t\t\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textureCanvas );\n\t\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\n\t\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\n\t\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\t\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, null );\n\t\t\t} else {\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, texture );\n\t\t\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textureCanvas );\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, null );\n\t\t\t}\n\t\t\treturn texture;\n\t\t}\n\t\treturn null;\n\t}\n\n\tdestroyTexture(): void {\n\t\tconst gl = this._gl;\n\t\tconst texture = this._texture;\n\t\tif( gl != null && gl.isContextLost() !== true && texture != null ) {\n\t\t\tthis._texture = null;\n\t\t\tgl.bindTexture( gl.TEXTURE_2D, null );\n\t\t\tgl.deleteTexture( texture );\n\t\t}\n\t}\n\n\tmakeVertexBuffer(): WebGLBuffer | null {\n\t\tconst gl = this._gl;\n\t\tif( gl != null && gl.isContextLost() !== true ) {\n\t\t\tconst vb = this._vb = gl.createBuffer();\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vb );\n\n\t\t\tconst vertices = [\n\t\t\t\t-1.0, +1.0,\n\t\t\t\t+1.0, +1.0,\n\t\t\t\t-1.0, -1.0,\n\t\t\t\t+1.0, -1.0\n\t\t\t];\n\n\t\t\tgl.bufferData( gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW );\n\t\t\treturn vb;\n\t\t}\n\t\treturn null;\n\t}\n\n\tdestroyVertexBuffer(): void {\n\t\tconst gl = this._gl;\n\t\tconst vb = this._vb;\n\t\tif( gl != null && gl.isContextLost() !== true && vb != null ) {\n\t\t\tthis._vb = null;\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, null );\n\t\t\tgl.deleteBuffer( vb );\n\t\t}\n\t}\n\n\tmakeUvBuffer(): WebGLBuffer | null {\n\t\tconst gl = this._gl;\n\t\tif( gl != null && gl.isContextLost() !== true ) {\n\t\t\tconst uvb = this._uvb = gl.createBuffer();\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, uvb );\n\n\t\t\tconst uvs = [\n\t\t\t\t0.0,  0.0,\n\t\t\t\t1.0,  0.0,\n\t\t\t\t0.0,  1.0,\n\t\t\t\t1.0,  1.0\n\t\t\t];\n\n\t\t\tgl.bufferData( gl.ARRAY_BUFFER, new Float32Array(uvs), gl.STATIC_DRAW );\n\t\t\treturn uvb;\n\t\t}\n\t\treturn null;\n\t}\n\n\tdestroyUvBuffer(): void {\n\t\tconst gl = this._gl;\n\t\tconst uvb = this._uvb;\n\t\tif( gl != null && gl.isContextLost() !== true && uvb != null ) {\n\t\t\tthis._uvb = null;\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, null );\n\t\t\tgl.deleteBuffer( uvb );\n\t\t}\n\t}\n\n\trender(): void {\n\t\tconst gl = this._gl;\n\t\tconst canvas = this._canvas;\n\t\tconst shaderProgram = this._shaderProgram;\n\t\tconst vb = this._vb;\n\t\tconst uvb = this._uvb;\n\t\tconst texture = this._texture;\n\t\tif( gl != null && gl.isContextLost() !== true && canvas != null &&\n\t\t\tshaderProgram != null && vb != null && uvb != null && texture != null ) {\n\t\t\tgl.clear( gl.COLOR_BUFFER_BIT );\n\n\t\t\tgl.useProgram( shaderProgram );\n\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vb );\n\t\t\tconst vertexPositionAttribute = this._vertexPositionAttribute;\n\t\t\tgl.enableVertexAttribArray( vertexPositionAttribute );\n\t\t\tgl.vertexAttribPointer( vertexPositionAttribute, 2, gl.FLOAT, false, 0, 0 );\n\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, uvb );\n\t\t\tconst textureCoordAttribute = this._textureCoordAttribute;\n\t\t\tgl.enableVertexAttribArray( textureCoordAttribute );\n\t\t\tgl.vertexAttribPointer( textureCoordAttribute, 2, gl.FLOAT, false, 0, 0 );\n\n\t\t\tgl.activeTexture( gl.TEXTURE0 );\n\t\t\tgl.bindTexture( gl.TEXTURE_2D, texture );\n\t\t\tgl.uniform1i( this._samplerUniform, 0 );\n\t\t\tgl.uniform2f( this._sizeUniform, canvas.width, canvas.height );\n\n\t\t\tgl.drawArrays( gl.TRIANGLE_STRIP, 0, 4 );\n\n\t\t\tgl.bindTexture( gl.TEXTURE_2D, null );\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, null );\n\t\t\tgl.useProgram( null );\n\t\t}\n\t}\n\n\tread( copyCanvas: HTMLCanvasElement ): void {\n\t\tconst gl = this._gl;\n\t\tconst canvas = this._canvas;\n\t\tif( gl != null && gl.isContextLost() !== true && canvas != null ) {\n\t\t\tconst width = canvas.width;\n\t\t\tconst height = canvas.height;\n\t\t\tcopyCanvas.width = width;\n\t\t\tcopyCanvas.height = height;\n\t\t\tconst copyContext = copyCanvas.getContext( \"2d\" );\n\t\t\tif( copyContext != null ) {\n\t\t\t\tcopyContext.drawImage( canvas, 0, 0 );\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy(): void {\n\t\tthis.destroyVertexBuffer();\n\t\tthis.destroyUvBuffer();\n\t\tthis.destroyShaders();\n\n\t\tconst canvas = this._canvas;\n\t\tif( canvas != null ) {\n\t\t\tthis._canvas = null;\n\t\t\tcanvas.removeEventListener( \"webglcontextlost\", this._onLostBound, false);\n\t\t\tcanvas.removeEventListener( \"webglcontextrestored\", this._onRestoreBound, false);\n\t\t\twindow.removeEventListener( \"unload\", this._onUnloadBound, false );\n\t\t}\n\n\t\tconst gl = this._gl;\n\t\tif( gl != null ) {\n\t\t\tthis._gl = null;\n\t\t\tconst WebGLLoseContext = gl.getExtension( \"WEBGL_lose_context\" );\n\t\t\tif( WebGLLoseContext != null ) {\n\t\t\t\tWebGLLoseContext.loseContext();\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemes } from \"../theme/d-themes\";\nimport { ASCII_CHARACTERS } from \"./ascii\";\nimport { DynamicFontAtlasCharacter } from \"./dynamic-font-atlas-character\";\nimport { DynamicFontAtlasCharacters } from \"./dynamic-font-atlas-characters\";\nimport { DynamicSDFFontGenerator } from \"./dynamic-sdf-font-generator\";\n\nexport interface DynamicSDFFontAtlasFont {\n\tfamily: string;\n\tsize: number;\n\titalic: boolean;\n}\n\nexport interface DynamicSDFFontAtlasJson {\n\twidth: number;\n\theight: number;\n\tfont: DynamicSDFFontAtlasFont;\n\tcharacters: DynamicFontAtlasCharacters;\n}\n\nexport class DynamicSDFFontAtlas {\n\tprotected static GENERATOR: DynamicSDFFontGenerator | null = null;\n\tprotected static FONT_FAMILY_AUTO: string | null = null;\n\n\tprotected _id: string;\n\tprotected _generator: DynamicSDFFontGenerator | null;\n\tprotected _canvas: HTMLCanvasElement | null;\n\tprotected _font: DynamicSDFFontAtlasFont;\n\tprotected _characters: DynamicFontAtlasCharacters;\n\tprotected _length: number;\n\tprotected _width: number;\n\tprotected _height: number;\n\tprotected _isDirty: boolean;\n\n\tconstructor( fontFamily: string ) {\n\t\tthis._id = `font-atlas:${fontFamily}`;\n\t\tthis._generator = DynamicSDFFontAtlas.getGenerator().init();\n\t\tthis._canvas = document.createElement( \"canvas\" );\n\t\tthis._font = {\n\t\t\tfamily: DynamicSDFFontAtlas.toFontFamily( fontFamily ),\n\t\t\tsize: 32,\n\t\t\titalic: false\n\t\t};\n\t\tthis._characters = {};\n\t\tthis._length = 0;\n\t\tthis._width = 1;\n\t\tthis._height = 1;\n\t\tthis._isDirty = true;\n\t}\n\n\tget id() {\n\t\treturn this._id;\n\t}\n\n\tget font(): DynamicSDFFontAtlasFont {\n\t\treturn this._font;\n\t}\n\n\tset font( font: DynamicSDFFontAtlasFont ) {\n\t\tthis._font.family = font.family;\n\t\tthis._font.size = font.size;\n\t\tthis._font.italic = font.italic;\n\t}\n\n\tget width(): number {\n\t\treturn this._width;\n\t}\n\n\tget height(): number {\n\t\treturn this._height;\n\t}\n\n\tget canvas(): HTMLCanvasElement | null {\n\t\treturn this._canvas;\n\t}\n\n\tget generator(): DynamicSDFFontGenerator | null {\n\t\treturn this._generator;\n\t}\n\n\tget characters(): DynamicFontAtlasCharacters {\n\t\treturn this._characters;\n\t}\n\n\tbegin(): void {\n\t\tthis._length = 0;\n\t\tconst characters = this._characters;\n\t\tfor( const character in characters ) {\n\t\t\tcharacters[ character ].ref = 0;\n\t\t}\n\t}\n\n\tend(): void {\n\t\tconst characters = this._characters;\n\t\tfor( const character in characters ) {\n\t\t\tconst data = characters[ character ];\n\t\t\tif( data.ref <= 0 ) {\n\t\t\t\tdata.life -= 1;\n\t\t\t\tif( data.life <= 0 ) {\n\t\t\t\t\tdelete characters[ character ];\n\t\t\t\t\tthis._isDirty =  true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\taddAscii(): void {\n\t\tthis.add( ASCII_CHARACTERS );\n\t\tthis.addChar( \"...\" );\n\t}\n\n\taddChar( character: string ): void {\n\t\tconst characters = this._characters;\n\t\tif( character !== \"\\n\" ) {\n\t\t\tconst data = characters[ character ];\n\t\t\tif( data != null ) {\n\t\t\t\tif( data.ref <= 0 ) {\n\t\t\t\t\tthis._length += 1;\n\t\t\t\t}\n\t\t\t\tdata.ref += 1;\n\t\t\t} else {\n\t\t\t\tcharacters[ character ] = new DynamicFontAtlasCharacter( 0, 1, 1, false );\n\t\t\t\tthis._length += 1;\n\t\t\t\tthis._isDirty = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tadd( characters: string ): void {\n\t\tfor( let i = 0, imax = characters.length; i < imax; ++i ) {\n\t\t\tthis.addChar( characters[ i ] );\n\t\t}\n\t}\n\n\tget( character: string ): DynamicFontAtlasCharacter | undefined {\n\t\treturn this._characters[ character ];\n\t}\n\n\tupdate(): boolean {\n\t\tif( this._isDirty ) {\n\t\t\tconst canvas = this._canvas;\n\t\t\tconst generator = this._generator;\n\t\t\tif( canvas != null && generator != null ) {\n\t\t\t\tconst context = canvas.getContext( \"2d\" );\n\t\t\t\tif( context != null ) {\n\t\t\t\t\tthis._isDirty = false;\n\n\t\t\t\t\tconst font = this._font;\n\t\t\t\t\tconst characters = this._characters;\n\t\t\t\t\tconst characterSize = font.size + 14;\n\t\t\t\t\tconst width = DynamicSDFFontAtlas.toPowerOf2( Math.ceil( Math.sqrt( this._length ) ) * characterSize );\n\t\t\t\t\tthis._width = width;\n\t\t\t\t\tconst fontStyle = (font.italic ? \"italic \" : \"\") + (font.size + \"px \") + font.family;\n\n\t\t\t\t\tcontext.font = fontStyle;\n\t\t\t\t\tcontext.textAlign = \"left\";\n\t\t\t\t\tcontext.textBaseline = \"middle\";\n\t\t\t\t\tcontext.lineWidth = 0;\n\t\t\t\t\tcontext.lineCap = \"round\";\n\t\t\t\t\tcontext.lineJoin = \"miter\";\n\t\t\t\t\tcontext.miterLimit = 0;\n\t\t\t\t\tcontext.fillStyle = \"#FFFFFF\";\n\n\t\t\t\t\tconst offsetX = 7;\n\t\t\t\t\tconst offsetY = ( characterSize >> 1 );\n\t\t\t\t\tlet x = 0;\n\t\t\t\t\tlet y = 0;\n\t\t\t\t\tfor( const character in characters ) {\n\t\t\t\t\t\tconst data = characters[ character ];\n\t\t\t\t\t\tconst advance = context.measureText( character ).width;\n\t\t\t\t\t\tconst characterWidth = Math.ceil( offsetX + advance + offsetX );\n\t\t\t\t\t\tconst characterHeight = characterSize;\n\t\t\t\t\t\tif( width <= x + characterWidth ) {\n\t\t\t\t\t\t\tx = 0;\n\t\t\t\t\t\t\ty += characterSize;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdata.x = x;\n\t\t\t\t\t\tdata.y = y;\n\t\t\t\t\t\tdata.width = characterWidth;\n\t\t\t\t\t\tdata.height = characterHeight;\n\t\t\t\t\t\tdata.advance = advance;\n\t\t\t\t\t\tdata.origin.x = x + offsetX;\n\t\t\t\t\t\tdata.origin.y = y + offsetY;\n\n\t\t\t\t\t\tx += characterWidth;\n\t\t\t\t\t}\n\t\t\t\t\tconst height = this._height = y + characterSize;\n\n\t\t\t\t\t// Make a input canvas\n\t\t\t\t\t// Here, we need to reset the context because\n\t\t\t\t\t// context settings will be lost when we set the width/height.\n\t\t\t\t\tcanvas.width = width;\n\t\t\t\t\tcanvas.height = height;\n\t\t\t\t\tcontext.font = fontStyle;\n\t\t\t\t\tcontext.textAlign = \"left\";\n\t\t\t\t\tcontext.textBaseline = \"middle\";\n\t\t\t\t\tcontext.lineWidth = 0;\n\t\t\t\t\tcontext.lineCap = \"round\";\n\t\t\t\t\tcontext.lineJoin = \"miter\";\n\t\t\t\t\tcontext.miterLimit = 4;\n\t\t\t\t\tcontext.fillStyle = \"#FFFFFF\";\n\t\t\t\t\tcontext.clearRect( 0, 0, width, height );\n\t\t\t\t\tfor( const character in characters ) {\n\t\t\t\t\t\tconst data = characters[ character ];\n\t\t\t\t\t\tcontext.fillText( character, data.origin.x, data.origin.y );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Convert to SDF font texture\n\t\t\t\t\tgenerator.updateTexture( canvas );\n\t\t\t\t\tgenerator.render();\n\t\t\t\t\tgenerator.read( canvas );\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tget length(): number {\n\t\treturn this._length;\n\t}\n\n\ttoJson(): DynamicSDFFontAtlasJson {\n\t\treturn {\n\t\t\twidth: this._width,\n\t\t\theight: this._height,\n\t\t\tfont: this._font,\n\t\t\tcharacters: this._characters\n\t\t};\n\t}\n\n\ttoString(): string {\n\t\treturn JSON.stringify( this.toJson() );\n\t}\n\n\tdestroy() {\n\t\tconst generator = this._generator;\n\t\tif( generator != null ) {\n\t\t\tthis._generator = null;\n\t\t}\n\n\t\tconst canvas = this._canvas;\n\t\tif( canvas != null ) {\n\t\t\tthis._canvas = null;\n\t\t}\n\n\t\tconst characters = this._characters;\n\t\tfor( const character in characters ) {\n\t\t\tdelete characters[ character ];\n\t\t}\n\t}\n\n\tstatic toFontFamily( fontFamily: string ) {\n\t\treturn ( fontFamily === \"auto\" ?\n\t\t\tDynamicSDFFontAtlas.getAutoFontFamily() :\n\t\t\tfontFamily\n\t\t);\n\t}\n\n\tstatic toPowerOf2( size: number ): number {\n\t\tlet result = 32;\n\t\twhile( result < size ) {\n\t\t\tresult <<= 1;\n\t\t}\n\t\treturn result;\n\t}\n\n\tstatic getGenerator(): DynamicSDFFontGenerator {\n\t\tif( DynamicSDFFontAtlas.GENERATOR == null ) {\n\t\t\tDynamicSDFFontAtlas.GENERATOR = new DynamicSDFFontGenerator();\n\t\t}\n\t\treturn DynamicSDFFontAtlas.GENERATOR;\n\t}\n\n\tstatic getAutoFontFamily(): string {\n\t\tif( DynamicSDFFontAtlas.FONT_FAMILY_AUTO == null ) {\n\t\t\tDynamicSDFFontAtlas.FONT_FAMILY_AUTO = (DThemes.getInstance().get( \"DBase\" ) as any).getFontFamilly() as string;\n\t\t}\n\t\treturn DynamicSDFFontAtlas.FONT_FAMILY_AUTO;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DynamicAtlas } from \"./dynamic-atlas\";\nimport { DynamicAtlasItemFontAtlas } from \"./dynamic-atlas-item-font-atlas\";\nimport { DynamicSDFFontAtlas } from \"./dynamic-sdf-font-atlas\";\n\nexport class DynamicSDFFontAtlases {\n\tprotected _atlases: { [ family: string ]: DynamicSDFFontAtlas };\n\n\tconstructor() {\n\t\tthis._atlases = {};\n\t}\n\n\tbegin(): void {\n\t\tconst atlases = this._atlases;\n\t\tfor( const family in atlases ) {\n\t\t\tconst atlas = atlases[ family ];\n\t\t\tatlas.begin();\n\t\t}\n\t}\n\n\tend(): void {\n\t\tconst atlases = this._atlases;\n\t\tfor( const family in atlases ) {\n\t\t\tconst atlas = atlases[ family ];\n\t\t\tif( 0 < atlas.length ) {\n\t\t\t\tatlas.addAscii();\n\t\t\t}\n\t\t\tatlas.end();\n\t\t\tif( atlas.length <= 0 ) {\n\t\t\t\tatlas.destroy();\n\t\t\t\tdelete atlases[ family ];\n\t\t\t}\n\t\t}\n\t}\n\n\tadd( family: string, targets: string ) {\n\t\tconst atlas = this._atlases[ family ];\n\t\tif( atlas != null ) {\n\t\t\tatlas.add( targets );\n\t\t} else {\n\t\t\tconst newAtlas = new DynamicSDFFontAtlas( family );\n\t\t\tnewAtlas.add( targets );\n\t\t\tthis._atlases[ family ] = newAtlas;\n\t\t}\n\t}\n\n\tget( family: string ): DynamicSDFFontAtlas | null {\n\t\tconst atlas = this._atlases[ family ];\n\t\tif( atlas != null ) {\n\t\t\treturn atlas;\n\t\t}\n\t\treturn null;\n\t}\n\n\tupdate( baseAtlas: DynamicAtlas ): void {\n\t\tconst atlases = this._atlases;\n\t\tconst baseTexture = baseAtlas.getBaseTexture();\n\t\tfor( const family in atlases ) {\n\t\t\tconst atlas = atlases[ family ];\n\t\t\tif( atlas.update() ) {\n\t\t\t\tconst atlasId = atlas.id;\n\t\t\t\tconst item = baseAtlas.get( atlasId );\n\t\t\t\tif( item != null ) {\n\t\t\t\t\tconst width = atlas.width;\n\t\t\t\t\tconst height = atlas.height;\n\t\t\t\t\tconst resolution = baseTexture.resolution;\n\t\t\t\t\titem.frame.width = width;\n\t\t\t\t\titem.frame.height = height;\n\t\t\t\t\titem.width = width / resolution;\n\t\t\t\t\titem.height = height / resolution;\n\t\t\t\t\tbaseAtlas.toDirty();\n\t\t\t\t} else {\n\t\t\t\t\tbaseAtlas.set(\n\t\t\t\t\t\tatlasId,\n\t\t\t\t\t\tnew DynamicAtlasItemFontAtlas( atlas, baseTexture )\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy(): void {\n\t\tconst atlases = this._atlases;\n\t\tfor( const family in atlases ) {\n\t\t\tconst atlas = atlases[ family ];\n\t\t\tatlas.destroy();\n\t\t}\n\t\tthis._atlases = {};\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"../d-base\";\n\nexport class Lazy<INSTANCE, OPTIONS> {\n\tinstance: INSTANCE | null;\n\tnewInstance: new ( options: OPTIONS ) => INSTANCE;\n\toptions: OPTIONS;\n\n\tconstructor( newInstance: new ( options: OPTIONS ) => INSTANCE, options: OPTIONS, base?: DBase ) {\n\t\tthis.instance = null;\n\t\tthis.newInstance = newInstance;\n\t\tthis.options = options;\n\n\t\tif( base != null ) {\n\t\t\tif( base.isActive() ) {\n\t\t\t\tsetTimeout((): void => {\n\t\t\t\t\tthis.get();\n\t\t\t\t}, 0);\n\t\t\t}\n\n\t\t\tbase.on( \"active\", (): void => {\n\t\t\t\tthis.get();\n\t\t\t});\n\t\t}\n\t}\n\n\tget(): INSTANCE {\n\t\tlet instance = this.instance;\n\t\tif( instance == null ) {\n\t\t\tinstance = this.instance = new (this.newInstance)( this.options );\n\t\t}\n\t\treturn instance;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeA implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn (date.getHours() < 12 ? \"AM\" : \"PM\");\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodea implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn (date.getHours() < 12 ? \"am\" : \"pm\");\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeD implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn String(date.getDate());\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNoded implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn `${target | 0}`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport abstract class FormatNodePrecision implements FormatNode {\n\tprotected precision: number;\n\n\tconstructor( precision?: string ) {\n\t\tif (precision != null) {\n\t\t\tthis.precision = +precision.substring(1, precision.length);\n\t\t} else {\n\t\t\tthis.precision = 0;\n\t\t}\n\t}\n\n\tabstract format( target: number, step: number, date: Date ): string;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNodePrecision } from \"./format-node-precision\";\n\nexport class FormatNodee extends FormatNodePrecision {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn target.toExponential(this.precision);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNodePrecision } from \"./format-node-precision\";\n\nexport class FormatNodef extends FormatNodePrecision {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn target.toFixed(this.precision);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNodePrecision } from \"./format-node-precision\";\n\nexport class FormatNodefsi extends FormatNodePrecision {\n\tformat( target: number, step: number, date: Date ): string {\n\t\tconst abs = this.toAbs( target, step, date );\n\t\tif( abs < 1e-24 ) {\n\t\t\treturn this.format_( target, 1e+00, \"\"  );\n\t\t} else if( abs < 1e-21 ) {\n\t\t\treturn this.format_( target, 1e+24, \"y\" );\n\t\t} else if( abs < 1e-18 ) {\n\t\t\treturn this.format_( target, 1e+21, \"z\" );\n\t\t} else if( abs < 1e-15 ) {\n\t\t\treturn this.format_( target, 1e+18, \"a\" );\n\t\t} else if( abs < 1e-12 ) {\n\t\t\treturn this.format_( target, 1e+15, \"f\" );\n\t\t} else if( abs < 1e-09 ) {\n\t\t\treturn this.format_( target, 1e+12, \"p\" );\n\t\t} else if( abs < 1e-06 ) {\n\t\t\treturn this.format_( target, 1e+09, \"n\" );\n\t\t} else if( abs < 1e-03 ) {\n\t\t\treturn this.format_( target, 1e+06, \"\" );\n\t\t} else if( abs < 1e+00 ) {\n\t\t\treturn this.format_( target, 1e+03, \"m\" );\n\t\t} else if( abs < 1e+03 ) {\n\t\t\treturn this.format_( target, 1e+00, \"\"  );\n\t\t} else if( abs < 1e+06 ) {\n\t\t\treturn this.format_( target, 1e-03, \"k\" );\n\t\t} else if( abs < 1e+09 ) {\n\t\t\treturn this.format_( target, 1e-06, \"M\" );\n\t\t} else if( abs < 1e+12 ) {\n\t\t\treturn this.format_( target, 1e-09, \"G\" );\n\t\t} else if( abs < 1e+15 ) {\n\t\t\treturn this.format_( target, 1e-12, \"T\" );\n\t\t} else if( abs < 1e+18 ) {\n\t\t\treturn this.format_( target, 1e-15, \"P\" );\n\t\t} else if( abs < 1e+21 ) {\n\t\t\treturn this.format_( target, 1e-18, \"E\" );\n\t\t} else if( abs < 1e+24 ) {\n\t\t\treturn this.format_( target, 1e-21, \"Z\" );\n\t\t} else {\n\t\t\treturn this.format_( target, 1e-24, \"Y\" );\n\t\t}\n\t}\n\n\tprotected toAbs(target: number, step: number, date: Date): number {\n\t\treturn Math.abs(target);\n\t}\n\n\tprotected format_(target: number, unitInverse: number, postfix: string): string {\n\t\tconst value = target * unitInverse;\n\t\treturn `${value.toFixed(this.precision)}${postfix}`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNodePrecision } from \"./format-node-precision\";\n\nexport class FormatNodeg extends FormatNodePrecision {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn target.toPrecision(this.precision);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeH implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn String(date.getHours());\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeh implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn String(date.getHours() % 12);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeM implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn String(date.getMonth() + 1);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodem implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn String(date.getMinutes());\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodemi implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn String(date.getMilliseconds());\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeP implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn `${(target * 100) | 0}%`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodep implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn `${target | 0}%`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilPad = ( str: string, length: number, c: string ): string => {\n\tconst strLength = str.length;\n\tif( length < strLength ) {\n\t\treturn str;\n\t}\n\tlet padding = \"\";\n\tfor( let i = 0, imax = length - strLength; i < imax; ++i ) {\n\t\tpadding += c;\n\t}\n\treturn padding + str;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utilPad } from \"../util-pad\";\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodePadding implements FormatNode {\n\tprotected length: number;\n\tprotected character: string;\n\tprotected node: FormatNode;\n\n\tconstructor( length: number, character: string, node: FormatNode ) {\n\t\tthis.length = length;\n\t\tthis.character = character;\n\t\tthis.node = node;\n\t}\n\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn utilPad(this.node.format(target, step, date), this.length, this.character);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeParenthesis {\n\tprotected node: FormatNode;\n\n\tconstructor( node: FormatNode ) {\n\t\tthis.node = node;\n\t}\n\n\tformat( target: number, step: number, date: Date ): string {\n\t\tconst result = this.node.format(target, step, date);\n\t\tif (0 < result.length && result[0] === \"-\") {\n\t\t\treturn `(${result.substring(1, result.length)})`;\n\t\t}\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodePlus implements FormatNode {\n\tprotected node: FormatNode;\n\n\tconstructor(node: FormatNode) {\n\t\tthis.node = node;\n\t}\n\n\tformat( target: number, step: number, date: Date ): string {\n\t\tconst result = this.node.format(target, step, date);\n\t\tif (0 < result.length && result[0] !== \"-\") {\n\t\t\treturn `+${result}`;\n\t\t}\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeRP implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn `${Math.round(target * 100)}%`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNoderp implements FormatNode {\n\tformat(target: number, step: number, date: Date): string {\n\t\treturn `${Math.round(target)}%`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodesdt implements FormatNode {\n\tprotected Y: FormatNode;\n\tprotected M: FormatNode;\n\tprotected D: FormatNode;\n\tprotected H: FormatNode;\n\tprotected m: FormatNode;\n\tprotected s: FormatNode;\n\tprotected mi: FormatNode;\n\n\tconstructor(\n\t\tY: FormatNode, M: FormatNode, D: FormatNode,\n\t\tH: FormatNode, m: FormatNode, s: FormatNode, mi: FormatNode\n\t) {\n\t\tthis.Y = Y;\n\t\tthis.M = M;\n\t\tthis.D = D;\n\t\tthis.H = H;\n\t\tthis.m = m;\n\t\tthis.s = s;\n\t\tthis.mi = mi;\n\t}\n\n\tformat( target: number, step: number, date: Date ): string {\n\t\tif (step < 1000) {\n\t\t\treturn `${this.s.format(target, step, date)}.${this.mi.format(target, step, date)}`;\n\t\t} else if (step < 60000) {\n\t\t\treturn `${this.m.format(target, step, date)}:${this.s.format(target, step, date)}`;\n\t\t} else if (step < 3600000) {\n\t\t\treturn `${this.H.format(target, step, date)}:${this.m.format(target, step, date)}`;\n\t\t} else if (step < 86400000) {\n\t\t\tconst M = this.M.format(target, step, date);\n\t\t\tconst D = this.D.format(target, step, date);\n\t\t\treturn `${M}/${D} ${this.H.format(target, step, date)}`;\n\t\t} else if (step < 2592000000) {\n\t\t\treturn `${this.M.format(target, step, date)}/${this.D.format(target, step, date)}`;\n\t\t} else {\n\t\t\treturn `${this.Y.format(target, step, date)}/${this.M.format(target, step, date)}`;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeSpace {\n\tprotected node: FormatNode;\n\tconstructor(node: FormatNode) {\n\t\tthis.node = node;\n\t}\n\tformat( target: number, step: number, date: Date ): string {\n\t\tconst result = this.node.format(target, step, date);\n\t\tif( 0 < result.length && result[0] !== \"-\" ) {\n\t\t\treturn ` ${result}`;\n\t\t}\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNodefsi } from \"./format-node-fsi\";\n\nexport class FormatNodessi extends FormatNodefsi {\n\tprotected toAbs( target: number, step: number, date: Date ): number {\n\t\treturn Math.abs(step);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeString implements FormatNode {\n\tprotected str: string;\n\n\tconstructor(str: string) {\n\t\tthis.str = str;\n\t}\n\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn this.str;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeY implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn String(date.getFullYear());\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodey implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn String(date.getFullYear() % 100);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utilPad } from \"../util-pad\";\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodez implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\tconst z = date.getTimezoneOffset();\n\t\tconst tzs = (z <= 0 ? \"+\" : \"-\");\n\t\tconst tzh = utilPad(String(Math.floor(Math.abs(z) / 60)), 2, \"0\");\n\t\tconst tzm = utilPad(String(Math.floor(Math.abs(z) % 60)), 2, \"0\");\n\t\treturn `${tzs}${tzh}:${tzm}`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNoderd implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn `${Math.round(target)}`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodes implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn String(date.getSeconds());\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node/format-node\";\nimport { FormatNodeA } from \"./format-node/format-node-a-large\";\nimport { FormatNodea } from \"./format-node/format-node-a-small\";\nimport { FormatNodeD } from \"./format-node/format-node-d-large\";\nimport { FormatNoded } from \"./format-node/format-node-d-small\";\nimport { FormatNodee } from \"./format-node/format-node-e\";\nimport { FormatNodef } from \"./format-node/format-node-f\";\nimport { FormatNodefsi } from \"./format-node/format-node-fsi\";\nimport { FormatNodeg } from \"./format-node/format-node-g\";\nimport { FormatNodeH } from \"./format-node/format-node-h-large\";\nimport { FormatNodeh } from \"./format-node/format-node-h-small\";\nimport { FormatNodeM } from \"./format-node/format-node-m-large\";\nimport { FormatNodem } from \"./format-node/format-node-m-small\";\nimport { FormatNodemi } from \"./format-node/format-node-mi\";\nimport { FormatNodeP } from \"./format-node/format-node-p-large\";\nimport { FormatNodep } from \"./format-node/format-node-p-small\";\nimport { FormatNodePadding } from \"./format-node/format-node-padding\";\nimport { FormatNodeParenthesis } from \"./format-node/format-node-parenthesis\";\nimport { FormatNodePlus } from \"./format-node/format-node-plus\";\nimport { FormatNodeRP } from \"./format-node/format-node-rp-large\";\nimport { FormatNoderp } from \"./format-node/format-node-rp-small\";\nimport { FormatNodesdt } from \"./format-node/format-node-sdt\";\nimport { FormatNodeSpace } from \"./format-node/format-node-space\";\nimport { FormatNodessi } from \"./format-node/format-node-ssi\";\nimport { FormatNodeString } from \"./format-node/format-node-string\";\nimport { FormatNodeY } from \"./format-node/format-node-y-large\";\nimport { FormatNodey } from \"./format-node/format-node-y-small\";\nimport { FormatNodez } from \"./format-node/format-node-z\";\nimport { FormatNoderd } from \"./format-node/format-noder-d\";\nimport { FormatNodes } from \"./format-node/format-nodes\";\nimport { NumberFormatter, NumberFormatterFunction } from \"./number-formatter\";\n\n// tslint:disable-next-line: max-line-length\nconst REGEXP = /%(0|_|-|\\+|\\()?(\\.\\d+)?(Y(?:MD?)?|y(?:MD?)?|MD?|D|H(?:ms?)?|h(?:ms?)?|m(?:i|s)?|a|A|s(?:s?i|dt)?|z|%|f(?:si)?|e|g|d|r(?:d|p)|p|P|RP)/g;\n\nexport class NumberFormatterImpl implements NumberFormatter {\n\tprotected isDateRequired: boolean;\n\tprotected nodes: FormatNode[];\n\tprotected date: Date;\n\n\tconstructor( format: string ) {\n\t\tlet previousIndex = 0;\n\t\tlet isDateRequired = false;\n\t\tconst nodes: FormatNode[] = [];\n\t\tREGEXP.lastIndex = 0;\n\t\twhile( true ) {\n\t\t\tconst matched = REGEXP.exec( format );\n\t\t\tif( matched != null ) {\n\t\t\t\tconst index = matched.index;\n\t\t\t\tif( previousIndex < index ) {\n\t\t\t\t\tnodes.push( new FormatNodeString( format.substring( previousIndex, index ) ) );\n\t\t\t\t}\n\t\t\t\tpreviousIndex = index + matched[ 0 ].length;\n\n\t\t\t\tconst all = matched[ 0 ];\n\t\t\t\tconst modifier = matched[ 1 ];\n\t\t\t\tconst precision = matched[ 2 ];\n\t\t\t\tconst specifier = matched[ 3 ];\n\n\t\t\t\tswitch( specifier ) {\n\t\t\t\tcase \"Y\": // full year\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( new FormatNodeY() );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"YM\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tnew FormatNodeY(),\n\t\t\t\t\t\tnew FormatNodeString( \"/\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeM() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"YMD\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tnew FormatNodeY(),\n\t\t\t\t\t\tnew FormatNodeString( \"/\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeM() ),\n\t\t\t\t\t\tnew FormatNodeString( \"/\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeD() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"y\": // short year: [0, 99]\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( this.toModifiedNodeDatetime2( modifier, new FormatNodey() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"yM\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodey() ),\n\t\t\t\t\t\tnew FormatNodeString( \"/\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeM() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"yMD\":\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodey() ),\n\t\t\t\t\t\tnew FormatNodeString( \"/\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeM() ),\n\t\t\t\t\t\tnew FormatNodeString( \"/\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeD() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"M\": // month: [1, 12]\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( this.toModifiedNodeDatetime2( modifier, new FormatNodeM() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"MD\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeM() ),\n\t\t\t\t\t\tnew FormatNodeString( \"/\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeD() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"D\": // day of the month: [1, 31]\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( this.toModifiedNodeDatetime2( modifier, new FormatNodeD() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"H\": // 24-hour clock: [0, 23]\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( this.toModifiedNodeDatetime2( modifier, new FormatNodeH() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Hm\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeH() ),\n\t\t\t\t\t\tnew FormatNodeString( \":\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodem() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Hms\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeH() ),\n\t\t\t\t\t\tnew FormatNodeString( \":\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodem() ),\n\t\t\t\t\t\tnew FormatNodeString( \":\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodes() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"h\": // 12-hour clock: [1, 12]\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( this.toModifiedNodeDatetime2( modifier, new FormatNodeh() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"hm\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeh() ),\n\t\t\t\t\t\tnew FormatNodeString( \":\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodem() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"hms\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeh() ),\n\t\t\t\t\t\tnew FormatNodeString( \":\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodem() ),\n\t\t\t\t\t\tnew FormatNodeString( \":\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodes() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"m\": // minute [0, 59]\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( this.toModifiedNodeDatetime2( modifier, new FormatNodem() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"ms\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodem() ),\n\t\t\t\t\t\tnew FormatNodeString( \":\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodes() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"mi\": // milliseconds [0, 999]\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( this.toModifiedNodeDatetime3( modifier, new FormatNodemi() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"a\": // am or pm\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( new FormatNodea() );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"A\": // AM or PM\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( new FormatNodeA() );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"s\": // seconds: [0, 61]\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( this.toModifiedNodeDatetime2( modifier, new FormatNodes() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"sdt\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(new FormatNodesdt(\n\t\t\t\t\t\tnew FormatNodeY(),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeM() ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeD() ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeH() ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodem() ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodes() ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime3( modifier, new FormatNodemi() )\n\t\t\t\t\t));\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"z\": // time zone\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( new FormatNodez() );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%\": // a % literal\n\t\t\t\t\tnodes.push( new FormatNodeString( \"%\" ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"f\": // fixed point notation\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNodef( precision ) ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"e\": // exponent notation\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNodee( precision ) ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"g\": // %f or %e\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNodeg( precision ) ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"rd\": // rounded decimal notation\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNoderd() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"d\": // decimal notation\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNoded() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"P\": // percent notation (Multiplied by 100)\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNodeP() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"p\": // percent notation (Not multiplied by 100)\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNodep() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"RP\": // percent notation (Multiplied by 100)\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNodeRP() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"rp\": // percent notation (Not multiplied by 100)\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNoderp() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"fsi\": // fixed point notation with a SI prefix\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNodefsi( precision ) ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"ssi\": // Step-based fixed point notation with a SI prefix\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNodessi( precision ) ) );\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tnodes.push( new FormatNodeString( all ) );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( previousIndex < format.length ) {\n\t\t\t\t\tnodes.push( new FormatNodeString( format.substring( previousIndex, format.length ) ) );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis.isDateRequired = isDateRequired;\n\t\tthis.nodes = nodes;\n\t\tthis.date = new Date();\n\t}\n\n\tprotected toModifiedNodeDatetime2( modifier: string, node: FormatNode ): FormatNode {\n\t\tswitch( modifier ) {\n\t\tcase \"_\":\n\t\t\treturn new FormatNodePadding( 2, \" \", node );\n\t\tcase \"-\":\n\t\t\treturn node;\n\t\tdefault:\n\t\t\treturn new FormatNodePadding( 2, \"0\", node );\n\t\t}\n\t}\n\n\tprotected toModifiedNodeDatetime3( modifier: string, node: FormatNode ): FormatNode {\n\t\tswitch( modifier ) {\n\t\tcase \"_\":\n\t\t\treturn new FormatNodePadding( 3, \" \", node );\n\t\tcase \"-\":\n\t\t\treturn node;\n\t\tdefault:\n\t\t\treturn new FormatNodePadding( 3, \"0\", node );\n\t\t}\n\t}\n\n\tprotected toModifiedNodeNumber( modifier: string, node: FormatNode ): FormatNode {\n\t\tswitch( modifier ) {\n\t\tcase \"_\": // space for non-negative numbers\n\t\t\treturn new FormatNodeSpace( node );\n\t\tcase \"+\": // plus sign for non-negative numbers\n\t\t\treturn new FormatNodePlus( node );\n\t\tcase \"(\": // parenthesis for the negative numbers\n\t\t\treturn new FormatNodeParenthesis( node );\n\t\tdefault:\n\t\t\treturn node;\n\t\t}\n\t}\n\n\tformat( target: number, step: number ): string {\n\t\tconst nodes = this.nodes;\n\t\tconst date = this.date;\n\t\tif( this.isDateRequired ) {\n\t\t\tdate.setTime( target );\n\t\t}\n\t\tlet result = \"\";\n\t\tfor( let i = 0, imax = nodes.length; i < imax; ++i ) {\n\t\t\tresult += nodes[ i ].format( target, step, date );\n\t\t}\n\t\treturn result;\n\t}\n\n\ttoFunction(): NumberFormatterFunction {\n\t\treturn ( target: number, step: number ): string => {\n\t\t\treturn this.format( target, step );\n\t\t};\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { NumberFormatter } from \"./number-formatter\";\nimport { NumberFormatterImpl } from \"./number-formatter-impl\";\n\nexport class NumberFormatters {\n\tstatic create( format: string ): NumberFormatter {\n\t\treturn new NumberFormatterImpl( format );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class UtilAlpha {\n\tstatic blend( alphaA: number, alphaB: number, t: number ): number {\n\t\tconst w = Math.max( 0, Math.min( 1, t ) );\n\t\treturn Math.max( 0, Math.min( 1, alphaA * (1 - w) + alphaB * w ) );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { resources } from \"pixi.js\";\n\nexport class SVGResource extends resources.BaseImageResource {\n\treadonly source!: HTMLImageElement;\n\treadonly svg: string;\n\n\tprotected _load: Promise<void> | null = null;\n\n\tconstructor( source: string, options: any ) {\n\t\tsuper( new Image() );\n\t\tthis._width = 0;\n\t\tthis._height = 0;\n\t\tthis.svg = source;\n\n\t\tresources.BaseImageResource.crossOrigin( this.source, this.svg, options && options.crossorigin );\n\n\t\tif( ! options || options.autoLoad !== false ) {\n\t\t\tthis.load();\n\t\t}\n\t}\n\n\tload(): Promise<void> {\n\t\tif( this._load ) {\n\t\t\treturn this._load;\n\t\t}\n\n\t\tthis._load = new Promise(( resolve ): void => {\n\t\t\tconst image: HTMLImageElement = this.source;\n\n\t\t\timage.onerror = ( event ): void => {\n\t\t\t\timage.onerror = null;\n\t\t\t\t(this as any).onError.run( event ); // TODO: Fix PixiJS\n\t\t\t};\n\n\t\t\timage.onload = (): void => {\n\t\t\t\t(this.resize as any)( image.width, image.height ); // TODO: Fix PixiJS\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\timage.src = this.svg;\n\t\t});\n\n\t\treturn this._load;\n\t}\n\n\tstatic test( source: unknown, extension: string ) {\n\t\t// url file extension is SVG\n\t\treturn extension === \"svg\"\n\t\t\t// source is SVG data-uri\n\t\t\t|| (typeof source === \"string\" && source.indexOf(\"data:image/svg+xml;base64\") === 0)\n\t\t\t// source is SVG inline\n\t\t\t|| (typeof source === \"string\" && source.indexOf(\"<svg\") === 0);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilToSvgUrl = ( svg: string ): string => {\n\treturn `data:image/svg+xml;base64,${btoa(svg)}`;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { BaseTexture, Rectangle, resources, SCALE_MODES, settings, Texture } from \"pixi.js\";\nimport { SVGResource } from \"../resource/svg-resource\";\nimport { utilToSvgUrl } from \"./util-to-svg-url\";\n\n// PixiJS's SVGResource has a issue on Microsoft Edge.\n// Edge may invoke the HTMLImageElement#onload on an unexpected timing.\n// Thus, PixiJS may lost the `load` event in some situations.\nresources.INSTALLED.push( SVGResource );\n\nexport interface UtilSvgAtlasBuilderBuildOptions {\n\tforce?: boolean;\n\tscaling?: SCALE_MODES;\n}\n\nexport class UtilSvgAtlasBuilder {\n\tprotected _width: number;\n\tprotected _ratio: number;\n\tprotected _margin: number;\n\n\tprotected _frames: { [ name: string ]: Rectangle };\n\tprotected _svg: string;\n\tprotected _nextX: number;\n\tprotected _nextY: number;\n\tprotected _height: number;\n\n\tprotected _built?: { [ name: string ]: Texture };\n\n\tconstructor( width: number, ratio: number, margin: number ) {\n\t\tthis._width = width;\n\t\tthis._ratio = ratio;\n\t\tthis._margin = margin;\n\n\t\tthis._frames = {};\n\t\tthis._svg = \"\";\n\t\tthis._nextX = 0;\n\t\tthis._nextY = 0;\n\t\tthis._height = 0;\n\t}\n\n\tget width(): number {\n\t\treturn this._width;\n\t}\n\n\tget ratio(): number {\n\t\treturn this._ratio;\n\t}\n\n\tget margin(): number {\n\t\treturn this._margin;\n\t}\n\n\tadd( name: string, width: number, height: number, path: string ): boolean {\n\t\tconst frames = this._frames;\n\t\tif( ! ( name in frames ) ) {\n\t\t\t// Position\n\t\t\tconst margin = this._margin;\n\t\t\tlet x = this._nextX;\n\t\t\tlet y = this._nextY;\n\t\t\tif( this._width <= x + width ) {\n\t\t\t\tx = 0;\n\t\t\t\ty = this._nextY + this._height + margin;\n\t\t\t\tthis._height = height;\n\t\t\t\tthis._nextY = y;\n\t\t\t} else {\n\t\t\t\tthis._height = Math.max( this._height, height );\n\t\t\t}\n\t\t\tthis._nextX = x + width + margin;\n\n\t\t\t// Frame\n\t\t\tframes[ name ] = new Rectangle( x, y, width, height );\n\n\t\t\t// Svg\n\t\t\tconst ratio = this._ratio;\n\t\t\tthis._svg += `<g transform=\"translate(${x * ratio},${y * ratio})\">${path}</g>`;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tget mappings(): { [ name: string ]: Texture } {\n\t\treturn this.build();\n\t}\n\n\tbuild( options?: UtilSvgAtlasBuilderBuildOptions ): { [ name: string ]: Texture } {\n\t\tlet built = this._built;\n\t\tif( built == null || (options && options.force) ) {\n\t\t\tconst resolution = settings.RESOLUTION;\n\t\t\tconst width = this._width;\n\t\t\tconst height = Math.pow( 2, Math.ceil( Math.log( this._nextY + this._height ) / Math.LN2 ) );\n\t\t\tconst realWidth = width * resolution;\n\t\t\tconst realHeight = height * resolution;\n\t\t\tconst ratio = this._ratio;\n\t\t\tconst attrWidth = `width=\"${realWidth}\"`;\n\t\t\tconst attrHeight = `height=\"${realHeight}\"`;\n\t\t\tconst attrViewBox = `viewBox=\"0 0 ${width * ratio} ${height * ratio}\"`;\n\t\t\tconst attrXmlns = `xmlns=\"http://www.w3.org/2000/svg\"`;\n\t\t\tconst url = utilToSvgUrl( `<svg ${attrWidth} ${attrHeight} ${attrViewBox} ${attrXmlns}>${this._svg}</svg>` );\n\t\t\tconst scaleMode = (options && options.scaling != null ? options.scaling : SCALE_MODES.NEAREST);\n\t\t\tconst baseTexture = BaseTexture.from( url, {\n\t\t\t\tresolution,\n\t\t\t\tscaleMode\n\t\t\t});\n\t\t\tconst frames = this._frames;\n\t\t\tbuilt = this._built = {};\n\t\t\tfor( const name in frames ) {\n\t\t\t\tbuilt[ name ] = new Texture( baseTexture, frames[ name ] );\n\t\t\t}\n\t\t}\n\t\treturn built;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint, Rectangle } from \"pixi.js\";\n\nexport interface UtilAttachTarget {\n\treadonly width: number;\n\treadonly height: number;\n\treadonly position: IPoint;\n}\n\nexport enum UtilAttachAlign {\n\tTOP,\n\tLEFT,\n\tRIGHT,\n\tBOTTOM\n}\n\nexport class UtilAttach {\n\tstatic attach(\n\t\ttarget: UtilAttachTarget,\n\t\tbounds: Rectangle,\n\t\toffsetX: number, offsetY: number,\n\t\tclippingWidth: number, clippingHeight: number,\n\t\talign: UtilAttachAlign\n\t): void {\n\t\tconst width = target.width;\n\t\tconst height = target.height;\n\t\tlet x = 0;\n\t\tlet y = 0;\n\t\tswitch( align ) {\n\t\tcase UtilAttachAlign.LEFT:\n\t\t\tx = bounds.left - width - offsetX;\n\t\t\tif( x < 0 ) {\n\t\t\t\tx = bounds.right + offsetX;\n\t\t\t\tif( clippingWidth < x + width ) {\n\t\t\t\t\tx = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\ty = this.adjust( bounds.top, height, clippingHeight );\n\t\t\tbreak;\n\t\tcase UtilAttachAlign.TOP:\n\t\t\tx = this.adjust( bounds.left, width, clippingWidth );\n\t\t\ty = bounds.top - height - offsetY;\n\t\t\tif( y < 0 ) {\n\t\t\t\ty = bounds.bottom + offsetY;\n\t\t\t\tif( clippingHeight < y + height ) {\n\t\t\t\t\ty = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase UtilAttachAlign.RIGHT:\n\t\t\tx = bounds.right + offsetX;\n\t\t\tif( clippingWidth < x + width ) {\n\t\t\t\tx = bounds.left - width - offsetX;\n\t\t\t\tif( x < 0 ) {\n\t\t\t\t\tx = clippingWidth - width;\n\t\t\t\t}\n\t\t\t}\n\t\t\ty = this.adjust( bounds.top, height, clippingHeight );\n\t\t\tbreak;\n\t\tcase UtilAttachAlign.BOTTOM:\n\t\t\tx = this.adjust( bounds.left, width, clippingWidth );\n\t\t\ty = bounds.bottom + offsetY;\n\t\t\tif( clippingHeight < y + height ) {\n\t\t\t\ty = bounds.top - height - offsetY;\n\t\t\t\tif( y < 0 ) {\n\t\t\t\t\ty = clippingHeight - height;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\ttarget.position.set( x, y );\n\t}\n\n\tstatic adjust( position: number, size: number, clippingSize: number ): number {\n\t\tif( position < 0 ) {\n\t\t\tif( clippingSize < position + size ) {\n\t\t\t\treturn (clippingSize - size) * 0.5;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t} else if( clippingSize < position + size ) {\n\t\t\tif( clippingSize < size ) {\n\t\t\t\treturn (clippingSize - size) * 0.5;\n\t\t\t} else {\n\t\t\t\treturn clippingSize - size;\n\t\t\t}\n\t\t}\n\t\treturn position;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum DMouseModifier {\n\tNONE\t\t= 0,\n\tCTRL\t\t= 1,\n\tSHIFT\t\t= 2,\n\tALT\t\t\t= 4,\n\n\tAND\t\t\t= 8,\n\tOR\t\t\t= 16,\n\n\tNOT_NONE\t= CTRL | SHIFT | ALT | OR\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction, Point } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DBase } from \"../d-base\";\nimport { UtilPointerEvent } from \"./util-pointer-event\";\n\nexport type UtilClickOutsideOnClick = ( e: InteractionEvent ) => void;\n\nexport class UtilClickOutside {\n\tprotected static point = new Point();\n\n\tstatic apply( target: DBase<any, any>, onClick: UtilClickOutsideOnClick ) {\n\t\ttarget.on( UtilPointerEvent.down, ( e: InteractionEvent ): void => {\n\t\t\tif( e.target === target ) {\n\t\t\t\tconst point = this.point;\n\t\t\t\tpoint.copyFrom( e.data.global );\n\t\t\t\ttarget.toLocal( point, undefined, point, true );\n\t\t\t\tconst x = point.x;\n\t\t\t\tconst y = point.y;\n\t\t\t\tif( x < 0 || y < 0 || target.width < x || target.height < y ) {\n\t\t\t\t\tonClick( e );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\n\nconst getSelection = ( element: Element ): Selection | null => {\n\tconst selection = document.getSelection();\n\tif( selection ) {\n\t\tconst range = document.createRange();\n\t\trange.selectNodeContents( element );\n\t\tselection.removeAllRanges();\n\t\tselection.addRange( range );\n\t}\n\treturn selection;\n};\n\nconst toClipboardData = ( e: ClipboardEvent ): DataTransfer => {\n\treturn e.clipboardData || (window as any).clipboardData;\n};\n\nconst copyUsingDiv = ( text: string ): boolean => {\n\tconst div = document.createElement( \"div\" );\n\tdiv.setAttribute( \"style\", \"-webkit-user-select: text !important\" );\n\tdiv.textContent = \"Dummy\";\n\tdocument.body.appendChild( div );\n\tconst selection = getSelection( div );\n\tlet result = false;\n\tif( selection ) {\n\t\tconst handler = ( e: ClipboardEvent ): void => {\n\t\t\tif( e.target === div ) {\n\t\t\t\tconst clipboardData = toClipboardData( e );\n\t\t\t\tclipboardData.setData( \"text/plain\", text );\n\t\t\t\tresult = ( clipboardData.getData( \"text/plain\" ) === text );\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t};\n\t\tdocument.addEventListener( \"copy\", handler );\n\t\ttry {\n\t\t\tdocument.execCommand( \"copy\" );\n\t\t} finally {\n\t\t\tdocument.removeEventListener( \"copy\", handler );\n\t\t}\n\t\tselection.removeAllRanges();\n\t}\n\tdocument.body.removeChild( div );\n\treturn result;\n};\n\nconst copyUsingSpan = ( text: string ): boolean => {\n\tconst div = document.createElement( \"div\" );\n\tdiv.setAttribute( \"style\", \"-webkit-user-select: text !important\" );\n\tconst span = document.createElement( \"span\" );\n\tspan.innerText = text;\n\tconst root: Node = ( div.attachShadow ? div.attachShadow({ mode: \"open\" }) : div );\n\troot.appendChild( span );\n\tdocument.body.appendChild( div );\n\tlet result = false;\n\tconst selection = getSelection( div );\n\tif( selection ) {\n\t\tresult = document.execCommand( \"copy\" );\n\t\tselection.removeAllRanges();\n\t}\n\tdocument.body.removeChild( div );\n\treturn result;\n};\n\nconst copyUsingWindow = ( window: Window, text: string ): boolean => {\n\tif( typeof ClipboardEvent === \"undefined\" ) {\n\t\tconst clipboardData = (window as any).clipboardData;\n\t\tif( typeof clipboardData !== \"undefined\" && typeof clipboardData.setData !== \"undefined\" ) {\n\t\t\tclipboardData.setData( \"Text\", text );\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nexport class UtilClipboard extends utils.EventEmitter {\n\tconstructor() {\n\t\tsuper();\n\n\t\tconst element = document.body;\n\t\telement.addEventListener( \"copy\", ( e: ClipboardEvent ): void => {\n\t\t\tif( e.target === element ) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tthis.emit( \"copy\", toClipboardData( e ) );\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener( \"cut\", ( e: ClipboardEvent ): void => {\n\t\t\tif( e.target === element ) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tthis.emit( \"cut\", toClipboardData( e ) );\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener( \"paste\", ( e: ClipboardEvent ): void => {\n\t\t\tif( e.target === element ) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tthis.emit( \"paste\", toClipboardData( e ) );\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic copy( text: string ): void {\n\t\tconst clipboard = navigator.clipboard;\n\t\tif( clipboard && clipboard.writeText ) {\n\t\t\tclipboard.writeText( text );\n\t\t} else {\n\t\t\tif( ! copyUsingWindow( window, text ) ) {\n\t\t\t\tif( ! copyUsingDiv( text ) ) {\n\t\t\t\t\tif( navigator.userAgent.indexOf( \"Edge\" ) < 0 ) {\n\t\t\t\t\t\tcopyUsingSpan( text );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class UtilDragEasingHistory {\n\tdx: number;\n\tdy: number;\n\tds: number;\n\tdt: number;\n\n\tconstructor( dx: number, dy: number, ds: number, dt: number ) {\n\t\tthis.dx = dx;\n\t\tthis.dy = dy;\n\t\tthis.ds = ds;\n\t\tthis.dt = dt;\n\t}\n\n\tset( dx: number, dy: number, ds: number, dt: number ) {\n\t\tthis.dx = dx;\n\t\tthis.dy = dy;\n\t\tthis.ds = ds;\n\t\tthis.dt = dt;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class DAnimationTimings {\n\tstatic LINEAR( t: number ): number {\n\t\treturn t;\n\t}\n\n\tstatic ELASTIC( t: number ): number {\n\t\treturn t * ( 3 * (1 - t) * (1 - t) + t * ( 3 * (1 - t) + t ) );\n\t}\n\n\tstatic QUAD_IN_OUT( t: number ): number {\n\t\treturn t < 0.5 ? 2 * t * t : -1 + ( 4 - 2 * t ) * t;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\nimport { DAnimation, DAnimationOnEnd, DAnimationOnTime, DAnimationOptions, DAnimationTiming } from \"./d-animation\";\nimport { DAnimationTimings } from \"./d-animation-timings\";\nimport { DBase } from \"./d-base\";\n\nexport class DAnimationBase extends utils.EventEmitter implements DAnimation {\n\tprotected _id: number | null;\n\tprotected _startTime: number;\n\tprotected _duration: number;\n\tprotected _durationInverse: number;\n\tprotected _reverse: boolean;\n\tprotected _onTime: DAnimationOnTime | undefined;\n\tprotected _onTimeBaseBound: () => void;\n\tprotected _onStart: DAnimationOnEnd | undefined;\n\tprotected _onEnd: DAnimationOnEnd | undefined;\n\tprotected _timing: DAnimationTiming;\n\tprotected _target: DBase<any, any> | null;\n\n\tconstructor( options?: DAnimationOptions ) {\n\t\tsuper();\n\n\t\tthis._id = null;\n\t\tthis._target = null;\n\t\tthis._startTime = 0;\n\t\tthis._duration = ( options != null && options.duration != null ? options.duration : 200 );\n\t\tthis._durationInverse = 1 / Math.max( 1, this._duration );\n\t\tthis._reverse = false;\n\t\tthis._onTime = ( options != null ? options.onTime : undefined );\n\t\tthis._onTimeBaseBound = () => {\n\t\t\tthis.onTimeBase();\n\t\t};\n\t\tthis._onStart = ( options != null ? options.onStart : undefined );\n\t\tthis._onEnd = ( options != null ? options.onEnd : undefined );\n\t\tthis._timing = ( options != null && options.timing != null ? options.timing : DAnimationTimings.ELASTIC );\n\t}\n\n\tget target(): DBase<any, any> | null {\n\t\treturn this._target;\n\t}\n\n\tset target( target: DBase<any, any> | null ) {\n\t\tthis._target = target;\n\t}\n\n\tget duration(): number {\n\t\treturn this._duration;\n\t}\n\n\tset duration( duration: number ) {\n\t\tthis._duration = duration;\n\t\tthis._durationInverse = 1 / Math.max( 1, duration );\n\t}\n\n\tstart( reverse: boolean = false ): void {\n\t\tthis.stop();\n\t\tthis._startTime = Date.now();\n\t\tthis._reverse = reverse;\n\t\tthis._id = window.setTimeout( this._onTimeBaseBound, 0 );\n\n\t\t// onStart\n\t\tthis.onStart( reverse );\n\n\t\t// onTime\n\t\tconst duration = this._duration;\n\t\tconst time = this.toTime( reverse ? duration : 0 );\n\t\tthis.onTime( time, reverse, 0 );\n\t}\n\n\tprotected onStart( isReverse: boolean ): void {\n\t\tconst onStart = this._onStart;\n\t\tif( onStart != null ) {\n\t\t\tonStart( isReverse, this );\n\t\t}\n\t\tthis.emit( \"start\", isReverse, this );\n\t}\n\n\tprotected onTime( time: number, isReverse: boolean, elapsedTime: number ): void {\n\t\tconst onTime = this._onTime;\n\t\tif( onTime != null ) {\n\t\t\tonTime( time, isReverse, elapsedTime, this );\n\t\t}\n\t\tthis.emit( \"time\", time, isReverse, elapsedTime, this );\n\t}\n\n\tprotected onEnd( isReverse: boolean ): void {\n\t\tconst onEnd = this._onEnd;\n\t\tif( onEnd != null ) {\n\t\t\tonEnd( isReverse, this );\n\t\t}\n\t\tthis.emit( \"end\", isReverse, this );\n\t}\n\n\tisStarted(): boolean {\n\t\treturn (this._id != null);\n\t}\n\n\tisReverse(): boolean {\n\t\treturn this._reverse;\n\t}\n\n\tprotected onTimeBase(): void {\n\t\tconst id = this._id;\n\t\tif( id != null ) {\n\t\t\tthis._id = null;\n\t\t\tconst elapsedTime = Date.now() - this._startTime;\n\t\t\tconst duration = this._duration;\n\t\t\tconst reverse = this._reverse;\n\t\t\tif( elapsedTime < duration ) {\n\t\t\t\tthis._id = window.setTimeout( this._onTimeBaseBound, 0 );\n\n\t\t\t\t// OnTime\n\t\t\t\tconst time = this.toTime( reverse ? duration - elapsedTime : elapsedTime );\n\t\t\t\tthis.onTime( time, reverse, elapsedTime );\n\t\t\t} else {\n\t\t\t\t// OnTime\n\t\t\t\tconst time = this.toTime( reverse ? 0 : duration );\n\t\t\t\tthis.onTime( time, reverse, elapsedTime );\n\n\t\t\t\t// OnEnd\n\t\t\t\tthis.onEnd( reverse );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected toTime( elapsedTime: number ): number {\n\t\treturn this._timing( elapsedTime * this._durationInverse, this );\n\t}\n\n\tstop(): void {\n\t\tconst id = this._id;\n\t\tif( id != null ) {\n\t\t\tthis._id = null;\n\t\t\twindow.clearTimeout( id );\n\t\t}\n\t}\n\n\tend(): void {\n\t\tconst id = this._id;\n\t\tif( id != null ) {\n\t\t\tthis._id = null;\n\t\t\twindow.clearTimeout( id );\n\n\t\t\t// OnTime\n\t\t\tconst reverse = this._reverse;\n\t\t\tconst elapsedTime = Date.now() - this._startTime;\n\t\t\tconst duration = this._duration;\n\t\t\tconst time = this.toTime( reverse ? 0 : duration );\n\t\t\tthis.onTime( time, reverse, elapsedTime );\n\n\t\t\t// OnEnd\n\t\t\tthis.onEnd( reverse );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAnimation } from \"../d-animation\";\nimport { DAnimationBase } from \"../d-animation-base\";\nimport { DAnimationTimings } from \"../d-animation-timings\";\nimport { UtilDragEasingHistory } from \"./util-drag-easing-history\";\n\nexport interface UtilDragEasingOptions {\n\tduration?: {\n\t\tposition?: number;\n\t\tscale?: number;\n\t};\n\ton: {\n\t\tmove: ( dx: number, dy: number, ds: number, time: number ) => void;\n\t};\n}\n\nexport class UtilDragEasing {\n\tprotected static HISTORY_CAPACITY = 5;\n\tprotected _histories: UtilDragEasingHistory[];\n\tprotected _historiesSorted: UtilDragEasingHistory[];\n\tprotected _historyBegin: number;\n\tprotected _historyEnd: number;\n\tprotected _animation: DAnimation;\n\tprotected _dx: number;\n\tprotected _dy: number;\n\tprotected _dt: number;\n\tprotected _ds: number;\n\tprotected _durationPosition: number;\n\tprotected _durationScale: number;\n\tprotected _onMove: ( dx: number, dy: number, ds: number, time: number ) => void;\n\n\tconstructor( options: UtilDragEasingOptions ) {\n\t\tthis._histories = [];\n\t\tthis._historiesSorted = [];\n\t\tthis._historyBegin = 0;\n\t\tthis._historyEnd = -1;\n\t\tthis._dx = 0;\n\t\tthis._dy = 0;\n\t\tthis._ds = 0;\n\t\tthis._dt = 0;\n\t\tthis._animation = new DAnimationBase({\n\t\t\tonTime: ( t: number ): void => {\n\t\t\t\tthis.onEase( t );\n\t\t\t},\n\t\t\ttiming: DAnimationTimings.LINEAR,\n\t\t\tduration: 1000\n\t\t});\n\t\tconst duration = options && options.duration;\n\t\tif( duration ) {\n\t\t\tthis._durationPosition = ( duration.position != null ? duration.position : 1 );\n\t\t\tthis._durationScale = ( duration.scale != null ? duration.scale : 1 );\n\t\t} else {\n\t\t\tthis._durationPosition = 1;\n\t\t\tthis._durationScale = 1;\n\t\t}\n\t\tthis._onMove = options.on.move;\n\t}\n\n\tonStart(): void {\n\t\t// History\n\t\tconst histories = this._histories;\n\t\tfor( let i = histories.length, imax = UtilDragEasing.HISTORY_CAPACITY; i < imax; ++i ) {\n\t\t\thistories.push( new UtilDragEasingHistory( 0, 0, 1, 0 ) );\n\t\t}\n\t\tthis._historyBegin = 0;\n\t\tthis._historyEnd = -1;\n\n\t\t// Stop animation\n\t\tthis._animation.stop();\n\t}\n\n\tonMove( dx: number, dy: number, ds: number, dt: number ): void {\n\t\tconst capacity = UtilDragEasing.HISTORY_CAPACITY;\n\n\t\tconst oldHistoryEnd = this._historyEnd;\n\t\tconst newHistoryEnd = (oldHistoryEnd + 1) % capacity;\n\t\tthis._historyEnd = newHistoryEnd;\n\n\t\tconst oldHistoryBegin = this._historyBegin;\n\t\tif( newHistoryEnd < oldHistoryEnd || (0 <= oldHistoryEnd && oldHistoryEnd < oldHistoryBegin) ) {\n\t\t\tthis._historyBegin = (oldHistoryBegin + 1) % capacity;\n\t\t}\n\n\t\tthis._histories[ newHistoryEnd ].set( dx, dy, ds, dt );\n\t}\n\n\tprotected updateHistoriesSorted( dt: number ): number {\n\t\tconst unsorted = this._histories;\n\t\tconst sorted = this._historiesSorted;\n\t\tconst begin = this._historyBegin;\n\t\tconst end = this._historyEnd;\n\t\tconst length = unsorted.length;\n\t\tconst threshold = 160;\n\t\tif( end < 0 ) {\n\t\t\tsorted.length = 0;\n\t\t\treturn dt;\n\t\t} else if( end < begin ) {\n\t\t\tlet total = dt;\n\t\t\tsorted.length = 0;\n\t\t\tfor( let i = end; 0 <= i; --i ) {\n\t\t\t\tconst history = unsorted[ i ];\n\t\t\t\tif( total + history.dt < threshold ) {\n\t\t\t\t\ttotal += history.dt;\n\t\t\t\t\tsorted.push( history );\n\t\t\t\t} else {\n\t\t\t\t\treturn total;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor( let i = length - 1; begin <= i; --i ) {\n\t\t\t\tconst history = unsorted[ i ];\n\t\t\t\tif( total + history.dt < threshold ) {\n\t\t\t\t\ttotal += history.dt;\n\t\t\t\t\tsorted.push( history );\n\t\t\t\t} else {\n\t\t\t\t\treturn total;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn total;\n\t\t} else {\n\t\t\tlet total = dt;\n\t\t\tsorted.length = 0;\n\t\t\tfor( let i = end; begin <= i; --i ) {\n\t\t\t\tconst history = unsorted[ i ];\n\t\t\t\tif( total + history.dt < threshold ) {\n\t\t\t\t\ttotal += history.dt;\n\t\t\t\t\tsorted.push( history );\n\t\t\t\t} else {\n\t\t\t\t\treturn total;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn total;\n\t\t}\n\t}\n\n\tonEnd( ldt: number ): void {\n\t\tconst adt = this.updateHistoriesSorted( ldt );\n\t\tconst sorted = this._historiesSorted;\n\t\tconst sortedLength = sorted.length;\n\t\tif( 0 < sortedLength ) {\n\t\t\tlet dx = 0;\n\t\t\tlet dy = 0;\n\t\t\tlet ds = 0;\n\t\t\tlet dt = 0;\n\t\t\tfor( let i = 0; i < sortedLength; ++i ) {\n\t\t\t\tconst history = sorted[ i ];\n\t\t\t\tdx += history.dx;\n\t\t\t\tdy += history.dy;\n\t\t\t\tds += history.ds;\n\t\t\t\tdt += history.dt;\n\t\t\t}\n\t\t\tconst w = (1 - ldt / adt) / sortedLength;\n\t\t\tdx *= w;\n\t\t\tdy *= w;\n\t\t\tds = 1 + (ds - sortedLength) * w;\n\t\t\tdt *= w;\n\t\t\tthis._dx = dx;\n\t\t\tthis._dy = dy;\n\t\t\tthis._ds = ds;\n\t\t\tthis._dt = dt;\n\n\t\t\t// Start animation\n\t\t\tconst d0 = this._durationPosition * 40 * Math.sqrt( dx * dx + dy * dy );\n\t\t\tconst d1 = this._durationScale * 10000 * Math.abs( ds - 1 );\n\t\t\tconst animation = this._animation;\n\t\t\tanimation.duration = Math.max( d0, d1 );\n\t\t\tanimation.start();\n\t\t}\n\t}\n\n\tprotected onEase( time: number ): void {\n\t\tconst w = 1 - time;\n\t\tthis._onMove(\n\t\t\tthis._dx * w,\n\t\t\tthis._dy * w,\n\t\t\t1 + ( this._ds - 1 ) * w,\n\t\t\ttime\n\t\t);\n\t}\n\n\tstop(): void {\n\t\tthis._animation.stop();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction } from \"pixi.js\";\nimport { DMouseModifier } from \"./d-mouse-modifier\";\n\nexport type DMouseModifierEvent = WheelEvent | MouseEvent | TouchEvent | interaction.InteractionEvent;\n\nexport class DMouseModifiers {\n\tstatic from( e: DMouseModifierEvent ): DMouseModifier {\n\t\tconst oe = ( \"data\" in e ? e.data.originalEvent : e );\n\t\treturn ( oe.ctrlKey ? DMouseModifier.CTRL : DMouseModifier.NONE ) |\n\t\t\t( oe.altKey ? DMouseModifier.ALT : DMouseModifier.NONE ) |\n\t\t\t( oe.shiftKey ? DMouseModifier.SHIFT : DMouseModifier.NONE );\n\t}\n\n\tstatic match( e: DMouseModifierEvent, modifier: DMouseModifier ): boolean {\n\t\tif( modifier & DMouseModifier.OR ) {\n\t\t\treturn !! (DMouseModifiers.from( e ) & modifier);\n\t\t} else {\n\t\t\treturn DMouseModifiers.from( e ) === modifier;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplications } from \"../d-applications\";\n\nexport enum UtilFileAs {\n\tTEXT,\n\tDATA_URL,\n\tBINARY_STRING,\n\tARRAY_BUTTER\n}\n\nexport interface UtilFileFacade {\n\temit( name: string, ...args: any[] ): void;\n}\n\nexport class UtilFileOpener {\n\tprotected _input: HTMLInputElement | null;\n\tprotected _as: UtilFileAs;\n\tprotected _facade: UtilFileFacade;\n\n\tconstructor( as: UtilFileAs, facade: UtilFileFacade ) {\n\t\tthis._input = null;\n\t\tthis._as = as;\n\t\tthis._facade = facade;\n\t}\n\n\topen() {\n\t\tconst input = this.getOrCreateInput();\n\t\tif( input != null ) {\n\t\t\tinput.click();\n\t\t} else {\n\t\t\tthis.onCancel();\n\t\t}\n\t}\n\n\tprotected getOrCreateInput(): HTMLInputElement | null {\n\t\tif( \"FileReader\" in window && this._input == null ) {\n\t\t\tconst input = this._input = document.createElement( \"input\" );\n\t\t\tinput.setAttribute( \"type\", \"file\" );\n\t\t\tinput.setAttribute( \"style\", \"display:none\" );\n\t\t\tinput.addEventListener( \"change\", ( e: Event ): void => {\n\t\t\t\tthis.onInputChange( input );\n\t\t\t\tinput.value = \"\";\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\te.preventDefault();\n\t\t\t});\n\t\t\tDApplications.getInstance().view.appendChild( input );\n\t\t}\n\t\treturn this._input;\n\t}\n\n\tprotected onInputChange( input: HTMLInputElement ) {\n\t\tconst files = input.files;\n\t\tif( files != null && 0 < files.length ) {\n\t\t\tconst file = files[ 0 ];\n\t\t\tconst fileReader = new FileReader();\n\t\t\tfileReader.onload = ( e: ProgressEvent ) => {\n\t\t\t\tif( e.target != null ) {\n\t\t\t\t\tconst target = e.target as any;\n\t\t\t\t\tthis.onOpen( target.result );\n\t\t\t\t}\n\t\t\t};\n\t\t\tfileReader.onabort = ( e: ProgressEvent ) => {\n\t\t\t\tthis.onAboart( e );\n\t\t\t};\n\t\t\tswitch( this._as ) {\n\t\t\tcase UtilFileAs.TEXT:\n\t\t\t\tfileReader.readAsText( file );\n\t\t\t\tbreak;\n\t\t\tcase UtilFileAs.DATA_URL:\n\t\t\t\tfileReader.readAsDataURL( file );\n\t\t\t\tbreak;\n\t\t\tcase UtilFileAs.BINARY_STRING:\n\t\t\t\tfileReader.readAsBinaryString( file );\n\t\t\t\tbreak;\n\t\t\tcase UtilFileAs.ARRAY_BUTTER:\n\t\t\t\tfileReader.readAsArrayBuffer( file );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tfileReader.readAsText( file );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.onCancel();\n\t\t}\n\t}\n\n\tprotected onOpen( result: unknown ): void {\n\t\tconst facade = this._facade;\n\t\tfacade.emit( \"open\", result, facade );\n\t}\n\n\tprotected onAboart( e: ProgressEvent ): void {\n\t\tconst facade = this._facade;\n\t\tfacade.emit( \"abort\", e, facade );\n\t}\n\n\tprotected onCancel(): void {\n\t\tconst facade = this._facade;\n\t\tfacade.emit( \"cancel\", facade );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction, Point } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DApplications } from \"../d-applications\";\nimport { DBase } from \"../d-base\";\nimport { DMouseModifier } from \"../d-mouse-modifier\";\nimport { DMouseModifiers } from \"../d-mouse-modifiers\";\nimport { UtilDragEasing, UtilDragEasingOptions } from \"./util-drag-easing\";\nimport { utilIsNumber } from \"./util-is-number\";\nimport { UtilPointerEvent } from \"./util-pointer-event\";\n\nexport type UtilDragOnMove = ( dx: number, dy: number, x: number, y: number, ds: number ) => void;\nexport type UtilDragOnStart = () => void;\nexport type UtilDragOnEnd = () => void;\nexport type UtilDragChecker = ( e: InteractionEvent, modifier: DMouseModifier, target: DBase ) => boolean;\n\ninterface UtilDragOptionsEasingDuration {\n\tduration?: number | {\n\t\tposition?: number,\n\t\tscale?: number\n\t};\n}\n\nexport interface UtilDragOptions {\n\ttarget: DBase;\n\ttouch?: boolean;\n\tmodifier?: DMouseModifier;\n\tchecker?: {\n\t\tstart?: UtilDragChecker;\n\t\tmove?: UtilDragChecker;\n\t};\n\teasing?: boolean | UtilDragOptionsEasingDuration;\n\ton?: {\n\t\tstart?: UtilDragOnStart;\n\t\tmove?: UtilDragOnMove;\n\t\tend?: UtilDragOnEnd;\n\t};\n}\n\nconst toEasingOptions = (\n\toptions: true | UtilDragOptionsEasingDuration | undefined,\n\tonMove: ( dx: number, dy: number, ds: number, time: number ) => void\n): UtilDragEasingOptions => {\n\tif( options == null || options === true ) {\n\t\treturn {\n\t\t\ton: {\n\t\t\t\tmove: onMove\n\t\t\t}\n\t\t};\n\t} else {\n\t\tconst duration = options.duration;\n\t\tif( utilIsNumber( duration ) ) {\n\t\t\treturn {\n\t\t\t\tduration: {\n\t\t\t\t\tposition: duration,\n\t\t\t\t\tscale: duration\n\t\t\t\t},\n\t\t\t\ton: {\n\t\t\t\t\tmove: onMove\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tduration,\n\t\t\t\ton: {\n\t\t\t\t\tmove: onMove\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n};\n\nconst toChecker = ( options?: UtilDragOptions ): { start: UtilDragChecker, move: UtilDragChecker } => {\n\tconst checker = options && options.checker;\n\tconst defaultChecker = DMouseModifiers.match;\n\tif( checker ) {\n\t\treturn {\n\t\t\tstart: checker.start || defaultChecker,\n\t\t\tmove: checker.move || defaultChecker\n\t\t};\n\t}\n\treturn {\n\t\tstart: defaultChecker,\n\t\tmove: defaultChecker\n\t};\n};\n\nexport class UtilDrag {\n\tprotected static EPSILON = 0.00001;\n\tprotected _target: DBase<any, any>;\n\tprotected _onDownBound: ( e: InteractionEvent ) => void;\n\tprotected _onMoveBound: ( e: InteractionEvent ) => void;\n\tprotected _onEndBound: ( e: InteractionEvent ) => void;\n\tprotected _onStart?: UtilDragOnStart;\n\tprotected _onMove?: UtilDragOnMove;\n\tprotected _onEnd?: UtilDragOnEnd;\n\tprotected _down: string;\n\tprotected _move: string;\n\tprotected _up: string;\n\tprotected _easing?: UtilDragEasing;\n\tprotected _modifier: DMouseModifier;\n\tprotected _checker: { start: UtilDragChecker, move: UtilDragChecker };\n\tprotected _interactionManager: interaction.InteractionManager;\n\tprotected _center: Point;\n\tprotected _scale: number;\n\tprotected _scalingCenter: Point;\n\tprotected _time: number;\n\n\tconstructor( options: UtilDragOptions ) {\n\t\tconst target = this._target = options.target;\n\t\tconst on = options.on;\n\t\tif( on ) {\n\t\t\tthis._onStart = on.start;\n\t\t\tthis._onMove = on.move;\n\t\t\tthis._onEnd = on.end;\n\t\t}\n\t\tthis._modifier = (options && options.modifier) || DMouseModifier.NONE;\n\t\tthis._checker = toChecker( options );\n\t\tthis._interactionManager = DApplications.getInstance().renderer.plugins.interaction;\n\t\tthis._center = new Point();\n\t\tthis._scale = 1;\n\t\tthis._scalingCenter = new Point();\n\t\tthis._time = 0;\n\n\t\tconst easing = options.easing;\n\t\tif( easing == null || easing !== false ) {\n\t\t\tconst onEasingMoveBound = ( dx: number, dy: number, ds: number, time: number ): void => {\n\t\t\t\tthis.onEasingMove( dx, dy, ds, time );\n\t\t\t};\n\t\t\tthis._easing = new UtilDragEasing( toEasingOptions( easing, onEasingMoveBound ) );\n\t\t}\n\n\t\tthis._onDownBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onDown( e );\n\t\t};\n\n\t\tthis._onMoveBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onMove( e );\n\t\t};\n\n\t\tthis._onEndBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onEnd( e );\n\t\t};\n\n\t\tif( options.touch ) {\n\t\t\tthis._down = \"touchstart\";\n\t\t\tthis._move = \"touchmove\";\n\t\t\tthis._up = \"touchend\";\n\t\t} else {\n\t\t\tthis._down = UtilPointerEvent.down;\n\t\t\tthis._move = UtilPointerEvent.move;\n\t\t\tthis._up = UtilPointerEvent.up;\n\t\t}\n\n\t\ttarget.on( this._down, this._onDownBound );\n\t}\n\n\tprotected calcCenterAndScale( e: InteractionEvent, center: Point ): number {\n\t\tconst oe = e.data.originalEvent;\n\t\tconst global = e.data.global;\n\t\tif( \"touches\" in oe ) {\n\t\t\tconst touches = oe.touches;\n\t\t\tconst touchesLength = touches.length;\n\t\t\tif( 0 < touchesLength ) {\n\t\t\t\t// Update the center\n\t\t\t\tconst first = touches[ 0 ];\n\t\t\t\tlet centerX = first.clientX;\n\t\t\t\tlet centerY = first.clientY;\n\t\t\t\tfor( let i = 1, imax = touches.length; i < imax; ++i ) {\n\t\t\t\t\tconst touch = touches[ i ];\n\t\t\t\t\tcenterX += touch.clientX;\n\t\t\t\t\tcenterY += touch.clientY;\n\t\t\t\t}\n\t\t\t\tcenterX /= touchesLength;\n\t\t\t\tcenterY /= touchesLength;\n\t\t\t\tthis._interactionManager.mapPositionToPoint( center, centerX, centerY );\n\n\t\t\t\tif( 1 < touchesLength ) {\n\t\t\t\t\t// Calculate the maximum distance from the center\n\t\t\t\t\tlet squareDistance = 0;\n\t\t\t\t\tfor( let i = 1, imax = touches.length; i < imax; ++i ) {\n\t\t\t\t\t\tconst touch = touches[ i ];\n\t\t\t\t\t\tconst dx = touch.clientX - centerX;\n\t\t\t\t\t\tconst dy = touch.clientY - centerY;\n\t\t\t\t\t\tsquareDistance = Math.max( squareDistance, dx * dx + dy * dy );\n\t\t\t\t\t}\n\t\t\t\t\treturn Math.sqrt( squareDistance );\n\t\t\t\t} else {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcenter.copyFrom( global );\n\t\treturn 0;\n\t}\n\n\tprotected onDown( e: InteractionEvent ): void {\n\t\tconst target = this._target;\n\t\tif( this._checker.start( e, this._modifier, target ) ) {\n\t\t\te.stopPropagation();\n\n\t\t\t// Update the center\n\t\t\tconst center = this._center;\n\t\t\tthis._scale = this.calcCenterAndScale( e, center );\n\n\t\t\t//\n\t\t\tif( ! target.isDragging() ) {\n\t\t\t\ttarget.setDragging( true );\n\n\t\t\t\t//\n\t\t\t\tthis._time = e.data.originalEvent.timeStamp;\n\n\t\t\t\t// Easing util\n\t\t\t\tconst easing = this._easing;\n\t\t\t\tif( easing ) {\n\t\t\t\t\teasing.onStart();\n\t\t\t\t}\n\n\t\t\t\t// User-defined handler\n\t\t\t\tconst onStart = this._onStart;\n\t\t\t\tif( onStart != null ) {\n\t\t\t\t\tonStart();\n\t\t\t\t}\n\n\t\t\t\t// Event handler\n\t\t\t\tconst interactionManager = this._interactionManager;\n\t\t\t\tinteractionManager.on( this._move, this._onMoveBound );\n\t\t\t\tinteractionManager.on( this._up, this._onEndBound );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onMove( e: InteractionEvent ): void {\n\t\tconst target = this._target;\n\t\tif( this._checker.move( e, this._modifier, target ) ) {\n\t\t\tif( target.isDragging() ) {\n\t\t\t\t// Update the center\n\t\t\t\tconst center = this._center;\n\t\t\t\tconst centerX = center.x;\n\t\t\t\tconst centerY = center.y;\n\t\t\t\tconst newScale = this.calcCenterAndScale( e, center );\n\t\t\t\tconst oldScale = this._scale;\n\t\t\t\tthis._scale = newScale;\n\t\t\t\tconst oldTime = this._time;\n\t\t\t\tconst newTime = e.data.originalEvent.timeStamp;\n\t\t\t\tthis._time = newTime;\n\n\t\t\t\t// Calculate the position\n\t\t\t\tconst dx = center.x - centerX;\n\t\t\t\tconst dy = center.y - centerY;\n\t\t\t\tconst dt = newTime - oldTime;\n\t\t\t\tconst ds = ( UtilDrag.EPSILON < oldScale ? newScale / oldScale : 1 );\n\n\t\t\t\t// Easing util\n\t\t\t\tconst easing = this._easing;\n\t\t\t\tif( easing ) {\n\t\t\t\t\teasing.onMove( dx, dy, ds, dt );\n\t\t\t\t}\n\n\t\t\t\t// User-defined handler\n\t\t\t\tconst onMove = this._onMove;\n\t\t\t\tif( onMove != null ) {\n\t\t\t\t\tif( dx !== 0 || dy !== 0 || ds !== 1 ) {\n\t\t\t\t\t\tonMove( dx, dy, center.x, center.y, ds );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onEnd( e: InteractionEvent ): void {\n\t\tconst target = this._target;\n\t\tif( target.isDragging() ) {\n\t\t\t// Update the center\n\t\t\tconst center = this._center;\n\t\t\tthis._scalingCenter.copyFrom( center );\n\t\t\tthis._scale = this.calcCenterAndScale( e, center );\n\n\t\t\t// Finalize\n\t\t\tconst oe = e.data.originalEvent;\n\t\t\tif( \"touches\" in oe ? oe.touches.length <= 0 : true ) {\n\t\t\t\ttarget.setDragging( false );\n\n\t\t\t\t// Event handler\n\t\t\t\tconst interactionManager = this._interactionManager;\n\t\t\t\tinteractionManager.off( this._move, this._onMoveBound );\n\t\t\t\tinteractionManager.off( this._up, this._onEndBound );\n\n\t\t\t\t// User-defined handler\n\t\t\t\tconst onEnd = this._onEnd;\n\t\t\t\tif( onEnd != null ) {\n\t\t\t\t\tonEnd();\n\t\t\t\t}\n\n\t\t\t\t// Easing util\n\t\t\t\tconst easing = this._easing;\n\t\t\t\tif( easing ) {\n\t\t\t\t\teasing.onEnd( e.data.originalEvent.timeStamp - this._time );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onEasingMove( dx: number, dy: number, ds: number, time: number ): void {\n\t\tconst onMove = this._onMove;\n\t\tif( onMove != null ) {\n\t\t\tif( dx !== 0 || dy !== 0 || ds !== 1 ) {\n\t\t\t\tconst scalingCenter = this._scalingCenter;\n\t\t\t\tscalingCenter.set(\n\t\t\t\t\tscalingCenter.x + dx,\n\t\t\t\t\tscalingCenter.y + dy\n\t\t\t\t);\n\t\t\t\tonMove( dx, dy, scalingCenter.x, scalingCenter.y, ds );\n\t\t\t}\n\t\t}\n\t}\n\n\tstop(): void {\n\t\tconst easing = this._easing;\n\t\tif( easing ) {\n\t\t\teasing.stop();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplications } from \"../d-applications\";\nimport { DBase } from \"../d-base\";\nimport { UtilExtractorPixels } from \"./util-extractor-pixels\";\n\nexport class UtilExtractor {\n\tstatic toTexture(\n\t\ttarget: DBase, resolution?: number,\n\t\tclear?: boolean, skipUpdateTransform?: boolean\n\t): PIXI.RenderTexture {\n\t\tconst result = PIXI.RenderTexture.create({\n\t\t\twidth: target.width,\n\t\t\theight: target.height,\n\t\t\tscaleMode: PIXI.SCALE_MODES.LINEAR,\n\t\t\tresolution\n\t\t});\n\t\tconst matrix = new PIXI.Matrix(\n\t\t\tundefined, undefined, undefined, undefined,\n\t\t\t-target.position.x, -target.position.y\n\t\t);\n\t\tDApplications.getInstance().renderer.render( target, result, clear, matrix, skipUpdateTransform );\n\t\treturn result;\n\t}\n\n\tstatic toPixels( renderTexture: PIXI.RenderTexture ): UtilExtractorPixels {\n\t\tconst resolution = renderTexture.resolution;\n\t\tconst frame = renderTexture.frame;\n\t\tconst width = Math.floor( frame.width * resolution );\n\t\tconst height = Math.floor( frame.height * resolution );\n\t\tconst pixels = new Uint8Array( 4 * width * height );\n\n\t\tconst renderer = DApplications.getInstance().renderer;\n\t\trenderer.renderTexture.bind( renderTexture );\n\t\tconst gl = (renderer as any).gl;\n\t\tgl.readPixels(\n\t\t\tframe.x * resolution,\n\t\t\tframe.y * resolution,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tgl.RGBA,\n\t\t\tgl.UNSIGNED_BYTE,\n\t\t\tpixels\n\t\t);\n\n\t\treturn {\n\t\t\twidth,\n\t\t\theight,\n\t\t\tarray: pixels\n\t\t};\n\t}\n\n\tstatic toCanvas( pixels: UtilExtractorPixels, scale?: number, ignorePremutipliedAlpha?: boolean ): HTMLCanvasElement {\n\t\tconst width = pixels.width;\n\t\tconst height = pixels.height;\n\t\tconst array = pixels.array;\n\t\tconst canvasRenderTarget = new PIXI.utils.CanvasRenderTarget( width, height, 1 );\n\n\t\tconst imageData = canvasRenderTarget.context.getImageData( 0, 0, width, height );\n\t\tif( ignorePremutipliedAlpha ) {\n\t\t\timageData.data.set( array );\n\t\t} else {\n\t\t\t(PIXI.extract.Extract as any).arrayPostDivide( array, imageData.data );\n\t\t}\n\t\tcanvasRenderTarget.context.putImageData( imageData, 0, 0 );\n\n\t\t// Scale down\n\t\tif( scale != null && scale !== 1 ) {\n\t\t\tcanvasRenderTarget.context.scale( scale, scale );\n\t\t\tcanvasRenderTarget.context.drawImage( canvasRenderTarget.canvas, 0, 0 );\n\t\t\tconst scaledWidth = Math.floor( width * scale );\n\t\t\tconst scaledHeight = Math.floor( height * scale );\n\t\t\tconst scaledImageData = canvasRenderTarget.context.getImageData( 0, 0, scaledWidth, scaledHeight );\n\t\t\tcanvasRenderTarget.resize( scaledWidth, scaledHeight );\n\t\t\tcanvasRenderTarget.context.putImageData( scaledImageData, 0, 0 );\n\t\t}\n\n\t\treturn canvasRenderTarget.canvas;\n\t}\n\n\tstatic toBase64( canvas: HTMLCanvasElement, format?: string, quality?: number ): string {\n\t\treturn canvas.toDataURL( format, quality );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class UtilFileDownloader {\n\tstatic downloadUrl( filename: string, url: string ): void {\n\t\tconst a = document.createElement( \"a\" );\n\t\tif( \"download\" in a ) {\n\t\t\ta.href = url;\n\t\t\ta.setAttribute( \"download\", filename );\n\t\t\ta.style.display = \"none\";\n\t\t\tdocument.body.appendChild( a );\n\t\t\ta.click();\n\t\t\tsetTimeout((): void => {\n\t\t\t\tdocument.body.removeChild( a );\n\t\t\t}, 66);\n\t\t} else {\n\t\t\tif( ! window.open( url ) ) {\n\t\t\t\tlocation.href = url;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic download( filename: string, contents: string ): void {\n\t\tconst blob = new Blob(\n\t\t\t[ contents ],\n\t\t\t{ type: \"text/plain\" }\n\t\t);\n\t\tif( window.navigator.msSaveBlob ) {\n\t\t\twindow.navigator.msSaveBlob( blob, filename );\n\t\t} else {\n\t\t\tthis.downloadUrl( filename, URL.createObjectURL( blob ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"../d-base\";\nimport { UtilExtractor } from \"./util-extractor\";\nimport { UtilExtractorPixels } from \"./util-extractor-pixels\";\nimport { UtilFileDownloader } from \"./util-file-downloader\";\nimport { utilIsNumber } from \"./util-is-number\";\n\nexport interface UtilExtractTextureOptions {\n\ttarget: DBase;\n\tresolution?: number | {\n\t\tsize: number;\n\t};\n\ttransform?: {\n\t\tupdate?: boolean;\n\t};\n\tclear?: boolean;\n}\n\nexport interface UtilExtractPixelsOptions extends UtilExtractTextureOptions {\n\n}\n\nexport interface UtilExtractCanvasOptions extends UtilExtractPixelsOptions {\n\tscale?: number | {\n\t\tsize: number;\n\t};\n\talpha?: {\n\t\tpremultiplied?: {\n\t\t\tignore?: boolean;\n\t\t}\n\t};\n}\n\nexport interface UtilExtractBase64Options extends UtilExtractCanvasOptions {\n\tformat?: string;\n\tquality?: number;\n}\n\nexport interface UtilExtractFileOptions extends UtilExtractBase64Options {\n\tfilename: string;\n}\n\nconst toSkipUpdateTransform = ( options: UtilExtractTextureOptions ): boolean | undefined => {\n\treturn options.transform && options.transform.update;\n};\n\nconst toResolution = ( options: UtilExtractTextureOptions ): number => {\n\tconst target = options.target;\n\treturn ( options.resolution != null ?\n\t\t( utilIsNumber( options.resolution ) ?\n\t\t\toptions.resolution :\n\t\t\tMath.min( 1, options.resolution.size / Math.max( target.width, target.height ) )\n\t\t) : PIXI.settings.RESOLUTION\n\t);\n};\n\nconst toIgnorePremultipliedAlpha = ( options: UtilExtractCanvasOptions ): boolean | undefined => {\n\treturn ( options.alpha && options.alpha.premultiplied && options.alpha.premultiplied.ignore );\n};\n\nconst toScale = ( pixels: UtilExtractorPixels, options: UtilExtractCanvasOptions ): number | undefined => {\n\tif( options.scale != null ) {\n\t\tif( utilIsNumber( options.scale ) ) {\n\t\t\treturn options.scale;\n\t\t} else {\n\t\t\tconst size = options.scale.size;\n\t\t\treturn Math.min( 1, size / pixels.width, size / pixels.height );\n\t\t}\n\t}\n};\n\nexport class UtilExtract {\n\tstatic texture( options: UtilExtractTextureOptions ): PIXI.RenderTexture {\n\t\tconst target = options.target;\n\t\tconst resolution = toResolution( options );\n\t\tconst skipUpdateTransform = toSkipUpdateTransform( options );\n\t\treturn UtilExtractor.toTexture( target, resolution, options.clear, skipUpdateTransform );\n\t}\n\n\tstatic pixels( options: UtilExtractPixelsOptions ): UtilExtractorPixels {\n\t\treturn UtilExtractor.toPixels( this.texture( options ) );\n\t}\n\n\tstatic canvas( options: UtilExtractCanvasOptions ): HTMLCanvasElement {\n\t\tconst pixels = this.pixels( options );\n\t\tconst ignorePremutipliedAlpha = toIgnorePremultipliedAlpha( options );\n\t\tconst scale = toScale( pixels, options );\n\t\treturn UtilExtractor.toCanvas( pixels, scale, ignorePremutipliedAlpha );\n\t}\n\n\tstatic base64( options: UtilExtractBase64Options ): string {\n\t\treturn UtilExtractor.toBase64( this.canvas( options ), options.format, options.quality );\n\t}\n\n\tstatic file( options: UtilExtractFileOptions ): void {\n\t\tUtilFileDownloader.downloadUrl( options.filename, this.base64( options ) );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, interaction } from \"pixi.js\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DMenu, DMenuOptions } from \"./d-menu\";\nimport { Closeable } from \"./d-menu-context\";\nimport { DMenuItem } from \"./d-menu-item\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\nimport { DMenuItemText, DMenuItemTextOptions, DThemeMenuItemText } from \"./d-menu-item-text\";\nimport { DMenus } from \"./d-menus\";\nimport { UtilClipboard } from \"./util\";\nimport { utilIsString } from \"./util/util-is-string\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport type DMenuItemLinkLinkMaker = ( item: DMenuItemLink ) => string | null | Promise<string | null>;\nexport type DMenuItemLinkChecker = ( item: DMenuItemLink ) => boolean | Promise<boolean>;\n\nexport enum DMenuItemLinkMenuItemId {\n\tOPEN_LINK_IN_NEW_WINDOW,\n\tCOPY_LINK_ADDRESS\n}\n\nexport enum DMenuItemLinkTarget {\n\tAUTO,\n\tTHIS_WINDOW,\n\tNEW_WINDOW\n}\n\nexport interface DMenuItemLinkOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemLink = DThemeMenuItemLink\n> extends DMenuItemTextOptions<VALUE, THEME> {\n\tlink: string | DMenuItemLinkLinkMaker;\n\ttarget?: DMenuItemLinkTarget;\n\tchecker?: DMenuItemLinkChecker;\n\tmenu?: DMenuOptions<DMenuItemLinkMenuItemId> | DMenu<DMenuItemLinkMenuItemId>;\n}\n\nexport interface DThemeMenuItemLink extends DThemeMenuItemText {\n\tgetMenuOptions(): DMenuOptions<DMenuItemLinkMenuItemId>;\n}\n\nexport class DMenuItemLink<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemLink = DThemeMenuItemLink,\n\tOPTIONS extends DMenuItemLinkOptions<VALUE, THEME> = DMenuItemLinkOptions<VALUE, THEME>\n> extends DMenuItemText<VALUE, THEME, OPTIONS> {\n\tprotected _link: string | DMenuItemLinkLinkMaker;\n\tprotected _target?: DMenuItemLinkTarget;\n\tprotected _checker?: DMenuItemLinkChecker;\n\tprotected _menu?: DMenu<DMenuItemLinkMenuItemId>;\n\tprotected _menuOptions?: DMenuOptions<DMenuItemLinkMenuItemId> | DMenu<DMenuItemLinkMenuItemId>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis._link = options.link;\n\t\tthis._target = options.target;\n\t\tthis._checker = options.checker;\n\t\tthis._menuOptions = options.menu;\n\t}\n\n\tprotected init( options: OPTIONS ): void {\n\t\tif( options.target === DMenuItemLinkTarget.NEW_WINDOW ) {\n\t\t\toptions.state = ( options.state || DBaseState.NONE ) || DBaseState.EXTENSION_0;\n\t\t}\n\t\tsuper.init( options );\n\t}\n\n\tget link(): string | null | Promise<string | null> {\n\t\tconst link = this._link;\n\t\tif( utilIsString( link ) || link == null ) {\n\t\t\treturn link;\n\t\t} else {\n\t\t\treturn link( this );\n\t\t}\n\t}\n\n\tget menu(): DMenu<DMenuItemLinkMenuItemId> {\n\t\tlet menu = this._menu;\n\t\tif( menu == null ) {\n\t\t\tconst theme = this.theme;\n\t\t\tconst options = this._menuOptions || theme.getMenuOptions();\n\t\t\tmenu = this.toMenu( options );\n\t\t\tthis._menu = menu;\n\t\t\tmenu.on( \"select\", (\n\t\t\t\tvalue: DMenuItemLinkMenuItemId,\n\t\t\t\titem: DMenuItem<DMenuItemLinkMenuItemId>,\n\t\t\t\tcloseable: Closeable\n\t\t\t): void => {\n\t\t\t\tthis.onMenuSelect( value, item, closeable );\n\t\t\t});\n\t\t}\n\t\treturn menu;\n\t}\n\n\tprotected toMenu(\n\t\toptions: DMenuOptions<DMenuItemLinkMenuItemId> | DMenu<DMenuItemLinkMenuItemId>\n\t): DMenu<DMenuItemLinkMenuItemId> {\n\t\tif( options instanceof DisplayObject ) {\n\t\t\treturn options;\n\t\t}\n\t\treturn this.newMenu( options );\n\t}\n\n\tprotected newMenu( options: DMenuOptions<DMenuItemLinkMenuItemId> ): DMenu<DMenuItemLinkMenuItemId> {\n\t\treturn DMenus.newMenu( options );\n\t}\n\n\tprotected onMenuSelect(\n\t\tvalue: DMenuItemLinkMenuItemId,\n\t\titem: DMenuItem<DMenuItemLinkMenuItemId>,\n\t\tcloseable: Closeable\n\t): void {\n\t\tswitch( value ) {\n\t\tcase DMenuItemLinkMenuItemId.OPEN_LINK_IN_NEW_WINDOW:\n\t\t\tthis.open( true );\n\t\t\tbreak;\n\t\tcase DMenuItemLinkMenuItemId.COPY_LINK_ADDRESS:\n\t\t\tconst link = this.link;\n\t\t\tif( link != null ) {\n\t\t\t\tif( utilIsString( link ) ) {\n\t\t\t\t\tthis.copy( link );\n\t\t\t\t} else {\n\t\t\t\t\tlink.then(( resolved: string | null ): void => {\n\t\t\t\t\t\tif( resolved != null ) {\n\t\t\t\t\t\t\tthis.copy( resolved );\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tprotected copy( link: string ): void {\n\t\tconst a = document.createElement( \"a\" );\n\t\ta.href = link;\n\t\tUtilClipboard.copy( a.href );\n\t}\n\n\tprotected initOnClick( options?: OPTIONS ): void {\n\t\tconst onClick = ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( this.isActionable() ) {\n\t\t\t\tthis.onSelect( e );\n\t\t\t}\n\t\t};\n\t\tconst onLongClick = ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( this.isActionable() ) {\n\t\t\t\tconst menu = this.menu;\n\t\t\t\tif( menu.isHidden() ) {\n\t\t\t\t\tmenu.open( this );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tconst target = options && options.target;\n\t\tif( target === DMenuItemLinkTarget.NEW_WINDOW ) {\n\t\t\tUtilPointerEvent.onClick( this, onClick );\n\t\t} else {\n\t\t\tUtilPointerEvent.onLongClick( this, onClick, onLongClick );\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuItemLink\";\n\t}\n\n\tprotected onSelect( e: KeyboardEvent | interaction.InteractionEvent ): void {\n\t\tsuper.onSelect( e );\n\t\tthis.open( this.inNewWindow( e ) );\n\t}\n\n\topen( inNewWindow: boolean ): void {\n\t\tconst link = this.link;\n\t\tif( link != null ) {\n\t\t\tif( utilIsString( link )  ) {\n\t\t\t\tthis.check( link, inNewWindow );\n\t\t\t} else {\n\t\t\t\tlink.then(( resolved: string | null ): void => {\n\t\t\t\t\tif( resolved ) {\n\t\t\t\t\t\tthis.check( resolved, inNewWindow );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected check( link: string, inNewWindow: boolean ): void {\n\t\tconst checker = this._checker;\n\t\tif( checker ) {\n\t\t\tconst checked = checker( this );\n\t\t\tif( checked === true ) {\n\t\t\t\tthis.exec( link, inNewWindow );\n\t\t\t} else if( checked === false ) {\n\t\t\t\t// DO NOTHING\n\t\t\t} else {\n\t\t\t\tchecked.then(( resolved: boolean ): void => {\n\t\t\t\t\tif( resolved ) {\n\t\t\t\t\t\tthis.exec( link, inNewWindow );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthis.exec( link, inNewWindow );\n\t\t}\n\t}\n\n\tprotected exec( link: string, inNewWindow: boolean ): void {\n\t\tif( inNewWindow ) {\n\t\t\tconst a = document.createElement( \"a\" );\n\t\t\ta.href = link;\n\t\t\ta.target = \"_blank\";\n\t\t\ta.style.display = \"none\";\n\t\t\ta.rel = \"noopener noreferrer\";\n\t\t\tdocument.body.appendChild( a );\n\t\t\ta.click();\n\t\t\tsetTimeout((): void => {\n\t\t\t\tdocument.body.removeChild( a );\n\t\t\t}, 100);\n\t\t} else {\n\t\t\twindow.location.href = link;\n\t\t}\n\t}\n\n\tprotected inNewWindow( e: KeyboardEvent | interaction.InteractionEvent ): boolean {\n\t\tif( this._target === DMenuItemLinkTarget.NEW_WINDOW ) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tconst oe = ( e instanceof interaction.InteractionEvent ? e.data.originalEvent : e );\n\t\t\treturn (\n\t\t\t\t( oe.ctrlKey || oe.shiftKey || oe.altKey || oe.metaKey ) ||\n\t\t\t\t( \"button\" in oe && oe.button !== 0 )\n\t\t\t);\n\t\t}\n\t}\n\n\tprotected onShortcut( e: KeyboardEvent ) {\n\t\tsuper.onShortcut( e );\n\t\tthis.onSelect( e );\n\t}\n\n\tstatic isCompatible<VALUE>( options: DMenuItemOptionsUnion<VALUE> ): options is DMenuItemLinkOptions<VALUE> {\n\t\treturn \"link\" in options;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class UtilHsv {\n\tstatic fromRgb( color: number ): [ number, number, number ] {\n\t\tconst r = (color & 0xff0000) >> 16;\n\t\tconst g = (color & 0x00ff00) >> 8;\n\t\tconst b = (color & 0x0000ff) | 0;\n\n\t\tconst max = Math.max( r, g, b );\n\t\tconst min = Math.min( r, g, b );\n\t\tconst length = max - min;\n\t\tlet h = 0;\n\t\tif( 0 < length ) {\n\t\t\tif( r === max ) {\n\t\t\t\th = 60 * ( g - b ) / length;\n\t\t\t} else if( g === max ) {\n\t\t\t\th = 60 * ( b - r ) / length + 120;\n\t\t\t} else if( b === max ) {\n\t\t\t\th = 60 * ( r - g ) / length + 240;\n\t\t\t}\n\t\t\tif( h < 0 ) {\n\t\t\t\th += 360;\n\t\t\t}\n\t\t}\n\n\t\tconst s = ( length / max ) * 255;\n\t\tconst v = max;\n\t\treturn [ h, s, v ];\n\t}\n\n\tstatic toRgb( h: number, s: number, v: number ): number {\n\t\tconst max = v;\n\t\tconst min = v - (s / 255) * v;\n\t\tconst length = max - min;\n\n\t\tlet r = 0;\n\t\tlet g = 0;\n\t\tlet b = 0;\n\t\tif( h <= 60 ) {\n\t\t\tr = max;\n\t\t\tg = (h / 60) * length + min;\n\t\t\tb = min;\n\t\t} else if( h <= 120 ) {\n\t\t\tr = ((120 - h) / 60) * length + min;\n\t\t\tg = max;\n\t\t\tb = min;\n\t\t} else if( h <= 180 ) {\n\t\t\tr = min;\n\t\t\tg = max;\n\t\t\tb = ((h - 120) / 60) * length + min;\n\t\t} else if( h <= 240 ) {\n\t\t\tr = min;\n\t\t\tg = ((240 - h) / 60) * length + min;\n\t\t\tb = max;\n\t\t} else if( h <= 300 ) {\n\t\t\tr = ((h - 240) / 60) * length + min;\n\t\t\tg = min;\n\t\t\tb = max;\n\t\t} else {\n\t\t\tr = max;\n\t\t\tg = min;\n\t\t\tb = ((360 - h) / 60) * length + min;\n\t\t}\n\n\t\tr = Math.max( 0, Math.min( 255, r ) );\n\t\tg = Math.max( 0, Math.min( 255, g ) );\n\t\tb = Math.max( 0, Math.min( 255, b ) );\n\n\t\treturn (r << 16) | (g << 8) | b;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilIndexOf = <V>( array: V[], value: V ): number => {\n\tlet i0 = 0;\n\tlet i1 = array.length - 1;\n\n\twhile( i0 <= i1 ) {\n\t\tconst i2 = i0 + ((i1 - i0) >> 1);\n\t\tconst v2 = array[ i2 ];\n\t\tif( value < v2 ) {\n\t\t\ti1 = i2 - 1;\n\t\t} else if( v2 < value ) {\n\t\t\ti0 = i2 + 1;\n\t\t} else {\n\t\t\treturn i2;\n\t\t}\n\t}\n\n\treturn -1;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilIsArray = Array.isArray || (( target: any ): target is unknown[] => {\n\treturn Object.prototype.toString.call( target ) === \"[object Array]\";\n});\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilIsNaN = ( target: number ): boolean => {\n\treturn target !== target;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class UtilPromise {\n\tstatic IDENTITY = () => { /* DO NOTHING*/ };\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utilPad } from \"./util-pad\";\n\nexport class UtilRgb {\n\tstatic toCode( color: number ): string {\n\t\treturn utilPad( color.toString( 16 ).toUpperCase(), 6, \"0\" );\n\t}\n\n\tstatic fromCode( code: string ): number | null {\n\t\tconst trimmed = code.trim().toLowerCase();\n\t\tif( trimmed.length === 6 ) {\n\t\t\tconst color = Number( `0x${trimmed}` );\n\t\t\tif( color === color ) {\n\t\t\t\treturn color;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic fromRgb( r: number, g: number, b: number ): number {\n\t\treturn ((r * 0xff) << 16) + ((g * 0xff) << 8) + ((b * 0xff) | 0);\n\t}\n\n\tstatic blend( colorA: number, colorB: number, t: number ): number {\n\t\tconst ar = ((colorA >> 16) & 0xff);\n\t\tconst ag = ((colorA >> 8) & 0xff);\n\t\tconst ab = ((colorA | 0) & 0xff);\n\n\t\tconst br = ((colorB >> 16) & 0xff);\n\t\tconst bg = ((colorB >> 8) & 0xff);\n\t\tconst bb = ((colorB | 0) & 0xff);\n\n\t\tconst w1 = Math.max( 0, Math.min( 1, t ) );\n\t\tconst w0 = 1 - w1;\n\t\tconst cr = Math.max( 0, Math.min( 0xff, ar * w0 + br * w1 ) );\n\t\tconst cg = Math.max( 0, Math.min( 0xff, ag * w0 + bg * w1 ) );\n\t\tconst cb = Math.max( 0, Math.min( 0xff, ab * w0 + bb * w1 ) );\n\n\t\treturn (cr << 16) + (cg << 8) + (cb | 0);\n\t}\n\n\tstatic brighten( color: number, amount: number ): number {\n\t\treturn this.blend( color, 0xffffff, amount );\n\t}\n\n\tstatic darken( color: number, amount: number ): number {\n\t\treturn this.blend( color, 0x000000, amount );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class UtilRgba {\n\tstatic toCode( color: number, alpha: number ): string {\n\t\tconst r = ( color >> 16 ) & 0xff;\n\t\tconst g = ( color >> 8 ) & 0xff;\n\t\tconst b = ( color & 0xff );\n\t\treturn `rgba(${r},${g},${b},${alpha})`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { settings, Texture } from \"pixi.js\";\nimport { DApplications } from \"../d-applications\";\nimport { DCornerMask } from \"../d-corner\";\nimport { utilToSvgUrl } from \"./util-to-svg-url\";\n\nconst toCornerTl = ( offset: number, size: number, tl: number ): string => {\n\treturn ( 0 < tl ? `A${tl} ${tl} 0 0 1 ${offset + tl} ${offset}` : \"\" );\n};\n\nconst toCornerBr = ( offset: number, size: number, br: number ): string => {\n\treturn ( 0 < br ? `A${br} ${br} 0 0 1 ${offset + size - br} ${offset + size}` : \"\" );\n};\n\nexport class UtilTexturePlane {\n\tprotected static BACKGROUND_CACHE: Map<number, Texture> = new Map<number, Texture>();\n\tprotected static BACKGROUND_ATTRIBUTE: string = `fill=\"#fff\" stroke=\"none\"`;\n\tprotected static BORDER_CACHE: Map<number, Map<number, Texture>> = new Map<number, Map<number, Texture>>();\n\tprotected static BORDER_ATTRIBUTE = ( width: number ): string => `fill=\"none\" stroke=\"#fff\" stroke-width=\"${width}\"`;\n\n\tprotected static make( radius: number, offset: number, attr: string ): Texture {\n\t\tconst realRadius = Math.max( 0, radius - offset );\n\t\tconst size: number = realRadius * 2 + 4;\n\t\tconst realSize: number = size + offset * 2;\n\t\tconst d =\n\t\t\t`M${offset + realRadius} ${offset}` +\n\t\t\t`L${offset + size} ${offset}` +\n\t\t\t`L${offset + size} ${offset + size - realRadius}` +\n\t\t\ttoCornerBr( offset, size, realRadius ) +\n\t\t\t`L${offset} ${offset + size}` +\n\t\t\t`L${offset} ${offset + realRadius}` +\n\t\t\ttoCornerTl( offset, size, realRadius ) +\n\t\t\t`Z`;\n\t\treturn this.toSvg( realSize, attr, d );\n\t}\n\n\tprotected static toSvg( realSize: number, attr: string, d: string ): Texture {\n\t\tconst resolution = settings.RESOLUTION;\n\t\tconst widthAttr = `width=\"${realSize * resolution}\"`;\n\t\tconst heightAttr = `height=\"${realSize * resolution}\"`;\n\t\tconst viewBoxAttr = `viewBox=\"0 0 ${realSize} ${realSize}\"`;\n\t\tconst svg = `<svg ${widthAttr} ${heightAttr} ${viewBoxAttr} xmlns=\"http://www.w3.org/2000/svg\">` +\n\t\t\t`<path ${attr} d=\"${d}\"></path>` +\n\t\t`</svg>`;\n\t\treturn Texture.from( utilToSvgUrl( svg ), {\n\t\t\tresolution\n\t\t});\n\t}\n\n\tprotected static onUpdate(): void {\n\t\tDApplications.update();\n\t}\n\n\tstatic newBackground( radius: number ): Texture {\n\t\tconst result = this.make( radius, 0, this.BACKGROUND_ATTRIBUTE );\n\t\tresult.on( \"update\", this.onUpdate );\n\t\treturn result;\n\t}\n\n\tstatic newBorder( radius: number, width: number ): Texture {\n\t\tconst result = this.make( radius, 0.5 * width, this.BORDER_ATTRIBUTE( width ) );\n\t\tresult.on( \"update\", this.onUpdate );\n\t\treturn result;\n\t}\n\n\tstatic getBackground( radius: number ): Texture {\n\t\tconst cache = this.BACKGROUND_CACHE;\n\n\t\tlet texture = cache.get( radius );\n\t\tif( texture == null ) {\n\t\t\ttexture = this.newBackground( radius );\n\t\t\tcache.set( radius, texture );\n\t\t}\n\n\t\treturn texture;\n\t}\n\n\tstatic getBorder( radius: number, width: number ): Texture {\n\t\tconst cache = this.BORDER_CACHE;\n\n\t\tlet maskToTexture = cache.get( radius );\n\t\tif( maskToTexture == null ) {\n\t\t\tmaskToTexture = new Map<DCornerMask, Texture>();\n\t\t\tcache.set( radius, maskToTexture );\n\t\t}\n\n\t\tlet texture = maskToTexture.get( width );\n\t\tif( texture == null ) {\n\t\t\ttexture = this.newBorder( radius, width );\n\t\t\tmaskToTexture.set( width, texture );\n\t\t}\n\n\t\treturn texture;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\n\nexport class UtilTexture {\n\tstatic fromImage( url: string, resolution: number, onLoad: ( texture: Texture ) => void ) {\n\t\tconst texture = Texture.from( url, {\n\t\t\tresolution\n\t\t});\n\t\tif( ! texture.baseTexture.valid ) {\n\t\t\ttexture.once( \"update\", onLoad );\n\t\t} else {\n\t\t\tonLoad( texture );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilToString = ( value: unknown ): string => {\n\treturn ( value != null ? String( value ) : \"\" );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"../d-base\";\n\nexport interface UtilTransitionOptions {\n\tduration?: number;\n}\n\nexport class UtilTransition {\n\tprotected _duration: number;\n\tprotected _current: DBase<any, any> | null;\n\tprotected _lastUpdate: number;\n\tprotected _updateId: number | null;\n\n\tconstructor( options?: UtilTransitionOptions ) {\n\t\tthis._duration = ( options != null && options.duration != null ? options.duration : 300 );\n\t\tthis._current = null;\n\t\tthis._lastUpdate = 0;\n\t\tthis._updateId = null;\n\t}\n\n\tshow( next: DBase<any, any> | null, forcibly?: boolean ): void {\n\t\tconst updateId = this._updateId;\n\t\tif( updateId != null ) {\n\t\t\tclearTimeout( updateId );\n\t\t}\n\n\t\tconst current = this._current;\n\t\tif( next !== current ) {\n\t\t\tconst duration = this._duration;\n\t\t\tconst lastUpdate = this._lastUpdate;\n\t\t\tconst now = Date.now();\n\t\t\tconst remaining = (lastUpdate + duration) - now;\n\t\t\tif( forcibly === true || remaining <= 0 ) {\n\t\t\t\tthis.update( now, next );\n\t\t\t} else {\n\t\t\t\tthis._updateId = window.setTimeout(() => {\n\t\t\t\t\tthis.update( Date.now(), next );\n\t\t\t\t}, remaining );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected update( now: number, next: DBase<any, any> | null ) {\n\t\tconst current = this._current;\n\t\tif( current !== next ) {\n\t\t\tthis._lastUpdate = now;\n\n\t\t\tif( current !== null ) {\n\t\t\t\tcurrent.hide();\n\t\t\t}\n\n\t\t\tthis._current = next;\n\t\t\tif( next != null ) {\n\t\t\t\tnext.show();\n\t\t\t}\n\t\t}\n\t}\n\n\thide(): void {\n\t\tthis.show( null );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeFont } from \"../d-font\";\nimport { DThemes } from \"../theme/d-themes\";\n\nexport interface UtilWheelEventDeltas {\n\tmode: number;\n\tdelta: number;\n\tdeltaX: number;\n\tdeltaY: number;\n\tlowest: number;\n}\n\n/*!\n* jQuery Mousewheel 3.1.13\n*\n* Copyright jQuery Foundation and other contributors\n* Released under the MIT license\n* http://jquery.org/license\n*\n* See also https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n* and https://github.com/openlayers/openlayers/blob/v5.2.0/src/ol/interaction/MouseWheelZoom.js#L51\n*/\nexport class UtilWheelEvent {\n\tprivate static INSTANCE: UtilWheelEvent | null;\n\tprivate _names: Array<\"wheel\" | \"mousewheel\" | \"DOMMouseScroll\" | \"MozMousePixelScroll\">;\n\tprivate _lowest: number | null = null;\n\tprivate _timestamp: number = 0;\n\tprivate _lineHeight: number | null = null;\n\tprivate _pageHeight: number | null = null;\n\n\tconstructor() {\n\t\tthis._names = ( \"onwheel\" in document || 9 <= (document as any).documentMode ?\n\t\t\t[ \"wheel\" ] : [ \"mousewheel\", \"DOMMouseScroll\", \"MozMousePixelScroll\" ]\n\t\t);\n\t}\n\n\ton( target: HTMLElement, handler: ( e: WheelEvent | Event ) => void, useCapture: boolean = false ) {\n\t\tconst names = this._names;\n\t\tfor( let i = names.length - 1; 0 <= i; --i ) {\n\t\t\tconst name = names[ i ];\n\t\t\ttarget.addEventListener( name, handler, useCapture );\n\t\t}\n\t}\n\n\toff( target: HTMLElement, handler: ( e: WheelEvent | Event ) => void, useCapture: boolean = false ) {\n\t\tconst names = this._names;\n\t\tfor( let i = names.length - 1; 0 <= i; --i ) {\n\t\t\tconst name = names[ i ];\n\t\t\ttarget.removeEventListener( name, handler, useCapture );\n\t\t}\n\t}\n\n\tgetLineHeight(): number {\n\t\tif( this._lineHeight == null ) {\n\t\t\tconst theme = DThemes.getInstance().get( \"DBase\" ) as DThemeFont;\n\t\t\tthis._lineHeight = theme.getLineHeight();\n\t\t}\n\t\treturn this._lineHeight;\n\t}\n\n\tgetPageHeight(): number {\n\t\tif( this._pageHeight == null ) {\n\t\t\tthis._pageHeight = this.getLineHeight() * 12;\n\t\t}\n\t\treturn this._pageHeight;\n\t}\n\n\tnormalize( e: any ): UtilWheelEventDeltas | null {\n\t\tlet deltaX = 0;\n\t\tlet deltaY = 0;\n\n\t\t// Old school scrollwheel delta\n\t\tif ( \"detail\" in e ) {\n\t\t\tdeltaY = e.detail * -1;\n\t\t}\n\t\tif ( \"wheelDelta\" in e ) {\n\t\t\tdeltaY = e.wheelDelta;\n\t\t}\n\t\tif ( \"wheelDeltaY\" in e ) {\n\t\t\tdeltaY = e.wheelDeltaY;\n\t\t}\n\t\tif ( \"wheelDeltaX\" in e ) {\n\t\t\tdeltaX = e.wheelDeltaX * -1;\n\t\t}\n\n\t\t// Firefox < 17 horizontal scrolling related to DOMMouseScroll event\n\t\tif ( \"axis\" in e && e.axis === e.HORIZONTAL_AXIS ) {\n\t\t\tdeltaX = deltaY * -1;\n\t\t\tdeltaY = 0;\n\t\t}\n\n\t\t// New school wheel delta (wheel event)\n\t\tif ( \"deltaY\" in e ) {\n\t\t\tdeltaY = e.deltaY * -1;\n\t\t}\n\t\tif ( \"deltaX\" in e ) {\n\t\t\tdeltaX = e.deltaX;\n\t\t}\n\n\t\t// No change actually happened, no reason to go any further\n\t\tif ( deltaY === 0 && deltaX === 0 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Store lowest absolute delta to normalize the delta values\n\t\tlet delta = Math.max( Math.abs(deltaY), Math.abs(deltaX) );\n\n\t\t// Reset the this._lowest to better handle multiple device types\n\t\t// that give different a different lowestDelta\n\t\t// Ex: trackpad = 3 and mouse wheel = 120\n\t\tconst now = Date.now();\n\t\tif( this._timestamp + 200 <= now ) {\n\t\t\tthis._lowest = null;\n\t\t}\n\t\tthis._timestamp = now;\n\n\t\t//\n\t\tconst shouldAdjust = (e.type === \"mousewheel\" && delta % 120 === 0);\n\t\tif ( ! this._lowest || delta < this._lowest ) {\n\t\t\tthis._lowest = delta;\n\n\t\t\t// Adjust older deltas if necessary\n\t\t\tif ( shouldAdjust ) {\n\t\t\t\tthis._lowest /= 40;\n\t\t\t}\n\t\t}\n\n\t\t// Adjust older deltas if necessary\n\t\tif ( shouldAdjust ) {\n\t\t\t// Divide all the things by 40!\n\t\t\tdelta  /= 40;\n\t\t\tdeltaX /= 40;\n\t\t\tdeltaY /= 40;\n\t\t}\n\n\t\t// Get a whole, normalized value for the deltas\n\t\tconst lowest = this._lowest;\n\t\tdelta  = Math.floor( delta  / lowest );\n\t\tdeltaX = Math[ 1 <= deltaX ? \"floor\" : \"ceil\" ](deltaX / lowest);\n\t\tdeltaY = Math[ 1 <= deltaY ? \"floor\" : \"ceil\" ](deltaY / lowest);\n\n\t\t// Mode\n\t\tconst mode = e.deltaMode || 0;\n\t\tif( mode !== 0 ) {\n\t\t\tconst scale = ( mode === 1 ? this.getLineHeight() : this.getPageHeight() );\n\t\t\tdelta *= scale;\n\t\t\tdeltaX *= scale;\n\t\t\tdeltaY *= scale;\n\t\t}\n\n\t\treturn {\n\t\t\tmode,\n\t\t\tdelta,\n\t\t\tdeltaX,\n\t\t\tdeltaY,\n\t\t\tlowest\n\t\t};\n\t}\n\n\tstatic getInstance(): UtilWheelEvent {\n\t\tif( this.INSTANCE == null ) {\n\t\t\tthis.INSTANCE = new UtilWheelEvent();\n\t\t}\n\t\treturn this.INSTANCE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DCornerMask } from \"./d-corner\";\nimport { DLayoutClearType } from \"./d-layout-clear-type\";\nimport { DLayoutSpace, DLayoutSpaceOptions } from \"./d-layout-space\";\nimport { utilIsNumber } from \"./util/util-is-number\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport enum DLayoutDirection {\n\tVERTICAL,\n\tHORIZONTAL\n}\n\nexport interface DLayoutMargin {\n\thorizontal: number;\n\tvertical: number;\n}\n\nexport interface DLayoutOptions<THEME extends DThemeLayout> extends DBaseOptions<THEME> {\n\tmargin?: number | { horizontal?: number, vertical?: number };\n\tcorner?: number | {\n\t\tradius?: number;\n\t\tmask?: DCornerMask;\n\t\tadjust?: boolean\n\t};\n\trow?: number;\n\tcolumn?: number;\n\tdirection?: (keyof typeof DLayoutDirection) | DLayoutDirection;\n}\n\nexport interface DThemeLayout extends DThemeBase {\n\tgetMargin(): number;\n\tgetDirection(): DLayoutDirection;\n\tgetCornerAdjust(): boolean;\n\tgetMultiplicity(): number;\n}\n\nconst isDBaseVisible = ( child: DisplayObject ): child is DBase => {\n\treturn child instanceof DBase && (child.visible || child instanceof DLayoutSpace);\n};\n\nconst toMultiplicity = <THEME extends DThemeLayout>( theme: THEME, options?: DLayoutOptions<THEME> ): number => {\n\tif( options ) {\n\t\tif( options.row != null ) {\n\t\t\treturn options.row;\n\t\t}\n\t\tif( options.column != null ) {\n\t\t\treturn options.column;\n\t\t}\n\t}\n\treturn theme.getMultiplicity();\n};\n\nconst toMargin = <THEME extends DThemeLayout>( theme: THEME, options?: DLayoutOptions<THEME> ): DLayoutMargin => {\n\tif( options && options.margin != null ) {\n\t\tconst margin = options.margin;\n\t\tif( utilIsNumber( margin ) ) {\n\t\t\treturn {\n\t\t\t\thorizontal: margin,\n\t\t\t\tvertical: margin\n\t\t\t};\n\t\t} else {\n\t\t\tconst themeMargin = theme.getMargin();\n\t\t\treturn {\n\t\t\t\thorizontal: ( margin.horizontal != null ? margin.horizontal : themeMargin ),\n\t\t\t\tvertical: ( margin.vertical != null ? margin.vertical : themeMargin )\n\t\t\t};\n\t\t}\n\t} else {\n\t\tconst themeMargin = theme.getMargin();\n\t\treturn {\n\t\t\thorizontal: themeMargin,\n\t\t\tvertical: themeMargin\n\t\t};\n\t}\n};\n\nconst toDirection = <THEME extends DThemeLayout>( theme: THEME, options?: DLayoutOptions<THEME> ): DLayoutDirection => {\n\tif( options && options.direction != null ) {\n\t\tconst direction = options.direction;\n\t\tif( utilIsString( direction ) ) {\n\t\t\treturn DLayoutDirection[ direction ];\n\t\t} else {\n\t\t\treturn direction;\n\t\t}\n\t}\n\treturn theme.getDirection();\n};\n\nconst toCornerAdjust = <THEME extends DThemeLayout>( theme: THEME, options?: DLayoutOptions<THEME> ): boolean => {\n\tif( options && options.corner != null && ! utilIsNumber( options.corner ) && options.corner.adjust != null ) {\n\t\treturn options.corner.adjust;\n\t}\n\treturn theme.getCornerAdjust();\n};\n\nexport abstract class DLayout<\n\tTHEME extends DThemeLayout,\n\tOPTIONS extends DLayoutOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tstatic CORNER_ADJUST_WORK: Float32Array | null = null;\n\n\tprotected _margin: DLayoutMargin;\n\tprotected _cornerAdjust: boolean;\n\tprotected _multiplicity: number;\n\tprotected _direction: DLayoutDirection;\n\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\n\t\tconst theme = this.theme;\n\t\tthis._margin = toMargin( theme, options );\n\t\tthis._direction = toDirection( theme, options );\n\t\tthis._cornerAdjust = toCornerAdjust( theme, options );\n\t\tthis._multiplicity = toMultiplicity( theme, options );\n\t}\n\n\tprotected getWeightTotal() {\n\t\tconst children = this.children;\n\t\tlet result = 0;\n\t\tconst multiplicity = this._multiplicity;\n\t\tfor( let i = 0, imax = children.length; i < imax; ) {\n\t\t\tlet weight = -1;\n\t\t\tlet j = 0;\n\t\t\tfor( ; j < multiplicity && i + j < imax; ++j ) {\n\t\t\t\tconst child = children[ i + j ];\n\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\tconst clearType = child.getClearType();\n\t\t\t\t\tif( j !== 0 && (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tweight = Math.max( weight, child.weight );\n\t\t\t\t\t\tif( clearType && DLayoutClearType.AFTER ) {\n\t\t\t\t\t\t\tj += 1;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ti += 1;\n\t\t\t\t\tj -= 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\ti += j;\n\t\t\tif( 0 <= weight ) {\n\t\t\t\tresult += weight;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected getSpaceLeft( baseSize: number, margin: number ) {\n\t\tconst children = this.children;\n\t\tconst multiplicity = this._multiplicity;\n\t\tif( this._direction === DLayoutDirection.VERTICAL ) {\n\t\t\tlet result = baseSize;\n\t\t\tlet marginNext = 0;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ) {\n\t\t\t\tlet height = 0;\n\t\t\t\tlet weight = -1;\n\t\t\t\tlet j = 0;\n\t\t\t\tfor( ; j < multiplicity && i + j < imax; ++j ) {\n\t\t\t\t\tconst child = children[ i + j ];\n\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\tconst clearType = child.getClearType();\n\t\t\t\t\t\tif( j !== 0 && (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tweight = Math.max( weight, child.weight );\n\t\t\t\t\t\t\tif( weight < 0 ) {\n\t\t\t\t\t\t\t\theight = Math.max( height, child.height + marginNext );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\theight = marginNext;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif( clearType & DLayoutClearType.AFTER ) {\n\t\t\t\t\t\t\t\tj += 1;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ti += 1;\n\t\t\t\t\t\tj -= 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ti += j;\n\t\t\t\tresult -= height;\n\t\t\t\tmarginNext = margin;\n\t\t\t}\n\t\t\treturn Math.max( 0, result );\n\t\t} else {\n\t\t\tlet result = baseSize;\n\t\t\tlet marginNext = 0;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ) {\n\t\t\t\tlet width = 0;\n\t\t\t\tlet weight = -1;\n\t\t\t\tlet j = 0;\n\t\t\t\tfor( ; j < multiplicity && i + j < imax; ++j ) {\n\t\t\t\t\tconst child = children[ i + j ];\n\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\tconst clearType = child.getClearType();\n\t\t\t\t\t\tif( j !== 0 && (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tweight = Math.max( weight, child.weight );\n\t\t\t\t\t\t\tif( weight < 0 ) {\n\t\t\t\t\t\t\t\twidth = Math.max( width, child.width + marginNext );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twidth = marginNext;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif( clearType & DLayoutClearType.AFTER ) {\n\t\t\t\t\t\t\t\tj += 1;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ti += 1;\n\t\t\t\t\t\tj -= 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ti += j;\n\t\t\t\tresult -= width;\n\t\t\t\tmarginNext = margin;\n\t\t\t}\n\t\t\treturn Math.max( 0, result );\n\t\t}\n\t}\n\n\tprotected onRefit(): void {\n\t\tconst children = this.children;\n\t\tconst padding = this._padding;\n\t\tconst paddingTop = padding.getTop();\n\t\tconst paddingBottom = padding.getBottom();\n\t\tconst paddingLeft = padding.getLeft();\n\t\tconst paddingRight = padding.getRight();\n\t\tconst margin = this._margin;\n\t\tconst marginVertical = margin.vertical;\n\t\tconst marginHorizontal = margin.horizontal;\n\t\tconst weightTotal = this.getWeightTotal();\n\t\tconst multiplicity = this._multiplicity;\n\n\t\tlet cornerAdjustWork = null;\n\t\tif( this._cornerAdjust ) {\n\t\t\tconst requiredSize = 4 + ( children.length << 1 );\n\t\t\tif( DLayout.CORNER_ADJUST_WORK == null || DLayout.CORNER_ADJUST_WORK.length < requiredSize ) {\n\t\t\t\tDLayout.CORNER_ADJUST_WORK = new Float32Array( requiredSize );\n\t\t\t}\n\t\t\tcornerAdjustWork = DLayout.CORNER_ADJUST_WORK;\n\t\t\tcornerAdjustWork[ 0 ] = -2;\n\t\t\tcornerAdjustWork[ 1 ] = -2;\n\t\t\tcornerAdjustWork[ requiredSize - 2 ] = -3;\n\t\t\tcornerAdjustWork[ requiredSize - 1 ] = -3;\n\t\t}\n\n\t\tif( this._direction === DLayoutDirection.VERTICAL ) {\n\t\t\tlet irow = 0;\n\t\t\tlet y = paddingTop - marginVertical;\n\t\t\tif( 0 < weightTotal ) {\n\t\t\t\tconst weightTotalInverse = 1 / weightTotal;\n\t\t\t\tconst baseSize = this.height - paddingTop - paddingBottom;\n\t\t\t\tconst spaceLeft = this.getSpaceLeft( baseSize, marginVertical );\n\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ) {\n\t\t\t\t\tlet x = paddingLeft - marginHorizontal;\n\t\t\t\t\tlet height = 0;\n\t\t\t\t\tlet j = 0;\n\t\t\t\t\tfor( ; j < multiplicity && i + j < imax; ++j ) {\n\t\t\t\t\t\tconst child = children[ i + j ];\n\t\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\t\tconst clearType = child.getClearType();\n\t\t\t\t\t\t\tif( j !== 0 && (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tchild.position.set( marginHorizontal + x, marginVertical + y );\n\t\t\t\t\t\t\t\tconst weight = child.weight;\n\t\t\t\t\t\t\t\tif( 0 <= weight ) {\n\t\t\t\t\t\t\t\t\tchild.height = spaceLeft * ( weight * weightTotalInverse );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tx += marginHorizontal + child.width;\n\t\t\t\t\t\t\t\theight = Math.max( height, child.height );\n\t\t\t\t\t\t\t\tif( clearType & DLayoutClearType.AFTER ) {\n\t\t\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = j;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = irow;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tj += 1;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = j;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = irow;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = j - 1;\n\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = irow;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ti += 1;\n\t\t\t\t\t\t\tj -= 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ty += marginVertical + height;\n\t\t\t\t\ti += j;\n\t\t\t\t\tirow += 1;\n\t\t\t\t}\n\n\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\t\t\tconst child = children[ i ];\n\t\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\t\tconst i1 = 2 + ( i << 1 );\n\t\t\t\t\t\t\tconst icolumn1 = cornerAdjustWork[ i1 + 0 ];\n\t\t\t\t\t\t\tconst irow1 = cornerAdjustWork[ i1 + 1 ];\n\t\t\t\t\t\t\tconst clearType = child.getClearType();\n\n\t\t\t\t\t\t\tlet icolumn0 = -2;\n\t\t\t\t\t\t\tif( ! (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\t\tconst i0 = this.findRowIndexPrevious( i1, irow1, cornerAdjustWork );\n\t\t\t\t\t\t\t\tif( ! this.hasClearTypeAfter( children, i0 ) ) {\n\t\t\t\t\t\t\t\t\ticolumn0 = cornerAdjustWork[ i0 ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet icolumn2 = -2;\n\t\t\t\t\t\t\tif( ! (clearType & DLayoutClearType.AFTER) ) {\n\t\t\t\t\t\t\t\tconst i2 = this.findRowIndexNext( i1, irow1, cornerAdjustWork );\n\t\t\t\t\t\t\t\tif( ! this.hasClearTypeBefore( children, i2 ) ) {\n\t\t\t\t\t\t\t\t\ticolumn2 = cornerAdjustWork[ i2 ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst ncolumn = this.countColumn( i1, irow1, cornerAdjustWork );\n\t\t\t\t\t\t\tchild.corner.mask = this.toCornerMaskColumn( icolumn0, icolumn1, icolumn2, ncolumn );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ) {\n\t\t\t\t\tlet x = paddingLeft - marginHorizontal;\n\t\t\t\t\tlet height = 0;\n\t\t\t\t\tlet j = 0;\n\t\t\t\t\tfor( ; j < multiplicity && i + j < imax; ++j ) {\n\t\t\t\t\t\tconst child = children[ i + j ];\n\t\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\t\tconst clearType = child.getClearType();\n\t\t\t\t\t\t\tif( j !== 0 && (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tchild.position.set( marginHorizontal + x, marginVertical + y );\n\t\t\t\t\t\t\t\tconst weight = child.weight;\n\t\t\t\t\t\t\t\tif( 0 <= weight ) {\n\t\t\t\t\t\t\t\t\tchild.height = 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tx += marginHorizontal + child.width;\n\t\t\t\t\t\t\t\theight = Math.max( height, child.height );\n\t\t\t\t\t\t\t\tif( clearType & DLayoutClearType.AFTER ) {\n\t\t\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = j;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = irow;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tj += 1;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = j;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = irow;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = j - 1;\n\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = irow;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ti += 1;\n\t\t\t\t\t\t\tj -= 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ty += marginVertical + height;\n\t\t\t\t\ti += j;\n\t\t\t\t\tirow += 1;\n\t\t\t\t}\n\n\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\t\t\tconst child = children[ i ];\n\t\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\t\tconst i1 = 2 + ( i << 1 );\n\t\t\t\t\t\t\tconst icolumn1 = cornerAdjustWork[ i1 + 0 ];\n\t\t\t\t\t\t\tconst irow1 = cornerAdjustWork[ i1 + 1 ];\n\t\t\t\t\t\t\tconst clearType = child.getClearType();\n\n\t\t\t\t\t\t\tlet icolumn0 = -2;\n\t\t\t\t\t\t\tif( ! (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\t\tconst i0 = this.findRowIndexPrevious( i1, irow1, cornerAdjustWork );\n\t\t\t\t\t\t\t\tif( ! this.hasClearTypeAfter( children, i0 ) ) {\n\t\t\t\t\t\t\t\t\ticolumn0 = cornerAdjustWork[ i0 ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet icolumn2 = -2;\n\t\t\t\t\t\t\tif( ! (clearType & DLayoutClearType.AFTER) ) {\n\t\t\t\t\t\t\t\tconst i2 = this.findRowIndexNext( i1, irow1, cornerAdjustWork );\n\t\t\t\t\t\t\t\tif( ! this.hasClearTypeBefore( children, i2 ) ) {\n\t\t\t\t\t\t\t\t\ticolumn2 = cornerAdjustWork[ i2 ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst ncolumn = this.countColumn( i1, irow1, cornerAdjustWork );\n\t\t\t\t\t\t\tchild.corner.mask = this.toCornerMaskColumn( icolumn0, icolumn1, icolumn2, ncolumn );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tlet icolumn = 0;\n\t\t\tlet x = paddingLeft - marginHorizontal;\n\t\t\tif( 0 < weightTotal ) {\n\t\t\t\tconst weightTotalInverse = 1 / weightTotal;\n\t\t\t\tconst baseSize = this.width - paddingLeft - paddingRight;\n\t\t\t\tconst spaceLeft = this.getSpaceLeft( baseSize, marginHorizontal );\n\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ) {\n\t\t\t\t\tlet y = paddingTop - marginVertical;\n\t\t\t\t\tlet width = 0;\n\t\t\t\t\tlet j = 0;\n\t\t\t\t\tfor( ; j < multiplicity && i + j < imax; ++j ) {\n\t\t\t\t\t\tconst child = children[ i + j ];\n\t\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\t\tconst clearType = child.getClearType();\n\t\t\t\t\t\t\tif( j !== 0 && (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tchild.position.set( marginHorizontal + x, marginVertical + y );\n\t\t\t\t\t\t\t\tconst weight = child.weight;\n\t\t\t\t\t\t\t\tif( 0 <= weight ) {\n\t\t\t\t\t\t\t\t\tchild.width = spaceLeft * ( weight * weightTotalInverse );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\twidth = Math.max( width, child.width );\n\t\t\t\t\t\t\t\ty += marginVertical + child.height;\n\t\t\t\t\t\t\t\tif( clearType & DLayoutClearType.AFTER ) {\n\t\t\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = icolumn;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = j;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tj += 1;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = icolumn;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = j;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = icolumn;\n\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = j - 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ti += 1;\n\t\t\t\t\t\t\tj -= 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tx += marginHorizontal + width;\n\t\t\t\t\ti += j;\n\t\t\t\t\ticolumn += 1;\n\t\t\t\t}\n\n\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\t\t\tconst child = children[ i ];\n\t\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\t\tconst i1 = 2 + ( i << 1 );\n\t\t\t\t\t\t\tconst icolumn1 = cornerAdjustWork[ i1 + 0 ];\n\t\t\t\t\t\t\tconst irow1 = cornerAdjustWork[ i1 + 1 ];\n\t\t\t\t\t\t\tconst clearType = child.getClearType();\n\n\t\t\t\t\t\t\tlet irow0 = -2;\n\t\t\t\t\t\t\tif( ! (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\t\tconst i0 = this.findColumnIndexPrevious( i1, icolumn1, cornerAdjustWork );\n\t\t\t\t\t\t\t\tif( ! this.hasClearTypeAfter( children, i0 ) ) {\n\t\t\t\t\t\t\t\t\tirow0 = cornerAdjustWork[ i0 + 1 ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet irow2 = -2;\n\t\t\t\t\t\t\tif( ! (clearType & DLayoutClearType.AFTER) ) {\n\t\t\t\t\t\t\t\tconst i2 = this.findColumnIndexNext( i1, icolumn1, cornerAdjustWork );\n\t\t\t\t\t\t\t\tif( ! this.hasClearTypeBefore( children, i2 ) ) {\n\t\t\t\t\t\t\t\t\tirow2 = cornerAdjustWork[ i2 + 1 ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst nrow = this.countRow( i1, icolumn1, cornerAdjustWork );\n\t\t\t\t\t\t\tchild.corner.mask = this.toCornerMaskRow( irow0, irow1, irow2, nrow );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ) {\n\t\t\t\t\tlet y = paddingTop - marginVertical;\n\t\t\t\t\tlet width = 0;\n\t\t\t\t\tlet j = 0;\n\t\t\t\t\tfor( ; j < multiplicity && i + j < imax; ++j ) {\n\t\t\t\t\t\tconst child = children[ i + j ];\n\t\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\t\tconst clearType = child.getClearType();\n\t\t\t\t\t\t\tif( j !== 0 && (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tchild.position.set( marginHorizontal + x, marginVertical + y );\n\t\t\t\t\t\t\t\tconst weight = child.weight;\n\t\t\t\t\t\t\t\tif( 0 <= weight ) {\n\t\t\t\t\t\t\t\t\tchild.width = 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\twidth = Math.max( width, child.width );\n\t\t\t\t\t\t\t\ty += marginVertical + child.height;\n\t\t\t\t\t\t\t\tif( clearType & DLayoutClearType.AFTER ) {\n\t\t\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = icolumn;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = j;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tj += 1;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = icolumn;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = j;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = icolumn;\n\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = j - 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ti += 1;\n\t\t\t\t\t\t\tj -= 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tx += marginHorizontal + width;\n\t\t\t\t\ti += j;\n\t\t\t\t\ticolumn += 1;\n\t\t\t\t}\n\n\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\t\t\tconst child = children[ i ];\n\t\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\t\tconst i1 = 2 + ( i << 1 );\n\t\t\t\t\t\t\tconst icolumn1 = cornerAdjustWork[ i1 + 0 ];\n\t\t\t\t\t\t\tconst irow1 = cornerAdjustWork[ i1 + 1 ];\n\t\t\t\t\t\t\tconst clearType = child.getClearType();\n\n\t\t\t\t\t\t\tlet irow0 = -2;\n\t\t\t\t\t\t\tif( ! (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\t\tconst i0 = this.findColumnIndexPrevious( i1, icolumn1, cornerAdjustWork );\n\t\t\t\t\t\t\t\tif( ! this.hasClearTypeAfter( children, i0 ) ) {\n\t\t\t\t\t\t\t\t\tirow0 = cornerAdjustWork[ i0 + 1 ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet irow2 = -2;\n\t\t\t\t\t\t\tif( ! (clearType & DLayoutClearType.AFTER) ) {\n\t\t\t\t\t\t\t\tconst i2 = this.findColumnIndexNext( i1, icolumn1, cornerAdjustWork );\n\t\t\t\t\t\t\t\tif( ! this.hasClearTypeBefore( children, i2 ) ) {\n\t\t\t\t\t\t\t\t\tirow2 = cornerAdjustWork[ i2 + 1 ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst nrow = this.countRow( i1, icolumn1, cornerAdjustWork );\n\t\t\t\t\t\t\tchild.corner.mask = this.toCornerMaskRow( irow0, irow1, irow2, nrow );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsuper.onRefit();\n\t}\n\n\tprotected hasClearTypeBefore( children: DisplayObject[], index: number ): boolean {\n\t\treturn this.hasClearType( children, index, DLayoutClearType.BEFORE );\n\t}\n\n\tprotected hasClearTypeAfter( children: DisplayObject[], index: number ): boolean {\n\t\treturn this.hasClearType( children, index, DLayoutClearType.AFTER );\n\t}\n\n\tprotected hasClearType( children: DisplayObject[], index: number, clearType: DLayoutClearType ): boolean {\n\t\tif( 2 <= index ) {\n\t\t\tconst i = (index - 2) >> 1;\n\t\t\tif( 0 <= i && i < children.length ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child instanceof DBase ) {\n\t\t\t\t\treturn !!( child.getClearType() & clearType );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected findColumnIndexPrevious( istart: number, icolumn: number, cornerAdjustWork: Float32Array ): number {\n\t\tfor( let i = istart - 2; 0 <= i; i -= 2 ) {\n\t\t\tif( cornerAdjustWork[ i ] !== icolumn ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tprotected findColumnIndexNext( istart: number, icolumn: number, cornerAdjustWork: Float32Array ): number {\n\t\tfor( let i = istart + 2, imax = cornerAdjustWork.length; i < imax; i += 2 ) {\n\t\t\tconst icolumn2 = cornerAdjustWork[ i ];\n\t\t\tif( icolumn2 !== icolumn ) {\n\t\t\t\tfor( let j = i + 2; j < imax; j += 2 ) {\n\t\t\t\t\tif( cornerAdjustWork[ j ] !== icolumn2 ) {\n\t\t\t\t\t\treturn j - 2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn cornerAdjustWork.length - 2;\n\t}\n\n\tprotected countRow( istart: number, icolumn: number, cornerAdjustWork: Float32Array ): number {\n\t\tfor( let i = istart + 2, imax = cornerAdjustWork.length; i < imax; i += 2 ) {\n\t\t\tconst icolumn2 = cornerAdjustWork[ i ];\n\t\t\tif( icolumn2 !== icolumn ) {\n\t\t\t\treturn cornerAdjustWork[ i - 2 + 1 ] + 1;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tprotected findRowIndexPrevious( istart: number, irow: number, cornerAdjustWork: Float32Array ): number {\n\t\tfor( let i = istart - 2; 0 <= i; i -= 2 ) {\n\t\t\tif( cornerAdjustWork[ i + 1 ] !== irow ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tprotected findRowIndexNext( istart: number, irow: number, cornerAdjustWork: Float32Array ): number {\n\t\tfor( let i = istart + 2, imax = cornerAdjustWork.length; i < imax; i += 2 ) {\n\t\t\tconst irow2 = cornerAdjustWork[ i + 1 ];\n\t\t\tif( irow2 !== irow ) {\n\t\t\t\tfor( let j = i + 2; j < imax; j += 2 ) {\n\t\t\t\t\tif( cornerAdjustWork[ j + 1 ] !== irow2 ) {\n\t\t\t\t\t\treturn j - 2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn cornerAdjustWork.length - 2;\n\t}\n\n\tprotected countColumn( istart: number, irow: number, cornerAdjustWork: Float32Array ): number {\n\t\tfor( let i = istart + 2, imax = cornerAdjustWork.length; i < imax; i += 2 ) {\n\t\t\tconst irow2 = cornerAdjustWork[ i + 1 ];\n\t\t\tif( irow2 !== irow ) {\n\t\t\t\treturn cornerAdjustWork[ i - 2 + 0 ] + 1;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tprotected toCornerMaskColumn( i0: number, i1: number, i2: number, n: number ): DCornerMask {\n\t\tlet result = DCornerMask.NONE;\n\t\tif( i0 + 1 < i1 && i1 === 0 ) {\n\t\t\tresult |= DCornerMask.TOP_LEFT;\n\t\t}\n\t\tif( i2 + 1 < i1 && i1 === 0 ) {\n\t\t\tresult |= DCornerMask.BOTTOM_LEFT;\n\t\t}\n\t\tif( i0 < i1 && i1 + 1 === n ) {\n\t\t\tresult |= DCornerMask.TOP_RIGHT;\n\t\t}\n\t\tif( i2 < i1 && i1 + 1 === n ) {\n\t\t\tresult |= DCornerMask.BOTTOM_RIGHT;\n\t\t}\n\t\treturn DCornerMask.ALL & (~result);\n\t}\n\n\tprotected toCornerMaskRow( i0: number, i1: number, i2: number, n: number ): DCornerMask {\n\t\tlet result = DCornerMask.NONE;\n\t\tif( i0 + 1 < i1 && i1 === 0 ) {\n\t\t\tresult |= DCornerMask.TOP_LEFT;\n\t\t}\n\t\tif( i2 + 1 < i1 && i1 === 0 ) {\n\t\t\tresult |= DCornerMask.TOP_RIGHT;\n\t\t}\n\t\tif( i0 < i1 && i1 + 1 === n ) {\n\t\t\tresult |= DCornerMask.BOTTOM_LEFT;\n\t\t}\n\t\tif( i2 < i1 && i1 + 1 === n ) {\n\t\t\tresult |= DCornerMask.BOTTOM_RIGHT;\n\t\t}\n\t\treturn DCornerMask.ALL & (~result);\n\t}\n\n\taddSpace( options?: DLayoutSpaceOptions ) {\n\t\treturn this.addChild( new DLayoutSpace( options ) );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DLayout\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilAttachAlign } from \"./util/util-attach\";\n\nexport import DMenuAlign = UtilAttachAlign;\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, interaction } from \"pixi.js\";\nimport { DMenu, DMenuOptions } from \"./d-menu\";\nimport { DMenuAlign } from \"./d-menu-align\";\nimport { Closeable } from \"./d-menu-context\";\nimport { DMenuItem, DMenuItemOptions, DThemeMenuItem } from \"./d-menu-item\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\nimport { DMenus } from \"./d-menus\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport interface DMenuItemMenuOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemMenu = DThemeMenuItemMenu\n> extends DMenuItemOptions<VALUE, THEME> {\n\tmenu: DMenuOptions<VALUE> | DMenu<VALUE>;\n}\n\nexport interface DThemeMenuItemMenu extends DThemeMenuItem {\n\n}\n\nexport class DMenuItemMenu<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemMenu = DThemeMenuItemMenu,\n\tOPTIONS extends DMenuItemMenuOptions<VALUE, THEME> = DMenuItemMenuOptions<VALUE, THEME>\n> extends DMenuItem<VALUE, THEME, OPTIONS> {\n\tprotected _menu!: DMenu<VALUE>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tUtilPointerEvent.onClick( this, (): void => {\n\t\t\tif( this.isActionable() ) {\n\t\t\t\tthis.toggle();\n\t\t\t}\n\t\t});\n\n\t\tthis.initHover( options );\n\n\t\tconst menu = this.toMenu( options );\n\t\tthis._menu = menu;\n\t\tmenu.on( \"select\", ( value: VALUE, item: DMenuItem<VALUE>, closeable: Closeable ): void => {\n\t\t\tthis.onMenuSelect( value, item, closeable );\n\t\t});\n\t}\n\n\tprotected initHover( options: OPTIONS ): void {\n\t\tthis.on( UtilPointerEvent.over, (): void => {\n\t\t\tif( this.isActionable() ) {\n\t\t\t\tthis.open();\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected toMenu( options: OPTIONS ): DMenu<VALUE> {\n\t\tconst menu = options.menu;\n\t\tif( menu instanceof DisplayObject ) {\n\t\t\treturn menu;\n\t\t}\n\t\treturn this.newMenu( menu );\n\t}\n\n\tprotected newMenu( options: DMenuOptions<VALUE> ): DMenu<VALUE> {\n\t\treturn DMenus.newMenu( options );\n\t}\n\n\tget menu(): DMenu<VALUE> {\n\t\treturn this._menu;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuItemMenu\";\n\t}\n\n\topen(): void {\n\t\tconst menu = this._menu;\n\t\tif( menu.isHidden() ) {\n\t\t\tthis.onOpen( menu );\n\t\t}\n\t}\n\n\tprotected onOpen( menu: DMenu<VALUE> ): void {\n\t\tconst context = this.getContext();\n\t\tif( context != null ) {\n\t\t\tmenu.open( this, this.getCloseable(), context );\n\t\t}\n\t}\n\n\tclose(): void {\n\t\tthis._menu.close();\n\t}\n\n\ttoggle(): void {\n\t\tconst menu = this._menu;\n\t\tif( menu.isHidden() ) {\n\t\t\tthis.onOpen( menu );\n\t\t} else {\n\t\t\tmenu.close();\n\t\t}\n\t}\n\n\tprotected onSelect( e: KeyboardEvent | interaction.InteractionEvent ): void {\n\t\tthis.open();\n\t\tsuper.onSelect( e );\n\t}\n\n\tprotected onMenuSelect( value: VALUE, item: DMenuItem<VALUE>, closeable: Closeable ): void {\n\t\tconst next = this.getCloseable();\n\t\tif( next != null ) {\n\t\t\tnext.emit( \"select\", value, item, closeable );\n\t\t}\n\t}\n\n\tstatic isCompatible<VALUE>( options: DMenuItemOptionsUnion<VALUE> ): options is DMenuItemMenuOptions<VALUE> {\n\t\treturn \"menu\" in options;\n\t}\n\n\tstatic toSubMenuOptions<VALUE>( options: DMenuItemMenuOptions<VALUE>, sticky: boolean ): DMenuItemMenuOptions<VALUE> {\n\t\tconst menu = options.menu;\n\t\tif( ! (menu instanceof DisplayObject) ) {\n\t\t\tif( menu.sticky == null ) {\n\t\t\t\tmenu.sticky = sticky;\n\t\t\t}\n\t\t\tif( menu.align == null ) {\n\t\t\t\tmenu.align = DMenuAlign.RIGHT;\n\t\t\t}\n\t\t}\n\t\treturn options;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Graphics } from \"pixi.js\";\nimport { DBase, DReflowable } from \"./d-base\";\n\nexport class DListItemSeparatorReflowable extends Graphics implements DReflowable {\n\tconstructor( base: DBase ) {\n\t\tsuper();\n\t\tbase.appendRenderable( this, true );\n\t\tbase.addReflowable( this );\n\t}\n\n\tonReflow( base: DBase, width: number, height: number ): void {\n\t\tconst state = base.state;\n\t\tconst border = base.border;\n\t\tconst borderWidth = border.getWidth( state );\n\t\tconst borderColor = border.getColor( state );\n\t\tif( borderColor != null ) {\n\t\t\tconst borderAlpha = border.getAlpha( state );\n\t\t\tconst borderAlign = border.getAlign( state );\n\t\t\tconst padding = base.padding;\n\t\t\tconst middle = height * 0.5;\n\t\t\tthis.clear();\n\t\t\tthis.lineStyle( borderWidth, borderColor, borderAlpha, borderAlign );\n\t\t\tthis.moveTo( padding.getLeft(), middle );\n\t\t\tthis.lineTo( width - padding.getRight(), middle );\n\t\t\tthis.visible = true;\n\t\t} else {\n\t\t\tthis.clear();\n\t\t\tthis.visible = false;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DListItem, DListItemOptions, DThemeListItem } from \"./d-list-item\";\nimport { DListItemSeparatorReflowable } from \"./d-list-item-separator-reflowable\";\n\nexport interface DListItemSeparatorOptions<VALUE, THEME extends DThemeListItemSeparator>\n\textends DListItemOptions<VALUE, THEME> {\n\tseparator?: true;\n}\n\nexport interface DThemeListItemSeparator extends DThemeListItem {\n\n}\n\nexport class DListItemSeparator<\n\tVALUE,\n\tTHEME extends DThemeListItemSeparator = DThemeListItemSeparator,\n\tOPTIONS extends DListItemSeparatorOptions<VALUE, THEME> = DListItemSeparatorOptions<VALUE, THEME>\n> extends DListItem<VALUE, THEME, OPTIONS> {\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis.interactive = false;\n\t\tthis.buttonMode = false;\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tprotected initReflowable(): void {\n\t\tnew DListItemSeparatorReflowable( this );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DListItemSeparator\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DListItemSeparator, DListItemSeparatorOptions, DThemeListItemSeparator } from \"./d-list-item-separator\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\n\nexport interface DMenuItemSeparatorOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemSeparator = DThemeMenuItemSeparator\n> extends DListItemSeparatorOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeMenuItemSeparator extends DThemeListItemSeparator {\n\n}\n\nexport class DMenuItemSeparator<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemSeparator = DThemeMenuItemSeparator,\n\tOPTIONS extends DMenuItemSeparatorOptions<VALUE, THEME> = DMenuItemSeparatorOptions<VALUE, THEME>\n> extends DListItemSeparator<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuItemSeparator\";\n\t}\n\n\tstatic isCompatible<VALUE>( options: DMenuItemOptionsUnion<VALUE> ): options is DMenuItemSeparatorOptions<VALUE> {\n\t\treturn \"separator\" in options;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\n\nexport interface DLayoutSpaceOptions<THEME extends DThemeLayoutSpace = DThemeLayoutSpace> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemeLayoutSpace extends DThemeBase {\n\n}\n\nexport class DLayoutSpace<\n\tTHEME extends DThemeLayoutSpace = DThemeLayoutSpace,\n\tOPTIONS extends DLayoutSpaceOptions<THEME> = DLayoutSpaceOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis.visible = false;\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DLayoutSpace\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DLayoutSpace, DLayoutSpaceOptions, DThemeLayoutSpace } from \"./d-layout-space\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\n\nexport interface DMenuItemSpaceOptions<\n\tTHEME extends DThemeMenuItemSpace = DThemeMenuItemSpace\n> extends DLayoutSpaceOptions<THEME> {\n\tspace: true;\n}\n\nexport interface DThemeMenuItemSpace extends DThemeLayoutSpace {\n\n}\n\nexport class DMenuItemSpace<\n\tTHEME extends DThemeMenuItemSpace = DThemeMenuItemSpace,\n\tOPTIONS extends DMenuItemSpaceOptions<THEME> = DMenuItemSpaceOptions<THEME>\n> extends DLayoutSpace<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuItemSpace\";\n\t}\n\n\tstatic isCompatible<VALUE>( options: DMenuItemOptionsUnion<VALUE> ): options is DMenuItemSpaceOptions {\n\t\treturn \"space\" in options;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DMenuItemCheck } from \"../d-menu-item-check\";\nimport { DMenuItemLink } from \"../d-menu-item-link\";\nimport { DMenuItemMenu } from \"../d-menu-item-menu\";\nimport { DMenuItemOptionsUnion } from \"../d-menu-item-options-union\";\nimport { DMenuItemSeparator } from \"../d-menu-item-separator\";\nimport { DMenuItemSpace } from \"../d-menu-item-space\";\nimport { DMenuItemText } from \"../d-menu-item-text\";\nimport { DMenus } from \"../d-menus\";\n\nexport const loadMenuItem = () => {\n\tDMenus.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemCheck.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemCheck( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenus.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemLink.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemLink( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenus.addItemCreator(( options: DMenuItemOptionsUnion<any>, sticky: boolean ): DisplayObject | null => {\n\t\tif( DMenuItemMenu.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemMenu( DMenuItemMenu.toSubMenuOptions( options, sticky ) );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenus.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemSeparator.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemSeparator( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenus.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemSpace.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemSpace( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenus.setItemCreatorDefault(( options: any ): DisplayObject | null => {\n\t\treturn new DMenuItemText( options );\n\t});\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeType {\n\tCIRCLE,\n\tRECTANGLE,\n\tRECTANGLE_ROUNDED,\n\tTRIANGLE,\n\tTRIANGLE_ROUNDED,\n\tLINE,\n\tIMAGE,\n\tGROUP,\n\tBAR,\n\tLABEL,\n\tNULL,\n\tGROUP_SHADOWED,\n\tEXTENSION = 1000\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DLayout, DLayoutOptions, DThemeLayout } from \"./d-layout\";\n\nexport interface DLayoutVerticalOptions<THEME extends DThemeLayout> extends DLayoutOptions<THEME> {\n\n}\n\nexport interface DThemeLayoutVertical extends DThemeLayout {\n\n}\n\nexport class DLayoutVertical<\n\tTHEME extends DThemeLayoutVertical = DThemeLayoutVertical,\n\tOPTIONS extends DLayoutVerticalOptions<THEME> = DLayoutVerticalOptions<THEME>\n> extends DLayout<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DLayoutVertical\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DLayoutVertical, DLayoutVerticalOptions, DThemeLayoutVertical } from \"./d-layout-vertical\";\n\nexport interface DMenuItemExpandableBodyOptions<\n\tTHEME extends DThemeMenuItemExpandableBody = DThemeMenuItemExpandableBody\n> extends DLayoutVerticalOptions<THEME> {\n\n}\n\nexport interface DThemeMenuItemExpandableBody extends DThemeLayoutVertical {\n\n}\n\nexport class DMenuItemExpandableBody<\n\tTHEME extends DThemeMenuItemExpandableBody = DThemeMenuItemExpandableBody,\n\tOPTIONS extends DMenuItemExpandableBodyOptions<THEME> = DMenuItemExpandableBodyOptions<THEME>\n> extends DLayoutVertical<THEME, OPTIONS> {\n\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuItemExpandableBody\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction } from \"pixi.js\";\nimport { DListItem, DListItemOptions, DListItemSelection, DThemeListItem } from \"./d-list-item\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport interface DMenuItemExpandableHeaderOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemExpandableHeader = DThemeMenuItemExpandableHeader\n> extends DListItemOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeMenuItemExpandableHeader extends DThemeListItem {\n\n}\n\nexport class DMenuItemExpandableHeader<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemExpandableHeader = DThemeMenuItemExpandableHeader,\n\tOPTIONS extends DMenuItemExpandableHeaderOptions<VALUE, THEME> = DMenuItemExpandableHeaderOptions<VALUE, THEME>\n> extends DListItem<VALUE, THEME, OPTIONS> {\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis.on( UtilPointerEvent.down, ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( this.isActionable() ) {\n\t\t\t\tthis.onSelect( e );\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected getSelection(): DListItemSelection | null {\n\t\treturn null;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuItemExpandableHeader\";\n\t}\n\n\tprotected onSelect( e: KeyboardEvent | interaction.InteractionEvent ) {\n\t\tthis.emit( \"select\", this );\n\t\tsuper.onSelect( e );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, DisplayObject } from \"pixi.js\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\nimport { DMenuItemCreator, DMenus } from \"./d-menus\";\n\nexport class DMenuItemExpandables {\n\tprotected static CREATORS: DMenuItemCreator[] = [];\n\tprotected static CREATOR_DEFAULT: DMenuItemCreator | null = null;\n\n\tstatic addItemCreator( creator: DMenuItemCreator ): void {\n\t\tthis.CREATORS.push( creator );\n\t}\n\n\tstatic setItemCreatorDefault( creator: DMenuItemCreator ): void {\n\t\tthis.CREATOR_DEFAULT = creator;\n\t}\n\n\tstatic newItem<VALUE>( options: DMenuItemOptionsUnion<VALUE>, sticky: boolean ): DisplayObject | null {\n\t\treturn DMenus.newItemOf( this.CREATORS, this.CREATOR_DEFAULT, options, sticky ) ||\n\t\t\tDMenus.newItem( options, sticky );\n\t}\n\n\tstatic newItems<VALUE>(\n\t\tparent: Container,\n\t\titems: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject>,\n\t\tsticky: boolean\n\t): void {\n\t\tDMenus.newItemsOf( this, parent, items, sticky );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, DisplayObject } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DBaseStates } from \"./d-base-states\";\nimport { DLayoutVertical, DLayoutVerticalOptions, DThemeLayoutVertical } from \"./d-layout-vertical\";\nimport { DMenuItemExpandableBody, DMenuItemExpandableBodyOptions } from \"./d-menu-item-expandable-body\";\nimport { DMenuItemExpandableHeader, DMenuItemExpandableHeaderOptions } from \"./d-menu-item-expandable-header\";\nimport { DMenuItemExpandables } from \"./d-menu-item-expandables\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\n\nexport interface DMenuItemExpandableOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemExpandable = DThemeMenuItemExpandable,\n> extends DLayoutVerticalOptions<THEME> {\n\theader: DisplayObject | DMenuItemExpandableHeaderOptions<VALUE>;\n\tbody?: Container | DMenuItemExpandableBodyOptions;\n\titems?: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject>;\n\tsticky?: boolean;\n}\n\nexport interface DThemeMenuItemExpandable extends DThemeLayoutVertical {\n\n}\n\nexport class DMenuItemExpandable<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemExpandable = DThemeMenuItemExpandable,\n\tOPTIONS extends DMenuItemExpandableOptions<VALUE, THEME> = DMenuItemExpandableOptions<VALUE, THEME>\n> extends DLayoutVertical<THEME, OPTIONS> {\n\tprotected _header!: DisplayObject;\n\tprotected _body!: DisplayObject;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\t// Header\n\t\tconst theme = this.theme;\n\t\tconst header = this.toHeader( theme, options );\n\t\tthis._header = header;\n\t\theader.on( \"select\", (): void => {\n\t\t\tthis.toggle();\n\t\t});\n\t\tthis.addChild( header );\n\n\t\t// Body\n\t\tconst body = this.toBody( theme, options );\n\t\tthis._body = body;\n\t\tconst sticky = ( options && options.sticky != null ? options.sticky : false );\n\t\tthis.newItems( body, sticky, theme, options );\n\t\tthis.addChild( body );\n\n\t\t//\n\t\tif( this.isActive() ) {\n\t\t\tthis.onActivated();\n\t\t} else {\n\t\t\tthis.onDeactivated();\n\t\t}\n\t}\n\n\tprotected newItems( body: Container, sticky: boolean, theme: THEME, options: OPTIONS | undefined ): void {\n\t\tif( options != null && options.items != null ) {\n\t\t\tDMenuItemExpandables.newItems( body, options.items, sticky );\n\t\t}\n\t}\n\n\tprotected toHeader( theme: THEME, options?: OPTIONS ): DisplayObject {\n\t\tif( options ) {\n\t\t\tif( options.header instanceof DisplayObject ) {\n\t\t\t\treturn options.header;\n\t\t\t} else {\n\t\t\t\treturn this.newHeader( theme, options.header );\n\t\t\t}\n\t\t}\n\t\treturn this.newHeader( theme );\n\t}\n\n\tprotected newHeader( theme: THEME, options?: DMenuItemExpandableHeaderOptions<VALUE> ): DisplayObject {\n\t\treturn new DMenuItemExpandableHeader<VALUE>( options );\n\t}\n\n\tprotected toBody( theme: THEME,  options?: OPTIONS ): Container {\n\t\tif( options && options.body ) {\n\t\t\tif( options.body instanceof DisplayObject ) {\n\t\t\t\treturn options.body;\n\t\t\t} else {\n\t\t\t\treturn this.newBody( theme, options.body );\n\t\t\t}\n\t\t}\n\t\treturn this.newBody( theme );\n\t}\n\n\tprotected newBody( theme: THEME, options?: DMenuItemExpandableBodyOptions ): Container {\n\t\treturn new DMenuItemExpandableBody( options );\n\t}\n\n\topen(): void {\n\t\tthis.setActive( true );\n\t}\n\n\tclose(): void {\n\t\tthis.setActive( false );\n\t}\n\n\ttoggle(): void {\n\t\tthis.setActive( ! this.isActive() );\n\t}\n\n\tprotected onActivated(): void {\n\t\tconst body = this._body;\n\t\tif( body instanceof DBase ) {\n\t\t\tbody.show();\n\t\t} else {\n\t\t\tbody.visible = true;\n\t\t}\n\t}\n\n\tprotected onDeactivated(): void {\n\t\tconst body = this._body;\n\t\tif( body instanceof DBase ) {\n\t\t\tbody.hide();\n\t\t} else {\n\t\t\tbody.visible = false;\n\t\t}\n\t}\n\n\tprotected onStateChange( newState: DBaseState, oldState: DBaseState ): void {\n\t\tsuper.onStateChange( newState, oldState );\n\n\t\tif( DBaseStates.isActive( newState ) ) {\n\t\t\tif( ! DBaseStates.isActive( oldState ) ) {\n\t\t\t\tthis.onActivated();\n\t\t\t}\n\t\t} else {\n\t\t\tif( DBaseStates.isActive( oldState ) ) {\n\t\t\t\tthis.onDeactivated();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuItemExpandable\";\n\t}\n\n\tstatic isCompatible<VALUE>( options: DMenuItemOptionsUnion<VALUE> ): options is DMenuItemExpandableOptions<VALUE> {\n\t\treturn \"header\" in options;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemCheck, DMenuItemCheckOptions, DThemeMenuItemCheck } from \"./d-menu-item-check\";\n\nexport class DMenuItemExpandableItemCheck<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemCheck = DThemeMenuItemCheck,\n\tOPTIONS extends DMenuItemCheckOptions<VALUE, THEME> = DMenuItemCheckOptions<VALUE, THEME>\n> extends DMenuItemCheck<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuItemExpandableItemCheck\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemLink, DMenuItemLinkOptions, DThemeMenuItemLink } from \"./d-menu-item-link\";\n\nexport class DMenuItemExpandableItemLink<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemLink = DThemeMenuItemLink,\n\tOPTIONS extends DMenuItemLinkOptions<VALUE, THEME> = DMenuItemLinkOptions<VALUE, THEME>\n> extends DMenuItemLink<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuItemExpandableItemLink\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemSeparator, DMenuItemSeparatorOptions, DThemeMenuItemSeparator } from \"./d-menu-item-separator\";\n\nexport class DMenuItemExpandableItemSeparator<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemSeparator = DThemeMenuItemSeparator,\n\tOPTIONS extends DMenuItemSeparatorOptions<VALUE, THEME> = DMenuItemSeparatorOptions<VALUE, THEME>\n> extends DMenuItemSeparator<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuItemExpandableItemSeparator\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemSpace, DMenuItemSpaceOptions, DThemeMenuItemSpace } from \"./d-menu-item-space\";\n\nexport class DMenuItemExpandableItemSpace<\n\tTHEME extends DThemeMenuItemSpace = DThemeMenuItemSpace,\n\tOPTIONS extends DMenuItemSpaceOptions<THEME> = DMenuItemSpaceOptions<THEME>\n> extends DMenuItemSpace<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuItemExpandableItemSpace\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemText, DMenuItemTextOptions, DThemeMenuItemText } from \"./d-menu-item-text\";\n\nexport class DMenuItemExpandableItemText<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemText = DThemeMenuItemText,\n\tOPTIONS extends DMenuItemTextOptions<VALUE, THEME> = DMenuItemTextOptions<VALUE, THEME>\n> extends DMenuItemText<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuItemExpandableItemText\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DMenuItemCheck } from \"../d-menu-item-check\";\nimport { DMenuItemExpandable } from \"../d-menu-item-expandable\";\nimport { DMenuItemExpandableItemCheck } from \"../d-menu-item-expandable-item-check\";\nimport { DMenuItemExpandableItemLink } from \"../d-menu-item-expandable-item-link\";\nimport { DMenuItemExpandableItemSeparator } from \"../d-menu-item-expandable-item-separator\";\nimport { DMenuItemExpandableItemSpace } from \"../d-menu-item-expandable-item-space\";\nimport { DMenuItemExpandableItemText } from \"../d-menu-item-expandable-item-text\";\nimport { DMenuItemExpandables } from \"../d-menu-item-expandables\";\nimport { DMenuItemLink } from \"../d-menu-item-link\";\nimport { DMenuItemOptionsUnion } from \"../d-menu-item-options-union\";\nimport { DMenuItemSeparator } from \"../d-menu-item-separator\";\nimport { DMenuItemSpace } from \"../d-menu-item-space\";\nimport { DMenus } from \"../d-menus\";\n\nexport const loadMenuItemExpandable = () => {\n\tDMenus.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemExpandable.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemExpandable( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuItemExpandables.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemCheck.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemExpandableItemCheck( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuItemExpandables.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemLink.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemExpandableItemLink( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuItemExpandables.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemSeparator.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemExpandableItemSeparator( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuItemExpandables.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemSpace.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemExpandableItemSpace( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuItemExpandables.setItemCreatorDefault(( options: any ): DisplayObject | null => {\n\t\treturn new DMenuItemExpandableItemText( options );\n\t});\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemCheck, DMenuItemCheckOptions, DThemeMenuItemCheck } from \"./d-menu-item-check\";\n\nexport class DMenuSidedItemCheck<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemCheck = DThemeMenuItemCheck,\n\tOPTIONS extends DMenuItemCheckOptions<VALUE, THEME> = DMenuItemCheckOptions<VALUE, THEME>\n> extends DMenuItemCheck<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemCheck\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DListItemSelection } from \"./d-list-item\";\nimport { DMenuItemLink, DMenuItemLinkOptions, DThemeMenuItemLink } from \"./d-menu-item-link\";\n\nexport class DMenuSidedItemLink<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemLink = DThemeMenuItemLink,\n\tOPTIONS extends DMenuItemLinkOptions<VALUE, THEME> = DMenuItemLinkOptions<VALUE, THEME>\n> extends DMenuItemLink<VALUE, THEME, OPTIONS> {\n\tprotected getSelection(): DListItemSelection | null {\n\t\treturn null;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemLink\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenu } from \"./d-menu\";\nimport { Closeable } from \"./d-menu-context\";\nimport { DMenuItem } from \"./d-menu-item\";\nimport { DMenuItemMenu, DMenuItemMenuOptions, DThemeMenuItemMenu } from \"./d-menu-item-menu\";\n\nexport class DMenuSidedItemMenu<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemMenu = DThemeMenuItemMenu,\n\tOPTIONS extends DMenuItemMenuOptions<VALUE, THEME> = DMenuItemMenuOptions<VALUE, THEME>\n> extends DMenuItemMenu<VALUE, THEME, OPTIONS> {\n\tprotected initHover( options: OPTIONS ): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected onMenuSelect( value: VALUE, item: DMenuItem<VALUE>, closeable: Closeable ): void {\n\t\tsuper.onMenuSelect( value, item, closeable );\n\t\tconst selection = this.getSelection();\n\t\tif( selection ) {\n\t\t\tselection.add( item );\n\t\t}\n\t}\n\n\tprotected onOpen( menu: DMenu<VALUE> ): void {\n\t\tmenu.open( this, this );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemMenu\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemSeparator, DMenuItemSeparatorOptions, DThemeMenuItemSeparator } from \"./d-menu-item-separator\";\n\nexport class DMenuSidedItemSeparator<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemSeparator = DThemeMenuItemSeparator,\n\tOPTIONS extends DMenuItemSeparatorOptions<VALUE, THEME> = DMenuItemSeparatorOptions<VALUE, THEME>\n> extends DMenuItemSeparator<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemSeparator\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemSpace, DMenuItemSpaceOptions, DThemeMenuItemSpace } from \"./d-menu-item-space\";\n\nexport class DMenuSidedItemSpace<\n\tTHEME extends DThemeMenuItemSpace = DThemeMenuItemSpace,\n\tOPTIONS extends DMenuItemSpaceOptions<THEME> = DMenuItemSpaceOptions<THEME>\n> extends DMenuItemSpace<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemSpace\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemText, DMenuItemTextOptions, DThemeMenuItemText } from \"./d-menu-item-text\";\n\nexport class DMenuSidedItemText<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemText = DThemeMenuItemText,\n\tOPTIONS extends DMenuItemTextOptions<VALUE, THEME> = DMenuItemTextOptions<VALUE, THEME>\n> extends DMenuItemText<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemText\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, DisplayObject } from \"pixi.js\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\nimport { DMenuItemCreator, DMenus } from \"./d-menus\";\n\nexport class DMenuSideds {\n\tprotected static CREATORS: DMenuItemCreator[] = [];\n\tprotected static CREATOR_DEFAULT: DMenuItemCreator | null = null;\n\n\tstatic addItemCreator( creator: DMenuItemCreator ): void {\n\t\tthis.CREATORS.push( creator );\n\t}\n\n\tstatic setItemCreatorDefault( creator: DMenuItemCreator ): void {\n\t\tthis.CREATOR_DEFAULT = creator;\n\t}\n\n\tstatic newItem<VALUE>( options: DMenuItemOptionsUnion<VALUE>, sticky: boolean ): DisplayObject | null {\n\t\treturn DMenus.newItemOf( this.CREATORS, this.CREATOR_DEFAULT, options, sticky ) ||\n\t\t\tDMenus.newItem( options, sticky );\n\t}\n\n\tstatic newItems<VALUE>(\n\t\tparent: Container,\n\t\titems: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject>,\n\t\tsticky: boolean\n\t): void {\n\t\tDMenus.newItemsOf( this, parent, items, sticky );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DMenuItemCheck } from \"../d-menu-item-check\";\nimport { DMenuItemLink } from \"../d-menu-item-link\";\nimport { DMenuItemMenu } from \"../d-menu-item-menu\";\nimport { DMenuItemOptionsUnion } from \"../d-menu-item-options-union\";\nimport { DMenuItemSeparator } from \"../d-menu-item-separator\";\nimport { DMenuItemSpace } from \"../d-menu-item-space\";\nimport { DMenuSidedItemCheck } from \"../d-menu-sided-item-check\";\nimport { DMenuSidedItemLink } from \"../d-menu-sided-item-link\";\nimport { DMenuSidedItemMenu } from \"../d-menu-sided-item-menu\";\nimport { DMenuSidedItemSeparator } from \"../d-menu-sided-item-separator\";\nimport { DMenuSidedItemSpace } from \"../d-menu-sided-item-space\";\nimport { DMenuSidedItemText } from \"../d-menu-sided-item-text\";\nimport { DMenuSideds } from \"../d-menu-sideds\";\n\nexport const loadMenuSidedItem = () => {\n\tDMenuSideds.setItemCreatorDefault(( options: any ): DisplayObject | null => {\n\t\treturn new DMenuSidedItemText( options );\n\t});\n\n\tDMenuSideds.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemSpace.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemSpace( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSideds.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemSeparator.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemSeparator( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSideds.addItemCreator(( options: DMenuItemOptionsUnion<any>, sticky: boolean ): DisplayObject | null => {\n\t\tif( DMenuItemMenu.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemMenu( DMenuItemMenu.toSubMenuOptions( options, sticky ) );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSideds.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemLink.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemLink( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSideds.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemCheck.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemCheck( options );\n\t\t}\n\t\treturn null;\n\t});\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, DisplayObject } from \"pixi.js\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\nimport { DMenuSideds } from \"./d-menu-sideds\";\nimport { DMenuItemCreator, DMenus } from \"./d-menus\";\n\nexport class DMenuSidedItemExpandables {\n\tprotected static CREATORS: DMenuItemCreator[] = [];\n\tprotected static CREATOR_DEFAULT: DMenuItemCreator | null = null;\n\n\tstatic addItemCreator( creator: DMenuItemCreator ): void {\n\t\tthis.CREATORS.push( creator );\n\t}\n\n\tstatic setItemCreatorDefault( creator: DMenuItemCreator ): void {\n\t\tthis.CREATOR_DEFAULT = creator;\n\t}\n\n\tstatic newItem<VALUE>( options: DMenuItemOptionsUnion<VALUE>, sticky: boolean ): DisplayObject | null {\n\t\treturn DMenus.newItemOf( this.CREATORS, this.CREATOR_DEFAULT, options, sticky ) ||\n\t\t\tDMenuSideds.newItem( options, sticky );\n\t}\n\n\tstatic newItems<VALUE>(\n\t\tparent: Container,\n\t\titems: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject>,\n\t\tsticky: boolean\n\t): void {\n\t\tDMenus.newItemsOf( this, parent, items, sticky );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container } from \"pixi.js\";\nimport { DMenuItemExpandable, DMenuItemExpandableOptions, DThemeMenuItemExpandable } from \"./d-menu-item-expandable\";\nimport { DMenuSidedItemExpandables } from \"./d-menu-sided-item-expandables\";\n\nexport class DMenuSidedItemExpandable<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemExpandable = DThemeMenuItemExpandable,\n\tOPTIONS extends DMenuItemExpandableOptions<VALUE, THEME> = DMenuItemExpandableOptions<VALUE, THEME>\n> extends DMenuItemExpandable<VALUE, THEME, OPTIONS> {\n\tprotected newItems( body: Container, sticky: boolean, theme: THEME, options: OPTIONS | undefined ): void {\n\t\tif( options != null && options.items != null ) {\n\t\t\tDMenuSidedItemExpandables.newItems( body, options.items, sticky );\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemExpandable\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemCheckOptions, DThemeMenuItemCheck } from \"./d-menu-item-check\";\nimport { DMenuItemExpandableItemCheck } from \"./d-menu-item-expandable-item-check\";\n\nexport class DMenuSidedItemExpandableItemCheck<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemCheck = DThemeMenuItemCheck,\n\tOPTIONS extends DMenuItemCheckOptions<VALUE, THEME> = DMenuItemCheckOptions<VALUE, THEME>\n> extends DMenuItemExpandableItemCheck<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemExpandableItemCheck\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemLink, DMenuItemLinkOptions, DThemeMenuItemLink } from \"./d-menu-item-link\";\n\nexport class DMenuSidedItemExpandableItemLink<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemLink = DThemeMenuItemLink,\n\tOPTIONS extends DMenuItemLinkOptions<VALUE, THEME> = DMenuItemLinkOptions<VALUE, THEME>\n> extends DMenuItemLink<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemExpandableItemLink\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemMenu, DMenuItemMenuOptions, DThemeMenuItemMenu } from \"./d-menu-item-menu\";\n\nexport class DMenuItemExpandableItemMenu<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemMenu = DThemeMenuItemMenu,\n\tOPTIONS extends DMenuItemMenuOptions<VALUE, THEME> = DMenuItemMenuOptions<VALUE, THEME>\n> extends DMenuItemMenu<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuItemExpandableItemMenu\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenu } from \"./d-menu\";\nimport { DMenuItemExpandableItemMenu } from \"./d-menu-item-expandable-item-menu\";\nimport { DMenuItemMenuOptions, DThemeMenuItemMenu } from \"./d-menu-item-menu\";\n\nexport class DMenuSidedItemExpandableItemMenu<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemMenu = DThemeMenuItemMenu,\n\tOPTIONS extends DMenuItemMenuOptions<VALUE, THEME> = DMenuItemMenuOptions<VALUE, THEME>\n> extends DMenuItemExpandableItemMenu<VALUE, THEME, OPTIONS> {\n\tprotected onOpen( menu: DMenu<VALUE> ): void {\n\t\tmenu.open( this, this );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemExpandableItemMenu\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemExpandableItemSeparator } from \"./d-menu-item-expandable-item-separator\";\nimport { DMenuItemSeparatorOptions, DThemeMenuItemSeparator } from \"./d-menu-item-separator\";\n\nexport class DMenuSidedItemExpandableItemSeparator<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemSeparator = DThemeMenuItemSeparator,\n\tOPTIONS extends DMenuItemSeparatorOptions<VALUE, THEME> = DMenuItemSeparatorOptions<VALUE, THEME>\n> extends DMenuItemExpandableItemSeparator<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemSeparator\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemExpandableItemSpace } from \"./d-menu-item-expandable-item-space\";\nimport { DMenuItemSpaceOptions, DThemeMenuItemSpace } from \"./d-menu-item-space\";\n\nexport class DMenuSidedItemExpandableItemSpace<\n\tTHEME extends DThemeMenuItemSpace = DThemeMenuItemSpace,\n\tOPTIONS extends DMenuItemSpaceOptions<THEME> = DMenuItemSpaceOptions<THEME>\n> extends DMenuItemExpandableItemSpace<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemExpandableItemSpace\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemExpandableItemText } from \"./d-menu-item-expandable-item-text\";\nimport { DMenuItemTextOptions, DThemeMenuItemText } from \"./d-menu-item-text\";\n\nexport class DMenuSidedItemExpandableItemText<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemText = DThemeMenuItemText,\n\tOPTIONS extends DMenuItemTextOptions<VALUE, THEME> = DMenuItemTextOptions<VALUE, THEME>\n> extends DMenuItemExpandableItemText<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemExpandableItemText\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DMenuItemCheck } from \"../d-menu-item-check\";\nimport { DMenuItemExpandable } from \"../d-menu-item-expandable\";\nimport { DMenuItemLink } from \"../d-menu-item-link\";\nimport { DMenuItemMenu } from \"../d-menu-item-menu\";\nimport { DMenuItemOptionsUnion } from \"../d-menu-item-options-union\";\nimport { DMenuItemSeparator } from \"../d-menu-item-separator\";\nimport { DMenuItemSpace } from \"../d-menu-item-space\";\nimport { DMenuSidedItemExpandable } from \"../d-menu-sided-item-expandable\";\nimport { DMenuSidedItemExpandableItemCheck } from \"../d-menu-sided-item-expandable-item-check\";\nimport { DMenuSidedItemExpandableItemLink } from \"../d-menu-sided-item-expandable-item-link\";\nimport { DMenuSidedItemExpandableItemMenu } from \"../d-menu-sided-item-expandable-item-menu\";\nimport { DMenuSidedItemExpandableItemSeparator } from \"../d-menu-sided-item-expandable-item-separator\";\nimport { DMenuSidedItemExpandableItemSpace } from \"../d-menu-sided-item-expandable-item-space\";\nimport { DMenuSidedItemExpandableItemText } from \"../d-menu-sided-item-expandable-item-text\";\nimport { DMenuSidedItemExpandables } from \"../d-menu-sided-item-expandables\";\nimport { DMenuSideds } from \"../d-menu-sideds\";\n\nexport const loadMenuSidedItemExpandable = () => {\n\tDMenuSideds.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemExpandable.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemExpandable( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSidedItemExpandables.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemCheck.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemExpandableItemCheck( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSidedItemExpandables.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemLink.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemExpandableItemLink( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSidedItemExpandables.addItemCreator((\n\t\toptions: DMenuItemOptionsUnion<any>, sticky: boolean\n\t): DisplayObject | null => {\n\t\tif( DMenuItemMenu.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemExpandableItemMenu( DMenuItemMenu.toSubMenuOptions( options, sticky ) );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSidedItemExpandables.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemSeparator.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemExpandableItemSeparator( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSidedItemExpandables.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemSpace.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemExpandableItemSpace( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSidedItemExpandables.setItemCreatorDefault(( options: any ): DisplayObject | null => {\n\t\treturn new DMenuSidedItemExpandableItemText( options );\n\t});\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { loadMenuItem } from \"./load-menu-item\";\nimport { loadMenuItemExpandable } from \"./load-menu-item-expandable\";\nimport { loadMenuSidedItem } from \"./load-menu-sided-item\";\nimport { loadMenuSidedItemExpandable } from \"./load-menu-sided-item-expandable\";\n\nexport const loadMenuItemAll = () => {\n\tloadMenuItem();\n\tloadMenuItemExpandable();\n\tloadMenuSidedItem();\n\tloadMenuSidedItemExpandable();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../d-diagram-serialized\";\nimport { EShape } from \"./e-shape\";\nimport { EShapeResourceManagerDeserialization } from \"./e-shape-resource-manager-deserialization\";\n\ntype Deserializer = (\n\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n) => Promise<EShape> | EShape | null;\n\nexport const EShapeDeserializers: { [ type: number ]: Deserializer | undefined } = {};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"./e-shape\";\nimport { EShapeBuffer } from \"./e-shape-buffer\";\nimport { EShapeUploaded } from \"./e-shape-uploaded\";\n\nexport type EShapeUploadedCreator = (\n\tbuffer: EShapeBuffer, shape: EShape, voffset: number, ioffset: number\n) => EShapeUploaded | null;\n\nexport const EShapeUploadeds: {\n\t[ type: number ]: EShapeUploadedCreator | undefined\n} = {};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix, Point } from \"pixi.js\";\nimport { EShapePointsParent } from \"./e-shape-points-parent\";\nimport { EShapeResourceManagerSerialization } from \"./e-shape-resource-manager-serialization\";\n\nexport enum EShapePointsStyle {\n\tNONE = 0,\n\tCLOSED = 1,\n\tNON_EXPANDING_WIDTH = 2,\n\tNON_SHRINKING_WIDTH = 4,\n\tNON_SCALING_DOT_AND_DASH = 8,\n\tDOTTED = 16,\n\tDOTTED_DENSELY = 32,\n\tDOTTED_LOOSELY = 64,\n\tDASHED = 128,\n\tDASHED_DENSELY = 256,\n\tDASHED_LOOSELY = 512,\n\tDOTTED_MASK = DOTTED | DOTTED_DENSELY | DOTTED_LOOSELY,\n\tDASHED_MASK = DASHED | DASHED_DENSELY | DASHED_LOOSELY,\n\tNON_SOLID_MASK = DOTTED_MASK | DASHED_MASK\n}\n\nexport interface EShapePoints {\n\treadonly length: number;\n\treadonly id: number;\n\tvalues: number[];\n\tsegments: number[];\n\tstyle: EShapePointsStyle;\n\n\tset( values?: number[], segments?: number[], style?: EShapePointsStyle ): this;\n\tcopy( source: EShapePoints ): this;\n\tclone( parent: EShapePointsParent ): EShapePoints;\n\ttoPoints( transform: Matrix ): Point[];\n\tserialize( manager: EShapeResourceManagerSerialization ): number;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint } from \"pixi.js\";\nimport { EShapePointsStyle } from \"./e-shape-points\";\n\nexport class EShapePointsStyleUploadeds {\n\tstatic toScaleInvariant( style: EShapePointsStyle ): number {\n\t\tconst nonExpandingWidth = ( style & EShapePointsStyle.NON_EXPANDING_WIDTH ? 1 : 0 );\n\t\tconst nonShrinkingWidth = ( style & EShapePointsStyle.NON_SHRINKING_WIDTH ? 2 : 0 );\n\t\tconst nonScalingDotAndDash = ( style & EShapePointsStyle.NON_SCALING_DOT_AND_DASH ? 4 : 0 );\n\t\tif( style & EShapePointsStyle.NON_SOLID_MASK ) {\n\t\t\treturn nonExpandingWidth | nonShrinkingWidth | nonScalingDotAndDash;\n\t\t} else {\n\t\t\treturn nonExpandingWidth | nonShrinkingWidth;\n\t\t}\n\t}\n\n\tstatic toDash(\n\t\tlength: number, strokeWidth: number, style: EShapePointsStyle, result: IPoint\n\t): IPoint {\n\t\tresult.set( 2 * length, 0 );\n\t\tif( style & EShapePointsStyle.NON_SOLID_MASK ) {\n\t\t\tif( style & EShapePointsStyle.DOTTED ) {\n\t\t\t\tresult.set( strokeWidth, strokeWidth );\n\t\t\t} else if( style & EShapePointsStyle.DOTTED_DENSELY ) {\n\t\t\t\tresult.set( strokeWidth, strokeWidth * 0.5 );\n\t\t\t} else if( style & EShapePointsStyle.DOTTED_LOOSELY ) {\n\t\t\t\tresult.set( strokeWidth, strokeWidth * 2 );\n\t\t\t} else if( style & EShapePointsStyle.DASHED ) {\n\t\t\t\tresult.set( strokeWidth * 2, strokeWidth );\n\t\t\t} else if( style & EShapePointsStyle.DASHED_DENSELY ) {\n\t\t\t\tresult.set( strokeWidth * 2, strokeWidth * 0.5 );\n\t\t\t} else if( style & EShapePointsStyle.DASHED_LOOSELY ) {\n\t\t\t\tresult.set( strokeWidth * 2, strokeWidth * 2 );\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeBarPosition {\n\tTOP,\n\tLEFT,\n\tRIGHT,\n\tBOTTOM\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix, Point } from \"pixi.js\";\nimport { EShapePoints, EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapePointsParent } from \"../e-shape-points-parent\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeBarPosition } from \"./e-shape-bar-position\";\n\nexport class EShapeBarPoints implements EShapePoints {\n\tprotected _parent: EShapePointsParent;\n\tprotected _id: number;\n\tprotected _style: EShapePointsStyle;\n\tprotected _values: [ number, number, number, number ];\n\tprotected _segments: number[];\n\tprotected _size: number;\n\tprotected _position: EShapeBarPosition;\n\n\tprotected _updatedSize: number;\n\tprotected _updatedParentSizeX: number;\n\tprotected _updatedParentSizeY: number;\n\tprotected _updatedPosition: EShapeBarPosition;\n\n\tconstructor( parent: EShapePointsParent, position: EShapeBarPosition, size: number, style: EShapePointsStyle ) {\n\t\tthis._parent = parent;\n\t\tthis._id = 0;\n\t\tthis._values = [ 0, 0, 0, 0 ];\n\t\tthis._segments = [];\n\t\tthis._style = style;\n\t\tthis._size = size;\n\t\tthis._position = position;\n\n\t\tthis._updatedSize = NaN;\n\t\tthis._updatedParentSizeX = NaN;\n\t\tthis._updatedParentSizeY = NaN;\n\t\tthis._updatedPosition = NaN;\n\t}\n\n\tprotected getComputedSize( size: number, position: EShapeBarPosition, sizeX: number, sizeY: number ): number {\n\t\tif( 0 <= size ) {\n\t\t\treturn size;\n\t\t} else {\n\t\t\tswitch( position ) {\n\t\t\tcase EShapeBarPosition.TOP:\n\t\t\tcase EShapeBarPosition.BOTTOM:\n\t\t\t\treturn Math.abs( sizeY );\n\t\t\tcase EShapeBarPosition.RIGHT:\n\t\t\tcase EShapeBarPosition.LEFT:\n\t\t\t\treturn Math.abs( sizeX );\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tprotected update(): void {\n\t\tconst parentSize = this._parent.size;\n\t\tconst parentSizeX = parentSize.x;\n\t\tconst parentSizeY = parentSize.y;\n\t\tconst position = this._position;\n\t\tconst size = this._size;\n\t\tif( this._updatedSize !== size || this._updatedParentSizeX !== parentSizeX ||\n\t\t\tthis._updatedParentSizeY !== parentSizeY || this._updatedPosition !== position ) {\n\t\t\tthis._id += 1;\n\t\t\tthis._updatedSize = size;\n\t\t\tthis._updatedParentSizeX = parentSizeX;\n\t\t\tthis._updatedParentSizeY = parentSizeY;\n\t\t\tthis._updatedPosition = position;\n\t\t\tconst psxh = parentSizeX * 0.5;\n\t\t\tconst psyh = parentSizeY * 0.5;\n\t\t\tconst computedSize = this.getComputedSize( size, position, parentSizeX, parentSizeY );\n\t\t\tconst values = this._values;\n\t\t\tswitch( position ) {\n\t\t\tcase EShapeBarPosition.TOP:\n\t\t\t\tvalues[ 0 ] = 0;\n\t\t\t\tvalues[ 1 ] = -psyh;\n\t\t\t\tvalues[ 2 ] = 0;\n\t\t\t\tvalues[ 3 ] = -psyh + computedSize;\n\t\t\t\tbreak;\n\t\t\tcase EShapeBarPosition.RIGHT:\n\t\t\t\tvalues[ 0 ] = psxh;\n\t\t\t\tvalues[ 1 ] = 0;\n\t\t\t\tvalues[ 2 ] = psxh - computedSize;\n\t\t\t\tvalues[ 3 ] = 0;\n\t\t\t\tbreak;\n\t\t\tcase EShapeBarPosition.BOTTOM:\n\t\t\t\tvalues[ 0 ] = 0;\n\t\t\t\tvalues[ 1 ] = psyh;\n\t\t\t\tvalues[ 2 ] = 0;\n\t\t\t\tvalues[ 3 ] = psyh - computedSize;\n\t\t\t\tbreak;\n\t\t\tcase EShapeBarPosition.LEFT:\n\t\t\t\tvalues[ 0 ] = -psxh;\n\t\t\t\tvalues[ 1 ] = 0;\n\t\t\t\tvalues[ 2 ] = -psxh + computedSize;\n\t\t\t\tvalues[ 3 ] = 0;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tget length(): number {\n\t\treturn 2;\n\t}\n\n\tget id(): number {\n\t\tthis.update();\n\t\treturn this._id;\n\t}\n\n\tget values(): number[] {\n\t\tthis.update();\n\t\treturn this._values;\n\t}\n\n\tset values( values: number[] ) {\n\t\t// SUPPOSED NOT TO BE CALLED\n\t}\n\n\tget segments(): number[] {\n\t\treturn this._segments;\n\t}\n\n\tset segments( segments: number[] ) {\n\t\t// SUPPOSED NOT TO BE CALLED\n\t}\n\n\tget size(): number {\n\t\treturn this._size;\n\t}\n\n\tset size( size: number ) {\n\t\tthis.moveTo( undefined, size, undefined );\n\t}\n\n\tget position(): EShapeBarPosition {\n\t\treturn this._position;\n\t}\n\n\tset position( position: EShapeBarPosition ) {\n\t\tthis.moveTo( position, undefined, undefined );\n\t}\n\n\tget style(): EShapePointsStyle {\n\t\treturn this._style;\n\t}\n\n\tset style( style: EShapePointsStyle ) {\n\t\tthis.moveTo( undefined, undefined, style );\n\t}\n\n\tcopy( source: EShapePoints ): this {\n\t\tif( source instanceof EShapeBarPoints ) {\n\t\t\treturn this.moveTo( source.position, source.size, source.style );\n\t\t} else {\n\t\t\treturn this.moveTo( undefined, undefined, source.style );\n\t\t}\n\t}\n\n\tset( newValues?: number[], newSegments?: number[], newStyle?: EShapePointsStyle ): this {\n\t\tlet newPosition: EShapeBarPosition | undefined;\n\t\tlet newSize: number | undefined;\n\t\tif( newValues != null ) {\n\t\t\tconst x0 = newValues[ 0 ];\n\t\t\tif( x0 === 0 ) {\n\t\t\t\tconst y0 = newValues[ 1 ];\n\t\t\t\tnewPosition = ( y0 <= 0 ? EShapeBarPosition.TOP : EShapeBarPosition.BOTTOM );\n\t\t\t\tnewSize = Math.abs( newValues[ 3 ] - y0 );\n\t\t\t} else {\n\t\t\t\tnewPosition = ( x0 <= 0 ? EShapeBarPosition.LEFT : EShapeBarPosition.RIGHT );\n\t\t\t\tnewSize = Math.abs( newValues[ 2 ] - x0 );\n\t\t\t}\n\t\t}\n\t\treturn this.moveTo( newPosition, newSize, newStyle );\n\t}\n\n\tprotected moveTo( position?: EShapeBarPosition, size?: number, style?: EShapePointsStyle ): this {\n\t\tlet isChanged = false;\n\n\t\tif( style != null && this._style !== style ) {\n\t\t\tthis._style = style;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( position != null && this._position !== position ) {\n\t\t\tthis._position = position;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( size != null && this._size !== size ) {\n\t\t\tthis._size = size;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tclone( parent: EShapePointsParent ): EShapeBarPoints {\n\t\treturn new EShapeBarPoints( parent, this._position, this._size, this._style );\n\t}\n\n\ttoPoints( transform: Matrix ): Point[] {\n\t\tconst result: Point[] = [];\n\t\tconst values = this.values;\n\t\tfor( let i = 0, imax = values.length; i < imax; i += 2 ) {\n\t\t\tconst point = new Point( values[ i + 0 ], values[ i + 1 ] );\n\t\t\tresult.push( transform.apply( point, point ) );\n\t\t}\n\t\treturn result;\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn manager.add( `[${this._position},${this._size},${this._style}]` );\n\t}\n\n\tdeserialize( resourceId: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\tif( 0 <= resourceId && resourceId < manager.resources.length ) {\n\t\t\tconst resource = manager.resources[ resourceId ];\n\t\t\tconst parsed = JSON.parse( resource ) as [ number, number, number ];\n\t\t\tthis.moveTo( parsed[ 0 ], parsed[ 1 ], parsed[ 2 ] );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeCorner {\n\tNONE = 0,\n\tTOP_LEFT = 1,\n\tTOP_RIGHT = 2,\n\tBOTTOM_LEFT = 4,\n\tBOTTOM_RIGHT = 8,\n\tTOP = TOP_LEFT | TOP_RIGHT,\n\tBOTTOM = BOTTOM_LEFT | BOTTOM_RIGHT,\n\tLEFT = TOP_LEFT | BOTTOM_LEFT,\n\tRIGHT = TOP_RIGHT | BOTTOM_RIGHT,\n\tALL = TOP | BOTTOM\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"./e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"./e-shape-resource-manager-serialization\";\n\nexport enum EShapeStrokeSide {\n\tNONE = 0,\n\tTOP = 1,\n\tRIGHT = 2,\n\tBOTTOM = 4,\n\tLEFT = 8,\n\tTOP_OR_LEFT = TOP | LEFT,\n\tTOP_OR_RIGHT = TOP | RIGHT,\n\tBOTTOM_OR_LEFT = BOTTOM | LEFT,\n\tBOTTOM_OR_RIGHT = BOTTOM | RIGHT,\n\tALL = TOP | RIGHT | BOTTOM | LEFT\n}\n\nexport interface EShapeStrokeLike {\n\tenable: boolean;\n\tcolor: number;\n\talpha: number;\n\twidth: number;\n\talign: number;\n\tside: EShapeStrokeSide;\n}\n\nexport interface EShapeStroke extends EShapeStrokeLike {\n\tcopy( target?: Partial<EShapeStrokeLike> ): void;\n\tset( enable?: boolean, color?: number, alpha?: number, width?: number, align?: number, side?: EShapeStrokeSide ): void;\n\tclone(): EShapeStroke;\n\ttoObject(): EShapeStrokeLike;\n\tserialize( manager: EShapeResourceManagerSerialization ): number;\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeStrokeSide } from \"./e-shape-stroke\";\n\nexport class EShapeDefaults {\n\tstatic IS_EDIT_MODE: boolean = false;\n\n\tstatic FILL_COLOR: number = 0xffffff;\n\tstatic FILL_ALPHA: number = 0.5;\n\tstatic STROKE_COLOR: number = 0x4f4f4f;\n\tstatic STROKE_COLOR_DARK: number = 0x4f4f4f;\n\tstatic STROKE_COLOR_LIGHT: number = 0xd0d0d0;\n\tstatic STROKE_ALPHA: number = 1;\n\tstatic STROKE_WIDTH: number = 2;\n\tstatic STROKE_ALIGN: number = 0;\n\tstatic STROKE_SIDE: number = EShapeStrokeSide.ALL;\n\tstatic TEXT_VALUE: string = \"\";\n\tstatic TEXT_FAMILY: string = \"auto\";\n\tstatic TEXT_SIZE: number = 14;\n\tstatic CURSOR: string = \"\";\n\tstatic RADIUS: number = 0.25;\n\tstatic SIZE_X: number = 100;\n\tstatic SIZE_Y: number = 100;\n\tstatic ANTIALIAS_WEIGHT: number = 1.25 / (window.devicePixelRatio || 1);\n\tstatic HIGHLIGHT_COLOR: number = 0x1e87f0;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, IPoint, Point, Rectangle, Texture, utils } from \"pixi.js\";\nimport { DBaseState } from \"../d-base-state\";\nimport { DDiagramSerializedItem } from \"../d-diagram-serialized\";\nimport { EShapeAction } from \"./action/e-shape-action\";\nimport { EShapeContainer } from \"./e-shape-container\";\nimport { EShapeCorner } from \"./e-shape-corner\";\nimport { EShapeEditor } from \"./e-shape-editor\";\nimport { EShapeFill } from \"./e-shape-fill\";\nimport { EShapeGradientLike } from \"./e-shape-gradient\";\nimport { EShapeLayout } from \"./e-shape-layout\";\nimport { EShapePoints } from \"./e-shape-points\";\nimport { EShapeResourceManagerSerialization } from \"./e-shape-resource-manager-serialization\";\nimport { EShapeRuntime } from \"./e-shape-runtime\";\nimport { EShapeStroke } from \"./e-shape-stroke\";\nimport { EShapeTag } from \"./e-shape-tag\";\nimport { EShapeText } from \"./e-shape-text\";\nimport { EShapeTransform } from \"./e-shape-transform\";\nimport { EShapeType } from \"./e-shape-type\";\nimport { EShapeUploaded } from \"./e-shape-uploaded\";\n\nexport enum EShapeCopyPart {\n\tNONE = 0,\n\tTRANSFORM = 1,\n\tSIZE = 2,\n\tSTYLE = 4,\n\tACTION = 8,\n\tPOINTS = 16,\n\tSTATE = 32,\n\tALL = TRANSFORM | SIZE | STYLE | ACTION | POINTS | STATE\n}\n\nexport interface EShape extends utils.EventEmitter {\n\tid: string;\n\treadonly type: EShapeType;\n\treadonly size: IPoint;\n\treadonly fill: EShapeFill;\n\treadonly stroke: EShapeStroke;\n\treadonly transform: EShapeTransform;\n\tradius: number;\n\tcorner: EShapeCorner;\n\treadonly points?: EShapePoints;\n\timage?: HTMLImageElement;\n\timageSrc?: string;\n\ttexture?: Texture;\n\tgradient?: EShapeGradientLike;\n\treadonly text: EShapeText;\n\treadonly tag: EShapeTag;\n\treadonly action: EShapeAction;\n\tcursor: string;\n\tvisible: boolean;\n\tinteractive: boolean;\n\tshortcut?: string;\n\ttitle?: string;\n\n\t// Hierarchy\n\tparent: EShapeContainer | EShape | null;\n\troot: EShape;\n\tchildren: EShape[];\n\tlayout?: EShapeLayout;\n\n\t// Working space\n\tindex: number;\t\t// A work space for sorting.\n\tselected: boolean;\n\treference: number;\t// Count of references from commands\n\n\t// Working space for the viewer\n\truntime?: EShapeRuntime;\n\n\t// Working space for the editor\n\teditor?: EShapeEditor;\n\n\t// Working space for the renderer\n\tuploaded?: EShapeUploaded;\n\n\t//\n\thovered: boolean;\n\tactive: boolean;\n\treadonly: boolean;\n\treadonly enabled: boolean;\n\tdisabled: boolean;\n\tdragging: boolean;\n\tfocused: boolean;\n\treadonly focusedin: boolean;\n\tunfocusable: boolean;\n\treadonly clicked: boolean;\n\treadonly pressed: boolean;\n\treadonly down: boolean;\n\treadonly up: boolean;\n\treadonly shadowed: boolean;\n\n\t//\n\ttoDirty(): void;\n\tattach( parent: EShapeContainer | EShape, at?: number ): this;\n\tdetach(): this;\n\tcopy( source: EShape ): this;\n\tcopy( source: EShape, part: EShapeCopyPart ): this;\n\tclone(): EShape;\n\tdestroy(): void;\n\n\t//\n\tgetState(): DBaseState;\n\tsetState( state: DBaseState, isOn: boolean ): this;\n\thasState( state: DBaseState ): boolean;\n\tfocus(): this;\n\tblur(): this;\n\n\t//\n\tonDblClick( e: MouseEvent ): void;\n\tonShortcut( e: KeyboardEvent ): void;\n\tonSizeChange(): void;\n\n\t// Action\n\tupdate( time: number ): void;\n\n\t// Transform\n\tupdateTransform(): void;\n\tdisallowOnTransformChange(): void;\n\tallowOnTransformChange( invokeOnTransformChange: boolean ): void;\n\tonTransformChange(): void;\n\tonChildTransformChange(): void;\n\n\t// Uploaded\n\tdisallowUploadedUpdate(): void;\n\tallowUploadedUpdate(): void;\n\tupdateUploaded(): void;\n\tupdateUploadedRecursively(): void;\n\n\t// Serialization\n\tserialize( manager: EShapeResourceManagerSerialization ): DDiagramSerializedItem;\n\n\t// Hit test\n\tcontains( point: Point ): EShape | null;\n\tcontainsBBox( point: Point ): boolean;\n\n\t// Coordinate\n\ttoGlobal( position: IPoint, point: Point, skipUpdate?: boolean ): Point;\n\ttoLocal<T extends IPoint>(\n\t\tposition: IPoint,\n\t\tfrom?: DisplayObject,\n\t\tpoint?: T,\n\t\tskipUpdate?: boolean\n\t): T;\n\tgetBounds( work: Point, skipUpdate: boolean, result: Rectangle ): Rectangle;\n\tgetBoundsInternal( work: Point, skipUpdate: boolean, result: Rectangle ): Rectangle;\n\tgetBoundsLocal( work: Point, skipUpdate: boolean, result: Rectangle ): Rectangle;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction, Point } from \"pixi.js\";\nimport { DApplications } from \"../d-applications\";\nimport { DBaseState } from \"../d-base-state\";\nimport { DControllers } from \"../d-controllers\";\nimport { UtilKeyboardEvent } from \"../util/util-keyboard-event\";\nimport { EShapeActionRuntime } from \"./action/e-shape-action-runtime\";\nimport { EShape } from \"./e-shape\";\nimport { EShapeFillLike } from \"./e-shape-fill\";\nimport { EShapeStrokeLike } from \"./e-shape-stroke\";\nimport { EShapeTextLike } from \"./e-shape-text\";\n\nexport enum EShapeRuntimeReset {\n\tNONE = 0,\n\tPOSITION_X = 1,\n\tPOSITION_Y = 2,\n\tPOSITION = POSITION_X | POSITION_Y,\n\tROTATION = 4,\n\tCOLOR_FILL = 8,\n\tCOLOR_STROKE = 16,\n\tCOLOR_FILL_AND_STROKE = COLOR_FILL | COLOR_STROKE,\n\tCOLOR_TEXT = 32,\n\tCOLOR_TEXT_OUTLINE = 64,\n\tCOLOR = COLOR_FILL | COLOR_STROKE | COLOR_TEXT | COLOR_TEXT_OUTLINE,\n\tVISIBILITY = 128,\n\tHEIGHT = 256,\n\tWIDTH = 512,\n\tSIZE = HEIGHT | WIDTH,\n\tTEXT = 1024,\n\tCURSOR = 2048\n}\n\nexport enum EShapeRuntimeState {\n\tNONE = 0,\n\tCHANGED = 1,\n\tCLICKED = 2,\n\tDOWN = 4,\n\tUP = 8,\n\tPRESSED = 16,\n\tPERSISTENT = PRESSED\n}\n\nexport class EShapeRuntime {\n\tx: number;\n\ty: number;\n\tsize: Point;\n\trotation: number;\n\tactions: EShapeActionRuntime[];\n\tfill: EShapeFillLike;\n\tstroke: EShapeStrokeLike;\n\ttext: EShapeTextLike;\n\tcursor: string;\n\n\treset: EShapeRuntimeReset;\n\twritten: EShapeRuntimeReset;\n\n\teffect: number;\n\n\tstate: EShapeRuntimeState;\n\n\tinteractive: boolean;\n\n\tconstructor( shape: EShape ) {\n\t\tconst transform = shape.transform;\n\t\tconst position = transform.position;\n\t\tthis.x = position.x;\n\t\tthis.y = position.y;\n\t\tthis.size = new Point( shape.size.x, shape.size.y );\n\t\tthis.rotation = transform.rotation;\n\t\tthis.actions = [];\n\t\tthis.fill = shape.fill.toObject();\n\t\tthis.stroke = shape.stroke.toObject();\n\t\tthis.text = shape.text.toObject();\n\t\tthis.cursor = shape.cursor;\n\t\tthis.reset = EShapeRuntimeReset.NONE;\n\t\tthis.written = EShapeRuntimeReset.NONE;\n\t\tthis.effect = NaN;\n\t\tthis.state = EShapeRuntimeState.NONE;\n\t\tthis.interactive = false;\n\t}\n\n\tonPointerClick( shape: EShape, e?: interaction.InteractionEvent ): void {\n\t\tif( ! shape.disabled ) {\n\t\t\tif( ! (this.state & EShapeRuntimeState.CLICKED) ) {\n\t\t\t\tthis.state |= EShapeRuntimeState.CHANGED | EShapeRuntimeState.CLICKED;\n\t\t\t\tDApplications.update();\n\t\t\t}\n\t\t}\n\t}\n\n\tonPointerDblClick( shape: EShape, e?: MouseEvent ): boolean {\n\t\treturn false;\n\t}\n\n\tonPointerOver( shape: EShape, e?: interaction.InteractionEvent ): void {\n\t\tshape.hovered = true;\n\t}\n\n\tonPointerOut( shape: EShape, e?: interaction.InteractionEvent ): void {\n\t\tshape.hovered = false;\n\t}\n\n\tonPointerDown( shape: EShape, e?: interaction.InteractionEvent ): void {\n\t\tif( ! (this.state & EShapeRuntimeState.DOWN) ) {\n\t\t\tthis.state |= EShapeRuntimeState.CHANGED | EShapeRuntimeState.DOWN | EShapeRuntimeState.PRESSED;\n\t\t\tDApplications.update();\n\t\t}\n\t\tconst focusController = DControllers.getFocusController();\n\t\tfocusController.setFocused( focusController.findFocusableParent( shape ), true, true );\n\t}\n\n\tonPointerUp( shape: EShape, e?: interaction.InteractionEvent ): void {\n\t\tif( ! (this.state & EShapeRuntimeState.UP) ) {\n\t\t\tthis.state |= EShapeRuntimeState.CHANGED | EShapeRuntimeState.UP;\n\t\t\tthis.state &= ~EShapeRuntimeState.PRESSED;\n\t\t\tDApplications.update();\n\t\t}\n\t}\n\n\tonPointerMove( shape: EShape, e?: interaction.InteractionEvent ): void {\n\t\t//\n\t}\n\n\tonKeyDown( shape: EShape, e: KeyboardEvent ): boolean {\n\t\tif( UtilKeyboardEvent.isActivateKey( e ) ) {\n\t\t\tthis.onPointerDown( shape );\n\t\t}\n\t\treturn false;\n\t}\n\n\tonKeyUp( shape: EShape, e: KeyboardEvent ): boolean {\n\t\tif( UtilKeyboardEvent.isActivateKey( e ) ) {\n\t\t\tthis.onPointerUp( shape );\n\t\t\tthis.onPointerClick( shape );\n\t\t}\n\t\treturn false;\n\t}\n\n\tonStateChange( shape: EShape, newState: DBaseState, oldState: DBaseState ): void {\n\t\tthis.state |= EShapeRuntimeState.CHANGED;\n\t\tDApplications.update();\n\t}\n\n\tupdate( shape: EShape, time: number ): void {\n\t\tconst tag = shape.tag;\n\t\tconst isEffectTimeUp = ( this.effect <= time );\n\t\tif( tag.isChanged || (this.state & EShapeRuntimeState.CHANGED) || isEffectTimeUp ) {\n\t\t\tif( isEffectTimeUp ) {\n\t\t\t\tthis.effect = NaN;\n\t\t\t}\n\t\t\tshape.disallowUploadedUpdate();\n\t\t\tthis.onUpdate( shape, time );\n\t\t\tshape.allowUploadedUpdate();\n\t\t\tthis.state &= EShapeRuntimeState.PERSISTENT;\n\t\t\ttag.isChanged = false;\n\t\t}\n\t}\n\n\tprotected onUpdate( shape: EShape, time: number ): void {\n\t\tif( 0 < this.actions.length ) {\n\t\t\tthis.executeActions( shape, time );\n\t\t\tthis.resetUnwrittenProperties( shape );\n\t\t}\n\t}\n\n\tprotected executeActions( shape: EShape, time: number ): void {\n\t\tthis.written = EShapeRuntimeReset.NONE;\n\t\tconst actions = this.actions;\n\t\tfor( let i = 0, imax = actions.length; i < imax; ++i ) {\n\t\t\tactions[ i ].execute( shape, this, time );\n\t\t}\n\t}\n\n\tprotected resetUnwrittenProperties( shape: EShape ): void {\n\t\tconst target = (~this.written) & this.reset;\n\t\tif( target !== EShapeRuntimeReset.NONE ) {\n\t\t\tif( target & EShapeRuntimeReset.POSITION_X ) {\n\t\t\t\tshape.transform.position.x = this.x;\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.POSITION_Y ) {\n\t\t\t\tshape.transform.position.y = this.y;\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.VISIBILITY ) {\n\t\t\t\tshape.visible = true;\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.COLOR_FILL ) {\n\t\t\t\tconst fill = this.fill;\n\t\t\t\tshape.fill.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tfill.color,\n\t\t\t\t\tfill.alpha\n\t\t\t\t);\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.COLOR_STROKE ) {\n\t\t\t\tconst stroke = this.stroke;\n\t\t\t\tshape.stroke.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tstroke.color,\n\t\t\t\t\tstroke.alpha\n\t\t\t\t);\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.COLOR_TEXT ) {\n\t\t\t\tconst text = this.text;\n\t\t\t\tshape.text.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\ttext.color,\n\t\t\t\t\ttext.alpha\n\t\t\t\t);\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.COLOR_TEXT_OUTLINE ) {\n\t\t\t\tconst outline = this.text.outline;\n\t\t\t\tshape.text.outline.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\toutline.color,\n\t\t\t\t\toutline.alpha\n\t\t\t\t);\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.HEIGHT ) {\n\t\t\t\tshape.size.y = this.size.y;\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.WIDTH ) {\n\t\t\t\tshape.size.x = this.size.x;\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.ROTATION ) {\n\t\t\t\tshape.transform.rotation = this.rotation;\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.TEXT ) {\n\t\t\t\tshape.text.value = this.text.value;\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.CURSOR ) {\n\t\t\t\tshape.cursor = this.cursor;\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\n\nexport class EShapeAction {\n\tvalues: EShapeActionValue[];\n\n\tconstructor() {\n\t\tthis.values = [];\n\t}\n\n\tadd( value: EShapeActionValue, index?: number ): void {\n\t\tconst values = this.values;\n\t\tif( index != null ) {\n\t\t\tvalues.splice( index, 0, value );\n\t\t} else {\n\t\t\tvalues.push( value );\n\t\t}\n\t}\n\n\taddAll( values: EShapeActionValue[] ): void {\n\t\tconst sources = values;\n\t\tconst destinations = this.values;\n\t\tfor( let i = 0, imax = sources.length; i < imax; ++i) {\n\t\t\tdestinations.push( sources[i] );\n\t\t}\n\t}\n\n\tindexOf( target: EShapeActionValue ): number {\n\t\tconst values = this.values;\n\n\t\t// Instance-based matching\n\t\tfor( let i = 0, imax = values.length; i < imax; ++i ) {\n\t\t\tconst value = values[ i ];\n\t\t\tif( value === target ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\t// Data-based matching\n\t\tfor( let i = 0, imax = values.length; i < imax; ++i ) {\n\t\t\tconst value = values[ i ];\n\t\t\tif( value.isEquals( target ) ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t}\n\n\tget( index: number ): EShapeActionValue | null {\n\t\tconst result = this.values[ index ];\n\t\tif( result != null ) {\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tset( index: number, value: EShapeActionValue ): void {\n\t\tthis.values[ index ] = value;\n\t}\n\n\tremove( index: number ): void {\n\t\tthis.values.splice( index, 1 );\n\t}\n\n\tclear(): void {\n\t\tthis.values.length = 0;\n\t}\n\n\tsize(): number {\n\t\treturn this.values.length;\n\t}\n\n\tswap( indexA: number, indexB: number ): void {\n\t\tconst values = this.values;\n\t\tconst tmp = values[ indexB ];\n\t\tvalues[ indexB ] = values[ indexA ];\n\t\tvalues[ indexA ] = tmp;\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number[] {\n\t\tconst result: number[] = [];\n\t\tconst values = this.values;\n\t\tfor( let i = 0, imax = values.length; i < imax; ++i ) {\n\t\t\tresult.push( values[ i ].serialize( manager ) );\n\t\t}\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"./e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"./e-shape-resource-manager-serialization\";\nimport { EShapeTagValueRange, EShapeTagValueRangeLike } from \"./e-shape-tag-value-range\";\n\nexport enum EShapeTagValueOrder {\n\tASCENDING,\n\tDESCENDING\n}\n\nexport interface EShapeTagValueLike {\n\tid: string;\n\tinitial: string;\n\tformat: string;\n\trange: EShapeTagValueRangeLike;\n\tcapacity: number;\n\torder: EShapeTagValueOrder;\n}\n\nexport interface EShapeTagValueParent {\n\tisChanged: boolean;\n}\n\nexport interface EShapeTagValue extends EShapeTagValueLike {\n\tvalue: unknown;\n\treadonly nvalue: number;\n\ttime: number;\n\n\tvalues: unknown[];\n\ttimes: number[];\n\n\trange: EShapeTagValueRange;\n\tparent?: EShapeTagValueParent;\n\n\tformatter?: ( value: unknown ) => unknown;\n\n\tclear(): void;\n\tremove( index: number ): void;\n\tremoveAll( indices: number[] ): void;\n\tcopy( target: EShapeTagValue ): void;\n\tserialize( manager: EShapeResourceManagerSerialization ): number;\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"./e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"./e-shape-resource-manager-serialization\";\n\nexport enum EShapeTagValueRangeType {\n\tNONE = 0,\n\tFROM = 1,\n\tTO = 2,\n\tFROM_TO = 3\n}\n\nexport interface EShapeTagValueRangeLike {\n\ttype: EShapeTagValueRangeType;\n\tfrom: number;\n\tto: number;\n}\n\nexport interface EShapeTagValueRangeParent {\n\tisChanged: boolean;\n}\n\nexport interface EShapeTagValueRange extends EShapeTagValueRangeLike {\n\tparent?: EShapeTagValueRangeParent;\n\n\tset( from?: number | null, to?: number | null ): boolean;\n\tnormalize( value: number ): number;\n\tisEquals( target: EShapeTagValueRangeLike ): boolean;\n\tcopy( target: EShapeTagValueRangeLike ): void;\n\ttoObject(): EShapeTagValueRangeLike;\n\tserialize( manager: EShapeResourceManagerSerialization ): number;\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint, Matrix, Transform } from \"pixi.js\";\nimport { EShapeTransformParent } from \"./e-shape-transform-parent\";\n\nexport interface EShapeTransform extends Transform {\n\tinternalTransform: Matrix;\n\n\tposition: IPoint;\n\tpivot: IPoint;\n\trotation: number;\n\tskew: IPoint;\n\tscale: IPoint;\n\n\tgetLocalIdCurrent(): number;\n\tgetLocalId(): number;\n\tgetParentId(): number;\n\tgetWorldId(): number;\n}\n\nexport class EShapeTransformImpl extends Transform implements EShapeTransform {\n\tprotected _parent: EShapeTransformParent;\n\tinternalTransform: Matrix;\n\n\tconstructor( parent: EShapeTransformParent ) {\n\t\tsuper();\n\t\tthis.internalTransform = new Matrix();\n\t\tthis._parent = parent;\n\t}\n\n\tprotected onChange(): void {\n\t\t(Transform.prototype as any).onChange.call( this );\n\t\tthis._parent.onTransformChange();\n\t}\n\n\tprotected updateSkew(): void {\n\t\t(Transform.prototype as any).updateSkew.call( this );\n\t\tthis._parent.onTransformChange();\n\t}\n\n\tgetLocalIdCurrent(): number {\n\t\treturn (this as any)._currentLocalID;\n\t}\n\n\tgetLocalId(): number {\n\t\treturn (this as any)._localID;\n\t}\n\n\tgetParentId(): number {\n\t\treturn (this as any)._parentID;\n\t}\n\n\tgetWorldId(): number {\n\t\treturn (this as any)._worldID;\n\t}\n\n\tupdateTransform( parentTransform: Transform ): void {\n\t\tconst oldLocalId = (this as any)._currentLocalID;\n\t\tconst oldWorldId = (this as any)._worldID;\n\t\tsuper.updateTransform( parentTransform );\n\t\tconst newLocalId = (this as any)._currentLocalID;\n\t\tconst newWorldId = (this as any)._worldID;\n\t\tif( oldLocalId !== newLocalId ) {\n\t\t\tconst localTransform = this.localTransform;\n\t\t\tconst internalTransform = this.internalTransform;\n\t\t\tlocalTransform.copyTo( internalTransform );\n\t\t\tif( parentTransform instanceof EShapeTransformImpl ) {\n\t\t\t\tinternalTransform.prepend( parentTransform.internalTransform );\n\t\t\t}\n\t\t} else if( oldWorldId !== newWorldId ) {\n\t\t\tconst localTransform = this.localTransform;\n\t\t\tconst internalTransform = this.internalTransform;\n\t\t\tif( parentTransform instanceof EShapeTransformImpl ) {\n\t\t\t\tlocalTransform.copyTo( internalTransform ).prepend( parentTransform.internalTransform );\n\t\t\t\t(this as any)._currentLocalID += 1;\n\t\t\t\t(this as any)._localID = (this as any)._currentLocalID;\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { EShapeGradientLike, EShapeGradientPointLike } from \"../e-shape-gradient\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\n\nexport class EShapeGradients {\n\tstatic serializeGradient( gradient: EShapeGradientLike ): string {\n\t\tconst points = gradient.points;\n\t\tlet result = `[${gradient.direction}`;\n\t\tfor( let i = 0, imax = points.length, j = 1; i < imax; i += 1, j += 3 ) {\n\t\t\tconst point = points[ i ];\n\t\t\tresult += `,${point.color},${point.alpha},${point.position}`;\n\t\t}\n\t\tresult += \"]\";\n\t\treturn result;\n\t}\n\n\tstatic parseGradient( target: string ): number[] | null {\n\t\ttry {\n\t\t\treturn JSON.parse( target ) as number[];\n\t\t} catch( e ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tstatic deserializeGradient( target: string ): EShapeGradientLike | undefined {\n\t\tconst parsed = this.parseGradient( target );\n\t\tif( parsed == null || parsed.length < 7 ) {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\tconst direction = parsed[ 0 ];\n\t\t\tconst points: EShapeGradientPointLike[] = [];\n\t\t\tfor( let i = 1, imax = parsed.length; i < imax; i += 3 ) {\n\t\t\t\tpoints.push({\n\t\t\t\t\tcolor: parsed[ i + 0 ],\n\t\t\t\t\talpha: parsed[ i + 1 ],\n\t\t\t\t\tposition: parsed[ i + 2 ]\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tpoints,\n\t\t\t\tdirection\n\t\t\t};\n\t\t}\n\t}\n\n\tstatic toGradientId( gradient: EShapeGradientLike | undefined, manager: EShapeResourceManagerSerialization ): number {\n\t\tif( gradient != null ) {\n\t\t\tif( gradient.serialized == null ) {\n\t\t\t\tgradient.serialized = this.serializeGradient( gradient );\n\t\t\t}\n\t\t\treturn manager.add( gradient.serialized );\n\t\t}\n\t\treturn -1;\n\t}\n\n\tstatic toGradientImageUrl( gradient: EShapeGradientLike ): string {\n\t\tconst direction = gradient.direction;\n\t\tconst points = gradient.points;\n\n\t\tlet stops = \"\";\n\t\tfor( let i = 0, imax = points.length; i < imax; ++i ) {\n\t\t\tconst point = points[ i ];\n\t\t\tconst color = UtilRgb.toCode( point.color );\n\t\t\tconst alpha = point.alpha;\n\t\t\tconst offset = point.position * 100;\n\t\t\tstops += `<stop offset=\"${offset}%\" stop-color=\"#${color}\" stop-opacity=\"${alpha}\" />`;\n\t\t}\n\n\t\tconst radian = direction * Math.PI / 180;\n\t\tconst dx = 0.5 * Math.cos( radian );\n\t\tconst dy = -0.5 * Math.sin( radian );\n\n\t\tconst url = \"data:image/svg+xml;base64,\" + btoa(\n\t\t\t`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 32 32\">` +\n\t\t\t\t`<defs>` +\n\t\t\t\t\t`<linearGradient id=\"o2glkm3aeu2oio\" x1=\"${0.5 - dx}\" x2=\"${0.5 + dx}\" y1=\"${0.5 - dy}\" y2=\"${0.5 + dy}\">` +\n\t\t\t\t\t\tstops +\n\t\t\t\t\t`</linearGradient>` +\n\t\t\t\t`</defs>` +\n\t\t\t\t`<rect x=\"0\" y=\"0\" width=\"32\" height=\"32\" stroke=\"none\" fill=\"url(#o2glkm3aeu2oio)\" />` +\n\t\t\t`</svg>`\n\t\t);\n\n\t\treturn url;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, IPoint, Matrix, Point, Rectangle, Texture, Transform, utils } from \"pixi.js\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DControllers } from \"../../d-controllers\";\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeAction } from \"../action/e-shape-action\";\nimport { EShape, EShapeCopyPart } from \"../e-shape\";\nimport { EShapeContainer } from \"../e-shape-container\";\nimport { EShapeCorner } from \"../e-shape-corner\";\nimport { EShapeEditor } from \"../e-shape-editor\";\nimport { EShapeFill } from \"../e-shape-fill\";\nimport { EShapeGradientLike } from \"../e-shape-gradient\";\nimport { EShapeLayout } from \"../e-shape-layout\";\nimport { EShapePoints } from \"../e-shape-points\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeRuntime, EShapeRuntimeState } from \"../e-shape-runtime\";\nimport { EShapeStroke } from \"../e-shape-stroke\";\nimport { EShapeTag } from \"../e-shape-tag\";\nimport { EShapeText } from \"../e-shape-text\";\nimport { EShapeTransform, EShapeTransformImpl } from \"../e-shape-transform\";\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapeUploaded } from \"../e-shape-uploaded\";\nimport { EShapeGradients } from \"./e-shape-gradients\";\n\nexport abstract class EShapeBase extends utils.EventEmitter implements EShape {\n\tid: string;\n\treadonly type: EShapeType;\n\tabstract readonly size: IPoint;\n\tabstract readonly fill: EShapeFill;\n\tabstract readonly stroke: EShapeStroke;\n\treadonly transform: EShapeTransform;\n\tabstract radius: number;\n\tabstract corner: EShapeCorner;\n\tpoints?: EShapePoints;\n\timage?: HTMLImageElement;\n\timageSrc?: string;\n\ttexture?: Texture;\n\tabstract gradient?: EShapeGradientLike;\n\tabstract readonly text: EShapeText;\n\tabstract readonly tag: EShapeTag;\n\treadonly action: EShapeAction;\n\tabstract cursor: string;\n\tinteractive: boolean;\n\tshortcut?: string;\n\ttitle?: string;\n\tprotected _visible: boolean;\n\tprotected _onTransformChangeLock: number;\n\tprotected _isOnTransformChanged: boolean;\n\tprotected _uploadedUpdateLock: number;\n\tprotected _isUploadedUpdated: boolean;\n\tprotected _isUploadedUpdatedRecursively: boolean;\n\n\tprotected _bounds?: Rectangle;\n\tprotected _boundsTransformId: number;\n\tprotected _boundsInternal?: Rectangle;\n\tprotected _boundsInternalTransformId: number;\n\tprotected _boundsLocal?: Rectangle;\n\tprotected _boundsLocalTransformId: number;\n\n\tprotected _state: DBaseState;\n\tprotected _stateLocal: DBaseState;\n\n\t// Hierarchy\n\tparent: EShapeContainer | EShape | null;\n\tchildren: EShape[];\n\tlayout?: EShapeLayout;\n\n\t// Working space\n\tindex: number; // A work space for sorting.\n\tselected: boolean;\n\treference: number; // Count of references from commands\n\n\t// Working space for the viewer\n\truntime?: EShapeRuntime;\n\n\t// Working space for the editor\n\teditor?: EShapeEditor;\n\n\t// Working space for the renderer\n\tuploaded?: EShapeUploaded;\n\n\tconstructor( type: EShapeType ) {\n\t\tsuper();\n\t\tthis.id = \"\";\n\t\tthis.type = type;\n\t\tthis.transform = this.newTransform();\n\t\tthis._onTransformChangeLock = 0;\n\t\tthis._isOnTransformChanged = false;\n\t\tthis.action = new EShapeAction();\n\t\tthis._visible = true;\n\t\tthis._uploadedUpdateLock = 0;\n\t\tthis._isUploadedUpdated = false;\n\t\tthis._isUploadedUpdatedRecursively = false;\n\n\t\tthis._boundsTransformId = NaN;\n\t\tthis._boundsInternalTransformId = NaN;\n\t\tthis._boundsLocalTransformId = NaN;\n\n\t\tthis._state = this._stateLocal = DBaseState.UNFOCUSABLE;\n\t\tthis.interactive = false;\n\n\t\t//\n\t\tthis.parent = null;\n\t\tthis.children = [];\n\n\t\t//\n\t\tthis.selected = false;\n\t\tthis.index = 0;\n\t\tthis.reference = 0;\n\t}\n\n\tprotected newTransform(): EShapeTransform {\n\t\treturn new EShapeTransformImpl( this );\n\t}\n\n\tonSizeChange(): void {\n\t\tthis._boundsTransformId = NaN;\n\t\tthis._boundsInternalTransformId = NaN;\n\t\tthis._boundsLocalTransformId = NaN;\n\n\t\tthis.onTransformChange_();\n\t\tthis.updateUploaded();\n\t}\n\n\tonTransformChange(): void {\n\t\tthis.onTransformChange_();\n\t\tthis.updateUploadedRecursively();\n\t}\n\n\tprotected onTransformChange_(): void {\n\t\tif( this._onTransformChangeLock === 0 ) {\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.onChildTransformChange();\n\t\t\t}\n\t\t} else {\n\t\t\tthis._isOnTransformChanged = true;\n\t\t}\n\t}\n\n\tdisallowOnTransformChange(): void {\n\t\tthis._onTransformChangeLock += 1;\n\t\tif( this._onTransformChangeLock === 1 ) {\n\t\t\tthis._isOnTransformChanged = false;\n\t\t}\n\t}\n\n\tallowOnTransformChange( invokeOnTransformChange: boolean ): void {\n\t\tthis._onTransformChangeLock -= 1;\n\t\tif( this._onTransformChangeLock === 0 ) {\n\t\t\tif( this._isOnTransformChanged ) {\n\t\t\t\tthis._isOnTransformChanged = false;\n\t\t\t\tif( invokeOnTransformChange ) {\n\t\t\t\t\tthis.onTransformChange();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonChildTransformChange(): void {\n\t\t//\n\t}\n\n\tdisallowUploadedUpdate(): void {\n\t\tthis._uploadedUpdateLock += 1;\n\t\tif( this._uploadedUpdateLock === 1 ) {\n\t\t\tthis._isUploadedUpdated = false;\n\t\t\tthis._isUploadedUpdatedRecursively = false;\n\t\t}\n\t}\n\n\tallowUploadedUpdate(): void {\n\t\tthis._uploadedUpdateLock -= 1;\n\t\tif( this._uploadedUpdateLock === 0 ) {\n\t\t\tif( this._isUploadedUpdatedRecursively ) {\n\t\t\t\tthis._isUploadedUpdatedRecursively = false;\n\t\t\t\tthis._isUploadedUpdated = false;\n\t\t\t\tthis.updateUploadedRecursively();\n\t\t\t} else if( this._isUploadedUpdated ) {\n\t\t\t\tthis._isUploadedUpdated = false;\n\t\t\t\tthis.updateUploaded();\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateUploadedRecursively(): void {\n\t\tif( this._uploadedUpdateLock === 0 ) {\n\t\t\tthis.updateUploaded();\n\t\t\tconst children = this.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tchildren[ i ].updateUploadedRecursively();\n\t\t\t}\n\t\t} else {\n\t\t\tthis._isUploadedUpdatedRecursively = true;\n\t\t}\n\t}\n\n\tupdateUploaded(): void {\n\t\tif( this._uploadedUpdateLock === 0 ) {\n\t\t\tconst uploaded = this.uploaded;\n\t\t\tif( uploaded != null ) {\n\t\t\t\tuploaded.update( this );\n\t\t\t}\n\t\t} else {\n\t\t\tthis._isUploadedUpdated = true;\n\t\t}\n\t}\n\n\t//\n\tget root(): EShape {\n\t\tlet root: EShape = this;\n\t\twhile( root.parent instanceof EShapeBase ) {\n\t\t\troot = root.parent;\n\t\t}\n\t\treturn root;\n\t}\n\n\t//\n\tget visible(): boolean {\n\t\tconst parent = this.parent;\n\t\tif( parent instanceof EShapeBase ) {\n\t\t\treturn parent.visible && this._visible;\n\t\t} else {\n\t\t\treturn this._visible;\n\t\t}\n\t}\n\n\tset visible( visible: boolean ) {\n\t\tif( this._visible !== visible ) {\n\t\t\tthis._visible = visible;\n\t\t\tthis.updateUploadedRecursively();\n\t\t}\n\t}\n\n\t//\n\tabstract clone(): EShape;\n\n\t//\n\ttoDirty() {\n\t\tconst parent = this.parent;\n\t\tif( parent != null ) {\n\t\t\tparent.toDirty();\n\t\t}\n\t}\n\n\t// Hierarchy\n\tattach( parent: EShapeContainer | EShape, at?: number ): this {\n\t\tthis.detach();\n\t\tthis.parent = parent;\n\t\tconst children = parent.children;\n\t\tif( at != null && 0 <= at && at < children.length ) {\n\t\t\tchildren.splice( at, 0, this );\n\t\t} else {\n\t\t\tchildren.push( this );\n\t\t}\n\t\tthis.uploaded = undefined;\n\t\tparent.onChildTransformChange();\n\t\tparent.toDirty();\n\t\treturn this;\n\t}\n\n\tdetach(): this {\n\t\tconst parent = this.parent;\n\t\tif( parent != null ) {\n\t\t\tthis.parent = null;\n\t\t\tthis.uploaded = undefined;\n\t\t\tconst children = parent.children;\n\t\t\tconst index = children.indexOf( this );\n\t\t\tif( 0 <= index ) {\n\t\t\t\tchildren.splice( index, 1 );\n\t\t\t\tparent.onChildTransformChange();\n\t\t\t\tparent.toDirty();\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\t// Transform\n\tupdateTransform() {\n\t\tconst parent = this.parent;\n\t\tif (parent != null) {\n\t\t\tparent.updateTransform();\n\t\t\tthis.transform.updateTransform(parent.transform);\n\t\t} else {\n\t\t\tthis.transform.updateTransform((Transform as any).IDENTITY);\n\t\t}\n\t}\n\n\t// Serialization\n\tserializeChildren( manager: EShapeResourceManagerSerialization ): DDiagramSerializedItem[] {\n\t\tconst children = this.children;\n\t\tconst childrenSerialized = [];\n\t\tfor (let i = 0, imax = children.length; i < imax; ++i) {\n\t\t\tconst child = children[i];\n\t\t\tchildrenSerialized.push(child.serialize(manager));\n\t\t}\n\t\treturn childrenSerialized;\n\t}\n\n\tserializeImage( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst image = this.image;\n\t\treturn (image != null ? manager.add( image.src ) : -1);\n\t}\n\n\tserializeGradient( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn EShapeGradients.toGradientId( this.gradient, manager );\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): DDiagramSerializedItem {\n\t\tconst transform = this.transform;\n\t\tconst position = transform.position;\n\t\tconst pivot = transform.pivot;\n\t\tconst size = this.size;\n\t\tconst shortcut = this.shortcut;\n\t\tconst shortcutId = ( shortcut != null ? manager.add( shortcut ) : -1 );\n\t\tconst title = this.title;\n\t\tconst titleId = ( title != null ? manager.add( title ) : -1 );\n\t\treturn [\n\t\t\tthis.type,\n\t\t\tmanager.add(this.id),\n\t\t\tposition.x,\n\t\t\tposition.y,\n\t\t\tsize.x,\n\t\t\tsize.y,\n\t\t\ttransform.rotation,\n\t\t\ttransform.skew.x,\n\t\t\tthis.fill.serialize( manager ),\n\t\t\tthis.stroke.serialize( manager ),\n\t\t\tmanager.add( this.cursor.trim() ),\n\t\t\tthis.text.serialize( manager ),\n\t\t\tthis.tag.serialize( manager ),\n\t\t\tthis.radius,\n\t\t\tthis.corner,\n\t\t\t-1,\n\t\t\t-1,\n\t\t\tthis.action.serialize( manager ),\n\t\t\tthis.serializeImage( manager ),\n\t\t\tthis.serializeGradient( manager ),\n\t\t\tthis.serializeChildren( manager ),\n\t\t\tpivot.x,\n\t\t\tpivot.y,\n\t\t\t( this.interactive ? 1 : 0 ) | ( this.unfocusable ? 2 : 0 ),\n\t\t\tshortcutId,\n\t\t\ttitleId\n\t\t];\n\t}\n\n\t// Hit test\n\tcontains( point: Point ): EShape | null {\n\t\tconst x = point.x;\n\t\tconst y = point.y;\n\t\tconst size = this.size;\n\t\tconst sx = 0.5 * size.x;\n\t\tconst sy = 0.5 * size.y;\n\t\tconst pivot = this.transform.pivot;\n\t\tconst dx = x - pivot.x;\n\t\tconst dy = y - pivot.y;\n\t\tconst stroke = this.stroke;\n\t\tconst s = stroke.width * stroke.align;\n\t\tif( 0 <= sx ) {\n\t\t\tif( 0 <= sy ) {\n\t\t\t\tif( this.containsAbs(+dx, +dy, +sx + s, +sy + s) ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( this.containsAbs(+dx, -dy, +sx + s, -sy + s) ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif( 0 <= sy ) {\n\t\t\t\tif( this.containsAbs(-dx, +dy, -sx + s, +sy + s) ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( this.containsAbs(-dx, -dy, -sx + s, -sy + s) ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.containsText( x, y, point ) ||\n\t\t\tthis.containsChildren( x, y, point );\n\t}\n\n\tprotected containsText( x: number, y: number, work: Point ): EShape | null {\n\t\tconst text = this.text;\n\t\tconst textAtlas = text.atlas;\n\t\tif( textAtlas != null ) {\n\t\t\tconst textWorld = text.world;\n\t\t\tif( textWorld != null ) {\n\t\t\t\twork.set( x, y );\n\t\t\t\tthis.transform.internalTransform.apply( work, work );\n\t\t\t\tconst tx = work.x - textWorld[ 0 ];\n\t\t\t\tconst ty = work.y - textWorld[ 1 ];\n\t\t\t\tconst th = textWorld[ 2 ] * tx + textWorld[ 3 ] * ty;\n\t\t\t\tconst tv = textWorld[ 4 ] * tx + textWorld[ 5 ] * ty;\n\t\t\t\tif( 0 <= th && th <= textWorld[ 6 ] && 0 <= tv && tv <= textWorld[ 7 ] ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected containsChildren( x: number, y: number, work: Point ): EShape | null {\n\t\tconst children = this.children;\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\tconst child = children[ i ];\n\t\t\twork.set( x, y );\n\t\t\tchild.updateTransform();\n\t\t\tchild.transform.localTransform.applyInverse( work, work );\n\t\t\tconst childResult = child.contains( work );\n\t\t\tif( childResult != null ) {\n\t\t\t\tif( this.shadowed ) {\n\t\t\t\t\treturn this;\n\t\t\t\t} else {\n\t\t\t\t\treturn childResult;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tcontainsBBox( point: Point ): boolean {\n\t\tconst x = point.x;\n\t\tconst y = point.y;\n\t\tconst size = this.size;\n\t\tconst sx = 0.5 * size.x;\n\t\tconst sy = 0.5 * size.y;\n\t\tconst pivot = this.transform.pivot;\n\t\tconst dx = x - pivot.x;\n\t\tconst dy = y - pivot.y;\n\t\tconst stroke = this.stroke;\n\t\tconst s = stroke.width * stroke.align;\n\t\tif( 0 <= sx ) {\n\t\t\tif( 0 <= sy ) {\n\t\t\t\treturn this.containsAbsBBox(+dx, +dy, +sx + s, +sy + s);\n\t\t\t} else {\n\t\t\t\treturn this.containsAbsBBox(+dx, -dy, +sx + s, -sy + s);\n\t\t\t}\n\t\t} else {\n\t\t\tif( 0 <= sy ) {\n\t\t\t\treturn this.containsAbsBBox(-dx, +dy, -sx + s, +sy + s);\n\t\t\t} else {\n\t\t\t\treturn this.containsAbsBBox(-dx, -dy, -sx + s, -sy + s);\n\t\t\t}\n\t\t}\n\t}\n\n\tcontainsAbs( x: number, y: number, ax: number, ay: number ): boolean {\n\t\treturn this.containsAbsBBox( x, y, ax, ay );\n\t}\n\n\tcontainsAbsBBox( x: number, y: number, ax: number, ay: number ): boolean {\n\t\treturn (-ax <= x && x <= +ax && -ay <= y && y <= +ay);\n\t}\n\n\tselect( point: Point ): boolean {\n\t\treturn false;\n\t}\n\n\t//\n\ttoGlobal( position: IPoint, point: Point, skipUpdate?: boolean ): Point {\n\t\tif( skipUpdate !== true ) {\n\t\t\tthis.updateTransform();\n\t\t}\n\t\tpoint.copyFrom( position );\n\t\tthis.transform.worldTransform.apply( point, point );\n\t\treturn point;\n\t}\n\n\ttoLocal<T extends IPoint>(\n\t\tposition: IPoint,\n\t\tfrom?: DisplayObject,\n\t\tpoint?: T,\n\t\tskipUpdate?: boolean\n\t): T {\n\t\tif( skipUpdate !== true ) {\n\t\t\tthis.updateTransform();\n\t\t}\n\t\tif( point === undefined ) {\n\t\t\tpoint = new Point() as any as T;\n\t\t}\n\t\tpoint.copyFrom( position );\n\t\tthis.transform.worldTransform.applyInverse( point as any, point as any );\n\t\treturn point;\n\t}\n\n\tgetBounds( work: Point, skipUpdate: boolean, result: Rectangle ): Rectangle {\n\t\tif( skipUpdate !== true ) {\n\t\t\tthis.updateTransform();\n\t\t}\n\t\tconst bounds = this._bounds = ( this._bounds || new Rectangle() );\n\t\tconst worldId = this.transform.getWorldId();\n\t\tif( worldId !== this._boundsTransformId ) {\n\t\t\tthis._boundsTransformId = worldId;\n\t\t\tthis.getBounds_( this.transform.worldTransform, work, bounds );\n\t\t}\n\t\tresult.copyFrom( bounds );\n\t\treturn result;\n\t}\n\n\tgetBoundsInternal( work: Point, skipUpdate: boolean, result: Rectangle ): Rectangle {\n\t\tif( skipUpdate !== true ) {\n\t\t\tthis.updateTransform();\n\t\t}\n\t\tconst boundsInternal = this._boundsInternal = ( this._boundsInternal || new Rectangle() );\n\t\tconst currentLocalId = this.transform.getLocalIdCurrent();\n\t\tif( currentLocalId !== this._boundsInternalTransformId ) {\n\t\t\tthis._boundsInternalTransformId = currentLocalId;\n\t\t\tthis.getBounds_( this.transform.internalTransform, work, boundsInternal );\n\t\t}\n\t\tresult.copyFrom( boundsInternal );\n\t\treturn result;\n\t}\n\n\tgetBoundsLocal( work: Point, skipUpdate: boolean, result: Rectangle ): Rectangle {\n\t\tif( skipUpdate !== true ) {\n\t\t\tthis.updateTransform();\n\t\t}\n\t\tconst boundsLocal = this._boundsLocal = ( this._boundsLocal || new Rectangle() );\n\t\tconst currentLocalId = this.transform.getLocalIdCurrent();\n\t\tif( currentLocalId !== this._boundsLocalTransformId ) {\n\t\t\tthis._boundsLocalTransformId = currentLocalId;\n\t\t\tthis.getBounds_( this.transform.localTransform, work, boundsLocal );\n\t\t}\n\t\tresult.copyFrom( boundsLocal );\n\t\treturn result;\n\t}\n\n\tprotected getBoundsSize(): IPoint {\n\t\treturn this.size;\n\t}\n\n\tprotected getBounds_( transform: Matrix, work: Point, result: Rectangle ): Rectangle {\n\t\tconst pivot = this.transform.pivot;\n\t\tconst px = pivot.x;\n\t\tconst py = pivot.y;\n\t\tconst size = this.getBoundsSize();\n\t\tconst sx = 0.5 * size.x;\n\t\tconst sy = 0.5 * size.y;\n\n\t\tconst a = transform.a;\n\t\tconst b = transform.b;\n\t\tconst c = transform.c;\n\t\tconst d = transform.d;\n\n\t\tlet x = -sx + px;\n\t\tlet y = -sy + py;\n\t\tconst x0 = a * x + c * y;\n\t\tconst y0 = b * x + d * y;\n\n\t\tx = +sx + px;\n\t\ty = -sy + py;\n\t\tconst x1 = a * x + c * y;\n\t\tconst y1 = b * x + d * y;\n\n\t\tx = -sx + px;\n\t\ty = +sy + py;\n\t\tconst x2 = a * x + c * y;\n\t\tconst y2 = b * x + d * y;\n\n\t\tx = +sx + px;\n\t\ty = +sy + py;\n\t\tconst x3 = a * x + c * y;\n\t\tconst y3 = b * x + d * y;\n\n\t\tconst xmin = Math.min( x0, x1, x2, x3 );\n\t\tconst ymin = Math.min( y0, y1, y2, y3 );\n\t\tconst xmax = Math.max( x0, x1, x2, x3 );\n\t\tconst ymax = Math.max( y0, y1, y2, y3 );\n\t\tresult.x = xmin + transform.tx;\n\t\tresult.y = ymin + transform.ty;\n\t\tresult.width = xmax - xmin;\n\t\tresult.height = ymax - ymin;\n\t\treturn result;\n\t}\n\n\t//\n\tdestroy(): void {\n\t\tconst children = this.children;\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\tchildren[ i ].destroy();\n\t\t}\n\t\tchildren.length = 0;\n\t}\n\n\t//\n\tprotected updateState(): void {\n\t\tconst parent = this.parent;\n\t\tconst stateLocal = this._stateLocal;\n\t\tconst newState = ( parent instanceof EShapeBase ?\n\t\t\tthis.mergeState( stateLocal, parent.getState() ) :\n\t\t\tstateLocal\n\t\t);\n\t\tconst oldState = this._state;\n\t\tif( oldState !== newState ) {\n\t\t\tthis._state = newState;\n\t\t\tthis.onStateChange( newState, oldState );\n\t\t}\n\t}\n\n\tprotected mergeState( stateLocal: DBaseState, stateParent: DBaseState ): DBaseState {\n\t\treturn stateLocal | (stateParent & DBaseState.DISABLED) |\n\t\t\t(stateParent & (DBaseState.FOCUSED | DBaseState.FOCUSED_IN) ? DBaseState.FOCUSED_IN : DBaseState.NONE);\n\t}\n\n\tprotected onStateChange( newState: number, oldState: number ) {\n\t\tconst runtime = this.runtime;\n\t\tif( runtime != null ) {\n\t\t\truntime.onStateChange( this, newState, oldState );\n\t\t}\n\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child instanceof EShapeBase ) {\n\t\t\t\tchild.onParentStateChange( newState, oldState );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onParentStateChange( newStateParent: number, oldStateParent: number ) {\n\t\tconst newState = this.mergeState( this._stateLocal, newStateParent );\n\t\tconst oldState = this._state;\n\t\tif( oldState !== newState ) {\n\t\t\tthis._state = newState;\n\t\t\tthis.onStateChange( newState, oldState );\n\t\t}\n\t}\n\n\tgetState(): DBaseState {\n\t\treturn this._state;\n\t}\n\n\tsetState( state: DBaseState, isOn: boolean ): this {\n\t\tif( DBaseStates.is( this._stateLocal, state ) !== isOn ) {\n\t\t\tif( isOn ) {\n\t\t\t\tthis._stateLocal |= state;\n\t\t\t} else {\n\t\t\t\tthis._stateLocal &= ~state;\n\t\t\t}\n\t\t\tthis.updateState();\n\t\t}\n\t\treturn this;\n\t}\n\n\thasState( state: DBaseState ): boolean {\n\t\treturn DBaseStates.is( this._state, state );\n\t}\n\n\tfocus(): this {\n\t\tthis.focused = true;\n\t\treturn this;\n\t}\n\n\tblur(): this {\n\t\tthis.focused = false;\n\t\treturn this;\n\t}\n\n\tget hovered(): boolean {\n\t\treturn this.hasState( DBaseState.HOVERED );\n\t}\n\n\tset hovered( isHovered: boolean ) {\n\t\tthis.setState( DBaseState.HOVERED, isHovered );\n\t}\n\n\tget active(): boolean {\n\t\treturn this.hasState( DBaseState.ACTIVE );\n\t}\n\n\tset active( isActive: boolean ) {\n\t\tthis.setState( DBaseState.ACTIVE, isActive );\n\t}\n\n\tget readonly(): boolean {\n\t\treturn this.hasState( DBaseState.READ_ONLY );\n\t}\n\n\tset readonly( isReadOnly: boolean ) {\n\t\tthis.setState( DBaseState.READ_ONLY, isReadOnly );\n\t}\n\n\tget enabled(): boolean {\n\t\treturn ! this.hasState( DBaseState.DISABLED );\n\t}\n\n\tget disabled(): boolean {\n\t\treturn this.hasState( DBaseState.DISABLED );\n\t}\n\n\tset disabled( isDisabled: boolean ) {\n\t\tthis.setState( DBaseState.DISABLED, isDisabled );\n\t}\n\n\tget dragging(): boolean {\n\t\treturn this.hasState( DBaseState.DRAGGING );\n\t}\n\n\tset dragging( isDragging: boolean ) {\n\t\tthis.setState( DBaseState.DRAGGING, isDragging );\n\t}\n\n\tget focused(): boolean {\n\t\treturn this.hasState( DBaseState.FOCUSED );\n\t}\n\n\tset focused( focused: boolean ) {\n\t\tif( this.focused !== focused ) {\n\t\t\tDControllers.getFocusController().setFocused( this, focused, false );\n\t\t}\n\t}\n\n\tget focusedin(): boolean {\n\t\treturn this.hasState( DBaseState.FOCUSED | DBaseState.FOCUSED_IN );\n\t}\n\n\tget unfocusable(): boolean {\n\t\treturn this.hasState( DBaseState.UNFOCUSABLE );\n\t}\n\n\tset unfocusable( unforcusable: boolean ) {\n\t\tthis.setState( DBaseState.UNFOCUSABLE, unforcusable );\n\t}\n\n\tget clicked(): boolean {\n\t\tconst runtime = this.runtime;\n\t\treturn !! ( runtime && (runtime.state & EShapeRuntimeState.CLICKED) );\n\t}\n\n\tget pressed(): boolean {\n\t\tconst runtime = this.runtime;\n\t\treturn !! ( runtime && (runtime.state & EShapeRuntimeState.PRESSED) );\n\t}\n\n\tget down(): boolean {\n\t\tconst runtime = this.runtime;\n\t\treturn !! ( runtime && (runtime.state & EShapeRuntimeState.DOWN) );\n\t}\n\n\tget up(): boolean {\n\t\tconst runtime = this.runtime;\n\t\treturn !! ( runtime && (runtime.state & EShapeRuntimeState.UP) );\n\t}\n\n\tget shadowed(): boolean {\n\t\treturn false;\n\t}\n\n\tonDblClick( e: MouseEvent ): boolean {\n\t\tconst runtime = this.runtime;\n\t\tif( runtime != null ) {\n\t\t\treturn runtime.onPointerDblClick( this );\n\t\t}\n\t\treturn false;\n\t}\n\n\tonShortcut( e: KeyboardEvent ): void {\n\t\tconst runtime = this.runtime;\n\t\tif( runtime != null ) {\n\t\t\treturn runtime.onPointerClick( this );\n\t\t}\n\t}\n\n\tonKeyDown( e: KeyboardEvent ): boolean {\n\t\tconst runtime = this.runtime;\n\t\tif( runtime != null ) {\n\t\t\treturn runtime.onKeyDown( this, e );\n\t\t}\n\t\treturn false;\n\t}\n\n\tonKeyUp( e: KeyboardEvent ): boolean {\n\t\tconst runtime = this.runtime;\n\t\tif( runtime != null ) {\n\t\t\treturn runtime.onKeyUp( this, e );\n\t\t}\n\t\treturn false;\n\t}\n\n\t//\n\tupdate( time: number ): void {\n\t\tconst runtime = this.runtime;\n\t\tif( runtime != null ) {\n\t\t\truntime.update( this, time );\n\t\t}\n\t}\n\n\tupdateRecursively( time: number ): void {\n\t\tthis.update( time );\n\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].update( time );\n\t\t}\n\t}\n\n\tcopy( source: EShape, part: EShapeCopyPart = EShapeCopyPart.ALL ): this {\n\t\tthis.id = source.id;\n\t\tif( (part & EShapeCopyPart.TRANSFORM) !== 0 ) {\n\t\t\tconst transform = this.transform;\n\t\t\tconst sourceTransform = source.transform;\n\t\t\ttransform.position.copyFrom( sourceTransform.position );\n\t\t\ttransform.rotation = sourceTransform.rotation;\n\t\t\ttransform.skew.copyFrom( sourceTransform.skew );\n\t\t\ttransform.pivot.copyFrom( sourceTransform.pivot );\n\t\t\ttransform.scale.copyFrom( sourceTransform.scale );\n\t\t}\n\t\tif( (part & EShapeCopyPart.SIZE) !== 0 ) {\n\t\t\tthis.size.copyFrom( source.size );\n\t\t}\n\t\tif( (part & EShapeCopyPart.STYLE) !== 0 ) {\n\t\t\tthis.fill.copy( source.fill );\n\t\t\tthis.stroke.copy( source.stroke );\n\t\t\tthis.tag.copy( source.tag );\n\t\t\tthis.text.copy( source.text );\n\t\t\tthis.radius = source.radius;\n\t\t\tthis.corner = source.corner;\n\t\t\tif (this.image == null) {\n\t\t\t\tthis.image = source.image;\n\t\t\t}\n\t\t}\n\t\tif( (part & EShapeCopyPart.ACTION) !== 0 ) {\n\t\t\tthis.action.addAll( source.action.values );\n\t\t\tthis.interactive = source.interactive;\n\t\t\tthis.cursor = source.cursor;\n\t\t\tthis.shortcut = source.shortcut;\n\t\t}\n\t\tif( (part & EShapeCopyPart.POINTS) !== 0 ) {\n\t\t\tconst sourcePoints = source.points;\n\t\t\tif( sourcePoints != null ) {\n\t\t\t\tconst points = this.points;\n\t\t\t\tif( points != null ) {\n\t\t\t\t\tpoints.copy( sourcePoints );\n\t\t\t\t} else {\n\t\t\t\t\tthis.points = sourcePoints.clone( this );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif( (part & EShapeCopyPart.STATE) !== 0 ) {\n\t\t\tthis.setState( source.getState(), true );\n\t\t}\n\t\treturn this;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeFill, EShapeFillLike } from \"../e-shape-fill\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeFillImplParent } from \"./e-shape-fill-impl-parent\";\n\nexport class EShapeFillImpl implements EShapeFill {\n\tprotected _parent: EShapeFillImplParent;\n\tprotected _enable: boolean;\n\tprotected _color: number;\n\tprotected _alpha: number;\n\n\tconstructor( parent: EShapeFillImplParent, enable: boolean, color: number, alpha: number ) {\n\t\tthis._parent = parent;\n\t\tthis._enable = enable;\n\t\tthis._color = color;\n\t\tthis._alpha = alpha;\n\t}\n\n\tget enable(): boolean {\n\t\treturn this._enable;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\tif( this._enable !== enable ) {\n\t\t\tthis._enable = enable;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget color(): number {\n\t\treturn this._color;\n\t}\n\n\tset color( color: number ) {\n\t\tif( this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget alpha(): number {\n\t\treturn this._alpha;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tif( this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tcopy( target: EShapeFillLike ): void {\n\t\tthis.set( target.enable, target.color, target.alpha );\n\t}\n\n\tset( enable?: boolean, color?: number, alpha?: number ): void {\n\t\tlet isChanged = false;\n\n\t\tif( enable !== undefined && this._enable !== enable ) {\n\t\t\tthis._enable = enable;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( color !== undefined && this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( alpha !== undefined && this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tclone(): EShapeFill {\n\t\treturn new EShapeFillImpl( this._parent, this._enable, this._color, this._alpha );\n\t}\n\n\ttoObject(): EShapeFillLike {\n\t\treturn {\n\t\t\tenable: this._enable,\n\t\t\tcolor: this._color,\n\t\t\talpha: this._alpha\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst stringified = `[${this._enable ? 1 : 0},${this._color},${this._alpha}]`;\n\t\treturn manager.add( stringified );\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\tconst resources = manager.resources;\n\t\tif( 0 <= target && target < resources.length ) {\n\t\t\tconst parsed = manager.fills.get( target );\n\t\t\tif( parsed != null ) {\n\t\t\t\tthis.set(\n\t\t\t\t\tparsed[ 0 ] !== 0,\n\t\t\t\t\tparsed[ 1 ],\n\t\t\t\t\tparsed[ 2 ]\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst deserialized = JSON.parse( resources[ target ] );\n\t\t\t\tmanager.fills.set( target, deserialized );\n\t\t\t\tthis.set(\n\t\t\t\t\tdeserialized[ 0 ] !== 0,\n\t\t\t\t\tdeserialized[ 1 ],\n\t\t\t\t\tdeserialized[ 2 ]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeStroke, EShapeStrokeLike, EShapeStrokeSide } from \"../e-shape-stroke\";\nimport { EShapeStrokeImplParent } from \"./e-shape-stroke-impl-parent\";\n\nexport class EShapeStrokeImpl implements EShapeStroke {\n\tprotected _parent: EShapeStrokeImplParent;\n\tprotected _enable: boolean;\n\tprotected _color: number;\n\tprotected _alpha: number;\n\tprotected _width: number;\n\tprotected _align: number;\n\tprotected _side: EShapeStrokeSide;\n\n\tconstructor(\n\t\tparent: EShapeStrokeImplParent,\n\t\tenable: boolean, color: number, alpha: number,\n\t\twidth: number, align: number, side: EShapeStrokeSide\n\t) {\n\t\tthis._parent = parent;\n\t\tthis._enable = enable;\n\t\tthis._color = color;\n\t\tthis._alpha = alpha;\n\t\tthis._width = width;\n\t\tthis._align = align;\n\t\tthis._side = side;\n\t}\n\n\tget enable(): boolean {\n\t\treturn this._enable;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\tif( this._enable !== enable ) {\n\t\t\tthis._enable = enable;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget color(): number {\n\t\treturn this._color;\n\t}\n\n\tset color( color: number ) {\n\t\tif( this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget alpha(): number {\n\t\treturn this._alpha;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tif( this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget width(): number {\n\t\treturn this._width;\n\t}\n\n\tset width( width: number ) {\n\t\tif( this._width !== width ) {\n\t\t\tthis._width = width;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget align(): number {\n\t\treturn this._align;\n\t}\n\n\tset align( align: number ) {\n\t\tif( this._align !== align ) {\n\t\t\tthis._align = align;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget side(): EShapeStrokeSide {\n\t\treturn this._side;\n\t}\n\n\tset side( side: EShapeStrokeSide ) {\n\t\tif( this._side !== side ) {\n\t\t\tthis._side = side;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tcopy( target?: Partial<EShapeStrokeLike> ): void {\n\t\tif( target ) {\n\t\t\tthis.set( target.enable, target.color, target.alpha, target.width, target.align, target.side );\n\t\t}\n\t}\n\n\tset( enable?: boolean, color?: number, alpha?: number, width?: number, align?: number, side?: EShapeStrokeSide ) {\n\t\tlet isChanged = false;\n\n\t\tif( enable !== undefined && this._enable !== enable ) {\n\t\t\tthis._enable = enable;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( color !== undefined && this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( alpha !== undefined && this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( width !== undefined && this._width !== width ) {\n\t\t\tthis._width = width;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( align !== undefined && this._align !== align ) {\n\t\t\tthis._align = align;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( side !== undefined && this._side !== side ) {\n\t\t\tthis._side = side;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tclone(): EShapeStroke {\n\t\treturn new EShapeStrokeImpl(\n\t\t\tthis._parent,\n\t\t\tthis._enable, this._color, this._alpha,\n\t\t\tthis._width, this._align, this._side\n\t\t);\n\t}\n\n\ttoObject(): EShapeStrokeLike {\n\t\treturn {\n\t\t\tenable: this._enable,\n\t\t\tcolor: this._color,\n\t\t\talpha: this._alpha,\n\t\t\twidth: this._width,\n\t\t\talign: this._align,\n\t\t\tside: this._side\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst enable = this._enable ? 1 : 0;\n\t\tconst serialized = `[${enable},${this._color},${this._alpha},${this._width},${this._align},${this._side}]`;\n\t\treturn manager.add( serialized );\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ) {\n\t\tconst resources = manager.resources;\n\t\tif( 0 <= target && target < resources.length ) {\n\t\t\tconst parsed = manager.strokes.get( target );\n\t\t\tif( parsed != null ) {\n\t\t\t\tthis.set(\n\t\t\t\t\tparsed[ 0 ] !== 0,\n\t\t\t\t\tparsed[ 1 ],\n\t\t\t\t\tparsed[ 2 ],\n\t\t\t\t\tparsed[ 3 ],\n\t\t\t\t\tparsed[ 4 ],\n\t\t\t\t\tparsed[ 5 ]\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst deserialized = JSON.parse( resources[ target ] );\n\t\t\t\tmanager.strokes.set( target, deserialized );\n\t\t\t\tthis.set(\n\t\t\t\t\tdeserialized[ 0 ] !== 0,\n\t\t\t\t\tdeserialized[ 1 ],\n\t\t\t\t\tdeserialized[ 2 ],\n\t\t\t\t\tdeserialized[ 3 ],\n\t\t\t\t\tdeserialized[ 4 ],\n\t\t\t\t\tdeserialized[ 5 ]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport {\n\tEShapeTagValueRange, EShapeTagValueRangeLike, EShapeTagValueRangeParent, EShapeTagValueRangeType\n} from \"../e-shape-tag-value-range\";\n\nexport class EShapeTagValueRangeImpl implements EShapeTagValueRange {\n\tprotected _type: EShapeTagValueRangeType;\n\tprotected _from: number;\n\tprotected _to: number;\n\tparent?: EShapeTagValueRangeParent;\n\n\tconstructor() {\n\t\tthis._type = EShapeTagValueRangeType.NONE;\n\t\tthis._from = 0;\n\t\tthis._to = 1;\n\t}\n\n\tget type(): EShapeTagValueRangeType {\n\t\treturn this._type;\n\t}\n\n\tset type( type: EShapeTagValueRangeType ) {\n\t\tif( this._type !== type ) {\n\t\t\tthis._type = type;\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tget from(): number {\n\t\treturn this._from;\n\t}\n\n\tset from( from: number ) {\n\t\tif( this._from !== from ) {\n\t\t\tthis._from = from;\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tget to(): number {\n\t\treturn this._to;\n\t}\n\n\tset to( to: number ) {\n\t\tif( this._to !== to ) {\n\t\t\tthis._to = to;\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tset( from?: number | null, to?: number | null ): boolean {\n\t\tlet result = false;\n\t\tif( from !== undefined && to !== undefined ) {\n\t\t\tif( from !== null && to !== null ) {\n\t\t\t\tconst type = (this._type | EShapeTagValueRangeType.FROM) | EShapeTagValueRangeType.TO;\n\t\t\t\tif( this._type !== type || this._from !== from || this._to !== to ) {\n\t\t\t\t\tthis._type = type;\n\t\t\t\t\tthis._from = from;\n\t\t\t\t\tthis._to = to;\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t} else if( from !== null ) {\n\t\t\t\tconst type = (this._type | EShapeTagValueRangeType.FROM) & (~EShapeTagValueRangeType.TO);\n\t\t\t\tif( this._type !== type || this._from !== from ) {\n\t\t\t\t\tthis._type = type;\n\t\t\t\t\tthis._from = from;\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t} else if( to !== null ) {\n\t\t\t\tconst type = (this._type | EShapeTagValueRangeType.TO) & (~EShapeTagValueRangeType.FROM);\n\t\t\t\tif( this._type !== type || this._from !== from ) {\n\t\t\t\t\tthis._type = type;\n\t\t\t\t\tthis._to = to;\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst type = this._type & (~(EShapeTagValueRangeType.TO | EShapeTagValueRangeType.FROM));\n\t\t\t\tif( this._type !== type ) {\n\t\t\t\t\tthis._type = type;\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if( from !== undefined ) {\n\t\t\tif( from !== null ) {\n\t\t\t\tconst type = this._type | EShapeTagValueRangeType.FROM;\n\t\t\t\tif( this._type !== type || this._from !== from ) {\n\t\t\t\t\tthis._type = type;\n\t\t\t\t\tthis._from = from;\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst type = this._type & (~EShapeTagValueRangeType.FROM);\n\t\t\t\tif( this._type !== type ) {\n\t\t\t\t\tthis._type = type;\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if( to !== undefined ) {\n\t\t\tif( to !== null ) {\n\t\t\t\tconst type = this._type | EShapeTagValueRangeType.TO;\n\t\t\t\tif( this._type !== type || this._to !== to ) {\n\t\t\t\t\tthis._type = type;\n\t\t\t\t\tthis._to = to;\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst type = this._type & (~EShapeTagValueRangeType.TO);\n\t\t\t\tif( this._type !== type ) {\n\t\t\t\t\tthis._type = type;\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif( result ) {\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tnormalize( value: number ): number {\n\t\tconst type = this._type;\n\t\tconst from = this._from;\n\t\tconst to = this._to;\n\t\tswitch( type ) {\n\t\tcase EShapeTagValueRangeType.FROM_TO:\n\t\t\treturn (value - from) / (to - from);\n\t\tcase EShapeTagValueRangeType.FROM:\n\t\t\treturn value - from;\n\t\tcase EShapeTagValueRangeType.TO:\n\t\t\treturn to - value;\n\t\tcase EShapeTagValueRangeType.NONE:\n\t\tdefault:\n\t\t\treturn value;\n\t\t}\n\t}\n\n\tisEquals( target: EShapeTagValueRangeLike ): boolean {\n\t\treturn (\n\t\t\tthis._type === target.type &&\n\t\t\tthis._from === target.from &&\n\t\t\tthis._to === target.to\n\t\t);\n\t}\n\n\tcopy( target: EShapeTagValueRangeLike ): this {\n\t\treturn this.copy_( target.type, target.from, target.to );\n\t}\n\n\tprotected copy_( type: EShapeTagValueRangeType, from: number, to: number ): this {\n\t\tlet isChanged = false;\n\n\t\tif( this._type !== type ) {\n\t\t\tthis._type = type;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( this._from !== from ) {\n\t\t\tthis._from = from;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( this._to !== to ) {\n\t\t\tthis._to = to;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\ttoObject(): EShapeTagValueRangeLike {\n\t\treturn {\n\t\t\ttype: this.type,\n\t\t\tfrom: this.from,\n\t\t\tto: this.to\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst serialized = `[${this._type},${this._from},${this._to}]`;\n\t\treturn manager.add( serialized );\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\tconst resources = manager.resources;\n\t\tif( 0 <= target && target < resources.length ) {\n\t\t\tconst parsed = manager.ranges.get( target );\n\t\t\tif( parsed != null ) {\n\t\t\t\tthis.copy_(\n\t\t\t\t\tparsed[ 0 ],\n\t\t\t\t\tparsed[ 1 ],\n\t\t\t\t\tparsed[ 2 ]\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst deserialized = JSON.parse( resources[ target ] );\n\t\t\t\tmanager.ranges.set( target, deserialized );\n\t\t\t\tthis.copy_(\n\t\t\t\t\tdeserialized[ 0 ],\n\t\t\t\t\tdeserialized[ 1 ],\n\t\t\t\t\tdeserialized[ 2 ]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { DeepPartial } from \"../util/deep-partial\";\nimport { EShapeResourceManagerDeserialization } from \"./e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"./e-shape-resource-manager-serialization\";\nimport { EShapeTextAlign, EShapeTextAlignLike } from \"./e-shape-text-align\";\nimport { EShapeTextDirection } from \"./e-shape-text-direction\";\nimport { EShapeTextOffset, EShapeTextOffsetLike } from \"./e-shape-text-offset\";\nimport { EShapeTextOutline, EShapeTextOutlineLike } from \"./e-shape-text-outline\";\n\nexport enum EShapeTextWeight {\n\tNORMAL,\n\tBOLD\n}\n\nexport enum EShapeTextStyle {\n\tNORMAL,\n\tITALIC\n}\n\nexport interface EShapeTextLike {\n\tvalue: string;\n\tcolor: number;\n\talpha: number;\n\tfamily: string;\n\tsize: number;\n\tweight: EShapeTextWeight;\n\talign: EShapeTextAlignLike;\n\toffset: EShapeTextOffsetLike;\n\tstyle: EShapeTextStyle;\n\toutline: EShapeTextOutlineLike;\n\tspacing: EShapeTextOffsetLike;\n\tdirection: EShapeTextDirection;\n\tpadding: EShapeTextOffsetLike;\n\tclipping: boolean;\n}\n\nexport interface EShapeTextAtlasCharacter {\n\tx: number;\n\ty: number;\n\twidth: number;\n\theight: number;\n\tadvance: number;\n\torigin: {\n\t\tx: number,\n\t\ty: number\n\t};\n}\n\nexport interface EShapeTextAtlasCharacters {\n\t[ character: string ]: EShapeTextAtlasCharacter;\n}\n\nexport interface EShapeTextAtlas {\n\twidth: number;\n\theight: number;\n\tfont: {\n\t\tsize: number;\n\t};\n\tcharacters: EShapeTextAtlasCharacters;\n}\n\nexport interface EShapeText extends EShapeTextLike {\n\tenable: boolean;\n\n\talign: EShapeTextAlign;\n\toffset: EShapeTextOffset;\n\toutline: EShapeTextOutline;\n\tspacing: EShapeTextOffset;\n\tpadding: EShapeTextOffset;\n\n\ttexture?: Texture;\t\t// Used for rendering and updated when rendered\n\tatlas?: EShapeTextAtlas;\t// Used for rendering and updated when rendered\n\tworld?: Float32Array;\t\t// Updated when rendered\n\n\tcopy( target?: DeepPartial<EShapeTextLike> ): this;\n\tset(\n\t\tvalue?: string, color?: number, alpha?: number,\n\t\tfamily?: string, size?: number, weight?: EShapeTextWeight,\n\t\tstyle?: EShapeTextStyle, direction?: EShapeTextDirection,\n\t\tclipping?: boolean\n\t): this;\n\ttoObject(): EShapeTextLike;\n\tserialize( manager: EShapeResourceManagerSerialization ): number;\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeTextAlignHorizontal {\n\tLEFT,\n\tCENTER,\n\tRIGHT,\n\tOUTSIDE_LEFT,\n\tOUTSIDE_RIGHT\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeTextAlignVertical {\n\tTOP,\n\tMIDDLE,\n\tBOTTOM,\n\tOUTSIDE_TOP,\n\tOUTSIDE_BOTTOM\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeTextDirection {\n\tLEFT_TO_RIGHT,\n\tTOP_TO_BOTTOM,\n\tBOTTOM_TO_TOP\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedTagValue } from \"../../d-diagram-serialized\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTagValue, EShapeTagValueOrder, EShapeTagValueParent } from \"../e-shape-tag-value\";\nimport { EShapeTagValueRange } from \"../e-shape-tag-value-range\";\nimport { EShapeTagValueRangeImpl } from \"./e-shape-tag-value-range-impl\";\n\nconst INDEX_COMPARATOR = ( a: number, b: number ): number => {\n\treturn a - b;\n};\n\nexport class EShapeTagValueImpl implements EShapeTagValue {\n\tid: string;\n\tinitial: string;\n\tformat: string;\n\trange: EShapeTagValueRange;\n\tprotected _value: unknown;\n\tprotected _time: number;\n\n\tprotected _values: unknown[] | undefined;\n\tprotected _times: number[] | undefined;\n\tprotected _capacity: number;\n\tprotected _order: EShapeTagValueOrder;\n\n\tprotected _parent?: EShapeTagValueParent;\n\n\tformatter?: ( value: unknown ) => unknown;\n\n\tconstructor() {\n\t\tthis.id = \"\";\n\t\tthis.initial = \"\";\n\t\tthis.format = \"\";\n\t\tthis.range = new EShapeTagValueRangeImpl();\n\t\tthis._value = 0;\n\t\tthis._time = 0;\n\t\tthis._capacity = 0;\n\t\tthis._order = EShapeTagValueOrder.ASCENDING;\n\t}\n\n\tget parent(): EShapeTagValueParent | undefined {\n\t\treturn this._parent;\n\t}\n\n\tset parent( parent: EShapeTagValueParent | undefined ) {\n\t\tif( this._parent !== parent ) {\n\t\t\tthis._parent = parent;\n\t\t\tthis.range.parent = parent;\n\t\t}\n\t}\n\n\tget value(): unknown {\n\t\treturn this._value;\n\t}\n\n\tset value( newValue: unknown ) {\n\t\tconst formatter = this.formatter;\n\t\tif( formatter != null ) {\n\t\t\tnewValue = formatter( newValue );\n\t\t}\n\n\t\tconst capacity = this._capacity;\n\t\tif( capacity <= 0 ) {\n\t\t\tif( this._value !== newValue ) {\n\t\t\t\tthis._value = newValue;\n\t\t\t\tconst parent = this.parent;\n\t\t\t\tif( parent != null ) {\n\t\t\t\t\tparent.isChanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tlet values = this._values;\n\t\t\tif( values == null ) {\n\t\t\t\tvalues = [];\n\t\t\t\tthis._values = values;\n\t\t\t}\n\n\t\t\t// Update the value\n\t\t\tthis._value = newValue;\n\n\t\t\t// Update the values\n\t\t\tconst order = this._order;\n\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\tvalues.push( newValue );\n\t\t\t} else {\n\t\t\t\tvalues.unshift( newValue );\n\t\t\t}\n\n\t\t\t// Remove the unnecessary values\n\t\t\tconst count = values.length - capacity;\n\t\t\tif( 0 < count ) {\n\t\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\t\tfor( let i = 0; i < count; ++i ) {\n\t\t\t\t\t\tvalues.shift();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvalues.length = capacity;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Tell the parent it's changed\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tget nvalue(): number {\n\t\treturn this.range.normalize( this._value as number );\n\t}\n\n\tget values(): unknown[] {\n\t\tlet result = this._values;\n\t\tif( result == null ) {\n\t\t\tresult = [];\n\t\t\tthis._values = result;\n\t\t}\n\t\treturn result;\n\t}\n\n\tset values( newValues: unknown[] ) {\n\t\tif( 0 < newValues.length ) {\n\t\t\tconst capacity = this._capacity;\n\t\t\tif( capacity <= 0 ) {\n\t\t\t\tlet newValue = newValues[ newValues.length - 1 ];\n\t\t\t\tconst formatter = this.formatter;\n\t\t\t\tif( formatter != null ) {\n\t\t\t\t\tnewValue = formatter( newValue );\n\t\t\t\t}\n\t\t\t\tif( this._value !== newValue ) {\n\t\t\t\t\tthis._value = newValue;\n\t\t\t\t\tconst parent = this.parent;\n\t\t\t\t\tif( parent != null ) {\n\t\t\t\t\t\tparent.isChanged = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet values = this._values;\n\t\t\t\tif( values == null ) {\n\t\t\t\t\tvalues = [];\n\t\t\t\t\tthis._values = values;\n\t\t\t\t}\n\n\t\t\t\tconst order = this._order;\n\t\t\t\tconst formatter = this.formatter;\n\t\t\t\tif( formatter != null ) {\n\t\t\t\t\t// Update the value\n\t\t\t\t\tthis._value = formatter( newValues[ newValues.length - 1 ] );\n\n\t\t\t\t\t// Update the values\n\t\t\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\t\t\tfor( let i = 0, imax = newValues.length; i < imax; ++i ) {\n\t\t\t\t\t\t\tvalues.push( formatter( newValues[ i ] ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor( let i = 0, imax = newValues.length; i < imax; ++i ) {\n\t\t\t\t\t\t\tvalues.unshift( formatter( newValues[ i ] ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Update the value\n\t\t\t\t\tthis._value = newValues[ newValues.length - 1 ];\n\n\t\t\t\t\t// Update the values\n\t\t\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\t\t\tfor( let i = 0, imax = newValues.length; i < imax; ++i ) {\n\t\t\t\t\t\t\tvalues.push( newValues[ i ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor( let i = 0, imax = newValues.length; i < imax; ++i ) {\n\t\t\t\t\t\t\tvalues.unshift( newValues[ i ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Remove the unnecessary values\n\t\t\t\tconst count = values.length - capacity;\n\t\t\t\tif( 0 < count ) {\n\t\t\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\t\t\tfor( let i = 0; i < count; ++i ) {\n\t\t\t\t\t\t\tvalues.shift();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalues.length = capacity;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Tell the parent it's changed\n\t\t\t\tconst parent = this.parent;\n\t\t\t\tif( parent != null ) {\n\t\t\t\t\tparent.isChanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget time(): number {\n\t\treturn this._time;\n\t}\n\n\tset time( newTime: number ) {\n\t\tconst capacity = this._capacity;\n\t\tif( capacity <= 0 ) {\n\t\t\tif( this._time !== newTime ) {\n\t\t\t\tthis._time = newTime;\n\t\t\t\tconst parent = this.parent;\n\t\t\t\tif( parent != null ) {\n\t\t\t\t\tparent.isChanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// Update the times\n\t\t\tlet times = this._times;\n\t\t\tif( times == null ) {\n\t\t\t\ttimes = [];\n\t\t\t\tthis._times = times;\n\t\t\t}\n\n\t\t\t// Update the time\n\t\t\tthis._time = newTime;\n\n\t\t\t// Update the times\n\t\t\tconst order = this._order;\n\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\ttimes.push( newTime );\n\t\t\t} else {\n\t\t\t\ttimes.unshift( newTime );\n\t\t\t}\n\n\t\t\t// Remove the unnecessary times\n\t\t\tconst count = times.length - capacity;\n\t\t\tif( 0 < count ) {\n\t\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\t\tfor( let i = 0; i < count; ++i ) {\n\t\t\t\t\t\ttimes.shift();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttimes.length = capacity;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Tell the parent it's changed\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tget times(): number[] {\n\t\tlet result = this._times;\n\t\tif( result == null ) {\n\t\t\tresult = [];\n\t\t\tthis._times = result;\n\t\t}\n\t\treturn result;\n\t}\n\n\tset times( newTimes: number[] ) {\n\t\tif( 0 < newTimes.length ) {\n\t\t\tconst capacity = this._capacity;\n\t\t\tif( capacity <= 0 ) {\n\t\t\t\tconst newTime = newTimes[ newTimes.length - 1 ];\n\t\t\t\tif( this._time !== newTime ) {\n\t\t\t\t\tthis._time = newTime;\n\t\t\t\t\tconst parent = this.parent;\n\t\t\t\t\tif( parent != null ) {\n\t\t\t\t\t\tparent.isChanged = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Update the times\n\t\t\t\tlet times = this._times;\n\t\t\t\tif( times == null ) {\n\t\t\t\t\ttimes = [];\n\t\t\t\t\tthis._times = times;\n\t\t\t\t}\n\n\t\t\t\t// Update the value\n\t\t\t\tthis._time = newTimes[ newTimes.length - 1 ];\n\n\t\t\t\t//\n\t\t\t\tconst order = this._order;\n\t\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\t\tfor( let i = 0, imax = newTimes.length; i < imax; ++i ) {\n\t\t\t\t\t\ttimes.push( newTimes[ i ] );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor( let i = 0, imax = newTimes.length; i < imax; ++i ) {\n\t\t\t\t\t\ttimes.unshift( newTimes[ i ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//\n\t\t\t\tconst count = times.length - capacity;\n\t\t\t\tif( 0 < count ) {\n\t\t\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\t\t\tfor( let i = 0; i < count; ++i ) {\n\t\t\t\t\t\t\ttimes.shift();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttimes.length = capacity;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Tell the parent it's changed\n\t\t\t\tconst parent = this.parent;\n\t\t\t\tif( parent != null ) {\n\t\t\t\t\tparent.isChanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget capacity(): number {\n\t\treturn this._capacity;\n\t}\n\n\tset capacity( capacity: number ) {\n\t\tif( this._capacity < capacity ) {\n\t\t\tthis._capacity = capacity;\n\t\t} else if( capacity < this._capacity ) {\n\t\t\tthis._capacity = capacity;\n\n\t\t\tlet isChanged = false;\n\n\t\t\t// Values\n\t\t\tconst order = this._order;\n\t\t\tconst values = this._values;\n\t\t\tif( values != null ) {\n\t\t\t\tconst count = values.length - capacity;\n\t\t\t\tif( 0 < count ) {\n\t\t\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\t\t\tfor( let i = 0; i < count; ++i ) {\n\t\t\t\t\t\t\tvalues.shift();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalues.length = capacity;\n\t\t\t\t\t}\n\t\t\t\t\tisChanged = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Times\n\t\t\tconst times = this._times;\n\t\t\tif( times != null ) {\n\t\t\t\tconst count = times.length - capacity;\n\t\t\t\tif( 0 < count ) {\n\t\t\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\t\t\tfor( let i = 0; i < count; ++i ) {\n\t\t\t\t\t\t\ttimes.shift();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttimes.length = capacity;\n\t\t\t\t\t}\n\t\t\t\t\tisChanged = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif( isChanged ) {\n\t\t\t\tconst parent = this.parent;\n\t\t\t\tif( parent != null ) {\n\t\t\t\t\tparent.isChanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget order(): EShapeTagValueOrder {\n\t\treturn this._order;\n\t}\n\n\tset order( order: EShapeTagValueOrder ) {\n\t\tthis._order = order;\n\t}\n\n\tremove( index: number ): void {\n\t\tlet isChanged = false;\n\n\t\t// Values\n\t\tconst values = this._values;\n\t\tif( values != null ) {\n\t\t\tif( 0 <= index && index < values.length ) {\n\t\t\t\tvalues.splice( index, 1 );\n\t\t\t\tisChanged = true;\n\t\t\t}\n\t\t}\n\n\t\t// Times\n\t\tconst times = this._times;\n\t\tif( times != null ) {\n\t\t\tif( 0 <= index && index < times.length ) {\n\t\t\t\ttimes.splice( index, 1 );\n\t\t\t\tisChanged = true;\n\t\t\t}\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveAll( indices: number[] ): void {\n\t\tlet isChanged = false;\n\n\t\tconst values = this._values;\n\t\tconst times = this._times;\n\t\tconst sorted = indices.slice(0).sort( INDEX_COMPARATOR );\n\t\tif( values != null ) {\n\t\t\tif( times != null ) {\n\t\t\t\tfor( let i = sorted.length - 1; 0 <= i; --i ) {\n\t\t\t\t\tconst index = sorted[ i ];\n\t\t\t\t\tif( 0 <= index ) {\n\t\t\t\t\t\tif( index < values.length ) {\n\t\t\t\t\t\t\tvalues.splice( index, 1 );\n\t\t\t\t\t\t\tisChanged = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif( index < times.length ) {\n\t\t\t\t\t\t\ttimes.splice( index, 1 );\n\t\t\t\t\t\t\tisChanged = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor( let i = sorted.length - 1; 0 <= i; --i ) {\n\t\t\t\t\tconst index = sorted[ i ];\n\t\t\t\t\tif( 0 <= index && index < values.length ) {\n\t\t\t\t\t\tvalues.splice( index, 1 );\n\t\t\t\t\t\tisChanged = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif( times != null ) {\n\t\t\t\tfor( let i = sorted.length - 1; 0 <= i; --i ) {\n\t\t\t\t\tconst index = sorted[ i ];\n\t\t\t\t\tif( 0 <= index && index < times.length ) {\n\t\t\t\t\t\ttimes.splice( index, 1 );\n\t\t\t\t\t\tisChanged = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tclear(): void {\n\t\tlet isChanged = false;\n\n\t\t// Values\n\t\tconst values = this._values;\n\t\tif( values != null ) {\n\t\t\tvalues.length = 0;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\t// Times\n\t\tconst times = this._times;\n\t\tif( times != null ) {\n\t\t\ttimes.length = 0;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\t// Change flag\n\t\tif( isChanged ) {\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * This method does not copy the `#values` and `#times` for the performance.\n\t *\n\t * @param target a copy target\n\t */\n\tcopy( target: EShapeTagValue ): this {\n\t\tthis.id = target.id;\n\t\tthis.initial = target.initial;\n\t\tthis.format = target.format;\n\t\tthis.formatter = target.formatter;\n\t\tthis.range.copy( target.range );\n\t\tthis._value = target.value;\n\t\tthis._time = target.time;\n\t\tthis._capacity = target.capacity;\n\t\treturn this;\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst idSerialized = manager.add( this.id );\n\t\tconst initialSerialized = manager.add( this.initial );\n\t\tconst formatSerialized = manager.add( this.format.trim() );\n\t\tconst rangeSerialized = this.range.serialize( manager );\n\t\treturn manager.add(\n\t\t\t`[${idSerialized},${initialSerialized},${formatSerialized},${rangeSerialized},${this._capacity},${this._order}]`\n\t\t);\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): this {\n\t\tconst resources = manager.resources;\n\t\tif( 0 <= target && target < resources.length ) {\n\t\t\tlet parsed = manager.tagValues.get( target );\n\t\t\tif( parsed == null ) {\n\t\t\t\tparsed = JSON.parse( resources[ target ] ) as DDiagramSerializedTagValue;\n\t\t\t\tmanager.tagValues.set( target, parsed );\n\t\t\t}\n\t\t\tthis.id = resources[ parsed[ 0 ] ] || \"\";\n\t\t\tthis.initial = resources[ parsed[ 1 ] ] || \"\";\n\t\t\tthis.format = resources[ parsed[ 2 ] ] || \"\";\n\t\t\tthis.range.deserialize( parsed[ 3 ], manager );\n\t\t\tthis._capacity = parsed[ 4 ];\n\t\t\tthis._order = parsed[ 5 ];\n\t\t}\n\n\t\treturn this;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTag } from \"../e-shape-tag\";\nimport { EShapeTagValue } from \"../e-shape-tag-value\";\nimport { EShapeTagValueRange } from \"../e-shape-tag-value-range\";\nimport { EShapeTagValueImpl } from \"./e-shape-tag-value-impl\";\nimport { EShapeTagValueRangeImpl } from \"./e-shape-tag-value-range-impl\";\n\nexport class EShapeTagImpl implements EShapeTag {\n\tstatic RANGE_DUMMY = new EShapeTagValueRangeImpl();\n\tstatic EMPTY_ARRAY = [];\n\n\tprotected _values: EShapeTagValue[];\n\tisChanged: boolean;\n\tinherited?: EShapeTagValue;\n\n\tconstructor() {\n\t\tthis._values = [];\n\t\tthis.isChanged = true;\n\t}\n\n\tget id(): string {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].id;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.id;\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tget initial(): string {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].initial;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.initial;\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tget format(): string {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].format;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.format;\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tget range(): EShapeTagValueRange {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].range;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.range;\n\t\t\t}\n\t\t}\n\t\treturn EShapeTagImpl.RANGE_DUMMY;\n\t}\n\n\tget value(): unknown {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].value;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.value;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset value( value: unknown ) {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\tvalues[ 0 ].value = value;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\tinherited.value = value;\n\t\t\t}\n\t\t}\n\t}\n\n\tget nvalue(): number {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].nvalue;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.nvalue;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tget time(): number {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].time;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.time;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset time( time: number ) {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\tvalues[ 0 ].time = time;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\tinherited.time = time;\n\t\t\t}\n\t\t}\n\t}\n\n\tget values(): unknown[] {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].values;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.values;\n\t\t\t}\n\t\t}\n\t\treturn EShapeTagImpl.EMPTY_ARRAY;\n\t}\n\n\tset values( newValues: unknown[] ) {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\tvalues[ 0 ].values = newValues;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\tinherited.values = newValues;\n\t\t\t}\n\t\t}\n\t}\n\n\tget times(): number[] {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].times;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.times;\n\t\t\t}\n\t\t}\n\t\treturn EShapeTagImpl.EMPTY_ARRAY;\n\t}\n\n\tset times( newTimes: number[] ) {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\tvalues[ 0 ].times = newTimes;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\tinherited.times = newTimes;\n\t\t\t}\n\t\t}\n\t}\n\n\tget capacity(): number {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].capacity;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.capacity;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset capacity( capacity: number ) {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\tvalues[ 0 ].capacity = capacity;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\tinherited.capacity = capacity;\n\t\t\t}\n\t\t}\n\t}\n\n\tadd( value: EShapeTagValue, index?: number ): void {\n\t\tconst values = this._values;\n\t\tvalue.parent = this;\n\t\tif( index === undefined ) {\n\t\t\tvalues.push( value );\n\t\t} else {\n\t\t\tvalues.splice( index, 0, value );\n\t\t}\n\t}\n\n\tset( index: number, value: EShapeTagValue ): EShapeTagValue | null {\n\t\tconst values = this._values;\n\t\tif( 0 <= index && index < values.length ) {\n\t\t\tconst result = values[ index ];\n\t\t\tvalue.parent = this;\n\t\t\tvalues[ index ] = value;\n\t\t\tresult.parent = undefined;\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tremove( index: number ): void {\n\t\tconst values = this._values;\n\t\tif( 0 <= index && index < values.length ) {\n\t\t\tvalues.splice( index, 1 )[ 0 ].parent = undefined;\n\t\t}\n\t}\n\n\tindexOf( target: EShapeTagValue ): number {\n\t\tconst values = this._values;\n\n\t\t// Instance-based matching\n\t\tfor( let i = 0, imax = values.length; i < imax; ++i ) {\n\t\t\tconst value = values[ i ];\n\t\t\tif( value === target ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\t// Data-based matching\n\t\tfor( let i = 0, imax = values.length; i < imax; ++i ) {\n\t\t\tconst value = values[ i ];\n\t\t\tif(\n\t\t\t\tvalue.id === target.id &&\n\t\t\t\tvalue.initial === target.initial &&\n\t\t\t\tvalue.formatter === target.formatter &&\n\t\t\t\tvalue.range.isEquals( target.range )\n\t\t\t) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\t// ID-based matching\n\t\tfor( let i = 0, imax = values.length; i < imax; ++i ) {\n\t\t\tconst value = values[ i ];\n\t\t\tif( value.id === target.id ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t}\n\n\tget( index: number ): EShapeTagValue | null {\n\t\tconst values = this._values;\n\t\tif( 0 <= index && index < values.length ) {\n\t\t\treturn values[ index ];\n\t\t}\n\t\treturn null;\n\t}\n\n\tsize(): number {\n\t\treturn this._values.length;\n\t}\n\n\tswap( indexA: number, indexB: number ): void {\n\t\tconst values = this._values;\n\t\tconst tmp = values[ indexB ];\n\t\tvalues[ indexB ] = values[ indexA ];\n\t\tvalues[ indexA ] = tmp;\n\t}\n\n\tcopy( target: EShapeTag ): this {\n\t\tconst values = this._values;\n\t\tvalues.length = 0;\n\n\t\tfor( let i = 0, imax = target.size(); i < imax; ++i ) {\n\t\t\tconst value = target.get( i );\n\t\t\tif( value != null ) {\n\t\t\t\tconst newValue = new EShapeTagValueImpl().copy( value );\n\t\t\t\tnewValue.parent = this;\n\t\t\t\tvalues.push( newValue );\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst values = this._values;\n\t\tif( values.length <= 0 ) {\n\t\t\treturn manager.add( \"[]\" );\n\t\t} else {\n\t\t\tlet serialized = `[${values[ 0 ].serialize( manager )}`;\n\t\t\tfor( let i = 1, imax = values.length; i < imax; ++i ) {\n\t\t\t\tserialized += `,${values[ i ].serialize( manager )}`;\n\t\t\t}\n\t\t\tserialized += \"]\";\n\t\t\treturn manager.add( serialized );\n\t\t}\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\tif( 0 <= target && target < manager.resources.length ) {\n\t\t\tlet deserialized: number[] | undefined = manager.tags.get( target );\n\t\t\tif( deserialized == null ) {\n\t\t\t\tdeserialized = JSON.parse( manager.resources[ target ] ) as number[];\n\t\t\t\tmanager.tags.set( target, deserialized );\n\t\t\t}\n\n\t\t\tconst values = this._values;\n\t\t\tvalues.length = 0;\n\t\t\tfor( let i = 0, imax = deserialized.length; i < imax; ++i ) {\n\t\t\t\tconst index = deserialized[ i ];\n\t\t\t\tconst value = new EShapeTagValueImpl();\n\t\t\t\tvalue.parent = this;\n\t\t\t\tvalue.deserialize( index, manager );\n\t\t\t\tvalues.push( value );\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextAlign, EShapeTextAlignLike } from \"../e-shape-text-align\";\nimport { EShapeTextAlignHorizontal } from \"../e-shape-text-align-horizontal\";\nimport { EShapeTextAlignVertical } from \"../e-shape-text-align-vertical\";\nimport { EShapeTextAlignImplParent } from \"./e-shape-text-align-impl-parent\";\n\nexport class EShapeTextAlignImpl implements EShapeTextAlign {\n\tprotected _parent: EShapeTextAlignImplParent;\n\tprotected _horizontal: EShapeTextAlignHorizontal;\n\tprotected _vertical: EShapeTextAlignVertical;\n\n\tconstructor(\n\t\tparent: EShapeTextAlignImplParent,\n\t\thorizontal: EShapeTextAlignHorizontal, vertical: EShapeTextAlignVertical\n\t) {\n\t\tthis._parent = parent;\n\t\tthis._horizontal = horizontal;\n\t\tthis._vertical = vertical;\n\t}\n\n\tget horizontal(): EShapeTextAlignHorizontal {\n\t\treturn this._horizontal;\n\t}\n\n\tset horizontal( horizontal: EShapeTextAlignHorizontal ) {\n\t\tif( this._horizontal !== horizontal ) {\n\t\t\tthis._horizontal = horizontal;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget vertical(): EShapeTextAlignVertical {\n\t\treturn this._vertical;\n\t}\n\n\tset vertical( vertical: EShapeTextAlignVertical ) {\n\t\tif( this._vertical !== vertical ) {\n\t\t\tthis._vertical = vertical;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tcopy( target?: Partial<EShapeTextAlignLike> ): void {\n\t\tif( target ) {\n\t\t\tthis.set( target.horizontal, target.vertical );\n\t\t}\n\t}\n\n\tset( horizontal?: EShapeTextAlignHorizontal, vertical?: EShapeTextAlignVertical ): void {\n\t\tlet isChanged = false;\n\n\t\tif( horizontal != null && this._horizontal !== horizontal ) {\n\t\t\tthis._horizontal = horizontal;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( vertical != null && this._vertical !== vertical ) {\n\t\t\tthis._vertical = vertical;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\ttoObject(): EShapeTextAlignLike {\n\t\treturn {\n\t\t\thorizontal: this._horizontal,\n\t\t\tvertical: this._vertical\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn manager.add( `[${this._horizontal},${this._vertical}]` );\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\tconst resources = manager.resources;\n\t\tif( 0 <= target && target < resources.length ) {\n\t\t\tconst parsed = manager.aligns.get( target );\n\t\t\tif( parsed != null ) {\n\t\t\t\tthis.set(\n\t\t\t\t\tparsed[ 0 ],\n\t\t\t\t\tparsed[ 1 ]\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst deserialized = JSON.parse( resources[ target ] );\n\t\t\t\tmanager.aligns.set( target, deserialized );\n\t\t\t\tthis.set(\n\t\t\t\t\tdeserialized[ 0 ],\n\t\t\t\t\tdeserialized[ 1 ]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueBlinkType {\n\tVISIBILITY,\n\tBRIGHTEN,\n\tDARKEN,\n\tOPACITY,\n\tCOLOR_FILL,\n\tCOLOR_STROKE\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOffset, EShapeTextOffsetLike } from \"../e-shape-text-offset\";\nimport { EShapeTextOffsetImplParent } from \"./e-shape-text-offset-impl-parent\";\n\nexport class EShapeTextOffsetImpl implements EShapeTextOffset {\n\tprotected _parent: EShapeTextOffsetImplParent;\n\tprotected _horizontal: number;\n\tprotected _vertical: number;\n\n\tconstructor( parent: EShapeTextOffsetImplParent, horizontal: number, vertical: number ) {\n\t\tthis._parent = parent;\n\t\tthis._horizontal = horizontal;\n\t\tthis._vertical = vertical;\n\t}\n\n\tget horizontal(): number {\n\t\treturn this._horizontal;\n\t}\n\n\tset horizontal( horizontal: number ) {\n\t\tif( this._horizontal !== horizontal ) {\n\t\t\tthis._horizontal = horizontal;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget vertical(): number {\n\t\treturn this._vertical;\n\t}\n\n\tset vertical( vertical: number ) {\n\t\tif( this._vertical !== vertical ) {\n\t\t\tthis._vertical = vertical;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tcopy( target?: Partial<EShapeTextOffsetLike> ): void {\n\t\tif( target ) {\n\t\t\tthis.set( target.horizontal, target.vertical );\n\t\t}\n\t}\n\n\tset( horizontal?: number, vertical?: number ): void {\n\t\tlet isChanged = false;\n\n\t\tif( horizontal != null && this._horizontal !== horizontal ) {\n\t\t\tthis._horizontal = horizontal;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( vertical != null && this._vertical !== vertical ) {\n\t\t\tthis._vertical = vertical;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\ttoObject(): EShapeTextOffsetLike {\n\t\treturn {\n\t\t\thorizontal: this._horizontal,\n\t\t\tvertical: this._vertical\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn manager.add( `[${this._horizontal},${this._vertical}]` );\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\tconst resources = manager.resources;\n\t\tif( 0 <= target && target < resources.length ) {\n\t\t\tconst parsed = manager.margins.get( target );\n\t\t\tif( parsed != null ) {\n\t\t\t\tthis.set(\n\t\t\t\t\tparsed[ 0 ],\n\t\t\t\t\tparsed[ 1 ]\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst deserialized = JSON.parse( resources[ target ] );\n\t\t\t\tmanager.margins.set( target, deserialized );\n\t\t\t\tthis.set(\n\t\t\t\t\tdeserialized[ 0 ],\n\t\t\t\t\tdeserialized[ 1 ]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOutline, EShapeTextOutlineLike } from \"../e-shape-text-outline\";\nimport { EShapeTextOutlineImplParent } from \"./e-shape-text-outline-impl-parent\";\n\nexport class EShapeTextOutlineImpl implements EShapeTextOutline {\n\tprotected _parent: EShapeTextOutlineImplParent;\n\tprotected _enable: boolean;\n\tprotected _color: number;\n\tprotected _alpha: number;\n\tprotected _width: number;\n\n\tconstructor( parent: EShapeTextOutlineImplParent, enable: boolean, color: number, alpha: number, width: number ) {\n\t\tthis._parent = parent;\n\t\tthis._enable = enable;\n\t\tthis._color = color;\n\t\tthis._alpha = alpha;\n\t\tthis._width = width;\n\t}\n\n\tget enable(): boolean {\n\t\treturn this._enable;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\tif( this._enable !== enable ) {\n\t\t\tthis._enable = enable;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget color(): number {\n\t\treturn this._color;\n\t}\n\n\tset color( color: number ) {\n\t\tif( this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget alpha(): number {\n\t\treturn this._alpha;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tif( this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget width(): number {\n\t\treturn this._width;\n\t}\n\n\tset width( width: number ) {\n\t\tif( this._width !== width ) {\n\t\t\tthis._width = width;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tcopy( target?: Partial<EShapeTextOutlineLike> ): void {\n\t\tif( target ) {\n\t\t\tthis.set( target.enable, target.color, target.alpha, target.width );\n\t\t}\n\t}\n\n\tset( enable?: boolean, color?: number, alpha?: number, width?: number ) {\n\t\tlet isChanged = false;\n\n\t\tif( enable !== undefined && this._enable !== enable ) {\n\t\t\tthis._enable = enable;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( color !== undefined && this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( alpha !== undefined && this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( width !== undefined && this._width !== width ) {\n\t\t\tthis._width = width;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tclone(): EShapeTextOutline {\n\t\treturn new EShapeTextOutlineImpl( this._parent, this._enable, this._color, this._alpha, this._width );\n\t}\n\n\ttoObject(): EShapeTextOutlineLike {\n\t\treturn {\n\t\t\tenable: this._enable,\n\t\t\tcolor: this._color,\n\t\t\talpha: this._alpha,\n\t\t\twidth: this._width\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst serialized = `[${this._enable ? 1 : 0},${this._color},${this._alpha},${this._width}]`;\n\t\treturn manager.add( serialized );\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ) {\n\t\tconst resources = manager.resources;\n\t\tif( 0 <= target && target < resources.length ) {\n\t\t\tconst parsed = manager.textOutlines.get( target );\n\t\t\tif( parsed != null ) {\n\t\t\t\tthis.set(\n\t\t\t\t\tparsed[ 0 ] !== 0,\n\t\t\t\t\tparsed[ 1 ],\n\t\t\t\t\tparsed[ 2 ],\n\t\t\t\t\tparsed[ 3 ]\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst deserialized = JSON.parse( resources[ target ] );\n\t\t\t\tmanager.textOutlines.set( target, deserialized );\n\t\t\t\tthis.set(\n\t\t\t\t\tdeserialized[ 0 ] !== 0,\n\t\t\t\t\tdeserialized[ 1 ],\n\t\t\t\t\tdeserialized[ 2 ],\n\t\t\t\t\tdeserialized[ 3 ]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { DDiagramSerializedText } from \"../../d-diagram-serialized\";\nimport { DeepPartial } from \"../../util/deep-partial\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeText, EShapeTextAtlas, EShapeTextLike, EShapeTextStyle, EShapeTextWeight } from \"../e-shape-text\";\nimport { EShapeTextAlign } from \"../e-shape-text-align\";\nimport { EShapeTextAlignHorizontal } from \"../e-shape-text-align-horizontal\";\nimport { EShapeTextAlignVertical } from \"../e-shape-text-align-vertical\";\nimport { EShapeTextDirection } from \"../e-shape-text-direction\";\nimport { EShapeTextOffset } from \"../e-shape-text-offset\";\nimport { EShapeTextOutline } from \"../e-shape-text-outline\";\nimport { EShapeTextAlignImpl } from \"./e-shape-text-align-impl\";\nimport { EShapeTextImplParent } from \"./e-shape-text-impl-parent\";\nimport { EShapeTextOffsetImpl } from \"./e-shape-text-offset-impl\";\nimport { EShapeTextOutlineImpl } from \"./e-shape-text-outline-impl\";\n\nexport class EShapeTextImpl implements EShapeText {\n\tprotected _parent: EShapeTextImplParent;\n\tprotected _enable: boolean;\n\tprotected _value: string;\n\tprotected _family: string;\n\tprotected _color: number;\n\tprotected _alpha: number;\n\tprotected _size: number;\n\tprotected _weight: EShapeTextWeight;\n\treadonly align: EShapeTextAlign;\n\treadonly offset: EShapeTextOffset;\n\tprotected _style: EShapeTextStyle;\n\treadonly outline: EShapeTextOutline;\n\treadonly spacing: EShapeTextOffset;\n\tprotected _direction: EShapeTextDirection;\n\treadonly padding: EShapeTextOffset;\n\tprotected _clipping: boolean;\n\n\ttexture?: Texture;\t\t// Used for rendering and updated when rendered\n\tatlas?: EShapeTextAtlas;\t// Used for rendering and updated when rendered\n\tworld?: Float32Array;\t\t// Updated when rendered\n\n\tconstructor(\n\t\tparent: EShapeTextImplParent,\n\t\tvalue: string, color: number, alpha: number, family: string, size: number\n\t) {\n\t\tthis._parent = parent;\n\t\tthis._enable = true;\n\t\tthis._value = value;\n\t\tthis._color = color!;\n\t\tthis._alpha = alpha!;\n\t\tthis._family = family!;\n\t\tthis._size = size!;\n\t\tthis._weight = EShapeTextWeight.NORMAL;\n\t\tthis.align = new EShapeTextAlignImpl( parent, EShapeTextAlignHorizontal.CENTER, EShapeTextAlignVertical.MIDDLE );\n\t\tthis.offset = new EShapeTextOffsetImpl( parent, 0, 0 );\n\t\tthis._style = EShapeTextStyle.NORMAL;\n\t\tthis.spacing = new EShapeTextOffsetImpl( parent, 0, 0 );\n\t\tthis.outline = new EShapeTextOutlineImpl( parent, false, 0xffffff, 1.0, 0.5 );\n\t\tthis._direction = EShapeTextDirection.LEFT_TO_RIGHT;\n\t\tthis.padding = new EShapeTextOffsetImpl( parent, 10, 10 );\n\t\tthis._clipping = false;\n\t}\n\n\tget enable(): boolean {\n\t\treturn this._enable;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\tif( this._enable !== enable ) {\n\t\t\tthis._enable = enable;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget value(): string {\n\t\treturn this._value;\n\t}\n\n\tset value( value: string ) {\n\t\tif( this._value !== value ) {\n\t\t\tthis._value = value;\n\n\t\t\t// Compatibility check\n\t\t\tconst parent = this._parent;\n\t\t\tconst uploaded = parent.uploaded;\n\t\t\tif( uploaded == null || ! uploaded.isCompatible( parent ) ) {\n\t\t\t\tthis.atlas = undefined;\n\t\t\t\tparent.toDirty();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Character code check\n\t\t\tconst atlas = this.atlas;\n\t\t\tconst characters = atlas && atlas.characters;\n\t\t\tif( characters != null ) {\n\t\t\t\tfor( let i = 0, imax = value.length; i < imax; ++i ) {\n\t\t\t\t\tconst char = value[ i ];\n\t\t\t\t\tif( ! (char in characters) ) {\n\t\t\t\t\t\tthis.atlas = undefined;\n\t\t\t\t\t\tparent.toDirty();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.atlas = undefined;\n\t\t\t\tparent.toDirty();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Update uploaded\n\t\t\tparent.updateUploaded();\n\t\t}\n\t}\n\n\tget family(): string {\n\t\treturn this._family;\n\t}\n\n\tset family( family: string ) {\n\t\tif( this._family !== family ) {\n\t\t\tthis._family = family;\n\t\t\tthis._parent.toDirty();\n\t\t}\n\t}\n\n\tget color(): number {\n\t\treturn this._color;\n\t}\n\n\tset color( color: number ) {\n\t\tif( this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget alpha(): number {\n\t\treturn this._alpha;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tif( this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget size(): number {\n\t\treturn this._size;\n\t}\n\n\tset size( size: number ) {\n\t\tif( this._size !== size ) {\n\t\t\tthis._size = size;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget weight(): EShapeTextWeight {\n\t\treturn this._weight;\n\t}\n\n\tset weight( weight: EShapeTextWeight ) {\n\t\tif( this._weight !== weight ) {\n\t\t\tthis._weight = weight;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget style(): EShapeTextStyle {\n\t\treturn this._style;\n\t}\n\n\tset style( style: EShapeTextStyle ) {\n\t\tif( this._style !== style ) {\n\t\t\tthis._style = style;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget direction(): EShapeTextDirection {\n\t\treturn this._direction;\n\t}\n\n\tset direction( direction: EShapeTextDirection ) {\n\t\tif( this._direction !== direction ) {\n\t\t\tthis._direction = direction;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget clipping(): boolean {\n\t\treturn this._clipping;\n\t}\n\n\tset clipping( clipping: boolean ) {\n\t\tif( this._clipping !== clipping ) {\n\t\t\tthis._clipping = clipping;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tcopy( target?: DeepPartial<EShapeTextLike> ): this {\n\t\tif( target ) {\n\t\t\tthis.set(\n\t\t\t\ttarget.value,\n\t\t\t\ttarget.color,\n\t\t\t\ttarget.alpha,\n\t\t\t\ttarget.family,\n\t\t\t\ttarget.size,\n\t\t\t\ttarget.weight,\n\t\t\t\ttarget.style,\n\t\t\t\ttarget.direction,\n\t\t\t\ttarget.clipping\n\t\t\t);\n\t\t\tthis.align.copy( target.align );\n\t\t\tthis.offset.copy( target.offset );\n\t\t\tthis.outline.copy( target.outline );\n\t\t\tthis.spacing.copy( target.spacing );\n\t\t\tthis.padding.copy( target.padding );\n\t\t}\n\t\treturn this;\n\t}\n\n\tset(\n\t\tvalue?: string, color?: number, alpha?: number,\n\t\tfamily?: string, size?: number, weight?: EShapeTextWeight,\n\t\tstyle?: EShapeTextStyle, direction?: EShapeTextDirection,\n\t\tclipping?: boolean\n\t): this {\n\t\tlet isChangedDirty = false;\n\t\tlet isChangedUploaded = false;\n\n\t\tif( value != null && this._value !== value ) {\n\t\t\tthis._value = value;\n\t\t\tisChangedDirty = true;\n\t\t}\n\n\t\tif( color != null && this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tisChangedUploaded = true;\n\t\t}\n\n\t\tif( alpha != null && this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tisChangedUploaded = true;\n\t\t}\n\n\t\tif( family != null && this._family !== family ) {\n\t\t\tthis._family = family;\n\t\t\tisChangedDirty = true;\n\t\t}\n\n\t\tif( size != null && this._size !== size ) {\n\t\t\tthis._size = size;\n\t\t\tisChangedUploaded = true;\n\t\t}\n\n\t\tif( weight != null && this._weight !== weight ) {\n\t\t\tthis._weight = weight;\n\t\t\tisChangedUploaded = true;\n\t\t}\n\n\t\tif( style != null && this._style !== style ) {\n\t\t\tthis._style = style;\n\t\t\tisChangedUploaded = true;\n\t\t}\n\n\t\tif( direction != null && this._direction !== direction ) {\n\t\t\tthis._direction = direction;\n\t\t\tisChangedUploaded = true;\n\t\t}\n\n\t\tif( clipping != null && this._clipping !== clipping ) {\n\t\t\tthis._clipping = clipping;\n\t\t\tisChangedUploaded = true;\n\t\t}\n\n\t\tif( isChangedDirty ) {\n\t\t\tthis._parent.toDirty();\n\t\t} else if( isChangedUploaded ) {\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\ttoObject(): EShapeTextLike {\n\t\treturn {\n\t\t\tvalue: this._value,\n\t\t\tcolor: this._color,\n\t\t\talpha: this._alpha,\n\t\t\tfamily: this._family,\n\t\t\tsize: this._size,\n\t\t\tweight: this._weight,\n\t\t\talign: this.align.toObject(),\n\t\t\toffset: this.offset.toObject(),\n\t\t\tstyle: this._style,\n\t\t\toutline: this.outline.toObject(),\n\t\t\tdirection: this._direction,\n\t\t\tspacing: this.spacing.toObject(),\n\t\t\tpadding: this.padding.toObject(),\n\t\t\tclipping: this._clipping\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst alignSerialized = this.align.serialize( manager );\n\t\tconst offsetSerialized = this.offset.serialize( manager );\n\t\tconst outlineSerialized = this.outline.serialize( manager );\n\t\tconst spacingSerialized = this.spacing.serialize( manager );\n\t\tconst paddingSerialized = this.padding.serialize( manager );\n\t\tconst serialized = `[${manager.add( this._value )},${this._color},${this._alpha},` +\n\t\t\t`${manager.add( this._family )},${this._size},${this._weight},${alignSerialized},` +\n\t\t\t`${offsetSerialized},${this._style},${outlineSerialized},${spacingSerialized},` +\n\t\t\t`${this._direction},${paddingSerialized},${this._clipping ? 1 : 0 }]`;\n\t\treturn manager.add( serialized );\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ) {\n\t\tconst resources = manager.resources;\n\t\tif( 0 <= target && target < resources.length ) {\n\t\t\tlet parsed = manager.texts.get( target );\n\t\t\tif( parsed == null ) {\n\t\t\t\tparsed = JSON.parse( resources[ target ] ) as DDiagramSerializedText;\n\t\t\t\tmanager.texts.set( target, parsed );\n\t\t\t}\n\t\t\tthis.set(\n\t\t\t\tresources[ parsed[ 0 ] ] || \"\",\n\t\t\t\tparsed[ 1 ],\n\t\t\t\tparsed[ 2 ],\n\t\t\t\tresources[ parsed[ 3 ] ] || \"auto\",\n\t\t\t\tparsed[ 4 ],\n\t\t\t\tparsed[ 5 ],\n\t\t\t\tparsed[ 8 ],\n\t\t\t\tparsed[ 11 ],\n\t\t\t\t( parsed[ 13 ] !== 0 )\n\t\t\t);\n\t\t\tthis.align.deserialize( parsed[ 6 ], manager );\n\t\t\tthis.offset.deserialize( parsed[ 7 ], manager );\n\t\t\tthis.outline.deserialize( parsed[ 9 ], manager );\n\t\t\tthis.spacing.deserialize( parsed[ 10 ], manager );\n\t\t\tthis.padding.deserialize( parsed[ 12 ], manager );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint, ObservablePoint } from \"pixi.js\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeCorner } from \"../e-shape-corner\";\nimport { EShapeDefaults } from \"../e-shape-defaults\";\nimport { EShapeFill } from \"../e-shape-fill\";\nimport { EShapeGradientLike } from \"../e-shape-gradient\";\nimport { EShapePoints } from \"../e-shape-points\";\nimport { EShapeStroke } from \"../e-shape-stroke\";\nimport { EShapeTag } from \"../e-shape-tag\";\nimport { EShapeText } from \"../e-shape-text\";\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapeBase } from \"./e-shape-base\";\nimport { EShapeFillImpl } from \"./e-shape-fill-impl\";\nimport { EShapeStrokeImpl } from \"./e-shape-stroke-impl\";\nimport { EShapeTagImpl } from \"./e-shape-tag-impl\";\nimport { EShapeTextImpl } from \"./e-shape-text-impl\";\n\nexport abstract class EShapePrimitive extends EShapeBase {\n\treadonly size: IPoint;\n\treadonly fill: EShapeFill;\n\treadonly stroke: EShapeStroke;\n\tprotected _radius: number;\n\tprotected _corner: EShapeCorner;\n\tpoints?: EShapePoints;\n\tprotected _image?: HTMLImageElement;\n\tgradient?: EShapeGradientLike;\n\treadonly text: EShapeText;\n\treadonly tag: EShapeTag;\n\tcursor: string;\n\n\tconstructor( type: EShapeType ) {\n\t\tsuper( type );\n\t\tthis.size = this.newSize();\n\t\tthis.fill = this.newFill();\n\t\tthis.stroke = this.newStroke();\n\t\tthis._radius = EShapeDefaults.RADIUS;\n\t\tthis._corner = EShapeCorner.ALL;\n\t\tthis.tag = new EShapeTagImpl();\n\t\tthis.text = this.newText();\n\t\tthis.cursor = EShapeDefaults.CURSOR;\n\t}\n\n\tprotected newSize(): IPoint {\n\t\treturn new ObservablePoint(\n\t\t\t() => { this.onSizeChange(); },\n\t\t\tundefined,\n\t\t\tEShapeDefaults.SIZE_X,\n\t\t\tEShapeDefaults.SIZE_Y\n\t\t);\n\t}\n\n\tprotected newFill(): EShapeFill {\n\t\treturn new EShapeFillImpl(\n\t\t\tthis, true,\n\t\t\tEShapeDefaults.FILL_COLOR,\n\t\t\tEShapeDefaults.FILL_ALPHA\n\t\t);\n\t}\n\n\tprotected newStroke(): EShapeStroke {\n\t\treturn new EShapeStrokeImpl(\n\t\t\tthis, true,\n\t\t\tEShapeDefaults.STROKE_COLOR,\n\t\t\tEShapeDefaults.STROKE_ALPHA,\n\t\t\tEShapeDefaults.STROKE_WIDTH,\n\t\t\tEShapeDefaults.STROKE_ALIGN,\n\t\t\tEShapeDefaults.STROKE_SIDE\n\t\t);\n\t}\n\n\tprotected newText(): EShapeText {\n\t\treturn new EShapeTextImpl(\n\t\t\tthis,\n\t\t\tEShapeDefaults.TEXT_VALUE,\n\t\t\tEShapeDefaults.STROKE_COLOR,\n\t\t\tEShapeDefaults.STROKE_ALPHA,\n\t\t\tEShapeDefaults.TEXT_FAMILY,\n\t\t\tEShapeDefaults.TEXT_SIZE\n\t\t);\n\t}\n\n\tabstract clone(): EShape;\n\n\tget corner(): number {\n\t\treturn this._corner;\n\t}\n\n\tset corner( corner: number ) {\n\t\tif( this._corner !== corner ) {\n\t\t\tthis._corner = corner;\n\t\t\tthis.updateUploaded();\n\t\t}\n\t}\n\n\tget radius(): number {\n\t\treturn this._radius;\n\t}\n\n\tset radius( radius: number ) {\n\t\tif( this._radius !== radius ) {\n\t\t\tthis._radius = radius;\n\t\t\tthis.updateUploaded();\n\t\t}\n\t}\n\n\tget image(): HTMLImageElement | undefined {\n\t\treturn this._image;\n\t}\n\n\tset image( image: HTMLImageElement | undefined ) {\n\t\tif( this._image !== image ) {\n\t\t\tif( image != null ) {\n\t\t\t\tthis._image = image;\n\t\t\t\tthis.imageSrc = image.src;\n\t\t\t} else {\n\t\t\t\tthis._image = undefined;\n\t\t\t\tthis.imageSrc = undefined;\n\t\t\t}\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.toDirty();\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { utilIndexOf } from \"../../util/util-index-of\";\nimport { EShapePoints, EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapePrimitive } from \"./e-shape-primitive\";\n\nexport abstract class EShapeLineBase extends EShapePrimitive {\n\tabstract points: EShapePoints;\n\tabstract clone(): EShapeLineBase;\n\n\tserialize( manager: EShapeResourceManagerSerialization ): DDiagramSerializedItem {\n\t\tconst result = super.serialize( manager );\n\t\tresult[ 15 ] = this.points.serialize( manager );\n\t\treturn result;\n\t}\n\n\tprotected getPixelScale(): number {\n\t\tconst container = this.root.parent as any;\n\t\tif( container != null && container.getPixelScale != null ) {\n\t\t\treturn container.getPixelScale();\n\t\t}\n\t\treturn 1.0;\n\t}\n\n\tprotected getStrokeWidthScale( points: EShapePoints ): number {\n\t\tconst style = points.style;\n\t\tif( style & EShapePointsStyle.NON_EXPANDING_WIDTH ) {\n\t\t\tif( style & EShapePointsStyle.NON_SHRINKING_WIDTH ) {\n\t\t\t\treturn this.getPixelScale();\n\t\t\t} else {\n\t\t\t\treturn Math.min( 1.0, this.getPixelScale() );\n\t\t\t}\n\t\t} else {\n\t\t\tif( style & EShapePointsStyle.NON_SHRINKING_WIDTH ) {\n\t\t\t\treturn Math.max( 1.0, this.getPixelScale() );\n\t\t\t} else {\n\t\t\t\treturn 1.0;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected getStrokeWidthScaled( points: EShapePoints ): number {\n\t\tconst stroke = this.stroke;\n\t\treturn ( stroke.enable ? stroke.width * this.getStrokeWidthScale( points ) : 0 );\n\t}\n\n\tcontainsAbs( x: number, y: number, ax: number, ay: number ): boolean {\n\t\tconst points = this.points;\n\t\tconst swh = this.getStrokeWidthScaled( points ) * 0.5;\n\t\tif( this.containsAbsBBox( x, y, ax + swh, ay + swh ) ) {\n\t\t\tconst threshold = swh * swh;\n\t\t\tconst pointCount = points.length;\n\t\t\tif( 2 <= pointCount ) {\n\t\t\t\tconst pointValues = points.values;\n\t\t\t\tconst pointSegments = points.segments;\n\t\t\t\tfor( let i = 0, imax = pointCount - 1, iv = 0; i < imax; i += 1, iv += 2 ) {\n\t\t\t\t\tif( utilIndexOf( pointSegments, i + 1 ) < 0 ) {\n\t\t\t\t\t\tconst p0x = pointValues[ iv + 0 ];\n\t\t\t\t\t\tconst p0y = pointValues[ iv + 1 ];\n\t\t\t\t\t\tconst p1x = pointValues[ iv + 2 ];\n\t\t\t\t\t\tconst p1y = pointValues[ iv + 3 ];\n\t\t\t\t\t\tif( 0 <= EShapeLineBase.calcHitPosition( x, y, p0x, p0y, p1x, p1y, threshold ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif( 2 < pointCount && (points.style & EShapePointsStyle.CLOSED) ) {\n\t\t\t\t\tif( utilIndexOf( pointSegments, 0 ) < 0 ) {\n\t\t\t\t\t\tconst iv = (pointCount - 1) << 1;\n\t\t\t\t\t\tconst p0x = pointValues[ iv + 0 ];\n\t\t\t\t\t\tconst p0y = pointValues[ iv + 1 ];\n\t\t\t\t\t\tconst p1x = pointValues[ 0 ];\n\t\t\t\t\t\tconst p1y = pointValues[ 1 ];\n\t\t\t\t\t\tif( 0 <= EShapeLineBase.calcHitPosition( x, y, p0x, p0y, p1x, p1y, threshold ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tstatic calcHitPosition(\n\t\tx: number, y: number,\n\t\tp0x: number, p0y: number,\n\t\tp1x: number, p1y: number,\n\t\tsquaredDistance: number\n\t): number {\n\t\t// (x, y) = p0 + (p1 - p0) * t where 0 <= t <= 1\n\t\t// d0 := p1 - p0\n\t\t// d1 := v - p0\n\t\t// (p0.x + d0.x * t - x)^2 + (p0.y + d0.y * t - y)^2\n\t\t// (d0.x t - d1.x)^2 + (d0.y t - d1.y)^2\n\t\t// (d0.x^2 + d0.y^2) t^2 - 2 (d0.x * d1.x + d0.y * d1.y) t + (d1.x^2 + d1.y^2)\n\t\t// a := dot( d0, d0 )\n\t\t// b := dot( d0, d1 )\n\t\t// c := dot( d1, d1 )\n\t\t// a t^2 - 2 b t + c = a (t - b / a)^2 + c - b * b / a\n\t\t// t0 = b / a  min = c - b * b / a\n\t\tconst d0x = p1x - p0x;\n\t\tconst d0y = p1y - p0y;\n\t\tconst d1x = x - p0x;\n\t\tconst d1y = y - p0y;\n\t\tconst a = d0x * d0x + d0y * d0y;\n\t\tconst b = d0x * d1x + d0y * d1y;\n\t\tconst c = d1x * d1x + d1y * d1y;\n\t\tif( 0.0001 < a ) {\n\t\t\tconst t0 = Math.max( 0, Math.min( 1, b / a ) );\n\t\t\tconst d = a * t0 * t0 - 2 * b * t0 + c;\n\t\t\tif( d < squaredDistance ) {\n\t\t\t\treturn t0;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapeBarPoints } from \"./e-shape-bar-points\";\nimport { EShapeBarPosition } from \"./e-shape-bar-position\";\nimport { EShapeLineBase } from \"./e-shape-line-base\";\n\nexport class EShapeBar extends EShapeLineBase {\n\tpoints: EShapeBarPoints;\n\n\tconstructor( position: EShapeBarPosition, size: number, width: number, style: EShapePointsStyle ) {\n\t\tsuper( EShapeType.BAR );\n\t\tthis.fill.enable = false;\n\t\tthis.stroke.set( true, undefined, undefined, width );\n\t\tthis.points = new EShapeBarPoints( this, position, size, style );\n\t}\n\n\tclone(): EShapeBar {\n\t\tconst points = this.points;\n\t\treturn new EShapeBar( points.position, points.size, this.stroke.width, points.style ).copy( this );\n\t}\n\n\tcontainsAbsBBox( x: number, y: number, ax: number, ay: number ): boolean {\n\t\tconst size = Math.max( 0, this.points.size );\n\t\treturn super.containsAbsBBox( x, y, ax + size, ay + size );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture, TextureUvs, utils } from \"pixi.js\";\nimport { EShape } from \"./e-shape\";\nimport { EShapeBuffer } from \"./e-shape-buffer\";\nimport { EShapeBufferUnitBuilder } from \"./e-shape-buffer-unit-builder\";\nimport { EShapeCorner } from \"./e-shape-corner\";\nimport { EShapeDefaults } from \"./e-shape-defaults\";\n\nconst FMIN: number = 0.00001;\n\nexport interface EShapeUploaded {\n\tupdate( shape: EShape ): void;\n\tisCompatible( shape: EShape ): boolean;\n\tgetBuffer(): EShapeBuffer;\n\tgetVertexOffset(): number;\n\tgetVertexCount(): number;\n\tgetIndexOffset(): number;\n\tgetIndexCount(): number;\n\tbuildUnit( builder: EShapeBufferUnitBuilder ): void;\n}\n\nexport abstract class EShapeUploadedBase implements EShapeUploaded {\n\tprotected buffer: EShapeBuffer;\n\n\tprotected transformLocalId: number;\n\n\tprotected vertexOffset: number;\n\tprotected vertexCount: number;\n\tprotected indexOffset: number;\n\tprotected indexCount: number;\n\n\tprotected colorFill: number;\n\tprotected alphaFill: number;\n\tprotected colorStroke: number;\n\tprotected alphaStroke: number;\n\n\tprotected sizeX: number;\n\tprotected sizeY: number;\n\tprotected worldSizeXHalf: number;\n\tprotected worldSizeYHalf: number;\n\tprotected worldSizeZHalf: number;\n\tprotected worldSizeWHalf: number;\n\tprotected worldSizeR: number;\n\tprotected strokeWidth: number;\n\tprotected strokeAlign: number;\n\tprotected strokeSide: number;\n\tprotected radius: number;\n\tprotected corner: EShapeCorner;\n\n\tprotected texture: Texture | null;\n\tprotected textureTransformId: number;\n\n\tconstructor( buffer: EShapeBuffer, voffset: number, ioffset: number, vcount: number, icount: number ) {\n\t\tthis.buffer = buffer;\n\n\t\tthis.transformLocalId = -1;\n\n\t\tthis.vertexOffset = voffset;\n\t\tthis.vertexCount = vcount;\n\t\tthis.indexOffset = ioffset;\n\t\tthis.indexCount = icount;\n\n\t\tthis.colorFill = NaN;\n\t\tthis.alphaFill = -1;\n\t\tthis.colorStroke = NaN;\n\t\tthis.alphaStroke = -1;\n\n\t\tthis.sizeX = NaN;\n\t\tthis.sizeY = NaN;\n\t\tthis.worldSizeXHalf = NaN;\n\t\tthis.worldSizeYHalf = NaN;\n\t\tthis.worldSizeZHalf = NaN;\n\t\tthis.worldSizeWHalf = NaN;\n\t\tthis.worldSizeR = NaN;\n\t\tthis.strokeWidth = NaN;\n\t\tthis.strokeAlign = NaN;\n\t\tthis.strokeSide = NaN;\n\t\tthis.radius = NaN;\n\t\tthis.corner = NaN;\n\n\t\tthis.texture = null;\n\t\tthis.textureTransformId = NaN;\n\t}\n\n\tinit( shape: EShape ): this {\n\t\tshape.uploaded = this;\n\t\treturn this;\n\t}\n\n\tabstract update( shape: EShape ): void;\n\n\tisCompatible( shape: EShape ): boolean {\n\t\treturn true;\n\t}\n\n\tgetBuffer(): EShapeBuffer {\n\t\treturn this.buffer;\n\t}\n\n\tgetVertexOffset(): number {\n\t\treturn this.vertexOffset;\n\t}\n\n\tgetVertexCount(): number {\n\t\treturn this.vertexCount;\n\t}\n\n\tgetIndexOffset(): number {\n\t\treturn this.indexOffset;\n\t}\n\n\tgetIndexCount(): number {\n\t\treturn this.indexCount;\n\t}\n\n\tprotected toTransformLocalId( shape: EShape ) {\n\t\tshape.updateTransform();\n\t\treturn shape.transform.getLocalId();\n\t}\n\n\tprotected toTexture( shape: EShape ) {\n\t\treturn shape.texture || Texture.WHITE;\n\t}\n\n\tprotected toTextureTransformId( texture: Texture ): number {\n\t\tconst textureAny = texture as any;\n\t\tif( textureAny._uvs == null ) {\n\t\t\ttexture.updateUvs();\n\t\t}\n\t\treturn textureAny._updateID;\n\t}\n\n\tprotected toTextureUvs( texture: Texture ): TextureUvs {\n\t\treturn (texture as any)._uvs;\n\t}\n\n\tprotected fillColor( color: number, alpha: number, voffset: number, count: number, colors: Float32Array ) {\n\t\tconst rgba = utils.premultiplyTintToRgba( color, alpha, this.buffer.workColor );\n\t\tconst r = rgba[ 0 ];\n\t\tconst g = rgba[ 1 ];\n\t\tconst b = rgba[ 2 ];\n\t\tconst a = rgba[ 3 ];\n\n\t\tfor( let i = voffset * 4, imax = i + count * 4; i < imax; i += 4 ) {\n\t\t\tcolors[ i + 0 ] = r;\n\t\t\tcolors[ i + 1 ] = g;\n\t\t\tcolors[ i + 2 ] = b;\n\t\t\tcolors[ i + 3 ] = a;\n\t\t}\n\t}\n\n\tprotected updateColorFill( buffer: EShapeBuffer, shape: EShape, vertexCount: number ) {\n\t\tconst fill = shape.fill;\n\t\tconst isEnabled = shape.visible && fill.enable;\n\t\tconst color = fill.color;\n\t\tconst alpha = (isEnabled ? fill.alpha : 0);\n\t\tif( color !== this.colorFill || alpha !== this.alphaFill ) {\n\t\t\tthis.colorFill = color;\n\t\t\tthis.alphaFill = alpha;\n\t\t\tbuffer.colorFillBuffer.update();\n\n\t\t\tthis.fillColor(\n\t\t\t\tcolor, alpha,\n\t\t\t\tthis.vertexOffset,\n\t\t\t\tvertexCount,\n\t\t\t\tbuffer.colorFills\n\t\t\t);\n\t\t}\n\t}\n\n\tprotected updateColorStroke( buffer: EShapeBuffer, shape: EShape, vertexCount: number ) {\n\t\tconst stroke = shape.stroke;\n\t\tconst isEnabled = shape.visible && stroke.enable && 0 < stroke.width;\n\t\tconst color = stroke.color;\n\t\tconst alpha = (isEnabled ? stroke.alpha : 0);\n\t\tif( color !== this.colorStroke || alpha !== this.alphaStroke ) {\n\t\t\tthis.colorStroke = color;\n\t\t\tthis.alphaStroke = alpha;\n\t\t\tbuffer.colorStrokeBuffer.update();\n\n\t\t\tthis.fillColor(\n\t\t\t\tcolor, alpha,\n\t\t\t\tthis.vertexOffset,\n\t\t\t\tvertexCount,\n\t\t\t\tbuffer.colorStrokes\n\t\t\t);\n\t\t}\n\t}\n\n\tprotected updateColorFillAndStroke( buffer: EShapeBuffer, shape: EShape, vertexCount: number ) {\n\t\tthis.updateColorFill( buffer, shape, vertexCount );\n\t\tthis.updateColorStroke( buffer, shape, vertexCount );\n\t}\n\n\tprotected calcStep( size: number, strokeWidth: number, result: Float32Array ): Float32Array {\n\t\tconst antialiasWeight = EShapeDefaults.ANTIALIAS_WEIGHT;\n\t\tif( FMIN < strokeWidth ) {\n\t\t\tconst dpc0 = size - strokeWidth;\n\t\t\tif( FMIN < dpc0 ) {\n\t\t\t\tconst pc0 = antialiasWeight / dpc0;\n\t\t\t\tconst pc1 = antialiasWeight / Math.max( FMIN, size );\n\t\t\t\tconst swc = 1 / Math.max( FMIN, 1 - strokeWidth / size );\n\t\t\t\tresult[ 0 ] = swc;\n\t\t\t\tresult[ 1 ] = pc0;\n\t\t\t\tresult[ 2 ] = pc1;\n\t\t\t} else {\n\t\t\t\tconst pc0 = antialiasWeight / FMIN;\n\t\t\t\tconst pc1 = antialiasWeight / Math.max( FMIN, size );\n\t\t\t\tconst swc = 1 / FMIN;\n\t\t\t\tresult[ 0 ] = swc;\n\t\t\t\tresult[ 1 ] = pc0;\n\t\t\t\tresult[ 2 ] = pc1;\n\t\t\t}\n\t\t} else {\n\t\t\t// Assumes strokeWidth === 0\n\t\t\tconst pc = antialiasWeight / Math.max( FMIN, size );\n\t\t\tresult[ 0 ] = 1;\n\t\t\tresult[ 1 ] = pc;\n\t\t\tresult[ 2 ] = pc;\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected updateStep(\n\t\tbuffer: EShapeBuffer,\n\t\tvoffset: number, vcount: number,\n\t\tswx: number, swy: number, px0: number, py0: number, px1: number, py1: number\n\t) {\n\t\tconst steps = buffer.steps;\n\t\tconst antialiases = buffer.antialiases;\n\t\tconst clippings = buffer.clippings;\n\t\tconst istart = voffset * 2;\n\t\tconst imax = istart + vcount * 2;\n\t\tconst jstart = voffset * 3;\n\t\tconst kstart = voffset * 4;\n\t\tfor( let i = istart, j = jstart, k = kstart; i < imax; i += 2, j += 3, k += 4 ) {\n\t\t\tconst cx = clippings[ j + 0 ];\n\t\t\tconst cy = clippings[ j + 1 ];\n\t\t\tsteps[ i + 0 ] = swx * cx;\n\t\t\tsteps[ i + 1 ] = swy * cy;\n\t\t\tantialiases[ k + 0 ] = px0;\n\t\t\tantialiases[ k + 1 ] = py0;\n\t\t\tantialiases[ k + 2 ] = px1;\n\t\t\tantialiases[ k + 3 ] = py1;\n\t\t}\n\t}\n\n\tprotected updateStepIf(\n\t\tbuffer: EShapeBuffer,\n\t\tvoffset: number, vcount: number,\n\t\tswc: number, pc0: number, pc1: number,\n\t\tswx: number, swy: number, px0: number, py0: number, px1: number, py1: number\n\t) {\n\t\tconst steps = buffer.steps;\n\t\tconst antialiases = buffer.antialiases;\n\t\tconst clippings = buffer.clippings;\n\t\tconst istart = voffset * 2;\n\t\tconst imax = istart + vcount * 2;\n\t\tconst jstart = voffset * 3;\n\t\tconst kstart = voffset * 4;\n\t\tfor( let i = istart, j = jstart, k = kstart; i < imax; i += 2, j += 3, k += 4 ) {\n\t\t\tconst cx = clippings[ j + 0 ];\n\t\t\tconst cy = clippings[ j + 1 ];\n\t\t\tconst cz = clippings[ j + 2 ];\n\t\t\tif( 0.5 < cz ) {\n\t\t\t\tsteps[ i + 0 ] = swc * cx;\n\t\t\t\tsteps[ i + 1 ] = swc * cy;\n\t\t\t\tantialiases[ k + 0 ] = pc0;\n\t\t\t\tantialiases[ k + 1 ] = pc0;\n\t\t\t\tantialiases[ k + 2 ] = pc1;\n\t\t\t\tantialiases[ k + 3 ] = pc1;\n\t\t\t} else {\n\t\t\t\tsteps[ i + 0 ] = swx * cx;\n\t\t\t\tsteps[ i + 1 ] = swy * cy;\n\t\t\t\tantialiases[ k + 0 ] = px0;\n\t\t\t\tantialiases[ k + 1 ] = py0;\n\t\t\t\tantialiases[ k + 2 ] = px1;\n\t\t\t\tantialiases[ k + 3 ] = py1;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected calcLength( p0x: number, p0y: number, p1x: number, p1y: number ) {\n\t\tconst dx01 = p1x - p0x;\n\t\tconst dy01 = p1y - p0y;\n\t\treturn Math.sqrt( dx01 * dx01 + dy01 * dy01 );\n\t}\n\n\tbuildUnit( builder: EShapeBufferUnitBuilder ) {\n\t\tconst texture = this.texture || Texture.WHITE;\n\t\tconst baseTexture = texture.baseTexture;\n\t\tif( baseTexture !== builder.baseTexture ) {\n\t\t\tbuilder.baseTexture = baseTexture;\n\t\t\tconst indexOffset = this.indexOffset;\n\t\t\tbuilder.push( texture, indexOffset );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBufferCount } from \"../e-shape-buffer-count\";\n\nexport class EShapeTextUploadeds {\n\tstatic getTextCount( shape: EShape, result: EShapeBufferCount ): EShapeBufferCount {\n\t\tconst length = shape.text.value.length;\n\t\tconst count = Math.ceil( length / 12 ) * 12;\n\t\tresult.vertexCount = count << 2;\n\t\tresult.indexCount = count << 1;\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Point, Texture } from \"pixi.js\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeBufferUnitBuilder } from \"../e-shape-buffer-unit-builder\";\nimport { EShapeTextAtlas, EShapeTextAtlasCharacter, EShapeTextStyle, EShapeTextWeight } from \"../e-shape-text\";\nimport { EShapeTextAlignHorizontal } from \"../e-shape-text-align-horizontal\";\nimport { EShapeTextAlignVertical } from \"../e-shape-text-align-vertical\";\nimport { EShapeTextDirection } from \"../e-shape-text-direction\";\nimport { EShapeUploadedBase } from \"../e-shape-uploaded\";\nimport { EShapeTextUploadeds } from \"./e-shape-text-uploadeds\";\n\nconst FMIN: number = 0.00001;\n\nexport abstract class EShapeTextUploaded extends EShapeUploadedBase {\n\tprotected textTexture: Texture | null;\n\tprotected textTextureTransformId: number;\n\tprotected textValue: string;\n\tprotected textFamily: string;\n\tprotected textSize: number;\n\tprotected textColor: number;\n\tprotected textAlpha: number;\n\tprotected textWeight: number;\n\tprotected textStyle: number;\n\tprotected textAlignHorizontal: number;\n\tprotected textAlignVertical: number;\n\tprotected textOffsetHorizontal: number;\n\tprotected textOffsetVertical: number;\n\tprotected textOutlineWidth: number;\n\tprotected textOutlineColor: number;\n\tprotected textOutlineAlpha: number;\n\tprotected textSpacingHorizontal: number;\n\tprotected textSpacingVertical: number;\n\tprotected textDirection: number;\n\tprotected textPaddingHorizontal: number;\n\tprotected textPaddingVertical: number;\n\tprotected textClipping: boolean;\n\tprotected textVertexCount: number;\n\tprotected textIndexCount: number;\n\n\tconstructor(\n\t\tbuffer: EShapeBuffer,\n\t\tvoffset: number, ioffset: number,\n\t\ttvcount: number, ticount: number,\n\t\tvcount: number, icount: number\n\t) {\n\t\tsuper( buffer, voffset, ioffset, vcount, icount );\n\n\t\tthis.textSize = NaN;\n\t\tthis.textFamily = \"auto\";\n\t\tthis.textValue = \"\";\n\t\tthis.textTexture = null;\n\t\tthis.textTextureTransformId = NaN;\n\t\tthis.textColor = NaN;\n\t\tthis.textAlpha = NaN;\n\t\tthis.textWeight = NaN;\n\t\tthis.textStyle = NaN;\n\t\tthis.textAlignHorizontal = NaN;\n\t\tthis.textAlignVertical = NaN;\n\t\tthis.textOffsetHorizontal = NaN;\n\t\tthis.textOffsetVertical = NaN;\n\t\tthis.textOutlineWidth = NaN;\n\t\tthis.textOutlineColor = NaN;\n\t\tthis.textOutlineAlpha = NaN;\n\t\tthis.textSpacingHorizontal = NaN;\n\t\tthis.textSpacingVertical = NaN;\n\t\tthis.textDirection = NaN;\n\t\tthis.textPaddingHorizontal = NaN;\n\t\tthis.textPaddingVertical = NaN;\n\t\tthis.textClipping = false;\n\t\tthis.textVertexCount = tvcount;\n\t\tthis.textIndexCount = ticount;\n\t}\n\n\tisCompatible( shape: EShape ): boolean {\n\t\tif( super.isCompatible( shape ) ) {\n\t\t\tconst textCount = EShapeTextUploadeds.getTextCount( shape, this.buffer.workCount );\n\t\t\treturn ( textCount.vertexCount === this.textVertexCount );\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected updateColor( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst vertexCount = this.vertexCount - this.textVertexCount;\n\t\tthis.updateColorFillAndStroke( buffer, shape, vertexCount );\n\t}\n\n\tprotected getTextBBox(\n\t\thalign: EShapeTextAlignHorizontal,\n\t\tvalign: EShapeTextAlignVertical,\n\t\thoffset: number,\n\t\tvoffset: number,\n\t\thpadding: number,\n\t\tvpadding: number,\n\t\twidth: number, height: number,\n\t\tx0: number, y0: number,\n\t\tx1: number, y1: number,\n\t\tx2: number, y2: number,\n\t\tx3: number, y3: number,\n\t\thnx: number, hny: number,\n\t\tvnx: number, vny: number,\n\t\tresult: Point\n\t): void {\n\t\tswitch( halign ) {\n\t\tcase EShapeTextAlignHorizontal.LEFT:\n\t\t\tswitch( valign ) {\n\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\tresult.x = x0\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = y0\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\tresult.x = 0.5 * ( x0 + x3 )\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset - 0.5 * height );\n\t\t\t\tresult.y = 0.5 * ( y0 + y3 )\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset - 0.5 * height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\tresult.x = x3\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = y3\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_TOP:\n\t\t\t\tresult.x = x0\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = y0\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_BOTTOM:\n\t\t\t\tresult.x = x3\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = y3\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase EShapeTextAlignHorizontal.CENTER:\n\t\t\tswitch( valign ) {\n\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\tresult.x = 0.5 * ( x0 + x1 )\n\t\t\t\t\t+ hnx * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = 0.5 * ( y0 + y1 )\n\t\t\t\t\t+ hny * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\tresult.x = 0.5 * ( x0 + x2 )\n\t\t\t\t\t+ hnx * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vnx * ( voffset - 0.5 * height );\n\t\t\t\tresult.y = 0.5 * ( y0 + y2 )\n\t\t\t\t\t+ hny * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vny * ( voffset - 0.5 * height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\tresult.x = 0.5 * ( x3 + x2 )\n\t\t\t\t\t+ hnx * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = 0.5 * ( y3 + y2 )\n\t\t\t\t\t+ hny * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_TOP:\n\t\t\t\tresult.x = 0.5 * ( x0 + x1 )\n\t\t\t\t\t+ hnx * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = 0.5 * ( y0 + y1 )\n\t\t\t\t\t+ hny * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_BOTTOM:\n\t\t\t\tresult.x = 0.5 * ( x3 + x2 )\n\t\t\t\t\t+ hnx * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = 0.5 * ( y3 + y2 )\n\t\t\t\t\t+ hny * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase EShapeTextAlignHorizontal.RIGHT:\n\t\t\tswitch( valign ) {\n\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\tresult.x = x1\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = y1\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\tresult.x = 0.5 * ( x1 + x2 )\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset - 0.5 * height );\n\t\t\t\tresult.y = 0.5 * ( y1 + y2 )\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset - 0.5 * height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\tresult.x = x2\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = y2\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_TOP:\n\t\t\t\tresult.x = x1\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = y1\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_BOTTOM:\n\t\t\t\tresult.x = x2\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = y2\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase EShapeTextAlignHorizontal.OUTSIDE_LEFT:\n\t\t\tswitch( valign ) {\n\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\tresult.x = x0\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = y0\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\tresult.x = 0.5 * ( x0 + x3 )\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset - 0.5 * height );\n\t\t\t\tresult.y = 0.5 * ( y0 + y3 )\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset - 0.5 * height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\tresult.x = x3\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = y3\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_TOP:\n\t\t\t\tresult.x = x0\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = y0\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_BOTTOM:\n\t\t\t\tresult.x = x3\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = y3\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase EShapeTextAlignHorizontal.OUTSIDE_RIGHT:\n\t\t\tswitch( valign ) {\n\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\tresult.x = x1\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = y1\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\tresult.x = 0.5 * ( x1 + x2 )\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset - 0.5 * height );\n\t\t\t\tresult.y = 0.5 * ( y1 + y2 )\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset - 0.5 * height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\tresult.x = x2\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = y2\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_TOP:\n\t\t\t\tresult.x = x1\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = y1\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_BOTTOM:\n\t\t\t\tresult.x = x2\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = y2\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tprotected normalize( dx: number, dy: number, defx: number, defy: number, result: Point ): number {\n\t\tconst d = dx * dx + dy * dy;\n\t\tif( FMIN < d ) {\n\t\t\tconst l = Math.sqrt( d );\n\t\t\tconst li = 1 / l;\n\t\t\tresult.set( dx * li, dy * li );\n\t\t\treturn l;\n\t\t} else {\n\t\t\tresult.set( defx, defy );\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tprotected rotateAlignHorizontalRight( align: EShapeTextAlignHorizontal ): EShapeTextAlignVertical {\n\t\tswitch( align ) {\n\t\tcase EShapeTextAlignHorizontal.LEFT:\n\t\t\treturn EShapeTextAlignVertical.BOTTOM;\n\t\tcase EShapeTextAlignHorizontal.CENTER:\n\t\t\treturn EShapeTextAlignVertical.MIDDLE;\n\t\tcase EShapeTextAlignHorizontal.RIGHT:\n\t\t\treturn EShapeTextAlignVertical.TOP;\n\t\tcase EShapeTextAlignHorizontal.OUTSIDE_LEFT:\n\t\t\treturn EShapeTextAlignVertical.OUTSIDE_BOTTOM;\n\t\tcase EShapeTextAlignHorizontal.OUTSIDE_RIGHT:\n\t\t\treturn EShapeTextAlignVertical.OUTSIDE_TOP;\n\t\t}\n\t}\n\n\tprotected rotateAlignVerticalRight( align: EShapeTextAlignVertical ): EShapeTextAlignHorizontal {\n\t\tswitch( align ) {\n\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\treturn EShapeTextAlignHorizontal.LEFT;\n\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\treturn EShapeTextAlignHorizontal.CENTER;\n\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\treturn EShapeTextAlignHorizontal.RIGHT;\n\t\tcase EShapeTextAlignVertical.OUTSIDE_TOP:\n\t\t\treturn EShapeTextAlignHorizontal.OUTSIDE_LEFT;\n\t\tcase EShapeTextAlignVertical.OUTSIDE_BOTTOM:\n\t\t\treturn EShapeTextAlignHorizontal.OUTSIDE_RIGHT;\n\t\t}\n\t}\n\n\tprotected rotateAlignHorizontalLeft( align: EShapeTextAlignHorizontal ): EShapeTextAlignVertical {\n\t\tswitch( align ) {\n\t\tcase EShapeTextAlignHorizontal.LEFT:\n\t\t\treturn EShapeTextAlignVertical.TOP;\n\t\tcase EShapeTextAlignHorizontal.CENTER:\n\t\t\treturn EShapeTextAlignVertical.MIDDLE;\n\t\tcase EShapeTextAlignHorizontal.RIGHT:\n\t\t\treturn EShapeTextAlignVertical.BOTTOM;\n\t\tcase EShapeTextAlignHorizontal.OUTSIDE_LEFT:\n\t\t\treturn EShapeTextAlignVertical.OUTSIDE_TOP;\n\t\tcase EShapeTextAlignHorizontal.OUTSIDE_RIGHT:\n\t\t\treturn EShapeTextAlignVertical.OUTSIDE_BOTTOM;\n\t\t}\n\t}\n\n\tprotected rotateAlignVerticalLeft( align: EShapeTextAlignVertical ): EShapeTextAlignHorizontal {\n\t\tswitch( align ) {\n\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\treturn EShapeTextAlignHorizontal.RIGHT;\n\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\treturn EShapeTextAlignHorizontal.CENTER;\n\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\treturn EShapeTextAlignHorizontal.LEFT;\n\t\tcase EShapeTextAlignVertical.OUTSIDE_TOP:\n\t\t\treturn EShapeTextAlignHorizontal.OUTSIDE_RIGHT;\n\t\tcase EShapeTextAlignVertical.OUTSIDE_BOTTOM:\n\t\t\treturn EShapeTextAlignHorizontal.OUTSIDE_LEFT;\n\t\t}\n\t}\n\n\tprotected updateTextVertex( buffer: EShapeBuffer, shape: EShape, textAtlas: EShapeTextAtlas ) {\n\t\tconst text = shape.text;\n\t\tconst textSize = text.size;\n\t\tconst textFamily = text.family;\n\t\tconst textValue = text.value;\n\t\tconst textStyle = text.style;\n\t\tconst textAlignHorizontal = text.align.horizontal;\n\t\tconst textAlignVertical = text.align.vertical;\n\t\tconst textOffsetHorizontal = text.offset.horizontal;\n\t\tconst textOffsetVertical = text.offset.vertical;\n\t\tconst textSpacingHorizontal = text.spacing.horizontal;\n\t\tconst textSpacingVertical = text.spacing.vertical;\n\t\tconst textDirection = text.direction;\n\t\tconst textPaddingHorizontal = text.padding.horizontal;\n\t\tconst textPaddingVertical = text.padding.vertical;\n\t\tconst textClipping = text.clipping;\n\t\tconst textTexture = text.texture || Texture.WHITE;\n\t\tconst textTextureTransformId = this.toTextureTransformId( textTexture );\n\n\t\tconst isCharChanged = (textValue !== this.textValue || textFamily !== this.textFamily);\n\t\tconst isCharSizeChanged = (textSize !== this.textSize);\n\t\tconst isCharStyleChanged = (textStyle !== this.textStyle);\n\t\tconst isCharAlignChanged = (textAlignHorizontal !== this.textAlignHorizontal ||\n\t\t\ttextAlignVertical !== this.textAlignVertical);\n\t\tconst isCharOffsetChanged = (textOffsetHorizontal !== this.textOffsetHorizontal ||\n\t\t\ttextOffsetVertical !== this.textOffsetVertical);\n\t\tconst isCharSpacingChanged = (textSpacingHorizontal !== this.textSpacingHorizontal ||\n\t\t\ttextSpacingVertical !== this.textSpacingVertical ||\n\t\t\ttextPaddingHorizontal !== this.textPaddingHorizontal ||\n\t\t\ttextPaddingVertical !== this.textPaddingVertical);\n\t\tconst isCharDirectionChanged = (textDirection !== this.textDirection);\n\t\tconst isClippingChanged = ( this.textClipping !== textClipping );\n\t\tconst isTextureChanged = ( textTexture !== this.textTexture ||\n\t\t\ttextTextureTransformId !== this.textTextureTransformId );\n\n\t\tif( isCharChanged || isCharSizeChanged || isCharStyleChanged ||\n\t\t\tisCharAlignChanged || isCharOffsetChanged || isCharSpacingChanged ||\n\t\t\tisCharDirectionChanged || isClippingChanged || isTextureChanged ) {\n\t\t\tthis.textSize = textSize;\n\t\t\tthis.textFamily = textFamily;\n\t\t\tthis.textValue = textValue;\n\t\t\tthis.textStyle = textStyle;\n\t\t\tthis.textAlignHorizontal = textAlignHorizontal;\n\t\t\tthis.textAlignVertical = textAlignVertical;\n\t\t\tthis.textOffsetHorizontal = textOffsetHorizontal;\n\t\t\tthis.textOffsetVertical = textOffsetVertical;\n\t\t\tthis.textSpacingHorizontal = textSpacingHorizontal;\n\t\t\tthis.textSpacingVertical = textSpacingVertical;\n\t\t\tthis.textDirection = textDirection;\n\t\t\tthis.textPaddingHorizontal = textPaddingHorizontal;\n\t\t\tthis.textPaddingVertical = textPaddingVertical;\n\t\t\tthis.textClipping = textClipping;\n\t\t\tthis.textTexture = textTexture;\n\t\t\tthis.textTextureTransformId = textTextureTransformId;\n\n\t\t\tif( isCharSizeChanged ) {\n\t\t\t\t// Invalidate the text weight to update the text steps.\n\t\t\t\tthis.textWeight = NaN;\n\t\t\t}\n\n\t\t\t// Calculate the transformed positions\n\t\t\t//\n\t\t\t//  0               1\n\t\t\t// |---------------|\n\t\t\t// |               |\n\t\t\t// |3              |2\n\t\t\t// |---------------|\n\t\t\t//\n\t\t\tconst size = shape.size;\n\t\t\tconst sx = size.x * 0.5;\n\t\t\tconst sy = size.y * 0.5;\n\t\t\tshape.updateTransform();\n\t\t\tconst internalTransform = shape.transform.internalTransform;\n\t\t\tconst work = buffer.work;\n\t\t\twork.set( -sx, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x0 = work.x;\n\t\t\tconst y0 = work.y;\n\t\t\twork.set( +sx, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x1 = work.x;\n\t\t\tconst y1 = work.y;\n\t\t\twork.set( +sx, +sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x2 = work.x;\n\t\t\tconst y2 = work.y;\n\t\t\tconst x3 = x0 + (x2 - x1);\n\t\t\tconst y3 = y0 + (y2 - y1);\n\n\t\t\t// Horizontal normal\n\t\t\tconst hl = this.calcLength( x0, y0, x1, y1 );\n\t\t\tthis.normalize( internalTransform.a, internalTransform.b, 1, 0, work );\n\t\t\tlet hnx = work.x;\n\t\t\tlet hny = work.y;\n\n\t\t\t// Vertical normal\n\t\t\tconst vl = this.calcLength( x0, y0, x3, y3 );\n\t\t\tthis.normalize( internalTransform.c, internalTransform.d, 0, 1, work );\n\t\t\tlet vnx = work.x;\n\t\t\tlet vny = work.y;\n\n\t\t\t// Calculate the width / height\n\t\t\tlet width = 0;\n\t\t\tlet height = 0;\n\t\t\tlet heightChar = 0;\n\t\t\tconst lineHeight = Math.max( 0, textSize + textSpacingVertical );\n\t\t\tlet lineWidth = 0;\n\t\t\tconst textAtlasCharacters = textAtlas.characters;\n\t\t\tfor( let i = 0, imax = textValue.length; i < imax; ++i ) {\n\t\t\t\tconst character = textValue[ i ];\n\t\t\t\tif( character !== \"\\n\" ) {\n\t\t\t\t\tconst data = textAtlasCharacters[ character ];\n\t\t\t\t\tif( data != null ) {\n\t\t\t\t\t\tlineWidth += this.toAdvance( i, imax, textValue, data.advance, textSpacingHorizontal );\n\t\t\t\t\t\theightChar = data.height;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\twidth = Math.max( width, lineWidth );\n\t\t\t\t\tlineWidth = 0;\n\t\t\t\t\theight += lineHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst scale = textSize / textAtlas.font.size;\n\t\t\twidth = Math.max( width, lineWidth ) * scale;\n\t\t\theightChar *= scale;\n\t\t\theight += textSize;\n\n\t\t\t//\n\t\t\tlet tx0 = 0;\n\t\t\tlet ty0 = 0;\n\t\t\tlet lineWidthMaximum = NaN;\n\t\t\tswitch( textDirection ) {\n\t\t\tcase EShapeTextDirection.LEFT_TO_RIGHT:\n\t\t\t\tthis.getTextBBox(\n\t\t\t\t\ttextAlignHorizontal,\n\t\t\t\t\ttextAlignVertical,\n\t\t\t\t\ttextOffsetHorizontal,\n\t\t\t\t\ttextOffsetVertical,\n\t\t\t\t\ttextPaddingHorizontal,\n\t\t\t\t\ttextPaddingVertical,\n\t\t\t\t\twidth, height,\n\t\t\t\t\tx0, y0,\n\t\t\t\t\tx1, y1,\n\t\t\t\t\tx2, y2,\n\t\t\t\t\tx3, y3,\n\t\t\t\t\thnx, hny,\n\t\t\t\t\tvnx, vny,\n\t\t\t\t\twork\n\t\t\t\t);\n\t\t\t\ttx0 = work.x;\n\t\t\t\tty0 = work.y;\n\t\t\t\tif( textClipping ) {\n\t\t\t\t\tswitch( textAlignHorizontal ) {\n\t\t\t\t\tcase EShapeTextAlignHorizontal.LEFT:\n\t\t\t\t\tcase EShapeTextAlignHorizontal.CENTER:\n\t\t\t\t\tcase EShapeTextAlignHorizontal.RIGHT:\n\t\t\t\t\t\tswitch( textAlignVertical ) {\n\t\t\t\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\t\t\t\tlineWidthMaximum = hl - textPaddingHorizontal * 2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextDirection.TOP_TO_BOTTOM:\n\t\t\t\t// Swap normals\n\t\t\t\twork.set( vnx, vny );\n\t\t\t\tvnx = -hnx;\n\t\t\t\tvny = -hny;\n\t\t\t\thnx = work.x;\n\t\t\t\thny = work.y;\n\n\t\t\t\t// Get text bbox\n\t\t\t\tthis.getTextBBox(\n\t\t\t\t\tthis.rotateAlignVerticalRight( textAlignVertical ),\n\t\t\t\t\tthis.rotateAlignHorizontalRight( textAlignHorizontal ),\n\t\t\t\t\ttextOffsetVertical,\n\t\t\t\t\ttextOffsetHorizontal,\n\t\t\t\t\ttextPaddingVertical,\n\t\t\t\t\ttextPaddingHorizontal,\n\t\t\t\t\twidth, height,\n\t\t\t\t\tx1, y1,\n\t\t\t\t\tx2, y2,\n\t\t\t\t\tx3, y3,\n\t\t\t\t\tx0, y0,\n\t\t\t\t\thnx, hny,\n\t\t\t\t\tvnx, vny,\n\t\t\t\t\twork\n\t\t\t\t);\n\t\t\t\ttx0 = work.x;\n\t\t\t\tty0 = work.y;\n\t\t\t\tif( textClipping ) {\n\t\t\t\t\tswitch( textAlignVertical ) {\n\t\t\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\t\t\tswitch( textAlignHorizontal ) {\n\t\t\t\t\t\tcase EShapeTextAlignHorizontal.LEFT:\n\t\t\t\t\t\tcase EShapeTextAlignHorizontal.CENTER:\n\t\t\t\t\t\tcase EShapeTextAlignHorizontal.RIGHT:\n\t\t\t\t\t\t\tlineWidthMaximum = vl - textPaddingVertical * 2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextDirection.BOTTOM_TO_TOP:\n\t\t\t\t// Swap normals\n\t\t\t\twork.set( vnx, vny );\n\t\t\t\tvnx = hnx;\n\t\t\t\tvny = hny;\n\t\t\t\thnx = -work.x;\n\t\t\t\thny = -work.y;\n\n\t\t\t\t// Get text bbox\n\t\t\t\tthis.getTextBBox(\n\t\t\t\t\tthis.rotateAlignVerticalLeft( textAlignVertical ),\n\t\t\t\t\tthis.rotateAlignHorizontalLeft( textAlignHorizontal ),\n\t\t\t\t\ttextOffsetVertical,\n\t\t\t\t\ttextOffsetHorizontal,\n\t\t\t\t\ttextPaddingVertical,\n\t\t\t\t\ttextPaddingHorizontal,\n\t\t\t\t\twidth, height,\n\t\t\t\t\tx3, y3,\n\t\t\t\t\tx0, y0,\n\t\t\t\t\tx1, y1,\n\t\t\t\t\tx2, y2,\n\t\t\t\t\thnx, hny,\n\t\t\t\t\tvnx, vny,\n\t\t\t\t\twork\n\t\t\t\t);\n\t\t\t\ttx0 = work.x;\n\t\t\t\tty0 = work.y;\n\t\t\t\tif( textClipping ) {\n\t\t\t\t\tswitch( textAlignVertical ) {\n\t\t\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\t\t\tswitch( textAlignHorizontal ) {\n\t\t\t\t\t\tcase EShapeTextAlignHorizontal.LEFT:\n\t\t\t\t\t\tcase EShapeTextAlignHorizontal.CENTER:\n\t\t\t\t\t\tcase EShapeTextAlignHorizontal.RIGHT:\n\t\t\t\t\t\t\tlineWidthMaximum = vl - textPaddingVertical * 2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t//\n\t\t\tconst textWorld = text.world = text.world || new Float32Array( 8 );\n\t\t\tif( lineWidthMaximum < width ) {\n\t\t\t\tconst dwidth = ( width - lineWidthMaximum ) * 0.5;\n\t\t\t\ttextWorld[ 0 ] = tx0 + hnx * dwidth;\n\t\t\t\ttextWorld[ 1 ] = ty0 + hny * dwidth;\n\t\t\t\ttextWorld[ 2 ] = hnx;\n\t\t\t\ttextWorld[ 3 ] = hny;\n\t\t\t\ttextWorld[ 4 ] = vnx;\n\t\t\t\ttextWorld[ 5 ] = vny;\n\t\t\t\ttextWorld[ 6 ] = lineWidthMaximum;\n\t\t\t\ttextWorld[ 7 ] = height;\n\t\t\t} else {\n\t\t\t\ttextWorld[ 0 ] = tx0;\n\t\t\t\ttextWorld[ 1 ] = ty0;\n\t\t\t\ttextWorld[ 2 ] = hnx;\n\t\t\t\ttextWorld[ 3 ] = hny;\n\t\t\t\ttextWorld[ 4 ] = vnx;\n\t\t\t\ttextWorld[ 5 ] = vny;\n\t\t\t\ttextWorld[ 6 ] = width;\n\t\t\t\ttextWorld[ 7 ] = height;\n\t\t\t}\n\n\t\t\t// Texture\n\t\t\tconst textureUvs = this.toTextureUvs( textTexture ) as any;\n\t\t\tconst uvx0 = textureUvs.x0;\n\t\t\tconst uvx1 = textureUvs.x1;\n\t\t\tconst uvx3 = textureUvs.x3;\n\t\t\tconst uvy0 = textureUvs.y0;\n\t\t\tconst uvy1 = textureUvs.y1;\n\t\t\tconst uvy3 = textureUvs.y3;\n\n\t\t\tconst duvx01 = ( uvx1 - uvx0 );\n\t\t\tconst duvy01 = ( uvy1 - uvy0 );\n\t\t\tconst duvx03 = ( uvx3 - uvx0 );\n\t\t\tconst duvy03 = ( uvy3 - uvy0 );\n\n\t\t\t// Vertices & UVs\n\t\t\tconst vcount = this.textVertexCount;\n\t\t\tconst voffset = this.vertexOffset + this.vertexCount - vcount;\n\t\t\tconst vertices = buffer.vertices;\n\t\t\tconst uvs = buffer.uvs;\n\t\t\tbuffer.vertexBuffer.update();\n\t\t\tbuffer.uvBuffer.update();\n\n\t\t\tconst lhx = lineHeight * vnx;\n\t\t\tconst lhy = lineHeight * vny;\n\n\t\t\tconst snx = scale * hnx;\n\t\t\tconst sny = scale * hny;\n\n\t\t\tconst offsetY = (heightChar - textSize) * 0.5;\n\t\t\tconst oyx = offsetY * vnx;\n\t\t\tconst oyy = offsetY * vny;\n\n\t\t\tconst offsetItalic = ( textStyle === EShapeTextStyle.NORMAL ? 0 : text.size * 0.25 );\n\t\t\tlet bx0 = tx0 - oyx + offsetItalic * snx;\n\t\t\tlet by0 = ty0 - oyy + offsetItalic * sny;\n\t\t\tlet bx3 = tx0 + oyx + textSize * vnx;\n\t\t\tlet by3 = ty0 + oyy + textSize * vny;\n\t\t\tlet cx0 = bx0;\n\t\t\tlet cy0 = by0;\n\t\t\tlet cx3 = bx3;\n\t\t\tlet cy3 = by3;\n\n\t\t\tlineWidth = 0;\n\t\t\tlet lineCount = 0;\n\t\t\tconst textValueLength = textValue.length;\n\t\t\tfor( let i = 0, iv = voffset * 2; i < textValueLength; i += 1, iv += 8 ) {\n\t\t\t\tconst character = textValue[ i ];\n\t\t\t\tif( character !== \"\\n\" ) {\n\t\t\t\t\tconst data = textAtlasCharacters[ character ];\n\t\t\t\t\tlineCount += 1;\n\t\t\t\t\tif( data != null ) {\n\t\t\t\t\t\tconst advance = this.toAdvance( i, textValueLength, textValue, data.advance, textSpacingHorizontal );\n\t\t\t\t\t\tlineWidth += advance * scale;\n\t\t\t\t\t\tif( lineWidthMaximum < lineWidth ) {\n\t\t\t\t\t\t\tconst dots = textAtlasCharacters[ \"...\" ];\n\t\t\t\t\t\t\tif( dots != null ) {\n\t\t\t\t\t\t\t\tthis.writeCharacter(\n\t\t\t\t\t\t\t\t\tvertices, uvs, iv, dots, textAtlas,\n\t\t\t\t\t\t\t\t\tsnx, sny,\n\t\t\t\t\t\t\t\t\tcx0, cy0, cx3, cy3,\n\t\t\t\t\t\t\t\t\tduvx01, duvy01, duvx03, duvy03,\n\t\t\t\t\t\t\t\t\tuvx0, uvy0\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tconst dotsAdvance = this.toAdvance( i, textValueLength, textValue, dots.advance, textSpacingHorizontal );\n\t\t\t\t\t\t\t\tconst ax = dotsAdvance * snx;\n\t\t\t\t\t\t\t\tconst ay = dotsAdvance * sny;\n\t\t\t\t\t\t\t\tlineWidth += (dotsAdvance - advance) * scale;\n\t\t\t\t\t\t\t\tcx0 = cx0 + ax;\n\t\t\t\t\t\t\t\tcy0 = cy0 + ay;\n\t\t\t\t\t\t\t\tcx3 = cx3 + ax;\n\t\t\t\t\t\t\t\tcy3 = cy3 + ay;\n\n\t\t\t\t\t\t\t\tfor( i += 1, iv += 8; i < textValueLength; i += 1, iv += 8 ) {\n\t\t\t\t\t\t\t\t\tif( textValue[ i ] !== \"\\n\" ) {\n\t\t\t\t\t\t\t\t\t\tthis.writeCharacterEmpty(\n\t\t\t\t\t\t\t\t\t\t\tvertices, uvs, iv,\n\t\t\t\t\t\t\t\t\t\t\tcx0, cy0, cx3, cy3,\n\t\t\t\t\t\t\t\t\t\t\tuvx0, uvy0, uvx3, uvy3\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tlineCount += 1;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\ti -= 1;\n\t\t\t\t\t\t\t\t\t\tiv -= 8;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.writeCharacterEmpty(\n\t\t\t\t\t\t\t\t\tvertices, uvs, iv,\n\t\t\t\t\t\t\t\t\tcx0, cy0, cx3, cy3,\n\t\t\t\t\t\t\t\t\tuvx0, uvy0, uvx3, uvy3\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.writeCharacter(\n\t\t\t\t\t\t\t\tvertices, uvs, iv, data, textAtlas,\n\t\t\t\t\t\t\t\tsnx, sny,\n\t\t\t\t\t\t\t\tcx0, cy0, cx3, cy3,\n\t\t\t\t\t\t\t\tduvx01, duvy01, duvx03, duvy03,\n\t\t\t\t\t\t\t\tuvx0, uvy0\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tconst ax = advance * snx;\n\t\t\t\t\t\t\tconst ay = advance * sny;\n\t\t\t\t\t\t\tcx0 = cx0 + ax;\n\t\t\t\t\t\t\tcy0 = cy0 + ay;\n\t\t\t\t\t\t\tcx3 = cx3 + ax;\n\t\t\t\t\t\t\tcy3 = cy3 + ay;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.writeCharacterEmpty(\n\t\t\t\t\t\t\tvertices, uvs, iv,\n\t\t\t\t\t\t\tcx0, cy0, cx3, cy3,\n\t\t\t\t\t\t\tuvx0, uvy0, uvx3, uvy3\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.writeCharacterEmpty(\n\t\t\t\t\t\tvertices, uvs, iv,\n\t\t\t\t\t\tcx0, cy0, cx3, cy3,\n\t\t\t\t\t\tuvx0, uvy0, uvx3, uvy3\n\t\t\t\t\t);\n\n\t\t\t\t\tbx0 += lhx;\n\t\t\t\t\tby0 += lhy;\n\t\t\t\t\tbx3 += lhx;\n\t\t\t\t\tby3 += lhy;\n\t\t\t\t\tcx0 = bx0;\n\t\t\t\t\tcy0 = by0;\n\t\t\t\t\tcx3 = bx3;\n\t\t\t\t\tcy3 = by3;\n\n\t\t\t\t\tthis.adjustTextAlignment(\n\t\t\t\t\t\tvertices,\n\t\t\t\t\t\thnx, hny,\n\t\t\t\t\t\tlineCount,\n\t\t\t\t\t\tiv,\n\t\t\t\t\t\twidth - lineWidth,\n\t\t\t\t\t\ttextDirection,\n\t\t\t\t\t\ttextAlignHorizontal,\n\t\t\t\t\t\ttextAlignVertical\n\t\t\t\t\t);\n\t\t\t\t\tlineWidth = 0;\n\t\t\t\t\tlineCount = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.adjustTextAlignment(\n\t\t\t\tvertices,\n\t\t\t\thnx, hny,\n\t\t\t\tlineCount,\n\t\t\t\tvoffset * 2 + textValueLength * 8,\n\t\t\t\twidth - lineWidth,\n\t\t\t\ttextDirection,\n\t\t\t\ttextAlignHorizontal,\n\t\t\t\ttextAlignVertical\n\t\t\t);\n\n\t\t\tfor( let i = voffset * 2 + textValue.length * 8, imax = (voffset + vcount) * 2; i < imax; i += 2 ) {\n\t\t\t\tvertices[ i + 0 ] = tx0;\n\t\t\t\tvertices[ i + 1 ] = ty0;\n\t\t\t\tuvs[ i + 0 ] = uvx0;\n\t\t\t\tuvs[ i + 1 ] = uvy0;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected toAdvance( index: number, size: number, text: string, advance: number, spacing: number ): number {\n\t\treturn (\n\t\t\tindex + 1 < size && text[ index + 1 ] !== \"\\n\" ?\n\t\t\tMath.max( 0, advance + spacing ) : advance\n\t\t);\n\t}\n\n\tprotected writeCharacterEmpty(\n\t\tvertices: Float32Array, uvs: Float32Array, iv: number,\n\t\tcx0: number, cy0: number,\n\t\tcx3: number, cy3: number,\n\t\tuvx0: number, uvy0: number,\n\t\tuvx3: number, uvy3: number\n\t): void {\n\t\tvertices[ iv + 0 ] = cx0;\n\t\tvertices[ iv + 1 ] = cy0;\n\t\tvertices[ iv + 2 ] = cx0;\n\t\tvertices[ iv + 3 ] = cy0;\n\t\tvertices[ iv + 4 ] = cx3;\n\t\tvertices[ iv + 5 ] = cy3;\n\t\tvertices[ iv + 6 ] = cx3;\n\t\tvertices[ iv + 7 ] = cy3;\n\n\t\tuvs[ iv + 0 ] = uvx0;\n\t\tuvs[ iv + 1 ] = uvy0;\n\t\tuvs[ iv + 2 ] = uvx0;\n\t\tuvs[ iv + 3 ] = uvy0;\n\t\tuvs[ iv + 4 ] = uvx3;\n\t\tuvs[ iv + 5 ] = uvy3;\n\t\tuvs[ iv + 6 ] = uvx3;\n\t\tuvs[ iv + 7 ] = uvy3;\n\t}\n\n\tprotected writeCharacter(\n\t\tvertices: Float32Array, uvs: Float32Array, iv: number,\n\t\tdata: EShapeTextAtlasCharacter, atlas: EShapeTextAtlas,\n\t\tsnx: number, sny: number,\n\t\tcx0: number, cy0: number,\n\t\tcx3: number, cy3: number,\n\t\tduvx01: number, duvy01: number,\n\t\tduvx03: number, duvy03: number,\n\t\tuvx0: number, uvy0: number\n\t): void {\n\t\t// Vertices\n\t\tconst dataOffsetX = data.x - data.origin.x;\n\t\tconst dataWidth = data.width;\n\t\tconst dx0 = dataOffsetX * snx;\n\t\tconst dy0 = dataOffsetX * sny;\n\t\tconst dx1 = (dataOffsetX + dataWidth) * snx;\n\t\tconst dy1 = (dataOffsetX + dataWidth) * sny;\n\t\tvertices[ iv + 0 ] = cx0 + dx0;\n\t\tvertices[ iv + 1 ] = cy0 + dy0;\n\t\tvertices[ iv + 2 ] = cx0 + dx1;\n\t\tvertices[ iv + 3 ] = cy0 + dy1;\n\t\tvertices[ iv + 4 ] = cx3 + dx1;\n\t\tvertices[ iv + 5 ] = cy3 + dy1;\n\t\tvertices[ iv + 6 ] = cx3 + dx0;\n\t\tvertices[ iv + 7 ] = cy3 + dy0;\n\n\t\t// UVs\n\t\tconst px0 = data.x / atlas.width;\n\t\tconst py0 = data.y / atlas.height;\n\t\tconst px1 = (data.x + data.width) / atlas.width;\n\t\tconst py1 = (data.y + data.height) / atlas.height;\n\n\t\tconst dux0 = duvx01 * px0;\n\t\tconst duy0 = duvy01 * px0;\n\t\tconst dux1 = duvx01 * px1;\n\t\tconst duy1 = duvy01 * px1;\n\n\t\tconst dvx0 = duvx03 * py0;\n\t\tconst dvy0 = duvy03 * py0;\n\t\tconst dvx1 = duvx03 * py1;\n\t\tconst dvy1 = duvy03 * py1;\n\t\tuvs[ iv + 0 ] = uvx0 + dux0 + dvx0;\n\t\tuvs[ iv + 1 ] = uvy0 + duy0 + dvy0;\n\t\tuvs[ iv + 2 ] = uvx0 + dux1 + dvx0;\n\t\tuvs[ iv + 3 ] = uvy0 + duy1 + dvy0;\n\t\tuvs[ iv + 4 ] = uvx0 + dux1 + dvx1;\n\t\tuvs[ iv + 5 ] = uvy0 + duy1 + dvy1;\n\t\tuvs[ iv + 6 ] = uvx0 + dux0 + dvx1;\n\t\tuvs[ iv + 7 ] = uvy0 + duy0 + dvy1;\n\t}\n\n\tprotected moveText( vertices: Float32Array, vertexIndex: number, textCount: number, dx: number, dy: number ): void {\n\t\tfor( let i = 0, iv = vertexIndex - 8 * textCount; i < textCount; i += 1, iv += 8 ) {\n\t\t\tvertices[ iv + 0 ] += dx;\n\t\t\tvertices[ iv + 1 ] += dy;\n\t\t\tvertices[ iv + 2 ] += dx;\n\t\t\tvertices[ iv + 3 ] += dy;\n\t\t\tvertices[ iv + 4 ] += dx;\n\t\t\tvertices[ iv + 5 ] += dy;\n\t\t\tvertices[ iv + 6 ] += dx;\n\t\t\tvertices[ iv + 7 ] += dy;\n\t\t}\n\t}\n\n\tprotected moveTextHalf(\n\t\tvertices: Float32Array, vertexIndex: number, textCount: number,\n\t\toffset: number, nx: number, ny: number\n\t): void {\n\t\toffset *= 0.5;\n\t\tthis.moveText( vertices, vertexIndex, textCount, offset * nx, offset * ny );\n\t}\n\n\tprotected moveTextFull(\n\t\tvertices: Float32Array, vertexIndex: number, textCount: number,\n\t\toffset: number, nx: number, ny: number\n\t): void {\n\t\tthis.moveText( vertices, vertexIndex, textCount, offset * nx, offset * ny );\n\t}\n\n\tprotected adjustTextAlignment(\n\t\tvertices: Float32Array,\n\t\tnx: number, ny: number,\n\t\tlineCount: number, vertexIndex: number,\n\t\toffset: number,\n\t\ttextDirection: EShapeTextDirection,\n\t\ttextAlignHorizontal: EShapeTextAlignHorizontal,\n\t\ttextAlignVertical: EShapeTextAlignVertical\n\t): void {\n\t\tif( FMIN < offset ) {\n\t\t\tswitch( textDirection ) {\n\t\t\tcase EShapeTextDirection.LEFT_TO_RIGHT:\n\t\t\t\tswitch( textAlignHorizontal ) {\n\t\t\t\tcase EShapeTextAlignHorizontal.OUTSIDE_RIGHT:\n\t\t\t\tcase EShapeTextAlignHorizontal.LEFT:\n\t\t\t\t\t// DO NOTHING\n\t\t\t\t\tbreak;\n\t\t\t\tcase EShapeTextAlignHorizontal.CENTER:\n\t\t\t\t\tthis.moveTextHalf( vertices, vertexIndex, lineCount, offset, nx, ny );\n\t\t\t\t\tbreak;\n\t\t\t\tcase EShapeTextAlignHorizontal.OUTSIDE_LEFT:\n\t\t\t\tcase EShapeTextAlignHorizontal.RIGHT:\n\t\t\t\t\tthis.moveTextFull( vertices, vertexIndex, lineCount, offset, nx, ny );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextDirection.TOP_TO_BOTTOM:\n\t\t\t\tswitch( textAlignVertical ) {\n\t\t\t\tcase EShapeTextAlignVertical.OUTSIDE_BOTTOM:\n\t\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\t\t// DO NOTHING\n\t\t\t\t\tbreak;\n\t\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\t\tthis.moveTextHalf( vertices, vertexIndex, lineCount, offset, nx, ny );\n\t\t\t\t\tbreak;\n\t\t\t\tcase EShapeTextAlignVertical.OUTSIDE_TOP:\n\t\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\t\tthis.moveTextFull( vertices, vertexIndex, lineCount, offset, nx, ny );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextDirection.BOTTOM_TO_TOP:\n\t\t\t\tswitch( textAlignVertical ) {\n\t\t\t\tcase EShapeTextAlignVertical.OUTSIDE_BOTTOM:\n\t\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\t\tthis.moveTextFull( vertices, vertexIndex, lineCount, offset, nx, ny );\n\t\t\t\t\tbreak;\n\t\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\t\tthis.moveTextHalf( vertices, vertexIndex, lineCount, offset, nx, ny );\n\t\t\t\t\tbreak;\n\t\t\t\tcase EShapeTextAlignVertical.OUTSIDE_TOP:\n\t\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\t\t// DO NOTHING\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected updateTextColorFill( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst text = shape.text;\n\t\tconst color = text.color;\n\t\tconst alpha = ( shape.visible && text.enable ? text.alpha : 0 );\n\t\tif( color !== this.textColor || alpha !== this.textAlpha ) {\n\t\t\tthis.textColor = color;\n\t\t\tthis.textAlpha = alpha;\n\t\t\tbuffer.colorFillBuffer.update();\n\n\t\t\tthis.fillColor(\n\t\t\t\tcolor, alpha,\n\t\t\t\tthis.vertexOffset + this.vertexCount - this.textVertexCount,\n\t\t\t\tthis.textVertexCount,\n\t\t\t\tbuffer.colorFills\n\t\t\t);\n\t\t}\n\t}\n\n\tprotected updateTextColorStroke( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst text = shape.text;\n\t\tconst outline = text.outline;\n\t\tconst color = outline.color;\n\t\tconst alpha = ( shape.visible && text.enable ? outline.alpha : 0 );\n\t\tif( color !== this.textOutlineColor || alpha !== this.textOutlineAlpha ) {\n\t\t\tthis.textOutlineColor = color;\n\t\t\tthis.textOutlineAlpha = alpha;\n\t\t\tbuffer.colorStrokeBuffer.update();\n\n\t\t\tthis.fillColor(\n\t\t\t\tcolor, alpha,\n\t\t\t\tthis.vertexOffset + this.vertexCount - this.textVertexCount,\n\t\t\t\tthis.textVertexCount,\n\t\t\t\tbuffer.colorStrokes\n\t\t\t);\n\t\t}\n\t}\n\n\tprotected updateTextStep( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst text = shape.text;\n\t\tconst textOutline = text.outline;\n\t\tconst textOutlineWidth = (textOutline.enable ? textOutline.width : 0);\n\t\tconst textWeight = text.weight;\n\t\tif( textWeight !== this.textWeight || textOutlineWidth !== this.textOutlineWidth ) {\n\t\t\tthis.textWeight = textWeight;\n\t\t\tthis.textOutlineWidth = textOutlineWidth;\n\n\t\t\tbuffer.stepBuffer.update();\n\t\t\tbuffer.antialiasBuffer.update();\n\t\t\tconst steps = buffer.steps;\n\t\t\tconst antialiases = buffer.antialiases;\n\t\t\tconst vcount = this.textVertexCount;\n\t\t\tconst voffset = this.vertexOffset + this.vertexCount - vcount;\n\n\t\t\tconst textAtlas = text.atlas;\n\t\t\tif( textAtlas != null ) {\n\t\t\t\tconst scale = 0.05 / (text.size / textAtlas.font.size);\n\t\t\t\tconst outlineWidth = textOutlineWidth * 0.4;\n\t\t\t\tconst weight =  -0.025 + ( textWeight === EShapeTextWeight.NORMAL ? 0.0 : 0.05 );\n\t\t\t\tfor( let i = voffset * 2, imax = i + vcount * 2; i < imax; i += 2 ) {\n\t\t\t\t\tsteps[ i + 0 ] = scale;\n\t\t\t\t\tsteps[ i + 1 ] = outlineWidth;\n\t\t\t\t}\n\t\t\t\tfor( let i = voffset * 4, imax = i + vcount * 4; i < imax; i += 4 ) {\n\t\t\t\t\tantialiases[ i +  0 ] = weight;\n\t\t\t\t\tantialiases[ i +  1 ] = FMIN;\n\t\t\t\t\tantialiases[ i +  2 ] = FMIN;\n\t\t\t\t\tantialiases[ i +  3 ] = FMIN;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor( let i = voffset * 2, imax = i + vcount * 2; i < imax; i += 2 ) {\n\t\t\t\t\tsteps[ i + 0 ] = 0;\n\t\t\t\t\tsteps[ i + 1 ] = 0;\n\t\t\t\t}\n\t\t\t\tfor( let i = voffset * 4, imax = i + vcount * 4; i < imax; i += 4 ) {\n\t\t\t\t\tantialiases[ i +  0 ] = FMIN;\n\t\t\t\t\tantialiases[ i +  1 ] = FMIN;\n\t\t\t\t\tantialiases[ i +  2 ] = FMIN;\n\t\t\t\t\tantialiases[ i +  3 ] = FMIN;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected updateText( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst vcount = this.textVertexCount;\n\t\tif( 0 < vcount ) {\n\t\t\tconst textAtlas = shape.text.atlas;\n\t\t\tif( textAtlas != null ) {\n\t\t\t\tthis.updateTextVertex( buffer, shape, textAtlas );\n\t\t\t\tthis.updateTextColorFill( buffer, shape );\n\t\t\t\tthis.updateTextColorStroke( buffer, shape );\n\t\t\t\tthis.updateTextStep( buffer, shape );\n\t\t\t}\n\t\t}\n\t}\n\n\tinitText() {\n\t\tconst vcount = this.textVertexCount;\n\t\tif( 0 < vcount ) {\n\t\t\tconst icount = this.textIndexCount;\n\t\t\tconst voffset = this.vertexOffset + this.vertexCount - vcount;\n\t\t\tconst ioffset = this.indexOffset + this.indexCount - icount;\n\t\t\tconst buffer = this.buffer;\n\n\t\t\t// Clippings\n\t\t\tbuffer.clippingBuffer.update();\n\t\t\tconst clippings = buffer.clippings;\n\t\t\tfor( let i = voffset * 3, imax = i + vcount * 3; i < imax; i += 3 ) {\n\t\t\t\tclippings[ i + 0 ] = 0;\n\t\t\t\tclippings[ i + 1 ] = 0;\n\t\t\t\tclippings[ i + 2 ] = 2;\n\t\t\t}\n\n\t\t\t// Indices\n\t\t\tbuffer.indexBuffer.update();\n\t\t\tconst indices = buffer.indices;\n\t\t\tfor( let i = 0, ii = ioffset * 3, imax = (icount >> 1); i < imax; i += 1, ii += 6 ) {\n\t\t\t\tconst j = voffset + ( i << 2 );\n\t\t\t\tindices[ ii + 0 ] = j + 0;\n\t\t\t\tindices[ ii + 1 ] = j + 1;\n\t\t\t\tindices[ ii + 2 ] = j + 3;\n\n\t\t\t\tindices[ ii + 3 ] = j + 1;\n\t\t\t\tindices[ ii + 4 ] = j + 2;\n\t\t\t\tindices[ ii + 5 ] = j + 3;\n\t\t\t}\n\t\t}\n\t}\n\n\tbuildUnit( builder: EShapeBufferUnitBuilder ) {\n\t\tsuper.buildUnit( builder );\n\n\t\tif( 0 < this.textVertexCount ) {\n\t\t\tconst textTexture = this.textTexture || Texture.WHITE;\n\t\t\tconst textBaseTexture = textTexture.baseTexture;\n\t\t\tif( textBaseTexture !== builder.baseTexture ) {\n\t\t\t\tbuilder.baseTexture = textBaseTexture;\n\t\t\t\tconst indexOffset = this.indexOffset + this.indexCount - this.textIndexCount;\n\t\t\t\tbuilder.push( textTexture, indexOffset );\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix } from \"pixi.js\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapePointsStyleUploadeds } from \"../e-shape-points-style-uploadeds\";\nimport { EShapeBar } from \"./e-shape-bar\";\nimport { EShapeBarPoints } from \"./e-shape-bar-points\";\nimport { EShapeTextUploaded } from \"./e-shape-text-uploaded\";\n\nconst FMIN: number = 0.00001;\n\nexport class EShapeBarUploaded extends EShapeTextUploaded {\n\tprotected pointsId: number;\n\tprotected pointsStyle: EShapePointsStyle;\n\n\tconstructor(\n\t\tbuffer: EShapeBuffer,\n\t\tvoffset: number, ioffset: number,\n\t\ttvcount: number, ticount: number,\n\t\tvcount: number, icount: number\n\t) {\n\t\tsuper( buffer, voffset, ioffset, tvcount, ticount, vcount, icount );\n\t\tthis.pointsId = NaN;\n\t\tthis.pointsStyle = EShapePointsStyle.NONE;\n\t}\n\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tconst buffer = this.buffer;\n\t\tconst voffset = this.vertexOffset;\n\t\tconst ioffset = this.indexOffset;\n\n\t\t// Clipping & indices\n\t\tbuffer.clippingBuffer.update();\n\t\tconst clippings = buffer.clippings;\n\t\tbuffer.indexBuffer.update();\n\t\tconst indices = buffer.indices;\n\n\t\t// Clippings\n\t\tconst ic = voffset * 3;\n\t\tclippings[ ic +  0 ] = 1;\n\t\tclippings[ ic +  1 ] = 0;\n\t\tclippings[ ic +  2 ] = 3;\n\n\t\tclippings[ ic +  3 ] = 0;\n\t\tclippings[ ic +  4 ] = 1;\n\t\tclippings[ ic +  5 ] = 5;\n\n\t\tclippings[ ic +  6 ] = 1;\n\t\tclippings[ ic +  7 ] = 0;\n\t\tclippings[ ic +  8 ] = 3;\n\n\t\tclippings[ ic +  9 ] = 0;\n\t\tclippings[ ic + 10 ] = 1;\n\t\tclippings[ ic + 11 ] = 5;\n\n\t\t// Indices\n\t\tconst ii = ioffset * 3;\n\t\tindices[ ii + 0 ] = voffset + 0;\n\t\tindices[ ii + 1 ] = voffset + 2;\n\t\tindices[ ii + 2 ] = voffset + 1;\n\n\t\tindices[ ii + 3 ] = voffset + 1;\n\t\tindices[ ii + 4 ] = voffset + 2;\n\t\tindices[ ii + 5 ] = voffset + 3;\n\n\t\t// Text\n\t\tthis.initText();\n\n\t\t//\n\t\tthis.update( shape );\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\tconst buffer = this.buffer;\n\t\tif( shape instanceof EShapeBar ) {\n\t\t\tconst size = shape.size;\n\t\t\tconst sizeX = size.x;\n\t\t\tconst sizeY = size.y;\n\t\t\tconst isSizeChanged = ( sizeX !== this.sizeX || sizeY !== this.sizeY );\n\t\t\tconst stroke = shape.stroke;\n\t\t\tconst strokeWidth = ( stroke.enable ? stroke.width : 0 );\n\t\t\tconst isStrokeWidthChanged = ( strokeWidth !== this.strokeWidth );\n\t\t\tconst transformLocalId = this.toTransformLocalId( shape );\n\t\t\tconst isTransformChanged = ( this.transformLocalId !== transformLocalId );\n\t\t\tconst pointsId = shape.points.id;\n\t\t\tconst isPointsIdChanged = ( pointsId !== this.pointsId );\n\t\t\tconst pointsStyle = shape.points.style;\n\t\t\tconst isPointsStyleChanged = ( pointsStyle !== this.pointsStyle );\n\t\t\tif( isSizeChanged || isTransformChanged || isStrokeWidthChanged || isPointsIdChanged || isPointsStyleChanged ) {\n\t\t\t\tthis.sizeX = sizeX;\n\t\t\t\tthis.sizeY = sizeY;\n\t\t\t\tthis.strokeWidth = strokeWidth;\n\t\t\t\tthis.transformLocalId = transformLocalId;\n\t\t\t\tthis.pointsId = pointsId;\n\t\t\t\tthis.pointsStyle = pointsStyle;\n\t\t\t\tbuffer.vertexBuffer.update();\n\t\t\t\tbuffer.stepBuffer.update();\n\t\t\t\tbuffer.antialiasBuffer.update();\n\t\t\t\tbuffer.colorFillBuffer.update();\n\n\t\t\t\tif( isSizeChanged || isTransformChanged ) {\n\t\t\t\t\t// Invalidate the text layout to update the text layout.\n\t\t\t\t\tthis.textSpacingHorizontal = NaN;\n\t\t\t\t}\n\t\t\t\tif( isPointsIdChanged ) {\n\t\t\t\t\t// Invalidate the texture transform ID to update the UVs\n\t\t\t\t\tthis.textureTransformId = NaN;\n\t\t\t\t}\n\n\t\t\t\tconst voffset = this.vertexOffset;\n\t\t\t\tconst vcount = this.vertexCount - this.textVertexCount;\n\t\t\t\tthis.updateLineVertexStepAndColorFill(\n\t\t\t\t\tbuffer,\n\t\t\t\t\tshape.points,\n\t\t\t\t\tstrokeWidth,\n\t\t\t\t\tshape.transform.internalTransform,\n\t\t\t\t\tvoffset, vcount\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.updateColor( buffer, shape );\n\t\tthis.updateBarUv( buffer, shape );\n\t\tthis.updateText( buffer, shape );\n\t}\n\n\tprotected updateColorFillAndStroke( buffer: EShapeBuffer, shape: EShape, vertexCount: number ): void {\n\t\tthis.updateColorStroke( buffer, shape, vertexCount );\n\t}\n\n\tprotected updateLineVertexStepAndColorFill(\n\t\tbuffer: EShapeBuffer,\n\t\tpoints: EShapeBarPoints,\n\t\tstrokeWidth: number,\n\t\tinternalTransform: Matrix,\n\t\tvoffset: number,\n\t\tvcount: number\n\t): void {\n\t\tconst iv = voffset * 2;\n\t\tconst ia = voffset * 4;\n\t\tconst vertices = buffer.vertices;\n\t\tconst steps = buffer.steps;\n\t\tconst antialiases = buffer.antialiases;\n\t\tconst colorFills = buffer.colorFills;\n\t\tconst pointCount = points.length;\n\t\tconst pointValues = points.values;\n\t\tconst pointsStyle = points.style;\n\t\tconst pointsSize = points.size;\n\t\tconst scaleInvariant = EShapePointsStyleUploadeds.toScaleInvariant( pointsStyle );\n\n\t\t// First point\n\t\tconst work = buffer.work;\n\t\twork.set( pointValues[ 0 ], pointValues[ 1 ] );\n\t\tinternalTransform.apply( work, work );\n\t\tconst p1x = work.x;\n\t\tconst p1y = work.y;\n\n\t\t// Last point\n\t\tconst lastIndex = (pointCount - 1) << 1;\n\t\twork.set( pointValues[ lastIndex + 0 ], pointValues[ lastIndex + 1 ] );\n\t\tinternalTransform.apply( work, work );\n\t\tlet p2x = work.x;\n\t\tlet p2y = work.y;\n\n\t\t// Normal\n\t\tlet dx = p2x - p1x;\n\t\tlet dy = p2y - p1y;\n\t\tconst d = Math.sqrt( dx * dx + dy * dy );\n\t\tlet l = d;\n\t\tif( 0 <= pointsSize && FMIN < d ) {\n\t\t\tconst ratio = pointsSize / d;\n\t\t\tdx *= ratio;\n\t\t\tdy *= ratio;\n\t\t\tp2x = p1x + dx;\n\t\t\tp2y = p1y + dy;\n\t\t\tl = pointsSize;\n\t\t}\n\n\t\t// Other points\n\t\tconst p0x = p1x - dx;\n\t\tconst p0y = p1y - dy;\n\t\tconst p3x = p2x + dx;\n\t\tconst p3y = p2y + dy;\n\n\t\t//\n\t\tvertices[ iv + 0 ] = p1x;\n\t\tvertices[ iv + 1 ] = p1y;\n\t\tvertices[ iv + 2 ] = p1x;\n\t\tvertices[ iv + 3 ] = p1y;\n\t\tsteps[ iv + 0 ] = strokeWidth;\n\t\tsteps[ iv + 1 ] = scaleInvariant;\n\t\tsteps[ iv + 2 ] = strokeWidth;\n\t\tsteps[ iv + 3 ] = scaleInvariant;\n\t\tantialiases[ ia + 0 ] = p0x;\n\t\tantialiases[ ia + 1 ] = p0y;\n\t\tantialiases[ ia + 2 ] = p2x;\n\t\tantialiases[ ia + 3 ] = p2y;\n\t\tantialiases[ ia + 4 ] = p0x;\n\t\tantialiases[ ia + 5 ] = p0y;\n\t\tantialiases[ ia + 6 ] = p2x;\n\t\tantialiases[ ia + 7 ] = p2y;\n\t\tcolorFills[ ia + 0 ] = 0.0;\n\t\tcolorFills[ ia + 4 ] = 0.0;\n\n\t\tvertices[ iv + 4 ] = p2x;\n\t\tvertices[ iv + 5 ] = p2y;\n\t\tvertices[ iv + 6 ] = p2x;\n\t\tvertices[ iv + 7 ] = p2y;\n\t\tsteps[ iv + 4 ] = strokeWidth;\n\t\tsteps[ iv + 5 ] = scaleInvariant;\n\t\tsteps[ iv + 6 ] = strokeWidth;\n\t\tsteps[ iv + 7 ] = scaleInvariant;\n\t\tantialiases[ ia +  8 ] = p1x;\n\t\tantialiases[ ia +  9 ] = p1y;\n\t\tantialiases[ ia + 10 ] = p3x;\n\t\tantialiases[ ia + 11 ] = p3y;\n\t\tantialiases[ ia + 12 ] = p1x;\n\t\tantialiases[ ia + 13 ] = p1y;\n\t\tantialiases[ ia + 14 ] = p3x;\n\t\tantialiases[ ia + 15 ] = p3y;\n\t\tcolorFills[ ia +  8 ] = l;\n\t\tcolorFills[ ia + 12 ] = l;\n\n\t\t// Total length\n\t\tEShapePointsStyleUploadeds.toDash( l, strokeWidth, pointsStyle, work );\n\t\tconst dash0 = work.x;\n\t\tconst dash1 = work.y;\n\t\tfor( let i = voffset * 4, imax = i + vcount * 4; i < imax; i += 4 ) {\n\t\t\tcolorFills[ i + 1 ] = dash0;\n\t\t\tcolorFills[ i + 2 ] = dash1;\n\t\t\tcolorFills[ i + 3 ] = l;\n\t\t}\n\t}\n\n\tupdateBarUv( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst texture = this.toTexture( shape );\n\t\tconst textureTransformId = this.toTextureTransformId( texture );\n\t\tif( texture !== this.texture || textureTransformId !== this.textureTransformId ) {\n\t\t\tthis.texture = texture;\n\t\t\tthis.textureTransformId = textureTransformId;\n\n\t\t\tconst textureUvs = this.toTextureUvs( texture );\n\n\t\t\t// Uvs\n\t\t\tbuffer.uvBuffer.update();\n\t\t\tconst uvs = buffer.uvs;\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst iuv = voffset * 2;\n\n\t\t\tuvs[ iuv + 0 ] = textureUvs.x0;\n\t\t\tuvs[ iuv + 1 ] = textureUvs.y0;\n\t\t\tuvs[ iuv + 2 ] = textureUvs.x3;\n\t\t\tuvs[ iuv + 3 ] = textureUvs.y3;\n\n\t\t\tuvs[ iuv + 4 ] = textureUvs.x1;\n\t\t\tuvs[ iuv + 5 ] = textureUvs.y1;\n\t\t\tuvs[ iuv + 6 ] = textureUvs.x2;\n\t\t\tuvs[ iuv + 7 ] = textureUvs.y2;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeBarUploaded } from \"./e-shape-bar-uploaded\";\nimport { EShapeTextUploadeds } from \"./e-shape-text-uploadeds\";\n\nexport class EShapeBarUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape, voffset: number, ioffset: number\n\t): EShapeBarUploaded | null {\n\t\tconst tcount = EShapeTextUploadeds.getTextCount( shape, buffer.workCount );\n\t\tconst tvcount = tcount.vertexCount;\n\t\tconst ticount = tcount.indexCount;\n\t\tconst vcount = 4 + tvcount;\n\t\tconst icount = 2 + ticount;\n\t\tif( voffset + vcount < buffer.vertexCapacity && ioffset + icount < buffer.indexCapacity ) {\n\t\t\treturn new EShapeBarUploaded(\n\t\t\t\tbuffer, voffset, ioffset, tvcount, ticount, vcount, icount\n\t\t\t).init( shape );\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeFillLike } from \"../e-shape-fill\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeStrokeLike } from \"../e-shape-stroke\";\nimport { EShapeTextLike } from \"../e-shape-text\";\nimport { EShapeTextOutlineLike } from \"../e-shape-text-outline\";\n\nexport class EShapeActionBases {\n\tstatic toBaseFill( shape: EShape, runtime: EShapeRuntime ): EShapeFillLike {\n\t\treturn ( runtime.written & EShapeRuntimeReset.COLOR_FILL ? shape : runtime ).fill;\n\t}\n\n\tstatic toBaseStroke( shape: EShape, runtime: EShapeRuntime ): EShapeStrokeLike {\n\t\treturn ( runtime.written & EShapeRuntimeReset.COLOR_STROKE ? shape : runtime ).stroke;\n\t}\n\n\tstatic toBaseText( shape: EShape, runtime: EShapeRuntime ): EShapeTextLike {\n\t\treturn ( runtime.written & EShapeRuntimeReset.COLOR_TEXT ? shape : runtime ).text;\n\t}\n\n\tstatic toBaseTextOutline( shape: EShape, runtime: EShapeRuntime ): EShapeTextOutlineLike {\n\t\treturn ( runtime.written & EShapeRuntimeReset.COLOR_TEXT_OUTLINE ? shape : runtime ).text.outline;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplications } from \"../../d-applications\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\n\nexport type EShapeActionExpression<T> = ( shape: EShape, time: number ) => T;\n\nexport class EShapeActionRuntime {\n\treset: EShapeRuntimeReset;\n\n\tconstructor( reset?: EShapeRuntimeReset ) {\n\t\tthis.reset = reset || EShapeRuntimeReset.NONE;\n\t}\n\n\ttoExpression<T>(\n\t\texpression: string, def: EShapeActionExpression<T>, defLiteral: string\n\t): EShapeActionExpression<T> {\n\t\tif( expression.trim().length <= 0 ) {\n\t\t\treturn def;\n\t\t}\n\n\t\ttry {\n\t\t\treturn Function(\n\t\t\t\t\"shape\", \"time\",\n\t\t\t\t`try{ with( shape ) { return (${expression}); } } catch( e ) { return ${defLiteral}; }`\n\t\t\t) as EShapeActionExpression<T>;\n\t\t} catch( e ) {\n\t\t\treturn def;\n\t\t}\n\t}\n\n\temit( name: string, shape: EShape, parameter1?: unknown, parameter2?: unknown ): void {\n\t\tif( parameter1 === undefined ) {\n\t\t\tshape.emit( name, shape );\n\t\t} else if( parameter2 === undefined ) {\n\t\t\tshape.emit( name, shape, parameter1 );\n\t\t} else {\n\t\t\tshape.emit( name, shape, parameter1, parameter2 );\n\t\t}\n\n\t\tconst application = DApplications.getInstance() as any;\n\t\tif( \"shape\" in application ) {\n\t\t\tif( parameter1 === undefined ) {\n\t\t\t\tapplication.shape.emit( name, shape );\n\t\t\t} else if( parameter2 === undefined ) {\n\t\t\t\tapplication.shape.emit( name, shape, parameter1 );\n\t\t\t} else {\n\t\t\t\tapplication.shape.emit( name, shape, parameter1, parameter2 );\n\t\t\t}\n\t\t}\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\t// OVERRIDE THIS\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionExpression, EShapeActionRuntime } from \"./e-shape-action-runtime\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\n\nconst conditionDefault = (): boolean => true;\n\nexport class EShapeActionRuntimeConditional extends EShapeActionRuntime {\n\tprotected readonly condition: EShapeActionExpression<boolean>;\n\n\tconstructor( value: EShapeActionValue, reset: EShapeRuntimeReset ) {\n\t\tsuper( reset );\n\t\tthis.condition = this.toExpression( value.condition, conditionDefault, \"true\" );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueBlink } from \"./e-shape-action-value-blink\";\n\nexport class EShapeActionRuntimeBlink extends EShapeActionRuntimeConditional {\n\tprotected interval: number;\n\n\tconstructor( value: EShapeActionValueBlink, reset: EShapeRuntimeReset ) {\n\t\tsuper( value, reset );\n\t\tthis.interval = value.interval;\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst interval = this.interval;\n\t\t\tconst dinterval = ( interval << 1 );\n\t\t\tconst elapsed = ( time % dinterval );\n\t\t\tif( elapsed < interval ) {\n\t\t\t\tthis.toOff( shape, runtime );\n\t\t\t\truntime.effect = time + ( interval - elapsed );\n\t\t\t} else {\n\t\t\t\tthis.toOn( shape, runtime );\n\t\t\t\truntime.effect = time + ( dinterval - elapsed );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected toOn( shape: EShape, runtime: EShapeRuntime ): void {\n\t\t//\n\t}\n\n\tprotected toOff( shape: EShape, runtime: EShapeRuntime ): void {\n\t\t//\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeBlink } from \"./e-shape-action-runtime-blink\";\nimport { EShapeActionValueBlink } from \"./e-shape-action-value-blink\";\n\nexport class EShapeActionRuntimeBlinkBrighten extends EShapeActionRuntimeBlink {\n\tconstructor( value: EShapeActionValueBlink ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR );\n\t}\n\n\tprotected toOn( shape: EShape, runtime: EShapeRuntime ): void {\n\t\tconst fill = EShapeActionBases.toBaseFill( shape, runtime );\n\t\tshape.fill.set(\n\t\t\tundefined,\n\t\t\tUtilRgb.brighten( fill.color, 0.5 ),\n\t\t\tfill.alpha\n\t\t);\n\n\t\tconst stroke = EShapeActionBases.toBaseStroke( shape, runtime );\n\t\tshape.stroke.set(\n\t\t\tundefined,\n\t\t\tUtilRgb.brighten( stroke.color, 0.5 ),\n\t\t\tstroke.alpha\n\t\t);\n\n\t\tconst text = EShapeActionBases.toBaseText( shape, runtime );\n\t\tshape.text.set(\n\t\t\tundefined,\n\t\t\tUtilRgb.brighten( text.color, 0.5 ),\n\t\t\ttext.alpha\n\t\t);\n\n\t\tconst outline = EShapeActionBases.toBaseTextOutline( shape, runtime );\n\t\tshape.text.outline.set(\n\t\t\tundefined,\n\t\t\tUtilRgb.brighten( outline.color, 0.5 ),\n\t\t\toutline.alpha\n\t\t);\n\n\t\truntime.written |= this.reset;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeBlink } from \"./e-shape-action-runtime-blink\";\nimport { EShapeActionValueBlink } from \"./e-shape-action-value-blink\";\n\nexport class EShapeActionRuntimeBlinkColorFill extends EShapeActionRuntimeBlink {\n\tprotected color: number;\n\tprotected alpha: number;\n\n\tconstructor( value: EShapeActionValueBlink ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_FILL );\n\t\tthis.color = value.color;\n\t\tthis.alpha = value.alpha;\n\t}\n\n\tprotected toOn( shape: EShape, runtime: EShapeRuntime ): void {\n\t\tshape.fill.set( undefined, this.color, this.alpha );\n\t\truntime.written |= this.reset;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeBlink } from \"./e-shape-action-runtime-blink\";\nimport { EShapeActionValueBlink } from \"./e-shape-action-value-blink\";\n\nexport class EShapeActionRuntimeBlinkColorStroke extends EShapeActionRuntimeBlink {\n\tprotected color: number;\n\tprotected alpha: number;\n\n\tconstructor( value: EShapeActionValueBlink ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_STROKE );\n\t\tthis.color = value.color;\n\t\tthis.alpha = value.alpha;\n\t}\n\n\tprotected toOn( shape: EShape, runtime: EShapeRuntime ): void {\n\t\tshape.stroke.set( undefined, this.color, this.alpha );\n\t\truntime.written |= this.reset;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeBlink } from \"./e-shape-action-runtime-blink\";\nimport { EShapeActionValueBlink } from \"./e-shape-action-value-blink\";\n\nexport class EShapeActionRuntimeBlinkDarken extends EShapeActionRuntimeBlink {\n\tconstructor( value: EShapeActionValueBlink ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR );\n\t}\n\n\tprotected toOn( shape: EShape, runtime: EShapeRuntime ): void {\n\t\tconst fill = EShapeActionBases.toBaseFill( shape, runtime );\n\t\tshape.fill.set(\n\t\t\tundefined,\n\t\t\tUtilRgb.darken( fill.color, 0.5 ),\n\t\t\tfill.alpha\n\t\t);\n\n\t\tconst stroke = EShapeActionBases.toBaseStroke( shape, runtime );\n\t\tshape.stroke.set(\n\t\t\tundefined,\n\t\t\tUtilRgb.darken( stroke.color, 0.5 ),\n\t\t\tstroke.alpha\n\t\t);\n\n\t\tconst text = EShapeActionBases.toBaseText( shape, runtime );\n\t\tshape.text.set(\n\t\t\tundefined,\n\t\t\tUtilRgb.darken( text.color, 0.5 ),\n\t\t\ttext.alpha\n\t\t);\n\n\t\tconst outline = EShapeActionBases.toBaseTextOutline( shape, runtime );\n\t\tshape.text.outline.set(\n\t\t\tundefined,\n\t\t\tUtilRgb.darken( outline.color, 0.5 ),\n\t\t\toutline.alpha\n\t\t);\n\n\t\truntime.written |= this.reset;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeBlink } from \"./e-shape-action-runtime-blink\";\nimport { EShapeActionValueBlink } from \"./e-shape-action-value-blink\";\n\nexport class EShapeActionRuntimeBlinkOpacity extends EShapeActionRuntimeBlink {\n\tconstructor( value: EShapeActionValueBlink ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_FILL_AND_STROKE );\n\t}\n\n\tprotected toOn( shape: EShape, runtime: EShapeRuntime ): void {\n\t\tconst fill = EShapeActionBases.toBaseFill( shape, runtime );\n\t\tshape.fill.set(\n\t\t\tundefined,\n\t\t\tfill.color,\n\t\t\tfill.alpha * 0.5\n\t\t);\n\n\t\tconst stroke = EShapeActionBases.toBaseStroke( shape, runtime );\n\t\tshape.stroke.set(\n\t\t\tundefined,\n\t\t\tstroke.color,\n\t\t\tstroke.alpha * 0.5\n\t\t);\n\n\t\truntime.written |= this.reset;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeBlink } from \"./e-shape-action-runtime-blink\";\nimport { EShapeActionValueBlink } from \"./e-shape-action-value-blink\";\n\nexport class EShapeActionRuntimeBlinkVisibility extends EShapeActionRuntimeBlink {\n\tconstructor( value: EShapeActionValueBlink ) {\n\t\tsuper( value, EShapeRuntimeReset.VISIBILITY );\n\t}\n\n\tprotected toOn( shape: EShape, runtime: EShapeRuntime ): void {\n\t\tshape.visible = true;\n\t\truntime.written |= this.reset;\n\t}\n\n\tprotected toOff( shape: EShape, runtime: EShapeRuntime ): void {\n\t\tshape.visible = false;\n\t\truntime.written |= this.reset;\n\t}\n}\n","import { DThemes } from \"../../theme/d-themes\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntime } from \"./e-shape-action-runtime\";\nimport { EShapeActionValue, EThemeShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\n\nexport abstract class EShapeActionValueBase implements EShapeActionValue {\n\treadonly type: EShapeActionValueType;\n\treadonly condition: string;\n\n\tconstructor( type: EShapeActionValueType, condition: string ) {\n\t\tthis.type = type;\n\t\tthis.condition = condition;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tthis.type === value.type &&\n\t\t\tthis.condition === value.condition\n\t\t);\n\t}\n\n\ttoLabel(): string {\n\t\treturn DThemes.getInstance().get<EThemeShapeActionValue>( \"EShapeActionValue\" ).toLabel( this );\n\t}\n\n\tabstract toRuntime( shape: EShape ): EShapeActionRuntime;\n\tabstract serialize( manager: EShapeResourceManagerSerialization ): number;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueType {\n\tSHOW_HIDE,\n\tBLINK,\n\tTRANSFORM,\n\tOPEN,\n\tEMIT_EVENT,\n\tCHANGE_COLOR,\n\tCHANGE_TEXT,\n\tCHANGE_CURSOR,\n\tMISC\n}\n","import { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueBase } from \"./e-shape-action-value-base\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\n\nexport abstract class EShapeActionValueSubtyped<SUBTYPE extends number> extends EShapeActionValueBase {\n\treadonly subtype: SUBTYPE;\n\n\tconstructor( type: EShapeActionValueType, condition: string, subtype: SUBTYPE ) {\n\t\tsuper( type, condition );\n\t\tthis.subtype = subtype;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueSubtyped) &&\n\t\t\tthis.subtype === value.subtype\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utilIsNumber } from \"../../util/util-is-number\";\n\nexport class EShapeActionValues {\n\tstatic toResource( index: number, parsed: number[], resources: string[] ): string {\n\t\tif( 0 <= index && index < parsed.length ) {\n\t\t\tconst id = parsed[ index ];\n\t\t\tif( utilIsNumber( id ) && 0 <= id && id < resources.length ) {\n\t\t\t\treturn resources[ id ];\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueChangeColorType {\n\tFILL,\n\tSTROKE,\n\tFILL_AND_STROKE,\n\tTEXT,\n\tTEXT_OUTLINE,\n\tALL\n}\n\nexport enum EShapeActionValueChangeColorTarget {\n\tCOLOR_AND_ALPHA,\n\tCOLOR,\n\tALPHA,\n\tCODE,\n\tBRIGHTNESS\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeBlink } from \"./e-shape-action-runtime-blink\";\nimport { EShapeActionRuntimeBlinkBrighten } from \"./e-shape-action-runtime-blink-brighten\";\nimport { EShapeActionRuntimeBlinkColorFill } from \"./e-shape-action-runtime-blink-color-fill\";\nimport { EShapeActionRuntimeBlinkColorStroke } from \"./e-shape-action-runtime-blink-color-stroke\";\nimport { EShapeActionRuntimeBlinkDarken } from \"./e-shape-action-runtime-blink-darken\";\nimport { EShapeActionRuntimeBlinkOpacity } from \"./e-shape-action-runtime-blink-opacity\";\nimport { EShapeActionRuntimeBlinkVisibility } from \"./e-shape-action-runtime-blink-visibility\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueBlinkType } from \"./e-shape-action-value-blink-type\";\nimport { EShapeActionValueSubtyped } from \"./e-shape-action-value-subtyped\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueBlinkSerialized = [\n\tEShapeActionValueType.BLINK, number,\n\tEShapeActionValueBlinkType.COLOR_FILL | EShapeActionValueBlinkType.COLOR_STROKE,\n\tnumber, number, number\n];\n\nexport class EShapeActionValueBlink extends EShapeActionValueSubtyped<EShapeActionValueBlinkType> {\n\treadonly interval: number;\n\treadonly color: number;\n\treadonly alpha: number;\n\n\tconstructor( subtype: EShapeActionValueBlinkType, condition: string, interval: number, color: number, alpha: number ) {\n\t\tsuper( EShapeActionValueType.BLINK, condition, subtype );\n\t\tthis.interval = interval;\n\t\tthis.color = color;\n\t\tthis.alpha = alpha;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueBlink) &&\n\t\t\tthis.interval === value.interval &&\n\t\t\tthis.color === value.color &&\n\t\t\tthis.alpha === value.alpha\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeBlink {\n\t\tswitch( this.subtype ) {\n\t\tcase EShapeActionValueBlinkType.BRIGHTEN:\n\t\t\treturn new EShapeActionRuntimeBlinkBrighten( this );\n\t\tcase EShapeActionValueBlinkType.COLOR_FILL:\n\t\t\treturn new EShapeActionRuntimeBlinkColorFill( this );\n\t\tcase EShapeActionValueBlinkType.COLOR_STROKE:\n\t\t\treturn new EShapeActionRuntimeBlinkColorStroke( this );\n\t\tcase EShapeActionValueBlinkType.DARKEN:\n\t\t\treturn new EShapeActionRuntimeBlinkDarken( this );\n\t\tcase EShapeActionValueBlinkType.OPACITY:\n\t\t\treturn new EShapeActionRuntimeBlinkOpacity( this );\n\t\tcase EShapeActionValueBlinkType.VISIBILITY:\n\t\t\treturn new EShapeActionRuntimeBlinkVisibility( this );\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\treturn manager.add(\n\t\t\t`[${this.type},${conditionId},${this.subtype},${this.interval},${this.color},${this.alpha}]`\n\t\t);\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueBlinkSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueBlink {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\treturn new EShapeActionValueBlink(\n\t\t\tserialized[ 2 ], condition, serialized[ 3 ],\n\t\t\tserialized[ 4 ], serialized[ 5 ]\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilAlpha } from \"../../util/util-alpha\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeFill, EShapeFillLike } from \"../e-shape-fill\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeStroke, EShapeStrokeLike } from \"../e-shape-stroke\";\nimport { EShapeText, EShapeTextLike } from \"../e-shape-text\";\nimport { EShapeTextOutline, EShapeTextOutlineLike } from \"../e-shape-text-outline\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueChangeColor } from \"./e-shape-action-value-change-color\";\nimport { EShapeActionValueChangeColorTarget } from \"./e-shape-action-value-change-color-type\";\n\nconst blendDefault = (): number | null => null;\n\nexport class EShapeActionRuntimeChangeColor extends EShapeActionRuntimeConditional {\n\tprotected readonly color: number | undefined;\n\tprotected readonly alpha: number | undefined;\n\tprotected readonly blend: EShapeActionExpression<number | null>;\n\n\tconstructor( value: EShapeActionValueChangeColor, reset: EShapeRuntimeReset ) {\n\t\tsuper( value, reset );\n\n\t\tswitch( value.target ) {\n\t\tcase EShapeActionValueChangeColorTarget.COLOR:\n\t\t\tthis.color = value.color;\n\t\t\tthis.alpha = undefined;\n\t\t\tbreak;\n\t\tcase EShapeActionValueChangeColorTarget.ALPHA:\n\t\t\tthis.color = undefined;\n\t\t\tthis.alpha = value.alpha;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthis.color = value.color;\n\t\t\tthis.alpha = value.alpha;\n\t\t\tbreak;\n\t\t}\n\n\t\tthis.blend = this.toExpression( value.blend, blendDefault, \"null\" );\n\t}\n\n\tprotected set(\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\n\t\ttarget: EShapeStroke | EShapeFill | EShapeText | EShapeTextOutline,\n\t\tbase: EShapeStrokeLike | EShapeFillLike | EShapeTextLike | EShapeTextOutlineLike\n\t): void {\n\t\tconst color = this.color;\n\t\tconst alpha = this.alpha;\n\t\tif( color != null ) {\n\t\t\tif( alpha != null ) {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\ttarget.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( base.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( base.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\ttarget.set( undefined, color, alpha );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\ttarget.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( base.color, color, blend ),\n\t\t\t\t\t\tbase.alpha\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\ttarget.set( undefined, color, base.alpha );\n\t\t\t\t}\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t} else if( alpha != null ) {\n\t\t\tconst blend = this.blend( shape, time );\n\t\t\tif( blend != null ) {\n\t\t\t\ttarget.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbase.color,\n\t\t\t\t\tUtilAlpha.blend( base.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\ttarget.set( undefined, base.color, alpha );\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n\n\tprotected sets(\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\n\t\tfill: EShapeFill, stroke: EShapeStroke,\n\t\tbaseFill: EShapeFillLike, baseStroke: EShapeStrokeLike\n\t): void {\n\t\tconst color = this.color;\n\t\tconst alpha = this.alpha;\n\t\tif( color != null ) {\n\t\t\tif( alpha != null ) {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\tfill.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseFill.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseFill.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t\tstroke.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseStroke.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseStroke.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tfill.set( undefined, color, alpha );\n\t\t\t\t\tstroke.set( undefined, color, alpha );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\tfill.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseFill.color, color, blend ),\n\t\t\t\t\t\tbaseFill.alpha\n\t\t\t\t\t);\n\t\t\t\t\tstroke.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseStroke.color, color, blend ),\n\t\t\t\t\t\tbaseStroke.alpha\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tfill.set( undefined, color, baseFill.alpha );\n\t\t\t\t\tstroke.set( undefined, color, baseStroke.alpha );\n\t\t\t\t}\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t} else if( alpha != null ) {\n\t\t\tconst blend = this.blend( shape, time );\n\t\t\tif( blend != null ) {\n\t\t\t\tfill.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseFill.color,\n\t\t\t\t\tUtilAlpha.blend( baseFill.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t\tstroke.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseStroke.color,\n\t\t\t\t\tUtilAlpha.blend( baseStroke.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tfill.set( undefined, baseFill.color, alpha );\n\t\t\t\tstroke.set( undefined, baseStroke.color, alpha );\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n\n\tprotected setAll(\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\n\t\tfill: EShapeFill, stroke: EShapeStroke, text: EShapeText, outline: EShapeTextOutline,\n\t\tbaseFill: EShapeFillLike, baseStroke: EShapeStrokeLike, baseText: EShapeTextLike, baseOutline: EShapeTextOutlineLike\n\t): void {\n\t\tconst color = this.color;\n\t\tconst alpha = this.alpha;\n\t\tif( color != null ) {\n\t\t\tif( alpha != null ) {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\tfill.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseFill.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseFill.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t\tstroke.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseStroke.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseStroke.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t\ttext.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseText.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseText.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t\toutline.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseOutline.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseOutline.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tfill.set( undefined, color, alpha );\n\t\t\t\t\tstroke.set( undefined, color, alpha );\n\t\t\t\t\ttext.set( undefined, color, alpha );\n\t\t\t\t\toutline.set( undefined, color, alpha );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\tfill.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseFill.color, color, blend ),\n\t\t\t\t\t\tbaseFill.alpha\n\t\t\t\t\t);\n\t\t\t\t\tstroke.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseStroke.color, color, blend ),\n\t\t\t\t\t\tbaseStroke.alpha\n\t\t\t\t\t);\n\t\t\t\t\ttext.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseText.color, color, blend ),\n\t\t\t\t\t\tbaseText.alpha\n\t\t\t\t\t);\n\t\t\t\t\toutline.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseOutline.color, color, blend ),\n\t\t\t\t\t\tbaseOutline.alpha\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tfill.set( undefined, color, baseFill.alpha );\n\t\t\t\t\tstroke.set( undefined, color, baseStroke.alpha );\n\t\t\t\t\ttext.set( undefined, color, baseText.alpha );\n\t\t\t\t\toutline.set( undefined, color, baseOutline.alpha );\n\t\t\t\t}\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t} else if( alpha != null ) {\n\t\t\tconst blend = this.blend( shape, time );\n\t\t\tif( blend != null ) {\n\t\t\t\tfill.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseFill.color,\n\t\t\t\t\tUtilAlpha.blend( baseFill.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t\tstroke.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseStroke.color,\n\t\t\t\t\tUtilAlpha.blend( baseStroke.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t\ttext.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseFill.color,\n\t\t\t\t\tUtilAlpha.blend( baseText.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t\toutline.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseStroke.color,\n\t\t\t\t\tUtilAlpha.blend( baseOutline.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tfill.set( undefined, baseFill.color, alpha );\n\t\t\t\tstroke.set( undefined, baseStroke.color, alpha );\n\t\t\t\ttext.set( undefined, baseText.color, alpha );\n\t\t\t\toutline.set( undefined, baseOutline.color, alpha );\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueChangeTextType {\n\tTEXT,\n\tNUMBER\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColor } from \"./e-shape-action-runtime-change-color\";\nimport { EShapeActionValueChangeColor } from \"./e-shape-action-value-change-color\";\n\nexport class EShapeActionRuntimeChangeColorAll extends EShapeActionRuntimeChangeColor {\n\tconstructor( value: EShapeActionValueChangeColor ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.setAll(\n\t\t\t\tshape, runtime, time,\n\t\t\t\tshape.fill,\n\t\t\t\tshape.stroke,\n\t\t\t\tshape.text,\n\t\t\t\tshape.text.outline,\n\t\t\t\tEShapeActionBases.toBaseFill( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseStroke( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseText( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseTextOutline( shape, runtime )\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColor } from \"./e-shape-action-runtime-change-color\";\nimport { EShapeActionValueChangeColor } from \"./e-shape-action-value-change-color\";\n\nexport class EShapeActionRuntimeChangeColorFill extends EShapeActionRuntimeChangeColor {\n\tconstructor( value: EShapeActionValueChangeColor ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_FILL );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.fill, EShapeActionBases.toBaseFill( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColor } from \"./e-shape-action-runtime-change-color\";\nimport { EShapeActionValueChangeColor } from \"./e-shape-action-value-change-color\";\n\nexport class EShapeActionRuntimeChangeColorFillAndStroke extends EShapeActionRuntimeChangeColor {\n\tconstructor( value: EShapeActionValueChangeColor ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_FILL_AND_STROKE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.sets(\n\t\t\t\tshape, runtime, time,\n\t\t\t\tshape.fill,\n\t\t\t\tshape.stroke,\n\t\t\t\tEShapeActionBases.toBaseFill( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseStroke( shape, runtime )\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColor } from \"./e-shape-action-runtime-change-color\";\nimport { EShapeActionValueChangeColor } from \"./e-shape-action-value-change-color\";\n\nexport class EShapeActionRuntimeChangeColorStroke extends EShapeActionRuntimeChangeColor {\n\tconstructor( value: EShapeActionValueChangeColor ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_STROKE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.stroke, EShapeActionBases.toBaseStroke( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColor } from \"./e-shape-action-runtime-change-color\";\nimport { EShapeActionValueChangeColor } from \"./e-shape-action-value-change-color\";\n\nexport class EShapeActionRuntimeChangeColorText extends EShapeActionRuntimeChangeColor {\n\tconstructor( value: EShapeActionValueChangeColor ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_TEXT );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.text, EShapeActionBases.toBaseText( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColor } from \"./e-shape-action-runtime-change-color\";\nimport { EShapeActionValueChangeColor } from \"./e-shape-action-value-change-color\";\n\nexport class EShapeActionRuntimeChangeColorTextOutline extends EShapeActionRuntimeChangeColor {\n\tconstructor( value: EShapeActionValueChangeColor ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_TEXT_OUTLINE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.text.outline, EShapeActionBases.toBaseTextOutline( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeChangeColor } from \"./e-shape-action-runtime-change-color\";\nimport { EShapeActionRuntimeChangeColorAll } from \"./e-shape-action-runtime-change-color-all\";\nimport { EShapeActionRuntimeChangeColorFill } from \"./e-shape-action-runtime-change-color-fill\";\nimport { EShapeActionRuntimeChangeColorFillAndStroke } from \"./e-shape-action-runtime-change-color-fill-and-stroke\";\nimport { EShapeActionRuntimeChangeColorStroke } from \"./e-shape-action-runtime-change-color-stroke\";\nimport { EShapeActionRuntimeChangeColorText } from \"./e-shape-action-runtime-change-color-text\";\nimport { EShapeActionRuntimeChangeColorTextOutline } from \"./e-shape-action-runtime-change-color-text-outline\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport {\n\tEShapeActionValueChangeColorTarget, EShapeActionValueChangeColorType\n} from \"./e-shape-action-value-change-color-type\";\nimport { EShapeActionValueSubtyped } from \"./e-shape-action-value-subtyped\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\ntype Target = EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA | EShapeActionValueChangeColorTarget.COLOR |\n\tEShapeActionValueChangeColorTarget.ALPHA;\nexport type EShapeActionValueChangeColorSerialized = [\n\tEShapeActionValueType.CHANGE_COLOR, number, EShapeActionValueChangeColorType,\n\tTarget, number, number, number\n];\n\nexport class EShapeActionValueChangeColor extends EShapeActionValueSubtyped<EShapeActionValueChangeColorType> {\n\treadonly target: Target;\n\treadonly color: number;\n\treadonly alpha: number;\n\treadonly blend: string;\n\n\tconstructor(\n\t\tsubtype: EShapeActionValueChangeColorType, condition: string,\n\t\ttarget: Target, color: number, alpha: number, blend: string\n\t) {\n\t\tsuper( EShapeActionValueType.CHANGE_COLOR, condition, subtype );\n\t\tthis.target = target;\n\t\tthis.color = color;\n\t\tthis.alpha = alpha;\n\t\tthis.blend = blend;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueChangeColor) &&\n\t\t\tthis.target === value.target &&\n\t\t\tthis.color === value.color &&\n\t\t\tthis.alpha === value.alpha &&\n\t\t\tthis.blend === value.blend\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeChangeColor {\n\t\tswitch( this.subtype ) {\n\t\tcase EShapeActionValueChangeColorType.FILL:\n\t\t\treturn new EShapeActionRuntimeChangeColorFill( this );\n\t\tcase EShapeActionValueChangeColorType.STROKE:\n\t\t\treturn new EShapeActionRuntimeChangeColorStroke( this );\n\t\tcase EShapeActionValueChangeColorType.FILL_AND_STROKE:\n\t\t\treturn new EShapeActionRuntimeChangeColorFillAndStroke( this );\n\t\tcase EShapeActionValueChangeColorType.TEXT:\n\t\t\treturn new EShapeActionRuntimeChangeColorText( this );\n\t\tcase EShapeActionValueChangeColorType.TEXT_OUTLINE:\n\t\t\treturn new EShapeActionRuntimeChangeColorTextOutline( this );\n\t\tcase EShapeActionValueChangeColorType.ALL:\n\t\t\treturn new EShapeActionRuntimeChangeColorAll( this );\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\tconst blendId = manager.add(this.blend);\n\t\treturn manager.add(\n\t\t\t`[${this.type},${conditionId},${this.subtype},${this.target},${this.color},${this.alpha},${blendId}]`\n\t\t);\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueChangeColorSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueChangeColor {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst blend = EShapeActionValues.toResource( 6, serialized, manager.resources );\n\t\treturn new EShapeActionValueChangeColor(\n\t\t\tserialized[ 2 ], condition, serialized[ 3 ], serialized[ 4 ], serialized[ 5 ], blend\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeFill, EShapeFillLike } from \"../e-shape-fill\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeStroke, EShapeStrokeLike } from \"../e-shape-stroke\";\nimport { EShapeText, EShapeTextLike } from \"../e-shape-text\";\nimport { EShapeTextOutline, EShapeTextOutlineLike } from \"../e-shape-text-outline\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueChangeColorBrightness } from \"./e-shape-action-value-change-color-brightness\";\n\nconst brightnessDefault = (): number | null => null;\n\nexport class EShapeActionRuntimeChangeColorBrightness extends EShapeActionRuntimeConditional {\n\tprotected readonly brightness: EShapeActionExpression<number | null>;\n\n\tconstructor( value: EShapeActionValueChangeColorBrightness, reset: EShapeRuntimeReset ) {\n\t\tsuper( value, reset );\n\t\tthis.brightness = this.toExpression( value.brightness, brightnessDefault, \"null\" );\n\t}\n\n\tprotected set(\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\n\t\ttarget: EShapeStroke | EShapeFill | EShapeText | EShapeTextOutline,\n\t\tbase: EShapeStrokeLike | EShapeFillLike | EShapeTextLike | EShapeTextOutlineLike\n\t): void {\n\t\tconst brightness = this.brightness( shape, time );\n\t\tif( brightness != null ) {\n\t\t\ttarget.set(\n\t\t\t\tundefined,\n\t\t\t\tthis.toColorAdjusted( base.color, brightness ),\n\t\t\t\tbase.alpha\n\t\t\t);\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n\n\tprotected sets(\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\n\t\tfill: EShapeFill, stroke: EShapeStroke,\n\t\tbaseFill: EShapeFillLike, baseStroke: EShapeStrokeLike\n\t): void {\n\t\tconst brightness = this.brightness( shape, time );\n\t\tif( brightness != null ) {\n\t\t\tfill.set(\n\t\t\t\tundefined,\n\t\t\t\tthis.toColorAdjusted( baseFill.color, brightness ),\n\t\t\t\tbaseFill.alpha\n\t\t\t);\n\n\t\t\tstroke.set(\n\t\t\t\tundefined,\n\t\t\t\tthis.toColorAdjusted( baseStroke.color, brightness ),\n\t\t\t\tbaseStroke.alpha\n\t\t\t);\n\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n\n\tprotected setAll(\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\n\t\tfill: EShapeFill, stroke: EShapeStroke, text: EShapeText, outline: EShapeTextOutline,\n\t\tbaseFill: EShapeFillLike, baseStroke: EShapeStrokeLike, baseText: EShapeTextLike, baseOutline: EShapeTextOutlineLike\n\t): void {\n\t\tconst brightness = this.brightness( shape, time );\n\t\tif( brightness != null ) {\n\t\t\tfill.set(\n\t\t\t\tundefined,\n\t\t\t\tthis.toColorAdjusted( baseFill.color, brightness ),\n\t\t\t\tbaseFill.alpha\n\t\t\t);\n\n\t\t\tstroke.set(\n\t\t\t\tundefined,\n\t\t\t\tthis.toColorAdjusted( baseStroke.color, brightness ),\n\t\t\t\tbaseStroke.alpha\n\t\t\t);\n\n\t\t\ttext.set(\n\t\t\t\tundefined,\n\t\t\t\tthis.toColorAdjusted( baseText.color, brightness ),\n\t\t\t\tbaseText.alpha\n\t\t\t);\n\n\t\t\toutline.set(\n\t\t\t\tundefined,\n\t\t\t\tthis.toColorAdjusted( baseOutline.color, brightness ),\n\t\t\t\tbaseOutline.alpha\n\t\t\t);\n\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n\n\tprotected toColorAdjusted( color: number, brightness: number ): number {\n\t\tif( 0 <= brightness ) {\n\t\t\treturn UtilRgb.brighten( color, +brightness );\n\t\t} else {\n\t\t\treturn UtilRgb.darken( color, -brightness );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorBrightness } from \"./e-shape-action-runtime-change-color-brightness\";\nimport { EShapeActionValueChangeColorBrightness } from \"./e-shape-action-value-change-color-brightness\";\n\nexport class EShapeActionRuntimeChangeColorBrightnessAll extends EShapeActionRuntimeChangeColorBrightness {\n\tconstructor( value: EShapeActionValueChangeColorBrightness ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.setAll(\n\t\t\t\tshape, runtime, time,\n\t\t\t\tshape.fill,\n\t\t\t\tshape.stroke,\n\t\t\t\tshape.text,\n\t\t\t\tshape.text.outline,\n\t\t\t\tEShapeActionBases.toBaseFill( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseStroke( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseText( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseTextOutline( shape, runtime )\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorBrightness } from \"./e-shape-action-runtime-change-color-brightness\";\nimport { EShapeActionValueChangeColorBrightness } from \"./e-shape-action-value-change-color-brightness\";\n\nexport class EShapeActionRuntimeChangeColorBrightnessFill extends EShapeActionRuntimeChangeColorBrightness {\n\tconstructor( value: EShapeActionValueChangeColorBrightness ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_FILL );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.fill, EShapeActionBases.toBaseFill( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorBrightness } from \"./e-shape-action-runtime-change-color-brightness\";\nimport { EShapeActionValueChangeColorBrightness } from \"./e-shape-action-value-change-color-brightness\";\n\nexport class EShapeActionRuntimeChangeColorBrightnessFillAndStroke extends EShapeActionRuntimeChangeColorBrightness {\n\tconstructor( value: EShapeActionValueChangeColorBrightness ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_FILL_AND_STROKE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.sets(\n\t\t\t\tshape, runtime, time,\n\t\t\t\tshape.fill,\n\t\t\t\tshape.stroke,\n\t\t\t\tEShapeActionBases.toBaseFill( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseStroke( shape, runtime )\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorBrightness } from \"./e-shape-action-runtime-change-color-brightness\";\nimport { EShapeActionValueChangeColorBrightness } from \"./e-shape-action-value-change-color-brightness\";\n\nexport class EShapeActionRuntimeChangeColorBrightnessStroke extends EShapeActionRuntimeChangeColorBrightness {\n\tconstructor( value: EShapeActionValueChangeColorBrightness ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_STROKE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.stroke, EShapeActionBases.toBaseStroke( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorBrightness } from \"./e-shape-action-runtime-change-color-brightness\";\nimport { EShapeActionValueChangeColorBrightness } from \"./e-shape-action-value-change-color-brightness\";\n\nexport class EShapeActionRuntimeChangeColorBrightnessText extends EShapeActionRuntimeChangeColorBrightness {\n\tconstructor( value: EShapeActionValueChangeColorBrightness ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_TEXT );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.text, EShapeActionBases.toBaseText( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases} from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorBrightness } from \"./e-shape-action-runtime-change-color-brightness\";\nimport { EShapeActionValueChangeColorBrightness } from \"./e-shape-action-value-change-color-brightness\";\n\nexport class EShapeActionRuntimeChangeColorBrightnessTextOutline extends EShapeActionRuntimeChangeColorBrightness {\n\tconstructor( value: EShapeActionValueChangeColorBrightness ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_TEXT_OUTLINE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.text.outline, EShapeActionBases.toBaseTextOutline( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeChangeColorBrightness } from \"./e-shape-action-runtime-change-color-brightness\";\nimport { EShapeActionRuntimeChangeColorBrightnessAll } from \"./e-shape-action-runtime-change-color-brightness-all\";\nimport { EShapeActionRuntimeChangeColorBrightnessFill } from \"./e-shape-action-runtime-change-color-brightness-fill\";\nimport {\n\tEShapeActionRuntimeChangeColorBrightnessFillAndStroke\n} from \"./e-shape-action-runtime-change-color-brightness-fill-and-stroke\";\nimport {\n\tEShapeActionRuntimeChangeColorBrightnessStroke\n} from \"./e-shape-action-runtime-change-color-brightness-stroke\";\nimport { EShapeActionRuntimeChangeColorBrightnessText } from \"./e-shape-action-runtime-change-color-brightness-text\";\nimport {\n\tEShapeActionRuntimeChangeColorBrightnessTextOutline\n} from \"./e-shape-action-runtime-change-color-brightness-text-outline\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport {\n\tEShapeActionValueChangeColorTarget, EShapeActionValueChangeColorType\n} from \"./e-shape-action-value-change-color-type\";\nimport { EShapeActionValueSubtyped } from \"./e-shape-action-value-subtyped\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueChangeColorBrightnessSerialized = [\n\tEShapeActionValueType.CHANGE_COLOR, number, EShapeActionValueChangeColorType,\n\tEShapeActionValueChangeColorTarget.BRIGHTNESS, number\n];\n\nexport class EShapeActionValueChangeColorBrightness\n\textends EShapeActionValueSubtyped<EShapeActionValueChangeColorType> {\n\treadonly brightness: string;\n\n\tconstructor(\n\t\tsubtype: EShapeActionValueChangeColorType, condition: string, brightness: string\n\t) {\n\t\tsuper( EShapeActionValueType.CHANGE_COLOR, condition, subtype );\n\t\tthis.brightness = brightness;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueChangeColorBrightness) &&\n\t\t\tthis.brightness === value.brightness\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeChangeColorBrightness {\n\t\tswitch( this.subtype ) {\n\t\tcase EShapeActionValueChangeColorType.FILL:\n\t\t\treturn new EShapeActionRuntimeChangeColorBrightnessFill( this );\n\t\tcase EShapeActionValueChangeColorType.STROKE:\n\t\t\treturn new EShapeActionRuntimeChangeColorBrightnessStroke( this );\n\t\tcase EShapeActionValueChangeColorType.FILL_AND_STROKE:\n\t\t\treturn new EShapeActionRuntimeChangeColorBrightnessFillAndStroke( this );\n\t\tcase EShapeActionValueChangeColorType.TEXT:\n\t\t\treturn new EShapeActionRuntimeChangeColorBrightnessText( this );\n\t\tcase EShapeActionValueChangeColorType.TEXT_OUTLINE:\n\t\t\treturn new EShapeActionRuntimeChangeColorBrightnessTextOutline( this );\n\t\tcase EShapeActionValueChangeColorType.ALL:\n\t\t\treturn new EShapeActionRuntimeChangeColorBrightnessAll( this );\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\tconst target = EShapeActionValueChangeColorTarget.BRIGHTNESS;\n\t\tconst brightnessId = manager.add(this.brightness);\n\t\treturn manager.add(\n\t\t\t`[${this.type},${conditionId},${this.subtype},${target},${brightnessId}]`\n\t\t);\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueChangeColorBrightnessSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueChangeColorBrightness {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst brightness = EShapeActionValues.toResource( 4, serialized, manager.resources );\n\t\treturn new EShapeActionValueChangeColorBrightness(\n\t\t\tserialized[ 2 ], condition, brightness\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilAlpha } from \"../../util/util-alpha\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeFill, EShapeFillLike } from \"../e-shape-fill\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeStroke, EShapeStrokeLike } from \"../e-shape-stroke\";\nimport { EShapeText, EShapeTextLike } from \"../e-shape-text\";\nimport { EShapeTextOutline, EShapeTextOutlineLike } from \"../e-shape-text-outline\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueChangeColorCode } from \"./e-shape-action-value-change-color-code\";\n\nconst colorDefault = (): number | null => null;\nconst alphaDefault = (): number | null => null;\nconst blendDefault = (): number | null => null;\n\nexport class EShapeActionRuntimeChangeColorCode extends EShapeActionRuntimeConditional {\n\tprotected readonly color: EShapeActionExpression<number | null>;\n\tprotected readonly alpha: EShapeActionExpression<number | null>;\n\tprotected readonly blend: EShapeActionExpression<number | null>;\n\n\tconstructor( value: EShapeActionValueChangeColorCode, reset: EShapeRuntimeReset ) {\n\t\tsuper( value, reset );\n\t\tthis.color = this.toExpression( value.color, colorDefault, \"null\" );\n\t\tthis.alpha = this.toExpression( value.alpha, alphaDefault, \"null\" );\n\t\tthis.blend = this.toExpression( value.blend, blendDefault, \"null\" );\n\t}\n\n\tprotected set(\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\n\t\ttarget: EShapeStroke | EShapeFill | EShapeText | EShapeTextOutline,\n\t\tbase: EShapeStrokeLike | EShapeFillLike | EShapeTextLike | EShapeTextOutlineLike\n\t): void {\n\t\tconst color = this.color( shape, time );\n\t\tconst alpha = this.alpha( shape, time );\n\t\tif( color != null ) {\n\t\t\tif( alpha != null ) {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\ttarget.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( base.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( base.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\ttarget.set( undefined, color, alpha );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\ttarget.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( base.color, color, blend ),\n\t\t\t\t\t\tbase.alpha\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\ttarget.set( undefined, color, base.alpha );\n\t\t\t\t}\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t} else if( alpha != null ) {\n\t\t\tconst blend = this.blend( shape, time );\n\t\t\tif( blend != null ) {\n\t\t\t\ttarget.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbase.color,\n\t\t\t\t\tUtilAlpha.blend( base.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\ttarget.set( undefined, base.color, alpha );\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n\n\tprotected sets(\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\n\t\tfill: EShapeFill, stroke: EShapeStroke,\n\t\tbaseFill: EShapeFillLike, baseStroke: EShapeStrokeLike\n\t): void {\n\t\tconst color = this.color( shape, time );\n\t\tconst alpha = this.alpha( shape, time );\n\t\tif( color != null ) {\n\t\t\tif( alpha != null ) {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\tfill.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseFill.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseFill.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t\tstroke.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseStroke.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseStroke.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tfill.set( undefined, color, alpha );\n\t\t\t\t\tstroke.set( undefined, color, alpha );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\tfill.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseFill.color, color, blend ),\n\t\t\t\t\t\tbaseFill.alpha\n\t\t\t\t\t);\n\t\t\t\t\tstroke.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseStroke.color, color, blend ),\n\t\t\t\t\t\tbaseStroke.alpha\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tfill.set( undefined, color, baseFill.alpha );\n\t\t\t\t\tstroke.set( undefined, color, baseStroke.alpha );\n\t\t\t\t}\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t} else if( alpha != null ) {\n\t\t\tconst blend = this.blend( shape, time );\n\t\t\tif( blend != null ) {\n\t\t\t\tfill.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseFill.color,\n\t\t\t\t\tUtilAlpha.blend( baseFill.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t\tstroke.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseStroke.color,\n\t\t\t\t\tUtilAlpha.blend( baseStroke.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tfill.set( undefined, baseFill.color, alpha );\n\t\t\t\tstroke.set( undefined, baseStroke.color, alpha );\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n\n\tprotected setAll(\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\n\t\tfill: EShapeFill, stroke: EShapeStroke, text: EShapeText, outline: EShapeTextOutline,\n\t\tbaseFill: EShapeFillLike, baseStroke: EShapeStrokeLike, baseText: EShapeTextLike, baseOutline: EShapeTextOutlineLike\n\t): void {\n\t\tconst color = this.color( shape, time );\n\t\tconst alpha = this.alpha( shape, time );\n\t\tif( color != null ) {\n\t\t\tif( alpha != null ) {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\tfill.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseFill.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseFill.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t\tstroke.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseStroke.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseStroke.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t\ttext.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseText.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseText.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t\toutline.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseOutline.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseOutline.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tfill.set( undefined, color, alpha );\n\t\t\t\t\tstroke.set( undefined, color, alpha );\n\t\t\t\t\ttext.set( undefined, color, alpha );\n\t\t\t\t\toutline.set( undefined, color, alpha );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\tfill.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseFill.color, color, blend ),\n\t\t\t\t\t\tbaseFill.alpha\n\t\t\t\t\t);\n\t\t\t\t\tstroke.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseStroke.color, color, blend ),\n\t\t\t\t\t\tbaseStroke.alpha\n\t\t\t\t\t);\n\t\t\t\t\ttext.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseText.color, color, blend ),\n\t\t\t\t\t\tbaseText.alpha\n\t\t\t\t\t);\n\t\t\t\t\toutline.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseOutline.color, color, blend ),\n\t\t\t\t\t\tbaseOutline.alpha\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tfill.set( undefined, color, baseFill.alpha );\n\t\t\t\t\tstroke.set( undefined, color, baseStroke.alpha );\n\t\t\t\t\ttext.set( undefined, color, baseText.alpha );\n\t\t\t\t\toutline.set( undefined, color, baseOutline.alpha );\n\t\t\t\t}\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t} else if( alpha != null ) {\n\t\t\tconst blend = this.blend( shape, time );\n\t\t\tif( blend != null ) {\n\t\t\t\tfill.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseFill.color,\n\t\t\t\t\tUtilAlpha.blend( baseFill.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t\tstroke.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseStroke.color,\n\t\t\t\t\tUtilAlpha.blend( baseStroke.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t\ttext.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseFill.color,\n\t\t\t\t\tUtilAlpha.blend( baseText.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t\toutline.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseStroke.color,\n\t\t\t\t\tUtilAlpha.blend( baseOutline.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tfill.set( undefined, baseFill.color, alpha );\n\t\t\t\tstroke.set( undefined, baseStroke.color, alpha );\n\t\t\t\ttext.set( undefined, baseText.color, alpha );\n\t\t\t\toutline.set( undefined, baseOutline.color, alpha );\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorCode } from \"./e-shape-action-runtime-change-color-code\";\nimport { EShapeActionValueChangeColorCode } from \"./e-shape-action-value-change-color-code\";\n\nexport class EShapeActionRuntimeChangeColorCodeAll extends EShapeActionRuntimeChangeColorCode {\n\tconstructor( value: EShapeActionValueChangeColorCode ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.setAll(\n\t\t\t\tshape, runtime, time,\n\t\t\t\tshape.fill,\n\t\t\t\tshape.stroke,\n\t\t\t\tshape.text,\n\t\t\t\tshape.text.outline,\n\t\t\t\tEShapeActionBases.toBaseFill( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseStroke( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseText( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseTextOutline( shape, runtime )\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorCode } from \"./e-shape-action-runtime-change-color-code\";\nimport { EShapeActionValueChangeColorCode } from \"./e-shape-action-value-change-color-code\";\n\nexport class EShapeActionRuntimeChangeColorCodeFill extends EShapeActionRuntimeChangeColorCode {\n\tconstructor( value: EShapeActionValueChangeColorCode ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_FILL );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.fill, EShapeActionBases.toBaseFill( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorCode } from \"./e-shape-action-runtime-change-color-code\";\nimport { EShapeActionValueChangeColorCode } from \"./e-shape-action-value-change-color-code\";\n\nexport class EShapeActionRuntimeChangeColorCodeFillAndStroke extends EShapeActionRuntimeChangeColorCode {\n\tconstructor( value: EShapeActionValueChangeColorCode ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_FILL_AND_STROKE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.sets(\n\t\t\t\tshape, runtime, time,\n\t\t\t\tshape.fill,\n\t\t\t\tshape.stroke,\n\t\t\t\tEShapeActionBases.toBaseFill( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseStroke( shape, runtime )\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorCode } from \"./e-shape-action-runtime-change-color-code\";\nimport { EShapeActionValueChangeColorCode } from \"./e-shape-action-value-change-color-code\";\n\nexport class EShapeActionRuntimeChangeColorCodeStroke extends EShapeActionRuntimeChangeColorCode {\n\tconstructor( value: EShapeActionValueChangeColorCode ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_STROKE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.stroke, EShapeActionBases.toBaseStroke( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorCode } from \"./e-shape-action-runtime-change-color-code\";\nimport { EShapeActionValueChangeColorCode } from \"./e-shape-action-value-change-color-code\";\n\nexport class EShapeActionRuntimeChangeColorCodeText extends EShapeActionRuntimeChangeColorCode {\n\tconstructor( value: EShapeActionValueChangeColorCode ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_TEXT );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.text, EShapeActionBases.toBaseText( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorCode } from \"./e-shape-action-runtime-change-color-code\";\nimport { EShapeActionValueChangeColorCode } from \"./e-shape-action-value-change-color-code\";\n\nexport class EShapeActionRuntimeChangeColorCodeTextOutline extends EShapeActionRuntimeChangeColorCode {\n\tconstructor( value: EShapeActionValueChangeColorCode ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_TEXT_OUTLINE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.text.outline, EShapeActionBases.toBaseTextOutline( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeChangeColorCode } from \"./e-shape-action-runtime-change-color-code\";\nimport { EShapeActionRuntimeChangeColorCodeAll } from \"./e-shape-action-runtime-change-color-code-all\";\nimport { EShapeActionRuntimeChangeColorCodeFill } from \"./e-shape-action-runtime-change-color-code-fill\";\nimport {\n\tEShapeActionRuntimeChangeColorCodeFillAndStroke\n} from \"./e-shape-action-runtime-change-color-code-fill-and-stroke\";\nimport { EShapeActionRuntimeChangeColorCodeStroke } from \"./e-shape-action-runtime-change-color-code-stroke\";\nimport { EShapeActionRuntimeChangeColorCodeText } from \"./e-shape-action-runtime-change-color-code-text\";\nimport { EShapeActionRuntimeChangeColorCodeTextOutline } from \"./e-shape-action-runtime-change-color-code-text-outline\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport {\n\tEShapeActionValueChangeColorTarget, EShapeActionValueChangeColorType\n} from \"./e-shape-action-value-change-color-type\";\nimport { EShapeActionValueSubtyped } from \"./e-shape-action-value-subtyped\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueChangeColorCodeSerialized = [\n\tEShapeActionValueType.CHANGE_COLOR, number, EShapeActionValueChangeColorType,\n\tEShapeActionValueChangeColorTarget.CODE, number, number, number\n];\n\nexport class EShapeActionValueChangeColorCode extends EShapeActionValueSubtyped<EShapeActionValueChangeColorType> {\n\treadonly color: string;\n\treadonly alpha: string;\n\treadonly blend: string;\n\n\tconstructor(\n\t\tsubtype: EShapeActionValueChangeColorType, condition: string,\n\t\tcolor: string, alpha: string, blend: string\n\t) {\n\t\tsuper( EShapeActionValueType.CHANGE_COLOR, condition, subtype );\n\t\tthis.color = color;\n\t\tthis.alpha = alpha;\n\t\tthis.blend = blend;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueChangeColorCode) &&\n\t\t\tthis.color === value.color &&\n\t\t\tthis.alpha === value.alpha &&\n\t\t\tthis.blend === value.blend\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeChangeColorCode {\n\t\tswitch( this.subtype ) {\n\t\tcase EShapeActionValueChangeColorType.FILL:\n\t\t\treturn new EShapeActionRuntimeChangeColorCodeFill( this );\n\t\tcase EShapeActionValueChangeColorType.STROKE:\n\t\t\treturn new EShapeActionRuntimeChangeColorCodeStroke( this );\n\t\tcase EShapeActionValueChangeColorType.FILL_AND_STROKE:\n\t\t\treturn new EShapeActionRuntimeChangeColorCodeFillAndStroke( this );\n\t\tcase EShapeActionValueChangeColorType.TEXT:\n\t\t\treturn new EShapeActionRuntimeChangeColorCodeText( this );\n\t\tcase EShapeActionValueChangeColorType.TEXT_OUTLINE:\n\t\t\treturn new EShapeActionRuntimeChangeColorCodeTextOutline( this );\n\t\tcase EShapeActionValueChangeColorType.ALL:\n\t\t\treturn new EShapeActionRuntimeChangeColorCodeAll( this );\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\tconst target = EShapeActionValueChangeColorTarget.CODE;\n\t\tconst colorId = manager.add(this.color);\n\t\tconst alphaId = manager.add(this.alpha);\n\t\tconst blendId = manager.add(this.blend);\n\t\treturn manager.add(\n\t\t\t`[${this.type},${conditionId},${this.subtype},${target},${colorId},${alphaId},${blendId}]`\n\t\t);\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueChangeColorCodeSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueChangeColorCode {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst color = EShapeActionValues.toResource( 4, serialized, manager.resources );\n\t\tconst alpha = EShapeActionValues.toResource( 5, serialized, manager.resources );\n\t\tconst blend = EShapeActionValues.toResource( 6, serialized, manager.resources );\n\t\treturn new EShapeActionValueChangeColorCode(\n\t\t\tserialized[ 2 ], condition, color, alpha, blend\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueChangeCursor } from \"./e-shape-action-value-change-cursor\";\n\nconst nameDefault = (): string | null => null;\n\nexport class EShapeActionRuntimeChangeCursor extends EShapeActionRuntimeConditional {\n\tprotected name: EShapeActionExpression<string | null>;\n\n\tconstructor( value: EShapeActionValueChangeCursor ) {\n\t\tsuper( value, EShapeRuntimeReset.CURSOR );\n\t\tthis.name = this.toExpression( value.name, nameDefault, \"null\" );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst name = this.name( shape, time );\n\t\t\tif( name != null ) {\n\t\t\t\tshape.cursor = name;\n\t\t\t\truntime.written |= this.reset;\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeChangeCursor } from \"./e-shape-action-runtime-change-cursor\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueBase } from \"./e-shape-action-value-base\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueChangeCursorSerialized = [\n\tEShapeActionValueType.CHANGE_CURSOR, number, number\n];\n\nexport class EShapeActionValueChangeCursor extends EShapeActionValueBase {\n\treadonly name: string;\n\n\tconstructor( condition: string, name: string ) {\n\t\tsuper( EShapeActionValueType.CHANGE_CURSOR, condition );\n\t\tthis.name = name;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueChangeCursor) &&\n\t\t\tthis.name === value.name\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeChangeCursor {\n\t\treturn new EShapeActionRuntimeChangeCursor( this );\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\tconst nameId = manager.add(this.name);\n\t\treturn manager.add(\n\t\t\t`[${this.type},${conditionId},${nameId}]`\n\t\t);\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueChangeCursorSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueChangeCursor {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst name = EShapeActionValues.toResource( 2, serialized, manager.resources );\n\t\treturn new EShapeActionValueChangeCursor( condition, name );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { NumberFormatter } from \"../../util/number-formatter\";\nimport { NumberFormatters } from \"../../util/number-formatters\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueChangeText } from \"./e-shape-action-value-change-text\";\n\nconst numberDefault = (): number => 0;\n\nexport class EShapeActionRuntimeChangeTextNumber extends EShapeActionRuntimeConditional {\n\tprotected number: EShapeActionExpression<number>;\n\tprotected formatter: NumberFormatter | null;\n\n\tconstructor( value: EShapeActionValueChangeText, format: string ) {\n\t\tsuper( value, EShapeRuntimeReset.TEXT );\n\n\t\tthis.number = this.toExpression( value.value, numberDefault, `0` );\n\n\t\tformat = format.trim();\n\t\tthis.formatter = ( 0 < format.length ? NumberFormatters.create( format ) : null );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst value = this.number( shape, time );\n\t\t\tshape.text.value = ( this.formatter != null ? this.formatter.format( value, 0 ) : String(value) );\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueChangeText } from \"./e-shape-action-value-change-text\";\n\nconst textDefault = () => \"\";\n\nexport class EShapeActionRuntimeChangeTextText extends EShapeActionRuntimeConditional {\n\tprotected text: EShapeActionExpression<string>;\n\n\tconstructor( value: EShapeActionValueChangeText ) {\n\t\tsuper( value, EShapeRuntimeReset.TEXT );\n\t\tthis.text = this.toExpression( value.value, textDefault, `\"\"` );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tshape.text.value = String(this.text( shape, time ));\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeChangeTextNumber } from \"./e-shape-action-runtime-change-text-number\";\nimport { EShapeActionRuntimeChangeTextText } from \"./e-shape-action-runtime-change-text-text\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueChangeTextType } from \"./e-shape-action-value-change-text-type\";\nimport { EShapeActionValueSubtyped } from \"./e-shape-action-value-subtyped\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueChangeTextSerialized = [\n\tEShapeActionValueType.CHANGE_TEXT, number, EShapeActionValueChangeTextType, number\n];\n\nexport class EShapeActionValueChangeText extends EShapeActionValueSubtyped<EShapeActionValueChangeTextType> {\n\treadonly value: string;\n\n\tconstructor( subtype: EShapeActionValueChangeTextType, condition: string, value: string ) {\n\t\tsuper( EShapeActionValueType.CHANGE_TEXT, condition, subtype );\n\t\tthis.value = value;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueChangeText) &&\n\t\t\tthis.value === value.value\n\t\t);\n\t}\n\n\ttoRuntime( shape: EShape ): EShapeActionRuntimeChangeTextText | EShapeActionRuntimeChangeTextNumber {\n\t\tswitch( this.subtype ) {\n\t\tcase EShapeActionValueChangeTextType.TEXT:\n\t\t\treturn new EShapeActionRuntimeChangeTextText( this );\n\t\tcase EShapeActionValueChangeTextType.NUMBER:\n\t\t\treturn new EShapeActionRuntimeChangeTextNumber( this, shape.text.value );\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\tconst valueId = manager.add(this.value);\n\t\treturn manager.add(\n\t\t\t`[${this.type},${conditionId},${this.subtype},${valueId}]`\n\t\t);\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueChangeTextSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueChangeText {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst value = EShapeActionValues.toResource( 3, serialized, manager.resources );\n\t\treturn new EShapeActionValueChangeText( serialized[ 2 ], condition, value );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueMiscType {\n\tINPUT\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueEmitEvent } from \"./e-shape-action-value-emit-event\";\n\nconst nameDefault = (): string | null => null;\n\nexport class EShapeActionRuntimeEmitEvent extends EShapeActionRuntimeConditional {\n\tprotected name: EShapeActionExpression<string | null>;\n\n\tconstructor( value: EShapeActionValueEmitEvent ) {\n\t\tsuper( value, EShapeRuntimeReset.NONE );\n\t\tthis.name = this.toExpression( value.name, nameDefault, \"null\" );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst name = this.name( shape, time );\n\t\t\tif( name != null ) {\n\t\t\t\tthis.emit( name, shape );\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeEmitEvent } from \"./e-shape-action-runtime-emit-event\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueBase } from \"./e-shape-action-value-base\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueEmitEventSerialized = [\n\tEShapeActionValueType.EMIT_EVENT, number, number\n];\n\nexport class EShapeActionValueEmitEvent extends EShapeActionValueBase {\n\treadonly name: string;\n\n\tconstructor( condition: string, name: string ) {\n\t\tsuper( EShapeActionValueType.EMIT_EVENT, condition );\n\t\tthis.name = name;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueEmitEvent) &&\n\t\t\tthis.name === value.name\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeEmitEvent {\n\t\treturn new EShapeActionRuntimeEmitEvent( this );\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\tconst nameId = manager.add(this.name);\n\t\treturn manager.add( `[${this.type},${conditionId},${nameId}]` );\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueEmitEventSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueEmitEvent {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst name = EShapeActionValues.toResource( 2, serialized, manager.resources );\n\t\treturn new EShapeActionValueEmitEvent( condition, name );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix, Point, Rectangle, Renderer } from \"pixi.js\";\nimport { DApplications } from \"../../d-applications\";\nimport { DControllers } from \"../../d-controllers\";\nimport { DynamicSDFFontAtlas } from \"../../util/dynamic-sdf-font-atlas\";\nimport { UtilKeyboardEvent } from \"../../util/util-keyboard-event\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeTextWeight } from \"../e-shape-text\";\n\ntype OnChange = ( shape: EShape, value: string ) => void;\ntype OnInput = ( shape: EShape, value: string ) => void;\n\nexport class EShapeActionRuntimeMiscInputData {\n\tprotected input: HTMLInputElement | null;\n\tprotected shape: EShape | null;\n\tprotected value: string;\n\tprotected onChange?: OnChange;\n\tprotected onInput?: OnInput;\n\n\tprotected point: Point;\n\tprotected rect: Rectangle;\n\n\tprotected _onInputKeyDownBound!: ( e: KeyboardEvent ) => void;\n\tprotected _onInputBlurBound!: ( e: FocusEvent ) => void;\n\tprotected _updateInputBound!: () => void;\n\tprotected _onInputChangeBound!: ( e: Event ) => void;\n\tprotected _onInputInputBound!: ( e: Event ) => void;\n\tprotected _updateInputBoundRenderer!: Renderer | null;\n\n\tconstructor() {\n\t\tthis.input = null;\n\t\tthis.shape = null;\n\t\tthis.value = \"\";\n\n\t\tthis.point = new Point();\n\t\tthis.rect = new Rectangle();\n\n\t\tthis._onInputKeyDownBound = ( e: KeyboardEvent ) => {\n\t\t\tthis.onInputKeyDown( e );\n\t\t};\n\n\t\tthis._onInputBlurBound = ( e: FocusEvent ) => {\n\t\t\tthis.onInputBlur( e );\n\t\t};\n\n\t\tthis._updateInputBound = () => {\n\t\t\tthis.updateInput();\n\t\t};\n\n\t\tthis._onInputChangeBound = () => {\n\t\t\tthis.onInputChange();\n\t\t};\n\n\t\tthis._onInputInputBound = ( e ) => {\n\t\t\tthis.onInputInput( e );\n\t\t};\n\n\t\tthis._updateInputBoundRenderer = null;\n\t}\n\n\tprotected getInput(): HTMLInputElement | null {\n\t\tif( this.input == null ) {\n\t\t\tDApplications.getInstance().getRootElement().appendChild(\n\t\t\t\tthis.input = this.createInput()\n\t\t\t);\n\t\t}\n\t\treturn this.input;\n\t}\n\n\tprotected createInput(): HTMLInputElement {\n\t\tconst result = document.createElement( \"input\" );\n\t\tresult.setAttribute( \"spellcheck\", \"false\" );\n\t\treturn result;\n\t}\n\n\tprotected getInputType(): string {\n\t\treturn \"text\";\n\t}\n\n\tprotected initInput( shape: EShape, input: HTMLInputElement, value: string ): void {\n\t\tinput.type = this.getInputType();\n\t\tinput.value = value;\n\t\tinput.addEventListener( \"keydown\", this._onInputKeyDownBound );\n\t\tinput.addEventListener( \"blur\", this._onInputBlurBound );\n\t\tinput.addEventListener( \"change\", this._onInputChangeBound );\n\t\tinput.addEventListener( \"input\", this._onInputInputBound );\n\n\t\t// Style\n\t\tinput.setAttribute( \"style\", this.getInputStyle( shape ) );\n\n\t\t// ReadOnly\n\t\tif( shape.readonly ) {\n\t\t\tinput.setAttribute( \"readonly\", \"readonly\" );\n\t\t} else {\n\t\t\tinput.removeAttribute( \"readonly\" );\n\t\t}\n\n\t\t// Disabled\n\t\tif( shape.disabled ) {\n\t\t\tinput.setAttribute( \"disabled\", \"disabled\" );\n\t\t} else {\n\t\t\tinput.removeAttribute( \"disabled\" );\n\t\t}\n\t}\n\n\tprotected getInputStyleBackground(): string {\n\t\treturn `background-color: transparent;`;\n\t}\n\n\tprotected getInputStyleBorder(): string {\n\t\treturn `border: none; box-sizing: border-box;`;\n\t}\n\n\tprotected getInputStylePadding( shape: EShape, scale: number ): string {\n\t\tconst padding = shape.text.padding;\n\t\tconst paddingVertical = 0;\n\t\tconst paddingHorizontal = padding.horizontal * scale;\n\t\treturn `padding: ${paddingVertical}px ${paddingHorizontal}px ${paddingVertical}px ${paddingHorizontal}px;`;\n\t}\n\n\tprotected getInputStyleOutline(): string {\n\t\treturn `outline: none;`;\n\t}\n\n\tprotected getInputStylePosition( rect: Rectangle, matrix: Matrix ): string {\n\t\treturn `position: absolute;` +\n\t\t\t`left: ${rect.x}px;` +\n\t\t\t`top: ${rect.y}px;` +\n\t\t\t`width: ${rect.width}px;` +\n\t\t\t`height: ${rect.height}px;` +\n\t\t\t`line-height: ${rect.height}px;` +\n\t\t\t`transform: matrix(${matrix.a},${matrix.b},${matrix.c},${matrix.d},${matrix.tx},${matrix.ty});`;\n\t}\n\n\tprotected getInputStyleText( shape: EShape, rect: Rectangle, scale: number ): string {\n\t\tconst text = shape.text;\n\t\treturn `font-family: ${DynamicSDFFontAtlas.toFontFamily( text.family )};` +\n\t\t\t`font-size: ${text.size * scale}px;` +\n\t\t\t`font-weight: ${text.weight === EShapeTextWeight.NORMAL ? \"normal\" : \"bold\" };` +\n\t\t\t`color: #${text.color.toString( 16 )};`;\n\t}\n\n\tprotected getInputStyleMargin( shape: EShape, rect: Rectangle, scale: number ): string {\n\t\treturn `margin: 0;`;\n\t}\n\n\tprotected getInputStyle( shape: EShape ): string {\n\t\tconst pivot = shape.transform.pivot;\n\t\tconst size = shape.size;\n\t\tconst sizeX = size.x;\n\t\tconst sizeY = size.y;\n\t\tconst rect = this.rect;\n\t\trect.x = -0.5 * sizeX + pivot.x;\n\t\trect.y = -0.5 * sizeY + pivot.y;\n\t\trect.width = sizeX;\n\t\trect.height = sizeY;\n\n\t\tshape.updateTransform();\n\t\tconst scale = 1.0;\n\t\tconst worldTransform = shape.transform.worldTransform;\n\n\t\treturn this.getInputStylePosition( rect, worldTransform ) +\n\t\t\tthis.getInputStyleMargin( shape, rect, scale ) +\n\t\t\tthis.getInputStyleText( shape, rect, scale ) +\n\t\t\tthis.getInputStyleBackground() +\n\t\t\tthis.getInputStyleBorder() +\n\t\t\tthis.getInputStylePadding( shape, scale ) +\n\t\t\tthis.getInputStyleOutline();\n\t}\n\n\tprotected onInputKeyDown( e: KeyboardEvent ): void {\n\t\tif( UtilKeyboardEvent.isFocusKey( e ) ) {\n\t\t\tconst shape = this.shape;\n\t\t\tif( shape != null ) {\n\t\t\t\tthis.onInputChange();\n\t\t\t\tthis.hide();\n\n\t\t\t\tconst focusController = DControllers.getFocusController();\n\t\t\t\tconst direction = UtilKeyboardEvent.getFocusDirection( e );\n\t\t\t\tconst focusable = focusController.findFocusable( shape, false, false, direction );\n\t\t\t\tif( focusable != null ) {\n\t\t\t\t\tDApplications.getInstance().view.focus();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tfocusController.setFocused( focusable, true, true );\n\t\t\t\t}\n\t\t\t}\n\t\t} else if( UtilKeyboardEvent.isOkKey( e ) ) {\n\t\t\tthis.onInputChange();\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\tprotected onInputBlur( e: FocusEvent ): void {\n\t\tthis.onInputChange();\n\t\tthis.hide();\n\t}\n\n\tprotected onInputInput( e: Event ): void {\n\t\tif( e.target instanceof HTMLInputElement ) {\n\t\t\tconst shape = this.shape;\n\t\t\tconst onInput = this.onInput;\n\t\t\tif( shape != null && onInput != null ) {\n\t\t\t\tonInput( shape, e.target.value );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected updateInput(): void {\n\t\tconst shape = this.shape;\n\t\tif( shape != null ) {\n\t\t\tif( shape.visible ) {\n\t\t\t\tconst input = this.input;\n\t\t\t\tif( input != null ) {\n\t\t\t\t\tinput.setAttribute( \"style\", this.getInputStyle( shape ) );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\tisShown( shape: EShape ): boolean {\n\t\treturn ( this.shape === shape );\n\t}\n\n\tshow(\n\t\tnewShape: EShape, value: string,\n\t\tonChange?: OnChange, onInput?: OnInput\n\t): void {\n\t\tconst oldShape = this.shape;\n\t\tif( oldShape != null && oldShape !== newShape ) {\n\t\t\tthis.hide();\n\t\t}\n\t\tif( this.shape == null ) {\n\t\t\tthis.shape = newShape;\n\t\t\tthis.value = value;\n\t\t\tthis.onChange = onChange;\n\t\t\tthis.onInput = onInput;\n\n\t\t\tconst text = newShape.text;\n\t\t\tif( text != null ) {\n\t\t\t\ttext.enable = false;\n\t\t\t}\n\n\t\t\tconst app = DApplications.getInstance();\n\t\t\tconst input = this.getInput();\n\t\t\tif( input != null ) {\n\t\t\t\tthis.initInput( newShape, input, value );\n\n\t\t\t\tconst updateInputBound = this._updateInputBound;\n\t\t\t\tconst renderer = this._updateInputBoundRenderer;\n\t\t\t\tif( renderer != null ) {\n\t\t\t\t\trenderer.off( \"postrender\", updateInputBound );\n\t\t\t\t}\n\t\t\t\tthis._updateInputBoundRenderer = app.renderer;\n\t\t\t\tapp.renderer.on( \"postrender\", updateInputBound );\n\n\t\t\t\tinput.style.display = \"\";\n\t\t\t\tinput.focus();\n\t\t\t\tinput.select();\n\t\t\t}\n\n\t\t\tDApplications.update();\n\t\t}\n\t}\n\n\thide(): void {\n\t\tconst shape = this.shape;\n\t\tif( shape != null ) {\n\t\t\tthis.shape = null;\n\t\t\tthis.value = \"\";\n\n\t\t\tconst text = shape.text;\n\t\t\tif( text != null ) {\n\t\t\t\ttext.enable = true;\n\t\t\t}\n\n\t\t\tconst input = this.input;\n\t\t\tif( input != null ) {\n\t\t\t\tinput.removeEventListener( \"keydown\", this._onInputKeyDownBound );\n\t\t\t\tinput.removeEventListener( \"blur\", this._onInputBlurBound );\n\t\t\t\tinput.removeEventListener( \"change\", this._onInputChangeBound );\n\t\t\t\tinput.removeEventListener( \"input\", this._onInputInputBound );\n\t\t\t\tinput.style.display = \"none\";\n\t\t\t}\n\n\t\t\tconst renderer = this._updateInputBoundRenderer;\n\t\t\tif( renderer != null ) {\n\t\t\t\tthis._updateInputBoundRenderer = null;\n\t\t\t\trenderer.off( \"postrender\", this._updateInputBound );\n\t\t\t}\n\n\t\t\tDApplications.update();\n\t\t}\n\t}\n\n\tonInputChange(): void {\n\t\tconst shape = this.shape;\n\t\tconst input = this.input;\n\t\tconst onChange = this.onChange;\n\t\tif( shape != null && input != null && onChange != null ) {\n\t\t\tconst newValue = input.value;\n\t\t\tif( this.value !== newValue ) {\n\t\t\t\tonChange( shape, newValue );\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime } from \"../e-shape-runtime\";\nimport { EShapeActionRuntime } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeMiscInputData } from \"./e-shape-action-runtime-misc-input-data\";\n\nexport class EShapeActionRuntimeMiscInput extends EShapeActionRuntime {\n\tstatic data: EShapeActionRuntimeMiscInputData | null = null;\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( ! shape.disabled ) {\n\t\t\tconst data = EShapeActionRuntimeMiscInput.getData();\n\t\t\tif( shape.focused ) {\n\t\t\t\tif( ! data.isShown( shape ) ) {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tdata.show( shape, shape.text.value, ( _: EShape, value: string ): void => {\n\t\t\t\t\t\t\tshape.text.value = value;\n\t\t\t\t\t\t\tthis.emit( \"change\", shape, value );\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( data.isShown( shape ) ) {\n\t\t\t\t\tdata.onInputChange();\n\t\t\t\t\tdata.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic getData(): EShapeActionRuntimeMiscInputData {\n\t\tif( EShapeActionRuntimeMiscInput.data == null ) {\n\t\t\tEShapeActionRuntimeMiscInput.data = new EShapeActionRuntimeMiscInputData();\n\t\t}\n\t\treturn EShapeActionRuntimeMiscInput.data;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntime } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeMiscInput } from \"./e-shape-action-runtime-misc-input\";\nimport { EShapeActionValueMiscType } from \"./e-shape-action-value-misc-type\";\nimport { EShapeActionValueSubtyped } from \"./e-shape-action-value-subtyped\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueMiscSerialized = [\n\tEShapeActionValueType.MISC, number, EShapeActionValueMiscType\n];\n\nexport class EShapeActionValueMisc extends EShapeActionValueSubtyped<EShapeActionValueMiscType> {\n\tconstructor( subtype: EShapeActionValueMiscType, condition: string ) {\n\t\tsuper( EShapeActionValueType.MISC, condition, subtype );\n\t}\n\n\ttoRuntime( shape: EShape ): EShapeActionRuntime {\n\t\tswitch( this.subtype ) {\n\t\tcase EShapeActionValueMiscType.INPUT:\n\t\t\treturn new EShapeActionRuntimeMiscInput();\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\treturn manager.add( `[${this.type},${conditionId},${this.subtype}]` );\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueMiscSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueMisc {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\treturn new EShapeActionValueMisc( serialized[ 2 ], condition );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueOpenType {\n\tFLOW,\n\tPAGE,\n\tPAGE_INPLACE\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueOpen } from \"./e-shape-action-value-open\";\n\nconst targetDefault = (): string | null => null;\n\nexport class EShapeActionRuntimeOpen extends EShapeActionRuntimeConditional {\n\tprotected readonly target: EShapeActionExpression<string | null>;\n\n\tconstructor( value: EShapeActionValueOpen, reset: EShapeRuntimeReset ) {\n\t\tsuper( value, reset );\n\t\tthis.target = this.toExpression( value.target, targetDefault, \"null\" );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplications } from \"../../d-applications\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeOpen } from \"./e-shape-action-runtime-open\";\nimport { EShapeActionValueOpen } from \"./e-shape-action-value-open\";\n\nexport class EShapeActionRuntimeOpenFlow extends EShapeActionRuntimeOpen {\n\tconstructor( value: EShapeActionValueOpen ) {\n\t\tsuper( value, EShapeRuntimeReset.NONE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst target = this.target( shape, time );\n\t\t\tif( target != null ) {\n\t\t\t\tconst application = DApplications.getInstance() as any;\n\t\t\t\tif( \"opener\" in application ) {\n\t\t\t\t\tapplication.opener( target );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeOpen } from \"./e-shape-action-runtime-open\";\nimport { EShapeActionValueOpen } from \"./e-shape-action-value-open\";\n\nexport class EShapeActionRuntimeOpenPage extends EShapeActionRuntimeOpen {\n\tconstructor( value: EShapeActionValueOpen ) {\n\t\tsuper( value, EShapeRuntimeReset.NONE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst target = this.target( shape, time );\n\t\t\tif( target != null ) {\n\t\t\t\twindow.open( target );\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeOpen } from \"./e-shape-action-runtime-open\";\nimport { EShapeActionValueOpen } from \"./e-shape-action-value-open\";\n\nexport class EShapeActionRuntimeOpenPageInplace extends EShapeActionRuntimeOpen {\n\tconstructor( value: EShapeActionValueOpen ) {\n\t\tsuper( value, EShapeRuntimeReset.NONE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst target = this.target( shape, time );\n\t\t\tif( target != null ) {\n\t\t\t\twindow.location.href = target;\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeOpen } from \"./e-shape-action-runtime-open\";\nimport { EShapeActionRuntimeOpenFlow } from \"./e-shape-action-runtime-open-flow\";\nimport { EShapeActionRuntimeOpenPage } from \"./e-shape-action-runtime-open-page\";\nimport { EShapeActionRuntimeOpenPageInplace } from \"./e-shape-action-runtime-open-page-inplace\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueOpenType } from \"./e-shape-action-value-open-type\";\nimport { EShapeActionValueSubtyped } from \"./e-shape-action-value-subtyped\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueOpenSerialized = [\n\tEShapeActionValueType.OPEN, number, EShapeActionValueOpenType, number\n];\n\nexport class EShapeActionValueOpen extends EShapeActionValueSubtyped<EShapeActionValueOpenType> {\n\treadonly target: string;\n\n\tconstructor( subtype: EShapeActionValueOpenType, condition: string, target: string ) {\n\t\tsuper( EShapeActionValueType.OPEN, condition, subtype );\n\t\tthis.target = target;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueOpen) &&\n\t\t\tthis.target === value.target\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeOpen {\n\t\tswitch( this.subtype ) {\n\t\tcase EShapeActionValueOpenType.FLOW:\n\t\t\treturn new EShapeActionRuntimeOpenFlow( this );\n\t\tcase EShapeActionValueOpenType.PAGE:\n\t\t\treturn new EShapeActionRuntimeOpenPage( this );\n\t\tcase EShapeActionValueOpenType.PAGE_INPLACE:\n\t\t\treturn new EShapeActionRuntimeOpenPageInplace( this );\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\tconst targetId = manager.add(this.target);\n\t\treturn manager.add( `[${this.type},${conditionId},${this.subtype},${targetId}]` );\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueOpenSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueOpen {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst target = EShapeActionValues.toResource( 3, serialized, manager.resources );\n\t\treturn new EShapeActionValueOpen( serialized[ 2 ], condition, target );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueShowHideType {\n\tSHOW,\n\tHIDE\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueShowHide } from \"./e-shape-action-value-show-hide\";\nimport { EShapeActionValueShowHideType } from \"./e-shape-action-value-show-hide-type\";\n\nexport class EShapeActionRuntimeShowHide extends EShapeActionRuntimeConditional {\n\tvisibility: boolean;\n\n\tconstructor( value: EShapeActionValueShowHide ) {\n\t\tsuper( value, EShapeRuntimeReset.VISIBILITY );\n\t\tthis.visibility = ( value.subtype === EShapeActionValueShowHideType.SHOW );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tshape.visible = this.visibility;\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueTransformMoveType {\n\tRELATIVE_X,\n\tRELATIVE_Y,\n\tABSOLUTE_X,\n\tABSOLUTE_Y,\n\tFORWARD_OR_BACKWARD,\n\tLEFT_OR_RIGHT\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueTransformType {\n\tRESIZE,\n\tMOVE,\n\tROTATE\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeShowHide } from \"./e-shape-action-runtime-show-hide\";\nimport { EShapeActionValueShowHideType } from \"./e-shape-action-value-show-hide-type\";\nimport { EShapeActionValueSubtyped } from \"./e-shape-action-value-subtyped\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueShowHideSerialized = [\n\tEShapeActionValueType.SHOW_HIDE, number, EShapeActionValueShowHideType\n];\n\nexport class EShapeActionValueShowHide extends EShapeActionValueSubtyped<EShapeActionValueShowHideType> {\n\tconstructor( subtype: EShapeActionValueShowHideType, condition: string ) {\n\t\tsuper( EShapeActionValueType.SHOW_HIDE, condition, subtype );\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeShowHide {\n\t\treturn new EShapeActionRuntimeShowHide( this );\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\treturn manager.add( `[${this.type},${conditionId},${this.subtype}]` );\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueShowHideSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueShowHide {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\treturn new EShapeActionValueShowHide( serialized[ 2 ], condition );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueTransformMove } from \"./e-shape-action-value-transform-move\";\n\nconst amountDefault = (): number => 0;\n\nexport class EShapeActionRuntimeTransformMove extends EShapeActionRuntimeConditional {\n\tprotected readonly amount: EShapeActionExpression<number>;\n\n\tconstructor( value: EShapeActionValueTransformMove, reset: EShapeRuntimeReset ) {\n\t\tsuper( value, reset );\n\t\tthis.amount = this.toExpression( value.amount, amountDefault, \"0\" );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeTransformMove } from \"./e-shape-action-runtime-transform-move\";\nimport { EShapeActionValueTransformMove } from \"./e-shape-action-value-transform-move\";\n\nexport class EShapeActionRuntimeTransformMoveAbsoluteX extends EShapeActionRuntimeTransformMove {\n\tconstructor( value: EShapeActionValueTransformMove ) {\n\t\tsuper( value, EShapeRuntimeReset.POSITION_X );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst amount = this.amount( shape, time );\n\t\t\tshape.transform.position.x = amount;\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeTransformMove } from \"./e-shape-action-runtime-transform-move\";\nimport { EShapeActionValueTransformMove } from \"./e-shape-action-value-transform-move\";\n\nexport class EShapeActionRuntimeTransformMoveAbsoluteY extends EShapeActionRuntimeTransformMove {\n\tconstructor( value: EShapeActionValueTransformMove ) {\n\t\tsuper( value, EShapeRuntimeReset.POSITION_Y );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst amount = this.amount( shape, time );\n\t\t\tshape.transform.position.y = amount;\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeTransformMove } from \"./e-shape-action-runtime-transform-move\";\nimport { EShapeActionValueTransformMove } from \"./e-shape-action-value-transform-move\";\n\nexport class EShapeActionRuntimeTransformMoveForwardOrBackward extends EShapeActionRuntimeTransformMove {\n\tconstructor( value: EShapeActionValueTransformMove ) {\n\t\tsuper( value, EShapeRuntimeReset.POSITION );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst amount = this.amount( shape, time );\n\t\t\tconst transform = shape.transform;\n\t\t\tconst position = transform.position;\n\t\t\tconst writtenPositionX = ( (runtime.written & EShapeRuntimeReset.POSITION_X) !== 0 );\n\t\t\tconst writtenPositionY = ( (runtime.written & EShapeRuntimeReset.POSITION_Y) !== 0 );\n\t\t\tconst oldPositionX = ( writtenPositionX ? position.x : runtime.x );\n\t\t\tconst oldPositionY = ( writtenPositionY ? position.y : runtime.y );\n\t\t\tshape.updateTransform();\n\t\t\tconst localTransform = shape.transform.localTransform;\n\t\t\tposition.set( oldPositionX - localTransform.c * amount, oldPositionY - localTransform.d * amount );\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeTransformMove } from \"./e-shape-action-runtime-transform-move\";\nimport { EShapeActionValueTransformMove } from \"./e-shape-action-value-transform-move\";\n\nexport class EShapeActionRuntimeTransformMoveLeftOrRight extends EShapeActionRuntimeTransformMove {\n\tconstructor( value: EShapeActionValueTransformMove ) {\n\t\tsuper( value, EShapeRuntimeReset.POSITION );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst amount = this.amount( shape, time );\n\t\t\tconst transform = shape.transform;\n\t\t\tconst position = transform.position;\n\t\t\tconst writtenPositionX = ( (runtime.written & EShapeRuntimeReset.POSITION_X) !== 0 );\n\t\t\tconst writtenPositionY = ( (runtime.written & EShapeRuntimeReset.POSITION_Y) !== 0 );\n\t\t\tconst oldPositionX = ( writtenPositionX ? position.x : runtime.x );\n\t\t\tconst oldPositionY = ( writtenPositionY ? position.y : runtime.y );\n\t\t\tshape.updateTransform();\n\t\t\tconst localTransform = shape.transform.localTransform;\n\t\t\tposition.set( oldPositionX + localTransform.a * amount, oldPositionY + localTransform.b * amount );\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeTransformMove } from \"./e-shape-action-runtime-transform-move\";\nimport { EShapeActionValueTransformMove } from \"./e-shape-action-value-transform-move\";\n\nexport class EShapeActionRuntimeTransformMoveRelativeX extends EShapeActionRuntimeTransformMove {\n\tconstructor( value: EShapeActionValueTransformMove ) {\n\t\tsuper( value, EShapeRuntimeReset.POSITION_X );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst amount = this.amount( shape, time );\n\t\t\tconst writtenPositionX = ( (runtime.written & EShapeRuntimeReset.POSITION_X) !== 0 );\n\t\t\tconst position = shape.transform.position;\n\t\t\tconst oldPositionX = ( writtenPositionX ? position.x : runtime.x );\n\t\t\tposition.x = oldPositionX + amount;\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeTransformMove } from \"./e-shape-action-runtime-transform-move\";\nimport { EShapeActionValueTransformMove } from \"./e-shape-action-value-transform-move\";\n\nexport class EShapeActionRuntimeTransformMoveRelativeY extends EShapeActionRuntimeTransformMove {\n\tconstructor( action: EShapeActionValueTransformMove ) {\n\t\tsuper( action, EShapeRuntimeReset.POSITION_Y );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst amount = this.amount( shape, time );\n\t\t\tconst writtenPositionY = ( (runtime.written & EShapeRuntimeReset.POSITION_Y) !== 0 );\n\t\t\tconst position = shape.transform.position;\n\t\t\tconst oldPositionY = ( writtenPositionY ? position.y : runtime.y );\n\t\t\tposition.y = oldPositionY + amount;\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","import { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueSubtyped } from \"./e-shape-action-value-subtyped\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\n\nexport abstract class EShapeActionValueOpetyped<\n\tSUBTYPE extends number,\n\tOPETYPE extends number\n> extends EShapeActionValueSubtyped<SUBTYPE> {\n\treadonly opetype: OPETYPE;\n\n\tconstructor( type: EShapeActionValueType, condition: string, subtype: SUBTYPE, opetype: OPETYPE ) {\n\t\tsuper( type, condition, subtype );\n\t\tthis.opetype = opetype;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueOpetyped) &&\n\t\t\tthis.opetype === value.opetype\n\t\t);\n\t}\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeTransformMove } from \"./e-shape-action-runtime-transform-move\";\nimport { EShapeActionRuntimeTransformMoveAbsoluteX } from \"./e-shape-action-runtime-transform-move-absolute-x\";\nimport { EShapeActionRuntimeTransformMoveAbsoluteY } from \"./e-shape-action-runtime-transform-move-absolute-y\";\nimport {\n\tEShapeActionRuntimeTransformMoveForwardOrBackward\n} from \"./e-shape-action-runtime-transform-move-forward-or-backward\";\nimport { EShapeActionRuntimeTransformMoveLeftOrRight } from \"./e-shape-action-runtime-transform-move-left-or-right\";\nimport { EShapeActionRuntimeTransformMoveRelativeX } from \"./e-shape-action-runtime-transform-move-relative-x\";\nimport { EShapeActionRuntimeTransformMoveRelativeY } from \"./e-shape-action-runtime-transform-move-relative-y\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueOpetyped } from \"./e-shape-action-value-opetyped\";\nimport { EShapeActionValueTransformMoveType } from \"./e-shape-action-value-transform-move-type\";\nimport { EShapeActionValueTransformType } from \"./e-shape-action-value-transform-type\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueTransformMoveSerialized = [\n\tEShapeActionValueType.TRANSFORM, number, EShapeActionValueTransformType.MOVE,\n\tEShapeActionValueTransformMoveType, number\n];\n\nexport class EShapeActionValueTransformMove\n\textends EShapeActionValueOpetyped<EShapeActionValueTransformType, EShapeActionValueTransformMoveType> {\n\treadonly amount: string;\n\n\tconstructor( opetype: EShapeActionValueTransformMoveType, condition: string, amount: string ) {\n\t\tsuper( EShapeActionValueType.TRANSFORM, condition, EShapeActionValueTransformType.MOVE, opetype );\n\t\tthis.amount = amount;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueTransformMove) &&\n\t\t\tthis.amount === value.amount\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeTransformMove {\n\t\tswitch( this.opetype ) {\n\t\tcase EShapeActionValueTransformMoveType.ABSOLUTE_X:\n\t\t\treturn new EShapeActionRuntimeTransformMoveAbsoluteX( this );\n\t\tcase EShapeActionValueTransformMoveType.ABSOLUTE_Y:\n\t\t\treturn new EShapeActionRuntimeTransformMoveAbsoluteY( this );\n\t\tcase EShapeActionValueTransformMoveType.FORWARD_OR_BACKWARD:\n\t\t\treturn new EShapeActionRuntimeTransformMoveForwardOrBackward( this );\n\t\tcase EShapeActionValueTransformMoveType.LEFT_OR_RIGHT:\n\t\t\treturn new EShapeActionRuntimeTransformMoveLeftOrRight( this );\n\t\tcase EShapeActionValueTransformMoveType.RELATIVE_X:\n\t\t\treturn new EShapeActionRuntimeTransformMoveRelativeX( this );\n\t\tcase EShapeActionValueTransformMoveType.RELATIVE_Y:\n\t\t\treturn new EShapeActionRuntimeTransformMoveRelativeY( this );\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\tconst amountId = manager.add(this.amount);\n\t\treturn manager.add(\n\t\t\t`[${this.type},${conditionId},${this.subtype},${this.opetype},${amountId}]`\n\t\t);\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueTransformMoveSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueTransformMove {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst amount = EShapeActionValues.toResource( 4, serialized, manager.resources );\n\t\treturn new EShapeActionValueTransformMove( serialized[ 3 ], condition, amount );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueTransformResizeType {\n\tRELATIVE_SIZE,\n\tRELATIVE_HEIGHT,\n\tRELATIVE_WIDTH,\n\tABSOLUTE_SIZE,\n\tABSOLUTE_HEIGHT,\n\tABSOLUTE_WIDTH\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Point } from \"pixi.js\";\nimport { EShape } from \"./e-shape\";\n\nexport class EShapeSizes {\n\tstatic toRounded( value: number ): number {\n\t\treturn Math.round( value * 100 ) / 100;\n\t}\n\n\tstatic toNormalized( size: number ): number {\n\t\tconst THRESHOLD = 0.001;\n\t\tif( Math.abs( size ) < THRESHOLD ) {\n\t\t\treturn ( size < 0 ? -THRESHOLD : +THRESHOLD );\n\t\t}\n\t\treturn EShapeSizes.toRounded( size );\n\t}\n\n\tstatic resize( shape: EShape, from: Point, to: Point, centerMode: boolean, isPerfect: boolean ): void {\n\t\tshape.disallowUploadedUpdate();\n\t\tconst position = shape.transform.position;\n\t\tif( centerMode ) {\n\t\t\tconst dx = Math.abs(to.x - from.x);\n\t\t\tconst dy = Math.abs(to.y - from.y);\n\t\t\tif (isPerfect) {\n\t\t\t\tconst hsize = Math.max(dx, dy);\n\t\t\t\tconst size = hsize + hsize;\n\t\t\t\tshape.size.set(\n\t\t\t\t\tEShapeSizes.toNormalized( size ),\n\t\t\t\t\tEShapeSizes.toNormalized( size )\n\t\t\t\t);\n\t\t\t\tposition.set(\n\t\t\t\t\tEShapeSizes.toRounded( from.x ),\n\t\t\t\t\tEShapeSizes.toRounded( from.y )\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tshape.size.set(\n\t\t\t\t\tEShapeSizes.toNormalized( dx + dx ),\n\t\t\t\t\tEShapeSizes.toNormalized( dy + dy )\n\t\t\t\t);\n\t\t\t\tposition.set(\n\t\t\t\t\tEShapeSizes.toRounded( from.x ),\n\t\t\t\t\tEShapeSizes.toRounded( from.y )\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tif( isPerfect ) {\n\t\t\t\tconst dx = to.x - from.x;\n\t\t\t\tconst dy = to.y - from.y;\n\t\t\t\tconst size = Math.max(Math.abs(dx), Math.abs(dy));\n\t\t\t\tconst x2 = from.x + (dx < 0 ? -size : +size);\n\t\t\t\tconst y2 = from.y + (dy < 0 ? -size : +size);\n\t\t\t\tconst hsize = size * 0.5;\n\t\t\t\tconst x = Math.min(from.x, x2) + hsize;\n\t\t\t\tconst y = Math.min(from.y, y2) + hsize;\n\t\t\t\tshape.size.set(\n\t\t\t\t\tEShapeSizes.toNormalized( size ),\n\t\t\t\t\tEShapeSizes.toNormalized( size )\n\t\t\t\t);\n\t\t\t\tposition.set(\n\t\t\t\t\tEShapeSizes.toRounded( x ),\n\t\t\t\t\tEShapeSizes.toRounded( y )\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst x0 = Math.min(from.x, to.x);\n\t\t\t\tconst y0 = Math.min(from.y, to.y);\n\t\t\t\tconst x1 = Math.max(from.x, to.x);\n\t\t\t\tconst y1 = Math.max(from.y, to.y);\n\t\t\t\tconst width = x1 - x0;\n\t\t\t\tconst height = y1 - y0;\n\t\t\t\tconst px = width * 0.5;\n\t\t\t\tconst py = height * 0.5;\n\t\t\t\tshape.size.set(\n\t\t\t\t\tEShapeSizes.toNormalized( width ),\n\t\t\t\t\tEShapeSizes.toNormalized( height )\n\t\t\t\t);\n\t\t\t\tposition.set(\n\t\t\t\t\tEShapeSizes.toRounded( x0 + px ),\n\t\t\t\t\tEShapeSizes.toRounded( y0 + py )\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tshape.allowUploadedUpdate();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueTransformResize } from \"./e-shape-action-value-transform-resize\";\nimport { EShapeActionValueTransformResizeType } from \"./e-shape-action-value-transform-resize-type\";\n\nconst sizeRelativeDefault = (): number => 1;\nconst sizeAbsoluteDefault = (): number => 100;\n\nexport class EShapeActionRuntimeTransformResize extends EShapeActionRuntimeConditional {\n\tprotected readonly size: EShapeActionExpression<number>;\n\n\tconstructor( value: EShapeActionValueTransformResize, reset: EShapeRuntimeReset ) {\n\t\tsuper( value, reset );\n\t\tswitch( value.opetype ) {\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_SIZE:\n\t\t\tthis.size = this.toExpression( value.amount, sizeRelativeDefault, \"1\" );\n\t\t\tbreak;\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_SIZE:\n\t\t\tthis.size = this.toExpression( value.amount, sizeAbsoluteDefault, \"100\" );\n\t\t\tbreak;\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_HEIGHT:\n\t\t\tthis.size = this.toExpression( value.amount, sizeRelativeDefault, \"1\" );\n\t\t\tbreak;\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_HEIGHT:\n\t\t\tthis.size = this.toExpression( value.amount, sizeAbsoluteDefault, \"100\" );\n\t\t\tbreak;\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_WIDTH:\n\t\t\tthis.size = this.toExpression( value.amount, sizeRelativeDefault, \"1\" );\n\t\t\tbreak;\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_WIDTH:\n\t\t\tthis.size = this.toExpression( value.amount, sizeAbsoluteDefault, \"100\" );\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthis.size = sizeRelativeDefault;\n\t\t}\n\t}\n\n\tprotected adjustPosition(\n\t\tshape: EShape, runtime: EShapeRuntime,\n\t\tdsx: number, dsy: number,\n\t\toriginX: number, originY: number\n\t): void {\n\t\tconst dx = ( -0.5 + originX ) * dsx;\n\t\tconst dy = ( -0.5 + originY ) * dsy;\n\t\tshape.updateTransform();\n\t\tconst transform = shape.transform;\n\t\tconst position = transform.position;\n\t\tconst localTransform = transform.localTransform;\n\t\tconst writtenPositionX = ( (runtime.written & EShapeRuntimeReset.POSITION_X) !== 0 );\n\t\tconst writtenPositionY = ( (runtime.written & EShapeRuntimeReset.POSITION_Y) !== 0 );\n\t\tconst oldPositionX = ( writtenPositionX ? position.x : runtime.x );\n\t\tconst oldPositionY = ( writtenPositionY ? position.y : runtime.y );\n\t\truntime.written |= EShapeRuntimeReset.POSITION;\n\t\tposition.set(\n\t\t\toldPositionX + dx * localTransform.a + dy * localTransform.c,\n\t\t\toldPositionY + dx * localTransform.b + dy * localTransform.d\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueTransformRotateType {\n\tRELATIVE,\n\tABSOLUTE\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeSizes } from \"../e-shape-sizes\";\nimport { EShapeActionRuntimeTransformResize } from \"./e-shape-action-runtime-transform-resize\";\nimport { EShapeActionValueTransformResize } from \"./e-shape-action-value-transform-resize\";\n\nexport class EShapeActionRuntimeTransformResizeHeightAbsolute extends EShapeActionRuntimeTransformResize {\n\tprotected origin: number;\n\n\tconstructor( value: EShapeActionValueTransformResize ) {\n\t\tsuper( value, EShapeRuntimeReset.HEIGHT );\n\t\tthis.origin = value.originY;\n\t\tthis.reset |= EShapeRuntimeReset.POSITION;\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst sizeAbsolute = this.size( shape, time );\n\t\t\tconst size = shape.size;\n\t\t\tconst writtenHeight = ( (runtime.written & EShapeRuntimeReset.HEIGHT) !== 0 );\n\t\t\tconst oldSizeY = (writtenHeight ? size.y : runtime.size.y);\n\t\t\tsize.y = EShapeSizes.toNormalized( sizeAbsolute );\n\t\t\truntime.written |= EShapeRuntimeReset.HEIGHT;\n\t\t\tthis.adjustPosition(\n\t\t\t\tshape, runtime,\n\t\t\t\t0, oldSizeY - size.y,\n\t\t\t\t0.5, this.origin\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeSizes } from \"../e-shape-sizes\";\nimport { EShapeActionRuntimeTransformResize } from \"./e-shape-action-runtime-transform-resize\";\nimport { EShapeActionValueTransformResize } from \"./e-shape-action-value-transform-resize\";\n\nexport class EShapeActionRuntimeTransformResizeHeightRelative extends EShapeActionRuntimeTransformResize {\n\tprotected origin: number;\n\n\tconstructor( value: EShapeActionValueTransformResize ) {\n\t\tsuper( value, EShapeRuntimeReset.HEIGHT );\n\t\tthis.origin = value.originY;\n\t\tthis.reset |= EShapeRuntimeReset.POSITION;\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst sizeRelative = this.size( shape, time );\n\t\t\tconst size = shape.size;\n\t\t\tconst writtenHeight = ( (runtime.written & EShapeRuntimeReset.HEIGHT) !== 0 );\n\t\t\tconst oldSizeY = (writtenHeight ? size.y : runtime.size.y);\n\t\t\tsize.y = EShapeSizes.toNormalized( oldSizeY * sizeRelative );\n\t\t\truntime.written |= EShapeRuntimeReset.HEIGHT;\n\t\t\tthis.adjustPosition(\n\t\t\t\tshape, runtime,\n\t\t\t\t0, oldSizeY - size.y,\n\t\t\t\t0.5, this.origin\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeSizes } from \"../e-shape-sizes\";\nimport { EShapeActionRuntimeTransformResize } from \"./e-shape-action-runtime-transform-resize\";\nimport { EShapeActionValueTransformResize } from \"./e-shape-action-value-transform-resize\";\n\nexport class EShapeActionRuntimeTransformResizeSizeAbsolute extends EShapeActionRuntimeTransformResize {\n\tprotected originX: number;\n\tprotected originY: number;\n\n\tconstructor( value: EShapeActionValueTransformResize ) {\n\t\tsuper( value, EShapeRuntimeReset.SIZE );\n\t\tthis.originX = value.originX;\n\t\tthis.originY = value.originY;\n\t\tthis.reset |= EShapeRuntimeReset.POSITION;\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst sizeAbsolute = EShapeSizes.toNormalized( this.size( shape, time ) );\n\t\t\tconst size = shape.size;\n\t\t\tconst writtenWidth = ( (runtime.written & EShapeRuntimeReset.WIDTH) !== 0 );\n\t\t\tconst writtenHeight = ( (runtime.written & EShapeRuntimeReset.HEIGHT) !== 0 );\n\t\t\tconst oldSizeX = (writtenWidth ? size.x : runtime.size.x);\n\t\t\tconst oldSizeY = (writtenHeight ? size.y : runtime.size.y);\n\t\t\tsize.set( sizeAbsolute, sizeAbsolute );\n\t\t\truntime.written |= EShapeRuntimeReset.SIZE;\n\t\t\tthis.adjustPosition(\n\t\t\t\tshape, runtime,\n\t\t\t\toldSizeX - size.x, oldSizeY - size.y,\n\t\t\t\tthis.originX, this.originY\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeSizes } from \"../e-shape-sizes\";\nimport { EShapeActionRuntimeTransformResize } from \"./e-shape-action-runtime-transform-resize\";\nimport { EShapeActionValueTransformResize } from \"./e-shape-action-value-transform-resize\";\n\nexport class EShapeActionRuntimeTransformResizeSizeRelative extends EShapeActionRuntimeTransformResize {\n\tprotected originX: number;\n\tprotected originY: number;\n\n\tconstructor( value: EShapeActionValueTransformResize ) {\n\t\tsuper( value, EShapeRuntimeReset.SIZE );\n\t\tthis.originX = value.originX;\n\t\tthis.originY = value.originY;\n\t\tthis.reset |= EShapeRuntimeReset.POSITION;\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst sizeRelative = this.size( shape, time );\n\t\t\tconst size = shape.size;\n\t\t\tconst writtenWidth = ( (runtime.written & EShapeRuntimeReset.WIDTH) !== 0 );\n\t\t\tconst writtenHeight = ( (runtime.written & EShapeRuntimeReset.HEIGHT) !== 0 );\n\t\t\tconst oldSizeX = (writtenWidth ? size.x : runtime.size.x);\n\t\t\tconst oldSizeY = (writtenHeight ? size.y : runtime.size.y);\n\t\t\tsize.set(\n\t\t\t\tEShapeSizes.toNormalized( oldSizeX * sizeRelative ),\n\t\t\t\tEShapeSizes.toNormalized( oldSizeY * sizeRelative )\n\t\t\t);\n\t\t\truntime.written |= EShapeRuntimeReset.SIZE;\n\t\t\tthis.adjustPosition(\n\t\t\t\tshape, runtime,\n\t\t\t\toldSizeX - size.x, oldSizeY - size.y,\n\t\t\t\tthis.originX, this.originY\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeSizes } from \"../e-shape-sizes\";\nimport { EShapeActionRuntimeTransformResize } from \"./e-shape-action-runtime-transform-resize\";\nimport { EShapeActionValueTransformResize } from \"./e-shape-action-value-transform-resize\";\n\nexport class EShapeActionRuntimeTransformResizeWidthAbsolute extends EShapeActionRuntimeTransformResize {\n\tprotected origin: number;\n\n\tconstructor( value: EShapeActionValueTransformResize ) {\n\t\tsuper( value, EShapeRuntimeReset.WIDTH );\n\t\tthis.origin = value.originX;\n\t\tthis.reset |= EShapeRuntimeReset.POSITION;\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst sizeAbsolute = this.size( shape, time );\n\t\t\tconst size = shape.size;\n\t\t\tconst writtenWidth = ( (runtime.written & EShapeRuntimeReset.WIDTH) !== 0 );\n\t\t\tconst oldSizeX = (writtenWidth ? size.x : runtime.size.x);\n\t\t\tsize.x = EShapeSizes.toNormalized( sizeAbsolute );\n\t\t\truntime.written |= EShapeRuntimeReset.WIDTH;\n\t\t\tthis.adjustPosition(\n\t\t\t\tshape, runtime,\n\t\t\t\toldSizeX - size.x, 0,\n\t\t\t\tthis.origin, 0.5\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeSizes } from \"../e-shape-sizes\";\nimport { EShapeActionRuntimeTransformResize } from \"./e-shape-action-runtime-transform-resize\";\nimport { EShapeActionValueTransformResize } from \"./e-shape-action-value-transform-resize\";\n\nexport class EShapeActionRuntimeTransformResizeWidthRelative extends EShapeActionRuntimeTransformResize {\n\tprotected origin: number;\n\n\tconstructor( value: EShapeActionValueTransformResize ) {\n\t\tsuper( value, EShapeRuntimeReset.WIDTH );\n\t\tthis.origin = value.originX;\n\t\tthis.reset |= EShapeRuntimeReset.POSITION;\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst sizeRelative = this.size( shape, time );\n\t\t\tconst size = shape.size;\n\t\t\tconst writtenWidth = ( (runtime.written & EShapeRuntimeReset.WIDTH) !== 0 );\n\t\t\tconst oldSizeX = ( writtenWidth ? size.x : runtime.size.x );\n\t\t\tsize.x = EShapeSizes.toNormalized( oldSizeX * sizeRelative );\n\t\t\truntime.written |= EShapeRuntimeReset.WIDTH;\n\t\t\tthis.adjustPosition(\n\t\t\t\tshape, runtime,\n\t\t\t\toldSizeX - size.x, 0,\n\t\t\t\tthis.origin, 0.5\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeTransformResize } from \"./e-shape-action-runtime-transform-resize\";\nimport {\n\tEShapeActionRuntimeTransformResizeHeightAbsolute\n} from \"./e-shape-action-runtime-transform-resize-height-absolute\";\nimport {\n\tEShapeActionRuntimeTransformResizeHeightRelative\n} from \"./e-shape-action-runtime-transform-resize-height-relative\";\nimport {\n\tEShapeActionRuntimeTransformResizeSizeAbsolute\n} from \"./e-shape-action-runtime-transform-resize-size-absolute\";\nimport {\n\tEShapeActionRuntimeTransformResizeSizeRelative\n} from \"./e-shape-action-runtime-transform-resize-size-relative\";\nimport {\n\tEShapeActionRuntimeTransformResizeWidthAbsolute\n} from \"./e-shape-action-runtime-transform-resize-width-absolute\";\nimport {\n\tEShapeActionRuntimeTransformResizeWidthRelative\n} from \"./e-shape-action-runtime-transform-resize-width-relative\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueOpetyped } from \"./e-shape-action-value-opetyped\";\nimport { EShapeActionValueTransformResizeType } from \"./e-shape-action-value-transform-resize-type\";\nimport { EShapeActionValueTransformType } from \"./e-shape-action-value-transform-type\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueTransformResizeSerialized = [\n\tEShapeActionValueType.TRANSFORM, number, EShapeActionValueTransformType.RESIZE,\n\tEShapeActionValueTransformResizeType,\n\tnumber, number, number\n];\n\nexport class EShapeActionValueTransformResize\n\textends EShapeActionValueOpetyped<EShapeActionValueTransformType, EShapeActionValueTransformResizeType> {\n\treadonly originX: number;\n\treadonly originY: number;\n\treadonly amount: string;\n\n\tconstructor(\n\t\topetype: EShapeActionValueTransformResizeType,\n\t\tcondition: string,\n\t\toriginX: number, originY: number,\n\t\tamount: string\n\t) {\n\t\tsuper( EShapeActionValueType.TRANSFORM, condition, EShapeActionValueTransformType.RESIZE, opetype );\n\t\tthis.originX = originX;\n\t\tthis.originY = originY;\n\t\tthis.amount = amount;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueTransformResize) &&\n\t\t\tthis.originX === value.originX &&\n\t\t\tthis.originY === value.originY &&\n\t\t\tthis.amount === value.amount\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeTransformResize {\n\t\tswitch( this.opetype ) {\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_HEIGHT:\n\t\t\treturn new EShapeActionRuntimeTransformResizeHeightAbsolute( this );\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_WIDTH:\n\t\t\treturn new EShapeActionRuntimeTransformResizeWidthAbsolute( this );\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_SIZE:\n\t\t\treturn new EShapeActionRuntimeTransformResizeSizeAbsolute( this );\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_HEIGHT:\n\t\t\treturn new EShapeActionRuntimeTransformResizeHeightRelative( this );\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_WIDTH:\n\t\t\treturn new EShapeActionRuntimeTransformResizeWidthRelative( this );\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_SIZE:\n\t\t\treturn new EShapeActionRuntimeTransformResizeSizeRelative( this );\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add( this.condition );\n\t\tconst amountId = manager.add( this.amount );\n\t\treturn manager.add(\n\t\t\t`[${this.type},${conditionId},${this.subtype},${this.opetype},${this.originX},${this.originY},${amountId}]`\n\t\t);\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueTransformResizeSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueTransformResize {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst amount = EShapeActionValues.toResource( 6, serialized, manager.resources );\n\t\treturn new EShapeActionValueTransformResize(\n\t\t\tserialized[ 3 ], condition,\n\t\t\tserialized[ 4 ], serialized[ 5 ], amount\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueTransformRotate } from \"./e-shape-action-value-transform-rotate\";\n\nconst amountDefault = (): number => 0;\n\nexport class EShapeActionRuntimeTransformRotate extends EShapeActionRuntimeConditional {\n\tprotected originY: number;\n\tprotected originX: number;\n\tprotected readonly amount: EShapeActionExpression<number>;\n\n\tconstructor( value: EShapeActionValueTransformRotate, reset: EShapeRuntimeReset ) {\n\t\tsuper( value, reset );\n\t\tthis.originX = value.originX;\n\t\tthis.originY = value.originY;\n\t\tthis.amount = this.toExpression( `(${value.amount}) * (Math.PI / 180)`, amountDefault, \"0\" );\n\t}\n\n\tprotected adjustPosition(\n\t\tshape: EShape, runtime: EShapeRuntime,\n\t\toldRotation: number, newRotation: number,\n\t\toriginX: number, originY: number\n\t): void {\n\t\tconst writtenWidth = ( (runtime.written & EShapeRuntimeReset.WIDTH) !== 0 );\n\t\tconst writtenHeight = ( (runtime.written & EShapeRuntimeReset.HEIGHT) !== 0 );\n\t\tconst dx = (-0.5 + originX) * (writtenWidth ? shape.size.x : runtime.size.x);\n\t\tconst dy = (-0.5 + originY) * (writtenHeight ? shape.size.y : runtime.size.y);\n\t\tconst s = Math.sin( oldRotation ) - Math.sin( newRotation );\n\t\tconst c = Math.cos( oldRotation ) - Math.cos( newRotation );\n\t\tconst position = shape.transform.position;\n\t\tconst writtenPositionX = ( (runtime.written & EShapeRuntimeReset.POSITION_X) !== 0 );\n\t\tconst writtenPositionY = ( (runtime.written & EShapeRuntimeReset.POSITION_Y) !== 0 );\n\t\tconst oldPositionX = ( writtenPositionX ? position.x : runtime.x );\n\t\tconst oldPositionY = ( writtenPositionY ? position.y : runtime.y );\n\t\truntime.written |= EShapeRuntimeReset.POSITION;\n\t\tposition.set(\n\t\t\toldPositionX + dx * c - dy * s,\n\t\t\toldPositionY + dx * s + dy * c\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeTransformRotate } from \"./e-shape-action-runtime-transform-rotate\";\nimport { EShapeActionValueTransformRotate } from \"./e-shape-action-value-transform-rotate\";\n\nexport class EShapeActionRuntimeTransformRotateAbsolute extends EShapeActionRuntimeTransformRotate {\n\tconstructor( value: EShapeActionValueTransformRotate ) {\n\t\tsuper( value, EShapeRuntimeReset.ROTATION );\n\t\tthis.reset |= EShapeRuntimeReset.POSITION;\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst amount = this.amount( shape, time );\n\t\t\tconst transform = shape.transform;\n\t\t\tconst writtenRotation = ( (runtime.written & EShapeRuntimeReset.ROTATION) !== 0 );\n\t\t\tconst oldRotation = (writtenRotation ? transform.rotation : runtime.rotation);\n\t\t\ttransform.rotation = amount;\n\t\t\truntime.written |= EShapeRuntimeReset.ROTATION;\n\t\t\tthis.adjustPosition(\n\t\t\t\tshape, runtime,\n\t\t\t\toldRotation, amount,\n\t\t\t\tthis.originX, this.originY\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeTransformRotate } from \"./e-shape-action-runtime-transform-rotate\";\nimport { EShapeActionValueTransformRotate } from \"./e-shape-action-value-transform-rotate\";\n\nexport class EShapeActionRuntimeTransformRotateRelative extends EShapeActionRuntimeTransformRotate {\n\tconstructor( value: EShapeActionValueTransformRotate ) {\n\t\tsuper( value, EShapeRuntimeReset.ROTATION );\n\t\tthis.reset |= EShapeRuntimeReset.POSITION;\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst amount = this.amount( shape, time );\n\t\t\tconst transform = shape.transform;\n\t\t\tconst writtenRotation = ( (runtime.written & EShapeRuntimeReset.ROTATION) !== 0 );\n\t\t\tconst oldRotation = (writtenRotation ? transform.rotation : runtime.rotation);\n\t\t\ttransform.rotation = oldRotation + amount;\n\t\t\truntime.written |= EShapeRuntimeReset.ROTATION;\n\t\t\tthis.adjustPosition(\n\t\t\t\tshape, runtime,\n\t\t\t\toldRotation, transform.rotation,\n\t\t\t\tthis.originX, this.originY\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeTransformRotate } from \"./e-shape-action-runtime-transform-rotate\";\nimport { EShapeActionRuntimeTransformRotateAbsolute } from \"./e-shape-action-runtime-transform-rotate-absolute\";\nimport { EShapeActionRuntimeTransformRotateRelative } from \"./e-shape-action-runtime-transform-rotate-relative\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueOpetyped } from \"./e-shape-action-value-opetyped\";\nimport { EShapeActionValueTransformRotateType } from \"./e-shape-action-value-transform-rotate-type\";\nimport { EShapeActionValueTransformType } from \"./e-shape-action-value-transform-type\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueTransformRotateSerialized = [\n\tEShapeActionValueType.TRANSFORM, number, EShapeActionValueTransformType.ROTATE,\n\tEShapeActionValueTransformRotateType,\n\tnumber, number, number\n];\n\nexport class EShapeActionValueTransformRotate\n\textends EShapeActionValueOpetyped<EShapeActionValueTransformType, EShapeActionValueTransformRotateType> {\n\treadonly originX: number;\n\treadonly originY: number;\n\treadonly amount: string;\n\n\tconstructor(\n\t\topetype: EShapeActionValueTransformRotateType, condition: string,\n\t\toriginX: number, originY: number, amount: string\n\t) {\n\t\tsuper( EShapeActionValueType.TRANSFORM, condition, EShapeActionValueTransformType.ROTATE, opetype );\n\t\tthis.originX = originX;\n\t\tthis.originY = originY;\n\t\tthis.amount = amount;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueTransformRotate) &&\n\t\t\tthis.originX === value.originX &&\n\t\t\tthis.originY === value.originY &&\n\t\t\tthis.amount === value.amount\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeTransformRotate {\n\t\tswitch( this.opetype ) {\n\t\tcase EShapeActionValueTransformRotateType.ABSOLUTE:\n\t\t\treturn new EShapeActionRuntimeTransformRotateAbsolute( this );\n\t\tcase EShapeActionValueTransformRotateType.RELATIVE:\n\t\t\treturn new EShapeActionRuntimeTransformRotateRelative( this );\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add( this.condition );\n\t\tconst amountId = manager.add( this.amount );\n\t\treturn manager.add(\n\t\t\t`[${this.type},${conditionId},${this.subtype},${this.opetype},${this.originX},${this.originY},${amountId}]`\n\t\t);\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueTransformRotateSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueTransformRotate {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst amount = EShapeActionValues.toResource( 6, serialized, manager.resources );\n\t\treturn new EShapeActionValueTransformRotate(\n\t\t\tserialized[ 3 ], condition,\n\t\t\tserialized[ 4 ], serialized[ 5 ], amount\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeCapability {\n\tNONE\t\t\t= 0,\n\n\tID\t\t\t\t= 1 << 0,\n\tPOSITION\t\t= 1 << 1,\n\tWIDTH\t\t\t= 1 << 2,\n\tHEIGHT\t\t\t= 1 << 3,\n\tROTATION\t\t= 1 << 4,\n\tSKEW\t\t\t= 1 << 5,\n\tALIGN\t\t\t= 1 << 6,\n\n\tREPLACING\t\t= 1 << 7,\n\tGROUPING\t\t= 1 << 8,\n\tFILL\t\t\t= 1 << 9,\n\tSTROKE\t\t\t= 1 << 10,\n\tSTROKE_SIDE\t\t= 1 << 11,\n\tBORDER_RADIUS\t= 1 << 12,\n\n\tTEXT\t\t\t= 1 << 13,\n\tTEXTURE\t\t\t= 1 << 14,\n\tTAG\t\t\t\t= 1 << 15,\n\tACTION\t\t\t= 1 << 16,\n\tCURSOR\t\t\t= 1 << 17,\n\tORDER_IN_LAYER\t= 1 << 18,\n\n\tCOORDINATE\t\t= ID | POSITION | WIDTH | HEIGHT | ROTATION | SKEW | ALIGN,\n\tSHAPE\t\t\t= REPLACING | GROUPING | FILL | STROKE,\n\tSHAPE_ROUNDED\t= SHAPE | BORDER_RADIUS,\n\tSHAPE_SIDED\t\t= SHAPE | STROKE_SIDE,\n\tSHAPE_SIDED_AND_ROUNDED = SHAPE | STROKE_SIDE | BORDER_RADIUS,\n\tLAYER\t\t\t= ORDER_IN_LAYER,\n\tPRIMITIVE\t\t= COORDINATE | SHAPE | TEXT | TEXTURE | TAG | ACTION | CURSOR | LAYER,\n\tSHADOW\t\t\t= NONE,\n\tALL\t\t\t\t= PRIMITIVE | STROKE_SIDE | BORDER_RADIUS\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utilIsArray } from \"../../util/util-is-array\";\nimport { utilIsNumber } from \"../../util/util-is-number\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueBlink, EShapeActionValueBlinkSerialized } from \"./e-shape-action-value-blink\";\nimport {\n\tEShapeActionValueChangeColor, EShapeActionValueChangeColorSerialized } from \"./e-shape-action-value-change-color\";\nimport {\n\tEShapeActionValueChangeColorBrightness, EShapeActionValueChangeColorBrightnessSerialized\n} from \"./e-shape-action-value-change-color-brightness\";\nimport {\n\tEShapeActionValueChangeColorCode, EShapeActionValueChangeColorCodeSerialized\n} from \"./e-shape-action-value-change-color-code\";\nimport { EShapeActionValueChangeColorTarget } from \"./e-shape-action-value-change-color-type\";\nimport {\n\tEShapeActionValueChangeCursor, EShapeActionValueChangeCursorSerialized } from \"./e-shape-action-value-change-cursor\";\nimport { EShapeActionValueChangeText, EShapeActionValueChangeTextSerialized } from \"./e-shape-action-value-change-text\";\nimport { EShapeActionValueEmitEvent, EShapeActionValueEmitEventSerialized } from \"./e-shape-action-value-emit-event\";\nimport { EShapeActionValueMisc, EShapeActionValueMiscSerialized } from \"./e-shape-action-value-misc\";\nimport { EShapeActionValueOpen, EShapeActionValueOpenSerialized } from \"./e-shape-action-value-open\";\nimport { EShapeActionValueShowHide, EShapeActionValueShowHideSerialized } from \"./e-shape-action-value-show-hide\";\nimport {\n\tEShapeActionValueShowHideType\n} from \"./e-shape-action-value-show-hide-type\";\nimport {\n\tEShapeActionValueTransformMove, EShapeActionValueTransformMoveSerialized\n} from \"./e-shape-action-value-transform-move\";\nimport {\n\tEShapeActionValueTransformResize, EShapeActionValueTransformResizeSerialized\n} from \"./e-shape-action-value-transform-resize\";\nimport {\n\tEShapeActionValueTransformRotate, EShapeActionValueTransformRotateSerialized\n} from \"./e-shape-action-value-transform-rotate\";\nimport { EShapeActionValueTransformType } from \"./e-shape-action-value-transform-type\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\n\nexport type EShapeActionValueSerialized = EShapeActionValueShowHideSerialized |\n\tEShapeActionValueBlinkSerialized | EShapeActionValueBlinkSerialized |\n\tEShapeActionValueChangeColorSerialized | EShapeActionValueChangeColorCodeSerialized |\n\tEShapeActionValueChangeColorBrightnessSerialized | EShapeActionValueChangeTextSerialized |\n\tEShapeActionValueChangeCursorSerialized | EShapeActionValueEmitEventSerialized |\n\tEShapeActionValueOpenSerialized | EShapeActionValueTransformMoveSerialized |\n\tEShapeActionValueTransformResizeSerialized | EShapeActionValueTransformRotateSerialized |\n\tEShapeActionValueMiscSerialized;\n\nexport class EShapeActionValueDeserializer {\n\tstatic toSerialized( resource: string ): EShapeActionValueSerialized | null {\n\t\ttry {\n\t\t\tconst parsed = JSON.parse( resource );\n\t\t\tif( utilIsArray( parsed ) ) {\n\t\t\t\tfor( let i = 0, imax = parsed.length; i < imax; ++i ) {\n\t\t\t\t\tif( ! utilIsNumber( parsed[ i ] ) ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif( 2 <= parsed.length ) {\n\t\t\t\t\treturn parsed as EShapeActionValueSerialized;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t} catch( e ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tstatic deserialize( id: number, manager: EShapeResourceManagerDeserialization ): EShapeActionValue {\n\t\tconst actions = manager.actions;\n\t\tconst action = actions.get( id );\n\t\tif( action != null ) {\n\t\t\treturn action;\n\t\t}\n\n\t\tconst resources = manager.resources;\n\t\tconst resource = resources[ id ];\n\t\tif( resource != null ) {\n\t\t\tconst serialized = this.toSerialized( resource );\n\t\t\tif( serialized != null ) {\n\t\t\t\tswitch( serialized[ 0 ] ) {\n\t\t\t\tcase EShapeActionValueType.SHOW_HIDE:\n\t\t\t\t\treturn EShapeActionValueShowHide.deserialize( serialized, manager );\n\t\t\t\tcase EShapeActionValueType.BLINK:\n\t\t\t\t\treturn EShapeActionValueBlink.deserialize( serialized, manager );\n\t\t\t\tcase EShapeActionValueType.CHANGE_COLOR:\n\t\t\t\t\tswitch( serialized[ 3 ] ) {\n\t\t\t\t\t\tcase EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA:\n\t\t\t\t\t\tcase EShapeActionValueChangeColorTarget.COLOR:\n\t\t\t\t\t\tcase EShapeActionValueChangeColorTarget.ALPHA:\n\t\t\t\t\t\t\treturn EShapeActionValueChangeColor.deserialize( serialized, manager );\n\t\t\t\t\t\tcase EShapeActionValueChangeColorTarget.CODE:\n\t\t\t\t\t\t\treturn EShapeActionValueChangeColorCode.deserialize( serialized, manager );\n\t\t\t\t\t\tcase EShapeActionValueChangeColorTarget.BRIGHTNESS:\n\t\t\t\t\t\t\treturn EShapeActionValueChangeColorBrightness.deserialize( serialized, manager );\n\t\t\t\t\t}\n\t\t\t\tcase EShapeActionValueType.CHANGE_TEXT:\n\t\t\t\t\treturn EShapeActionValueChangeText.deserialize( serialized, manager );\n\t\t\t\tcase EShapeActionValueType.CHANGE_CURSOR:\n\t\t\t\t\treturn EShapeActionValueChangeCursor.deserialize( serialized, manager );\n\t\t\t\tcase EShapeActionValueType.EMIT_EVENT:\n\t\t\t\t\treturn EShapeActionValueEmitEvent.deserialize( serialized, manager );\n\t\t\t\tcase EShapeActionValueType.OPEN:\n\t\t\t\t\treturn EShapeActionValueOpen.deserialize( serialized, manager );\n\t\t\t\tcase EShapeActionValueType.TRANSFORM:\n\t\t\t\t\tswitch( serialized[ 2 ] ) {\n\t\t\t\t\tcase EShapeActionValueTransformType.MOVE:\n\t\t\t\t\t\treturn EShapeActionValueTransformMove.deserialize( serialized, manager );\n\t\t\t\t\tcase EShapeActionValueTransformType.RESIZE:\n\t\t\t\t\t\treturn EShapeActionValueTransformResize.deserialize( serialized, manager );\n\t\t\t\t\tcase EShapeActionValueTransformType.ROTATE:\n\t\t\t\t\t\treturn EShapeActionValueTransformRotate.deserialize( serialized, manager );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase EShapeActionValueType.MISC:\n\t\t\t\t\treturn EShapeActionValueMisc.deserialize( serialized, manager );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn new EShapeActionValueShowHide( EShapeActionValueShowHideType.SHOW, \"\" );\n\t}\n}\n","\nexport class EShapeImageElements {\n\tstatic imageElements: { [ src: string ]: Promise<HTMLImageElement> | HTMLImageElement | undefined } = {};\n\n\tstatic toImageElement( dataUrl: string ): Promise<HTMLImageElement> {\n\t\tconst imageElements = EShapeImageElements.imageElements;\n\t\tconst cachedImageElement = imageElements[ dataUrl ];\n\t\tif( cachedImageElement != null ) {\n\t\t\tif( cachedImageElement instanceof HTMLImageElement ) {\n\t\t\t\treturn Promise.resolve( cachedImageElement );\n\t\t\t} else {\n\t\t\t\treturn cachedImageElement;\n\t\t\t}\n\t\t} else {\n\t\t\tconst result = new Promise<HTMLImageElement>(( resolve, reject ): void => {\n\t\t\t\tconst imageElement = document.createElement( \"img\" );\n\t\t\t\timageElement.onload = () => {\n\t\t\t\t\timageElements[ dataUrl ] = imageElement;\n\t\t\t\t\tresolve( imageElement );\n\t\t\t\t};\n\t\t\t\timageElement.onabort = imageElement.onerror = () => {\n\t\t\t\t\treject();\n\t\t\t\t};\n\t\t\t\timageElement.src = dataUrl;\n\t\t\t});\n\t\t\timageElements[ dataUrl ] = result;\n\t\t\treturn result;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n\tDDiagramSerializedFill, DDiagramSerializedStroke, DDiagramSerializedTagRange, DDiagramSerializedTagValue,\n\tDDiagramSerializedText, DDiagramSerializedTextOutline\n} from \"../d-diagram-serialized\";\nimport { EShapeActionValue } from \"./action/e-shape-action-value\";\n\nexport class EShapeResourceManagerDeserialization {\n\tresources: string[];\n\tactions: Map<number, EShapeActionValue>;\n\tfills: Map<number, DDiagramSerializedFill>;\n\tstrokes: Map<number, DDiagramSerializedStroke>;\n\ttagValues: Map<number, DDiagramSerializedTagValue>;\n\ttags: Map<number, number[]>;\n\tranges: Map<number, DDiagramSerializedTagRange>;\n\taligns: Map<number, [ number, number ]>;\n\tmargins: Map<number, [ number, number ]>;\n\ttexts: Map<number, DDiagramSerializedText>;\n\ttextOutlines: Map<number, DDiagramSerializedTextOutline>;\n\textensions: Map<number, unknown>;\n\n\tconstructor( resources: string[] ) {\n\t\tthis.resources = resources;\n\t\tthis.actions = new Map<number, EShapeActionValue>();\n\t\tthis.fills = new Map<number, DDiagramSerializedFill>();\n\t\tthis.strokes = new Map<number, DDiagramSerializedStroke>();\n\t\tthis.tags = new Map<number, number[]>();\n\t\tthis.tagValues = new Map<number, DDiagramSerializedTagValue>();\n\t\tthis.ranges = new Map<number, DDiagramSerializedTagRange>();\n\t\tthis.aligns = new Map<number, [ number, number ]>();\n\t\tthis.margins = new Map<number, [ number, number ]>();\n\t\tthis.texts = new Map<number, DDiagramSerializedText>();\n\t\tthis.textOutlines = new Map<number, DDiagramSerializedTextOutline>();\n\t\tthis.extensions = new Map<number, unknown>();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../d-diagram-serialized\";\nimport { utilIsString } from \"../util/util-is-string\";\nimport { EShapeActionValueDeserializer } from \"./action/e-shape-action-value-deserializer\";\nimport { EShape } from \"./e-shape\";\nimport { EShapeDeserializers } from \"./e-shape-deserializers\";\nimport { EShapeImageElements } from \"./e-shape-image-elements\";\nimport { EShapeResourceManagerDeserialization } from \"./e-shape-resource-manager-deserialization\";\nimport { EShapeSizes } from \"./e-shape-sizes\";\nimport { EShapeGradients } from \"./variant/e-shape-gradients\";\n\nexport class EShapeDeserializer {\n\tstatic toShape(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShape> | EShape | null {\n\t\tconst shapeDeserializer = EShapeDeserializers[ item[ 0 ] ];\n\t\tif( shapeDeserializer != null ) {\n\t\t\treturn shapeDeserializer( item, manager );\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic deserialize<SHAPE extends EShape>(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization, result: SHAPE\n\t): Promise<SHAPE> | SHAPE {\n\t\tresult.id = manager.resources[ item[ 1 ] ] || \"\";\n\t\tresult.transform.position.set( item[ 2 ], item[ 3 ] );\n\t\tresult.transform.rotation = item[ 6 ];\n\t\tresult.transform.skew.set( item[ 7 ], item[ 7 ] );\n\t\tresult.transform.pivot.set( item[ 21 ], item[ 22 ] );\n\t\tresult.size.set( EShapeSizes.toNormalized( item[ 4 ] ), EShapeSizes.toNormalized( item[ 5 ] ) );\n\t\tresult.fill.deserialize( item[ 8 ], manager );\n\t\tresult.stroke.deserialize( item[ 9 ], manager );\n\t\tresult.cursor = manager.resources[ item[ 10 ] ] || \"\";\n\t\tresult.text.deserialize( item[ 11 ], manager );\n\t\tresult.tag.deserialize( item[ 12 ], manager );\n\t\tresult.radius = item[ 13 ];\n\t\tresult.corner = item[ 14 ];\n\t\tresult.interactive = !! ( item[ 23 ] & 1 );\n\t\tresult.unfocusable = !! ( item[ 23 ] & 2 );\n\t\tresult.shortcut = ( 0 <= item[ 24 ] ? manager.resources[ item[ 24 ] ] : undefined );\n\t\tresult.title = ( 0 <= item[ 25 ] ? manager.resources[ item[ 25 ] ] : undefined );\n\n\t\t// Children\n\t\tlet childrenPromise: Promise<SHAPE> | null = null;\n\t\tconst childrenSerialized = item[ 20 ];\n\t\tif( 0 < childrenSerialized.length ) {\n\t\t\tconst childrenOrPromises = [];\n\t\t\tfor( let i = 0, imax = childrenSerialized.length; i < imax; ++i ) {\n\t\t\t\tconst childSerialized = childrenSerialized[ i ];\n\t\t\t\tconst childOrPromise = EShapeDeserializer.toShape( childSerialized, manager );\n\t\t\t\tif( childOrPromise != null ) {\n\t\t\t\t\tchildrenOrPromises.push( childOrPromise );\n\t\t\t\t}\n\t\t\t}\n\t\t\tchildrenPromise = Promise.all( childrenOrPromises ).then(( children: EShape[] ) => {\n\t\t\t\tresult.children = children;\n\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\t\tchildren[ i ].parent = result;\n\t\t\t\t}\n\t\t\t\tresult.onChildTransformChange();\n\t\t\t\tresult.toDirty();\n\t\t\t\treturn result;\n\t\t\t});\n\t\t}\n\n\t\t// Action\n\t\tconst serializedActions = item[ 17 ];\n\t\tfor( let i = 0, imax = serializedActions.length; i < imax; ++i ) {\n\t\t\tresult.action.add( EShapeActionValueDeserializer.deserialize( serializedActions[ i ], manager ) );\n\t\t}\n\n\t\t// Gradient\n\t\tconst gradientId = item[ 19 ];\n\t\tif( 0 <= gradientId && gradientId < manager.resources.length ) {\n\t\t\tconst gradient = manager.resources[ gradientId ];\n\t\t\tif( utilIsString( gradient ) ) {\n\t\t\t\tresult.gradient = EShapeGradients.deserializeGradient( gradient );\n\t\t\t}\n\t\t}\n\n\t\t// Image\n\t\tlet imagePromise: Promise<SHAPE> | null = null;\n\t\tconst imageId = item[ 18 ];\n\t\tif( 0 <= imageId && imageId < manager.resources.length ) {\n\t\t\tconst imageSrc = manager.resources[ imageId ];\n\t\t\tif( utilIsString( imageSrc ) ) {\n\t\t\t\timagePromise = EShapeImageElements.toImageElement( imageSrc ).then(( imageElement ) => {\n\t\t\t\t\tresult.image = imageElement;\n\t\t\t\t\treturn result;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t//\n\t\tif( childrenPromise != null ) {\n\t\t\tif( imagePromise != null ) {\n\t\t\t\treturn Promise.all([ childrenPromise, imagePromise ]).then(() => {\n\t\t\t\t\treturn result;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn childrenPromise;\n\t\t\t}\n\t\t} else {\n\t\t\tif( imagePromise != null ) {\n\t\t\t\treturn imagePromise;\n\t\t\t} else {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic deserializeAll( serializeds: DDiagramSerializedItem[], resources: string[] ): Promise<EShape[]> | null {\n\t\tconst manager = new EShapeResourceManagerDeserialization( resources );\n\t\tconst shapes: Array<Promise<EShape> | EShape> = [];\n\t\tfor( let i = 0, imax = serializeds.length; i < imax; ++i ) {\n\t\t\tconst serialized = serializeds[ i ];\n\t\t\tconst shape = EShapeDeserializer.toShape( serialized, manager );\n\t\t\tif( shape == null ) {\n\t\t\t\tif( 0 < shapes.length ) {\n\t\t\t\t\tPromise.all( shapes ).then( ( resolved: EShape[] ): void => {\n\t\t\t\t\t\tfor( let j = 0, jmax = resolved.length; j < jmax; ++j ) {\n\t\t\t\t\t\t\tresolved[ j ].destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tshapes.push( shape );\n\t\t}\n\t\tif( 0 < shapes.length ) {\n\t\t\treturn Promise.all( shapes );\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeBar } from \"./e-shape-bar\";\nimport { EShapeBarPosition } from \"./e-shape-bar-position\";\n\nexport class EShapeBars {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeBar> | EShapeBar {\n\t\tconst shape = new EShapeBar( EShapeBarPosition.RIGHT, 10, 3, EShapePointsStyle.NONE );\n\t\tconst result = EShapeDeserializer.deserialize( item, manager, shape );\n\t\tshape.points.deserialize( item[ 15 ], manager );\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeBarUploadeds } from \"../shape/variant/e-shape-bar-uploadeds\";\nimport { EShapeBars } from \"../shape/variant/e-shape-bars\";\n\nexport const loadShapeBar = () => {\n\tEShapeUploadeds[ EShapeType.BAR ] = EShapeBarUploadeds.create;\n\tEShapeDeserializers[ EShapeType.BAR ] = EShapeBars.deserialize;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeTextUploaded } from \"./e-shape-text-uploaded\";\n\nexport class EShapeCircleUploaded extends EShapeTextUploaded {\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tconst buffer = this.buffer;\n\t\tconst voffset = this.vertexOffset;\n\t\tconst ioffset = this.indexOffset;\n\n\t\t// Clippings\n\t\tbuffer.clippingBuffer.update();\n\t\tconst clippings = buffer.clippings;\n\t\tconst ic = voffset * 3;\n\t\tclippings[ ic +  0 ] = 1;\n\t\tclippings[ ic +  1 ] = 1;\n\t\tclippings[ ic +  2 ] = 1;\n\n\t\tclippings[ ic +  3 ] = 0;\n\t\tclippings[ ic +  4 ] = 1;\n\t\tclippings[ ic +  5 ] = 1;\n\n\t\tclippings[ ic +  6 ] = 1;\n\t\tclippings[ ic +  7 ] = 1;\n\t\tclippings[ ic +  8 ] = 1;\n\n\t\tclippings[ ic +  9 ] = 1;\n\t\tclippings[ ic + 10 ] = 0;\n\t\tclippings[ ic + 11 ] = 1;\n\n\t\tclippings[ ic + 12 ] = 0;\n\t\tclippings[ ic + 13 ] = 0;\n\t\tclippings[ ic + 14 ] = 1;\n\n\t\tclippings[ ic + 15 ] = 1;\n\t\tclippings[ ic + 16 ] = 0;\n\t\tclippings[ ic + 17 ] = 1;\n\n\t\tclippings[ ic + 18 ] = 1;\n\t\tclippings[ ic + 19 ] = 1;\n\t\tclippings[ ic + 20 ] = 1;\n\n\t\tclippings[ ic + 21 ] = 0;\n\t\tclippings[ ic + 22 ] = 1;\n\t\tclippings[ ic + 23 ] = 1;\n\n\t\tclippings[ ic + 24 ] = 1;\n\t\tclippings[ ic + 25 ] = 1;\n\t\tclippings[ ic + 26 ] = 1;\n\n\t\t// Indices\n\t\tbuffer.indexBuffer.update();\n\t\tconst indices = buffer.indices;\n\t\tconst ii = ioffset * 3;\n\t\tindices[ ii +  0 ] = voffset + 0;\n\t\tindices[ ii +  1 ] = voffset + 1;\n\t\tindices[ ii +  2 ] = voffset + 3;\n\n\t\tindices[ ii +  3 ] = voffset + 1;\n\t\tindices[ ii +  4 ] = voffset + 4;\n\t\tindices[ ii +  5 ] = voffset + 3;\n\n\t\tindices[ ii +  6 ] = voffset + 1;\n\t\tindices[ ii +  7 ] = voffset + 2;\n\t\tindices[ ii +  8 ] = voffset + 4;\n\n\t\tindices[ ii +  9 ] = voffset + 2;\n\t\tindices[ ii + 10 ] = voffset + 5;\n\t\tindices[ ii + 11 ] = voffset + 4;\n\n\t\tindices[ ii + 12 ] = voffset + 3;\n\t\tindices[ ii + 13 ] = voffset + 4;\n\t\tindices[ ii + 14 ] = voffset + 6;\n\n\t\tindices[ ii + 15 ] = voffset + 4;\n\t\tindices[ ii + 16 ] = voffset + 7;\n\t\tindices[ ii + 17 ] = voffset + 6;\n\n\t\tindices[ ii + 18 ] = voffset + 4;\n\t\tindices[ ii + 19 ] = voffset + 5;\n\t\tindices[ ii + 20 ] = voffset + 7;\n\n\t\tindices[ ii + 21 ] = voffset + 5;\n\t\tindices[ ii + 22 ] = voffset + 8;\n\t\tindices[ ii + 23 ] = voffset + 7;\n\n\t\t// Text\n\t\tthis.initText();\n\n\t\tthis.update( shape );\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\tconst buffer = this.buffer;\n\t\tthis.updateType0Vertex( buffer, shape );\n\t\tthis.updateColor( buffer, shape );\n\t\tthis.updateType0Step( buffer, shape );\n\t\tthis.updateType0Uv( buffer, shape );\n\t\tthis.updateText( buffer, shape );\n\t}\n\n\tprotected updateType0Vertex( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst size = shape.size;\n\t\tconst sizeX = size.x;\n\t\tconst sizeY = size.y;\n\t\tconst transformLocalId = this.toTransformLocalId( shape );\n\t\tconst isSizeChanged = ( sizeX !== this.sizeX || sizeY !== this.sizeY );\n\t\tconst isTransformChanged = ( this.transformLocalId !== transformLocalId );\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tconst isStrokeChanged = ( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth );\n\t\tif( isSizeChanged || isTransformChanged || isStrokeChanged ) {\n\t\t\tthis.sizeX = sizeX;\n\t\t\tthis.sizeY = sizeY;\n\t\t\tthis.transformLocalId = transformLocalId;\n\n\t\t\t// Invalidate the stroke width to update the steps / antialiases.\n\t\t\tthis.strokeWidth = NaN;\n\n\t\t\t// Invalidate the text layout to update the text layout.\n\t\t\tthis.textSpacingHorizontal = NaN;\n\n\t\t\tbuffer.vertexBuffer.update();\n\n\t\t\t// Calculate the transformed positions\n\t\t\t//\n\t\t\t//  0       1       2\n\t\t\t// |-------|-------|\n\t\t\t// |3      |4      |5\n\t\t\t// |-------|-------|\n\t\t\t// |6      |7      |8\n\t\t\t// |-------|-------|\n\t\t\t//\n\t\t\tconst s = strokeAlign * strokeWidth;\n\t\t\tconst sx = sizeX * 0.5 + (0 <= sizeX ? +s : -s);\n\t\t\tconst sy = sizeY * 0.5 + (0 <= sizeY ? +s : -s);\n\t\t\tconst internalTransform = shape.transform.internalTransform;\n\t\t\tconst work = this.buffer.work;\n\t\t\twork.set( -sx, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x0 = work.x;\n\t\t\tconst y0 = work.y;\n\t\t\twork.set( 0, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x1 = work.x;\n\t\t\tconst y1 = work.y;\n\t\t\tconst dx = x1 - x0;\n\t\t\tconst dy = y1 - y0;\n\t\t\tconst x4 = internalTransform.tx;\n\t\t\tconst y4 = internalTransform.ty;\n\t\t\tconst x7 = x4 + (x4 - x1);\n\t\t\tconst y7 = y4 + (y4 - y1);\n\t\t\tconst x3 = x4 - dx;\n\t\t\tconst y3 = y4 - dy;\n\n\t\t\t// World size\n\t\t\tthis.worldSizeXHalf = this.calcLength( x0, y0, x1, y1 );\n\t\t\tthis.worldSizeYHalf = this.calcLength( x0, y0, x3, y3 );\n\n\t\t\t// Vertices\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst vertices = buffer.vertices;\n\t\t\tconst iv = voffset * 2;\n\t\t\tvertices[ iv +  0 ] = x0;\n\t\t\tvertices[ iv +  1 ] = y0;\n\t\t\tvertices[ iv +  2 ] = x1;\n\t\t\tvertices[ iv +  3 ] = y1;\n\t\t\tvertices[ iv +  4 ] = x1 + dx;\n\t\t\tvertices[ iv +  5 ] = y1 + dy;\n\n\t\t\tvertices[ iv +  6 ] = x3;\n\t\t\tvertices[ iv +  7 ] = y3;\n\t\t\tvertices[ iv +  8 ] = x4;\n\t\t\tvertices[ iv +  9 ] = y4;\n\t\t\tvertices[ iv + 10 ] = x4 + dx;\n\t\t\tvertices[ iv + 11 ] = y4 + dy;\n\n\t\t\tvertices[ iv + 12 ] = x7 - dx;\n\t\t\tvertices[ iv + 13 ] = y7 - dy;\n\t\t\tvertices[ iv + 14 ] = x7;\n\t\t\tvertices[ iv + 15 ] = y7;\n\t\t\tvertices[ iv + 16 ] = x7 + dx;\n\t\t\tvertices[ iv + 17 ] = y7 + dy;\n\t\t}\n\t}\n\n\tprotected updateType0Step( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tif( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth ) {\n\t\t\tthis.strokeWidth = strokeWidth;\n\t\t\tthis.strokeAlign = strokeAlign;\n\t\t\tbuffer.stepBuffer.update();\n\t\t\tbuffer.antialiasBuffer.update();\n\n\t\t\tconst work = buffer.workStep;\n\t\t\tthis.calcStep( this.worldSizeXHalf, strokeWidth, work );\n\t\t\tconst swx = work[ 0 ];\n\t\t\tconst px0 = work[ 1 ];\n\t\t\tconst px1 = work[ 2 ];\n\n\t\t\tthis.calcStep( this.worldSizeYHalf, strokeWidth, work );\n\t\t\tconst swy = work[ 0 ];\n\t\t\tconst py0 = work[ 1 ];\n\t\t\tconst py1 = work[ 2 ];\n\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst vcount = this.vertexCount - this.textVertexCount;\n\t\t\tthis.updateStep( buffer, voffset, vcount, swx, swy, px0, py0, px1, py1 );\n\t\t}\n\t}\n\n\tprotected updateType0Uv( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst texture = this.toTexture( shape );\n\t\tconst textureTransformId = this.toTextureTransformId( texture );\n\t\tif( texture !== this.texture || textureTransformId !== this.textureTransformId ) {\n\t\t\tthis.texture = texture;\n\t\t\tthis.textureTransformId = textureTransformId;\n\n\t\t\tconst textureUvs = this.toTextureUvs( texture ) as any;\n\t\t\tconst x0 = textureUvs.x0;\n\t\t\tconst x1 = textureUvs.x1;\n\t\t\tconst x2 = textureUvs.x2;\n\t\t\tconst x3 = textureUvs.x3;\n\t\t\tconst y0 = textureUvs.y0;\n\t\t\tconst y1 = textureUvs.y1;\n\t\t\tconst y2 = textureUvs.y2;\n\t\t\tconst y3 = textureUvs.y3;\n\n\t\t\t// UVs\n\t\t\tbuffer.uvBuffer.update();\n\t\t\tconst uvs = buffer.uvs;\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst iuv = voffset * 2;\n\t\t\tuvs[ iuv +  0 ] = x0;\n\t\t\tuvs[ iuv +  1 ] = y0;\n\t\t\tuvs[ iuv +  2 ] = 0.5 * ( x0 + x1 );\n\t\t\tuvs[ iuv +  3 ] = 0.5 * ( y0 + y1 );\n\t\t\tuvs[ iuv +  4 ] = x1;\n\t\t\tuvs[ iuv +  5 ] = y1;\n\n\t\t\tuvs[ iuv +  6 ] = 0.5 * ( x0 + x3 );\n\t\t\tuvs[ iuv +  7 ] = 0.5 * ( y0 + y3 );\n\t\t\tuvs[ iuv +  8 ] = 0.5 * ( x0 + x2 );\n\t\t\tuvs[ iuv +  9 ] = 0.5 * ( y0 + y2 );\n\t\t\tuvs[ iuv + 10 ] = 0.5 * ( x1 + x2 );\n\t\t\tuvs[ iuv + 11 ] = 0.5 * ( y1 + y2 );\n\n\t\t\tuvs[ iuv + 12 ] = x3;\n\t\t\tuvs[ iuv + 13 ] = y3;\n\t\t\tuvs[ iuv + 14 ] = 0.5 * ( x3 + x2 );\n\t\t\tuvs[ iuv + 15 ] = 0.5 * ( y3 + y2 );\n\t\t\tuvs[ iuv + 16 ] = x2;\n\t\t\tuvs[ iuv + 17 ] = y2;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeCircleUploaded } from \"./e-shape-circle-uploaded\";\nimport { EShapeTextUploadeds } from \"./e-shape-text-uploadeds\";\n\nexport class EShapeCircleUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape,\n\t\tvoffset: number, ioffset: number\n\t): EShapeCircleUploaded | null {\n\t\tconst tcount = EShapeTextUploadeds.getTextCount( shape, buffer.workCount );\n\t\tconst tvcount = tcount.vertexCount;\n\t\tconst ticount = tcount.indexCount;\n\t\tconst vcount = 9 + tvcount;\n\t\tconst icount = 8 + ticount;\n\t\tif( voffset + vcount < buffer.vertexCapacity && ioffset + icount < buffer.indexCapacity ) {\n\t\t\treturn new EShapeCircleUploaded(\n\t\t\t\tbuffer, voffset, ioffset, tvcount, ticount, vcount, icount\n\t\t\t).init( shape );\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapePrimitive } from \"./e-shape-primitive\";\n\nexport class EShapeCircle extends EShapePrimitive {\n\tconstructor( type = EShapeType.CIRCLE ) {\n\t\tsuper( type );\n\t}\n\n\tclone(): EShapeCircle {\n\t\treturn new EShapeCircle().copy( this );\n\t}\n\n\tcontainsAbs( x: number, y: number, ax: number, ay: number ): boolean {\n\t\tif( super.containsAbsBBox( x, y, ax, ay ) ) {\n\t\t\tconst fill = this.fill;\n\t\t\tconst stroke = this.stroke;\n\t\t\tif( fill.enable ) {\n\t\t\t\tconst x2 = x * x;\n\t\t\t\tconst y2 = y * y;\n\t\t\t\tconst ax2 = ax * ax;\n\t\t\t\tconst ay2 = ay * ay;\n\t\t\t\tif( x2 * ay2 + y2 * ax2 <= ax2 * ay2 ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst strokeWidth = stroke.width;\n\t\t\t\tif( stroke.enable && 0 < strokeWidth ) {\n\t\t\t\t\tconst x2 = x * x;\n\t\t\t\t\tconst y2 = y * y;\n\t\t\t\t\tconst wx = Math.max( 0.0, ax - strokeWidth );\n\t\t\t\t\tconst wy = Math.max( 0.0, ay - strokeWidth );\n\t\t\t\t\tconst wx2 = wx * wx;\n\t\t\t\t\tconst wy2 = wy * wy;\n\t\t\t\t\tif( wx2 * wy2 <= x2 * wy2 + y2 * wx2 ) {\n\t\t\t\t\t\tconst ax2 = ax * ax;\n\t\t\t\t\t\tconst ay2 = ay * ay;\n\t\t\t\t\t\tif( x2 * ay2 + y2 * ax2 <= ax2 * ay2 ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeCircle } from \"./e-shape-circle\";\n\nexport class EShapeCircles {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeCircle> | EShapeCircle {\n\t\treturn EShapeDeserializer.deserialize( item, manager, EShapeCircles.create() );\n\t}\n\n\tstatic create(): EShapeCircle {\n\t\treturn new EShapeCircle();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeCircleUploadeds } from \"../shape/variant/e-shape-circle-uploadeds\";\nimport { EShapeCircles } from \"../shape/variant/e-shape-circles\";\n\nexport const loadShapeCircle = () => {\n\tEShapeUploadeds[ EShapeType.CIRCLE ] = EShapeCircleUploadeds.create;\n\tEShapeDeserializers[ EShapeType.CIRCLE ] = EShapeCircles.deserialize;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeUploadedBase } from \"../e-shape-uploaded\";\n\nexport class EShapeGroupUploaded extends EShapeUploadedBase {\n\tconstructor( buffer: EShapeBuffer, voffset: number, ioffset: number ) {\n\t\tsuper( buffer, voffset, ioffset, 0, 0 );\n\t}\n\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tthis.texture = shape.texture || Texture.WHITE;\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeGroupUploaded } from \"./e-shape-group-uploaded\";\n\nexport class EShapeGroupUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape, voffset: number, ioffset: number\n\t): EShapeGroupUploaded | null {\n\t\treturn new EShapeGroupUploaded( buffer, voffset, ioffset ).init( shape );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeFill, EShapeFillLike } from \"../e-shape-fill\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\n\nexport class EShapeGroupFillEditor implements EShapeFill {\n\tprotected _parent: EShapeGroupPropertyParent;\n\n\tconstructor( parent: EShapeGroupPropertyParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tget enable(): boolean {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].fill.enable;\n\t\t}\n\t\treturn true;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].fill.enable = enable;\n\t\t}\n\t}\n\n\tget color(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].fill.color;\n\t\t}\n\t\treturn 0xffffff;\n\t}\n\n\tset color( color: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].fill.color = color;\n\t\t}\n\t}\n\n\tget alpha(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].fill.alpha;\n\t\t}\n\t\treturn 1.0;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].fill.alpha = alpha;\n\t\t}\n\t}\n\n\tcopy( target: EShapeFillLike ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].fill.copy( target );\n\t\t}\n\t}\n\n\tset( enable: boolean, color: number, alpha: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].fill.set( enable, color, alpha );\n\t\t}\n\t}\n\n\tclone(): EShapeGroupFillEditor {\n\t\treturn new EShapeGroupFillEditor( this._parent );\n\t}\n\n\ttoObject(): EShapeFillLike {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].fill.toObject();\n\t\t}\n\t\treturn {\n\t\t\tenable: true,\n\t\t\tcolor: 0xffffff,\n\t\t\talpha: 1.0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ) {\n\t\t//\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix, Point } from \"pixi.js\";\nimport { EShapePoints, EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapePointsParent } from \"../e-shape-points-parent\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\n\nexport class EShapeGroupPoints implements EShapePoints {\n\tprotected _parent: EShapeGroupPropertyParent;\n\n\tconstructor( parent: EShapeGroupPropertyParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tget length(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\tconst points = children[ children.length - 1 ].points;\n\t\t\tif( points != null ) {\n\t\t\t\treturn points.length;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tget id(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\tconst points = children[ children.length - 1 ].points;\n\t\t\tif( points != null ) {\n\t\t\t\treturn points.id;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tget values(): number[] {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\tconst points = children[ children.length - 1 ].points;\n\t\t\tif( points != null ) {\n\t\t\t\treturn points.values;\n\t\t\t}\n\t\t}\n\t\treturn [];\n\t}\n\n\tset values( values: number[] ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst points = children[ i ].points;\n\t\t\tif( points != null ) {\n\t\t\t\tpoints.values = values;\n\t\t\t}\n\t\t}\n\t}\n\n\tget segments(): number[] {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\tconst points = children[ children.length - 1 ].points;\n\t\t\tif( points != null ) {\n\t\t\t\treturn points.segments;\n\t\t\t}\n\t\t}\n\t\treturn [];\n\t}\n\n\tset segments( segments: number[] ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst points = children[ i ].points;\n\t\t\tif( points != null ) {\n\t\t\t\tpoints.segments = segments;\n\t\t\t}\n\t\t}\n\t}\n\n\tget style(): EShapePointsStyle {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\tconst points = children[ children.length - 1 ].points;\n\t\t\tif( points != null ) {\n\t\t\t\treturn points.style;\n\t\t\t}\n\t\t}\n\t\treturn EShapePointsStyle.NONE;\n\t}\n\n\tset style( style: EShapePointsStyle ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst points = children[ i ].points;\n\t\t\tif( points != null ) {\n\t\t\t\tpoints.style = style;\n\t\t\t}\n\t\t}\n\t}\n\n\tcopy( source: EShapePoints ): this {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst points = children[ i ].points;\n\t\t\tif( points != null ) {\n\t\t\t\tpoints.copy( source );\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\tset( values?: number[], segments?: number[], style?: EShapePointsStyle ): this {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst points = children[ i ].points;\n\t\t\tif( points != null ) {\n\t\t\t\tpoints.set( values, segments, style );\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\tclone( parent: EShapePointsParent ): EShapeGroupPoints {\n\t\treturn new EShapeGroupPoints( parent );\n\t}\n\n\ttoPoints( transform: Matrix ): Point[] {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst points = children[ i ].points;\n\t\t\tif( points != null ) {\n\t\t\t\treturn points.toPoints( transform );\n\t\t\t}\n\t\t}\n\t\treturn [];\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst points = children[ i ].points;\n\t\t\tif( points != null ) {\n\t\t\t\treturn points.serialize( manager );\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix, Point } from \"pixi.js\";\n\nexport class EShapeEditor {\n\tlocalTransform: Matrix;\n\tinternalTransform: Matrix;\n\tinternalTransformParentInverse: Matrix;\n\trotation: number;\n\tsize: Point;\n\n\tconstructor() {\n\t\tthis.localTransform = new Matrix();\n\t\tthis.internalTransform = new Matrix();\n\t\tthis.internalTransformParentInverse = new Matrix();\n\t\tthis.rotation = 0;\n\t\tthis.size = new Point();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix } from \"pixi.js\";\nimport { EShape } from \"./e-shape\";\nimport { EShapeEditor } from \"./e-shape-editor\";\nimport { EShapeSizes } from \"./e-shape-sizes\";\nimport { EShapeBase } from \"./variant/e-shape-base\";\n\nexport class EShapeTransforms {\n\tstatic prepare( shape: EShape ): void {\n\t\tconst editor = shape.editor = (shape.editor || new EShapeEditor());\n\n\t\t// Ttransform\n\t\tshape.updateTransform();\n\t\tconst parent = shape.parent;\n\t\tif( parent instanceof EShapeBase ) {\n\t\t\tparent.transform.internalTransform.copyTo(editor.internalTransformParentInverse).invert();\n\t\t} else {\n\t\t\teditor.internalTransformParentInverse.identity();\n\t\t}\n\t\tshape.transform.internalTransform.copyTo(editor.internalTransform);\n\n\t\t// Rotation\n\t\teditor.rotation = shape.transform.rotation;\n\n\t\t// Size\n\t\teditor.size.copyFrom( shape.size );\n\n\t\t//\n\t\tshape.disallowOnTransformChange();\n\t}\n\n\tstatic finalize( shape: EShape ): void {\n\t\tshape.allowOnTransformChange( true );\n\t}\n\n\tstatic apply( shape: EShape, transform: Matrix, keepSize: boolean ): void {\n\t\tconst editor = shape.editor;\n\t\tif( editor != null ) {\n\t\t\tconst newLocalTransform = editor.localTransform;\n\t\t\teditor.internalTransformParentInverse.copyTo(newLocalTransform)\n\t\t\t\t.append(transform).append(editor.internalTransform);\n\t\t\tif( keepSize ) {\n\t\t\t\tthis.applyLocal( shape, newLocalTransform );\n\t\t\t} else {\n\t\t\t\tconst size = editor.size;\n\t\t\t\tthis.applyLocal( shape, newLocalTransform, size.x, size.y );\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic applyLocal( shape: EShape, localTransform: Matrix, bx?: number, by?: number ): void {\n\t\tshape.disallowUploadedUpdate();\n\n\t\t// Reconstruct the position, the rotation and the size\n\t\tconst a = localTransform.a;\n\t\tconst b = localTransform.b;\n\t\tconst c = localTransform.c;\n\t\tconst d = localTransform.d;\n\t\tconst tx = localTransform.tx;\n\t\tconst ty = localTransform.ty;\n\n\t\t// Rotation\n\t\tconst transform = shape.transform;\n\t\tconst rx = Math.atan2(-c, d); // rotation - skewX\n\t\tconst ry = Math.atan2(+b, a); // rotation + skewY\n\t\ttransform.rotation = (rx + ry) * 0.5; // Here, assumes `skewX` === `skewY`\n\n\t\t// Skew\n\t\tconst skew = (ry - rx) * 0.5;\n\t\ttransform.skew.set(skew, skew);\n\n\t\t// Position: Assumes the pivot is invariant.\n\t\t// tx = position.x - (a * px + c * py)\n\t\t// ty = position.y - (b * px + d * py)\n\t\t//\n\t\t// Thus,\n\t\t// position.x = tx + (a * px + c * py)\n\t\t// position.y = ty + (b * px + d * py)\n\t\tconst pivot = transform.pivot;\n\t\tconst px = pivot.x;\n\t\tconst py = pivot.y;\n\t\ttransform.position.set(\n\t\t\ttx + (a * px + c * py),\n\t\t\tty + (b * px + d * py)\n\t\t);\n\n\t\t// Scale\n\t\tif( bx != null && by != null ) {\n\t\t\tconst sx = Math.sqrt( a * a + b * b );\n\t\t\tconst sy = Math.sqrt( c * c + d * d );\n\t\t\tshape.size.set(\n\t\t\t\tEShapeSizes.toNormalized( bx * sx ),\n\t\t\t\tEShapeSizes.toNormalized( by * sy )\n\t\t\t);\n\t\t}\n\n\t\t//\n\t\tshape.allowUploadedUpdate();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix, Point } from \"pixi.js\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeLayout } from \"../e-shape-layout\";\nimport { EShapeTransforms } from \"../e-shape-transforms\";\n\nexport class EShapeGroupSizeLayout implements EShapeLayout {\n\tprotected static WORK_TRANSFORM: Matrix = new Matrix();\n\n\tprotected shape: EShape;\n\tprotected base: Point;\n\tprotected shapeBase: Point;\n\tprotected transform: Matrix;\n\n\tconstructor( shape: EShape, bx: number, by: number ) {\n\t\tthis.shape = shape;\n\n\t\t// Base group size\n\t\tthis.base = new Point( bx, by );\n\n\t\t// Base shape size\n\t\tconst size = shape.size;\n\t\tthis.shapeBase = new Point( size.x, size.y );\n\n\t\t// Transform\n\t\tthis.transform = new Matrix();\n\t\tshape.updateTransform();\n\t\tshape.transform.localTransform.copyTo( this.transform );\n\t}\n\n\tisCompatible( shape: EShape ): boolean {\n\t\treturn this.shape === shape;\n\t}\n\n\treset( shape: EShape, baseX: number, baseY: number ): void {\n\t\tthis.base.set( baseX, baseY );\n\n\t\t// Base shape size\n\t\tconst size = shape.size;\n\t\tthis.shapeBase.copyFrom( size );\n\n\t\t// Transform\n\t\tshape.updateTransform();\n\t\tshape.transform.localTransform.copyTo( this.transform );\n\t}\n\n\tupdate(\n\t\tshape: EShape, baseX: number, baseY: number,\n\t\tpivotX: number, pivotY: number\n\t) {\n\t\tconst sx = baseX / this.base.x;\n\t\tconst sy = baseY / this.base.y;\n\t\tconst childBase = this.shapeBase;\n\t\tconst transform = EShapeGroupSizeLayout.WORK_TRANSFORM;\n\t\ttransform.identity()\n\t\t\t.append( this.transform )\n\t\t\t.translate( -pivotX, -pivotY )\n\t\t\t.scale( sx, sy )\n\t\t\t.translate( +pivotX, +pivotY );\n\t\tshape.disallowOnTransformChange();\n\t\tEShapeTransforms.applyLocal( shape, transform, childBase.x, childBase.y );\n\t\tshape.allowOnTransformChange( false );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint, Point, Rectangle } from \"pixi.js\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeLayout } from \"../e-shape-layout\";\nimport { EShapeGroupSize } from \"./e-shape-group-size\";\nimport { EShapeGroupSizeLayout } from \"./e-shape-group-size-layout\";\nimport { EShapeGroupSizeParent } from \"./e-shape-group-size-parent\";\n\nexport class EShapeGroupSizeEditor implements EShapeGroupSize {\n\tprotected _parent: EShapeGroupSizeParent;\n\tprotected _size: Point;\n\tprotected _layouts: EShapeLayout[];\n\tprotected _workPoint: Point = new Point();\n\tprotected _workRectForCalcRect: Rectangle = new Rectangle();\n\tprotected _workRectForFit: Rectangle = new Rectangle();\n\n\tconstructor( parent: EShapeGroupSizeParent, x: number, y: number ) {\n\t\tthis._parent = parent;\n\t\tthis._layouts = [];\n\t\tthis._size = new Point( x, y );\n\t}\n\n\tinit(): void {\n\t\t// DO NOTHING\n\t}\n\n\tget x(): number {\n\t\treturn this._size.x;\n\t}\n\n\tset x( x: number ) {\n\t\tconst size = this._size;\n\t\tif( size.x !== x ) {\n\t\t\tconst ox = size.x;\n\t\t\tsize.x = x;\n\t\t\tthis.onChange( ox, size.y );\n\t\t}\n\t}\n\n\tget y(): number {\n\t\treturn this._size.y;\n\t}\n\n\tset y( y: number ) {\n\t\tconst size = this._size;\n\t\tif( size.y !== y ) {\n\t\t\tconst oy = size.y;\n\t\t\tsize.y = y;\n\t\t\tthis.onChange( size.x, oy );\n\t\t}\n\t}\n\n\tset( x?: number | undefined, y?: number | undefined ): void {\n\t\tlet isChanged = false;\n\t\tconst size = this._size;\n\t\tconst ox = size.x;\n\t\tconst oy = size.y;\n\t\tif( x != null && ox !== x ) {\n\t\t\tisChanged = true;\n\t\t\tsize.x = x;\n\t\t}\n\t\tif( y != null && oy !== y ) {\n\t\t\tisChanged = true;\n\t\t\tsize.y = y;\n\t\t}\n\t\tif( isChanged ) {\n\t\t\tthis.onChange( ox, oy );\n\t\t}\n\t}\n\n\tclone(): EShapeGroupSizeEditor {\n\t\tconst size = this._size;\n\t\treturn new EShapeGroupSizeEditor( this._parent, size.x, size.y );\n\t}\n\n\tcopy(): void {\n\t\t// DO NOTHING\n\t}\n\n\tcopyFrom( point: IPoint ): this {\n\t\tconst x = point.x;\n\t\tconst y = point.y;\n\t\tconst size = this._size;\n\t\tconst ox = size.x;\n\t\tconst oy = size.y;\n\t\tif( ox !== x || oy !== y ) {\n\t\t\tsize.x = x;\n\t\t\tsize.y = y;\n\t\t\tthis.onChange( ox, oy );\n\t\t}\n\t\treturn this;\n\t}\n\n\tcopyTo( point: IPoint ): IPoint {\n\t\treturn this._size.copyTo( point );\n\t}\n\n\tequals( point: IPoint ): boolean {\n\t\treturn this._size.equals( point );\n\t}\n\n\tfit(): void {\n\t\tconst parent = this._parent;\n\t\tparent.disallowOnTransformChange();\n\n\t\t// Calculate the rect\n\t\tconst rect = this.calcRect( this._workRectForFit );\n\n\t\t// Set size\n\t\tconst size = this._size;\n\t\tsize.set( rect.width, rect.height );\n\n\t\t// Position & Pivot\n\t\t// rx := rect.x\n\t\t// ry := rect.y\n\t\t//\n\t\t// | a c tx | | 1 0 +rx | | 1 0 -rx |   | a c tx + (a * rx + c * ry) | | 1 0 -rx |\n\t\t// | b d ty | | 0 1 +ry | | 0 1 -ry | = | b d ty + (b * rx + d * ry) | | 0 1 -ry |\n\t\t// | 0 0 1  | | 0 0  1  | | 0 0  1  |   | 0 0 1                      | | 0 0  1  |\n\t\t//\n\t\t// tx -> tx + (a * rx + c * ry) = poxition.x - (a * pivot.x + c * pivot.y)\n\t\t// ty -> ty + (b * rx + d * ry) = poxition.y - (b * pivot.x + d * pivot.y)\n\t\t// position.x -> position.x + (a * rx + c * ry) - (a * pivot.x + c * pivot.y)\n\t\t// position.y -> position.y + (b * rx + d * ry) - (b * pivot.x + d * pivot.y)\n\t\t// pivot.x -> 0\n\t\t// pivot.y -> 0\n\t\t//\n\t\t// a -> a', b -> b', c -> c', tx -> tx', ty -> ty'\n\t\t//\n\t\t// | a' c' tx' | | 1 0 -rx |   | a' c' tx' - (a' * rx + c' * ry) |\n\t\t// | b' d' ty' | | 0 1 -ry | = | b' d' ty' - (b' * rx + d' * ry) |\n\t\t// | 0  0  1   | | 0 0  1  |   | 0  0  1                         |\n\t\t//\n\t\t// tx' -> tx' - (a' * rx + c' * ry) = poxition.x - (a' * pivot.x + c' * pivot.y)\n\t\t// ty' -> ty' - (b' * rx + d' * ry) = poxition.y - (b' * pivot.x + d' * pivot.y)\n\t\t// pivot.x -> pivot.x + rx\n\t\t// pivot.y -> pivot.y + ry\n\t\tparent.updateTransform();\n\t\tconst transform = parent.transform;\n\t\tconst x = rect.x + rect.width * 0.5;\n\t\tconst y = rect.y + rect.height * 0.5;\n\t\tconst position = transform.position;\n\t\tconst localTransform = transform.localTransform;\n\t\tconst a = localTransform.a;\n\t\tconst b = localTransform.b;\n\t\tconst c = localTransform.c;\n\t\tconst d = localTransform.d;\n\t\tconst pivot = transform.pivot;\n\t\tposition.set(\n\t\t\tposition.x + (a * x + c * y) - (a * pivot.x + c * pivot.y),\n\t\t\tposition.y + (b * x + d * y) - (b * pivot.x + d * pivot.y)\n\t\t);\n\t\tpivot.set( x, y );\n\n\t\t// Reset the data\n\t\tthis.reset( parent.children, this._layouts, size );\n\n\t\t//\n\t\tparent.allowOnTransformChange( true );\n\t}\n\n\tprotected reset( children: EShape[], layouts: EShapeLayout[], size: IPoint ): void {\n\t\tfor( let i = 0, imax = Math.min( layouts.length, children.length ); i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tconst layout = layouts[ i ];\n\t\t\tif( layout.isCompatible( child ) ) {\n\t\t\t\tlayout.reset( child, size.x, size.y );\n\t\t\t} else {\n\t\t\t\tlayouts.length = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif( children.length < layouts.length ) {\n\t\t\tlayouts.length = children.length;\n\t\t}\n\t}\n\n\tcalcRect( result: Rectangle ): Rectangle {\n\t\tconst parent = this._parent;\n\t\tconst children = parent.children;\n\t\tif( children.length <= 0 ) {\n\t\t\tresult.x = 0;\n\t\t\tresult.y = 0;\n\t\t\tresult.width = 0;\n\t\t\tresult.height = 0;\n\t\t} else {\n\t\t\tconst workPoint = this._workPoint;\n\t\t\tconst workRect = this._workRectForCalcRect;\n\t\t\tchildren[ 0 ].getBoundsLocal( workPoint, false, result );\n\t\t\tfor( let i = 1, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tchild.getBoundsLocal( workPoint, false, workRect );\n\t\t\t\tresult.enlarge( workRect );\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected onChange( ox: number, oy: number ): void {\n\t\tconst parent = this._parent;\n\t\tconst size = this._size;\n\t\tconst pivot = parent.transform.pivot;\n\t\tthis.onChange_( parent.children, this._layouts, size.x, size.y, pivot.x, pivot.y, ox, oy );\n\t\tparent.onSizeChange();\n\t}\n\n\tprotected onChange_(\n\t\tchildren: EShape[],\n\t\tlayouts: EShapeLayout[],\n\t\tsx: number, sy: number,\n\t\tpx: number, py: number,\n\t\tox: number, oy: number\n\t): void {\n\t\tfor( let i = 0, imax = Math.min( layouts.length, children.length ); i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tconst layout = layouts[ i ];\n\t\t\tif( layout.isCompatible( child ) ) {\n\t\t\t\tlayout.update( child, sx, sy, px, py );\n\t\t\t} else {\n\t\t\t\tlayouts.length = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tfor( let i = layouts.length, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tconst layout = this.newLayout( child, ox, oy );\n\t\t\tlayout.update( child, sx, sy, px, py );\n\t\t\tlayouts.push( layout );\n\t\t}\n\t\tif( layouts.length !== children.length ) {\n\t\t\tlayouts.length = children.length;\n\t\t}\n\t}\n\n\tprotected newLayout( shape: EShape, ox: number, oy: number ): EShapeLayout {\n\t\treturn shape.layout || new EShapeGroupSizeLayout( shape, ox, oy );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { ObservablePoint, Point } from \"pixi.js\";\nimport { EShapeGroupSize } from \"./e-shape-group-size\";\n\nexport class EShapeGroupSizeViewer extends ObservablePoint implements EShapeGroupSize {\n\tbase: Point;\n\n\tconstructor( cb: () => void, x: number, y: number ) {\n\t\tsuper( cb, undefined, x, y );\n\t\tthis.base = new Point( x, y );\n\t}\n\n\tinit(): void {\n\t\tthis.base.copyFrom( this );\n\t\t(this as any).cb();\n\t}\n\n\tfit(): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeStroke, EShapeStrokeLike, EShapeStrokeSide } from \"../e-shape-stroke\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\n\nexport class EShapeGroupStrokeEditor implements EShapeStroke {\n\tprotected _parent: EShapeGroupPropertyParent;\n\n\tconstructor( parent: EShapeGroupPropertyParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tget enable(): boolean {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].stroke.enable;\n\t\t}\n\t\treturn false;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].stroke.enable = enable;\n\t\t}\n\t}\n\n\tget color(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].stroke.color;\n\t\t}\n\t\treturn 0xffffff;\n\t}\n\n\tset color( color: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].stroke.color = color;\n\t\t}\n\t}\n\n\tget alpha(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].stroke.alpha;\n\t\t}\n\t\treturn 1.0;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].stroke.alpha = alpha;\n\t\t}\n\t}\n\n\tget width(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].stroke.width;\n\t\t}\n\t\treturn 1.0;\n\t}\n\n\tset width( width: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].stroke.width = width;\n\t\t}\n\t}\n\n\tget align(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].stroke.align;\n\t\t}\n\t\treturn 1.0;\n\t}\n\n\tset align( align: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].stroke.align = align;\n\t\t}\n\t}\n\n\tget side(): EShapeStrokeSide {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].stroke.side;\n\t\t}\n\t\treturn 1.0;\n\t}\n\n\tset side( side: EShapeStrokeSide ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].stroke.side = side;\n\t\t}\n\t}\n\n\tcopy( target?: Partial<EShapeStrokeLike> ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].stroke.copy( target );\n\t\t}\n\t}\n\n\tset( enable: boolean, color: number, alpha: number, width: number, side: EShapeStrokeSide ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].stroke.set( enable, color, alpha, width, side );\n\t\t}\n\t}\n\n\tclone(): EShapeGroupStrokeEditor {\n\t\treturn new EShapeGroupStrokeEditor( this._parent );\n\t}\n\n\ttoObject(): EShapeStrokeLike {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].stroke.toObject();\n\t\t}\n\t\treturn {\n\t\t\tenable: false,\n\t\t\tcolor: 0xffffff,\n\t\t\talpha: 1.0,\n\t\t\twidth: 1.0,\n\t\t\talign: 0.0,\n\t\t\tside: EShapeStrokeSide.NONE\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t//\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextAlign, EShapeTextAlignLike } from \"../e-shape-text-align\";\nimport { EShapeTextAlignHorizontal } from \"../e-shape-text-align-horizontal\";\nimport { EShapeTextAlignVertical } from \"../e-shape-text-align-vertical\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\n\nexport class EShapeGroupTextAlignEditor implements EShapeTextAlign {\n\tprotected _parent: EShapeGroupPropertyParent;\n\n\tconstructor( parent: EShapeGroupPropertyParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tget horizontal(): EShapeTextAlignHorizontal {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.align.horizontal;\n\t\t}\n\t\treturn EShapeTextAlignHorizontal.CENTER;\n\t}\n\n\tset horizontal( horizontal: EShapeTextAlignHorizontal ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.align.horizontal = horizontal;\n\t\t}\n\t}\n\n\tget vertical(): EShapeTextAlignVertical {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.align.vertical;\n\t\t}\n\t\treturn EShapeTextAlignVertical.MIDDLE;\n\t}\n\n\tset vertical( vertical: EShapeTextAlignVertical ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.align.vertical = vertical;\n\t\t}\n\t}\n\n\tcopy( target?: Partial<EShapeTextAlignLike> ): void {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.align.copy( target );\n\t\t}\n\t}\n\n\tset( horizontal?: EShapeTextAlignHorizontal, vertical?: EShapeTextAlignVertical ): void {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.align.set( horizontal, vertical );\n\t\t}\n\t}\n\n\ttoObject(): EShapeTextAlignLike {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.align.toObject();\n\t\t}\n\t\treturn {\n\t\t\thorizontal: EShapeTextAlignHorizontal.CENTER,\n\t\t\tvertical: EShapeTextAlignVertical.MIDDLE\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOffsetLike } from \"../e-shape-text-offset\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\n\nexport class EShapeGroupTextOffsetEditor {\n\tprotected _parent: EShapeGroupPropertyParent;\n\n\tconstructor( parent: EShapeGroupPropertyParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tget horizontal(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.offset.horizontal;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset horizontal( horizontal: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.offset.horizontal = horizontal;\n\t\t}\n\t}\n\n\tget vertical(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.offset.vertical;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset vertical( vertical: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.offset.vertical = vertical;\n\t\t}\n\t}\n\n\tcopy( target: EShapeTextOffsetLike ): void {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.offset.copy( target );\n\t\t}\n\t}\n\n\tset( horizontal: number, vertical: number ): void {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.offset.set( horizontal, vertical );\n\t\t}\n\t}\n\n\ttoObject(): EShapeTextOffsetLike {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.offset.toObject();\n\t\t}\n\t\treturn {\n\t\t\thorizontal: 0,\n\t\t\tvertical: 0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOutline, EShapeTextOutlineLike } from \"../e-shape-text-outline\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\n\nexport class EShapeGroupTextOutlineEditor implements EShapeTextOutline {\n\tprotected _parent: EShapeGroupPropertyParent;\n\n\tconstructor( parent: EShapeGroupPropertyParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tget enable(): boolean {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.outline.enable;\n\t\t}\n\t\treturn false;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.outline.enable = enable;\n\t\t}\n\t}\n\n\tget color(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.outline.color;\n\t\t}\n\t\treturn 0xffffff;\n\t}\n\n\tset color( color: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.outline.color = color;\n\t\t}\n\t}\n\n\tget alpha(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.outline.alpha;\n\t\t}\n\t\treturn 1.0;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.outline.alpha = alpha;\n\t\t}\n\t}\n\n\tget width(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.outline.width;\n\t\t}\n\t\treturn 1.0;\n\t}\n\n\tset width( width: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.outline.width = width;\n\t\t}\n\t}\n\n\tcopy( target?: Partial<EShapeTextOutlineLike> ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.outline.copy( target );\n\t\t}\n\t}\n\n\tset( enable?: boolean, color?: number, alpha?: number, width?: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.outline.set( enable, color, alpha, width );\n\t\t}\n\t}\n\n\tclone(): EShapeGroupTextOutlineEditor {\n\t\treturn new EShapeGroupTextOutlineEditor( this._parent );\n\t}\n\n\ttoObject(): EShapeTextOutlineLike {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.outline.toObject();\n\t\t}\n\t\treturn {\n\t\t\tenable: false,\n\t\t\tcolor: 0xffffff,\n\t\t\talpha: 1.0,\n\t\t\twidth: 1.0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t//\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOffsetLike } from \"../e-shape-text-offset\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\n\nexport class EShapeGroupTextPaddingEditor {\n\tprotected _parent: EShapeGroupPropertyParent;\n\n\tconstructor( parent: EShapeGroupPropertyParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tget horizontal(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.padding.horizontal;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset horizontal( horizontal: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.padding.horizontal = horizontal;\n\t\t}\n\t}\n\n\tget vertical(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.padding.vertical;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset vertical( vertical: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.padding.vertical = vertical;\n\t\t}\n\t}\n\n\tcopy( target: EShapeTextOffsetLike ): void {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.padding.copy( target );\n\t\t}\n\t}\n\n\tset( horizontal: number, vertical: number ): void {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.padding.set( horizontal, vertical );\n\t\t}\n\t}\n\n\ttoObject(): EShapeTextOffsetLike {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.padding.toObject();\n\t\t}\n\t\treturn {\n\t\t\thorizontal: 0,\n\t\t\tvertical: 0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOffsetLike } from \"../e-shape-text-offset\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\n\nexport class EShapeGroupTextSpacingEditor {\n\tprotected _parent: EShapeGroupPropertyParent;\n\n\tconstructor( parent: EShapeGroupPropertyParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tget horizontal(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.spacing.horizontal;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset horizontal( horizontal: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.spacing.horizontal = horizontal;\n\t\t}\n\t}\n\n\tget vertical(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.spacing.vertical;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset vertical( vertical: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.spacing.vertical = vertical;\n\t\t}\n\t}\n\n\tcopy( target: EShapeTextOffsetLike ): void {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.spacing.copy( target );\n\t\t}\n\t}\n\n\tset( horizontal: number, vertical: number ): void {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.spacing.set( horizontal, vertical );\n\t\t}\n\t}\n\n\ttoObject(): EShapeTextOffsetLike {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.spacing.toObject();\n\t\t}\n\t\treturn {\n\t\t\thorizontal: 0,\n\t\t\tvertical: 0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DeepPartial } from \"../../util/deep-partial\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeText, EShapeTextLike, EShapeTextStyle, EShapeTextWeight } from \"../e-shape-text\";\nimport { EShapeTextDirection } from \"../e-shape-text-direction\";\nimport { EShapeTextOutline } from \"../e-shape-text-outline\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\nimport { EShapeGroupTextAlignEditor } from \"./e-shape-group-text-align-editor\";\nimport { EShapeGroupTextOffsetEditor } from \"./e-shape-group-text-offset-editor\";\nimport { EShapeGroupTextOutlineEditor } from \"./e-shape-group-text-outline-editor\";\nimport { EShapeGroupTextPaddingEditor } from \"./e-shape-group-text-padding-editor\";\nimport { EShapeGroupTextSpacingEditor } from \"./e-shape-group-text-spacing-editor\";\n\nexport class EShapeGroupTextEditor implements EShapeText {\n\tprotected _parent: EShapeGroupPropertyParent;\n\n\talign: EShapeGroupTextAlignEditor;\n\toffset: EShapeGroupTextOffsetEditor;\n\toutline: EShapeTextOutline;\n\tspacing: EShapeGroupTextSpacingEditor;\n\tpadding: EShapeGroupTextPaddingEditor;\n\n\tconstructor( parent: EShapeGroupPropertyParent ) {\n\t\tthis._parent = parent;\n\n\t\tthis.align = new EShapeGroupTextAlignEditor( parent );\n\t\tthis.offset = new EShapeGroupTextOffsetEditor( parent );\n\t\tthis.outline = new EShapeGroupTextOutlineEditor( parent );\n\t\tthis.spacing = new EShapeGroupTextSpacingEditor( parent );\n\t\tthis.padding = new EShapeGroupTextPaddingEditor( parent );\n\t}\n\n\tget enable(): boolean {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.enable;\n\t\t}\n\t\treturn true;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.enable = enable;\n\t\t}\n\t}\n\n\tget value(): string {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.value;\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tset value( value: string ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.value = value;\n\t\t}\n\t}\n\n\tget color(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.color;\n\t\t}\n\t\treturn 0x000000;\n\t}\n\n\tset color( color: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.color = color;\n\t\t}\n\t}\n\n\tget alpha(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.alpha;\n\t\t}\n\t\treturn 1.0;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.alpha = alpha;\n\t\t}\n\t}\n\n\tget family(): string {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.family;\n\t\t}\n\t\treturn \"auto\";\n\t}\n\n\tset family( family: string ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.family = family;\n\t\t}\n\t}\n\n\tget size(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.size;\n\t\t}\n\t\treturn 24;\n\t}\n\n\tset size( size: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.size = size;\n\t\t}\n\t}\n\n\tget weight(): EShapeTextWeight {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.weight;\n\t\t}\n\t\treturn EShapeTextWeight.NORMAL;\n\t}\n\n\tset weight( weight: EShapeTextWeight ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.weight = weight;\n\t\t}\n\t}\n\n\tget style(): EShapeTextStyle {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.style;\n\t\t}\n\t\treturn EShapeTextStyle.NORMAL;\n\t}\n\n\tset style( style: EShapeTextStyle ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.style = style;\n\t\t}\n\t}\n\n\tget direction(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.direction;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset direction( direction: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.direction = direction;\n\t\t}\n\t}\n\n\tget clipping(): boolean {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.clipping;\n\t\t}\n\t\treturn false;\n\t}\n\n\tset clipping( clipping: boolean ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.clipping = clipping;\n\t\t}\n\t}\n\n\tcopy( target?: DeepPartial<EShapeTextLike> ): this {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.copy( target );\n\t\t}\n\t\treturn this;\n\t}\n\n\tset(\n\t\tvalue?: string, color?: number, alpha?: number,\n\t\tfamily?: string, size?: number, weight?: EShapeTextWeight,\n\t\tstyle?: EShapeTextStyle, direction?: EShapeTextDirection\n\t): this {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.set( value, color, alpha, family, size, weight, style, direction );\n\t\t}\n\t\treturn this;\n\t}\n\n\ttoObject(): EShapeTextLike {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.toObject();\n\t\t}\n\t\treturn {\n\t\t\tvalue: \"\",\n\t\t\tcolor: 0x000000,\n\t\t\talpha: 1.0,\n\t\t\tfamily: \"auto\",\n\t\t\tsize: 24,\n\t\t\tweight: EShapeTextWeight.NORMAL,\n\t\t\talign: this.align.toObject(),\n\t\t\toffset: this.offset.toObject(),\n\t\t\tstyle: EShapeTextStyle.NORMAL,\n\t\t\toutline: this.outline.toObject(),\n\t\t\tspacing: this.spacing.toObject(),\n\t\t\tdirection: EShapeTextDirection.LEFT_TO_RIGHT,\n\t\t\tpadding: this.padding.toObject(),\n\t\t\tclipping: false\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ) {\n\t\t//\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint } from \"pixi.js\";\nimport { EShapeCorner } from \"../e-shape-corner\";\nimport { EShapeDefaults } from \"../e-shape-defaults\";\nimport { EShapeFill } from \"../e-shape-fill\";\nimport { EShapeGradientLike } from \"../e-shape-gradient\";\nimport { EShapePoints } from \"../e-shape-points\";\nimport { EShapeStroke } from \"../e-shape-stroke\";\nimport { EShapeTag } from \"../e-shape-tag\";\nimport { EShapeText } from \"../e-shape-text\";\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapeBase } from \"./e-shape-base\";\nimport { EShapeGroupFillEditor } from \"./e-shape-group-fill-editor\";\nimport { EShapeGroupPoints } from \"./e-shape-group-points\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\nimport { EShapeGroupSize } from \"./e-shape-group-size\";\nimport { EShapeGroupSizeEditor } from \"./e-shape-group-size-editor\";\nimport { EShapeGroupSizeViewer } from \"./e-shape-group-size-viewer\";\nimport { EShapeGroupStrokeEditor } from \"./e-shape-group-stroke-editor\";\nimport { EShapeGroupTextEditor } from \"./e-shape-group-text-editor\";\nimport { EShapeTagImpl } from \"./e-shape-tag-impl\";\n\nexport class EShapeGroup extends EShapeBase implements EShapeGroupPropertyParent {\n\tsize: EShapeGroupSize;\n\tfill: EShapeFill;\n\tstroke: EShapeStroke;\n\ttag: EShapeTag;\n\ttext: EShapeText;\n\n\tprotected _points?: EShapeGroupPoints;\n\n\tconstructor( type = EShapeType.GROUP ) {\n\t\tsuper( type );\n\t\tthis.tag = new EShapeTagImpl();\n\t\tthis.size = this.newGroupSize();\n\t\tthis.fill = this.newGroupFill();\n\t\tthis.stroke = this.newGroupStroke();\n\t\tthis.text = this.newGroupText();\n\t\tthis.points = this.newGroupPoints();\n\t}\n\n\tprotected newGroupSize(): EShapeGroupSize {\n\t\tif( EShapeDefaults.IS_EDIT_MODE ) {\n\t\t\treturn new EShapeGroupSizeEditor(\n\t\t\t\tthis,\n\t\t\t\tEShapeDefaults.SIZE_X,\n\t\t\t\tEShapeDefaults.SIZE_Y\n\t\t\t);\n\t\t} else {\n\t\t\tconst result = new EShapeGroupSizeViewer(\n\t\t\t\t() => {\n\t\t\t\t\tconst base = result.base;\n\t\t\t\t\tthis.transform.scale.set(\n\t\t\t\t\t\tresult.x / base.x,\n\t\t\t\t\t\tresult.y / base.y\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tEShapeDefaults.SIZE_X,\n\t\t\t\tEShapeDefaults.SIZE_Y\n\t\t\t);\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tprotected newGroupFill(): EShapeFill {\n\t\treturn new EShapeGroupFillEditor( this );\n\t}\n\n\tprotected newGroupStroke(): EShapeStroke {\n\t\treturn new EShapeGroupStrokeEditor( this );\n\t}\n\n\tprotected newGroupText(): EShapeText {\n\t\treturn new EShapeGroupTextEditor( this );\n\t}\n\n\tprotected newGroupPoints(): EShapePoints | undefined {\n\t\treturn new EShapeGroupPoints( this );\n\t}\n\n\tprotected getBoundsSize(): IPoint {\n\t\tconst size = this.size;\n\t\tif( size instanceof EShapeGroupSizeViewer ) {\n\t\t\treturn size.base;\n\t\t} else {\n\t\t\treturn size;\n\t\t}\n\t}\n\n\tonChildTransformChange(): void {\n\t\tsuper.onChildTransformChange();\n\t\tthis.size.fit();\n\t}\n\n\tget corner(): EShapeCorner {\n\t\tconst children = this.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].corner;\n\t\t}\n\t\treturn EShapeCorner.ALL;\n\t}\n\n\tset corner( corner: EShapeCorner ) {\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].corner = corner;\n\t\t}\n\t}\n\n\tget cursor(): string {\n\t\tconst children = this.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].cursor;\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tset cursor( cursor: string ) {\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].cursor = cursor;\n\t\t}\n\t}\n\n\tget gradient(): EShapeGradientLike | undefined {\n\t\tconst children = this.children;\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\tconst gradient = children[ i ].gradient;\n\t\t\tif( gradient != null ) {\n\t\t\t\treturn gradient;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tset gradient( gradient: EShapeGradientLike | undefined ) {\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].gradient = gradient;\n\t\t}\n\t}\n\n\tget radius(): number {\n\t\tconst children = this.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].radius;\n\t\t}\n\t\treturn 0.5;\n\t}\n\n\tset radius( radius: number ) {\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].radius = radius;\n\t\t}\n\t}\n\n\tget image(): HTMLImageElement | undefined {\n\t\tconst children = this.children;\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\tconst image = children[ i ].image;\n\t\t\tif( image != null ) {\n\t\t\t\treturn image;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tset image( image: HTMLImageElement | undefined ) {\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].image = image;\n\t\t}\n\t}\n\n\tget points(): EShapePoints | undefined {\n\t\tconst children = this.children;\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\tconst points = children[ i ].points;\n\t\t\tif( points != null ) {\n\t\t\t\treturn this._points;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tset points( points: EShapePoints | undefined ) {\n\t\t// DO NOTHING\n\t}\n\n\tclone(): EShapeGroup {\n\t\tconst constructor = this.constructor as new () => EShapeGroup;\n\t\tconst result = new constructor().copy( this );\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst clone = children[ i ].clone();\n\t\t\tclone.parent = result;\n\t\t\tresult.children.push( clone );\n\t\t}\n\t\tresult.onChildTransformChange();\n\t\tresult.toDirty();\n\t\treturn result;\n\t}\n\n\tcontainsAbs( x: number, y: number, ax: number, ay: number ): boolean {\n\t\treturn false;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeGroup } from \"./e-shape-group\";\n\nexport class EShapeGroups {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeGroup> | EShapeGroup {\n\t\tconst shape = EShapeGroups.create();\n\t\tconst result = EShapeDeserializer.deserialize( item, manager, shape );\n\t\tshape.size.init();\n\t\treturn result;\n\t}\n\n\tstatic create(): EShapeGroup {\n\t\treturn new EShapeGroup();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeGroupUploadeds } from \"../shape/variant/e-shape-group-uploadeds\";\nimport { EShapeGroups } from \"../shape/variant/e-shape-groups\";\n\nexport const loadShapeGroup = () => {\n\tEShapeUploadeds[ EShapeType.GROUP ] = EShapeGroupUploadeds.create;\n\tEShapeDeserializers[ EShapeType.GROUP ] = EShapeGroups.deserialize;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint, Point } from \"pixi.js\";\nimport { EShapeGroupSize } from \"./e-shape-group-size\";\nimport { EShapeGroupSizeParent } from \"./e-shape-group-size-parent\";\n\nexport class EShapeGroupSizeShadowed implements EShapeGroupSize {\n\tprotected _parent: EShapeGroupSizeParent;\n\tprotected _size: Point;\n\n\tconstructor( parent: EShapeGroupSizeParent, x: number, y: number ) {\n\t\tthis._parent = parent;\n\t\tthis._size = new Point( x, y );\n\t}\n\n\tinit(): void {\n\t\t// DO NOTHING\n\t}\n\n\tget x(): number {\n\t\treturn this._size.x;\n\t}\n\n\tset x( x: number ) {\n\t\tconst size = this._size;\n\t\tif( size.x !== x ) {\n\t\t\tconst ox = size.x;\n\t\t\tsize.x = x;\n\t\t\tthis.onChange( ox, size.y );\n\t\t}\n\t}\n\n\tget y(): number {\n\t\treturn this._size.y;\n\t}\n\n\tset y( y: number ) {\n\t\tconst size = this._size;\n\t\tif( size.y !== y ) {\n\t\t\tconst oy = size.y;\n\t\t\tsize.y = y;\n\t\t\tthis.onChange( size.x, oy );\n\t\t}\n\t}\n\n\tset( x?: number | undefined, y?: number | undefined ): void {\n\t\tlet isChanged = false;\n\t\tconst size = this._size;\n\t\tconst ox = size.x;\n\t\tconst oy = size.y;\n\t\tif( x != null && ox !== x ) {\n\t\t\tisChanged = true;\n\t\t\tsize.x = x;\n\t\t}\n\t\tif( y != null && oy !== y ) {\n\t\t\tisChanged = true;\n\t\t\tsize.y = y;\n\t\t}\n\t\tif( isChanged ) {\n\t\t\tthis.onChange( ox, oy );\n\t\t}\n\t}\n\n\tclone(): EShapeGroupSizeShadowed {\n\t\tconst size = this._size;\n\t\treturn new EShapeGroupSizeShadowed( this._parent, size.x, size.y );\n\t}\n\n\tcopy(): void {\n\t\t// DO NOTHING\n\t}\n\n\tcopyFrom( point: IPoint ): this {\n\t\tconst x = point.x;\n\t\tconst y = point.y;\n\t\tconst size = this._size;\n\t\tconst ox = size.x;\n\t\tconst oy = size.y;\n\t\tif( ox !== x || oy !== y ) {\n\t\t\tsize.x = x;\n\t\t\tsize.y = y;\n\t\t\tthis.onChange( ox, oy );\n\t\t}\n\t\treturn this;\n\t}\n\n\tcopyTo( point: IPoint ): IPoint {\n\t\treturn this._size.copyTo( point );\n\t}\n\n\tequals( point: IPoint ): boolean {\n\t\treturn this._size.equals( point );\n\t}\n\n\tfit(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected onChange( ox: number, oy: number ): void {\n\t\tthis._parent.onSizeChange();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDefaults } from \"../e-shape-defaults\";\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapeGroup } from \"./e-shape-group\";\nimport { EShapeGroupSize } from \"./e-shape-group-size\";\nimport { EShapeGroupSizeShadowed } from \"./e-shape-group-size-shadowed\";\n\nexport class EShapeGroupShadowed extends EShapeGroup {\n\tconstructor( type: EShapeType = EShapeType.GROUP_SHADOWED ) {\n\t\tsuper( type );\n\t}\n\n\tprotected newGroupSize(): EShapeGroupSize {\n\t\tif( EShapeDefaults.IS_EDIT_MODE ) {\n\t\t\treturn new EShapeGroupSizeShadowed(\n\t\t\t\tthis,\n\t\t\t\tEShapeDefaults.SIZE_X,\n\t\t\t\tEShapeDefaults.SIZE_Y\n\t\t\t);\n\t\t} else {\n\t\t\treturn super.newGroupSize();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeGroupShadowed } from \"./e-shape-group-shadowed\";\n\nexport class EShapeGroupShadoweds {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeGroupShadowed> | EShapeGroupShadowed {\n\t\tconst shape = EShapeGroupShadoweds.create();\n\t\tconst result = EShapeDeserializer.deserialize( item, manager, shape );\n\t\tshape.size.init();\n\t\treturn result;\n\t}\n\n\tstatic create(): EShapeGroupShadowed {\n\t\treturn new EShapeGroupShadowed();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeGroupShadoweds } from \"../shape/variant/e-shape-group-shadoweds\";\nimport { EShapeGroupUploadeds } from \"../shape/variant/e-shape-group-uploadeds\";\n\nexport const loadShapeGroupShadowed = () => {\n\tEShapeUploadeds[ EShapeType.GROUP_SHADOWED ] = EShapeGroupUploadeds.create;\n\tEShapeDeserializers[ EShapeType.GROUP_SHADOWED ] = EShapeGroupShadoweds.deserialize;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeStrokeSide } from \"../e-shape-stroke\";\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapePrimitive } from \"./e-shape-primitive\";\n\nexport class EShapeRectangle extends EShapePrimitive {\n\tconstructor( type = EShapeType.RECTANGLE ) {\n\t\tsuper( type );\n\t}\n\n\tclone(): EShapeRectangle {\n\t\treturn new EShapeRectangle().copy( this );\n\t}\n\n\tcontainsAbs( x: number, y: number, ax: number, ay: number ): boolean {\n\t\tif( super.containsAbsBBox( x, y, ax, ay ) ) {\n\t\t\tconst fill = this.fill;\n\t\t\tconst stroke = this.stroke;\n\t\t\tif( fill.enable ) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tconst strokeWidth = stroke.width;\n\t\t\t\tconst strokeSide = stroke.side;\n\t\t\t\tif( stroke.enable && 0 < strokeWidth && strokeSide !== EShapeStrokeSide.NONE ) {\n\t\t\t\t\tconst wx = Math.max( 0.0, ax - strokeWidth );\n\t\t\t\t\tconst wy = Math.max( 0.0, ay - strokeWidth );\n\t\t\t\t\tif( ! this.containsAbsBBox( x, y, wx, wy ) ) {\n\t\t\t\t\t\tif( strokeSide === EShapeStrokeSide.ALL ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif( x <= -wx ) {\n\t\t\t\t\t\t\t\tif( y <= -wy ) {\n\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.TOP_OR_LEFT ) !== 0;\n\t\t\t\t\t\t\t\t} else if( +wy <= y ) {\n\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.BOTTOM_OR_LEFT ) !== 0;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.LEFT ) !== 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if( +wx <= x ) {\n\t\t\t\t\t\t\t\tif( y <= -wy ) {\n\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.TOP_OR_RIGHT ) !== 0;\n\t\t\t\t\t\t\t\t} else if( +wy <= y ) {\n\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.BOTTOM_OR_RIGHT ) !== 0;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.RIGHT ) !== 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif( y <= -wy ) {\n\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.TOP ) !== 0;\n\t\t\t\t\t\t\t\t} else if( +wy <= y ) {\n\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.BOTTOM ) !== 0;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapeRectangle } from \"./e-shape-rectangle\";\n\nexport class EShapeImage extends EShapeRectangle {\n\tconstructor( image?: HTMLImageElement, type = EShapeType.IMAGE ) {\n\t\tsuper( type );\n\t\tif( image != null ) {\n\t\t\tthis.image = image;\n\t\t\tthis.size.set( image.width, image.height );\n\t\t}\n\t\tthis.fill.alpha = 1.0;\n\t}\n\n\tclone(): EShapeImage {\n\t\treturn new EShapeImage( this.image ).copy( this );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeImageElements } from \"../e-shape-image-elements\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeImage } from \"./e-shape-image\";\n\nexport class EShapeImages {\n\tstatic from( dataUrl: string ): Promise<EShapeImage> {\n\t\treturn EShapeImageElements.toImageElement( dataUrl ).then(( imageElement: HTMLImageElement ) => {\n\t\t\treturn new EShapeImage( imageElement );\n\t\t});\n\t}\n\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeImage> | EShapeImage {\n\t\treturn EShapeDeserializer.deserialize( item, manager, EShapeImages.create() );\n\t}\n\n\tstatic create(): EShapeImage {\n\t\treturn new EShapeImage();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeStrokeSide } from \"../e-shape-stroke\";\nimport { EShapeTextUploaded } from \"./e-shape-text-uploaded\";\n\nexport class EShapeRectangleUploaded extends EShapeTextUploaded {\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tconst buffer = this.buffer;\n\t\tconst voffset = this.vertexOffset;\n\t\tconst ioffset = this.indexOffset;\n\n\t\t// Clippings\n\t\tbuffer.clippingBuffer.update();\n\t\tconst clippings = buffer.clippings;\n\t\tlet ic = voffset * 3;\n\t\tclippings[ ic + 0 ] = 1;\n\t\tclippings[ ic + 1 ] = 1;\n\t\tclippings[ ic + 2 ] = 0;\n\n\t\tclippings[ ic + 3 ] = 0;\n\t\tclippings[ ic + 4 ] = 1;\n\t\tclippings[ ic + 5 ] = 0;\n\n\t\tclippings[ ic + 6 ] = 1;\n\t\tclippings[ ic + 7 ] = 1;\n\t\tclippings[ ic + 8 ] = 0;\n\t\tic += 9;\n\n\t\tclippings[ ic + 0 ] = 0;\n\t\tclippings[ ic + 1 ] = 0;\n\t\tclippings[ ic + 2 ] = 0;\n\t\tic += 3;\n\n\t\tclippings[ ic +  0 ] = 1;\n\t\tclippings[ ic +  1 ] = 0;\n\t\tclippings[ ic +  2 ] = 0;\n\n\t\tclippings[ ic +  3 ] = 0;\n\t\tclippings[ ic +  4 ] = 0;\n\t\tclippings[ ic +  5 ] = 0;\n\n\t\tclippings[ ic +  6 ] = 0;\n\t\tclippings[ ic +  7 ] = 0;\n\t\tclippings[ ic +  8 ] = 0;\n\n\t\tclippings[ ic +  9 ] = 1;\n\t\tclippings[ ic + 10 ] = 0;\n\t\tclippings[ ic + 11 ] = 0;\n\t\tic += 12;\n\n\t\tclippings[ ic + 0 ] = 0;\n\t\tclippings[ ic + 1 ] = 0;\n\t\tclippings[ ic + 2 ] = 0;\n\t\tic += 3;\n\n\t\tclippings[ ic + 0 ] = 1;\n\t\tclippings[ ic + 1 ] = 1;\n\t\tclippings[ ic + 2 ] = 0;\n\n\t\tclippings[ ic + 3 ] = 0;\n\t\tclippings[ ic + 4 ] = 1;\n\t\tclippings[ ic + 5 ] = 0;\n\n\t\tclippings[ ic + 6 ] = 1;\n\t\tclippings[ ic + 7 ] = 1;\n\t\tclippings[ ic + 8 ] = 0;\n\n\t\t// Indices\n\t\tbuffer.indexBuffer.update();\n\t\tconst indices = buffer.indices;\n\t\tconst ii = ioffset * 3;\n\t\tindices[ ii +  0 ] = voffset + 0;\n\t\tindices[ ii +  1 ] = voffset + 1;\n\t\tindices[ ii +  2 ] = voffset + 3;\n\n\t\tindices[ ii +  3 ] = voffset + 1;\n\t\tindices[ ii +  4 ] = voffset + 2;\n\t\tindices[ ii +  5 ] = voffset + 3;\n\n\t\tindices[ ii +  6 ] = voffset + 0;\n\t\tindices[ ii +  7 ] = voffset + 5;\n\t\tindices[ ii +  8 ] = voffset + 4;\n\n\t\tindices[ ii +  9 ] = voffset + 6;\n\t\tindices[ ii + 10 ] = voffset + 2;\n\t\tindices[ ii + 11 ] = voffset + 7;\n\n\t\tindices[ ii + 12 ] = voffset + 4;\n\t\tindices[ ii + 13 ] = voffset + 5;\n\t\tindices[ ii + 14 ] = voffset + 9;\n\n\t\tindices[ ii + 15 ] = voffset + 9;\n\t\tindices[ ii + 16 ] = voffset + 8;\n\t\tindices[ ii + 17 ] = voffset + 10;\n\n\t\tindices[ ii + 18 ] = voffset + 8;\n\t\tindices[ ii + 19 ] = voffset + 11;\n\t\tindices[ ii + 20 ] = voffset + 10;\n\n\t\tindices[ ii + 21 ] = voffset + 6;\n\t\tindices[ ii + 22 ] = voffset + 7;\n\t\tindices[ ii + 23 ] = voffset + 11;\n\n\t\t// Text\n\t\tthis.initText();\n\n\t\tthis.update( shape );\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\tconst buffer = this.buffer;\n\t\tthis.updateType0Vertex( buffer, shape );\n\t\tthis.updateColor( buffer, shape );\n\t\tthis.updateType0Step( buffer, shape );\n\t\tthis.updateType0Uv( buffer, shape );\n\t\tthis.updateText( buffer, shape );\n\t}\n\n\tprotected updateType0Vertex( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst size = shape.size;\n\t\tconst sizeX = size.x;\n\t\tconst sizeY = size.y;\n\t\tconst transformLocalId = this.toTransformLocalId( shape );\n\t\tconst isSizeChanged = ( sizeX !== this.sizeX || sizeY !== this.sizeY );\n\t\tconst isTransformChanged = ( this.transformLocalId !== transformLocalId );\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tconst isStrokeChanged = ( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth );\n\t\tif( isSizeChanged || isTransformChanged || isStrokeChanged ) {\n\t\t\tthis.sizeX = sizeX;\n\t\t\tthis.sizeY = sizeY;\n\t\t\tthis.transformLocalId = transformLocalId;\n\n\t\t\t// Invalidate the stroke width to update the steps / antialiases.\n\t\t\tthis.strokeWidth = NaN;\n\n\t\t\t// Invalidate the text layout to update the text layout.\n\t\t\tthis.textSpacingHorizontal = NaN;\n\n\t\t\tbuffer.vertexBuffer.update();\n\n\t\t\t// Calculate the transformed positions\n\t\t\t//\n\t\t\t//  0       1       2\n\t\t\t// |-------|-------|\n\t\t\t// |4      |3,5,6  |7\n\t\t\t// |-------|-------|\n\t\t\t// |       |8      |\n\t\t\t// |-------|-------|\n\t\t\t//  9       10      11\n\t\t\t//\n\t\t\tconst s = strokeAlign * strokeWidth;\n\t\t\tconst sx = sizeX * 0.5 + (0 <= sizeX ? +s : -s);\n\t\t\tconst sy = sizeY * 0.5 + (0 <= sizeY ? +s : -s);\n\t\t\tconst internalTransform = shape.transform.internalTransform;\n\t\t\tconst work = this.buffer.work;\n\t\t\twork.set( -sx, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x0 = work.x;\n\t\t\tconst y0 = work.y;\n\t\t\twork.set( 0, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x1 = work.x;\n\t\t\tconst y1 = work.y;\n\t\t\tconst dx = x1 - x0;\n\t\t\tconst dy = y1 - y0;\n\t\t\tconst x3 = internalTransform.tx;\n\t\t\tconst y3 = internalTransform.ty;\n\t\t\tconst x10 = x3 + (x3 - x1);\n\t\t\tconst y10 = y3 + (y3 - y1);\n\t\t\tconst x4 = x3 - dx;\n\t\t\tconst y4 = y3 - dy;\n\n\t\t\t// World size\n\t\t\tthis.worldSizeXHalf = this.calcLength( x0, y0, x1, y1 );\n\t\t\tthis.worldSizeYHalf = this.calcLength( x0, y0, x4, y4 );\n\n\t\t\t// Vertices\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst vertices = buffer.vertices;\n\t\t\tlet iv = voffset * 2;\n\t\t\tvertices[ iv + 0 ] = x0;\n\t\t\tvertices[ iv + 1 ] = y0;\n\t\t\tvertices[ iv + 2 ] = x1;\n\t\t\tvertices[ iv + 3 ] = y1;\n\t\t\tvertices[ iv + 4 ] = x1 + dx;\n\t\t\tvertices[ iv + 5 ] = y1 + dy;\n\t\t\tiv += 6;\n\n\t\t\tvertices[ iv + 0 ] = x3;\n\t\t\tvertices[ iv + 1 ] = y3;\n\t\t\tiv += 2;\n\n\t\t\tvertices[ iv + 0 ] = x4;\n\t\t\tvertices[ iv + 1 ] = y4;\n\t\t\tvertices[ iv + 2 ] = x3;\n\t\t\tvertices[ iv + 3 ] = y3;\n\t\t\tvertices[ iv + 4 ] = x3;\n\t\t\tvertices[ iv + 5 ] = y3;\n\t\t\tvertices[ iv + 6 ] = x3 + dx;\n\t\t\tvertices[ iv + 7 ] = y3 + dy;\n\t\t\tiv += 8;\n\n\t\t\tvertices[ iv + 0 ] = x3;\n\t\t\tvertices[ iv + 1 ] = y3;\n\t\t\tiv += 2;\n\n\t\t\tvertices[ iv + 0 ] = x10 - dx;\n\t\t\tvertices[ iv + 1 ] = y10 - dy;\n\t\t\tvertices[ iv + 2 ] = x10;\n\t\t\tvertices[ iv + 3 ] = y10;\n\t\t\tvertices[ iv + 4 ] = x10 + dx;\n\t\t\tvertices[ iv + 5 ] = y10 + dy;\n\t\t}\n\t}\n\n\tprotected updateType0Step( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tconst strokeSide = stroke.side;\n\t\tif( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth || this.strokeSide !== strokeSide ) {\n\t\t\tthis.strokeWidth = strokeWidth;\n\t\t\tthis.strokeAlign = strokeAlign;\n\t\t\tthis.strokeSide = strokeSide;\n\t\t\tbuffer.stepBuffer.update();\n\t\t\tbuffer.antialiasBuffer.update();\n\n\t\t\tconst work = buffer.workStep;\n\t\t\tthis.calcStep( this.worldSizeXHalf, strokeWidth, work );\n\t\t\tconst swx = work[ 0 ];\n\t\t\tconst px0 = work[ 1 ];\n\t\t\tconst px1 = work[ 2 ];\n\n\t\t\tthis.calcStep( this.worldSizeYHalf, strokeWidth, work );\n\t\t\tconst swy = work[ 0 ];\n\t\t\tconst py0 = work[ 1 ];\n\t\t\tconst py1 = work[ 2 ];\n\n\t\t\tlet swt = swy;\n\t\t\tlet pt0 = py0;\n\t\t\tif( ! (strokeSide & EShapeStrokeSide.TOP) ) {\n\t\t\t\tswt = 1;\n\t\t\t\tpt0 = py1;\n\t\t\t}\n\t\t\tlet swr = swx;\n\t\t\tlet pr0 = px0;\n\t\t\tif( ! (strokeSide & EShapeStrokeSide.RIGHT) ) {\n\t\t\t\tswr = 1;\n\t\t\t\tpr0 = px1;\n\t\t\t}\n\t\t\tlet swb = swy;\n\t\t\tlet pb0 = py0;\n\t\t\tif( ! (strokeSide & EShapeStrokeSide.BOTTOM) ) {\n\t\t\t\tswb = 1;\n\t\t\t\tpb0 = py1;\n\t\t\t}\n\t\t\tlet swl = swx;\n\t\t\tlet pl0 = px0;\n\t\t\tif( ! (strokeSide & EShapeStrokeSide.LEFT) ) {\n\t\t\t\tswl = 1;\n\t\t\t\tpl0 = px1;\n\t\t\t}\n\t\t\tconst pc0 = 0.5 * (pl0 + pr0);\n\t\t\tconst pm0 = 0.5 * (pt0 + pb0);\n\n\t\t\tconst steps = buffer.steps;\n\t\t\tconst antialiases = buffer.antialiases;\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tlet is = voffset * 2;\n\t\t\tlet ia = voffset * 4;\n\n\t\t\t// 0\n\t\t\tsteps[ is + 0 ] = swl;\n\t\t\tsteps[ is + 1 ] = swt;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 1\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = swt;\n\t\t\tantialiases[ ia + 0 ] = pc0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 2\n\t\t\tsteps[ is + 0 ] = swr;\n\t\t\tsteps[ is + 1 ] = swt;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 3\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pc0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 4\n\t\t\tsteps[ is + 0 ] = swl;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pm0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 5\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pm0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 6\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = pm0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 7\n\t\t\tsteps[ is + 0 ] = swr;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = pm0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 8\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pc0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 9\n\t\t\tsteps[ is + 0 ] = swl;\n\t\t\tsteps[ is + 1 ] = swb;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 10\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = swb;\n\t\t\tantialiases[ ia + 0 ] = pc0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 11\n\t\t\tsteps[ is + 0 ] = swr;\n\t\t\tsteps[ is + 1 ] = swb;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\t\t}\n\t}\n\n\tprotected updateType0Uv( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst texture = this.toTexture( shape );\n\t\tconst textureTransformId = this.toTextureTransformId( texture );\n\t\tif( texture !== this.texture || textureTransformId !== this.textureTransformId ) {\n\t\t\tthis.texture = texture;\n\t\t\tthis.textureTransformId = textureTransformId;\n\n\t\t\tconst textureUvs = this.toTextureUvs( texture ) as any;\n\t\t\tconst x0 = textureUvs.x0;\n\t\t\tconst x1 = textureUvs.x1;\n\t\t\tconst x2 = textureUvs.x2;\n\t\t\tconst x3 = textureUvs.x3;\n\t\t\tconst y0 = textureUvs.y0;\n\t\t\tconst y1 = textureUvs.y1;\n\t\t\tconst y2 = textureUvs.y2;\n\t\t\tconst y3 = textureUvs.y3;\n\n\t\t\tconst x02 = 0.5 * ( x0 + x2 );\n\t\t\tconst y02 = 0.5 * ( y0 + y2 );\n\n\t\t\t// UVs\n\t\t\tbuffer.uvBuffer.update();\n\t\t\tconst uvs = buffer.uvs;\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tlet iuv = voffset * 2;\n\t\t\tuvs[ iuv + 0 ] = x0;\n\t\t\tuvs[ iuv + 1 ] = y0;\n\t\t\tuvs[ iuv + 2 ] = 0.5 * ( x0 + x1 );\n\t\t\tuvs[ iuv + 3 ] = 0.5 * ( y0 + y1 );\n\t\t\tuvs[ iuv + 4 ] = x1;\n\t\t\tuvs[ iuv + 5 ] = y1;\n\t\t\tiuv += 6;\n\n\t\t\tuvs[ iuv + 0 ] = x02;\n\t\t\tuvs[ iuv + 1 ] = y02;\n\t\t\tiuv += 2;\n\n\t\t\tuvs[ iuv + 0 ] = 0.5 * ( x0 + x3 );\n\t\t\tuvs[ iuv + 1 ] = 0.5 * ( y0 + y3 );\n\t\t\tuvs[ iuv + 2 ] = x02;\n\t\t\tuvs[ iuv + 3 ] = y02;\n\t\t\tuvs[ iuv + 4 ] = x02;\n\t\t\tuvs[ iuv + 5 ] = y02;\n\t\t\tuvs[ iuv + 6 ] = 0.5 * ( x1 + x2 );\n\t\t\tuvs[ iuv + 7 ] = 0.5 * ( y1 + y2 );\n\t\t\tiuv += 8;\n\n\t\t\tuvs[ iuv + 0 ] = x02;\n\t\t\tuvs[ iuv + 1 ] = y02;\n\t\t\tiuv += 2;\n\n\t\t\tuvs[ iuv + 0 ] = x3;\n\t\t\tuvs[ iuv + 1 ] = y3;\n\t\t\tuvs[ iuv + 2 ] = 0.5 * ( x3 + x2 );\n\t\t\tuvs[ iuv + 3 ] = 0.5 * ( y3 + y2 );\n\t\t\tuvs[ iuv + 4 ] = x2;\n\t\t\tuvs[ iuv + 5 ] = y2;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeRectangleUploaded } from \"./e-shape-rectangle-uploaded\";\nimport { EShapeTextUploadeds } from \"./e-shape-text-uploadeds\";\n\nexport class EShapeRectangleUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape,\n\t\tvoffset: number, ioffset: number\n\t): EShapeRectangleUploaded | null {\n\t\tconst tcount = EShapeTextUploadeds.getTextCount( shape, buffer.workCount );\n\t\tconst tvcount = tcount.vertexCount;\n\t\tconst ticount = tcount.indexCount;\n\t\tconst vcount = 12 + tvcount;\n\t\tconst icount = 8 + ticount;\n\t\tif( voffset + vcount < buffer.vertexCapacity && ioffset + icount < buffer.indexCapacity ) {\n\t\t\treturn new EShapeRectangleUploaded(\n\t\t\t\tbuffer, voffset, ioffset, tvcount, ticount, vcount, icount\n\t\t\t).init( shape );\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeImages } from \"../shape/variant/e-shape-images\";\nimport { EShapeRectangleUploadeds } from \"../shape/variant/e-shape-rectangle-uploadeds\";\n\nexport const loadShapeImage = () => {\n\tEShapeUploadeds[ EShapeType.IMAGE ] = EShapeRectangleUploadeds.create;\n\tEShapeDeserializers[ EShapeType.IMAGE ] = EShapeImages.deserialize;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeTextUploaded } from \"./e-shape-text-uploaded\";\n\nexport class EShapeLabelUploaded extends EShapeTextUploaded {\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tthis.initText();\n\t\tthis.update( shape );\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\tconst buffer = this.buffer;\n\t\tthis.updateLabelVertex( buffer, shape );\n\t\tthis.updateLabelUv( buffer, shape );\n\t\tthis.updateText( buffer, shape );\n\t}\n\n\tupdateLabelVertex( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst size = shape.size;\n\t\tconst sizeX = size.x;\n\t\tconst sizeY = size.y;\n\t\tconst isSizeChanged = ( sizeX !== this.sizeX || sizeY !== this.sizeY );\n\t\tconst transformLocalId = this.toTransformLocalId( shape );\n\t\tconst isTransformChanged = ( this.transformLocalId !== transformLocalId );\n\t\tif( isSizeChanged || isTransformChanged ) {\n\t\t\tthis.sizeX = sizeX;\n\t\t\tthis.sizeY = sizeY;\n\t\t\tthis.transformLocalId = transformLocalId;\n\n\t\t\t// Invalidate the text layout to update the text layout.\n\t\t\tthis.textSpacingHorizontal = NaN;\n\t\t}\n\t}\n\n\tupdateLabelUv( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tthis.texture = this.toTexture( shape );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeLabelUploaded } from \"./e-shape-label-uploaded\";\nimport { EShapeTextUploadeds } from \"./e-shape-text-uploadeds\";\n\nexport class EShapeLabelUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape, voffset: number, ioffset: number\n\t): EShapeLabelUploaded | null {\n\t\tconst tcount = EShapeTextUploadeds.getTextCount( shape, buffer.workCount );\n\t\tconst tvcount = tcount.vertexCount;\n\t\tconst ticount = tcount.indexCount;\n\t\tconst vcount = tvcount;\n\t\tconst icount = ticount;\n\t\tif( voffset + vcount < buffer.vertexCapacity && ioffset + icount < buffer.indexCapacity ) {\n\t\t\treturn new EShapeLabelUploaded(\n\t\t\t\tbuffer, voffset, ioffset, tvcount, ticount, vcount, icount\n\t\t\t).init( shape );\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapePrimitive } from \"./e-shape-primitive\";\n\nexport class EShapeLabel extends EShapePrimitive {\n\tconstructor( type: EShapeType = EShapeType.LABEL ) {\n\t\tsuper( type );\n\t}\n\n\tclone(): EShapeLabel {\n\t\treturn new EShapeLabel().copy( this );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeLabel } from \"./e-shape-label\";\n\nexport class EShapeLabels {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeLabel> | EShapeLabel {\n\t\treturn EShapeDeserializer.deserialize( item, manager, new EShapeLabel() );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeLabelUploadeds } from \"../shape/variant/e-shape-label-uploadeds\";\nimport { EShapeLabels } from \"../shape/variant/e-shape-labels\";\n\nexport const loadShapeLabel = () => {\n\tEShapeUploadeds[ EShapeType.LABEL ] = EShapeLabelUploadeds.create;\n\tEShapeDeserializers[ EShapeType.LABEL ] = EShapeLabels.deserialize;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix } from \"pixi.js\";\nimport { utilIndexOf } from \"../../util/util-index-of\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapePoints, EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapePointsStyleUploadeds } from \"../e-shape-points-style-uploadeds\";\nimport { EShapeTextUploaded } from \"./e-shape-text-uploaded\";\n\nconst FMIN: number = 0.00001;\n\nexport class EShapeLineUploaded extends EShapeTextUploaded {\n\tprotected pointCount: number;\n\tprotected pointId: number;\n\tprotected pointsClosed: boolean;\n\tprotected pointsStyle: EShapePointsStyle;\n\tprotected length: number;\n\n\tconstructor(\n\t\tbuffer: EShapeBuffer,\n\t\tvoffset: number, ioffset: number,\n\t\ttvcount: number, ticount: number,\n\t\tvcount: number, icount: number,\n\t\tpointCount: number, pointsClosed: boolean\n\t) {\n\t\tsuper( buffer, voffset, ioffset, tvcount, ticount, vcount, icount );\n\t\tthis.pointId = NaN;\n\t\tthis.pointCount = pointCount;\n\t\tthis.pointsClosed = pointsClosed;\n\t\tthis.pointsStyle = EShapePointsStyle.NONE;\n\t\tthis.length = 1;\n\t}\n\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tconst buffer = this.buffer;\n\t\tconst voffset = this.vertexOffset;\n\t\tconst ioffset = this.indexOffset;\n\t\tconst pointCount = this.pointCount;\n\t\tconst pointsClosed = this.pointsClosed;\n\n\t\t// Clipping & indices\n\t\tif( 2 <= pointCount ) {\n\t\t\tbuffer.clippingBuffer.update();\n\t\t\tconst clippings = buffer.clippings;\n\t\t\tbuffer.indexBuffer.update();\n\t\t\tconst indices = buffer.indices;\n\n\t\t\tlet ic = voffset * 3;\n\t\t\tlet ii = ioffset * 3;\n\t\t\tlet io = voffset;\n\n\t\t\t// First\n\t\t\tif( ! pointsClosed ) {\n\t\t\t\tclippings[ ic +  0 ] = 1;\n\t\t\t\tclippings[ ic +  1 ] = 0;\n\t\t\t\tclippings[ ic +  2 ] = 3;\n\n\t\t\t\tclippings[ ic +  3 ] = 0;\n\t\t\t\tclippings[ ic +  4 ] = 1;\n\t\t\t\tclippings[ ic +  5 ] = 5;\n\t\t\t\tic += 6;\n\n\t\t\t\tindices[ ii + 0 ] = io + 0;\n\t\t\t\tindices[ ii + 1 ] = io + 2;\n\t\t\t\tindices[ ii + 2 ] = io + 1;\n\n\t\t\t\tindices[ ii + 3 ] = io + 1;\n\t\t\t\tindices[ ii + 4 ] = io + 2;\n\t\t\t\tindices[ ii + 5 ] = io + 3;\n\t\t\t\tio += 2;\n\t\t\t\tii += 6;\n\t\t\t}\n\n\t\t\t// Middle\n\t\t\tfor( let i = (pointsClosed ? 0 : 1), imax = pointCount - i; i < imax; ++i ) {\n\t\t\t\tclippings[ ic +  0 ] = 1;\n\t\t\t\tclippings[ ic +  1 ] = 0;\n\t\t\t\tclippings[ ic +  2 ] = 3;\n\n\t\t\t\tclippings[ ic +  3 ] = 0;\n\t\t\t\tclippings[ ic +  4 ] = 1;\n\t\t\t\tclippings[ ic +  5 ] = 5;\n\n\t\t\t\tclippings[ ic +  6 ] = 1;\n\t\t\t\tclippings[ ic +  7 ] = 0;\n\t\t\t\tclippings[ ic +  8 ] = 4;\n\n\t\t\t\tclippings[ ic +  9 ] = 0;\n\t\t\t\tclippings[ ic + 10 ] = 1;\n\t\t\t\tclippings[ ic + 11 ] = 6;\n\t\t\t\tic += 12;\n\n\t\t\t\tindices[ ii +  0 ] = io + 0;\n\t\t\t\tindices[ ii +  1 ] = io + 2;\n\t\t\t\tindices[ ii +  2 ] = io + 1;\n\n\t\t\t\tindices[ ii +  3 ] = io + 1;\n\t\t\t\tindices[ ii +  4 ] = io + 2;\n\t\t\t\tindices[ ii +  5 ] = io + 3;\n\n\t\t\t\tindices[ ii +  6 ] = io + 2;\n\t\t\t\tindices[ ii +  7 ] = io + 4;\n\t\t\t\tindices[ ii +  8 ] = io + 3;\n\n\t\t\t\tindices[ ii +  9 ] = io + 3;\n\t\t\t\tindices[ ii + 10 ] = io + 4;\n\t\t\t\tindices[ ii + 11 ] = io + 5;\n\t\t\t\tio += 4;\n\t\t\t\tii += 12;\n\t\t\t}\n\n\t\t\t// Last\n\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\tclippings[ ic + 2 ] = 3;\n\n\t\t\tclippings[ ic + 3 ] = 0;\n\t\t\tclippings[ ic + 4 ] = 1;\n\t\t\tclippings[ ic + 5 ] = 5;\n\t\t}\n\n\t\t// Text\n\t\tthis.initText();\n\n\t\t//\n\t\tthis.update( shape );\n\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\tconst buffer = this.buffer;\n\t\tconst points = shape.points;\n\t\tif( points != null && 2 <= points.length ) {\n\t\t\tconst pointId = points.id;\n\t\t\tconst isPointChanged = ( pointId !== this.pointId );\n\t\t\tconst stroke = shape.stroke;\n\t\t\tconst strokeWidth = ( stroke.enable ? stroke.width : 0 );\n\t\t\tconst isStrokeWidthChanged = ( strokeWidth !== this.strokeWidth );\n\t\t\tconst transformLocalId = this.toTransformLocalId( shape );\n\t\t\tconst isTransformChanged = ( this.transformLocalId !== transformLocalId );\n\t\t\tconst pointsStyle = points.style;\n\t\t\tconst isPointsStyleChanged = ( pointsStyle !== this.pointsStyle );\n\t\t\tif( isPointChanged || isTransformChanged || isStrokeWidthChanged || isPointsStyleChanged ) {\n\t\t\t\tthis.pointId = pointId;\n\t\t\t\tthis.strokeWidth = strokeWidth;\n\t\t\t\tthis.transformLocalId = transformLocalId;\n\t\t\t\tthis.pointsStyle = pointsStyle;\n\t\t\t\tbuffer.vertexBuffer.update();\n\t\t\t\tbuffer.stepBuffer.update();\n\t\t\t\tbuffer.antialiasBuffer.update();\n\t\t\t\tbuffer.colorFillBuffer.update();\n\n\t\t\t\tif( isPointChanged || isTransformChanged ) {\n\t\t\t\t\t// Invalidate the text layout to update the text layout.\n\t\t\t\t\tthis.textSpacingHorizontal = NaN;\n\t\t\t\t}\n\t\t\t\tif( isPointChanged ) {\n\t\t\t\t\t// Invalidate the texture transform ID to update the UVs\n\t\t\t\t\tthis.textureTransformId = NaN;\n\t\t\t\t}\n\n\t\t\t\tconst voffset = this.vertexOffset;\n\t\t\t\tconst vcount = this.vertexCount - this.textVertexCount;\n\t\t\t\tthis.updateLineVertexStepAndColorFill(\n\t\t\t\t\tbuffer,\n\t\t\t\t\tpoints, strokeWidth, shape.transform.internalTransform,\n\t\t\t\t\tvoffset, vcount\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.updateColor( buffer, shape );\n\t\tthis.updateLineUv( buffer, shape );\n\t\tthis.updateText( buffer, shape );\n\t}\n\n\tprotected updateColorFillAndStroke( buffer: EShapeBuffer, shape: EShape, vertexCount: number ) {\n\t\tthis.updateColorStroke( buffer, shape, vertexCount );\n\t}\n\n\tisCompatible( shape: EShape ): boolean {\n\t\tif( super.isCompatible( shape ) ) {\n\t\t\tconst points = shape.points;\n\t\t\tif( points ) {\n\t\t\t\treturn (\n\t\t\t\t\tthis.pointCount === points.length &&\n\t\t\t\t\tthis.pointsClosed === (!!( points.style & EShapePointsStyle.CLOSED ))\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn (\n\t\t\t\t\tthis.pointCount === 0 &&\n\t\t\t\t\tthis.pointsClosed === false\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected updateLineVertexStepAndColorFill(\n\t\tbuffer: EShapeBuffer,\n\t\tpoints: EShapePoints,\n\t\tstrokeWidth: number,\n\t\tinternalTransform: Matrix,\n\t\tvoffset: number,\n\t\tvcount: number\n\t): void {\n\t\tlet iv = voffset * 2;\n\t\tlet ia = voffset * 4;\n\t\tconst vertices = buffer.vertices;\n\t\tconst steps = buffer.steps;\n\t\tconst antialiases = buffer.antialiases;\n\t\tconst colorFills = buffer.colorFills;\n\t\tconst pointCount = points.length;\n\t\tconst pointValues = points.values;\n\t\tconst pointSegments = points.segments;\n\t\tconst pointsStyle = points.style;\n\t\tconst closed = ( (pointsStyle & EShapePointsStyle.CLOSED) !== 0 );\n\t\tconst scaleInvariant = EShapePointsStyleUploadeds.toScaleInvariant( pointsStyle );\n\n\t\t//\n\t\tlet l = 0;\n\t\tlet lprev = 0;\n\t\tlet lnext = 0;\n\t\tlet llop = 0;\n\t\tlet llo = 0;\n\t\tlet lmax = 0;\n\t\tlet pprevx = 0;\n\t\tlet pprevy = 0;\n\t\tlet px = 0;\n\t\tlet py = 0;\n\t\tlet pnextx = 0;\n\t\tlet pnexty = 0;\n\t\tlet pseg = false;\n\t\tlet psegnext = false;\n\t\tlet icfprev = voffset * 4;\n\t\tlet loffset = 0;\n\n\t\t// First point\n\t\tconst work = buffer.work;\n\t\twork.set( pointValues[ 0 ], pointValues[ 1 ] );\n\t\tinternalTransform.apply( work, work );\n\t\tconst pfirstx = work.x;\n\t\tconst pfirsty = work.y;\n\t\tconst psegfirst = ( 0 <= utilIndexOf( pointSegments, 0 ) );\n\n\t\t// Last point\n\t\tconst lastIndex = (pointCount - 1) << 1;\n\t\twork.set( pointValues[ lastIndex + 0 ], pointValues[ lastIndex + 1 ] );\n\t\tinternalTransform.apply( work, work );\n\t\tconst plastx = work.x;\n\t\tconst plasty = work.y;\n\t\tconst pseglast = ( 0 <= utilIndexOf( pointSegments, pointCount - 1 ) );\n\n\t\t// Second point\n\t\tlet psecondx = plastx;\n\t\tlet psecondy = plasty;\n\t\tlet psegsecond = pseglast;\n\t\tif( 2 < pointCount ) {\n\t\t\twork.set( pointValues[ 2 ], pointValues[ 3 ] );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tpsecondx = work.x;\n\t\t\tpsecondy = work.y;\n\t\t\tpsegsecond = ( 0 <= utilIndexOf( pointSegments, 1 ) );\n\t\t}\n\n\t\t// First segment\n\t\tif( closed ) {\n\t\t\tpx = plastx;\n\t\t\tpy = plasty;\n\t\t\tpnextx = pfirstx;\n\t\t\tpnexty = pfirsty;\n\t\t\tpseg = pseglast;\n\t\t\tpsegnext = psegfirst;\n\t\t} else {\n\t\t\tpprevx = pfirstx - (psecondx - pfirstx);\n\t\t\tpprevy = pfirsty - (psecondy - pfirsty);\n\t\t\tpx = pfirstx;\n\t\t\tpy = pfirsty;\n\t\t\tpnextx = psecondx;\n\t\t\tpnexty = psecondy;\n\t\t\tpseg = psegfirst;\n\t\t\tpsegnext = psegsecond;\n\t\t\tlnext += this.calcLength( px, py, pnextx, pnexty );\n\n\t\t\t//\n\t\t\tvertices[ iv + 0 ] = px;\n\t\t\tvertices[ iv + 1 ] = py;\n\t\t\tvertices[ iv + 2 ] = px;\n\t\t\tvertices[ iv + 3 ] = py;\n\t\t\tsteps[ iv + 0 ] = strokeWidth;\n\t\t\tsteps[ iv + 1 ] = scaleInvariant;\n\t\t\tsteps[ iv + 2 ] = strokeWidth;\n\t\t\tsteps[ iv + 3 ] = scaleInvariant;\n\t\t\tantialiases[ ia + 0 ] = pprevx;\n\t\t\tantialiases[ ia + 1 ] = pprevy;\n\t\t\tantialiases[ ia + 2 ] = pnextx;\n\t\t\tantialiases[ ia + 3 ] = pnexty;\n\t\t\tantialiases[ ia + 4 ] = pprevx;\n\t\t\tantialiases[ ia + 5 ] = pprevy;\n\t\t\tantialiases[ ia + 6 ] = pnextx;\n\t\t\tantialiases[ ia + 7 ] = pnexty;\n\t\t\tcolorFills[ ia + 0 ] = llo;\n\t\t\tcolorFills[ ia + 4 ] = llo;\n\t\t\tiv += 4;\n\t\t\tia += 8;\n\t\t}\n\n\t\t// Middle segments\n\t\tfor( let i = ( closed ? 0 : 1 ), imax = pointCount - i; i < imax; ++i ) {\n\t\t\tpprevx = px;\n\t\t\tpprevy = py;\n\t\t\tpx = pnextx;\n\t\t\tpy = pnexty;\n\t\t\tpseg = psegnext;\n\t\t\tif( i === pointCount - 2 ) {\n\t\t\t\tpnextx = plastx;\n\t\t\t\tpnexty = plasty;\n\t\t\t\tpsegnext = pseglast;\n\t\t\t} else if( i === 0 ) {\n\t\t\t\tpnextx = psecondx;\n\t\t\t\tpnexty = psecondy;\n\t\t\t\tpsegnext = psegsecond;\n\t\t\t} else if( i < pointCount - 1 ) {\n\t\t\t\tconst nextIndex = (i + 1) << 1;\n\t\t\t\twork.set( pointValues[ nextIndex + 0 ], pointValues[ nextIndex + 1 ] );\n\t\t\t\tinternalTransform.apply( work, work );\n\t\t\t\tpnextx = work.x;\n\t\t\t\tpnexty = work.y;\n\t\t\t\tpsegnext = ( 0 <= utilIndexOf( pointSegments, i + 1 ) );\n\t\t\t} else {\n\t\t\t\tpnextx = pfirstx;\n\t\t\t\tpnexty = pfirsty;\n\t\t\t\tpsegnext = psegfirst;\n\t\t\t}\n\t\t\tlprev = l;\n\t\t\tl = lnext;\n\t\t\tlnext += this.calcLength( px, py, pnextx, pnexty );\n\n\t\t\tlet pnextxn = pnextx;\n\t\t\tlet pnextyn = pnexty;\n\t\t\tlet loffsetprev = loffset;\n\t\t\tif( pseg ) {\n\t\t\t\tpprevx = px - (pnextx - px);\n\t\t\t\tpprevy = py - (pnexty - py);\n\n\t\t\t\tlmax = Math.max( lmax, llo );\n\n\t\t\t\tllop = lprev - loffset;\n\t\t\t\tEShapePointsStyleUploadeds.toDash( llop, strokeWidth, pointsStyle, work );\n\t\t\t\tconst dash0 = work.x;\n\t\t\t\tconst dash1 = work.y;\n\t\t\t\tfor( let j = icfprev; j < ia + 8; j += 4 ) {\n\t\t\t\t\tcolorFills[ j + 1 ] = dash0;\n\t\t\t\t\tcolorFills[ j + 2 ] = dash1;\n\t\t\t\t\tcolorFills[ j + 3 ] = llop;\n\t\t\t\t}\n\t\t\t\ticfprev = ia + 8;\n\t\t\t\tloffsetprev = loffset;\n\t\t\t\tloffset = l;\n\t\t\t} else if( psegnext ) {\n\t\t\t\tpnextxn = px + (px - pprevx);\n\t\t\t\tpnextyn = py + (py - pprevy);\n\t\t\t}\n\n\t\t\t// Vertices\n\t\t\tvertices[ iv + 0 ] = px;\n\t\t\tvertices[ iv + 1 ] = py;\n\t\t\tvertices[ iv + 2 ] = px;\n\t\t\tvertices[ iv + 3 ] = py;\n\t\t\tsteps[ iv + 0 ] = strokeWidth;\n\t\t\tsteps[ iv + 1 ] = scaleInvariant;\n\t\t\tsteps[ iv + 2 ] = strokeWidth;\n\t\t\tsteps[ iv + 3 ] = scaleInvariant;\n\t\t\tantialiases[ ia + 0 ] = pprevx;\n\t\t\tantialiases[ ia + 1 ] = pprevy;\n\t\t\tantialiases[ ia + 2 ] = pnextxn;\n\t\t\tantialiases[ ia + 3 ] = pnextyn;\n\t\t\tantialiases[ ia + 4 ] = pprevx;\n\t\t\tantialiases[ ia + 5 ] = pprevy;\n\t\t\tantialiases[ ia + 6 ] = pnextxn;\n\t\t\tantialiases[ ia + 7 ] = pnextyn;\n\t\t\tllop = l - loffsetprev;\n\t\t\tcolorFills[ ia + 0 ] = llop;\n\t\t\tcolorFills[ ia + 4 ] = llop;\n\t\t\tiv += 4;\n\t\t\tia += 8;\n\n\t\t\tvertices[ iv + 0 ] = px;\n\t\t\tvertices[ iv + 1 ] = py;\n\t\t\tvertices[ iv + 2 ] = px;\n\t\t\tvertices[ iv + 3 ] = py;\n\t\t\tsteps[ iv + 0 ] = strokeWidth;\n\t\t\tsteps[ iv + 1 ] = scaleInvariant;\n\t\t\tsteps[ iv + 2 ] = strokeWidth;\n\t\t\tsteps[ iv + 3 ] = scaleInvariant;\n\t\t\tantialiases[ ia + 0 ] = pprevx;\n\t\t\tantialiases[ ia + 1 ] = pprevy;\n\t\t\tantialiases[ ia + 2 ] = pnextxn;\n\t\t\tantialiases[ ia + 3 ] = pnextyn;\n\t\t\tantialiases[ ia + 4 ] = pprevx;\n\t\t\tantialiases[ ia + 5 ] = pprevy;\n\t\t\tantialiases[ ia + 6 ] = pnextxn;\n\t\t\tantialiases[ ia + 7 ] = pnextyn;\n\t\t\tllo = l - loffset;\n\t\t\tcolorFills[ ia + 0 ] = llo;\n\t\t\tcolorFills[ ia + 4 ] = llo;\n\t\t\tiv += 4;\n\t\t\tia += 8;\n\t\t}\n\n\t\t// Last segment\n\t\t{\n\t\t\tpprevx = px;\n\t\t\tpprevy = py;\n\t\t\tpx = pnextx;\n\t\t\tpy = pnexty;\n\t\t\tpseg = psegnext;\n\t\t\tif( closed ) {\n\t\t\t\tpnextx = psecondx;\n\t\t\t\tpnexty = psecondy;\n\t\t\t\tpsegnext = psegsecond;\n\t\t\t} else {\n\t\t\t\tpnextx = px + (px - pprevx);\n\t\t\t\tpnexty = py + (py - pprevy);\n\t\t\t\tpsegnext = false;\n\t\t\t}\n\t\t\tlprev = l;\n\t\t\tl = lnext;\n\n\t\t\tlet pnextxn = pnextx;\n\t\t\tlet pnextyn = pnexty;\n\t\t\tlet loffsetprev = loffset;\n\t\t\tif( pseg ) {\n\t\t\t\tpprevx = px - (pnextx - px);\n\t\t\t\tpprevy = py - (pnexty - py);\n\n\t\t\t\tlmax = Math.max( lmax, llo );\n\n\t\t\t\tllop = lprev - loffset;\n\t\t\t\tEShapePointsStyleUploadeds.toDash( llop, strokeWidth, pointsStyle, work );\n\t\t\t\tconst dash0 = work.x;\n\t\t\t\tconst dash1 = work.y;\n\t\t\t\tfor( let j = icfprev; j < ia + 8; j += 4 ) {\n\t\t\t\t\tcolorFills[ j + 1 ] = dash0;\n\t\t\t\t\tcolorFills[ j + 2 ] = dash1;\n\t\t\t\t\tcolorFills[ j + 3 ] = llop;\n\t\t\t\t}\n\t\t\t\ticfprev = ia + 8;\n\t\t\t\tloffsetprev = loffset;\n\t\t\t\tloffset = l;\n\t\t\t} else if( psegnext ) {\n\t\t\t\tpnextxn = px + (px - pprevx);\n\t\t\t\tpnextyn = py + (py - pprevy);\n\t\t\t}\n\n\t\t\t// Vertices\n\t\t\tvertices[ iv + 0 ] = px;\n\t\t\tvertices[ iv + 1 ] = py;\n\t\t\tvertices[ iv + 2 ] = px;\n\t\t\tvertices[ iv + 3 ] = py;\n\t\t\tsteps[ iv + 0 ] = strokeWidth;\n\t\t\tsteps[ iv + 1 ] = scaleInvariant;\n\t\t\tsteps[ iv + 2 ] = strokeWidth;\n\t\t\tsteps[ iv + 3 ] = scaleInvariant;\n\t\t\tantialiases[ ia + 0 ] = pprevx;\n\t\t\tantialiases[ ia + 1 ] = pprevy;\n\t\t\tantialiases[ ia + 2 ] = pnextxn;\n\t\t\tantialiases[ ia + 3 ] = pnextyn;\n\t\t\tantialiases[ ia + 4 ] = pprevx;\n\t\t\tantialiases[ ia + 5 ] = pprevy;\n\t\t\tantialiases[ ia + 6 ] = pnextxn;\n\t\t\tantialiases[ ia + 7 ] = pnextyn;\n\t\t\tllop = l - loffsetprev;\n\t\t\tlmax = Math.max( lmax, llop );\n\t\t\tcolorFills[ ia + 0 ] = llop;\n\t\t\tcolorFills[ ia + 4 ] = llop;\n\t\t\tiv += 4;\n\t\t\tia += 8;\n\n\t\t\t// Total length\n\t\t\tthis.length = lmax;\n\t\t\tif( icfprev < ia ) {\n\t\t\t\tEShapePointsStyleUploadeds.toDash( llop, strokeWidth, pointsStyle, work );\n\t\t\t\tconst dash0 = work.x;\n\t\t\t\tconst dash1 = work.y;\n\t\t\t\tif( closed ) {\n\t\t\t\t\tfor( let i = icfprev; i < ia; i += 4 ) {\n\t\t\t\t\t\tcolorFills[ i + 1 ] = dash0;\n\t\t\t\t\t\tcolorFills[ i + 2 ] = dash1;\n\t\t\t\t\t\tcolorFills[ i + 3 ] = -1;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor( let i = icfprev; i < ia; i += 4 ) {\n\t\t\t\t\t\tcolorFills[ i + 1 ] = dash0;\n\t\t\t\t\t\tcolorFills[ i + 2 ] = dash1;\n\t\t\t\t\t\tcolorFills[ i + 3 ] = llop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateLineUv( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst texture = this.toTexture( shape );\n\t\tconst textureTransformId = this.toTextureTransformId( texture );\n\t\tif( texture !== this.texture || textureTransformId !== this.textureTransformId ) {\n\t\t\tthis.texture = texture;\n\t\t\tthis.textureTransformId = textureTransformId;\n\n\t\t\tconst pointCount = this.pointCount;\n\t\t\tif( 2 <= pointCount ) {\n\t\t\t\tconst textureUvs = this.toTextureUvs( texture ) as any;\n\t\t\t\tconst x0 = textureUvs.x0;\n\t\t\t\tconst x1 = textureUvs.x1;\n\t\t\t\tconst x2 = textureUvs.x2;\n\t\t\t\tconst x3 = textureUvs.x3;\n\t\t\t\tconst y0 = textureUvs.y0;\n\t\t\t\tconst y1 = textureUvs.y1;\n\t\t\t\tconst y2 = textureUvs.y2;\n\t\t\t\tconst y3 = textureUvs.y3;\n\n\t\t\t\tconst dx01 = x1 - x0;\n\t\t\t\tconst dy01 = y1 - y0;\n\t\t\t\tconst dx32 = x2 - x3;\n\t\t\t\tconst dy32 = y2 - y3;\n\n\t\t\t\t// Uvs\n\t\t\t\tbuffer.uvBuffer.update();\n\t\t\t\tconst uvs = buffer.uvs;\n\t\t\t\tconst colorFills = buffer.colorFills;\n\t\t\t\tconst closed = this.pointsClosed;\n\t\t\t\tconst voffset = this.vertexOffset;\n\n\t\t\t\tlet iuv = voffset * 2;\n\t\t\t\tlet icf = voffset * 4;\n\t\t\t\tconst lengthInverse = 1 / Math.max( FMIN, this.length );\n\t\t\t\tlet r = 0;\n\n\t\t\t\t// UV: First\n\t\t\t\tif( ! closed ) {\n\t\t\t\t\tr = colorFills[ icf ] * lengthInverse;\n\t\t\t\t\tuvs[ iuv + 0 ] = x0 + r * dx01;\n\t\t\t\t\tuvs[ iuv + 1 ] = y0 + r * dy01;\n\t\t\t\t\tuvs[ iuv + 2 ] = x3 + r * dx32;\n\t\t\t\t\tuvs[ iuv + 3 ] = y3 + r * dy32;\n\t\t\t\t\tiuv += 4;\n\t\t\t\t\ticf += 8;\n\t\t\t\t}\n\n\t\t\t\t// UV: Middle\n\t\t\t\tfor( let i = (closed ? 0 : 1), imax = pointCount - i; i < imax; ++i ) {\n\t\t\t\t\tr = colorFills[ icf ] * lengthInverse;\n\t\t\t\t\tuvs[ iuv + 0 ] = x0 + r * dx01;\n\t\t\t\t\tuvs[ iuv + 1 ] = y0 + r * dy01;\n\t\t\t\t\tuvs[ iuv + 2 ] = x3 + r * dx32;\n\t\t\t\t\tuvs[ iuv + 3 ] = y3 + r * dy32;\n\t\t\t\t\tiuv += 4;\n\t\t\t\t\ticf += 8;\n\n\t\t\t\t\tr = colorFills[ icf ] * lengthInverse;\n\t\t\t\t\tuvs[ iuv + 0 ] = x0 + r * dx01;\n\t\t\t\t\tuvs[ iuv + 1 ] = y0 + r * dy01;\n\t\t\t\t\tuvs[ iuv + 2 ] = x3 + r * dx32;\n\t\t\t\t\tuvs[ iuv + 3 ] = y3 + r * dy32;\n\t\t\t\t\tiuv += 4;\n\t\t\t\t\ticf += 8;\n\t\t\t\t}\n\n\t\t\t\t// UV: Last\n\t\t\t\tr = colorFills[ icf ] * lengthInverse;\n\t\t\t\tuvs[ iuv + 0 ] = x0 + r * dx01;\n\t\t\t\tuvs[ iuv + 1 ] = y0 + r * dy01;\n\t\t\t\tuvs[ iuv + 2 ] = x3 + r * dx32;\n\t\t\t\tuvs[ iuv + 3 ] = y3 + r * dy32;\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapeLineUploaded } from \"./e-shape-line-uploaded\";\nimport { EShapeTextUploadeds } from \"./e-shape-text-uploadeds\";\n\nexport class EShapeLineUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape, voffset: number, ioffset: number\n\t): EShapeLineUploaded | null {\n\t\tconst points = shape.points;\n\t\tconst pointsClosed = ( points ? (points.style & EShapePointsStyle.CLOSED) !== 0 : false );\n\t\tconst pointCount = ( points ? points.length : 0 );\n\t\tconst tcount = EShapeTextUploadeds.getTextCount( shape, buffer.workCount );\n\t\tconst tvcount = tcount.vertexCount;\n\t\tconst ticount = tcount.indexCount;\n\t\tlet vcount = tvcount;\n\t\tlet icount = ticount;\n\t\tif( 2 <= pointCount ) {\n\t\t\tif( pointsClosed ) {\n\t\t\t\tvcount += pointCount * 4 + 2;\n\t\t\t\ticount += pointCount * 4;\n\t\t\t} else {\n\t\t\t\tvcount += (pointCount - 2) * 4 + 2 + 2;\n\t\t\t\ticount += (pointCount - 2) * 4 + 2;\n\t\t\t}\n\t\t}\n\t\tif( voffset + vcount < buffer.vertexCapacity && ioffset + icount < buffer.indexCapacity ) {\n\t\t\treturn new EShapeLineUploaded(\n\t\t\t\tbuffer, voffset, ioffset, tvcount, ticount, vcount, icount, pointCount, pointsClosed\n\t\t\t).init( shape );\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix, Point } from \"pixi.js\";\nimport { EShapePoints, EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapePointsParent } from \"../e-shape-points-parent\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\n\nexport class EShapeLinePoints implements EShapePoints {\n\tprotected _parent: EShapePointsParent;\n\tprotected _valuesBase?: number[];\n\tprotected _valuesBaseLength: number;\n\tprotected _values: number[];\n\tprotected _segments: number[];\n\treadonly position: Point;\n\tprotected _sizeBase: Point;\n\treadonly size: Point;\n\tprotected _id: number;\n\tprotected _style: EShapePointsStyle;\n\n\tconstructor(\n\t\tparent: EShapePointsParent,\n\t\tpoints: number[],\n\t\tsegments: number[],\n\t\tstyle: EShapePointsStyle\n\t) {\n\t\t// Calculate the center\n\t\tconst values: number[] = [];\n\t\tlet minX = 0;\n\t\tlet maxX = 0;\n\t\tlet minY = 0;\n\t\tlet maxY = 0;\n\t\tconst pointsLength = points.length;\n\t\tif( 2 <= pointsLength ) {\n\t\t\tminX = maxX = points[ 0 ];\n\t\t\tminY = maxY = points[ 1 ];\n\t\t\tfor( let i = 2; i < pointsLength; i += 2 ) {\n\t\t\t\tconst x = points[ i ];\n\t\t\t\tconst y = points[ i + 1 ];\n\t\t\t\tminX = Math.min( minX, x );\n\t\t\t\tmaxX = Math.max( maxX, x );\n\t\t\t\tminY = Math.min( minY, y );\n\t\t\t\tmaxY = Math.max( maxY, y );\n\t\t\t}\n\t\t}\n\t\tconst cx = (maxX + minX) * 0.5;\n\t\tconst cy = (maxY + minY) * 0.5;\n\t\tfor( let i = 0; i < pointsLength; i += 2 ) {\n\t\t\tconst x = points[ i + 0 ] - cx;\n\t\t\tconst y = points[ i + 1 ] - cy;\n\t\t\tvalues.push( x, y );\n\t\t}\n\t\tconst sx = maxX - minX;\n\t\tconst sy = maxY - minY;\n\n\t\t//\n\t\tthis._parent = parent;\n\t\tthis._valuesBase = undefined;\n\t\tthis._valuesBaseLength = values.length;\n\t\tthis._values = values;\n\t\tthis._segments = segments.slice( 0 );\n\t\tthis._sizeBase = new Point( sx, sy );\n\t\tthis.size = new Point( sx, sy );\n\t\tthis.position = new Point( cx, cy );\n\t\tthis._id = 0;\n\t\tthis._style = style!;\n\t}\n\n\tget length(): number {\n\t\treturn this._values.length >> 1;\n\t}\n\n\tprivate fitToParentSize() {\n\t\tconst size = this.size;\n\t\tconst parentSize = this._parent.size;\n\t\tconst ssx = parentSize.x;\n\t\tconst ssy = parentSize.y;\n\t\tconst threshold = 0.00001;\n\t\tif( threshold < Math.abs( ssx - size.x ) || threshold < Math.abs( ssy - size.y ) ) {\n\t\t\tsize.set( ssx, ssy );\n\n\t\t\tconst sizeBase = this._sizeBase;\n\t\t\tconst hasSizeBaseX = threshold < Math.abs( sizeBase.x );\n\t\t\tconst hasSizeBaseY = threshold < Math.abs( sizeBase.y );\n\t\t\tif( hasSizeBaseX || hasSizeBaseY ) {\n\t\t\t\tconst scaleX = ( hasSizeBaseX ? ssx / sizeBase.x : 1 );\n\t\t\t\tconst scaleY = ( hasSizeBaseY ? ssy / sizeBase.y : 1 );\n\n\t\t\t\tconst values = this._values;\n\t\t\t\tlet valuesBase = this._valuesBase;\n\t\t\t\tif( valuesBase == null ) {\n\t\t\t\t\tvaluesBase = [];\n\t\t\t\t\tthis._valuesBase = valuesBase;\n\n\t\t\t\t\tfor( let i = 0, imax = this.length << 1; i < imax; i += 2 ) {\n\t\t\t\t\t\tconst x = values[ i ];\n\t\t\t\t\t\tconst y = values[ i + 1 ];\n\t\t\t\t\t\tvalues[ i ] = x * scaleX;\n\t\t\t\t\t\tvalues[ i + 1 ] = y * scaleY;\n\t\t\t\t\t\tvaluesBase.push( x, y );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor( let i = 0, imax = this.length << 1; i < imax; i += 2 ) {\n\t\t\t\t\t\tvalues[ i ] = valuesBase[ i ] * scaleX;\n\t\t\t\t\t\tvalues[ i + 1 ] = valuesBase[ i + 1 ] * scaleY;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._id += 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tget id(): number {\n\t\tthis.fitToParentSize();\n\t\treturn this._id;\n\t}\n\n\tget values(): number[] {\n\t\tthis.fitToParentSize();\n\t\treturn this._values;\n\t}\n\n\tset values( values: number[] ) {\n\t\tthis.set( values, undefined, undefined );\n\t}\n\n\tget segments(): number[] {\n\t\treturn this._segments;\n\t}\n\n\t/**\n\t * Must be sorted in ascending order.\n\t */\n\tset segments( segments: number[] ) {\n\t\tthis.set( undefined, segments, undefined );\n\t}\n\n\tget style(): EShapePointsStyle {\n\t\treturn this._style;\n\t}\n\n\tset style( style: EShapePointsStyle ) {\n\t\tthis.set( undefined, undefined, style );\n\t}\n\n\tcopy( source: EShapePoints ): this {\n\t\treturn this.set( source.values, source.segments, source.style );\n\t}\n\n\tset( newValues?: number[], newSegments?: number[], newStyle?: EShapePointsStyle ): this {\n\t\tlet isDirty = false;\n\t\tlet isUpdated = false;\n\n\t\t// Values\n\t\tif( newValues != null ) {\n\t\t\tconst values = this._values;\n\t\t\tconst valuesBaseLength = this._valuesBaseLength;\n\t\t\tconst newValuesLength = newValues.length;\n\t\t\tconst iupdate = Math.min( newValuesLength, valuesBaseLength );\n\t\t\tthis._valuesBase = undefined;\n\t\t\tthis._id += 1;\n\t\t\tif( values !== newValues ) {\n\t\t\t\tfor( let i = 0; i < iupdate; ++i ) {\n\t\t\t\t\tvalues[ i ] = newValues[ i ];\n\t\t\t\t}\n\n\t\t\t\tfor( let i = iupdate; i < newValuesLength; ++i ) {\n\t\t\t\t\tvalues.push( newValues[ i ] );\n\t\t\t\t}\n\n\t\t\t\tif( valuesBaseLength !== newValuesLength ) {\n\t\t\t\t\tvalues.length = newValuesLength;\n\t\t\t\t\tthis._valuesBaseLength = newValuesLength;\n\t\t\t\t\tisDirty = true;\n\t\t\t\t} else {\n\t\t\t\t\tisUpdated = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( valuesBaseLength !== newValuesLength ) {\n\t\t\t\t\tthis._valuesBaseLength = newValuesLength;\n\t\t\t\t\tisDirty = true;\n\t\t\t\t} else {\n\t\t\t\t\tisUpdated = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Segments\n\t\tif( newSegments != null ) {\n\t\t\tconst segments = this._segments;\n\t\t\tthis._id += 1;\n\t\t\tif( segments !== newSegments ) {\n\t\t\t\tconst newSegmentsLength = newSegments.length;\n\t\t\t\tconst iupdate = Math.min( segments.length, newSegmentsLength );\n\t\t\t\tfor( let i = 0; i < iupdate; ++i ) {\n\t\t\t\t\tsegments[ i ] = newSegments[ i ];\n\t\t\t\t}\n\n\t\t\t\tfor( let i = iupdate; i < newSegmentsLength; ++i ) {\n\t\t\t\t\tsegments.push( newSegments[ i ] );\n\t\t\t\t}\n\n\t\t\t\tif( segments.length !== newSegmentsLength ) {\n\t\t\t\t\tsegments.length = newSegmentsLength;\n\t\t\t\t}\n\t\t\t}\n\t\t\tisUpdated = true;\n\t\t}\n\n\t\t// Style\n\t\tif( newStyle != null ) {\n\t\t\tconst oldStyle = this._style;\n\t\t\tif( oldStyle !== newStyle ) {\n\t\t\t\tthis._style = newStyle;\n\t\t\t\tif( (oldStyle & EShapePointsStyle.CLOSED) !== (newStyle & EShapePointsStyle.CLOSED) ) {\n\t\t\t\t\tisDirty = true;\n\t\t\t\t} else {\n\t\t\t\t\tisUpdated = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//\n\t\tif( isDirty ) {\n\t\t\tconst parent = this._parent;\n\t\t\tparent.uploaded = undefined;\n\t\t\tparent.toDirty();\n\t\t} else if( isUpdated ) {\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tclone( parent: EShapePointsParent ): EShapeLinePoints {\n\t\treturn new EShapeLinePoints( parent, this._values, this._segments, this._style );\n\t}\n\n\ttoPoints( transform: Matrix ): Point[] {\n\t\tconst result: Point[] = [];\n\t\tconst values = this.values;\n\t\tfor( let i = 0, imax = values.length; i < imax; i += 2 ) {\n\t\t\tconst point = new Point( values[ i + 0 ], values[ i + 1 ] );\n\t\t\tresult.push( transform.apply( point, point ) );\n\t\t}\n\t\treturn result;\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn manager.add( `[${JSON.stringify(this._values)},${JSON.stringify(this._segments)},${this._style}]` );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapeLineBase } from \"./e-shape-line-base\";\nimport { EShapeLinePoints } from \"./e-shape-line-points\";\n\nexport class EShapeLine extends EShapeLineBase {\n\tpoints!: EShapeLinePoints;\n\n\tconstructor( line: EShapeLine );\n\tconstructor( points: number[], segments: number[], width: number, style: EShapePointsStyle );\n\tconstructor(\n\t\tlineOrPoints: EShapeLine | number[],\n\t\tsegments?: number[],\n\t\twidth?: number,\n\t\tstyle?: EShapePointsStyle\n\t) {\n\t\tsuper( EShapeType.LINE );\n\t\tif( lineOrPoints instanceof EShapeLine ) {\n\t\t\tthis.copy( lineOrPoints );\n\t\t} else {\n\t\t\tthis.fill.enable = false;\n\t\t\tthis.stroke.set( true, undefined, undefined, width! );\n\t\t\tthis.points = new EShapeLinePoints( this, lineOrPoints, segments!, style! );\n\t\t\tthis.transform.position.copyFrom( this.points.position );\n\t\t\tthis.size.copyFrom( this.points.size );\n\t\t}\n\t}\n\n\tclone(): EShapeLine {\n\t\treturn new EShapeLine( this );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDefaults } from \"../e-shape-defaults\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeLine } from \"./e-shape-line\";\n\nexport class EShapeLines {\n\tstatic toStrokeWidth( index: number, resources: string[] ): number {\n\t\tif( 0 <= index && index < resources.length  ) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse( resources[ index ] )[ 3 ];\n\t\t\t} catch( e ) {\n\t\t\t\t//\n\t\t\t}\n\t\t}\n\t\treturn 8;\n\t}\n\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeLine> | EShapeLine | null {\n\t\tconst resources = manager.resources;\n\t\tconst resourceId = item[ 15 ];\n\t\tif( 0 <= resourceId && resourceId < resources.length ) {\n\t\t\tlet parsed = manager.extensions.get( resourceId ) as [ number[], number[], number ] | undefined;\n\t\t\tif( parsed == null ) {\n\t\t\t\tparsed = JSON.parse( resources[ resourceId ] ) as [ number[], number[], number ];\n\t\t\t\tmanager.extensions.set( resourceId, parsed );\n\t\t\t}\n\t\t\tconst shape = EShapeLines.create(\n\t\t\t\tparsed[ 0 ],\n\t\t\t\tparsed[ 1 ],\n\t\t\t\tEShapeDefaults.STROKE_WIDTH,\n\t\t\t\tparsed[ 2 ]\n\t\t\t);\n\t\t\treturn EShapeDeserializer.deserialize( item, manager, shape );\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic create(\n\t\tpoints: number[],\n\t\tsegments: number[],\n\t\tstrokeWidth: number,\n\t\tstyle: EShapePointsStyle\n\t): EShapeLine {\n\t\treturn new EShapeLine( points, segments, strokeWidth, style );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeLineUploadeds } from \"../shape/variant/e-shape-line-uploadeds\";\nimport { EShapeLines } from \"../shape/variant/e-shape-lines\";\n\nexport const loadShapeLine = () => {\n\tEShapeUploadeds[ EShapeType.LINE ] = EShapeLineUploadeds.create;\n\tEShapeDeserializers[ EShapeType.LINE ] = EShapeLines.deserialize;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeUploadedBase } from \"../e-shape-uploaded\";\n\nexport class EShapeNullUploaded extends EShapeUploadedBase {\n\tconstructor( buffer: EShapeBuffer, voffset: number, ioffset: number ) {\n\t\tsuper( buffer, voffset, ioffset, 0, 0 );\n\t}\n\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tthis.texture = shape.texture || Texture.WHITE;\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeNullUploaded } from \"./e-shape-null-uploaded\";\n\nexport class EShapeNullUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape, voffset: number, ioffset: number\n\t): EShapeNullUploaded | null {\n\t\treturn new EShapeNullUploaded( buffer, voffset, ioffset ).init( shape );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapePrimitive } from \"./e-shape-primitive\";\n\nexport class EShapeNull extends EShapePrimitive {\n\tconstructor( type: EShapeType = EShapeType.NULL ) {\n\t\tsuper( type );\n\t}\n\n\tclone(): EShapeNull {\n\t\treturn new EShapeNull().copy( this );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeNull } from \"./e-shape-null\";\n\nexport class EShapeNulls {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeNull> | EShapeNull {\n\t\treturn EShapeDeserializer.deserialize( item, manager, new EShapeNull() );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeNullUploadeds } from \"../shape/variant/e-shape-null-uploadeds\";\nimport { EShapeNulls } from \"../shape/variant/e-shape-nulls\";\n\nexport const loadShapeNull = () => {\n\tEShapeUploadeds[ EShapeType.NULL ] = EShapeNullUploadeds.create;\n\tEShapeDeserializers[ EShapeType.NULL ] = EShapeNulls.deserialize;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"./e-shape\";\nimport { EShapeCapability } from \"./e-shape-capability\";\nimport { EShapeType } from \"./e-shape-type\";\n\nexport class EShapeCapabilities {\n\tstatic mappings: { [ type: number ]: EShapeCapability } = {};\n\n\tstatic get( type: EShapeType ): EShapeCapability {\n\t\treturn this.mappings[ type ] || EShapeCapability.PRIMITIVE;\n\t}\n\n\tstatic contains( shape: EShape | null | undefined, capability: EShapeCapability ): shape is EShape {\n\t\tif( shape != null ) {\n\t\t\tif( this.get( shape.type ) & capability ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst children = shape.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tif( this.contains( children[ i ], capability ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tstatic set( type: EShapeType, capability: EShapeCapability ): void {\n\t\tthis.mappings[ type ] = capability;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeRectangle } from \"./e-shape-rectangle\";\n\nexport class EShapeRectangles {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeRectangle> | EShapeRectangle {\n\t\treturn EShapeDeserializer.deserialize( item, manager, EShapeRectangles.create() );\n\t}\n\n\tstatic create() {\n\t\treturn new EShapeRectangle();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeCapabilities } from \"../shape/e-shape-capabilities\";\nimport { EShapeCapability } from \"../shape/e-shape-capability\";\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeRectangleUploadeds } from \"../shape/variant/e-shape-rectangle-uploadeds\";\nimport { EShapeRectangles } from \"../shape/variant/e-shape-rectangles\";\n\nexport const loadShapeRectangle = () => {\n\tEShapeUploadeds[ EShapeType.RECTANGLE ] = EShapeRectangleUploadeds.create;\n\tEShapeDeserializers[ EShapeType.RECTANGLE ] = EShapeRectangles.deserialize;\n\tEShapeCapabilities.set(\n\t\tEShapeType.RECTANGLE,\n\t\tEShapeCapability.PRIMITIVE | EShapeCapability.STROKE_SIDE\n\t);\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeCorner } from \"../e-shape-corner\";\nimport { EShapeStrokeSide } from \"../e-shape-stroke\";\nimport { EShapeTextUploaded } from \"./e-shape-text-uploaded\";\n\nexport class EShapeRectangleRoundedUploaded extends EShapeTextUploaded {\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tconst buffer = this.buffer;\n\t\tconst voffset = this.vertexOffset;\n\t\tconst ioffset = this.indexOffset;\n\n\t\t// Indices\n\t\tbuffer.indexBuffer.update();\n\t\tconst indices = buffer.indices;\n\t\tlet ii = ioffset * 3;\n\n\t\t// Top-left corner\n\t\tindices[ ii + 0 ] = voffset + 0;\n\t\tindices[ ii + 1 ] = voffset + 1;\n\t\tindices[ ii + 2 ] = voffset + 2;\n\t\tindices[ ii + 3 ] = voffset + 1;\n\t\tindices[ ii + 4 ] = voffset + 3;\n\t\tindices[ ii + 5 ] = voffset + 2;\n\t\tii += 6;\n\n\t\t// Top-right corner\n\t\tindices[ ii + 0 ] = voffset + 4;\n\t\tindices[ ii + 1 ] = voffset + 5;\n\t\tindices[ ii + 2 ] = voffset + 6;\n\t\tindices[ ii + 3 ] = voffset + 5;\n\t\tindices[ ii + 4 ] = voffset + 7;\n\t\tindices[ ii + 5 ] = voffset + 6;\n\t\tii += 6;\n\n\t\t// Bottom-left corner\n\t\tindices[ ii + 0 ] = voffset + 8;\n\t\tindices[ ii + 1 ] = voffset + 9;\n\t\tindices[ ii + 2 ] = voffset + 10;\n\t\tindices[ ii + 3 ] = voffset + 9;\n\t\tindices[ ii + 4 ] = voffset + 11;\n\t\tindices[ ii + 5 ] = voffset + 10;\n\t\tii += 6;\n\n\t\t// Bottom-right corner\n\t\tindices[ ii + 0 ] = voffset + 12;\n\t\tindices[ ii + 1 ] = voffset + 13;\n\t\tindices[ ii + 2 ] = voffset + 14;\n\t\tindices[ ii + 3 ] = voffset + 13;\n\t\tindices[ ii + 4 ] = voffset + 15;\n\t\tindices[ ii + 5 ] = voffset + 14;\n\t\tii += 6;\n\n\t\t// Top edge\n\t\tindices[ ii + 0 ] = voffset + 16;\n\t\tindices[ ii + 1 ] = voffset + 17;\n\t\tindices[ ii + 2 ] = voffset + 20;\n\t\tindices[ ii + 3 ] = voffset + 17;\n\t\tindices[ ii + 4 ] = voffset + 21;\n\t\tindices[ ii + 5 ] = voffset + 20;\n\t\tii += 6;\n\n\t\tindices[ ii + 0 ] = voffset + 17;\n\t\tindices[ ii + 1 ] = voffset + 18;\n\t\tindices[ ii + 2 ] = voffset + 21;\n\t\tindices[ ii + 3 ] = voffset + 18;\n\t\tindices[ ii + 4 ] = voffset + 22;\n\t\tindices[ ii + 5 ] = voffset + 21;\n\t\tii += 6;\n\n\t\t// Upper middle\n\t\tindices[ ii + 0 ] = voffset + 19;\n\t\tindices[ ii + 1 ] = voffset + 21;\n\t\tindices[ ii + 2 ] = voffset + 24;\n\t\tindices[ ii + 3 ] = voffset + 21;\n\t\tindices[ ii + 4 ] = voffset + 25;\n\t\tindices[ ii + 5 ] = voffset + 24;\n\t\tii += 6;\n\n\t\tindices[ ii + 0 ] = voffset + 21;\n\t\tindices[ ii + 1 ] = voffset + 23;\n\t\tindices[ ii + 2 ] = voffset + 26;\n\t\tindices[ ii + 3 ] = voffset + 23;\n\t\tindices[ ii + 4 ] = voffset + 27;\n\t\tindices[ ii + 5 ] = voffset + 26;\n\t\tii += 6;\n\n\t\t// Lower middle\n\t\tindices[ ii + 0 ] = voffset + 24;\n\t\tindices[ ii + 1 ] = voffset + 25;\n\t\tindices[ ii + 2 ] = voffset + 28;\n\t\tindices[ ii + 3 ] = voffset + 25;\n\t\tindices[ ii + 4 ] = voffset + 30;\n\t\tindices[ ii + 5 ] = voffset + 28;\n\t\tii += 6;\n\n\t\tindices[ ii + 0 ] = voffset + 26;\n\t\tindices[ ii + 1 ] = voffset + 27;\n\t\tindices[ ii + 2 ] = voffset + 30;\n\t\tindices[ ii + 3 ] = voffset + 27;\n\t\tindices[ ii + 4 ] = voffset + 32;\n\t\tindices[ ii + 5 ] = voffset + 30;\n\t\tii += 6;\n\n\t\t// Bottom edge\n\t\tindices[ ii + 0 ] = voffset + 29;\n\t\tindices[ ii + 1 ] = voffset + 30;\n\t\tindices[ ii + 2 ] = voffset + 33;\n\t\tindices[ ii + 3 ] = voffset + 30;\n\t\tindices[ ii + 4 ] = voffset + 34;\n\t\tindices[ ii + 5 ] = voffset + 33;\n\t\tii += 6;\n\n\t\tindices[ ii + 0 ] = voffset + 30;\n\t\tindices[ ii + 1 ] = voffset + 31;\n\t\tindices[ ii + 2 ] = voffset + 34;\n\t\tindices[ ii + 3 ] = voffset + 31;\n\t\tindices[ ii + 4 ] = voffset + 35;\n\t\tindices[ ii + 5 ] = voffset + 34;\n\n\t\t// Text\n\t\tthis.initText();\n\n\t\tthis.update( shape );\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\tconst buffer = this.buffer;\n\t\tthis.updateType1Vertex( buffer, shape );\n\t\tthis.updateType1Clipping( buffer, shape );\n\t\tthis.updateColor( buffer, shape );\n\t\tthis.updateType1Step( buffer, shape );\n\t\tthis.updateType1Uv( buffer, shape );\n\t\tthis.updateText( buffer, shape );\n\t}\n\n\t/**\n\t * Please note that this method must be executed before updateClippingType1(...).\n\t */\n\tprotected updateType1Vertex( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst size = shape.size;\n\t\tconst sizeX = size.x;\n\t\tconst sizeY = size.y;\n\t\tconst transformLocalId = this.toTransformLocalId( shape );\n\t\tconst radius = shape.radius;\n\t\tconst isSizeChanged = (\n\t\t\tsizeX !== this.sizeX ||\n\t\t\tsizeY !== this.sizeY ||\n\t\t\tradius !== this.radius\n\t\t);\n\t\tconst isTransformChanged = ( this.transformLocalId !== transformLocalId );\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tconst isStrokeChanged = ( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth );\n\t\tif( isSizeChanged || isTransformChanged || isStrokeChanged ) {\n\t\t\tthis.sizeX = sizeX;\n\t\t\tthis.sizeY = sizeY;\n\t\t\tthis.transformLocalId = transformLocalId;\n\t\t\tthis.radius = radius;\n\t\t\tif( isSizeChanged ) {\n\t\t\t\t// Invalidate the corner to update the clippings\n\t\t\t\tthis.corner = NaN;\n\n\t\t\t\t// Invalidate the textureTransformId to updateh UVs.\n\t\t\t\tthis.textureTransformId = NaN;\n\t\t\t}\n\t\t\t// Invalidate the stroke width to update the steps / antialiases\n\t\t\tthis.strokeWidth = NaN;\n\n\t\t\t// Invalidate the text layout to update the text layout.\n\t\t\tthis.textSpacingHorizontal = NaN;\n\t\t\tbuffer.vertexBuffer.update();\n\n\t\t\t// Calculate the transformed positions\n\t\t\t//\n\t\t\t//  0   1       4   5\n\t\t\t// |---|       |---|\n\t\t\t// |2  |3      |6  |7\n\t\t\t// |---|       |---|\n\t\t\t//\n\t\t\t//\n\t\t\t//\n\t\t\t//\n\t\t\t//\n\t\t\t// |---|       |---|\n\t\t\t// |8  |9      |12 |13\n\t\t\t// |---|       |---|\n\t\t\t//  10  11      14  15\n\t\t\t//\n\t\t\t//\n\t\t\t//      16  17  18       <-- Top edge\n\t\t\t//     |---|---|\n\t\t\t//  19 |20 |21 |22  23   <-- Top\n\t\t\t// |---|---|---|---|\n\t\t\t// |       |       |\n\t\t\t// |24   25|26     |27   <-- Middle\n\t\t\t// |-------|-------|\n\t\t\t// |       |       |\n\t\t\t// |       |       |\n\t\t\t// |---|---|---|---|\n\t\t\t//  28 |29 |30 |31  32   <-- Bottom\n\t\t\t//     |---|---|\n\t\t\t//      33  34  35       <-- Bottom edge\n\t\t\t//\n\t\t\tconst s = strokeAlign * strokeWidth;\n\t\t\tconst sx = sizeX * 0.5 + (0 <= sizeX ? +s : -s);\n\t\t\tconst sy = sizeY * 0.5 + (0 <= sizeY ? +s : -s);\n\t\t\tconst ax = Math.abs( sx );\n\t\t\tconst ay = Math.abs( sy );\n\t\t\tconst a = radius * Math.min( ax, ay );\n\t\t\tconst rx = a / ax;\n\t\t\tconst ry = a / ay;\n\n\t\t\tconst internalTransform = shape.transform.internalTransform;\n\t\t\tconst work = buffer.work;\n\t\t\twork.set( -sx, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x0 = work.x;\n\t\t\tconst y0 = work.y;\n\t\t\twork.set( 0, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x2 = work.x;\n\t\t\tconst y2 = work.y;\n\t\t\tconst dxh = x2 - x0;\n\t\t\tconst dyh = y2 - y0;\n\t\t\tconst dxhr = rx * dxh;\n\t\t\tconst dyhr = rx * dyh;\n\t\t\tconst x1 = x0 + dxhr;\n\t\t\tconst y1 = y0 + dyhr;\n\t\t\tconst x4 = x2 + dxh;\n\t\t\tconst y4 = y2 + dyh;\n\t\t\tconst x3 = x4 - dxhr;\n\t\t\tconst y3 = y4 - dyhr;\n\t\t\tconst x11 = internalTransform.tx;\n\t\t\tconst y11 = internalTransform.ty;\n\t\t\tconst dxv = x11 - x2;\n\t\t\tconst dyv = y11 - y2;\n\t\t\tconst dxvr = ry * dxv;\n\t\t\tconst dyvr = ry * dyv;\n\t\t\tconst x7 = x2 + dxvr;\n\t\t\tconst y7 = y2 + dyvr;\n\t\t\tconst x5 = x7 - dxh;\n\t\t\tconst y5 = y7 - dyh;\n\t\t\tconst x6 = x5 + dxhr;\n\t\t\tconst y6 = y5 + dyhr;\n\t\t\tconst x9 = x7 + dxh;\n\t\t\tconst y9 = y7 + dyh;\n\t\t\tconst x8 = x9 - dxhr;\n\t\t\tconst y8 = y9 - dyhr;\n\t\t\tconst x10 = x11 - dxh;\n\t\t\tconst y10 = y11 - dyh;\n\t\t\tconst x12 = x11 + dxh;\n\t\t\tconst y12 = y11 + dyh;\n\t\t\tconst x20 = x11 + dxv;\n\t\t\tconst y20 = y11 + dyv;\n\t\t\tconst x15 = x20 - dxvr;\n\t\t\tconst y15 = y20 - dyvr;\n\t\t\tconst x13 = x15 - dxh;\n\t\t\tconst y13 = y15 - dyh;\n\t\t\tconst x14 = x13 + dxhr;\n\t\t\tconst y14 = y13 + dyhr;\n\t\t\tconst x17 = x15 + dxh;\n\t\t\tconst y17 = y15 + dyh;\n\t\t\tconst x16 = x17 - dxhr;\n\t\t\tconst y16 = y17 - dyhr;\n\t\t\tconst x18 = x20 - dxh;\n\t\t\tconst y18 = y20 - dyh;\n\t\t\tconst x19 = x18 + dxhr;\n\t\t\tconst y19 = y18 + dyhr;\n\t\t\tconst x22 = x20 + dxh;\n\t\t\tconst y22 = y20 + dyh;\n\t\t\tconst x21 = x22 - dxhr;\n\t\t\tconst y21 = y22 - dyhr;\n\n\t\t\t// World size\n\t\t\tthis.worldSizeXHalf = this.calcLength( x0, y0, x2, y2 );\n\t\t\tthis.worldSizeYHalf = this.calcLength( x0, y0, x10, y10 );\n\t\t\tthis.worldSizeR = this.calcLength( x0, y0, x1, y1 );\n\n\t\t\t// Vertices\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst vertices = buffer.vertices;\n\t\t\tlet iv = voffset * 2;\n\n\t\t\t// Top-left corner\n\t\t\tvertices[ iv + 0 ] = x0;\n\t\t\tvertices[ iv + 1 ] = y0;\n\t\t\tvertices[ iv + 2 ] = x1;\n\t\t\tvertices[ iv + 3 ] = y1;\n\t\t\tvertices[ iv + 4 ] = x5;\n\t\t\tvertices[ iv + 5 ] = y5;\n\t\t\tvertices[ iv + 6 ] = x6;\n\t\t\tvertices[ iv + 7 ] = y6;\n\t\t\tiv += 8;\n\n\t\t\t// Top-right corner\n\t\t\tvertices[ iv + 0 ] = x3;\n\t\t\tvertices[ iv + 1 ] = y3;\n\t\t\tvertices[ iv + 2 ] = x4;\n\t\t\tvertices[ iv + 3 ] = y4;\n\t\t\tvertices[ iv + 4 ] = x8;\n\t\t\tvertices[ iv + 5 ] = y8;\n\t\t\tvertices[ iv + 6 ] = x9;\n\t\t\tvertices[ iv + 7 ] = y9;\n\t\t\tiv += 8;\n\n\t\t\t// Bottom-left corner\n\t\t\tvertices[ iv + 0 ] = x13;\n\t\t\tvertices[ iv + 1 ] = y13;\n\t\t\tvertices[ iv + 2 ] = x14;\n\t\t\tvertices[ iv + 3 ] = y14;\n\t\t\tvertices[ iv + 4 ] = x18;\n\t\t\tvertices[ iv + 5 ] = y18;\n\t\t\tvertices[ iv + 6 ] = x19;\n\t\t\tvertices[ iv + 7 ] = y19;\n\t\t\tiv += 8;\n\n\t\t\t// Bottom-right corner\n\t\t\tvertices[ iv + 0 ] = x16;\n\t\t\tvertices[ iv + 1 ] = y16;\n\t\t\tvertices[ iv + 2 ] = x17;\n\t\t\tvertices[ iv + 3 ] = y17;\n\t\t\tvertices[ iv + 4 ] = x21;\n\t\t\tvertices[ iv + 5 ] = y21;\n\t\t\tvertices[ iv + 6 ] = x22;\n\t\t\tvertices[ iv + 7 ] = y22;\n\t\t\tiv += 8;\n\n\t\t\t// Top edge\n\t\t\tvertices[ iv + 0 ] = x1;\n\t\t\tvertices[ iv + 1 ] = y1;\n\t\t\tvertices[ iv + 2 ] = x2;\n\t\t\tvertices[ iv + 3 ] = y2;\n\t\t\tvertices[ iv + 4 ] = x3;\n\t\t\tvertices[ iv + 5 ] = y3;\n\t\t\tiv += 6;\n\n\t\t\t// Top\n\t\t\tvertices[ iv + 0 ] = x5;\n\t\t\tvertices[ iv + 1 ] = y5;\n\t\t\tvertices[ iv + 2 ] = x6;\n\t\t\tvertices[ iv + 3 ] = y6;\n\t\t\tvertices[ iv + 4 ] = x7;\n\t\t\tvertices[ iv + 5 ] = y7;\n\t\t\tvertices[ iv + 6 ] = x8;\n\t\t\tvertices[ iv + 7 ] = y8;\n\t\t\tvertices[ iv + 8 ] = x9;\n\t\t\tvertices[ iv + 9 ] = y9;\n\t\t\tiv += 10;\n\n\t\t\t// Middle\n\t\t\tvertices[ iv + 0 ] = x10;\n\t\t\tvertices[ iv + 1 ] = y10;\n\t\t\tvertices[ iv + 2 ] = x11;\n\t\t\tvertices[ iv + 3 ] = y11;\n\t\t\tvertices[ iv + 4 ] = x11;\n\t\t\tvertices[ iv + 5 ] = y11;\n\t\t\tvertices[ iv + 6 ] = x12;\n\t\t\tvertices[ iv + 7 ] = y12;\n\t\t\tiv += 8;\n\n\t\t\t// Bottom\n\t\t\tvertices[ iv + 0 ] = x13;\n\t\t\tvertices[ iv + 1 ] = y13;\n\t\t\tvertices[ iv + 2 ] = x14;\n\t\t\tvertices[ iv + 3 ] = y14;\n\t\t\tvertices[ iv + 4 ] = x15;\n\t\t\tvertices[ iv + 5 ] = y15;\n\t\t\tvertices[ iv + 6 ] = x16;\n\t\t\tvertices[ iv + 7 ] = y16;\n\t\t\tvertices[ iv + 8 ] = x17;\n\t\t\tvertices[ iv + 9 ] = y17;\n\t\t\tiv += 10;\n\n\t\t\t// Bottom edge\n\t\t\tvertices[ iv + 0 ] = x19;\n\t\t\tvertices[ iv + 1 ] = y19;\n\t\t\tvertices[ iv + 2 ] = x20;\n\t\t\tvertices[ iv + 3 ] = y20;\n\t\t\tvertices[ iv + 4 ] = x21;\n\t\t\tvertices[ iv + 5 ] = y21;\n\t\t}\n\t}\n\n\t/**\n\t * Please note that this method must be executed after the updateVertexType1(...).\n\t */\n\tprotected updateType1Clipping( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst corner = shape.corner;\n\t\tif( corner !== this.corner ) {\n\t\t\tthis.corner = corner;\n\n\t\t\t// Invalidate the strokeWidth to update steps / antialiases.\n\t\t\tthis.strokeWidth = NaN;\n\n\t\t\t// Clippings\n\t\t\tbuffer.clippingBuffer.update();\n\t\t\tconst clippings = buffer.clippings;\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tlet ic = voffset * 3;\n\t\t\tconst rxc = 1 - this.worldSizeR / this.worldSizeXHalf;\n\t\t\tconst ryc = 1 - this.worldSizeR / this.worldSizeYHalf;\n\n\t\t\t// Top-left corner\n\t\t\tif( corner & EShapeCorner.TOP_LEFT ) {\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\t\t\t} else {\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\t\t\t}\n\n\t\t\t// Top-right corner\n\t\t\tif( corner & EShapeCorner.TOP_RIGHT ) {\n\t\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\t\t\t} else {\n\t\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\t\t\t}\n\n\t\t\t// Bottom-left corner\n\t\t\tif( corner & EShapeCorner.BOTTOM_LEFT ) {\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\t\t\t} else {\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\t\t\t}\n\n\t\t\t// Bottom-right corner\n\t\t\tif( corner & EShapeCorner.BOTTOM_RIGHT ) {\n\t\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\t\t\t} else {\n\t\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\t\t\t}\n\n\t\t\t// Top edge\n\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\t// Top\n\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\t// Middle\n\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\t// Bottom\n\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\t// Bottom edge\n\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\t\t}\n\t}\n\n\tprotected updateType1Step( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tconst strokeSide = shape.stroke.side;\n\t\tif( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth || strokeSide !== this.strokeSide ) {\n\t\t\tthis.strokeWidth = strokeWidth;\n\t\t\tthis.strokeAlign = strokeAlign;\n\t\t\tthis.strokeSide = strokeSide;\n\t\t\tbuffer.stepBuffer.update();\n\t\t\tbuffer.antialiasBuffer.update();\n\n\t\t\tconst work = buffer.workStep;\n\t\t\tthis.calcStep( this.worldSizeR, strokeWidth, work );\n\t\t\tconst swc = work[ 0 ];\n\t\t\tconst pc0 = work[ 1 ];\n\t\t\tconst pc1 = work[ 2 ];\n\n\t\t\tthis.calcStep( this.worldSizeXHalf, strokeWidth, work );\n\t\t\tconst swx = work[ 0 ];\n\t\t\tconst px0 = work[ 1 ];\n\t\t\tconst px1 = work[ 2 ];\n\n\t\t\tthis.calcStep( this.worldSizeYHalf, strokeWidth, work );\n\t\t\tconst swy = work[ 0 ];\n\t\t\tconst py0 = work[ 1 ];\n\t\t\tconst py1 = work[ 2 ];\n\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst steps = buffer.steps;\n\t\t\tconst antialiases = buffer.antialiases;\n\t\t\tlet is = voffset * 2;\n\t\t\tlet ia = voffset * 4;\n\t\t\tconst rxc = 1 - this.worldSizeR / this.worldSizeXHalf;\n\t\t\tconst ryc = 1 - this.worldSizeR / this.worldSizeYHalf;\n\n\t\t\tlet swt = swy;\n\t\t\tlet pt0 = py0;\n\t\t\tlet swtc = swc;\n\t\t\tlet ptc0 = pc0;\n\t\t\tif( ! (strokeSide & EShapeStrokeSide.TOP) ) {\n\t\t\t\tswt = 1;\n\t\t\t\tpt0 = py1;\n\t\t\t\tswtc = 1;\n\t\t\t\tptc0 = pc1;\n\t\t\t}\n\t\t\tlet swr = swx;\n\t\t\tlet pr0 = px0;\n\t\t\tlet swrc = swc;\n\t\t\tlet prc0 = pc0;\n\t\t\tif( ! (strokeSide & EShapeStrokeSide.RIGHT) ) {\n\t\t\t\tswr = 1;\n\t\t\t\tpr0 = px1;\n\t\t\t\tswrc = 1;\n\t\t\t\tprc0 = pc1;\n\t\t\t}\n\t\t\tlet swb = swy;\n\t\t\tlet pb0 = py0;\n\t\t\tlet swbc = swc;\n\t\t\tlet pbc0 = pc0;\n\t\t\tif( ! (strokeSide & EShapeStrokeSide.BOTTOM) ) {\n\t\t\t\tswb = 1;\n\t\t\t\tpb0 = py1;\n\t\t\t\tswbc = 1;\n\t\t\t\tpbc0 = pc1;\n\t\t\t}\n\t\t\tlet swl = swx;\n\t\t\tlet pl0 = px0;\n\t\t\tlet swlc = swc;\n\t\t\tlet plc0 = pc0;\n\t\t\tif( ! (strokeSide & EShapeStrokeSide.LEFT) ) {\n\t\t\t\tswl = 1;\n\t\t\t\tpl0 = px1;\n\t\t\t\tswlc = 1;\n\t\t\t\tplc0 = pc1;\n\t\t\t}\n\t\t\tconst plr0 = 0.5 * (pl0 + pr0);\n\t\t\tconst ptb0 = 0.5 * (pt0 + pb0);\n\n\t\t\t// Top-left corner\n\t\t\tconst corner = this.corner;\n\t\t\tif( corner & EShapeCorner.TOP_LEFT ) {\n\t\t\t\tsteps[ is + 0 ] = swlc;\n\t\t\t\tsteps[ is + 1 ] = swtc;\n\t\t\t\tantialiases[ ia + 0 ] = plc0;\n\t\t\t\tantialiases[ ia + 1 ] = ptc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = 0;\n\t\t\t\tsteps[ is + 1 ] = swtc;\n\t\t\t\tantialiases[ ia + 0 ] = plc0;\n\t\t\t\tantialiases[ ia + 1 ] = ptc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swlc;\n\t\t\t\tsteps[ is + 1 ] = 0;\n\t\t\t\tantialiases[ ia + 0 ] = plc0;\n\t\t\t\tantialiases[ ia + 1 ] = ptc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = 0;\n\t\t\t\tsteps[ is + 1 ] = 0;\n\t\t\t\tantialiases[ ia + 0 ] = plc0;\n\t\t\t\tantialiases[ ia + 1 ] = ptc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\t\t\t} else {\n\t\t\t\tsteps[ is + 0 ] = swl;\n\t\t\t\tsteps[ is + 1 ] = swt;\n\t\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swl * rxc;\n\t\t\t\tsteps[ is + 1 ] = swt;\n\t\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swl;\n\t\t\t\tsteps[ is + 1 ] = swt * ryc;\n\t\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swl * rxc;\n\t\t\t\tsteps[ is + 1 ] = swt * ryc;\n\t\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\t\t\t}\n\n\t\t\t// Top-right corner\n\t\t\tif( corner & EShapeCorner.TOP_RIGHT ) {\n\t\t\t\tsteps[ is + 0 ] = 0;\n\t\t\t\tsteps[ is + 1 ] = swtc;\n\t\t\t\tantialiases[ ia + 0 ] = prc0;\n\t\t\t\tantialiases[ ia + 1 ] = ptc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swrc;\n\t\t\t\tsteps[ is + 1 ] = swtc;\n\t\t\t\tantialiases[ ia + 0 ] = prc0;\n\t\t\t\tantialiases[ ia + 1 ] = ptc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = 0;\n\t\t\t\tsteps[ is + 1 ] = 0;\n\t\t\t\tantialiases[ ia + 0 ] = prc0;\n\t\t\t\tantialiases[ ia + 1 ] = ptc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swrc;\n\t\t\t\tsteps[ is + 1 ] = 0;\n\t\t\t\tantialiases[ ia + 0 ] = prc0;\n\t\t\t\tantialiases[ ia + 1 ] = ptc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\t\t\t} else {\n\t\t\t\tsteps[ is + 0 ] = swr * rxc;\n\t\t\t\tsteps[ is + 1 ] = swt;\n\t\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swr;\n\t\t\t\tsteps[ is + 1 ] = swt;\n\t\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swr * rxc;\n\t\t\t\tsteps[ is + 1 ] = swt * ryc;\n\t\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swr;\n\t\t\t\tsteps[ is + 1 ] = swt * ryc;\n\t\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\t\t\t}\n\n\t\t\t// Bottom-left corner\n\t\t\tif( corner & EShapeCorner.BOTTOM_LEFT ) {\n\t\t\t\tsteps[ is + 0 ] = swlc;\n\t\t\t\tsteps[ is + 1 ] = 0;\n\t\t\t\tantialiases[ ia + 0 ] = plc0;\n\t\t\t\tantialiases[ ia + 1 ] = pbc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = 0;\n\t\t\t\tsteps[ is + 1 ] = 0;\n\t\t\t\tantialiases[ ia + 0 ] = plc0;\n\t\t\t\tantialiases[ ia + 1 ] = pbc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swlc;\n\t\t\t\tsteps[ is + 1 ] = swbc;\n\t\t\t\tantialiases[ ia + 0 ] = plc0;\n\t\t\t\tantialiases[ ia + 1 ] = pbc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = 0;\n\t\t\t\tsteps[ is + 1 ] = swbc;\n\t\t\t\tantialiases[ ia + 0 ] = plc0;\n\t\t\t\tantialiases[ ia + 1 ] = pbc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\t\t\t} else {\n\t\t\t\tsteps[ is + 0 ] = swl;\n\t\t\t\tsteps[ is + 1 ] = swb * ryc;\n\t\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swl * rxc;\n\t\t\t\tsteps[ is + 1 ] = swb * ryc;\n\t\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swl;\n\t\t\t\tsteps[ is + 1 ] = swb;\n\t\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swl * rxc;\n\t\t\t\tsteps[ is + 1 ] = swb;\n\t\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\t\t\t}\n\n\t\t\t// Bottom-right corner\n\t\t\tif( corner & EShapeCorner.BOTTOM_RIGHT ) {\n\t\t\t\tsteps[ is + 0 ] = 0;\n\t\t\t\tsteps[ is + 1 ] = 0;\n\t\t\t\tantialiases[ ia + 0 ] = prc0;\n\t\t\t\tantialiases[ ia + 1 ] = pbc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swrc;\n\t\t\t\tsteps[ is + 1 ] = 0;\n\t\t\t\tantialiases[ ia + 0 ] = prc0;\n\t\t\t\tantialiases[ ia + 1 ] = pbc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = 0;\n\t\t\t\tsteps[ is + 1 ] = swbc;\n\t\t\t\tantialiases[ ia + 0 ] = prc0;\n\t\t\t\tantialiases[ ia + 1 ] = pbc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swrc;\n\t\t\t\tsteps[ is + 1 ] = swbc;\n\t\t\t\tantialiases[ ia + 0 ] = prc0;\n\t\t\t\tantialiases[ ia + 1 ] = pbc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\t\t\t} else {\n\t\t\t\tsteps[ is + 0 ] = swr * rxc;\n\t\t\t\tsteps[ is + 1 ] = swb * ryc;\n\t\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swr;\n\t\t\t\tsteps[ is + 1 ] = swb * ryc;\n\t\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swr * rxc;\n\t\t\t\tsteps[ is + 1 ] = swb;\n\t\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swr;\n\t\t\t\tsteps[ is + 1 ] = swb;\n\t\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\t\t\t}\n\n\t\t\t// Top edge\n\t\t\tsteps[ is + 0 ] = swl * rxc;\n\t\t\tsteps[ is + 1 ] = swt;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = swt;\n\t\t\tantialiases[ ia + 0 ] = plr0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = swr * rxc;\n\t\t\tsteps[ is + 1 ] = swt;\n\t\t\tantialiases[ ia + 0 ] = plr0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// Top\n\t\t\tsteps[ is + 0 ] = swl;\n\t\t\tsteps[ is + 1 ] = swt * ryc;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = swl * rxc;\n\t\t\tsteps[ is + 1 ] = swt * ryc;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = swt * ryc;\n\t\t\tantialiases[ ia + 0 ] = plr0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = swr * rxc;\n\t\t\tsteps[ is + 1 ] = swt * ryc;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = swr;\n\t\t\tsteps[ is + 1 ] = swt * ryc;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// Middle\n\t\t\tsteps[ is + 0 ] = swl;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = ptb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = ptb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = ptb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = swr;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = ptb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// Bottom\n\t\t\tsteps[ is + 0 ] = swl;\n\t\t\tsteps[ is + 1 ] = swb * ryc;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = swl * rxc;\n\t\t\tsteps[ is + 1 ] = swb * ryc;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = swb * ryc;\n\t\t\tantialiases[ ia + 0 ] = plr0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = swr * rxc;\n\t\t\tsteps[ is + 1 ] = swb * ryc;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = swr;\n\t\t\tsteps[ is + 1 ] = swb * ryc;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// Bottom edge\n\t\t\tsteps[ is + 0 ] = swl * rxc;\n\t\t\tsteps[ is + 1 ] = swb;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = swb;\n\t\t\tantialiases[ ia + 0 ] = plr0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = swr * rxc;\n\t\t\tsteps[ is + 1 ] = swb;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\t\t}\n\t}\n\n\tprotected updateType1Uv( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst texture = this.toTexture( shape );\n\t\tconst textureTransformId = this.toTextureTransformId( texture );\n\t\tif( texture !== this.texture || textureTransformId !== this.textureTransformId ) {\n\t\t\tthis.texture = texture;\n\t\t\tthis.textureTransformId = textureTransformId;\n\n\t\t\tconst textureUvs = this.toTextureUvs( texture ) as any;\n\t\t\tconst x0 = textureUvs.x0;\n\t\t\tconst x1 = textureUvs.x1;\n\t\t\tconst x2 = textureUvs.x2;\n\t\t\tconst x3 = textureUvs.x3;\n\t\t\tconst y0 = textureUvs.y0;\n\t\t\tconst y1 = textureUvs.y1;\n\t\t\tconst y2 = textureUvs.y2;\n\t\t\tconst y3 = textureUvs.y3;\n\n\t\t\tconst x4 = 0.5 * (x0 + x1);\n\t\t\tconst y4 = 0.5 * (y0 + y1);\n\t\t\tconst x5 = 0.5 * (x3 + x2);\n\t\t\tconst y5 = 0.5 * (y3 + y2);\n\n\t\t\tconst ruvx = 0.5 * this.worldSizeR / this.worldSizeXHalf;\n\t\t\tconst ruvy = 0.5 * this.worldSizeR / this.worldSizeYHalf;\n\t\t\tconst d0x = ruvx * (x1 - x0);\n\t\t\tconst d0y = ruvx * (y1 - y0);\n\t\t\tconst d1x = ruvy * (x3 - x0);\n\t\t\tconst d1y = ruvy * (y3 - y0);\n\n\t\t\t// UVs\n\t\t\tbuffer.uvBuffer.update();\n\t\t\tconst uvs = buffer.uvs;\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tlet iuv = voffset * 2;\n\n\t\t\t// Top-left corner\n\t\t\tuvs[ iuv + 0 ] = x0;\n\t\t\tuvs[ iuv + 1 ] = y0;\n\t\t\tuvs[ iuv + 2 ] = x0 + d0x;\n\t\t\tuvs[ iuv + 3 ] = y0 + d0y;\n\t\t\tuvs[ iuv + 4 ] = x0 + d1x;\n\t\t\tuvs[ iuv + 5 ] = y0 + d1y;\n\t\t\tuvs[ iuv + 6 ] = x0 + d0x + d1x;\n\t\t\tuvs[ iuv + 7 ] = y0 + d0y + d1y;\n\t\t\tiuv += 8;\n\n\t\t\t// Top-right corner\n\t\t\tuvs[ iuv + 0 ] = x1 - d0x;\n\t\t\tuvs[ iuv + 1 ] = y1 - d0y;\n\t\t\tuvs[ iuv + 2 ] = x1;\n\t\t\tuvs[ iuv + 3 ] = y1;\n\t\t\tuvs[ iuv + 4 ] = x1 - d0x + d1x;\n\t\t\tuvs[ iuv + 5 ] = y1 - d0y + d1y;\n\t\t\tuvs[ iuv + 6 ] = x1 + d1x;\n\t\t\tuvs[ iuv + 7 ] = y1 + d1y;\n\t\t\tiuv += 8;\n\n\t\t\t// Bottom-left corner\n\t\t\tuvs[ iuv + 0 ] = x3 - d1x;\n\t\t\tuvs[ iuv + 1 ] = y3 - d1y;\n\t\t\tuvs[ iuv + 2 ] = x3 + d0x - d1x;\n\t\t\tuvs[ iuv + 3 ] = y3 + d0y - d1y;\n\t\t\tuvs[ iuv + 4 ] = x3;\n\t\t\tuvs[ iuv + 5 ] = y3;\n\t\t\tuvs[ iuv + 6 ] = x3 + d0x;\n\t\t\tuvs[ iuv + 7 ] = y3 + d0y;\n\t\t\tiuv += 8;\n\n\t\t\t// Bottom-right corner\n\t\t\tuvs[ iuv + 0 ] = x2 - d0x - d1x;\n\t\t\tuvs[ iuv + 1 ] = y2 - d0y - d1y;\n\t\t\tuvs[ iuv + 2 ] = x2 - d1x;\n\t\t\tuvs[ iuv + 3 ] = y2 - d1y;\n\t\t\tuvs[ iuv + 4 ] = x2 - d0x;\n\t\t\tuvs[ iuv + 5 ] = y2 - d0y;\n\t\t\tuvs[ iuv + 6 ] = x2;\n\t\t\tuvs[ iuv + 7 ] = y2;\n\t\t\tiuv += 8;\n\n\t\t\t// Top edge\n\t\t\tuvs[ iuv + 0 ] = x0 + d0x;\n\t\t\tuvs[ iuv + 1 ] = y0 + d0y;\n\t\t\tuvs[ iuv + 2 ] = x4;\n\t\t\tuvs[ iuv + 3 ] = y4;\n\t\t\tuvs[ iuv + 4 ] = x1 - d0x;\n\t\t\tuvs[ iuv + 5 ] = y1 - d0y;\n\t\t\tiuv += 6;\n\n\t\t\t// Top\n\t\t\tuvs[ iuv + 0 ] = x0 + d1x;\n\t\t\tuvs[ iuv + 1 ] = y0 + d1y;\n\t\t\tuvs[ iuv + 2 ] = x0 + d1x + d0x;\n\t\t\tuvs[ iuv + 3 ] = y0 + d1y + d0y;\n\t\t\tuvs[ iuv + 4 ] = x4 + d1x;\n\t\t\tuvs[ iuv + 5 ] = y4 + d1y;\n\t\t\tuvs[ iuv + 6 ] = x1 + d1x - d0x;\n\t\t\tuvs[ iuv + 7 ] = y1 + d1y - d0y;\n\t\t\tuvs[ iuv + 8 ] = x1 + d1x;\n\t\t\tuvs[ iuv + 9 ] = y1 + d1y;\n\t\t\tiuv += 10;\n\n\t\t\t// Middle\n\t\t\tconst x02 = 0.5 * (x0 + x2);\n\t\t\tconst y02 = 0.5 * (y0 + y2);\n\t\t\tuvs[ iuv + 0 ] = 0.5 * (x0 + x3);\n\t\t\tuvs[ iuv + 1 ] = 0.5 * (y0 + y3);\n\t\t\tuvs[ iuv + 2 ] = x02;\n\t\t\tuvs[ iuv + 3 ] = y02;\n\t\t\tuvs[ iuv + 4 ] = x02;\n\t\t\tuvs[ iuv + 5 ] = y02;\n\t\t\tuvs[ iuv + 6 ] = 0.5 * (x1 + x2);\n\t\t\tuvs[ iuv + 7 ] = 0.5 * (y1 + y2);\n\t\t\tiuv += 8;\n\n\t\t\t// Bottom\n\t\t\tuvs[ iuv + 0 ] = x3 - d1x;\n\t\t\tuvs[ iuv + 1 ] = y3 - d1y;\n\t\t\tuvs[ iuv + 2 ] = x3 - d1x + d0x;\n\t\t\tuvs[ iuv + 3 ] = y3 - d1y + d0y;\n\t\t\tuvs[ iuv + 4 ] = x5 - d1x;\n\t\t\tuvs[ iuv + 5 ] = y5 - d1y;\n\t\t\tuvs[ iuv + 6 ] = x2 - d1x - d0x;\n\t\t\tuvs[ iuv + 7 ] = y2 - d1y - d0y;\n\t\t\tuvs[ iuv + 8 ] = x2 - d1x;\n\t\t\tuvs[ iuv + 9 ] = y2 - d1y;\n\t\t\tiuv += 10;\n\n\t\t\t// Bottom edge\n\t\t\tuvs[ iuv + 0 ] = x3 + d0x;\n\t\t\tuvs[ iuv + 1 ] = y3 + d0y;\n\t\t\tuvs[ iuv + 2 ] = x5;\n\t\t\tuvs[ iuv + 3 ] = y5;\n\t\t\tuvs[ iuv + 4 ] = x2 - d0x;\n\t\t\tuvs[ iuv + 5 ] = y2 - d0y;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeRectangleRoundedUploaded } from \"./e-shape-rectangle-rounded-uploaded\";\nimport { EShapeTextUploadeds } from \"./e-shape-text-uploadeds\";\n\nexport class EShapeRectangleRoundedUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape,\n\t\tvoffset: number, ioffset: number\n\t): EShapeRectangleRoundedUploaded | null {\n\t\tconst tcount = EShapeTextUploadeds.getTextCount( shape, buffer.workCount );\n\t\tconst tvcount = tcount.vertexCount;\n\t\tconst ticount = tcount.indexCount;\n\t\tconst vcount = 36 + tvcount;\n\t\tconst icount = 24 + ticount;\n\t\tif( voffset + vcount < buffer.vertexCapacity && ioffset + icount < buffer.indexCapacity ) {\n\t\t\treturn new EShapeRectangleRoundedUploaded(\n\t\t\t\tbuffer, voffset, ioffset, tvcount, ticount, vcount, icount\n\t\t\t).init( shape );\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeCorner } from \"../e-shape-corner\";\nimport { EShapeStrokeSide } from \"../e-shape-stroke\";\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapePrimitive } from \"./e-shape-primitive\";\n\nexport class EShapeRectangleRounded extends EShapePrimitive {\n\tconstructor( type = EShapeType.RECTANGLE_ROUNDED ) {\n\t\tsuper( type );\n\t}\n\n\tclone(): EShapeRectangleRounded {\n\t\treturn new EShapeRectangleRounded().copy( this );\n\t}\n\n\tprivate containsAbs_( x: number, y: number, ax: number, ay: number, r: number, corner: EShapeCorner ): boolean {\n\t\tconst bx0 = -ax + r;\n\t\tif( x <= bx0 ) {\n\t\t\tconst by0 = -ay + r;\n\t\t\tif( y <= by0 && (corner & EShapeCorner.TOP_LEFT) ) {\n\t\t\t\t// Top-left corner\n\t\t\t\tconst dx = x - bx0;\n\t\t\t\tconst dy = y - by0;\n\t\t\t\treturn dx * dx + dy * dy <= r * r;\n\t\t\t} else {\n\t\t\t\tconst by1 = +ay - r;\n\t\t\t\tif( by1 <= y && (corner & EShapeCorner.BOTTOM_LEFT) ) {\n\t\t\t\t\t// Bottom-left corner\n\t\t\t\t\tconst dx = x - bx0;\n\t\t\t\t\tconst dy = y - by1;\n\t\t\t\t\treturn dx * dx + dy * dy <= r * r;\n\t\t\t\t} else {\n\t\t\t\t\t// Middle-left box\n\t\t\t\t\treturn -ax <= x;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tconst bx1 = +ax - r;\n\t\t\tif( bx1 <= x ) {\n\t\t\t\tconst by0 = -ay + r;\n\t\t\t\tif( y <= by0 && (corner & EShapeCorner.TOP_RIGHT) ) {\n\t\t\t\t\t// Top-right corner\n\t\t\t\t\tconst dx = x - bx1;\n\t\t\t\t\tconst dy = y - by0;\n\t\t\t\t\treturn dx * dx + dy * dy <= r * r;\n\t\t\t\t} else {\n\t\t\t\t\tconst by1 = +ay - r;\n\t\t\t\t\tif( by1 <= y && (corner & EShapeCorner.BOTTOM_RIGHT) ) {\n\t\t\t\t\t\t// Bottom-right corner\n\t\t\t\t\t\tconst dx = x - bx1;\n\t\t\t\t\t\tconst dy = y - by1;\n\t\t\t\t\t\treturn dx * dx + dy * dy <= r * r;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Middle-right box\n\t\t\t\t\t\treturn x <= +ax;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn -ay <= y && y <= +ay;\n\t\t\t}\n\t\t}\n\t}\n\n\tcontainsAbs( x: number, y: number, ax: number, ay: number ): boolean {\n\t\tif( super.containsAbsBBox( x, y, ax, ay ) ) {\n\t\t\tconst fill = this.fill;\n\t\t\tconst stroke = this.stroke;\n\t\t\tconst strokeWidth = ( stroke.enable ? stroke.width : 0 );\n\t\t\tif( fill.enable || 0 < strokeWidth ) {\n\t\t\t\tconst r = this.radius * Math.min( ax, ay );\n\t\t\t\tconst corner = this.corner;\n\t\t\t\tconst strokeSide = stroke.side;\n\t\t\t\tif( this.containsAbs_( x, y, ax, ay, r, corner ) ) {\n\t\t\t\t\tif( fill.enable ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst wx = Math.max( 0.0, ax - strokeWidth );\n\t\t\t\t\t\tconst wy = Math.max( 0.0, ay - strokeWidth );\n\t\t\t\t\t\tconst wr = Math.max( 0.0, r - strokeWidth );\n\t\t\t\t\t\tif( ! this.containsAbs_( x, y, wx, wy, wr, corner ) ) {\n\t\t\t\t\t\t\tif( strokeSide === EShapeStrokeSide.ALL ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif( x <= -wx + wr ) {\n\t\t\t\t\t\t\t\t\tconst hasLeftSide = ( strokeSide & EShapeStrokeSide.LEFT ) !== 0;\n\t\t\t\t\t\t\t\t\tif( y <= -wy + wr ) {\n\t\t\t\t\t\t\t\t\t\tconst hasTopSide = ( strokeSide & EShapeStrokeSide.TOP );\n\t\t\t\t\t\t\t\t\t\tif( hasTopSide && hasLeftSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t} else if( hasTopSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn -wx <= y;\n\t\t\t\t\t\t\t\t\t\t} else if( hasLeftSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn x <= -wx;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else if( +wy - wr <= y ) {\n\t\t\t\t\t\t\t\t\t\tconst hasBottomSide = ( strokeSide & EShapeStrokeSide.BOTTOM );\n\t\t\t\t\t\t\t\t\t\tif( hasBottomSide && hasLeftSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t} else if( hasBottomSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn +wx <= y;\n\t\t\t\t\t\t\t\t\t\t} else if( hasLeftSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn x <= -wx;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn hasLeftSide;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if( +wx - wr <= x ) {\n\t\t\t\t\t\t\t\t\tconst hasRightSide = ( strokeSide & EShapeStrokeSide.RIGHT ) !== 0;\n\t\t\t\t\t\t\t\t\tif( y <= -wy + wr ) {\n\t\t\t\t\t\t\t\t\t\tconst hasTopSide = ( strokeSide & EShapeStrokeSide.TOP );\n\t\t\t\t\t\t\t\t\t\tif( hasTopSide && hasRightSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t} else if( hasTopSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn -wx <= y;\n\t\t\t\t\t\t\t\t\t\t} else if( hasRightSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn +wx <= x;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else if( +wy - wr <= y ) {\n\t\t\t\t\t\t\t\t\t\tconst hasBottomSide = ( strokeSide & EShapeStrokeSide.BOTTOM );\n\t\t\t\t\t\t\t\t\t\tif( hasBottomSide && hasRightSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t} else if( hasBottomSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn +wx <= y;\n\t\t\t\t\t\t\t\t\t\t} else if( hasRightSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn +wx <= x;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn hasRightSide;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif( y <= -wy + wr ) {\n\t\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.TOP ) !== 0;\n\t\t\t\t\t\t\t\t\t} else if( +wy - wr <= y ) {\n\t\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.BOTTOM ) !== 0;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeRectangleRounded } from \"./e-shape-rectangle-rounded\";\n\nexport class EShapeRectangleRoundeds {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeRectangleRounded> | EShapeRectangleRounded {\n\t\treturn EShapeDeserializer.deserialize( item, manager, EShapeRectangleRoundeds.create() );\n\t}\n\n\tstatic create(): EShapeRectangleRounded {\n\t\treturn new EShapeRectangleRounded();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeCapabilities } from \"../shape/e-shape-capabilities\";\nimport { EShapeCapability } from \"../shape/e-shape-capability\";\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeRectangleRoundedUploadeds } from \"../shape/variant/e-shape-rectangle-rounded-uploadeds\";\nimport { EShapeRectangleRoundeds } from \"../shape/variant/e-shape-rectangle-roundeds\";\n\nexport const loadShapeRectangleRounded = () => {\n\tEShapeUploadeds[ EShapeType.RECTANGLE_ROUNDED ] = EShapeRectangleRoundedUploadeds.create;\n\tEShapeDeserializers[ EShapeType.RECTANGLE_ROUNDED ] = EShapeRectangleRoundeds.deserialize;\n\tEShapeCapabilities.set(\n\t\tEShapeType.RECTANGLE_ROUNDED,\n\t\tEShapeCapability.PRIMITIVE | EShapeCapability.STROKE_SIDE | EShapeCapability.BORDER_RADIUS\n\t);\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeTextUploaded } from \"./e-shape-text-uploaded\";\n\nexport class EShapeTriangleUploaded extends EShapeTextUploaded {\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tconst buffer = this.buffer;\n\t\tconst voffset = this.vertexOffset;\n\t\tconst ioffset = this.indexOffset;\n\n\t\t// Clippings\n\t\tbuffer.clippingBuffer.update();\n\t\tconst clippings = buffer.clippings;\n\t\tconst iv = voffset * 3;\n\t\tclippings[ iv +  0 ] = 0;\n\t\tclippings[ iv +  1 ] = 0;\n\t\tclippings[ iv +  2 ] = 0;\n\n\t\tclippings[ iv +  3 ] = 1;\n\t\tclippings[ iv +  4 ] = 0;\n\t\tclippings[ iv +  5 ] = 0;\n\n\t\tclippings[ iv +  6 ] = 1;\n\t\tclippings[ iv +  7 ] = 0;\n\t\tclippings[ iv +  8 ] = 0;\n\n\t\tclippings[ iv +  9 ] = 0;\n\t\tclippings[ iv + 10 ] = 1;\n\t\tclippings[ iv + 11 ] = 0;\n\n\t\tclippings[ iv + 12 ] = 0;\n\t\tclippings[ iv + 13 ] = 1;\n\t\tclippings[ iv + 14 ] = 0;\n\n\t\tclippings[ iv + 15 ] = 1;\n\t\tclippings[ iv + 16 ] = 0;\n\t\tclippings[ iv + 17 ] = 0;\n\n\t\tclippings[ iv + 18 ] = 1;\n\t\tclippings[ iv + 19 ] = 0;\n\t\tclippings[ iv + 20 ] = 0;\n\n\t\t// Indices\n\t\tbuffer.indexBuffer.update();\n\t\tconst indices = buffer.indices;\n\t\tconst ii = ioffset * 3;\n\t\tindices[ ii + 0 ] = voffset + 0;\n\t\tindices[ ii + 1 ] = voffset + 1;\n\t\tindices[ ii + 2 ] = voffset + 2;\n\n\t\tindices[ ii + 3 ] = voffset + 0;\n\t\tindices[ ii + 4 ] = voffset + 3;\n\t\tindices[ ii + 5 ] = voffset + 4;\n\n\t\tindices[ ii + 6 ] = voffset + 0;\n\t\tindices[ ii + 7 ] = voffset + 5;\n\t\tindices[ ii + 8 ] = voffset + 6;\n\n\t\t// Text\n\t\tthis.initText();\n\n\t\tthis.update( shape );\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\tconst buffer = this.buffer;\n\t\tthis.updateTriangleVertex( buffer, shape );\n\t\tthis.updateColor( buffer, shape );\n\t\tthis.updateTriangleStep( buffer, shape );\n\t\tthis.updateTriangleUv( buffer, shape );\n\t\tthis.updateText( buffer, shape );\n\t}\n\n\tprotected updateTriangleVertex( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst size = shape.size;\n\t\tconst sizeX = size.x;\n\t\tconst sizeY = size.y;\n\t\tconst transformLocalId = this.toTransformLocalId( shape );\n\t\tconst isSizeChanged = ( sizeX !== this.sizeX || sizeY !== this.sizeY );\n\t\tconst isTransformChanged = ( this.transformLocalId !== transformLocalId );\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tconst isStrokeChanged = ( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth );\n\t\tif( isSizeChanged || isTransformChanged || isStrokeChanged ) {\n\t\t\tthis.sizeX = sizeX;\n\t\t\tthis.sizeY = sizeY;\n\t\t\tthis.transformLocalId = transformLocalId;\n\t\t\tif( isSizeChanged ) {\n\t\t\t\t// Invalidate the texture transform ID to update the UVs.\n\t\t\t\tthis.textureTransformId = NaN;\n\t\t\t}\n\t\t\t// Invalidate the stroke width to update the steps / antialiases.\n\t\t\tthis.strokeWidth = NaN;\n\n\t\t\t// Invalidate the text layout to update the text layout.\n\t\t\tthis.textSpacingHorizontal = NaN;\n\t\t\tbuffer.vertexBuffer.update();\n\n\t\t\t// Calculate the transformed positions\n\t\t\tconst s = strokeAlign * strokeWidth;\n\t\t\tconst sx = sizeX * 0.5 + (0 <= sizeX ? +s : -s);\n\t\t\tconst sy = sizeY * 0.5 + (0 <= sizeY ? +s : -s);\n\t\t\tconst sz = Math.sqrt( sx * sx + 4 * sy * sy );\n\t\t\tconst sw = 2 * sx * sy / (sx + sz);\n\n\t\t\tconst internalTransform = shape.transform.internalTransform;\n\t\t\tconst work = buffer.work;\n\t\t\twork.set( 0, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x0 = work.x;\n\t\t\tconst y0 = work.y;\n\t\t\twork.set( +sx, 0 );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst tx = internalTransform.tx;\n\t\t\tconst ty = internalTransform.ty;\n\t\t\tconst dx = tx - x0;\n\t\t\tconst dy = ty - y0;\n\t\t\tconst x1 = work.x + dx;\n\t\t\tconst y1 = work.y + dy;\n\t\t\tconst x2 = tx + (tx - work.x) + dx;\n\t\t\tconst y2 = ty + (ty - work.y) + dy;\n\t\t\twork.set( 0, sy - sw ); // Incenter of a triangle\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x3 = work.x;\n\t\t\tconst y3 = work.y;\n\n\t\t\t// World size\n\t\t\tconst xb = tx + dx;\n\t\t\tconst yb = ty + dy;\n\t\t\tthis.worldSizeXHalf = this.calcLength( x1, y1, xb, yb );\n\t\t\tthis.worldSizeYHalf = this.calcLength( x0, y0, tx, ty );\n\t\t\tthis.worldSizeR = this.calcLength( xb, yb, x3, y3 );\n\n\t\t\t// Vertices\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst vertices = buffer.vertices;\n\t\t\tconst iv = voffset * 2;\n\t\t\tvertices[ iv +  0 ] = x3;\n\t\t\tvertices[ iv +  1 ] = y3;\n\n\t\t\tvertices[ iv +  2 ] = x0;\n\t\t\tvertices[ iv +  3 ] = y0;\n\t\t\tvertices[ iv +  4 ] = x1;\n\t\t\tvertices[ iv +  5 ] = y1;\n\n\t\t\tvertices[ iv +  6 ] = x1;\n\t\t\tvertices[ iv +  7 ] = y1;\n\t\t\tvertices[ iv +  8 ] = x2;\n\t\t\tvertices[ iv +  9 ] = y2;\n\n\t\t\tvertices[ iv + 10 ] = x2;\n\t\t\tvertices[ iv + 11 ] = y2;\n\t\t\tvertices[ iv + 12 ] = x0;\n\t\t\tvertices[ iv + 13 ] = y0;\n\t\t}\n\t}\n\n\tprotected updateTriangleStep( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tif( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth ) {\n\t\t\tthis.strokeWidth = strokeWidth;\n\t\t\tthis.strokeAlign = strokeAlign;\n\t\t\tbuffer.stepBuffer.update();\n\t\t\tbuffer.antialiasBuffer.update();\n\n\t\t\tconst work = buffer.workStep;\n\t\t\tthis.calcStep( this.worldSizeR, strokeWidth, work );\n\t\t\tconst swc = work[ 0 ];\n\t\t\tconst pc0 = work[ 1 ];\n\t\t\tconst pc1 = work[ 2 ];\n\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst vcount = this.vertexCount - this.textVertexCount;\n\t\t\tthis.updateStep( buffer, voffset, vcount, swc, swc, pc0, pc0, pc1, pc1 );\n\t\t}\n\t}\n\n\tprotected updateTriangleUv( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst texture = this.toTexture( shape );\n\t\tconst textureTransformId = this.toTextureTransformId( texture );\n\t\tif( texture !== this.texture || textureTransformId !== this.textureTransformId ) {\n\t\t\tthis.texture = texture;\n\t\t\tthis.textureTransformId = textureTransformId;\n\n\t\t\tconst textureUvs = this.toTextureUvs( texture ) as any;\n\t\t\tconst x0 = textureUvs.x0;\n\t\t\tconst x1 = textureUvs.x1;\n\t\t\tconst x2 = textureUvs.x2;\n\t\t\tconst x3 = textureUvs.x3;\n\t\t\tconst y0 = textureUvs.y0;\n\t\t\tconst y1 = textureUvs.y1;\n\t\t\tconst y2 = textureUvs.y2;\n\t\t\tconst y3 = textureUvs.y3;\n\n\t\t\tconst x4 = 0.5 * ( x0 + x1 );\n\t\t\tconst y4 = 0.5 * ( y0 + y1 );\n\n\t\t\tconst c = 1 - 0.5 * this.worldSizeR / this.worldSizeYHalf;\n\t\t\tconst x5 = x4 + c * ( x3 - x0 );\n\t\t\tconst y5 = y4 + c * ( y3 - y0 );\n\n\t\t\t// UVs\n\t\t\tbuffer.uvBuffer.update();\n\t\t\tconst uvs = buffer.uvs;\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst iuv = voffset * 2;\n\t\t\tuvs[ iuv +  0 ] = x5;\n\t\t\tuvs[ iuv +  1 ] = y5;\n\n\t\t\tuvs[ iuv +  2 ] = x4;\n\t\t\tuvs[ iuv +  3 ] = y4;\n\t\t\tuvs[ iuv +  4 ] = x2;\n\t\t\tuvs[ iuv +  5 ] = y2;\n\n\t\t\tuvs[ iuv +  6 ] = x2;\n\t\t\tuvs[ iuv +  7 ] = y2;\n\t\t\tuvs[ iuv +  8 ] = x3;\n\t\t\tuvs[ iuv +  9 ] = y3;\n\n\t\t\tuvs[ iuv + 10 ] = x3;\n\t\t\tuvs[ iuv + 11 ] = y3;\n\t\t\tuvs[ iuv + 12 ] = x4;\n\t\t\tuvs[ iuv + 13 ] = y4;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeTextUploadeds } from \"./e-shape-text-uploadeds\";\nimport { EShapeTriangleUploaded } from \"./e-shape-triangle-uploaded\";\n\nexport class EShapeTriangleUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape, voffset: number, ioffset: number\n\t): EShapeTriangleUploaded | null {\n\t\tconst tcount = EShapeTextUploadeds.getTextCount( shape, buffer.workCount );\n\t\tconst tvcount = tcount.vertexCount;\n\t\tconst ticount = tcount.indexCount;\n\t\tconst vcount = 7 + tvcount;\n\t\tconst icount = 3 + ticount;\n\t\tif( voffset + vcount < buffer.vertexCapacity && ioffset + icount < buffer.indexCapacity ) {\n\t\t\treturn new EShapeTriangleUploaded(\n\t\t\t\tbuffer, voffset, ioffset, tvcount, ticount, vcount, icount\n\t\t\t).init( shape );\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapePrimitive } from \"./e-shape-primitive\";\n\nexport class EShapeTriangle extends EShapePrimitive {\n\tconstructor( type = EShapeType.TRIANGLE ) {\n\t\tsuper( type );\n\t}\n\n\tclone(): EShapeTriangle {\n\t\treturn new EShapeTriangle().copy( this );\n\t}\n\n\tprotected containsAbs_( x: number, y: number, a: number, ay1: number, ay2: number ): boolean {\n\t\t// a = 2 * ay / ax\n\t\t// y = + a * x + ay1\n\t\t// y = - a * x + ay1\n\t\t// y = ay2;\n\t\treturn ( +a * x + ay1 - y <= 0 && -a * x + ay1 - y <= 0 && y <= ay2 );\n\t}\n\n\tcontainsAbs( x: number, y: number, ax: number, ay: number ): boolean {\n\t\tif( super.containsAbsBBox( x, y, ax, ay ) ) {\n\t\t\tconst a = 2 * ay / ax;\n\t\t\tconst fill = this.fill;\n\t\t\tif( fill.enable ) {\n\t\t\t\tif( this.containsAbs_( x, y, a, -ay, +ay ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst stroke = this.stroke;\n\t\t\t\tconst strokeWidth = stroke.width;\n\t\t\t\tif( stroke.enable && 0 < strokeWidth ) {\n\t\t\t\t\tif( this.containsAbs_( x, y, a, -ay, +ay ) ) {\n\t\t\t\t\t\tconst az = Math.sqrt( ax * ax + 4 * ay * ay );\n\t\t\t\t\t\tconst aw = 2 * ax * ay / (ax + az);\n\n\t\t\t\t\t\tconst cy = ay - aw;\n\t\t\t\t\t\tconst ay1 = cy + (-ay - cy) * Math.max( 0.0, aw - strokeWidth ) / aw;\n\t\t\t\t\t\tconst ay2 = ay - strokeWidth;\n\t\t\t\t\t\tif( ! this.containsAbs_( x, y, a, ay1, ay2 ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeTriangle } from \"./e-shape-triangle\";\n\nexport class EShapeTriangles {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeTriangle> | EShapeTriangle {\n\t\treturn EShapeDeserializer.deserialize( item, manager, EShapeTriangles.create() );\n\t}\n\n\tstatic create(): EShapeTriangle {\n\t\treturn new EShapeTriangle();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeTriangleUploadeds } from \"../shape/variant/e-shape-triangle-uploadeds\";\nimport { EShapeTriangles } from \"../shape/variant/e-shape-triangles\";\n\nexport const loadShapeTriangle = () => {\n\tEShapeUploadeds[ EShapeType.TRIANGLE ] = EShapeTriangleUploadeds.create;\n\tEShapeDeserializers[ EShapeType.TRIANGLE ] = EShapeTriangles.deserialize;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeCorner } from \"../e-shape-corner\";\nimport { EShapeTextUploaded } from \"./e-shape-text-uploaded\";\n\nexport class EShapeTriangleRoundedUploaded extends EShapeTextUploaded {\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tconst buffer = this.buffer;\n\t\tconst voffset = this.vertexOffset;\n\t\tconst ioffset = this.indexOffset;\n\n\t\t// Indices\n\t\tbuffer.indexBuffer.update();\n\t\tconst indices = buffer.indices;\n\t\tconst ii = ioffset * 3;\n\n\t\t// Top corner\n\t\tindices[ ii +  0 ] = voffset + 0;\n\t\tindices[ ii +  1 ] = voffset + 1;\n\t\tindices[ ii +  2 ] = voffset + 3;\n\n\t\tindices[ ii +  3 ] = voffset + 1;\n\t\tindices[ ii +  4 ] = voffset + 2;\n\t\tindices[ ii +  5 ] = voffset + 3;\n\n\t\t// Bottom-right corner\n\t\tindices[ ii +  6 ] = voffset + 4;\n\t\tindices[ ii +  7 ] = voffset + 5;\n\t\tindices[ ii +  8 ] = voffset + 7;\n\n\t\tindices[ ii +  9 ] = voffset + 5;\n\t\tindices[ ii + 10 ] = voffset + 6;\n\t\tindices[ ii + 11 ] = voffset + 7;\n\n\t\t// Bottom-left corner\n\t\tindices[ ii + 12 ] = voffset + 8;\n\t\tindices[ ii + 13 ] = voffset + 9;\n\t\tindices[ ii + 14 ] = voffset + 11;\n\n\t\tindices[ ii + 15 ] = voffset + 9;\n\t\tindices[ ii + 16 ] = voffset + 10;\n\t\tindices[ ii + 17 ] = voffset + 11;\n\n\t\t// Others\n\t\tindices[ ii + 18 ] = voffset + 12;\n\t\tindices[ ii + 19 ] = voffset + 13;\n\t\tindices[ ii + 20 ] = voffset + 16;\n\n\t\tindices[ ii + 21 ] = voffset + 13;\n\t\tindices[ ii + 22 ] = voffset + 14;\n\t\tindices[ ii + 23 ] = voffset + 16;\n\n\t\tindices[ ii + 24 ] = voffset + 14;\n\t\tindices[ ii + 25 ] = voffset + 15;\n\t\tindices[ ii + 26 ] = voffset + 16;\n\n\t\t//\n\t\tindices[ ii + 27 ] = voffset + 12;\n\t\tindices[ ii + 28 ] = voffset + 16;\n\t\tindices[ ii + 29 ] = voffset + 19;\n\n\t\tindices[ ii + 30 ] = voffset + 16;\n\t\tindices[ ii + 31 ] = voffset + 17;\n\t\tindices[ ii + 32 ] = voffset + 19;\n\n\t\tindices[ ii + 33 ] = voffset + 17;\n\t\tindices[ ii + 34 ] = voffset + 18;\n\t\tindices[ ii + 35 ] = voffset + 19;\n\n\t\t//\n\t\tindices[ ii + 36 ] = voffset + 12;\n\t\tindices[ ii + 37 ] = voffset + 19;\n\t\tindices[ ii + 38 ] = voffset + 13;\n\n\t\tindices[ ii + 39 ] = voffset + 19;\n\t\tindices[ ii + 40 ] = voffset + 20;\n\t\tindices[ ii + 41 ] = voffset + 13;\n\n\t\tindices[ ii + 42 ] = voffset + 20;\n\t\tindices[ ii + 43 ] = voffset + 21;\n\t\tindices[ ii + 44 ] = voffset + 13;\n\n\t\t// Text\n\t\tthis.initText();\n\n\t\tthis.update( shape );\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\tconst buffer = this.buffer;\n\t\tthis.updateTriangleRoundedVertex( buffer, shape );\n\t\tthis.updateTriangleRoundedClipping( buffer, shape );\n\t\tthis.updateColor( buffer, shape );\n\t\tthis.updateTriangleRoundedStep( buffer, shape );\n\t\tthis.updateTriangleRoundedUv( buffer, shape );\n\t\tthis.updateText( buffer, shape );\n\t}\n\n\tprotected updateTriangleRoundedVertex( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst size = shape.size;\n\t\tconst sizeX = size.x;\n\t\tconst sizeY = size.y;\n\t\tconst transformLocalId = this.toTransformLocalId( shape );\n\t\tconst radius = shape.radius;\n\t\tconst isRadiusChanged = ( radius !== this.radius );\n\t\tconst isSizeChanged = (\n\t\t\tsizeX !== this.sizeX ||\n\t\t\tsizeY !== this.sizeY\n\t\t);\n\t\tconst isTransformChanged = ( this.transformLocalId !== transformLocalId );\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tconst isStrokeChanged = ( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth );\n\t\tif( isSizeChanged || isTransformChanged || isRadiusChanged || isStrokeChanged ) {\n\t\t\tthis.sizeX = sizeX;\n\t\t\tthis.sizeY = sizeY;\n\t\t\tthis.transformLocalId = transformLocalId;\n\t\t\tthis.radius = radius;\n\t\t\tif( isRadiusChanged ) {\n\t\t\t\t// Invalidate the corner to update the clippings\n\t\t\t\tthis.corner = NaN;\n\t\t\t}\n\t\t\tif( isSizeChanged || isRadiusChanged ) {\n\t\t\t\t// Invalidate the texture transform ID to update the UVs.\n\t\t\t\tthis.textureTransformId = NaN;\n\t\t\t}\n\t\t\t// Invalidate the stroke width to update the steps / antialiases\n\t\t\tthis.strokeWidth = NaN;\n\n\t\t\t// Invalidate the text layout to update the text layout.\n\t\t\tthis.textSpacingHorizontal = NaN;\n\t\t\tbuffer.vertexBuffer.update();\n\n\t\t\t// Calculate the transformed positions\n\t\t\tconst s = strokeAlign * strokeWidth;\n\t\t\tconst sx = sizeX * 0.5 + (0 <= sizeX ? +s : -s);\n\t\t\tconst sy = sizeY * 0.5 + (0 <= sizeY ? +s : -s);\n\t\t\tconst sz = Math.sqrt( sx * sx + 4 * sy * sy );\n\t\t\tconst sw = 2 * sx * sy / (sx + sz);\n\t\t\tconst ry = ( sw * radius ) / ( 2 * sy );\n\t\t\tconst rz = ( 0.5 * ( sz - sw ) * radius ) / ( sz );\n\t\t\tconst rx = ( ry * sz ) / ( 2 * sx );\n\n\t\t\tconst internalTransform = shape.transform.internalTransform;\n\t\t\tconst work = buffer.work;\n\t\t\twork.set( 0, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x1 = work.x;\n\t\t\tconst y1 = work.y;\n\t\t\twork.set( +sx, 0 );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst tx = internalTransform.tx;\n\t\t\tconst ty = internalTransform.ty;\n\t\t\tconst dx = tx - x1;\n\t\t\tconst dy = ty - y1;\n\t\t\tconst x4 = work.x + dx;\n\t\t\tconst y4 = work.y + dy;\n\t\t\tconst x7 = tx + (tx - work.x) + dx;\n\t\t\tconst y7 = ty + (ty - work.y) + dy;\n\t\t\tconst dx14 = x4 - x1;\n\t\t\tconst dy14 = y4 - y1;\n\t\t\tconst x2 = x1 + rz * dx14;\n\t\t\tconst y2 = y1 + rz * dy14;\n\t\t\tconst x3 = x4 - ry * dx14;\n\t\t\tconst y3 = y4 - ry * dy14;\n\t\t\tconst dx47r = rx * (x7 - x4);\n\t\t\tconst dy47r = rx * (y7 - y4);\n\t\t\tconst x5 = x4 + dx47r;\n\t\t\tconst y5 = y4 + dy47r;\n\t\t\tconst x6 = x7 - dx47r;\n\t\t\tconst y6 = y7 - dy47r;\n\t\t\tconst dx71 = x1 - x7;\n\t\t\tconst dy71 = y1 - y7;\n\t\t\tconst x8 = x7 + ry * dx71;\n\t\t\tconst y8 = y7 + ry * dy71;\n\t\t\tconst x9 = x1 - rz * dx71;\n\t\t\tconst y9 = y1 - rz * dy71;\n\t\t\twork.set( 0, sy - sw ); // Incenter of a triangle\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x0 = work.x;\n\t\t\tconst y0 = work.y;\n\n\t\t\tconst x10 = x1 + radius * ( x0 - x1 );\n\t\t\tconst y10 = y1 + radius * ( y0 - y1 );\n\t\t\tconst x11 = x4 + radius * ( x0 - x4 );\n\t\t\tconst y11 = y4 + radius * ( y0 - y4 );\n\t\t\tconst x12 = x7 + radius * ( x0 - x7 );\n\t\t\tconst y12 = y7 + radius * ( y0 - y7 );\n\n\t\t\t// World size\n\t\t\tconst xb = tx + dx;\n\t\t\tconst yb = ty + dy;\n\t\t\tthis.worldSizeXHalf = rx;\n\t\t\tthis.worldSizeYHalf = ry;\n\t\t\tthis.worldSizeZHalf = rz;\n\t\t\tthis.worldSizeWHalf = 1 - 0.5 * sw / sy;\n\t\t\tthis.worldSizeR = this.calcLength( xb, yb, x0, y0 );\n\n\t\t\t// Vertices\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst vertices = buffer.vertices;\n\t\t\tconst iv = voffset * 2;\n\n\t\t\t// Top corner\n\t\t\tvertices[ iv +  0 ] = x10;\n\t\t\tvertices[ iv +  1 ] = y10;\n\t\t\tvertices[ iv +  2 ] = x9;\n\t\t\tvertices[ iv +  3 ] = y9;\n\t\t\tvertices[ iv +  4 ] = x1;\n\t\t\tvertices[ iv +  5 ] = y1;\n\t\t\tvertices[ iv +  6 ] = x2;\n\t\t\tvertices[ iv +  7 ] = y2;\n\n\t\t\t// Bottom-right corner\n\t\t\tvertices[ iv +  8 ] = x11;\n\t\t\tvertices[ iv +  9 ] = y11;\n\t\t\tvertices[ iv + 10 ] = x3;\n\t\t\tvertices[ iv + 11 ] = y3;\n\t\t\tvertices[ iv + 12 ] = x4;\n\t\t\tvertices[ iv + 13 ] = y4;\n\t\t\tvertices[ iv + 14 ] = x5;\n\t\t\tvertices[ iv + 15 ] = y5;\n\n\t\t\t// Bottom-left corner\n\t\t\tvertices[ iv + 16 ] = x12;\n\t\t\tvertices[ iv + 17 ] = y12;\n\t\t\tvertices[ iv + 18 ] = x6;\n\t\t\tvertices[ iv + 19 ] = y6;\n\t\t\tvertices[ iv + 20 ] = x7;\n\t\t\tvertices[ iv + 21 ] = y7;\n\t\t\tvertices[ iv + 22 ] = x8;\n\t\t\tvertices[ iv + 23 ] = y8;\n\n\t\t\t// Others\n\t\t\tvertices[ iv + 24 ] = x0;\n\t\t\tvertices[ iv + 25 ] = y0;\n\n\t\t\tvertices[ iv + 26 ] = x10;\n\t\t\tvertices[ iv + 27 ] = y10;\n\n\t\t\tvertices[ iv + 28 ] = x2;\n\t\t\tvertices[ iv + 29 ] = y2;\n\t\t\tvertices[ iv + 30 ] = x3;\n\t\t\tvertices[ iv + 31 ] = y3;\n\n\t\t\tvertices[ iv + 32 ] = x11;\n\t\t\tvertices[ iv + 33 ] = y11;\n\n\t\t\tvertices[ iv + 34 ] = x5;\n\t\t\tvertices[ iv + 35 ] = y5;\n\t\t\tvertices[ iv + 36 ] = x6;\n\t\t\tvertices[ iv + 37 ] = y6;\n\n\t\t\tvertices[ iv + 38 ] = x12;\n\t\t\tvertices[ iv + 39 ] = y12;\n\n\t\t\tvertices[ iv + 40 ] = x8;\n\t\t\tvertices[ iv + 41 ] = y8;\n\t\t\tvertices[ iv + 42 ] = x9;\n\t\t\tvertices[ iv + 43 ] = y9;\n\t\t}\n\t}\n\n\tprotected updateTriangleRoundedClipping( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst corner = shape.corner;\n\t\tif( corner !== this.corner ) {\n\t\t\tthis.corner = corner;\n\n\t\t\t// Invalidate the strokeWidth to update steps / antialiases\n\t\t\tthis.strokeWidth = NaN;\n\n\t\t\tbuffer.clippingBuffer.update();\n\t\t\tconst clippings = buffer.clippings;\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst iv = voffset * 3;\n\t\t\tconst w = 1 - shape.radius;\n\n\t\t\t// Top corner\n\t\t\tif( corner & EShapeCorner.TOP ) {\n\t\t\t\tclippings[ iv +  0 ] = 0;\n\t\t\t\tclippings[ iv +  1 ] = 0;\n\t\t\t\tclippings[ iv +  2 ] = 1;\n\t\t\t\tclippings[ iv +  3 ] = 1;\n\t\t\t\tclippings[ iv +  4 ] = 0;\n\t\t\t\tclippings[ iv +  5 ] = 1;\n\t\t\t\tclippings[ iv +  6 ] = 1;\n\t\t\t\tclippings[ iv +  7 ] = 1;\n\t\t\t\tclippings[ iv +  8 ] = 1;\n\t\t\t\tclippings[ iv +  9 ] = 0;\n\t\t\t\tclippings[ iv + 10 ] = 1;\n\t\t\t\tclippings[ iv + 11 ] = 1;\n\t\t\t} else {\n\t\t\t\tclippings[ iv +  0 ] = w;\n\t\t\t\tclippings[ iv +  1 ] = w;\n\t\t\t\tclippings[ iv +  2 ] = 0;\n\t\t\t\tclippings[ iv +  3 ] = 1;\n\t\t\t\tclippings[ iv +  4 ] = w;\n\t\t\t\tclippings[ iv +  5 ] = 0;\n\t\t\t\tclippings[ iv +  6 ] = 1;\n\t\t\t\tclippings[ iv +  7 ] = 1;\n\t\t\t\tclippings[ iv +  8 ] = 0;\n\t\t\t\tclippings[ iv +  9 ] = w;\n\t\t\t\tclippings[ iv + 10 ] = 1;\n\t\t\t\tclippings[ iv + 11 ] = 0;\n\t\t\t}\n\n\t\t\t// Bottom-right corner\n\t\t\tif( corner & EShapeCorner.BOTTOM_RIGHT ) {\n\t\t\t\tclippings[ iv + 12 ] = 0;\n\t\t\t\tclippings[ iv + 13 ] = 0;\n\t\t\t\tclippings[ iv + 14 ] = 1;\n\t\t\t\tclippings[ iv + 15 ] = 1;\n\t\t\t\tclippings[ iv + 16 ] = 0;\n\t\t\t\tclippings[ iv + 17 ] = 1;\n\t\t\t\tclippings[ iv + 18 ] = 1;\n\t\t\t\tclippings[ iv + 19 ] = 1;\n\t\t\t\tclippings[ iv + 20 ] = 1;\n\t\t\t\tclippings[ iv + 21 ] = 0;\n\t\t\t\tclippings[ iv + 22 ] = 1;\n\t\t\t\tclippings[ iv + 23 ] = 1;\n\t\t\t} else {\n\t\t\t\tclippings[ iv + 12 ] = w;\n\t\t\t\tclippings[ iv + 13 ] = w;\n\t\t\t\tclippings[ iv + 14 ] = 0;\n\t\t\t\tclippings[ iv + 15 ] = 1;\n\t\t\t\tclippings[ iv + 16 ] = w;\n\t\t\t\tclippings[ iv + 17 ] = 0;\n\t\t\t\tclippings[ iv + 18 ] = 1;\n\t\t\t\tclippings[ iv + 19 ] = 1;\n\t\t\t\tclippings[ iv + 20 ] = 0;\n\t\t\t\tclippings[ iv + 21 ] = w;\n\t\t\t\tclippings[ iv + 22 ] = 1;\n\t\t\t\tclippings[ iv + 23 ] = 0;\n\t\t\t}\n\n\t\t\t// Bottom-left corner\n\t\t\tif( corner & EShapeCorner.BOTTOM_LEFT ) {\n\t\t\t\tclippings[ iv + 24 ] = 0;\n\t\t\t\tclippings[ iv + 25 ] = 0;\n\t\t\t\tclippings[ iv + 26 ] = 1;\n\t\t\t\tclippings[ iv + 27 ] = 1;\n\t\t\t\tclippings[ iv + 28 ] = 0;\n\t\t\t\tclippings[ iv + 29 ] = 1;\n\t\t\t\tclippings[ iv + 30 ] = 1;\n\t\t\t\tclippings[ iv + 31 ] = 1;\n\t\t\t\tclippings[ iv + 32 ] = 1;\n\t\t\t\tclippings[ iv + 33 ] = 0;\n\t\t\t\tclippings[ iv + 34 ] = 1;\n\t\t\t\tclippings[ iv + 35 ] = 1;\n\t\t\t} else {\n\t\t\t\tclippings[ iv + 24 ] = w;\n\t\t\t\tclippings[ iv + 25 ] = w;\n\t\t\t\tclippings[ iv + 26 ] = 0;\n\t\t\t\tclippings[ iv + 27 ] = 1;\n\t\t\t\tclippings[ iv + 28 ] = w;\n\t\t\t\tclippings[ iv + 29 ] = 0;\n\t\t\t\tclippings[ iv + 30 ] = 1;\n\t\t\t\tclippings[ iv + 31 ] = 1;\n\t\t\t\tclippings[ iv + 32 ] = 0;\n\t\t\t\tclippings[ iv + 33 ] = w;\n\t\t\t\tclippings[ iv + 34 ] = 1;\n\t\t\t\tclippings[ iv + 35 ] = 0;\n\t\t\t}\n\n\t\t\t// Others\n\t\t\tclippings[ iv + 36 ] = 0;\n\t\t\tclippings[ iv + 37 ] = 0;\n\t\t\tclippings[ iv + 38 ] = 0;\n\n\t\t\tclippings[ iv + 39 ] = w;\n\t\t\tclippings[ iv + 40 ] = 0;\n\t\t\tclippings[ iv + 41 ] = 0;\n\n\t\t\tclippings[ iv + 42 ] = 1;\n\t\t\tclippings[ iv + 43 ] = 0;\n\t\t\tclippings[ iv + 44 ] = 0;\n\t\t\tclippings[ iv + 45 ] = 1;\n\t\t\tclippings[ iv + 46 ] = 0;\n\t\t\tclippings[ iv + 47 ] = 0;\n\n\t\t\tclippings[ iv + 48 ] = w;\n\t\t\tclippings[ iv + 49 ] = 0;\n\t\t\tclippings[ iv + 50 ] = 0;\n\n\t\t\tclippings[ iv + 51 ] = 1;\n\t\t\tclippings[ iv + 52 ] = 0;\n\t\t\tclippings[ iv + 53 ] = 0;\n\t\t\tclippings[ iv + 54 ] = 1;\n\t\t\tclippings[ iv + 55 ] = 0;\n\t\t\tclippings[ iv + 56 ] = 0;\n\n\t\t\tclippings[ iv + 57 ] = w;\n\t\t\tclippings[ iv + 58 ] = 0;\n\t\t\tclippings[ iv + 59 ] = 0;\n\n\t\t\tclippings[ iv + 60 ] = 1;\n\t\t\tclippings[ iv + 61 ] = 0;\n\t\t\tclippings[ iv + 62 ] = 0;\n\t\t\tclippings[ iv + 63 ] = 1;\n\t\t\tclippings[ iv + 64 ] = 0;\n\t\t\tclippings[ iv + 65 ] = 0;\n\t\t}\n\t}\n\n\tprotected updateTriangleRoundedStep( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tif( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth ) {\n\t\t\tthis.strokeWidth = strokeWidth;\n\t\t\tthis.strokeAlign = strokeAlign;\n\t\t\tbuffer.stepBuffer.update();\n\t\t\tbuffer.antialiasBuffer.update();\n\n\t\t\tconst work = buffer.workStep;\n\t\t\tconst wsr = this.worldSizeR;\n\t\t\tthis.calcStep( wsr, strokeWidth, work );\n\t\t\tconst swc = work[ 0 ];\n\t\t\tconst pc0 = work[ 1 ];\n\t\t\tconst pc1 = work[ 2 ];\n\n\t\t\tthis.calcStep( shape.radius * wsr, strokeWidth, work );\n\t\t\tconst swr = work[ 0 ];\n\t\t\tconst pr0 = work[ 1 ];\n\t\t\tconst pr1 = work[ 2 ];\n\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst vcount = this.vertexCount - this.textVertexCount;\n\t\t\tthis.updateStepIf(\n\t\t\t\tbuffer,\n\t\t\t\tvoffset, vcount,\n\t\t\t\tswr, pr0, pr1,\n\t\t\t\tswc, swc, pc0, pc0, pc1, pc1\n\t\t\t);\n\t\t}\n\t}\n\n\tprotected updateTriangleRoundedUv( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst texture = this.toTexture( shape );\n\t\tconst textureTransformId = this.toTextureTransformId( texture );\n\t\tif( texture !== this.texture || textureTransformId !== this.textureTransformId ) {\n\t\t\tthis.texture = texture;\n\t\t\tthis.textureTransformId = textureTransformId;\n\n\t\t\tconst textureUvs = this.toTextureUvs( texture ) as any;\n\t\t\tconst x0 = textureUvs.x0;\n\t\t\tconst x1 = textureUvs.x1;\n\t\t\tconst x2 = textureUvs.x2;\n\t\t\tconst x3 = textureUvs.x3;\n\t\t\tconst y0 = textureUvs.y0;\n\t\t\tconst y1 = textureUvs.y1;\n\t\t\tconst y2 = textureUvs.y2;\n\t\t\tconst y3 = textureUvs.y3;\n\n\t\t\tconst x4 = 0.5 * ( x0 + x1 );\n\t\t\tconst y4 = 0.5 * ( y0 + y1 );\n\n\t\t\tconst c = this.worldSizeWHalf;\n\t\t\tconst x5 = x4 + c * ( x3 - x0 );\n\t\t\tconst y5 = y4 + c * ( y3 - y0 );\n\n\t\t\tconst radius = shape.radius;\n\t\t\tconst rx = this.worldSizeXHalf;\n\t\t\tconst ry = this.worldSizeYHalf;\n\t\t\tconst rz = this.worldSizeZHalf;\n\t\t\tconst x6 = x4 + rz * (x3 - x4);\n\t\t\tconst y6 = y4 + rz * (y3 - y4);\n\t\t\tconst x7 = x4 + radius * (x5 - x4);\n\t\t\tconst y7 = y4 + radius * (y5 - y4);\n\t\t\tconst x8 = x4 + rz * (x2 - x4);\n\t\t\tconst y8 = y4 + rz * (y2 - y4);\n\n\t\t\tconst x9 = x2 + ry * (x4 - x2);\n\t\t\tconst y9 = y2 + ry * (y4 - y2);\n\t\t\tconst x10 = x2 + radius * (x5 - x2);\n\t\t\tconst y10 = y2 + radius * (y5 - y2);\n\t\t\tconst x11 = x2 + rx * (x3 - x2);\n\t\t\tconst y11 = y2 + rx * (y3 - y2);\n\n\t\t\tconst x12 = x3 + rx * (x2 - x3);\n\t\t\tconst y12 = y3 + rx * (y2 - y3);\n\t\t\tconst x13 = x3 + radius * (x5 - x3);\n\t\t\tconst y13 = y3 + radius * (y5 - y3);\n\t\t\tconst x14 = x3 + ry * (x4 - x3);\n\t\t\tconst y14 = y3 + ry * (y4 - y3);\n\n\t\t\t// Uvs\n\t\t\tbuffer.uvBuffer.update();\n\t\t\tconst uvs = buffer.uvs;\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tlet iuv = voffset * 2;\n\n\t\t\t// Top corner\n\t\t\tuvs[ iuv + 0 ] = x7;\n\t\t\tuvs[ iuv + 1 ] = y7;\n\t\t\tuvs[ iuv + 2 ] = x6;\n\t\t\tuvs[ iuv + 3 ] = y6;\n\t\t\tuvs[ iuv + 4 ] = x4;\n\t\t\tuvs[ iuv + 5 ] = y4;\n\t\t\tuvs[ iuv + 6 ] = x8;\n\t\t\tuvs[ iuv + 7 ] = y8;\n\t\t\tiuv += 8;\n\n\t\t\t// Bottom-right corner\n\t\t\tuvs[ iuv + 0 ] = x10;\n\t\t\tuvs[ iuv + 1 ] = y10;\n\t\t\tuvs[ iuv + 2 ] = x9;\n\t\t\tuvs[ iuv + 3 ] = y9;\n\t\t\tuvs[ iuv + 4 ] = x2;\n\t\t\tuvs[ iuv + 5 ] = y2;\n\t\t\tuvs[ iuv + 6 ] = x11;\n\t\t\tuvs[ iuv + 7 ] = y11;\n\t\t\tiuv += 8;\n\n\t\t\t// Bottom-left corner\n\t\t\tuvs[ iuv + 0 ] = x13;\n\t\t\tuvs[ iuv + 1 ] = y13;\n\t\t\tuvs[ iuv + 2 ] = x12;\n\t\t\tuvs[ iuv + 3 ] = y12;\n\t\t\tuvs[ iuv + 4 ] = x3;\n\t\t\tuvs[ iuv + 5 ] = y3;\n\t\t\tuvs[ iuv + 6 ] = x14;\n\t\t\tuvs[ iuv + 7 ] = y14;\n\t\t\tiuv += 8;\n\n\t\t\t// Others\n\t\t\tuvs[ iuv +  0 ] = x5;\n\t\t\tuvs[ iuv +  1 ] = y5;\n\n\t\t\tuvs[ iuv +  2 ] = x7;\n\t\t\tuvs[ iuv +  3 ] = y7;\n\n\t\t\tuvs[ iuv +  4 ] = x8;\n\t\t\tuvs[ iuv +  5 ] = y8;\n\t\t\tuvs[ iuv +  6 ] = x9;\n\t\t\tuvs[ iuv +  7 ] = y9;\n\n\t\t\tuvs[ iuv +  8 ] = x10;\n\t\t\tuvs[ iuv +  9 ] = y10;\n\n\t\t\tuvs[ iuv + 10 ] = x11;\n\t\t\tuvs[ iuv + 11 ] = y11;\n\t\t\tuvs[ iuv + 12 ] = x12;\n\t\t\tuvs[ iuv + 13 ] = y12;\n\n\t\t\tuvs[ iuv + 14 ] = x13;\n\t\t\tuvs[ iuv + 15 ] = y13;\n\n\t\t\tuvs[ iuv + 16 ] = x14;\n\t\t\tuvs[ iuv + 17 ] = y14;\n\t\t\tuvs[ iuv + 18 ] = x6;\n\t\t\tuvs[ iuv + 19 ] = y6;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeTextUploadeds } from \"./e-shape-text-uploadeds\";\nimport { EShapeTriangleRoundedUploaded } from \"./e-shape-triangle-rounded-uploaded\";\n\nexport class EShapeTriangleRoundedUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape, voffset: number, ioffset: number\n\t): EShapeTriangleRoundedUploaded | null {\n\t\tconst tcount = EShapeTextUploadeds.getTextCount( shape, buffer.workCount );\n\t\tconst tvcount = tcount.vertexCount;\n\t\tconst ticount = tcount.indexCount;\n\t\tconst vcount = 22 + tvcount;\n\t\tconst icount = 15 + ticount;\n\t\tif( voffset + vcount < buffer.vertexCapacity && ioffset + icount < buffer.indexCapacity ) {\n\t\t\treturn new EShapeTriangleRoundedUploaded(\n\t\t\t\tbuffer, voffset, ioffset, tvcount, ticount, vcount, icount\n\t\t\t).init( shape );\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeCorner } from \"../e-shape-corner\";\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapeTriangle } from \"./e-shape-triangle\";\n\nconst FMIN = 0.00001;\n\nexport class EShapeTriangleRounded extends EShapeTriangle {\n\tconstructor( type = EShapeType.TRIANGLE_ROUNDED ) {\n\t\tsuper( type );\n\t}\n\n\tclone(): EShapeTriangleRounded {\n\t\treturn new EShapeTriangleRounded().copy( this );\n\t}\n\n\tprotected containsCorner_( x: number, y: number, r: number, aw: number ) {\n\t\tconst fill = this.fill;\n\t\tif( fill.enable ) {\n\t\t\tif( x * x + y * y <= r * r ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else {\n\t\t\tconst stroke = this.stroke;\n\t\t\tconst strokeWidth = stroke.width;\n\t\t\tif( stroke.enable && 0 < strokeWidth ) {\n\t\t\t\tconst d = x * x + y * y;\n\t\t\t\tif( d <= r * r ) {\n\t\t\t\t\tconst w = Math.max( 0.0, r * ( 1 - strokeWidth / aw ) );\n\t\t\t\t\tif( w * w <= d ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected containsCorner(\n\t\tx: number, y: number,\n\t\tx0: number, y0: number,\n\t\tx1: number, y1: number,\n\t\tx2: number, y2: number,\n\t\tx3: number, y3: number,\n\t\tr12: number, r13: number,\n\t\taw: number,\n\t\tradius: number\n\t) {\n\t\tconst xl = x1 + r12 * ( x2 - x1 ) - x0;\n\t\tconst yl = y1 + r12 * ( y2 - y1 ) - y0;\n\t\tconst n = Math.sqrt( xl * xl + yl * yl );\n\t\tif( FMIN < n ) {\n\t\t\tconst ni = 1 / n;\n\t\t\tconst nlx = xl * ni;\n\t\t\tconst nly = yl * ni;\n\n\t\t\tconst xr = x1 + r13 * ( x3 - x1 ) - x0;\n\t\t\tconst yr = y1 + r13 * ( y3 - y1 ) - y0;\n\t\t\tconst nrx = xr * ni;\n\t\t\tconst nry = yr * ni;\n\n\t\t\tconst det = nlx * nry - nrx * nly;\n\t\t\tif( FMIN < Math.abs( det ) ) {\n\t\t\t\tconst deti = 1 / det;\n\t\t\t\tconst xc = x - x0;\n\t\t\t\tconst yc = y - y0;\n\t\t\t\tconst dx = ( +nry * xc - nrx * yc ) * deti;\n\t\t\t\tconst dy = ( -nly * xc + nlx * yc ) * deti;\n\t\t\t\tif( this.containsCorner_( dx, dy, n, aw * radius ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcontainsAbs( x: number, y: number, ax: number, ay: number ) {\n\t\tif( super.containsAbsBBox( x, y, ax, ay ) ) {\n\t\t\tconst a = 2 * ay / ax;\n\t\t\tif( this.containsAbs_( x, y, a, -ay, +ay ) ) {\n\t\t\t\tconst az = Math.sqrt( ax * ax + 4 * ay * ay );\n\t\t\t\tconst aw = 2 * ax * ay / (ax + az);\n\t\t\t\tconst radius = this.radius;\n\n\t\t\t\tconst x0 = 0;\n\t\t\t\tconst y0 = ay - aw;\n\t\t\t\tconst x1 = 0;\n\t\t\t\tconst y1 = -ay;\n\t\t\t\tconst x4 = +ax;\n\t\t\t\tconst y4 = +ay;\n\t\t\t\tconst x7 = -x4;\n\t\t\t\tconst y7 = +y4;\n\t\t\t\tconst x10 = x1 + radius * ( x0 - x1 );\n\t\t\t\tconst y10 = y1 + radius * ( y0 - y1 );\n\t\t\t\tconst x11 = x4 + radius * ( x0 - x4 );\n\t\t\t\tconst y11 = y4 + radius * ( y0 - y4 );\n\t\t\t\tconst y12 = +y11;\n\t\t\t\tconst x12 = -x11;\n\n\t\t\t\tconst c0 = -a * x + y10 - y <= 0;\n\t\t\t\tconst c1 = +a * x + y10 - y <= 0;\n\t\t\t\tconst c2 = y <= y11;\n\t\t\t\tconst corner = this.corner;\n\t\t\t\tif( ! c0 && ! c1 && (corner & EShapeCorner.TOP) ) {\n\t\t\t\t\t// Top corner\n\t\t\t\t\tconst rz = ( 0.5 * ( az - aw ) * radius ) / ( az );\n\t\t\t\t\tif( this.containsCorner( x, y, x10, y10, x1, y1, x7, y7, x4, y4, rz, rz, aw, radius ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t} else if( ! c0 && ! c2 && (corner & EShapeCorner.BOTTOM_LEFT) ) {\n\t\t\t\t\t// Bottom-left corner\n\t\t\t\t\tconst ry = ( aw * radius ) / ( 2 * ay );\n\t\t\t\t\tconst rx = ( ry * az ) / ( 2 * ax );\n\t\t\t\t\tif( this.containsCorner( x, y, x12, y12, x7, y7, x4, y4, x1, y1, rx, ry, aw, radius ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t} else if( ! c1 && ! c2 && (corner & EShapeCorner.BOTTOM_RIGHT) ) {\n\t\t\t\t\t// Bottom-right corner\n\t\t\t\t\tconst ry = ( aw * radius ) / ( 2 * ay );\n\t\t\t\t\tconst rx = ( ry * az ) / ( 2 * ax );\n\t\t\t\t\tif( this.containsCorner( x, y, x11, y11, x4, y4, x1, y1, x7, y7, ry, rx, aw, radius ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Others\n\t\t\t\t\tconst fill = this.fill;\n\t\t\t\t\tif( fill.enable ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst stroke = this.stroke;\n\t\t\t\t\t\tconst strokeWidth = stroke.width;\n\t\t\t\t\t\tif( stroke.enable && 0 < strokeWidth ) {\n\t\t\t\t\t\t\tconst cy = ay - aw;\n\t\t\t\t\t\t\tconst ay1 = cy + (-ay - cy) * Math.max( 0.0, aw - strokeWidth ) / aw;\n\t\t\t\t\t\t\tconst ay2 = ay - strokeWidth;\n\t\t\t\t\t\t\tif( ! this.containsAbs_( x, y, a, ay1, ay2 ) ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeTriangleRounded } from \"./e-shape-triangle-rounded\";\n\nexport class EShapeTriangleRoundeds {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeTriangleRounded> | EShapeTriangleRounded {\n\t\treturn EShapeDeserializer.deserialize( item, manager, EShapeTriangleRoundeds.create() );\n\t}\n\n\tstatic create(): EShapeTriangleRounded {\n\t\treturn new EShapeTriangleRounded();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeCapabilities } from \"../shape/e-shape-capabilities\";\nimport { EShapeCapability } from \"../shape/e-shape-capability\";\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeTriangleRoundedUploadeds } from \"../shape/variant/e-shape-triangle-rounded-uploadeds\";\nimport { EShapeTriangleRoundeds } from \"../shape/variant/e-shape-triangle-roundeds\";\n\nexport const loadShapeTriangleRounded = () => {\n\tEShapeUploadeds[ EShapeType.TRIANGLE_ROUNDED ] = EShapeTriangleRoundedUploadeds.create;\n\tEShapeDeserializers[ EShapeType.TRIANGLE_ROUNDED ] = EShapeTriangleRoundeds.deserialize;\n\tEShapeCapabilities.set(\n\t\tEShapeType.TRIANGLE_ROUNDED,\n\t\tEShapeCapability.PRIMITIVE | EShapeCapability.BORDER_RADIUS\n\t);\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { loadShapeBar } from \"./load-shape-bar\";\nimport { loadShapeCircle } from \"./load-shape-circle\";\nimport { loadShapeGroup } from \"./load-shape-group\";\nimport { loadShapeGroupShadowed } from \"./load-shape-group-shadowed\";\nimport { loadShapeImage } from \"./load-shape-image\";\nimport { loadShapeLabel } from \"./load-shape-label\";\nimport { loadShapeLine } from \"./load-shape-line\";\nimport { loadShapeNull } from \"./load-shape-null\";\nimport { loadShapeRectangle } from \"./load-shape-rectangle\";\nimport { loadShapeRectangleRounded } from \"./load-shape-rectangle-rounded\";\nimport { loadShapeTriangle } from \"./load-shape-triangle\";\nimport { loadShapeTriangleRounded } from \"./load-shape-triangle-rounded\";\n\nexport const loadShapeAll = () => {\n\tloadShapeBar();\n\tloadShapeCircle();\n\tloadShapeGroupShadowed();\n\tloadShapeGroup();\n\tloadShapeImage();\n\tloadShapeLabel();\n\tloadShapeLine();\n\tloadShapeNull();\n\tloadShapeRectangleRounded();\n\tloadShapeRectangle();\n\tloadShapeTriangleRounded();\n\tloadShapeTriangle();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilSvgAtlasBuilder } from \"../../util/util-atlas-builder\";\n\nexport const DThemeWhiteAtlas = new UtilSvgAtlasBuilder( 256, 1, 3 );\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilSvgAtlasBuilder } from \"../../util/util-atlas-builder\";\nimport { DTheme } from \"../d-theme\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\n\ninterface CLASSES {\n\t[ type: string ]: new () => any;\n}\n\ninterface INSTANCES {\n\t[ type: string ]: DTheme;\n}\n\nexport class DThemeWhite implements DTheme {\n\tprotected static _classes: CLASSES = {};\n\tprotected _instances: INSTANCES;\n\n\tconstructor() {\n\t\tthis._instances = {};\n\t}\n\n\tget<THEME>( type: string ): THEME {\n\t\tlet instance = this._instances[ type ] as any;\n\t\tif( instance != null ) {\n\t\t\treturn instance;\n\t\t} else {\n\t\t\tconst klass = DThemeWhite._classes[ type ];\n\t\t\tif( klass != null ) {\n\t\t\t\tinstance = this._instances[ type ] = new klass();\n\t\t\t\treturn instance;\n\t\t\t} else {\n\t\t\t\tthrow new Error( `No theme for the type '${type}'` );\n\t\t\t}\n\t\t}\n\t}\n\n\tgetAtlas(): UtilSvgAtlasBuilder {\n\t\treturn DThemeWhiteAtlas;\n\t}\n\n\tstatic set<THEME>( type: string, themeClass: new () => THEME ): void {\n\t\tthis._classes[ type ] = themeClass;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemes } from \"../theme/d-themes\";\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\n\nexport const loadThemeWhite = () => {\n\tDThemes.setDefaultThemeClass( DThemeWhite );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { NineSlicePlane, Texture } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\nimport { DShadow } from \"./d-shadow\";\n\nexport class DShadowImpl extends NineSlicePlane implements DShadow {\n\tprotected _offsetX: number;\n\tprotected _offsetY: number;\n\n\tconstructor( texture: Texture, width: number, height: number, offsetX: number, offsetY: number ) {\n\t\tsuper( texture, width, height, width, height );\n\n\t\tthis._offsetX = offsetX;\n\t\tthis._offsetY = offsetY;\n\n\t\tthis.interactive = false;\n\t\tthis.interactiveChildren = false;\n\n\t\ttexture.on( \"update\", (): void => {\n\t\t\tthis.onTextureUpdate();\n\t\t});\n\t}\n\n\tprotected onTextureUpdate(): void {\n\t\tthis.emit( \"update\", this );\n\t}\n\n\tonReflow( base: DBase, width: number, height: number ): void {\n\t\tthis.x = -this.leftWidth + this._offsetX;\n\t\tthis.y = -this.topHeight + this._offsetY;\n\t\tthis.width = this.leftWidth + width + this.rightWidth;\n\t\tthis.height = this.topHeight + height + this.bottomHeight;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class DThemeWhiteConstants {\n\tstatic HIGHLIGHT_COLOR = 0x3399ff;\n\tstatic HIGHLIGHT_ALPHA = 0.2;\n\tstatic HIGHLIGHT_BLENDED = 0xddeeff; // UtilRgb.brighten( HIGHLIGHT_COLOR, 1 / (1 + HIGHLIGHT_ALPHA) )\n\n\tstatic WEAK_HIGHLIGHT_COLOR = 0xcccccc;\n\tstatic WEAK_HIGHLIGHT_ALPHA = 0.2;\n\tstatic WEAK_HIGHLIGHT_BLENDED = 0xf6f6f6; // UtilRgb.brighten( WEAK_HIGHLIGHT_COLOR, 1 / (1 + WEAK_HIGHLIGHT_ALPHA) );\n\n\tstatic INVALID_COLOR = 0xffaaaa;\n\tstatic INVALID_ALPHA = 0.2;\n\tstatic INVALID_BLENDED = 0xfff0f0;\n\n\tstatic BACKGROUND_COLOR = 0xf2f2f2;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DFontStyle, DFontVariant, DFontWeight, DThemeFont } from \"../../d-font\";\n\nexport class DThemeWhiteFont implements DThemeFont {\n\tgetFontFamilly() {\n\t\treturn `ProximaNova,-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif`;\n\t}\n\n\tgetFontSize(): number {\n\t\treturn 14;\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteFont.getColor( state );\n\t}\n\n\tgetFontWeight(): DFontWeight {\n\t\treturn \"normal\";\n\t}\n\n\tgetFontStyle(): DFontStyle {\n\t\treturn \"normal\";\n\t}\n\n\tgetFontVariant(): DFontVariant {\n\t\treturn \"normal\";\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteFont.getAlpha( state );\n\t}\n\n\tgetLineHeight(): number {\n\t\treturn 30;\n\t}\n\n\tstatic getColor( state: DBaseState ): number {\n\t\treturn 0x5f5f5f;\n\t}\n\n\tstatic getAlpha( state: DBaseState ): number {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn 0.5;\n\t\t} else {\n\t\t\treturn 1.0;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { DThemeBase } from \"../../d-base\";\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DLayoutClearType } from \"../../d-layout-clear-type\";\nimport { DShadow } from \"../../d-shadow\";\nimport { DShadowImpl } from \"../../d-shadow-impl\";\nimport { UtilTexturePlane } from \"../../util/util-texture-plane\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteFont } from \"./d-theme-white-font\";\n\nconst newShadow = (\n\tid: string,\n\tradius: number = 8, opacity: number = 0.1,\n\tsize: number = radius * 0.125, stdDeviation: number = radius * 0.375\n): void => {\n\tconst d = radius * 2;\n\tDThemeWhiteAtlas.add( id, d, d,\n\t\t`<g>` +\n\t\t\t`<defs>` +\n\t\t\t\t`<filter id=\"${id}_filter\" x=\"0\" y=\"0\" width=\"${d}\" height=\"${d}\" filterUnits=\"userSpaceOnUse\">` +\n\t\t\t\t\t`<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"${stdDeviation}\"></feGaussianBlur>` +\n\t\t\t\t`</filter>` +\n\t\t\t`</defs>` +\n\t\t\t`<circle cx=\"${radius}\" cy=\"${radius}\" r=\"${size}\" stroke=\"none\" ` +\n\t\t\t\t`fill=\"rgba(0,0,0,${opacity})\" filter=\"url(#${id}_filter)\" />` +\n\t\t`</g>`\n\t);\n};\nnewShadow( \"shadow_weak\", 8, 1 );\nnewShadow( \"shadow\", 12, 1 );\n\nexport class DThemeWhiteBase extends DThemeWhiteFont implements DThemeBase {\n\tgetX(): DCoordinate {\n\t\treturn 0;\n\t}\n\n\tgetY(): DCoordinate {\n\t\treturn 0;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 100;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 100;\n\t}\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn 1;\n\t}\n\n\tgetBackgroundTexture( radius: number ): Texture {\n\t\treturn UtilTexturePlane.getBackground( radius );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isFocused( state ) ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetBorderAlpha( state: DBaseState ): number {\n\t\treturn 1;\n\t}\n\n\tgetBorderWidth( state: DBaseState ): number {\n\t\treturn 1;\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn 0.5;\n\t}\n\n\tgetBorderMask( state: DBaseState ): number {\n\t\treturn DBorderMask.NONE;\n\t}\n\n\tgetBorderTexture( radius: number, width: number ): Texture {\n\t\treturn UtilTexturePlane.getBorder( radius, width );\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 0;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 0;\n\t}\n\n\tgetPaddingTop(): number {\n\t\treturn 0;\n\t}\n\n\tgetPaddingBottom(): number {\n\t\treturn 0;\n\t}\n\n\tgetCornerRadius(): number {\n\t\treturn 4;\n\t}\n\n\tgetCornerMask(): number {\n\t\treturn DCornerMask.NONE;\n\t}\n\n\tgetOutlineColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetOutlineAlpha( state: DBaseState ): number {\n\t\treturn 1;\n\t}\n\n\tgetOutlineWidth( state: DBaseState ): number {\n\t\treturn 1;\n\t}\n\n\tgetOutlineOffset( state: DBaseState ): number {\n\t\treturn 1;\n\t}\n\n\tgetOutlineAlign( state: DBaseState ): number {\n\t\treturn 1;\n\t}\n\n\tgetOutlineMask( state: DBaseState ): DBorderMask {\n\t\treturn DBorderMask.NONE;\n\t}\n\n\tgetClearType(): DLayoutClearType {\n\t\treturn DLayoutClearType.NONE;\n\t}\n\n\tgetShadow(): DShadow | null {\n\t\treturn null;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.SELF;\n\t}\n\n\tgetTitle(): string {\n\t\treturn \"\";\n\t}\n\n\tgetWeight(): number {\n\t\treturn -1;\n\t}\n\n\tnewShadow(): DShadow | null {\n\t\treturn new DShadowImpl( DThemeWhiteAtlas.mappings.shadow, 12, 12, 0, 6 );\n\t}\n\n\tnewShadowWeak(): DShadow | null {\n\t\treturn new DShadowImpl( DThemeWhiteAtlas.mappings.shadow_weak, 8, 8, 0, 4 );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteBase } from \"../theme/white/d-theme-white-base\";\n\nexport const loadThemeWhiteBase = () => {\n\tDThemeWhite.set( \"DBase\", DThemeWhiteBase );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeBoard } from \"../../d-board\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\n\nexport class DThemeWhiteBoard extends DThemeWhiteBase implements DThemeBoard {\n\tgetBackgroundColor() {\n\t\treturn DThemeWhiteConstants.BACKGROUND_COLOR;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetCornerMask(): number {\n\t\treturn DCornerMask.ALL;\n\t}\n\n\tgetPaddingLeft() {\n\t\treturn 16;\n\t}\n\n\tgetPaddingTop() {\n\t\treturn 16;\n\t}\n\n\tgetPaddingRight() {\n\t\treturn 16;\n\t}\n\n\tgetPaddingBottom() {\n\t\treturn 16;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteBoard } from \"../theme/white/d-theme-white-board\";\n\nexport const loadThemeWhiteBoard = () => {\n\tDThemeWhite.set( \"DBoard\", DThemeWhiteBoard );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DAlignVertical } from \"../../d-align-vertical\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeTextBase } from \"../../d-text-base\";\nimport { utilToString } from \"../../util/util-to-string\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhiteTextBase extends DThemeWhiteBase implements DThemeTextBase {\n\tgetTextAlignVertical(): DAlignVertical {\n\t\treturn DAlignVertical.MIDDLE;\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.LEFT;\n\t}\n\n\tisOverflowMaskEnabled(): boolean {\n\t\treturn false;\n\t}\n\n\tisTextDynamic(): boolean {\n\t\treturn true;\n\t}\n\n\tgetTextStyleClipping(): boolean {\n\t\treturn true;\n\t}\n\n\tnewTextValue(): any {\n\t\treturn \"\";\n\t}\n\n\tgetTextValue( state: DBaseState ): any {\n\t\treturn \"\";\n\t}\n\n\tgetTextFormatter(): ( value: any, caller: any ) => string {\n\t\treturn utilToString;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DAlignVertical } from \"../../d-align-vertical\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeImageBase } from \"../../d-image-base\";\nimport { DThemeWhiteTextBase } from \"./d-theme-white-text-base\";\n\nexport class DThemeWhiteImageBase extends DThemeWhiteTextBase implements DThemeImageBase {\n\tgetImageAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.LEFT;\n\t}\n\n\tgetImageAlignVertical(): DAlignVertical {\n\t\treturn DAlignVertical.MIDDLE;\n\t}\n\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.TEXT;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn 5;\n\t}\n\n\tgetImageMarginVertial(): number {\n\t\treturn 5;\n\t}\n\n\tgetImageTintColor( state: DBaseState ): number | null {\n\t\treturn this.getColor( state );\n\t}\n\n\tgetImageTintAlpha( state: DBaseState ): number {\n\t\treturn this.getAlpha( state );\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DThemeButtonBase } from \"../../d-button-base\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteImageBase } from \"./d-theme-white-image-base\";\n\nexport class DThemeWhiteButtonBase extends DThemeWhiteImageBase implements DThemeButtonBase {\n\tCOLOR = 0xffffff;\n\tCOLOR_HOVERED = UtilRgb.darken( this.COLOR, 0.017 );\n\tCOLOR_PRESSED = UtilRgb.darken( this.COLOR, 0.034 );\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t} else if( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t} else if( DBaseStates.isPressed( state ) ) {\n\t\t\treturn this.COLOR_PRESSED;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn this.COLOR_HOVERED;\n\t\t} else {\n\t\t\treturn this.COLOR;\n\t\t}\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\tif( DBaseStates.isDisabled( state ) || ! DBaseStates.isActive( state ) ) {\n\t\t\treturn super.getColor( state );\n\t\t} else {\n\t\t\treturn 0xffffff;\n\t\t}\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) || ! DBaseStates.isActive( state ) ) {\n\t\t\treturn 0xe5e5e5;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 100;\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.CENTER;\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 10;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 10;\n\t}\n\n\tisToggle(): boolean {\n\t\treturn false;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteButtonBase } from \"./d-theme-white-button-base\";\n\nexport class DThemeWhiteButton extends DThemeWhiteButtonBase implements DThemeWhiteButton {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButton } from \"../theme/white/d-theme-white-button\";\n\nexport const loadThemeWhiteButton = () => {\n\tDThemeWhite.set( \"DButton\", DThemeWhiteButton );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DThemeButtonAmbient } from \"../../d-button-ambient\";\nimport { DThemeWhiteButtonBase } from \"./d-theme-white-button-base\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\n\nexport class DThemeWhiteButtonAmbient extends DThemeWhiteButtonBase implements DThemeButtonAmbient {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t} else {\n\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t\t}\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\tif( ! DBaseStates.isDisabled( state ) ) {\n\t\t\tif( DBaseStates.isActive( state ) ) {\n\t\t\t\treturn 1.0;\n\t\t\t} else if( DBaseStates.isPressed( state ) ) {\n\t\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_ALPHA * 2;\n\t\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_ALPHA;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonAmbient } from \"../theme/white/d-theme-white-button-ambient\";\n\nexport const loadThemeWhiteButtonAmbient = () => {\n\tDThemeWhite.set( \"DButtonAmbient\", DThemeWhiteButtonAmbient );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DThemeButtonCheck } from \"../../d-button-check\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteButtonAmbient } from \"./d-theme-white-button-ambient\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteFont } from \"./d-theme-white-font\";\n\n// Material Design icons by Google.\n// Apache license version 2.0.\nDThemeWhiteAtlas.add( \"button_check_mark_on\", 21, 21,\n\t`<g transform=\"scale(0.875,0.875)\">` +\n\t\t`<path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89` +\n\t\t\t`-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\" fill=\"#fff\" />` +\n\t`</g>`\n);\n\nDThemeWhiteAtlas.add( \"button_check_mark_off\", 21, 21,\n\t`<g transform=\"scale(0.875,0.875)\">` +\n\t\t`<path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" ` +\n\t\t\t`fill=\"#fff\" />` +\n\t`</g>`\n);\n\nexport class DThemeWhiteButtonCheck extends DThemeWhiteButtonAmbient implements DThemeButtonCheck {\n\treadonly IMAGE_TINT_COLOR_FOCUSED = UtilRgb.darken( DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR, 0.1 );\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteFont.getColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\tif( ! DBaseStates.isDisabled( state ) ) {\n\t\t\tif( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_ALPHA;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetImageTintColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) || DBaseStates.isReadOnly( state ) || ! DBaseStates.isActive( state ) ) {\n\t\t\tif( DBaseStates.isFocused( state ) ) {\n\t\t\t\treturn this.IMAGE_TINT_COLOR_FOCUSED;\n\t\t\t} else {\n\t\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t\t\t}\n\t\t} else {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t}\n\t}\n\n\tisToggle(): boolean {\n\t\treturn true;\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\tif( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteAtlas.mappings.button_check_mark_on;\n\t\t} else {\n\t\t\treturn DThemeWhiteAtlas.mappings.button_check_mark_off;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonCheck } from \"../theme/white/d-theme-white-button-check\";\n\nexport const loadThemeWhiteButtonCheck = () => {\n\tDThemeWhite.set( \"DButtonCheck\", DThemeWhiteButtonCheck );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DThemeButtonCheckRight } from \"../../d-button-check-right\";\nimport { DThemeWhiteButtonCheck } from \"./d-theme-white-button-check\";\n\nexport class DThemeWhiteButtonCheckRight extends DThemeWhiteButtonCheck implements DThemeButtonCheckRight {\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.PADDING;\n\t}\n\n\tgetImageAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.RIGHT;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn 0;\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.LEFT;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonCheckRight } from \"../theme/white/d-theme-white-button-check-right\";\n\nexport const loadThemeWhiteButtonCheckRight = () => {\n\tDThemeWhite.set( \"DButtonCheckRight\", DThemeWhiteButtonCheckRight );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DButtonColor, DThemeButtonColor } from \"../../d-button-color\";\nimport { DColorAndAlpha } from \"../../d-color\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\n\n// Material Design icons by Google.\n// Apache license version 2.0.\nDThemeWhiteAtlas.add( \"button_color_sample\", 21, 21,\n\t`<g transform=\"scale(0.875,0.875)\">` +\n\t\t`<path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" fill=\"#fff\"/>` +\n\t\t`<path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" ` +\n\t\t\t`fill=\"#eee\" />` +\n\t`</g>`\n);\n\nconst formatter = ( colorAndAlpha: DColorAndAlpha ): string => {\n\treturn `#${UtilRgb.toCode( colorAndAlpha.color )} A${ colorAndAlpha.alpha.toFixed(2) }`;\n};\n\nexport class DThemeWhiteButtonColor extends DThemeWhiteButton implements DThemeButtonColor {\n\tgetImageTintColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.button_color_sample;\n\t}\n\n\tgetTextFormatter(): ( value: DColorAndAlpha, caller: DButtonColor ) => string {\n\t\treturn formatter;\n\t}\n\n\tnewTextValue(): DColorAndAlpha {\n\t\treturn {\n\t\t\tcolor: 0xffffff,\n\t\t\talpha: 1\n\t\t};\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Point } from \"pixi.js\";\nimport { DAnimation } from \"./d-animation\";\nimport { DAnimationFadeIn } from \"./d-animation-fade-in\";\nimport { DApplications } from \"./d-applications\";\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DFocusable } from \"./d-controller-focus\";\nimport { DControllers } from \"./d-controllers\";\nimport { UtilClickOutside } from \"./util/util-click-outside\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\n\nexport enum DDialogCloseOn {\n\tNONE = 0,\n\tESC = 1,\n\tCLICK_OUTSIDE = 2\n}\n\nexport interface DDialogOptions<THEME extends DThemeDialog = DThemeDialog> extends DBaseOptions<THEME> {\n\tcloseOn?: DDialogCloseOn;\n\tanimation?: DAnimation;\n}\n\nexport interface DThemeDialog extends DThemeBase {\n\tcloseOn(): DDialogCloseOn;\n}\n\nexport class DDialog<\n\tTHEME extends DThemeDialog = DThemeDialog,\n\tOPTIONS extends DDialogOptions<THEME> = DDialogOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tprotected _animation!: DAnimation;\n\tprotected _closeOn!: DDialogCloseOn;\n\tprotected _focusable!: DFocusable | null;\n\tprotected _isOpened!: boolean;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis.visible = false;\n\t\tthis.setState( DBaseState.FOCUS_ROOT, true );\n\t\tthis._focusable = null;\n\t\tthis._isOpened = false;\n\n\t\t// Animation\n\t\tconst animation = this._animation = ( options && options.animation ?\n\t\t\toptions.animation : new DAnimationFadeIn() );\n\t\tanimation.target = this;\n\t\tanimation.on( \"end\", ( isReverse: boolean ): void => {\n\t\t\tthis.onAnimationEnd( isReverse );\n\t\t});\n\n\t\t// Close-on\n\t\tconst closeOn = this._closeOn = ( options && options.closeOn != null ?\n\t\t\toptions.closeOn : this.theme.closeOn()\n\t\t);\n\t\tif( closeOn & DDialogCloseOn.CLICK_OUTSIDE ) {\n\t\t\tUtilClickOutside.apply( this, (): void => {\n\t\t\t\tthis.onCloseOn();\n\t\t\t});\n\t\t}\n\n\t\t// Parent\n\t\tif( options == null || options.parent == null ) {\n\t\t\tDApplications.getInstance().stage.addChild( this );\n\t\t}\n\t}\n\n\tprotected onAnimationEnd( isReverse: boolean ) {\n\t\tif( ! isReverse ) {\n\t\t\tconst focusController = DControllers.getFocusController();\n\t\t\tthis._focusable = focusController.getFocused();\n\t\t\tconst firstFocusable = focusController.findFocusable( this, false, true, true );\n\t\t\tfocusController.setFocused( firstFocusable || this, true, true );\n\t\t}\n\t}\n\n\topen() {\n\t\tif( ! this._isOpened ) {\n\t\t\tthis._isOpened = true;\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.addChild( this );\n\t\t\t}\n\t\t\tthis.onOpen();\n\t\t}\n\t}\n\n\tprotected onOpen() {\n\t\tthis.emit( \"open\", this );\n\n\t\t// Animation\n\t\tthis._animation.start();\n\t}\n\n\tisOpened(): boolean {\n\t\treturn this._isOpened;\n\t}\n\n\tclose() {\n\t\tif( this._isOpened ) {\n\t\t\tthis._isOpened = false;\n\t\t\tthis.onClose();\n\t\t}\n\t}\n\n\tprotected onClose() {\n\t\t// Focus\n\t\tconst focusable = this._focusable;\n\t\tif( focusable != null ) {\n\t\t\tthis._focusable = null;\n\t\t\tDControllers.getFocusController().setFocused( focusable, true, false );\n\t\t}\n\n\t\t// Animation\n\t\tthis._animation.start( true );\n\n\t\tthis.emit( \"close\", this );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialog\";\n\t}\n\n\tonKeyDown( e: KeyboardEvent ): boolean {\n\t\tconst closeOn = this._closeOn;\n\t\tif( closeOn & DDialogCloseOn.ESC ) {\n\t\t\tif( UtilKeyboardEvent.isCancelKey( e ) ) {\n\t\t\t\tthis.onCloseOn();\n\t\t\t}\n\t\t}\n\n\t\treturn super.onKeyDown( e );\n\t}\n\n\tprotected onCloseOn(): void {\n\t\tthis.close();\n\t}\n\n\tprotected containsGlobalPoint( point: Point ): boolean {\n\t\treturn true;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAnimationOptions } from \"./d-animation\";\nimport { DAnimationBase } from \"./d-animation-base\";\nimport { DApplications } from \"./d-applications\";\nimport { DBase } from \"./d-base\";\n\nexport interface DAnimationFadeInOptions extends DAnimationOptions {\n\tshift?: {\n\t\tx?: number | null,\n\t\ty?: number | null\n\t};\n}\n\nexport class DAnimationFadeIn extends DAnimationBase {\n\tprotected _shiftX: number;\n\tprotected _shiftY: number;\n\n\tprotected _storedX: number = 0;\n\tprotected _storedY: number = 0;\n\tprotected _storedAlpha: number = 0;\n\tprotected _storedTime: number = 0;\n\tprotected _storedTarget: DBase<any, any> | null = null;\n\n\tprotected _onPrerenderBound: () => void;\n\tprotected _onPostrenderBound: () => void;\n\n\tconstructor( options?: DAnimationFadeInOptions ) {\n\t\tsuper( options );\n\n\t\t// Shifts\n\t\tif( options != null && options.shift != null ) {\n\t\t\tconst shift = options.shift;\n\t\t\tthis._shiftX = (shift.x != null ? shift.x : 0);\n\t\t\tthis._shiftY = (shift.y != null ? shift.y : 15);\n\t\t} else {\n\t\t\tthis._shiftX = 0;\n\t\t\tthis._shiftY = 15;\n\t\t}\n\n\t\tthis._onPrerenderBound = () => {\n\t\t\tthis.onPrerender();\n\t\t};\n\n\t\tthis._onPostrenderBound = () => {\n\t\t\tthis.onPostrender();\n\t\t};\n\t}\n\n\tstop(): void {\n\t\tthis._storedTime = 0;\n\t\tDApplications.getInstance().renderer\n\t\t.off( \"prerender\", this._onPrerenderBound )\n\t\t.off( \"postrender\", this._onPostrenderBound );\n\n\t\tsuper.stop();\n\t}\n\n\tprotected onStart( isReverse: boolean ): void {\n\t\tconst target = this._storedTarget = this._target;\n\t\tif( target != null ) {\n\t\t\tthis._storedTime = 0;\n\n\t\t\tDApplications.getInstance().renderer\n\t\t\t.on( \"prerender\", this._onPrerenderBound )\n\t\t\t.on( \"postrender\", this._onPostrenderBound );\n\n\t\t\tif( ! isReverse ) {\n\t\t\t\ttarget.visible = true;\n\t\t\t}\n\n\t\t\tsuper.onStart( isReverse );\n\t\t}\n\t}\n\n\tprotected onTime( time: number, isReverse: boolean, elapsedTime: number ): void {\n\t\tconst target = this._storedTarget;\n\t\tif( target != null ) {\n\t\t\tconst application = DApplications.getInstance();\n\t\t\tapplication.disallowUpdate();\n\t\t\tthis._storedTime = time;\n\t\t\tsuper.onTime( time, isReverse, elapsedTime );\n\t\t\tapplication.allowUpdate();\n\t\t\tapplication.render();\n\t\t}\n\t}\n\n\tprotected onEnd( isReverse: boolean ): void {\n\t\tconst target = this._storedTarget;\n\t\tif( target != null ) {\n\t\t\tDApplications.getInstance().renderer\n\t\t\t.off( \"prerender\", this._onPrerenderBound )\n\t\t\t.off( \"postrender\", this._onPostrenderBound );\n\n\t\t\tif( isReverse ) {\n\t\t\t\ttarget.visible = false;\n\t\t\t}\n\n\t\t\tsuper.onEnd( isReverse );\n\t\t}\n\t}\n\n\tprotected onPrerender(): void {\n\t\tconst target = this._storedTarget;\n\t\tif( target != null ) {\n\t\t\tconst storedTime = this._storedTime;\n\n\t\t\t// Position\n\t\t\tconst position = target.unsafe.position;\n\t\t\tthis._storedX = position.x;\n\t\t\tthis._storedY = position.y;\n\t\t\tposition.set(\n\t\t\t\tposition.x - this._shiftX * ( 1 - storedTime ),\n\t\t\t\tposition.y - this._shiftY * ( 1 - storedTime )\n\t\t\t);\n\n\t\t\t// Alpha\n\t\t\tthis._storedAlpha = target.alpha;\n\t\t\ttarget.alpha = storedTime;\n\t\t}\n\t}\n\n\tprotected onPostrender(): void {\n\t\tconst target = this._storedTarget;\n\t\tif( target != null ) {\n\t\t\t// Position\n\t\t\tconst position = target.unsafe.position;\n\t\t\tposition.set(\n\t\t\t\tthis._storedX,\n\t\t\t\tthis._storedY\n\t\t\t);\n\n\t\t\t// Alpha\n\t\t\ttarget.alpha = this._storedAlpha;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DDialogCloseOn, DThemeDialog } from \"../../d-dialog\";\nimport { DShadow } from \"../../d-shadow\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\n\nexport class DThemeWhiteDialog extends DThemeWhiteBase implements DThemeDialog {\n\tcloseOn(): DDialogCloseOn {\n\t\treturn DDialogCloseOn.ESC | DDialogCloseOn.CLICK_OUTSIDE;\n\t}\n\n\tgetBackgroundColor() {\n\t\treturn DThemeWhiteConstants.BACKGROUND_COLOR;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t}\n\n\tgetPaddingLeft() {\n\t\treturn 16;\n\t}\n\n\tgetPaddingTop() {\n\t\treturn 16;\n\t}\n\n\tgetPaddingRight() {\n\t\treturn 16;\n\t}\n\n\tgetPaddingBottom() {\n\t\treturn 16;\n\t}\n\n\tgetX(): DCoordinate {\n\t\treturn \"center\";\n\t}\n\n\tgetY(): DCoordinate {\n\t\treturn \"center\";\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 400;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetShadow(): DShadow | null {\n\t\treturn this.newShadow();\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeDialogCommand } from \"../../d-dialog-command\";\nimport { DThemeWhiteDialog } from \"./d-theme-white-dialog\";\n\nexport class DThemeWhiteDialogCommand extends DThemeWhiteDialog implements DThemeDialogCommand {\n\tgetOk(): string | null {\n\t\treturn \"OK\";\n\t}\n\n\tgetCancel(): string | null {\n\t\treturn \"Cacnel\";\n\t}\n\n\tgetLayoutX(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetLayoutY(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetLayoutWidth(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetLayoutHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeDialogColor } from \"../../d-dialog-color\";\nimport { DThemeWhiteDialogCommand } from \"./d-theme-white-dialog-command\";\n\nexport class DThemeWhiteDialogColor extends DThemeWhiteDialogCommand implements DThemeDialogColor {\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DColorAndAlpha } from \"../../d-color\";\nimport { DThemePickerColor } from \"../../d-picker-color\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nDThemeWhiteAtlas.add( \"picker_color_main\", 234, 156,\n\t`<g>` +\n\t\t`<linearGradient id=\"fs7w3iusfdnb\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">` +\n\t\t\t`<stop stop-color=\"#FFFFFF\" stop-opacity=\"0\" offset=\"0\"/>` +\n\t\t\t`<stop stop-color=\"#FFFFFF\" stop-opacity=\"1\" offset=\"1\"/>` +\n\t\t`</linearGradient>` +\n\t\t`<linearGradient id=\"2rfcfe9874bw\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">` +\n\t\t\t`<stop stop-color=\"#000000\" stop-opacity=\"0\" offset=\"0\"/>` +\n\t\t\t`<stop stop-color=\"#000000\" stop-opacity=\"1\" offset=\"1\"/>` +\n\t\t`</linearGradient>` +\n\t\t`<rect x=\"0\" y=\"0\" width=\"234\" height=\"156\" fill=\"url(#fs7w3iusfdnb)\" />` +\n\t\t`<rect x=\"0\" y=\"0\" width=\"234\" height=\"156\" fill=\"url(#2rfcfe9874bw)\" />` +\n\t`</g>`\n);\n\nconst makeCheckerboard = ( width: number, height: number ): string => {\n\twidth = width + width;\n\n\tconst LIGHT = \"#bfbfbf\";\n\tconst DARK = \"#a5a5a5\";\n\tlet result = \"<g>\";\n\tfor( let iheight = 0; iheight < height; ++iheight ) {\n\t\tfor( let i = 0; i < width; ++i ) {\n\t\t\tconst color = (i % 2 === 0 ? LIGHT : DARK);\n\t\t\tresult += `<rect x=\"${9 * i}\" y=\"${18 * iheight + 0}\" width=\"9\" height=\"9\" fill=\"${color}\" />`;\n\t\t}\n\t\tfor( let i = 0; i < width; ++i ) {\n\t\t\tconst color = (i % 2 === 1 ? LIGHT : DARK);\n\t\t\tresult += `<rect x=\"${9 * i}\" y=\"${18 * iheight + 9}\" width=\"9\" height=\"9\" fill=\"${color}\" />`;\n\t\t}\n\t}\n\tresult += \"</g>\";\n\treturn result;\n};\n\nDThemeWhiteAtlas.add( \"picker_color_alpha_checkerboard\", 234, 18, makeCheckerboard( 13, 1 ) );\n\nDThemeWhiteAtlas.add( \"picker_color_alpha\", 234, 18,\n\t`<g>` +\n\t\t`<linearGradient id=\"s48afbuh44\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">` +\n\t\t\t`<stop stop-color=\"#FFFFFF\" stop-opacity=\"0\" offset=\"0\"/>` +\n\t\t\t`<stop stop-color=\"#FFFFFF\" stop-opacity=\"1\" offset=\"1\"/>` +\n\t\t`</linearGradient>` +\n\t\t`<rect x=\"0\" y=\"0\" width=\"234\" height=\"18\" fill=\"url(#s48afbuh44)\" />` +\n\t`</g>`\n);\n\nDThemeWhiteAtlas.add( \"picker_color_base\", 234, 18,\n\t`<g>` +\n\t\t`<linearGradient id=\"ni2rbisdf3\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">` +\n\t\t\t`<stop stop-color=\"#FF0000\" offset=\"0\"/>` +\n\t\t\t`<stop stop-color=\"#FFFF00\" offset=\"0.167\"/>` +\n\t\t\t`<stop stop-color=\"#00FF00\" offset=\"0.333\"/>` +\n\t\t\t`<stop stop-color=\"#00FFFF\" offset=\"0.5\"/>` +\n\t\t\t`<stop stop-color=\"#0000FF\" offset=\"0.667\"/>` +\n\t\t\t`<stop stop-color=\"#FF00FF\" offset=\"0.833\"/>` +\n\t\t\t`<stop stop-color=\"#FF0000\" offset=\"1\"/>` +\n\t\t`</linearGradient>` +\n\t\t`<rect x=\"0\" y=\"0\" width=\"234\" height=\"18\" fill=\"url(#ni2rbisdf3)\" />` +\n\t`</g>`\n);\n\nDThemeWhiteAtlas.add( \"picker_color_base_pointer\", 16.2, 31.8,\n\t`<rect x=\"4.5\" y=\"4.5\" width=\"7.2\" height=\"22.8\" stroke=\"#5f5f5f\" stroke-width=\"2.4\" fill=\"none\" />`\n);\n\nDThemeWhiteAtlas.add( \"picker_color_pointer\", 25.8, 25.8,\n\t`<circle cx=\"12.9\" cy=\"12.9\" r=\"4.8\" stroke=\"#5f5f5f\" stroke-width=\"2.4\" fill=\"none\" />` +\n\t`<circle cx=\"12.9\" cy=\"12.9\" r=\"7.2\" stroke=\"#ffffff\" stroke-width=\"2.4\" fill=\"none\" />`\n);\n\nDThemeWhiteAtlas.add( \"picker_color_recent_checkerboard\", 18, 18, makeCheckerboard( 1, 1 ) );\n\nDThemeWhiteAtlas.add( \"picker_color_recent_null\", 18, 18,\n\t`<g>` +\n\t\t`<rect x=\"1.2\" y=\"1.2\" width=\"15.6\" height=\"15.6\" stroke=\"#fff\" stroke-width=\"0.8\" fill=\"none\" />` +\n\t\t`<line x1=\"16.8\" y1=\"1.2\" x2=\"1.2\" y2=\"16.8\" stroke=\"#fff\" stroke-width=\"0.8\" stroke-linecap=\"round\" />` +\n\t\t`<line x1=\"1.2\" y1=\"1.2\" x2=\"16.8\" y2=\"16.8\" stroke=\"#fff\" stroke-width=\"0.8\" stroke-linecap=\"round\" />` +\n\t`</g>`\n);\n\nDThemeWhiteAtlas.add( \"picker_color_sample_checkerboard\", 54, 54, makeCheckerboard( 3, 3 ) );\n\nDThemeWhiteAtlas.add( \"picker_color_sample_null\", 54, 54,\n\t`<g>` +\n\t\t`<rect x=\"3.6\" y=\"3.6\" width=\"46.8\" height=\"46.8\" stroke=\"#fff\" stroke-width=\"2.4\" fill=\"none\" />` +\n\t\t`<line x1=\"50.4\" y1=\"3.6\" x2=\"3.6\" y2=\"50.4\" stroke=\"#fff\" stroke-width=\"2.4\" stroke-linecap=\"round\" />` +\n\t\t`<line x1=\"3.6\" y1=\"3.6\" x2=\"50.4\" y2=\"50.4\" stroke=\"#fff\" stroke-width=\"2.4\" stroke-linecap=\"round\" />` +\n\t`</g>`\n);\n\nDThemeWhiteAtlas.add( \"picker_color_anchor_outlined\", 25.8, 25.8,\n\t`<circle cx=\"12.9\" cy=\"12.9\" r=\"8.4\" stroke=\"none\" fill=\"#ffffff\" />` +\n\t`<circle cx=\"12.9\" cy=\"12.9\" r=\"9.6\" stroke=\"#5f5f5f\" stroke-width=\"2.4\" fill=\"none\" />`\n);\n\nDThemeWhiteAtlas.add( \"picker_color_anchor\", 28.2, 28.2,\n\t`<circle cx=\"14.1\" cy=\"14.1\" r=\"6\" stroke=\"none\" fill=\"#ffffff\" />` +\n\t`<circle cx=\"14.1\" cy=\"14.1\" r=\"7.2\" stroke=\"#5f5f5f\" stroke-width=\"2.4\" fill=\"none\" />`\n);\n\nDThemeWhiteAtlas.add( \"picker_color_direction\", 12, 30,\n\t`<path d=\"M0.6 25.8 L 12.0375 5.9895\" stroke=\"#5f5f5f\" stroke-width=\"1.2\" fill=\"none\" />` +\n\t`<path d=\"M8.5125 25.8 A 8.475 8.475 0 0 0 4.275 18.4605\" stroke=\"#5f5f5f\" stroke-width=\"1.2\" fill=\"none\" />` +\n\t`<rect x=\"0.6\" y=\"24.6\" width=\"11.4375\" height=\"1.2\" rx=\"0.6\" ry=\"0.6\" stroke=\"none\" fill=\"#5f5f5f\" />`\n);\n\nexport class DThemeWhitePickerColor extends DThemeWhiteBase implements DThemePickerColor {\n\tgetMainWidth(): number {\n\t\treturn 234;\n\t}\n\n\tgetMainHeight(): number {\n\t\treturn 156;\n\t}\n\n\tgetMainTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_main;\n\t}\n\n\tgetMainPointerTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_pointer;\n\t}\n\n\tgetMainPointerColor(): number {\n\t\treturn 0xffffff;\n\t}\n\n\tgetMainPointerAlpha(): number {\n\t\treturn 1;\n\t}\n\n\tgetBaseHeight(): number {\n\t\treturn 18;\n\t}\n\n\tgetBaseMargin(): number {\n\t\treturn 6;\n\t}\n\n\tgetBaseTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_base;\n\t}\n\n\tgetBasePointerTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_base_pointer;\n\t}\n\n\tgetBasePointerColor(): number {\n\t\treturn 0xffffff;\n\t}\n\n\tgetBasePointerAlpha(): number {\n\t\treturn this.getMainPointerAlpha();\n\t}\n\n\tgetAlphaHeight(): number {\n\t\treturn this.getBaseHeight();\n\t}\n\n\tgetAlphaMargin(): number {\n\t\treturn this.getBaseMargin();\n\t}\n\n\tgetAlphaTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_alpha;\n\t}\n\n\tgetAlphaCheckerboardTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_alpha_checkerboard;\n\t}\n\n\tgetAlphaPointerTexture(): Texture {\n\t\treturn this.getBasePointerTexture();\n\t}\n\n\tgetAlphaPointerColor(): number {\n\t\treturn this.getBasePointerColor();\n\t}\n\n\tgetAlphaPointerAlpha(): number {\n\t\treturn this.getMainPointerAlpha();\n\t}\n\n\tgetRecentMargin(): number {\n\t\treturn this.getBaseMargin();\n\t}\n\n\tgetRecentColorWidth(): number {\n\t\treturn this.getBaseHeight();\n\t}\n\n\tgetRecentColorHeight(): number {\n\t\treturn this.getRecentColorWidth();\n\t}\n\n\tgetRecentColorMargin(): number {\n\t\treturn this.getRecentMargin();\n\t}\n\n\tgetRecentColorCount(): number {\n\t\treturn 10;\n\t}\n\n\tgetRecentCheckerboardTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_recent_checkerboard;\n\t}\n\n\tgetRecentNullTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_recent_null;\n\t}\n\n\tgetRecents(): DColorAndAlpha[] {\n\t\treturn [];\n\t}\n\n\tgetInputMargin(): number {\n\t\treturn this.getBaseMargin();\n\t}\n\n\tgetInputLabelWidth(): number {\n\t\treturn 20;\n\t}\n\n\tgetSampleWidth(): number {\n\t\treturn 54;\n\t}\n\n\tgetSampleHeight(): number {\n\t\treturn this.getSampleWidth();\n\t}\n\n\tgetSampleCheckerboardTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_sample_checkerboard;\n\t}\n\n\tgetSampleNullTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_sample_null;\n\t}\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhitePickerColor } from \"../theme/white/d-theme-white-picker-color\";\n\nexport const loadThemeWhitePickerColor = () => {\n\tDThemeWhite.set( \"DPickerColor\", DThemeWhitePickerColor );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogColor } from \"../theme/white/d-theme-white-dialog-color\";\nimport { loadThemeWhitePickerColor } from \"./load-theme-white-picker-color\";\n\nexport const loadThemeWhiteDialogColor = () => {\n\tDThemeWhite.set( \"DDialogColor\", DThemeWhiteDialogColor );\n\tloadThemeWhitePickerColor();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonColor } from \"../theme/white/d-theme-white-button-color\";\nimport { loadThemeWhiteDialogColor } from \"./load-theme-white-dialog-color\";\n\nexport const loadThemeWhiteButtonColor = () => {\n\tDThemeWhite.set( \"DButtonColor\", DThemeWhiteButtonColor );\n\tloadThemeWhiteDialogColor();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\ntype Callback = ( target: DPickerColorGradientPoint ) => void;\n\nexport interface DPickerColorGradientPointLike {\n\tcolor: number;\n\talpha: number;\n\tposition: number;\n}\n\nexport class DPickerColorGradientPoint implements DPickerColorGradientPointLike {\n\tprotected _color: number;\n\tprotected _alpha: number;\n\tprotected _position: number;\n\tprotected _callback: Callback;\n\tprotected _selected: boolean;\n\n\tconstructor( color: number, alpha: number, position: number, selected: boolean, callback: Callback ) {\n\t\tthis._color = color;\n\t\tthis._alpha = alpha;\n\t\tthis._position = position;\n\t\tthis._callback = callback;\n\t\tthis._selected = selected;\n\t}\n\n\tset( color: number, alpha: number, position: number, selected: boolean ) {\n\t\tif( this._color !== color || this._alpha !== alpha || this._position !== position || this._selected !== selected ) {\n\t\t\tthis._color = color;\n\t\t\tthis._alpha = alpha;\n\t\t\tthis._position = position;\n\t\t\tthis._selected = selected;\n\t\t\tthis._callback( this );\n\t\t}\n\t}\n\n\tget color() {\n\t\treturn this._color;\n\t}\n\n\tset color( color: number ) {\n\t\tif( this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tthis._callback( this );\n\t\t}\n\t}\n\n\tget alpha() {\n\t\treturn this._alpha;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tif( this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tthis._callback( this );\n\t\t}\n\t}\n\n\tget position() {\n\t\treturn this._position;\n\t}\n\n\tset position( position: number ) {\n\t\tif( this._position !== position ) {\n\t\t\tthis._position = position;\n\t\t\tthis._callback( this );\n\t\t}\n\t}\n\n\tget selected() {\n\t\treturn this._selected;\n\t}\n\n\tset selected( selected: boolean ) {\n\t\tif( this._selected !== selected ) {\n\t\t\tthis._selected = selected;\n\t\t\tthis._callback( this );\n\t\t}\n\t}\n\n\ttoObject(): DPickerColorGradientPointLike {\n\t\treturn {\n\t\t\tcolor: this._color,\n\t\t\talpha: this._alpha,\n\t\t\tposition: this._position\n\t\t};\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\nimport { DPickerColorGradientPoint, DPickerColorGradientPointLike } from \"./d-picker-color-gradient-point\";\n\nconst POINT_SORTER = ( a: DPickerColorGradientPoint, b: DPickerColorGradientPoint ): number => {\n\treturn a.position - b.position;\n};\n\nexport interface DPickerColorGradientDataLike {\n\tpoints: DPickerColorGradientPointLike[];\n\tdirection: number;\n}\n\nexport class DPickerColorGradientData extends utils.EventEmitter {\n\tprotected _points: DPickerColorGradientPoint[];\n\tprotected _direction: number;\n\tprotected _selected: DPickerColorGradientPoint | null;\n\n\tprotected _onChangeBound: ( target: DPickerColorGradientPoint ) => void;\n\tprotected _workColor: number[];\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._onChangeBound = ( target: DPickerColorGradientPoint ): void => {\n\t\t\tthis.onChange( target );\n\t\t};\n\n\t\tconst first = new DPickerColorGradientPoint( 0xffffff, 1, 0, false, this._onChangeBound );\n\t\tconst second = new DPickerColorGradientPoint( 0x808080, 1, 1, true, this._onChangeBound );\n\t\tthis._points = [ first, second ];\n\t\tthis._direction = -90;\n\t\tthis._selected = second;\n\t\tthis._workColor = [ 0, 0, 0 ];\n\t}\n\n\tprotected onChange( target: DPickerColorGradientPoint ): void {\n\t\tconst isSelectionChanged = ( target.selected && this._selected !== target );\n\t\tif( isSelectionChanged ) {\n\t\t\tconst selected = this._selected;\n\t\t\tif( selected != null ) {\n\t\t\t\t(selected as any)._selected = false;\n\t\t\t}\n\t\t\tthis._selected = target;\n\t\t}\n\t\tthis._points.sort( POINT_SORTER );\n\t\tif( isSelectionChanged ) {\n\t\t\tthis.emit( \"selectionchange\", this._selected, this );\n\t\t}\n\t\tthis.emit( \"change\", this );\n\t}\n\n\tget points(): DPickerColorGradientPoint[] {\n\t\treturn this._points;\n\t}\n\n\tget direction(): number {\n\t\treturn this._direction;\n\t}\n\n\tset direction( direction: number ) {\n\t\tif( this._direction !== direction ) {\n\t\t\tthis._direction = direction;\n\t\t\tthis.emit( \"directionchange\", direction, this );\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tget selected(): DPickerColorGradientPoint | null {\n\t\treturn this._selected;\n\t}\n\n\tsize(): number {\n\t\treturn this._points.length;\n\t}\n\n\tget( index: number ): DPickerColorGradientPoint | null {\n\t\tconst points = this._points;\n\t\tif( 0 <= index && index < points.length ) {\n\t\t\treturn points[ index ];\n\t\t}\n\t\treturn null;\n\t}\n\n\taddAt( position: number ): DPickerColorGradientPoint {\n\t\tconst points = this._points;\n\t\tlet previous: DPickerColorGradientPoint | null = null;\n\t\tfor( let i = 0, imax = points.length; i < imax; ++i ) {\n\t\t\tconst point = points[ i ];\n\t\t\tif( position <= point.position ) {\n\t\t\t\tif( previous != null ) {\n\t\t\t\t\tconst span = point.position - previous.position;\n\t\t\t\t\tif( 0.001 < span ) {\n\t\t\t\t\t\tconst rgb0 = utils.hex2rgb( point.color, this._workColor );\n\t\t\t\t\t\tconst r0 = rgb0[ 0 ];\n\t\t\t\t\t\tconst g0 = rgb0[ 1 ];\n\t\t\t\t\t\tconst b0 = rgb0[ 2 ];\n\n\t\t\t\t\t\tconst rgb1 = utils.hex2rgb( previous.color, this._workColor );\n\t\t\t\t\t\tconst r1 = rgb1[ 0 ];\n\t\t\t\t\t\tconst g1 = rgb1[ 1 ];\n\t\t\t\t\t\tconst b1 = rgb1[ 2 ];\n\n\t\t\t\t\t\tconst ratio = (position - previous.position) / span;\n\t\t\t\t\t\tconst r = r0 * ratio + r1 * (1 - ratio);\n\t\t\t\t\t\tconst g = g0 * ratio + g1 * (1 - ratio);\n\t\t\t\t\t\tconst b = b0 * ratio + b1 * (1 - ratio);\n\n\t\t\t\t\t\tconst rgb = this._workColor;\n\t\t\t\t\t\trgb[ 0 ] = r;\n\t\t\t\t\t\trgb[ 1 ] = g;\n\t\t\t\t\t\trgb[ 2 ] = b;\n\n\t\t\t\t\t\tconst color = utils.rgb2hex( rgb );\n\t\t\t\t\t\tconst alpha = point.alpha * ratio + previous.alpha * (1 - ratio);\n\t\t\t\t\t\treturn this.add( color, alpha, position, true );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn this.add( point.color, point.alpha, position, true );\n\t\t\t\t}\n\t\t\t}\n\t\t\tprevious = point;\n\t\t}\n\t\tif( previous != null ) {\n\t\t\treturn this.add( previous.color, previous.alpha, position, true );\n\t\t} else {\n\t\t\treturn this.add( 0xffffff, 1.0, position, true );\n\t\t}\n\t}\n\n\tadd( color: number, alpha: number, position: number, selected: boolean ): DPickerColorGradientPoint {\n\t\tconst result = new DPickerColorGradientPoint( color, alpha, position, selected, this._onChangeBound );\n\t\tthis._points.push( result );\n\t\tthis._onChangeBound( result );\n\t\treturn result;\n\t}\n\n\tremove( point: DPickerColorGradientPoint ): boolean {\n\t\tconst points = this._points;\n\t\tif( 2 < points.length ) {\n\t\t\tfor( let i = 0, imax = points.length; i < imax; ++i ) {\n\t\t\t\tif( points[ i ] === point ) {\n\t\t\t\t\tpoints.splice( i, 1 );\n\t\t\t\t\tconst isSelectionChanged = ( this._selected === point );\n\t\t\t\t\tif( isSelectionChanged ) {\n\t\t\t\t\t\tif( i + 1 < imax ) {\n\t\t\t\t\t\t\tthis._selected = points[ i ];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._selected = points[ i - 1 ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif( isSelectionChanged ) {\n\t\t\t\t\t\tthis.emit( \"selectionchange\", this._selected, this );\n\t\t\t\t\t}\n\t\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\treset(): void {\n\t\tconst oldDirection = this._direction;\n\t\tthis._direction = -90;\n\n\t\tconst points = this._points;\n\t\tconst oldSelected = this._selected;\n\t\tconst index = ( oldSelected ? points.indexOf( oldSelected ) : -1 );\n\t\tpoints.length = 0;\n\t\tpoints.push( new DPickerColorGradientPoint( 0xffffff, 0, 0, false, this._onChangeBound ) );\n\t\tpoints.push( new DPickerColorGradientPoint( 0xffffff, 0, 1, false, this._onChangeBound ) );\n\n\t\tif( 0 <= index && index < points.length ) {\n\t\t\tconst point = points[ index ];\n\t\t\t(point as any)._selected = true;\n\t\t\tthis._selected = point;\n\t\t} else if( 0 < points.length ) {\n\t\t\tconst point = points[ points.length - 1 ];\n\t\t\t(point as any)._selected = true;\n\t\t\tthis._selected = point;\n\t\t} else {\n\t\t\tthis._selected = null;\n\t\t}\n\t\tif( oldSelected !== this._selected ) {\n\t\t\tthis.emit( \"selectionchange\", this._selected, this );\n\t\t}\n\n\t\tif( oldDirection !== this._direction ) {\n\t\t\tthis.emit( \"directionchange\", this._direction, this );\n\t\t}\n\n\t\tthis.emit( \"change\", this );\n\t}\n\n\ttoObject(): DPickerColorGradientDataLike {\n\t\tconst pointsCopy = [];\n\t\tconst points = this._points;\n\t\tfor( let i = 0, imax = points.length; i < imax; ++i ) {\n\t\t\tpointsCopy.push( points[ i ].toObject() );\n\t\t}\n\t\treturn {\n\t\t\tpoints: pointsCopy,\n\t\t\tdirection: this._direction\n\t\t};\n\t}\n\n\tfromObject( data: DPickerColorGradientDataLike ): void {\n\t\tconst oldDirection = this._direction;\n\t\tthis._direction = data.direction;\n\n\t\tconst points = this._points;\n\t\tconst oldSelected = this._selected;\n\t\tconst index = ( oldSelected ? points.indexOf( oldSelected ) : -1 );\n\t\tpoints.length = 0;\n\t\tfor( let i = 0, imax = data.points.length; i < imax; ++i ) {\n\t\t\tconst pointLike = data.points[ i ];\n\t\t\tconst point = new DPickerColorGradientPoint(\n\t\t\t\tpointLike.color, pointLike.alpha, pointLike.position,\n\t\t\t\tfalse, this._onChangeBound\n\t\t\t);\n\t\t\tpoints.push( point );\n\t\t}\n\t\tpoints.sort( POINT_SORTER );\n\n\t\tif( 0 <= index && index < points.length ) {\n\t\t\tconst point = points[ index ];\n\t\t\t(point as any)._selected = true;\n\t\t\tthis._selected = point;\n\t\t} else if( 0 < points.length ) {\n\t\t\tconst point = points[ points.length - 1 ];\n\t\t\t(point as any)._selected = true;\n\t\t\tthis._selected = point;\n\t\t} else {\n\t\t\tthis._selected = null;\n\t\t}\n\t\tif( oldSelected !== this._selected ) {\n\t\t\tthis.emit( \"selectionchange\", this._selected, this );\n\t\t}\n\n\t\tif( oldDirection !== this._direction ) {\n\t\t\tthis.emit( \"directionchange\", this._direction, this );\n\t\t}\n\n\t\tthis.emit( \"change\", this );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { DButtonColorGradient, DThemeButtonColorGradient } from \"../../d-button-color-gradient\";\nimport { DPickerColorGradientData } from \"../../d-picker-color-gradient-data\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\n\n// Material Design icons by Google.\n// Apache license version 2.0.\nDThemeWhiteAtlas.add( \"button_color_gradient_sample\", 21, 21,\n\t`<g transform=\"scale(0.875,0.875)\">` +\n\t\t`<path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" fill=\"#fff\"/>` +\n\t\t`<path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" ` +\n\t\t\t`fill=\"#eee\" />` +\n\t`</g>`\n);\n\nconst formatter = (): string => {\n\treturn \"\";\n};\n\nexport class DThemeWhiteButtonColorGradient extends DThemeWhiteButton implements DThemeButtonColorGradient {\n\tgetViewBaseTexture(): Texture | null {\n\t\treturn DThemeWhiteAtlas.mappings.button_color_gradient_sample;\n\t}\n\n\tgetTextFormatter(): ( value: DPickerColorGradientData, caller: DButtonColorGradient ) => string {\n\t\treturn formatter;\n\t}\n\n\tnewTextValue(): DPickerColorGradientData {\n\t\treturn new DPickerColorGradientData();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum DPickerDatetimeMask {\n\tNONE = 0,\n\tDATE = 1,\n\tHOURS = 2,\n\tMINUTES = 4,\n\tSECONDS = 8,\n\tALL = DATE | HOURS | MINUTES | SECONDS\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeDialogColorGradient } from \"../../d-dialog-color-gradient\";\nimport { DThemeWhiteDialogCommand } from \"./d-theme-white-dialog-command\";\n\nexport class DThemeWhiteDialogColorGradient extends DThemeWhiteDialogCommand implements DThemeDialogColorGradient {\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemePickerColorGradient } from \"../../d-picker-color-gradient\";\nimport { DPickerColorGradientDataLike } from \"../../d-picker-color-gradient-data\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhitePickerColorGradient extends DThemeWhiteBase implements DThemePickerColorGradient {\n\tgetGradientPointsWidth(): number {\n\t\treturn 30;\n\t}\n\n\tgetGradientPointsMargin(): number {\n\t\treturn 24;\n\t}\n\n\tgetGradientAnchorTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_anchor;\n\t}\n\n\tgetGradientAnchorOutlinedTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_anchor_outlined;\n\t}\n\n\tgetGradientAnchorOutlineTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_anchor_outline;\n\t}\n\n\tgetGradientDirectionMargin(): number {\n\t\treturn 5;\n\t}\n\n\tgetGradientDirectionTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_direction;\n\t}\n\n\tgetGradientRecentColumn(): number {\n\t\treturn 4;\n\t}\n\n\tgetGradientRecentWidth(): number {\n\t\treturn 30;\n\t}\n\n\tgetGradientRecentMargin(): number {\n\t\treturn 5;\n\t}\n\n\tgetGradientRecentCount(): number {\n\t\treturn 16;\n\t}\n\n\tgetGradientRecents(): DPickerColorGradientDataLike[] {\n\t\treturn [];\n\t}\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhitePickerColorGradient } from \"../theme/white/d-theme-white-picker-color-gradient\";\nimport { loadThemeWhitePickerColor } from \"./load-theme-white-picker-color\";\n\nexport const loadThemeWhitePickerColorGradient = () => {\n\tDThemeWhite.set( \"DPickerColorGradient\", DThemeWhitePickerColorGradient );\n\tloadThemeWhitePickerColor();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogColorGradient } from \"../theme/white/d-theme-white-dialog-color-gradient\";\nimport { loadThemeWhitePickerColorGradient } from \"./load-theme-white-picker-color-gradient\";\n\nexport const loadThemeWhiteDialogColorGradient = () => {\n\tDThemeWhite.set( \"DDialogColorGradient\", DThemeWhiteDialogColorGradient );\n\tloadThemeWhitePickerColorGradient();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonColorGradient } from \"../theme/white/d-theme-white-button-color-gradient\";\nimport { loadThemeWhiteDialogColorGradient } from \"./load-theme-white-dialog-color-gradient\";\n\nexport const loadThemeWhiteButtonColorGradient = () => {\n\tDThemeWhite.set( \"DButtonColorGradient\", DThemeWhiteButtonColorGradient );\n\tloadThemeWhiteDialogColorGradient();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteButtonBase } from \"./d-theme-white-button-base\";\n\nexport class DThemeWhiteButtonDanger extends DThemeWhiteButtonBase {\n\tCOLOR = 0xff5566;\n\tCOLOR_HOVERED = UtilRgb.darken( this.COLOR, 0.1 );\n\tCOLOR_PRESSED = UtilRgb.darken( this.COLOR, 0.2 );\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t} else if( DBaseStates.isPressed( state ) || DBaseStates.isActive( state ) ) {\n\t\t\treturn this.COLOR_PRESSED;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn this.COLOR_HOVERED;\n\t\t} else {\n\t\t\treturn this.COLOR;\n\t\t}\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn 0xe5e5e5;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn super.getColor( state );\n\t\t} else {\n\t\t\treturn 0xffffff;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonDanger } from \"../theme/white/d-theme-white-button-danger\";\n\nexport const loadThemeWhiteButtonDanger = () => {\n\tDThemeWhite.set( \"DButtonDanger\", DThemeWhiteButtonDanger );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utilPad } from \"./util/util-pad\";\n\nexport class DPickerDates {\n\tstatic format( date: Date ): string {\n\t\tconst y = utilPad( String( date.getFullYear() ), 4, \"0\" );\n\t\tconst M = utilPad( String( date.getMonth() + 1 ), 2, \"0\");\n\t\tconst S = utilPad( String( date.getDate() ), 2, \"0\" );\n\t\treturn `${y}/${M}/${S}`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonDate, DThemeButtonDate } from \"../../d-button-date\";\nimport { DPickerDates } from \"../../d-picker-dates\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\n\nconst formatter = ( value: Date ): string => {\n\treturn DPickerDates.format( value );\n};\n\nexport class DThemeWhiteButtonDate extends DThemeWhiteButton implements DThemeButtonDate {\n\tgetTextFormatter(): ( value: Date, caller: DButtonDate ) => string {\n\t\treturn formatter;\n\t}\n\n\tnewTextValue(): Date {\n\t\treturn new Date();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeDialogDate } from \"../../d-dialog-date\";\nimport { DThemeWhiteDialogCommand } from \"./d-theme-white-dialog-command\";\n\nexport class DThemeWhiteDialogDate extends DThemeWhiteDialogCommand implements DThemeDialogDate {\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DInputIntegerOptions } from \"../../d-input-integer\";\nimport { DPickerDatetimeMask } from \"../../d-picker-datetime-mask\";\nimport { DThemePickerTime } from \"../../d-picker-time\";\nimport { DPickerTimeBoundDate } from \"../../d-picker-time-bound\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhitePickerTime extends DThemeWhiteBase implements DThemePickerTime {\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n\n\tgetMargin(): number {\n\t\treturn 8;\n\t}\n\n\tgetHoursOptions(): DInputIntegerOptions {\n\t\treturn {\n\t\t\twidth: 100,\n\t\t\ttitle: \"Hours\"\n\t\t};\n\t}\n\n\tgetMinutesOptions(): DInputIntegerOptions {\n\t\treturn {\n\t\t\twidth: 100,\n\t\t\ttitle: \"Minutes\"\n\t\t};\n\t}\n\n\tgetSecondsOptions(): DInputIntegerOptions {\n\t\treturn {\n\t\t\twidth: 100,\n\t\t\ttitle: \"Seconds\"\n\t\t};\n\t}\n\n\tgetMask(): DPickerDatetimeMask {\n\t\treturn DPickerDatetimeMask.HOURS | DPickerDatetimeMask.MINUTES;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLowerBound(): DPickerTimeBoundDate {\n\t\treturn null;\n\t}\n\n\tisLowerBoundInclusive(): boolean {\n\t\treturn false;\n\t}\n\n\tgetUpperBound(): DPickerTimeBoundDate {\n\t\treturn null;\n\t}\n\n\tisUpperBoundInclusive(): boolean {\n\t\treturn false;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n\tDPickerDatetimeDateDecorator, DPickerDatetimeDayLabels,\n\tDPickerDatetimeLabelFormatter, DThemePickerDatetime\n} from \"../../d-picker-datetime\";\nimport { DPickerDatetimeButtonBackOptions } from \"../../d-picker-datetime-button-back\";\nimport { DPickerDatetimeButtonNextOptions } from \"../../d-picker-datetime-button-next\";\nimport { DPickerDatetimeMask } from \"../../d-picker-datetime-mask\";\nimport { DThemeWhitePickerTime } from \"./d-theme-white-picker-time\";\n\nconst MONTH_LABELS = [\n\t\"January\",\n\t\"February\",\n\t\"March\",\n\t\"April\",\n\t\"May\",\n\t\"June\",\n\t\"July\",\n\t\"August\",\n\t\"September\",\n\t\"October\",\n\t\"November\",\n\t\"December\"\n];\n\nconst DAY_LABELS: DPickerDatetimeDayLabels = [\n\t\"Su\",\n\t\"Mo\",\n\t\"Tu\",\n\t\"We\",\n\t\"Th\",\n\t\"Fr\",\n\t\"Sa\"\n];\n\nconst defaultLabelFormatter = ( date: Date ): string => {\n\treturn `${MONTH_LABELS[ date.getMonth() ]} ${date.getFullYear()}`;\n};\n\nconst defaultDateDecorator = (): void => { /* DO NOTHING*/ };\n\nexport class DThemeWhitePickerDatetime extends DThemeWhitePickerTime implements DThemePickerDatetime {\n\tgetDayLabels(): DPickerDatetimeDayLabels {\n\t\treturn DAY_LABELS;\n\t}\n\n\tgetDayStart(): number {\n\t\treturn 0;\n\t}\n\n\tgetLabelFormatter(): DPickerDatetimeLabelFormatter {\n\t\treturn defaultLabelFormatter;\n\t}\n\n\tgetDateDecorator(): DPickerDatetimeDateDecorator {\n\t\treturn defaultDateDecorator;\n\t}\n\n\tgetBackButtonOptions(): DPickerDatetimeButtonBackOptions | null {\n\t\treturn {\n\t\t\ttitle: \"Previous\"\n\t\t};\n\t}\n\n\tgetNextButtonOptions(): DPickerDatetimeButtonNextOptions | null {\n\t\treturn {\n\t\t\ttitle: \"Next\"\n\t\t};\n\t}\n\n\tgetMask(): DPickerDatetimeMask {\n\t\treturn DPickerDatetimeMask.DATE | super.getMask();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemePickerDate } from \"../../d-picker-date\";\nimport { DPickerDatetimeMask } from \"../../d-picker-datetime-mask\";\nimport { DThemeWhitePickerDatetime } from \"./d-theme-white-picker-datetime\";\n\nexport class DThemeWhitePickerDate extends DThemeWhitePickerDatetime implements DThemePickerDate {\n\tgetMask(): DPickerDatetimeMask {\n\t\treturn DPickerDatetimeMask.DATE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemePickerDatetimeButtonBack } from \"../../d-picker-datetime-button-back\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteButtonAmbient } from \"./d-theme-white-button-ambient\";\n\nDThemeWhiteAtlas.add( \"picker_date_back\", 24, 24,\n\t`<g>` +\n\t\t`<path d=\"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\" fill=\"#fff\" />` +\n\t`</g>`\n);\n\nexport class DThemeWhitePickerDatetimeButtonBack\n\textends DThemeWhiteButtonAmbient implements DThemePickerDatetimeButtonBack {\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.PADDING;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn 0;\n\t}\n\n\tgetImageAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.LEFT;\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\treturn DThemeWhiteAtlas.mappings.picker_date_back;\n\t}\n\n\tgetColor(): number {\n\t\treturn 0x6f6f6f;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemePickerDatetimeButtonDate } from \"../../d-picker-datetime-button-date\";\nimport { DThemeWhiteButtonAmbient } from \"./d-theme-white-button-ambient\";\n\nexport class DThemeWhitePickerDatetimeButtonDate extends DThemeWhiteButtonAmbient\n\timplements DThemePickerDatetimeButtonDate {\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.CENTER;\n\t}\n\n\tgetTextStyleClipping(): boolean {\n\t\treturn false;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tisToggle(): boolean {\n\t\treturn true;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemePickerDatetimeButtonNext } from \"../../d-picker-datetime-button-next\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteButtonAmbient } from \"./d-theme-white-button-ambient\";\n\nDThemeWhiteAtlas.add( \"picker_date_next\", 24, 24,\n\t`<g>` +\n\t\t`<path d=\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\" fill=\"#fff\" />` +\n\t`</g>`\n);\n\nexport class DThemeWhitePickerDatetimeButtonNext\n\textends DThemeWhiteButtonAmbient implements DThemePickerDatetimeButtonNext {\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.PADDING;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn 0;\n\t}\n\n\tgetImageAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.LEFT;\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\treturn DThemeWhiteAtlas.mappings.picker_date_next;\n\t}\n\n\tgetColor(): number {\n\t\treturn 0x6f6f6f;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeWhiteTextBase } from \"./d-theme-white-text-base\";\n\nexport class DThemeWhiteText extends DThemeWhiteTextBase {\n\tgetHeight(): DCoordinate {\n\t\treturn this.getLineHeight();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DFontWeight } from \"../../d-font\";\nimport { DThemePickerDatetimeLabel } from \"../../d-picker-datetime-label\";\nimport { DThemeWhiteText } from \"./d-theme-white-text\";\n\nexport class DThemeWhitePickerDatetimeLabel extends DThemeWhiteText implements DThemePickerDatetimeLabel {\n\tgetWidth(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetTextStyleClipping(): boolean {\n\t\treturn false;\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.CENTER;\n\t}\n\n\tgetColor(): number {\n\t\treturn 0x6f6f6f;\n\t}\n\n\tgetFontWeight(): DFontWeight {\n\t\treturn \"bold\";\n\t}\n\n\tgetFontSize(): number {\n\t\treturn Math.round( super.getFontSize() * 1.25 );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DFontWeight } from \"../../d-font\";\nimport { DThemePickerDatetimeLabelDate } from \"../../d-picker-datetime-label-date\";\nimport { DThemeWhiteText } from \"./d-theme-white-text\";\n\nexport class DThemeWhitePickerDatetimeLabelDate extends DThemeWhiteText implements DThemePickerDatetimeLabelDate {\n\tgetWidth(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetTextStyleClipping(): boolean {\n\t\treturn false;\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.CENTER;\n\t}\n\n\tgetColor(): number {\n\t\treturn 0x6f6f6f;\n\t}\n\n\tgetFontWeight(): DFontWeight {\n\t\treturn \"bold\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemePickerDatetimeSpace } from \"../../d-picker-datetime-space\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhitePickerDatetimeSpace extends DThemeWhiteBase implements DThemePickerDatetimeSpace {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 30;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhitePickerTime } from \"../theme/white/d-theme-white-picker-time\";\n\nexport const loadThemeWhitePickerTime = () => {\n\tDThemeWhite.set( \"DPickerTime\", DThemeWhitePickerTime );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhitePickerDatetime } from \"../theme/white/d-theme-white-picker-datetime\";\nimport { DThemeWhitePickerDatetimeButtonBack } from \"../theme/white/d-theme-white-picker-datetime-button-back\";\nimport { DThemeWhitePickerDatetimeButtonDate } from \"../theme/white/d-theme-white-picker-datetime-button-date\";\nimport { DThemeWhitePickerDatetimeButtonNext } from \"../theme/white/d-theme-white-picker-datetime-button-next\";\nimport { DThemeWhitePickerDatetimeLabel } from \"../theme/white/d-theme-white-picker-datetime-label\";\nimport { DThemeWhitePickerDatetimeLabelDate } from \"../theme/white/d-theme-white-picker-datetime-label-date\";\nimport { DThemeWhitePickerDatetimeSpace } from \"../theme/white/d-theme-white-picker-datetime-space\";\nimport { loadThemeWhitePickerTime } from \"./load-theme-white-picker-time\";\n\nexport const loadThemeWhitePickerDatetime = () => {\n\tDThemeWhite.set( \"DPickerDatetimeButtonBack\", DThemeWhitePickerDatetimeButtonBack );\n\tDThemeWhite.set( \"DPickerDatetimeButtonDate\", DThemeWhitePickerDatetimeButtonDate );\n\tDThemeWhite.set( \"DPickerDatetimeButtonNext\", DThemeWhitePickerDatetimeButtonNext );\n\tDThemeWhite.set( \"DPickerDatetimeLabelDate\", DThemeWhitePickerDatetimeLabelDate );\n\tDThemeWhite.set( \"DPickerDatetimeLabel\", DThemeWhitePickerDatetimeLabel );\n\tDThemeWhite.set( \"DPickerDatetimeSpace\", DThemeWhitePickerDatetimeSpace );\n\tDThemeWhite.set( \"DPickerDatetime\", DThemeWhitePickerDatetime );\n\tloadThemeWhitePickerTime();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhitePickerDate } from \"../theme/white/d-theme-white-picker-date\";\nimport { loadThemeWhitePickerDatetime } from \"./load-theme-white-picker-datetime\";\n\nexport const loadThemeWhitePickerDate = () => {\n\tDThemeWhite.set( \"DPickerDate\", DThemeWhitePickerDate );\n\tloadThemeWhitePickerDatetime();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogDate } from \"../theme/white/d-theme-white-dialog-date\";\nimport { loadThemeWhitePickerDate } from \"./load-theme-white-picker-date\";\n\nexport const loadThemeWhiteDialogDate = () => {\n\tDThemeWhite.set( \"DDialogDate\", DThemeWhiteDialogDate );\n\tloadThemeWhitePickerDate();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonDate } from \"../theme/white/d-theme-white-button-date\";\nimport { loadThemeWhiteDialogDate } from \"./load-theme-white-dialog-date\";\n\nexport const loadThemeWhiteButtonDate = () => {\n\tDThemeWhite.set( \"DButtonDate\", DThemeWhiteButtonDate );\n\tloadThemeWhiteDialogDate();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DThemePickerTime } from \"./d-picker-time\";\nimport { DThemes } from \"./theme/d-themes\";\nimport { utilPad } from \"./util/util-pad\";\n\nexport class DPickerTimes {\n\tstatic format( date: Date, mask: DPickerDatetimeMask ): string {\n\t\tlet result = \"\";\n\t\tif( mask & DPickerDatetimeMask.HOURS ) {\n\t\t\tresult += utilPad( String( date.getHours() ), 2, \"0\" );\n\t\t}\n\t\tif( mask & DPickerDatetimeMask.MINUTES ) {\n\t\t\tif( 0 < result.length ) {\n\t\t\t\tresult += \":\";\n\t\t\t}\n\t\t\tresult += utilPad( String( date.getMinutes() ), 2, \"0\" );\n\t\t}\n\t\tif( mask & DPickerDatetimeMask.SECONDS ) {\n\t\t\tif( 0 < result.length ) {\n\t\t\t\tresult += \":\";\n\t\t\t}\n\t\t\tresult += utilPad( String( date.getSeconds() ), 2, \"0\" );\n\t\t}\n\t\treturn result;\n\t}\n\n\tstatic toMask( options?: { mask?: DPickerDatetimeMask } ): DPickerDatetimeMask {\n\t\treturn ( options && options.mask != null ? options.mask :\n\t\t\t(DThemes.getInstance().get( \"DPickerTime\" ) as DThemePickerTime).getMask() );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DPickerDates } from \"./d-picker-dates\";\nimport { DThemePickerDatetime } from \"./d-picker-datetime\";\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerTimes } from \"./d-picker-times\";\nimport { DThemes } from \"./theme/d-themes\";\n\nexport class DPickerDatetimes {\n\tstatic format( date: Date, mask: DPickerDatetimeMask ): string {\n\t\tconst hms = DPickerTimes.format( date, mask );\n\t\tif( 0 < hms.length ) {\n\t\t\treturn `${DPickerDates.format( date )} ${hms}`;\n\t\t} else {\n\t\t\treturn `${DPickerDates.format( date )}`;\n\t\t}\n\t}\n\n\tstatic toMask( options?: { mask?: DPickerDatetimeMask } ): DPickerDatetimeMask {\n\t\treturn ( options && options.mask != null ? options.mask :\n\t\t\t(DThemes.getInstance().get( \"DPickerDatetime\" ) as DThemePickerDatetime).getMask() );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonDatetime, DThemeButtonDatetime } from \"../../d-button-datetime\";\nimport { DPickerDatetimes } from \"../../d-picker-datetimes\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\n\nconst formatter = ( value: Date, caller: DButtonDatetime ): string => {\n\treturn DPickerDatetimes.format( value, caller.getDatetimeMask() );\n};\n\nexport class DThemeWhiteButtonDatetime extends DThemeWhiteButton implements DThemeButtonDatetime {\n\tgetTextFormatter(): ( value: Date, caller: DButtonDatetime ) => string {\n\t\treturn formatter;\n\t}\n\n\tnewTextValue(): Date {\n\t\treturn new Date();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeDialogDatetime } from \"../../d-dialog-datetime\";\nimport { DThemeWhiteDialogCommand } from \"./d-theme-white-dialog-command\";\n\nexport class DThemeWhiteDialogDatetime extends DThemeWhiteDialogCommand implements DThemeDialogDatetime {\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogDatetime } from \"../theme/white/d-theme-white-dialog-datetime\";\nimport { loadThemeWhitePickerDatetime } from \"./load-theme-white-picker-datetime\";\n\nexport const loadThemeWhiteDialogDatetime = () => {\n\tDThemeWhite.set( \"DDialogDatetime\", DThemeWhiteDialogDatetime );\n\tloadThemeWhitePickerDatetime();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonDatetime } from \"../theme/white/d-theme-white-button-datetime\";\nimport { loadThemeWhiteDialogDatetime } from \"./load-theme-white-dialog-datetime\";\n\nexport const loadThemeWhiteButtonDatetime = () => {\n\tDThemeWhite.set( \"DButtonDatetime\", DThemeWhiteButtonDatetime );\n\tloadThemeWhiteDialogDatetime();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeButtonFile } from \"../../d-button-file\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\n\nexport class DThemeWhiteButtonFile extends DThemeWhiteButton implements DThemeButtonFile {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonFile } from \"../theme/white/d-theme-white-button-file\";\n\nexport const loadThemeWhiteButtonFile = () => {\n\tDThemeWhite.set( \"DButtonFile\", DThemeWhiteButtonFile );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteButtonBase } from \"./d-theme-white-button-base\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\n\nexport class DThemeWhiteButtonPrimary extends DThemeWhiteButtonBase {\n\tCOLOR = DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\tCOLOR_HOVERED = UtilRgb.darken( this.COLOR, 0.1 );\n\tCOLOR_PRESSED = UtilRgb.darken( this.COLOR, 0.2 );\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t} else if( DBaseStates.isPressed( state ) || DBaseStates.isActive( state ) ) {\n\t\t\treturn this.COLOR_PRESSED;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn this.COLOR_HOVERED;\n\t\t} else {\n\t\t\treturn this.COLOR;\n\t\t}\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn 0xe5e5e5;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn super.getColor( state );\n\t\t} else {\n\t\t\treturn 0xffffff;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonPrimary } from \"../theme/white/d-theme-white-button-primary\";\n\nexport const loadThemeWhiteButtonPrimary = () => {\n\tDThemeWhite.set( \"DButtonPrimary\", DThemeWhiteButtonPrimary );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DThemeButtonRadio } from \"../../d-button-radio\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteButtonAmbient } from \"./d-theme-white-button-ambient\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteFont } from \"./d-theme-white-font\";\n\n// Material Design icons by Google.\n// Apache license version 2.0.\nDThemeWhiteAtlas.add( \"button_radio_mark_on\", 21, 21,\n\t`<g transform=\"scale(0.875,0.875)\">` +\n\t\t`<path d=\"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48` +\n\t\t\t` 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8` +\n\t\t\t` 8 3.58 8 8-3.58 8-8 8z\" fill=\"#fff\" />` +\n\t`</g>`\n);\n\nDThemeWhiteAtlas.add( \"button_radio_mark_off\", 21, 21,\n\t`<g transform=\"scale(0.875,0.875)\">` +\n\t\t`<path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42` +\n\t\t\t` 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\" fill=\"#fff\" />` +\n\t`</g>`\n);\n\nexport class DThemeWhiteButtonRadio extends DThemeWhiteButtonAmbient implements DThemeButtonRadio {\n\treadonly IMAGE_TINT_COLOR_FOCUSED = UtilRgb.darken( DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR, 0.1 );\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteFont.getColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\tif( ! DBaseStates.isDisabled( state ) ) {\n\t\t\tif( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_ALPHA;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetImageTintColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) || ! DBaseStates.isActive( state ) ) {\n\t\t\tif( DBaseStates.isFocused( state ) ) {\n\t\t\t\treturn this.IMAGE_TINT_COLOR_FOCUSED;\n\t\t\t} else {\n\t\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t\t\t}\n\t\t} else {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t}\n\t}\n\n\tisToggle(): boolean {\n\t\treturn true;\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\tif( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteAtlas.mappings.button_radio_mark_on;\n\t\t} else {\n\t\t\treturn DThemeWhiteAtlas.mappings.button_radio_mark_off;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum DDragMode {\n\tOFF,\n\tON,\n\tTOUCH\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonRadio } from \"../theme/white/d-theme-white-button-radio\";\n\nexport const loadThemeWhiteButtonRadio = () => {\n\tDThemeWhite.set( \"DButtonRadio\", DThemeWhiteButtonRadio );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DThemeButtonRadioRight } from \"../../d-button-radio-right\";\nimport { DThemeWhiteButtonRadio } from \"./d-theme-white-button-radio\";\n\nexport class DThemeWhiteButtonRadioRight extends DThemeWhiteButtonRadio implements DThemeButtonRadioRight {\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.PADDING;\n\t}\n\n\tgetImageAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.RIGHT;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn 0;\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.LEFT;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonRadioRight } from \"../theme/white/d-theme-white-button-radio-right\";\n\nexport const loadThemeWhiteButtonRadioRight = () => {\n\tDThemeWhite.set( \"DButtonRadioRight\", DThemeWhiteButtonRadioRight );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteButtonBase } from \"./d-theme-white-button-base\";\n\nexport class DThemeWhiteButtonSecondary extends DThemeWhiteButtonBase {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonSecondary } from \"../theme/white/d-theme-white-button-secondary\";\n\nexport const loadThemeWhiteButtonSecondary = () => {\n\tDThemeWhite.set( \"DButtonSecondary\", DThemeWhiteButtonSecondary );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonTime, DThemeButtonTime } from \"../../d-button-time\";\nimport { DPickerTimes } from \"../../d-picker-times\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\n\nconst formatter = ( value: Date, caller: DButtonTime ): string => {\n\treturn DPickerTimes.format( value, caller.getDatetimeMask() );\n};\n\nexport class DThemeWhiteButtonTime extends DThemeWhiteButton implements DThemeButtonTime {\n\tgetTextFormatter(): ( value: Date, caller: DButtonTime ) => string {\n\t\treturn formatter;\n\t}\n\n\tnewTextValue(): Date {\n\t\treturn new Date();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeDialogTime } from \"../../d-dialog-time\";\nimport { DThemeWhiteDialogCommand } from \"./d-theme-white-dialog-command\";\n\nexport class DThemeWhiteDialogTime extends DThemeWhiteDialogCommand implements DThemeDialogTime {\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogTime } from \"../theme/white/d-theme-white-dialog-time\";\nimport { loadThemeWhitePickerTime } from \"./load-theme-white-picker-time\";\n\nexport const loadThemeWhiteDialogTime = () => {\n\tDThemeWhite.set( \"DDialogTime\", DThemeWhiteDialogTime );\n\tloadThemeWhitePickerTime();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonTime } from \"../theme/white/d-theme-white-button-time\";\nimport { loadThemeWhiteDialogTime } from \"./load-theme-white-dialog-time\";\n\nexport const loadThemeWhiteButtonTime = () => {\n\tDThemeWhite.set( \"DButtonTime\", DThemeWhiteButtonTime );\n\tloadThemeWhiteDialogTime();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { loadThemeWhiteButton } from \"./load-theme-white-button\";\nimport { loadThemeWhiteButtonAmbient } from \"./load-theme-white-button-ambient\";\nimport { loadThemeWhiteButtonCheck } from \"./load-theme-white-button-check\";\nimport { loadThemeWhiteButtonCheckRight } from \"./load-theme-white-button-check-right\";\nimport { loadThemeWhiteButtonColor } from \"./load-theme-white-button-color\";\nimport { loadThemeWhiteButtonColorGradient } from \"./load-theme-white-button-color-gradient\";\nimport { loadThemeWhiteButtonDanger } from \"./load-theme-white-button-danger\";\nimport { loadThemeWhiteButtonDate } from \"./load-theme-white-button-date\";\nimport { loadThemeWhiteButtonDatetime } from \"./load-theme-white-button-datetime\";\nimport { loadThemeWhiteButtonFile } from \"./load-theme-white-button-file\";\nimport { loadThemeWhiteButtonPrimary } from \"./load-theme-white-button-primary\";\nimport { loadThemeWhiteButtonRadio } from \"./load-theme-white-button-radio\";\nimport { loadThemeWhiteButtonRadioRight } from \"./load-theme-white-button-radio-right\";\nimport { loadThemeWhiteButtonSecondary } from \"./load-theme-white-button-secondary\";\nimport { loadThemeWhiteButtonTime } from \"./load-theme-white-button-time\";\n\nexport const loadThemeWhiteButtonAll = () => {\n\tloadThemeWhiteButtonAmbient();\n\tloadThemeWhiteButtonCheckRight();\n\tloadThemeWhiteButtonCheck();\n\tloadThemeWhiteButtonColorGradient();\n\tloadThemeWhiteButtonColor();\n\tloadThemeWhiteButtonDanger();\n\tloadThemeWhiteButtonDate();\n\tloadThemeWhiteButtonDatetime();\n\tloadThemeWhiteButtonFile();\n\tloadThemeWhiteButtonPrimary();\n\tloadThemeWhiteButtonRadioRight();\n\tloadThemeWhiteButtonRadio();\n\tloadThemeWhiteButtonSecondary();\n\tloadThemeWhiteButtonTime();\n\tloadThemeWhiteButton();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeCanvas } from \"../../d-canvas\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhiteCanvas extends DThemeWhiteBase implements DThemeCanvas {\n\tgetBackgroundColor() {\n\t\treturn 0xffffff;\n\t}\n\n\tgetBorderColor( state: DBaseState ) {\n\t\treturn null;\n\t}\n\n\tgetCornerMask(): number {\n\t\treturn DCornerMask.ALL;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeCanvasContainer } from \"../../d-canvas-container\";\nimport { DDragMode } from \"../../d-drag-mode\";\nimport { DMouseModifier } from \"../../d-mouse-modifier\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhiteCanvasContainer extends DThemeWhiteBase implements DThemeCanvasContainer {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetPaddingLeft() {\n\t\treturn 50;\n\t}\n\n\tgetPaddingTop() {\n\t\treturn 50;\n\t}\n\n\tgetPaddingRight() {\n\t\treturn 50;\n\t}\n\n\tgetPaddingBottom() {\n\t\treturn 50;\n\t}\n\n\tisWheelZoomEnabled(): boolean {\n\t\treturn true;\n\t}\n\n\tgetWheelZoomSpeed(): number {\n\t\treturn 0.004;\n\t}\n\n\tgetWheelZoomModifier(): DMouseModifier {\n\t\treturn DMouseModifier.NOT_NONE;\n\t}\n\n\tisWheelTranslationEnabled(): boolean {\n\t\treturn true;\n\t}\n\n\tgetWheelTranslationSpeed(): number {\n\t\treturn this.getFontSize() * 0.16;\n\t}\n\n\tgetWheelTranslationModifier(): DMouseModifier {\n\t\treturn DMouseModifier.NONE;\n\t}\n\n\tisDblClickZoomEnabled(): boolean {\n\t\treturn true;\n\t}\n\n\tgetDblClickZoomSpeed(): number {\n\t\treturn 2;\n\t}\n\n\tgetDblClickZoomModifier(): DMouseModifier {\n\t\treturn DMouseModifier.NONE;\n\t}\n\n\tgetDblClickZoomDuration(): number {\n\t\treturn 333;\n\t}\n\n\tgetZoomMin(): number {\n\t\treturn 0.1;\n\t}\n\n\tgetZoomMax(): number {\n\t\treturn 20;\n\t}\n\n\tgetDragMode(): DDragMode {\n\t\treturn DDragMode.ON;\n\t}\n\n\tgetDragModifier(): DMouseModifier {\n\t\treturn DMouseModifier.NONE;\n\t}\n\n\tgetDragDurationPosition(): number {\n\t\treturn 1;\n\t}\n\n\tgetDragDurationScale(): number {\n\t\treturn 1;\n\t}\n\n\tisOverflowMaskEnabled(): boolean {\n\t\treturn false;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartAxisContainer } from \"./d-chart-axis-container\";\n\nexport enum DChartAxisPosition {\n\tTOP,\n\tBOTTOM,\n\tLEFT,\n\tRIGHT\n}\n\nexport enum DChartAxisTickPosition {\n\tINSIDE,\n\tOUTSIDE\n}\n\nexport interface DChartAxisOptions {\n\tposition?: DChartAxisPosition | keyof typeof DChartAxisPosition;\n}\n\nexport interface DChartAxis {\n\treadonly position: DChartAxisPosition;\n\tbind( container: DChartAxisContainer, index: number ): void;\n\tunbind(): void;\n\tupdate(): void;\n\tdestroy(): void;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteCanvas } from \"../theme/white/d-theme-white-canvas\";\nimport { DThemeWhiteCanvasContainer } from \"../theme/white/d-theme-white-canvas-container\";\n\nexport const loadThemeWhiteCanvasContainer = () => {\n\tDThemeWhite.set( \"DCanvasContainer\", DThemeWhiteCanvasContainer );\n\tDThemeWhite.set( \"DCanvas\", DThemeWhiteCanvas );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeChart } from \"../../d-chart\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhiteChart extends DThemeWhiteBase implements DThemeChart {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeFill, EShapeFillLike } from \"../e-shape-fill\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\n\nexport class EShapeGroupFillViewer implements EShapeFill {\n\tconstructor() {\n\t\t// DO NOTHING\n\t}\n\n\tget enable(): boolean {\n\t\treturn true;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\t// DO NOTHING\n\t}\n\n\tget color(): number {\n\t\treturn 0xffffff;\n\t}\n\n\tset color( color: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget alpha(): number {\n\t\treturn 1.0;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tcopy( target: EShapeFillLike ) {\n\t\t// DO NOTHING\n\t}\n\n\tset( enable: boolean, color: number, alpha: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tclone(): EShapeGroupFillViewer {\n\t\treturn new EShapeGroupFillViewer();\n\t}\n\n\ttoObject(): EShapeFillLike {\n\t\treturn {\n\t\t\tenable: true,\n\t\t\tcolor: 0xffffff,\n\t\t\talpha: 1.0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ) {\n\t\t//\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeStroke, EShapeStrokeLike, EShapeStrokeSide } from \"../e-shape-stroke\";\n\nexport class EShapeGroupStrokeViewer implements EShapeStroke {\n\tconstructor() {\n\t\t// DO NOTHING\n\t}\n\n\tget enable(): boolean {\n\t\treturn false;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\t// DO NOTHING\n\t}\n\n\tget color(): number {\n\t\treturn 0xffffff;\n\t}\n\n\tset color( color: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget alpha(): number {\n\t\treturn 1.0;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget width(): number {\n\t\treturn 1.0;\n\t}\n\n\tset width( width: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget align(): number {\n\t\treturn 0.0;\n\t}\n\n\tset align( width: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget side(): EShapeStrokeSide {\n\t\treturn EShapeStrokeSide.NONE;\n\t}\n\n\tset side( side: EShapeStrokeSide ) {\n\t\t// DO NOTHING\n\t}\n\n\tcopy( target?: Partial<EShapeStrokeLike> ) {\n\t\t// DO NOTHING\n\t}\n\n\tset( enable?: boolean, color?: number, alpha?: number, width?: number, side?: EShapeStrokeSide ) {\n\t\t// DO NOTHING\n\t}\n\n\tclone(): EShapeGroupStrokeViewer {\n\t\treturn new EShapeGroupStrokeViewer();\n\t}\n\n\ttoObject(): EShapeStrokeLike {\n\t\treturn {\n\t\t\tenable: false,\n\t\t\tcolor: 0xffffff,\n\t\t\talpha: 1.0,\n\t\t\twidth: 1.0,\n\t\t\talign: 0.0,\n\t\t\tside: EShapeStrokeSide.NONE\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t//\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextAlign, EShapeTextAlignLike } from \"../e-shape-text-align\";\nimport { EShapeTextAlignHorizontal } from \"../e-shape-text-align-horizontal\";\nimport { EShapeTextAlignVertical } from \"../e-shape-text-align-vertical\";\n\nexport class EShapeGroupTextAlignViewer implements EShapeTextAlign {\n\tconstructor() {\n\t\t// DO NOTHING\n\t}\n\n\tget horizontal(): EShapeTextAlignHorizontal {\n\t\treturn EShapeTextAlignHorizontal.CENTER;\n\t}\n\n\tset horizontal( horizontal: EShapeTextAlignHorizontal ) {\n\t\t// DO NOTHING\n\t}\n\n\tget vertical(): EShapeTextAlignVertical {\n\t\treturn EShapeTextAlignVertical.MIDDLE;\n\t}\n\n\tset vertical( vertical: EShapeTextAlignVertical ) {\n\t\t// DO NOTHING\n\t}\n\n\tcopy( target?: Partial<EShapeTextAlignLike> ): void {\n\t\t// DO NOTHING\n\t}\n\n\tset( horizontal?: EShapeTextAlignHorizontal, vertical?: EShapeTextAlignVertical ): void {\n\t\t// DO NOTHING\n\t}\n\n\ttoObject(): EShapeTextAlignLike {\n\t\treturn {\n\t\t\thorizontal: EShapeTextAlignHorizontal.CENTER,\n\t\t\tvertical: EShapeTextAlignVertical.MIDDLE\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOffset, EShapeTextOffsetLike } from \"../e-shape-text-offset\";\n\nexport class EShapeGroupTextOffsetViewer implements EShapeTextOffset {\n\tconstructor() {\n\t\t// DO NOTHING\n\t}\n\n\tget horizontal(): number {\n\t\treturn 0;\n\t}\n\n\tset horizontal( horizontal: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget vertical(): number {\n\t\treturn 0;\n\t}\n\n\tset vertical( vertical: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tcopy( target?: Partial<EShapeTextOffsetLike> ): void {\n\t\t// DO NOTHING\n\t}\n\n\tset( horizontal?: number, vertical?: number ): void {\n\t\t// DO NOTHING\n\t}\n\n\ttoObject(): EShapeTextOffsetLike {\n\t\treturn {\n\t\t\thorizontal: 0,\n\t\t\tvertical: 0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOutline, EShapeTextOutlineLike } from \"../e-shape-text-outline\";\n\nexport class EShapeGroupTextOutlineViewer implements EShapeTextOutline {\n\tconstructor() {\n\t\t// DO NOTHING\n\t}\n\n\tget enable(): boolean {\n\t\treturn false;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\t// DO NOTHING\n\t}\n\n\tget color(): number {\n\t\treturn 0xffffff;\n\t}\n\n\tset color( color: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget alpha(): number {\n\t\treturn 1.0;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget width(): number {\n\t\treturn 1.0;\n\t}\n\n\tset width( width: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tcopy( target?: Partial<EShapeTextOutlineLike> ) {\n\t\t// DO NOTHING\n\t}\n\n\tset( enable?: boolean, color?: number, alpha?: number, width?: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tclone(): EShapeGroupTextOutlineViewer {\n\t\treturn new EShapeGroupTextOutlineViewer();\n\t}\n\n\ttoObject(): EShapeTextOutlineLike {\n\t\treturn {\n\t\t\tenable: false,\n\t\t\tcolor: 0xffffff,\n\t\t\talpha: 1.0,\n\t\t\twidth: 1.0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t//\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOffset, EShapeTextOffsetLike } from \"../e-shape-text-offset\";\n\nexport class EShapeGroupTextPaddingViewer implements EShapeTextOffset {\n\tconstructor() {\n\t\t// DO NOTHING\n\t}\n\n\tget horizontal(): number {\n\t\treturn 0;\n\t}\n\n\tset horizontal( horizontal: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget vertical(): number {\n\t\treturn 0;\n\t}\n\n\tset vertical( vertical: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tcopy( target?: Partial<EShapeTextOffsetLike> ): void {\n\t\t// DO NOTHING\n\t}\n\n\tset( horizontal?: number, vertical?: number ): void {\n\t\t// DO NOTHING\n\t}\n\n\ttoObject(): EShapeTextOffsetLike {\n\t\treturn {\n\t\t\thorizontal: 0,\n\t\t\tvertical: 0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOffset, EShapeTextOffsetLike } from \"../e-shape-text-offset\";\n\nexport class EShapeGroupTextSpacingViewer implements EShapeTextOffset {\n\tconstructor() {\n\t\t// DO NOTHING\n\t}\n\n\tget horizontal(): number {\n\t\treturn 0;\n\t}\n\n\tset horizontal( horizontal: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget vertical(): number {\n\t\treturn 0;\n\t}\n\n\tset vertical( vertical: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tcopy( target?: Partial<EShapeTextOffsetLike> ): void {\n\t\t// DO NOTHING\n\t}\n\n\tset( horizontal?: number, vertical?: number ): void {\n\t\t// DO NOTHING\n\t}\n\n\ttoObject(): EShapeTextOffsetLike {\n\t\treturn {\n\t\t\thorizontal: 0,\n\t\t\tvertical: 0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DeepPartial } from \"../../util/deep-partial\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeText, EShapeTextLike, EShapeTextStyle, EShapeTextWeight } from \"../e-shape-text\";\nimport { EShapeTextDirection } from \"../e-shape-text-direction\";\nimport { EShapeGroupTextAlignViewer } from \"./e-shape-group-text-align-viewer\";\nimport { EShapeGroupTextOffsetViewer } from \"./e-shape-group-text-offset-viewer\";\nimport { EShapeGroupTextOutlineViewer } from \"./e-shape-group-text-outline-viewer\";\nimport { EShapeGroupTextPaddingViewer } from \"./e-shape-group-text-padding-viewer\";\nimport { EShapeGroupTextSpacingViewer } from \"./e-shape-group-text-spacing-viewer\";\n\nexport class EShapeGroupTextViewer implements EShapeText {\n\talign: EShapeGroupTextAlignViewer;\n\toffset: EShapeGroupTextOffsetViewer;\n\toutline: EShapeGroupTextOutlineViewer;\n\tspacing: EShapeGroupTextSpacingViewer;\n\tpadding: EShapeGroupTextPaddingViewer;\n\n\tconstructor() {\n\t\tthis.align = new EShapeGroupTextAlignViewer();\n\t\tthis.offset = new EShapeGroupTextOffsetViewer();\n\t\tthis.outline = new EShapeGroupTextOutlineViewer();\n\t\tthis.spacing = new EShapeGroupTextSpacingViewer();\n\t\tthis.padding = new EShapeGroupTextPaddingViewer();\n\t}\n\n\tget enable(): boolean {\n\t\treturn true;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\t// DO NOTHING\n\t}\n\n\tget value(): string {\n\t\treturn \"\";\n\t}\n\n\tset value( value: string ) {\n\t\t// DO NOTHING\n\t}\n\n\tget color(): number {\n\t\treturn 0x000000;\n\t}\n\n\tset color( color: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget alpha(): number {\n\t\treturn 1.0;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget family(): string {\n\t\treturn \"auto\";\n\t}\n\n\tset family( family: string ) {\n\t\t// DO NOTHING\n\t}\n\n\tget size(): number {\n\t\treturn 24;\n\t}\n\n\tset size( size: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget weight(): EShapeTextWeight {\n\t\treturn EShapeTextWeight.NORMAL;\n\t}\n\n\tset weight( weight: EShapeTextWeight ) {\n\t\t// DO NOTHING\n\t}\n\n\tget style(): EShapeTextStyle {\n\t\treturn EShapeTextStyle.NORMAL;\n\t}\n\n\tset style( style: EShapeTextStyle ) {\n\t\t// DO NOTHING\n\t}\n\n\tget direction(): number {\n\t\treturn EShapeTextDirection.LEFT_TO_RIGHT;\n\t}\n\n\tset direction( direction: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget clipping(): boolean {\n\t\treturn false;\n\t}\n\n\tset clipping( clipping: boolean ) {\n\t\t// DO NOTHING\n\t}\n\n\tcopy( target?: DeepPartial<EShapeTextLike> ): this {\n\t\treturn this;\n\t}\n\n\tset(\n\t\tvalue?: string, color?: number, alpha?: number,\n\t\tfamily?: string, size?: number, weight?: EShapeTextWeight,\n\t\tstyle?: EShapeTextStyle, direction?: EShapeTextDirection,\n\t\tclipping?: boolean\n\t): this {\n\t\treturn this;\n\t}\n\n\ttoObject(): EShapeTextLike {\n\t\treturn {\n\t\t\tvalue: \"\",\n\t\t\tcolor: 0x000000,\n\t\t\talpha: 1.0,\n\t\t\tfamily: \"auto\",\n\t\t\tsize: 24,\n\t\t\tweight: EShapeTextWeight.NORMAL,\n\t\t\talign: this.align.toObject(),\n\t\t\toffset: this.offset.toObject(),\n\t\t\tstyle: EShapeTextStyle.NORMAL,\n\t\t\toutline: this.outline.toObject(),\n\t\t\tspacing: this.spacing.toObject(),\n\t\t\tdirection: EShapeTextDirection.LEFT_TO_RIGHT,\n\t\t\tpadding: this.padding.toObject(),\n\t\t\tclipping: false\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t//\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class EShapeBufferCount {\n\tvertexCount: number;\n\tindexCount: number;\n\n\tconstructor() {\n\t\tthis.vertexCount = 0;\n\t\tthis.indexCount = 0;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\n\nexport class EShapeBufferUnit {\n\ttexture: Texture;\n\tindexOffset: number;\n\n\tconstructor( texture: Texture, indexOffset: number ) {\n\t\tthis.texture = texture;\n\t\tthis.indexOffset = indexOffset;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { BaseTexture, Texture } from \"pixi.js\";\nimport { EShapeBufferUnit } from \"./e-shape-buffer-unit\";\n\nexport class EShapeBufferUnitBuilder {\n\tindex: number;\n\tbaseTexture: BaseTexture | null;\n\tunits: EShapeBufferUnit[];\n\n\tconstructor() {\n\t\tthis.index = 0;\n\t\tthis.baseTexture = null;\n\t\tthis.units = [];\n\t}\n\n\tbegin(): void {\n\t\tthis.index = 0;\n\t\tthis.baseTexture = null;\n\t}\n\n\tpush( texture: Texture, indexOffset: number ): void {\n\t\tif( this.index < this.units.length ) {\n\t\t\tconst unit = this.units[ this.index ];\n\t\t\tunit.texture = texture;\n\t\t\tunit.indexOffset = indexOffset;\n\t\t} else {\n\t\t\tthis.units.push( new EShapeBufferUnit( texture, indexOffset ) );\n\t\t}\n\t\tthis.index += 1;\n\t}\n\n\tend(): void {\n\t\tif( this.units.length !== this.index ) {\n\t\t\tthis.units.length = this.index;\n\t\t}\n\t}\n\n\tdestroy(): void {\n\t\tthis.units.length = 0;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer, DRAW_MODES, Geometry, Point, Renderer, Shader, Texture } from \"pixi.js\";\nimport { EShape } from \"./e-shape\";\nimport { EShapeBufferCount } from \"./e-shape-buffer-count\";\nimport { EShapeBufferUnitBuilder } from \"./e-shape-buffer-unit-builder\";\nimport { EShapeRendererIterator } from \"./e-shape-renderer-iterator\";\nimport { EShapeType } from \"./e-shape-type\";\nimport { EShapeUploaded } from \"./e-shape-uploaded\";\nimport { EShapeUploadeds } from \"./e-shape-uploadeds\";\n\nexport class EShapeBuffer {\n\tvertices: Float32Array;\n\tvertexCapacity: number;\n\tprotected vertexCount: number;\n\tvertexBuffer: Buffer;\n\n\tclippings: Float32Array;\n\tclippingBuffer: Buffer;\n\n\tsteps: Float32Array;\n\tstepBuffer: Buffer;\n\n\tantialiases: Float32Array;\n\tantialiasBuffer: Buffer;\n\n\tcolorFills: Float32Array;\n\tcolorFillBuffer: Buffer;\n\n\tcolorStrokes: Float32Array;\n\tcolorStrokeBuffer: Buffer;\n\n\tuvs: Float32Array;\n\tuvBuffer: Buffer;\n\n\tindices: Uint16Array | Uint32Array;\n\tindexCapacity: number;\n\tprotected indexCount: number;\n\tindexBuffer: Buffer;\n\n\tprotected renderer: Renderer;\n\tprotected geometry: Geometry;\n\n\tprotected builder: EShapeBufferUnitBuilder;\n\n\twork: Point;\n\tworkColor: Float32Array;\n\tworkStep: Float32Array;\n\tworkCount: EShapeBufferCount;\n\n\tconstructor( ntriangles: number, renderer: Renderer, shader: Shader ) {\n\t\tconst nindices = ntriangles * 3;\n\t\tconst nvertices = nindices;\n\n\t\tthis.vertices = new Float32Array( nvertices * 2 );\n\t\tthis.vertexCapacity = nvertices;\n\t\tthis.vertexCount = 0;\n\t\tthis.vertexBuffer = new Buffer( this.vertices, false, false );\n\n\t\tthis.clippings = new Float32Array( nvertices * 3 );\n\t\tthis.clippingBuffer = new Buffer( this.clippings, false, false );\n\n\t\tthis.steps = new Float32Array( nvertices * 2 );\n\t\tthis.stepBuffer = new Buffer( this.steps, false, false );\n\n\t\tthis.antialiases = new Float32Array( nvertices * 4 );\n\t\tthis.antialiasBuffer = new Buffer( this.antialiases, false, false );\n\n\t\tthis.colorFills = new Float32Array( nvertices * 4 );\n\t\tthis.colorFillBuffer = new Buffer( this.colorFills, false, false );\n\n\t\tthis.colorStrokes = new Float32Array( nvertices * 4 );\n\t\tthis.colorStrokeBuffer = new Buffer( this.colorStrokes, false, false );\n\n\t\tthis.uvs = new Float32Array( nvertices * 2 );\n\t\tthis.uvBuffer = new Buffer( this.uvs, false, false );\n\n\t\tconst isIndicesShort = ( nvertices <= 65535 );\n\t\tthis.indices = ( isIndicesShort ? new Uint16Array( nindices ) : new Uint32Array( nindices ) );\n\t\tthis.indexCapacity = ntriangles;\n\t\tthis.indexCount = 0;\n\t\tthis.indexBuffer = new Buffer( this.indices, false, true );\n\n\t\tthis.renderer = renderer;\n\n\t\tthis.builder = new EShapeBufferUnitBuilder();\n\n\t\tthis.work = new Point();\n\t\tthis.workColor = new Float32Array( 4 );\n\t\tthis.workStep = new Float32Array( 3 );\n\t\tthis.workCount = new EShapeBufferCount();\n\n\t\tthis.geometry = new Geometry()\n\t\t\t.addIndex( this.indexBuffer )\n\t\t\t.addAttribute( \"aPosition\", this.vertexBuffer, 2 )\n\t\t\t.addAttribute( \"aClipping\", this.clippingBuffer, 3 )\n\t\t\t.addAttribute( \"aStep\", this.stepBuffer, 2 )\n\t\t\t.addAttribute( \"aAntialias\", this.antialiasBuffer, 4 )\n\t\t\t.addAttribute( \"aColorFill\", this.colorFillBuffer, 4 )\n\t\t\t.addAttribute( \"aColorStroke\", this.colorStrokeBuffer, 4 )\n\t\t\t.addAttribute( \"aUv\", this.uvBuffer, 2 );\n\t}\n\n\trender( shader: Shader ): void {\n\t\tconst renderer = this.renderer;\n\t\t(renderer.geometry as any).bind( this.geometry );\n\n\t\tconst units = this.builder.units;\n\t\tconst unitCount = units.length;\n\t\tif( 0 < unitCount ) {\n\t\t\tconst type = DRAW_MODES.TRIANGLES;\n\n\t\t\tlet unit0 = null;\n\t\t\tlet unit1 = units[ 0 ];\n\t\t\tlet ioffset0 = 0;\n\t\t\tlet ioffset1 = unit1.indexOffset * 3;\n\t\t\tlet vcount = 0;\n\t\t\tlet texture = Texture.WHITE;\n\t\t\tfor( let i = 0, imax = unitCount - 1; i < imax; ++i ) {\n\t\t\t\tunit0 = unit1;\n\t\t\t\tunit1 = units[ i + 1 ];\n\t\t\t\tioffset0 = ioffset1;\n\t\t\t\tioffset1 = unit1.indexOffset * 3;\n\t\t\t\tvcount = ioffset1 - ioffset0;\n\t\t\t\ttexture = unit0.texture || Texture.WHITE;\n\t\t\t\tif( 0 < vcount && texture.valid ) {\n\t\t\t\t\tshader.uniforms.sampler = renderer.texture.bind( texture );\n\t\t\t\t\trenderer.geometry.draw( type, vcount, ioffset0 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvcount = this.indexCount * 3 - ioffset1;\n\t\t\ttexture = unit1.texture || Texture.WHITE;\n\t\t\tif( 0 < vcount && texture.valid ) {\n\t\t\t\tshader.uniforms.sampler = renderer.texture.bind( texture );\n\t\t\t\trenderer.geometry.draw( type, vcount, ioffset1 );\n\t\t\t}\n\t\t}\n\t}\n\n\tisCompatible( shape: EShape, uploaded: EShapeUploaded, vindex: number, iindex: number ): boolean {\n\t\treturn (\n\t\t\tuploaded.getBuffer() === this &&\n\t\t\tuploaded.getVertexOffset() === vindex &&\n\t\t\tuploaded.getIndexOffset() === iindex &&\n\t\t\tuploaded.isCompatible( shape )\n\t\t);\n\t}\n\n\tupdate( iterator: EShapeRendererIterator ): boolean {\n\t\tconst builder = this.builder;\n\t\tbuilder.begin();\n\n\t\tlet vindex = 0;\n\t\tlet iindex = 0;\n\t\tlet shape = iterator.get();\n\t\tfor( ; shape != null; shape = iterator.next() ) {\n\t\t\tconst uploaded = shape.uploaded;\n\t\t\tif( uploaded == null || ! this.isCompatible( shape, uploaded, vindex, iindex ) ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tuploaded.update( shape );\n\t\t\tuploaded.buildUnit( builder );\n\n\t\t\tvindex += uploaded.getVertexCount();\n\t\t\tiindex += uploaded.getIndexCount();\n\t\t}\n\n\t\tfor( ; shape != null; shape = iterator.next() ) {\n\t\t\tconst creater = EShapeUploadeds[ shape.type ] || EShapeUploadeds[ EShapeType.GROUP ];\n\t\t\tif( creater == null ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst uploaded = creater( this, shape, vindex, iindex );\n\t\t\tif( uploaded == null ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tuploaded.buildUnit( builder );\n\t\t\tvindex += uploaded.getVertexCount();\n\t\t\tiindex += uploaded.getIndexCount();\n\t\t}\n\n\t\tbuilder.end();\n\t\tthis.vertexCount = vindex;\n\t\tthis.indexCount = iindex;\n\n\t\treturn 0 < builder.units.length;\n\t}\n\n\tdestroy(): void {\n\t\tthis.geometry.destroy();\n\t\tthis.builder.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"./e-shape\";\n\nconst DUMMY_SHAPES: EShape[] = [];\n\nexport class EShapeRendererIteratorDatum {\n\tprotected index: number;\n\tprotected shapes: EShape[];\n\n\tconstructor() {\n\t\tthis.index = 0;\n\t\tthis.shapes = DUMMY_SHAPES;\n\t}\n\n\treset( shapes: EShape[] ) {\n\t\tthis.index = -1;\n\t\tthis.shapes = shapes;\n\t}\n\n\tnext(): EShape | null {\n\t\tconst index = this.index = this.index + 1;\n\t\tconst shapes = this.shapes;\n\t\tif( index < shapes.length ) {\n\t\t\treturn shapes[ index ];\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"./e-shape\";\nimport { EShapeRendererIteratorDatum } from \"./e-shape-renderer-iterator-datum\";\n\nexport class EShapeRendererIterator {\n\tprotected _index: number;\n\tprotected _data: EShapeRendererIteratorDatum[];\n\tprotected _datum: EShapeRendererIteratorDatum;\n\tprotected _current: EShape | null;\n\n\tconstructor() {\n\t\tthis._index = -1;\n\t\tthis._datum = new EShapeRendererIteratorDatum();\n\t\tthis._data = [ this._datum ];\n\t\tthis._current = null;\n\t}\n\n\treset( shapes: EShape[] ): EShape | null {\n\t\tthis._index = 0;\n\t\tconst current = this._datum = this._data[ 0 ];\n\t\tcurrent.reset( shapes );\n\t\tthis._current = null;\n\t\treturn this.next();\n\t}\n\n\tget(): EShape | null {\n\t\treturn this._current;\n\t}\n\n\tnext(): EShape | null {\n\t\tconst datum = this._datum;\n\t\tconst shape = datum.next();\n\t\tif( shape != null ) {\n\t\t\tthis._current = shape;\n\t\t\tconst children = shape.children;\n\t\t\tif( 0 < children.length ) {\n\t\t\t\tconst datumIndex = this._index = this._index + 1;\n\t\t\t\tconst data = this._data;\n\t\t\t\tif( datumIndex < data.length ) {\n\t\t\t\t\tconst newDatum = data[ datumIndex ];\n\t\t\t\t\tnewDatum.reset( children );\n\t\t\t\t\tthis._datum = newDatum;\n\t\t\t\t} else {\n\t\t\t\t\tconst newDatum = new EShapeRendererIteratorDatum();\n\t\t\t\t\tdata.push( newDatum );\n\t\t\t\t\tnewDatum.reset( children );\n\t\t\t\t\tthis._datum = newDatum;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn shape;\n\t\t} else {\n\t\t\tconst datumIndex = this._index = this._index - 1;\n\t\t\tconst data = this._data;\n\t\t\tif( 0 <= datumIndex ) {\n\t\t\t\tthis._datum = data[ datumIndex ];\n\t\t\t\tthis._current = null;\n\t\t\t\treturn this.next();\n\t\t\t} else {\n\t\t\t\tthis._current = null;\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { BaseTexture, BLEND_MODES, ObjectRenderer, Renderer, Shader, Texture, utils } from \"pixi.js\";\nimport { DynamicAtlas } from \"../util/dynamic-atlas\";\nimport { DynamicAtlasItemImage } from \"../util/dynamic-atlas-item-image\";\nimport { DynamicSDFFontAtlases } from \"../util/dynamic-sdf-font-atlases\";\nimport { EShape } from \"./e-shape\";\nimport { EShapeBuffer } from \"./e-shape-buffer\";\nimport { EShapeContainer } from \"./e-shape-container\";\nimport { EShapeDefaults } from \"./e-shape-defaults\";\nimport { EShapeRendererIterator } from \"./e-shape-renderer-iterator\";\n\nconst VERTEX_SHADER = `\nattribute vec2 aPosition;\nattribute vec3 aClipping;\nattribute vec2 aStep;\nattribute vec4 aAntialias;\nattribute vec4 aColorFill;\nattribute vec4 aColorStroke;\nattribute vec2 aUv;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mediump float pixelScale;\nuniform mediump float antialiasWeight;\n\nvarying mediump vec3 vClipping;\nvarying mediump vec2 vStep;\nvarying mediump vec4 vAntialias;\nvarying mediump vec4 vColorFill;\nvarying mediump vec4 vColorStroke;\nvarying mediump vec2 vUv;\n\nvec2 toInverse( in vec2 v ) {\n\treturn vec2( -v.y, v.x );\n}\n\nvec2 toTransformedPosition( in vec2 v ) {\n\treturn (projectionMatrix * translationMatrix * vec3(v, 1.0)).xy;\n}\n\nvec4 toAntialias01( in vec4 antialias, in float scale ) {\n\t// Taylor series of 1 / ( 1 - a ) = 1 + a + a^2 + ....\n\treturn 1.0 + min( vec4( 1.0 ), antialias * scale );\n}\n\nvec4 toAntialias2( in vec2 step, in vec4 antialias, in float scale ) {\n\tfloat x = min( 0.4, step.x * scale );\n\tfloat y = 0.5 - antialias.x;\n\tfloat z = 0.5 - antialias.x - step.y;\n\treturn vec4( y, z, y - max( 0.01, y - x ), z - max( 0.01, z - x ) );\n}\n\nvec2 toPosition3456( in float type, in vec2 p, in vec2 pprev, in vec2 pnext, in float strokeWidth, out float shift ) {\n\tvec2 d0 = p - pprev;\n\tvec2 d1 = pnext - p;\n\tfloat l0 = dot( d0, d0 );\n\tfloat l1 = dot( d1, d1 );\n\tvec2 nd0 = normalize( toInverse( d0 ) );\n\tvec2 nd1 = normalize( toInverse( d1 ) );\n\tvec2 n0 = 0.00001 < l0 ? nd0 : nd1;\n\tvec2 n1 = 0.00001 < l1 ? nd1 : nd0;\n\tvec2 n0i = toInverse( n0 );\n\tvec2 n1i = toInverse( n1 );\n\tfloat direction = sign( 4.5 - type );\n\n\t// Offset\n\tfloat cross = dot( n0i, n1 );\n\tfloat crossInverse = ( 0.00001 < abs( cross ) ? 1.0 / cross : 0.0 );\n\tfloat b = dot(n1 - n0, n0) * crossInverse;\n\tfloat offsetSize = direction * strokeWidth * 0.5;\n\tvec2 offset = n1 + n1i * b;\n\n\t// Miter\n\tvec2 pmiter = p + offsetSize * offset;\n\tfloat miterAngle0 = dot( n0i, pmiter - pprev );\n\tfloat miterAngle1 = dot( n1i, pmiter - pnext );\n\tfloat miterLength = dot( offset, offset );\n\tfloat miterSide = direction * cross;\n\n\t// Bevel\n\tvec2 n = ( type == 4.0 || type == 6.0 ? n1 : n0 );\n\tvec2 pbevel = p + offsetSize * n;\n\n\t//\n\tvec2 presult = (\n\t\t0.0 <= miterAngle0 || miterAngle1 < 0.0 || miterSide < 0.0 ?\n\t\tpbevel : pmiter\n\t);\n\t/*\n\tvec2 presult = (\n\t\tmiterAngle0 < 0.0 && 0.0 <= miterAngle1 && miterLength < 50.0 ?\n\t\tpmiter : pbevel\n\t);\n\t*/\n\tvec2 ni = ( type == 4.0 || type == 6.0 ? n1i : n0i );\n\tshift = dot( ni, p - presult );\n\treturn toTransformedPosition( presult );\n}\n\nvec2 toStep3456( in float type ) {\n\treturn ( type < 4.5 ? vec2( 1.0, 0.0 ) : vec2( 0.0, 1.0 ) );\n}\n\nvec4 toAntialias3456( in float strokeWidth, in float scale ) {\n\tfloat a = antialiasWeight / max( 0.0001, strokeWidth );\n\treturn toAntialias01( vec4( a, a, a, a ), scale );\n}\n\nfloat toDotAndDashScale( in float scale, in float strokeWidthScale ) {\n\treturn (\n\t\tscale == 4.0 || scale == 5.0 || scale == 6.0 || scale == 7.0 ?\n\t\tstrokeWidthScale : 1.0\n\t);\n}\n\nvec4 toColorStroke3456( in float shift, in float scale ) {\n\tfloat x = aColorFill.x + shift;\n\tfloat y = scale * aColorFill.y;\n\tfloat z = scale * aColorFill.z;\n\tfloat w = aColorFill.w;\n\treturn vec4( x, y, z, w );\n}\n\nfloat toStrokeWidthScale( in float scale ) {\n\treturn (\n\t\tscale == 3.0 || scale == 7.0 ?\n\t\tpixelScale : (\n\t\t\tscale == 1.0 || scale == 5.0 ?\n\t\t\tmin( 1.0, pixelScale ) : (\n\t\t\t\tscale == 2.0 || scale == 6.0 ?\n\t\t\t\tmax( 1.0, pixelScale ) : 1.0\n\t\t\t)\n\t\t)\n\t);\n}\n\nvoid main(void) {\n\tvec2 p012 = toTransformedPosition( aPosition );\n\n\tfloat type = aClipping.z;\n\n\t// type === 0 or 1\n\tvec4 a01 = toAntialias01( aAntialias, pixelScale );\n\n\t// type === 2\n\tvec4 a2 = toAntialias2( aStep, aAntialias, pixelScale );\n\n\t// type === 3, 4, 5 or 6\n\tfloat shift3456 = 0.0;\n\tfloat strokeWidthScale = toStrokeWidthScale( aStep.y );\n\tfloat strokeWidth = strokeWidthScale * aStep.x;\n\tvec2 p3456 = toPosition3456( type, aPosition, aAntialias.xy, aAntialias.zw, strokeWidth, shift3456 );\n\tvec2 step3456 = toStep3456( type );\n\tvec4 a3456 = toAntialias3456( strokeWidth, pixelScale );\n\tvec4 colorStroke3456 = toColorStroke3456( shift3456, toDotAndDashScale( aStep.y, strokeWidthScale ) );\n\n\t//\n\tgl_Position = vec4( ( 2.5 < type ? p3456 : p012 ), 0.0, 1.0 );\n\tvAntialias = ( 1.5 < type ? ( 2.5 < type ? a3456 : a2 ) : a01 );\n\tvClipping = aClipping;\n\tvStep = ( 2.5 < type ? step3456 : aStep );\n\tvColorFill = ( 2.5 < type ? aColorStroke : aColorFill );\n\tvColorStroke = ( 2.5 < type ? colorStroke3456 : aColorStroke );\n\tvUv = aUv;\n}`;\n\nconst FRAGMENT_SHADER_NO_AA = `\nvarying mediump vec3 vClipping;\nvarying mediump vec2 vStep;\nvarying mediump vec4 vAntialias;\nvarying mediump vec4 vColorFill;\nvarying mediump vec4 vColorStroke;\nvarying mediump vec2 vUv;\n\nuniform sampler2D sampler;\nuniform mediump float pixelScale;\n\nvoid main(void) {\n\tvec4 texture = texture2D(sampler, vUv);\n\tfloat type = vClipping.z;\n\tvec2 v0 = vStep;\n\tvec2 v1 = vClipping.xy;\n\tvec2 v2 = v0 * vAntialias.xy;\n\tvec2 v3 = v1 * vAntialias.zw;\n\tvec4 d0 = vec4( max( v0.x, v0.y ), max( v1.x, v1.y ), max( v2.x, v2.y ), max( v3.x, v3.y ) );\n\tvec4 d1 = vec4( dot( v0, v0 ), dot( v1, v1 ), dot( v2, v2 ), dot( v3, v3 ) );\n\tvec4 d = ( type == 1.0 ? d1 : d0 );\n\tvec2 s = step( vec2( 1.0 ), d.xy );\n\tvec4 color01 = texture * (vColorStroke * (s.x - s.y) + vColorFill * (1.0 - s.x));\n\n\tfloat l = vColorStroke.x;\n\tfloat lp0 = vColorStroke.y;\n\tfloat lp1 = vColorStroke.z;\n\tfloat lt = vColorStroke.w;\n\tfloat lm = mod( l, lp0 + lp1 );\n\tfloat ls0 = step( 0.0, lm );\n\tfloat ls1 = step( lp0, lm );\n\tfloat ls2 = ( 0.0 <= lt ? 1.0 - step( lt, l ) : 1.0 );\n\tvec4 color3456 = color01 * ( ls0 - ls1 ) * ls2;\n\n\tvec2 a0 = vAntialias.xy;\n\tvec2 a1 = vAntialias.zw;\n\tvec2 a2 = vec2( texture.a );\n\tvec2 a = smoothstep( a0 - a1, a0 + a1, a2 );\n\tvec4 color2 = a.x * vColorFill + ( a.y - a.x ) * vColorStroke;\n\tgl_FragColor = ( type == 2.0 ? color2 : (2.5 < type ? color3456 : color01) );\n}`;\n\nconst FRAGMENT_SHADER = `\nvarying mediump vec3 vClipping;\nvarying mediump vec2 vStep;\nvarying mediump vec4 vAntialias;\nvarying mediump vec4 vColorFill;\nvarying mediump vec4 vColorStroke;\nvarying mediump vec2 vUv;\n\nuniform sampler2D sampler;\nuniform mediump float pixelScale;\n\nvoid main(void) {\n\tvec4 texture = texture2D(sampler, vUv);\n\tfloat type = vClipping.z;\n\tvec2 v0 = vStep;\n\tvec2 v1 = vClipping.xy;\n\tvec2 v2 = v0 * vAntialias.xy;\n\tvec2 v3 = v1 * vAntialias.zw;\n\tvec4 d0 = vec4( max( v0.x, v0.y ), max( v1.x, v1.y ), max( v2.x, v2.y ), max( v3.x, v3.y ) );\n\tvec4 d1 = vec4( dot( v0, v0 ), dot( v1, v1 ), dot( v2, v2 ), dot( v3, v3 ) );\n\tvec4 d = ( type == 1.0 ? d1 : d0 );\n\tvec2 s = smoothstep( 1.0 - (d.zw - d.xy), vec2( 1.0 ), d.xy );\n\tvec4 color01 = texture * (vColorStroke * (s.x - s.y) + vColorFill * (1.0 - s.x));\n\n\tfloat l = vColorStroke.x;\n\tfloat lp0 = vColorStroke.y;\n\tfloat lp1 = vColorStroke.z;\n\tfloat lt = vColorStroke.w;\n\tfloat ld = 0.5 * pixelScale;\n\tfloat lm = mod( l, lp0 + lp1 );\n\tfloat ls0 = smoothstep( 0.0, 0.0 + ld, lm );\n\tfloat ls1 = smoothstep( lp0, lp0 + ld, lm );\n\tfloat ls2 = ( 0.0 <= lt ? 1.0 - smoothstep( lt - ld, lt, l ) : 1.0 );\n\tvec4 color3456 = color01 * ( ls0 - ls1 ) * ls2;\n\n\tvec2 a0 = vAntialias.xy;\n\tvec2 a1 = vAntialias.zw;\n\tvec2 a2 = vec2( texture.a );\n\tvec2 a = smoothstep( a0 - a1, a0 + a1, a2 );\n\tvec4 color2 = a.x * vColorFill + ( a.y - a.x ) * vColorStroke;\n\tgl_FragColor = ( type == 2.0 ? color2 : (2.5 < type ? color3456 : color01) );\n}`;\n\nexport class EShapeRenderer extends ObjectRenderer {\n\tprotected _shader: Shader | null;\n\tprotected _iterator: EShapeRendererIterator;\n\tprotected _bufferSize: number;\n\tprotected _bufferSizeMax: number;\n\n\tconstructor( renderer: Renderer ) {\n\t\tsuper( renderer );\n\t\tthis._shader = Shader.from( VERTEX_SHADER, FRAGMENT_SHADER );\n\t\tthis._iterator = new EShapeRendererIterator();\n\t\tthis._bufferSize = 5000;\n\t\tthis._bufferSizeMax = this.getBufferSizeMax( renderer );\n\t}\n\n\tprotected getBufferSizeMax( renderer: Renderer ): number {\n\t\tconst context = renderer.context;\n\t\tconst extensions = context.extensions as any;\n\t\tif( 1 < context.webGLVersion || !! extensions.uint32ElementIndex ) {\n\t\t\treturn 1431655765; // 2^32 / 3\n\t\t}\n\t\treturn 21845; // 2^16 / 3\n\t}\n\n\tupdateAtlas(\n\t\tshape: EShape,\n\t\tatlas: DynamicAtlas, fontAtlases: DynamicSDFFontAtlases,\n\t\tdefaultTexture: Texture, baseTexture: BaseTexture\n\t): void {\n\t\t// Texture\n\t\t// Do not access the shape.image.src here.\n\t\t// It slows down the rendering speed significantly.\n\t\tconst imageSrc = shape.imageSrc;\n\t\tif( imageSrc != null ) {\n\t\t\tconst textureItem = atlas.get( imageSrc );\n\t\t\tif( textureItem != null ) {\n\t\t\t\tshape.texture = textureItem.texture;\n\t\t\t} else {\n\t\t\t\tconst newTextureItem = new DynamicAtlasItemImage( shape.image!, baseTexture );\n\t\t\t\tshape.texture = newTextureItem.texture;\n\t\t\t\tatlas.set( newTextureItem.id, newTextureItem );\n\t\t\t}\n\t\t} else {\n\t\t\tshape.texture = defaultTexture;\n\t\t}\n\n\t\t// Font texture atlas\n\t\tconst text = shape.text;\n\t\tconst textValue = text.value;\n\t\tif( 0 < textValue.length ) {\n\t\t\tfontAtlases.add( text.family, textValue );\n\t\t}\n\t}\n\n\tupdateAtlases(\n\t\tshapes: EShape[],\n\t\tatlas: DynamicAtlas, fontAtlases: DynamicSDFFontAtlases,\n\t\tdefaultTexture: Texture, baseTexture: BaseTexture\n\t): void {\n\t\tfor( let i = 0, imax = shapes.length; i < imax; ++i ) {\n\t\t\tconst shape = shapes[ i ];\n\t\t\tthis.updateAtlas( shape, atlas, fontAtlases, defaultTexture, baseTexture );\n\t\t\tconst children = shape.children;\n\t\t\tfor( let j = 0, jmax = children.length; j < jmax; ++j ) {\n\t\t\t\tconst child = children[ j ];\n\t\t\t\tthis.updateAtlas( child, atlas, fontAtlases, defaultTexture, baseTexture );\n\t\t\t\tthis.updateAtlases( child.children, atlas, fontAtlases, defaultTexture, baseTexture );\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateFontAtlas(\n\t\tshape: EShape,\n\t\tatlas: DynamicAtlas, fontAtlases: DynamicSDFFontAtlases,\n\t\tdefaultTexture: Texture\n\t): void {\n\t\tconst text = shape.text;\n\t\tconst fontAtlas = fontAtlases.get( text.family );\n\t\tif( fontAtlas != null ) {\n\t\t\tconst textureItem = atlas.get( fontAtlas.id );\n\t\t\tif( textureItem != null ) {\n\t\t\t\ttext.atlas = fontAtlas;\n\t\t\t\ttext.texture = textureItem.texture;\n\t\t\t} else {\n\t\t\t\ttext.atlas = undefined;\n\t\t\t\ttext.texture = defaultTexture;\n\t\t\t}\n\t\t} else {\n\t\t\ttext.atlas = undefined;\n\t\t\ttext.texture = defaultTexture;\n\t\t}\n\t}\n\n\tupdateFontAtlases(\n\t\tshapes: EShape[],\n\t\tatlas: DynamicAtlas, fontAtlases: DynamicSDFFontAtlases,\n\t\tdefaultTexture: Texture\n\t): void {\n\t\tfor( let i = 0, imax = shapes.length; i < imax; ++i ) {\n\t\t\tconst shape = shapes[ i ];\n\t\t\tthis.updateFontAtlas( shape, atlas, fontAtlases, defaultTexture );\n\t\t\tconst children = shape.children;\n\t\t\tfor( let j = 0, jmax = children.length; j < jmax; ++j ) {\n\t\t\t\tconst child = children[ j ];\n\t\t\t\tthis.updateFontAtlas( child, atlas, fontAtlases, defaultTexture );\n\t\t\t\tthis.updateFontAtlases( child.children, atlas, fontAtlases, defaultTexture );\n\t\t\t}\n\t\t}\n\t}\n\n\trender_(\n\t\tcontainer: EShapeContainer, shapes: EShape[], atlas: DynamicAtlas,\n\t\tfontAtlases: DynamicSDFFontAtlases, isDirty: boolean,\n\t\tbuffers: EShapeBuffer[]\n\t): void {\n\t\tconst renderer = this.renderer;\n\t\tconst shader = this._shader;\n\n\t\tif( shader != null && 0 < shapes.length ) {\n\t\t\t// Update textures\n\t\t\tif( isDirty ) {\n\t\t\t\t// Atlases\n\t\t\t\tatlas.begin();\n\t\t\t\tfontAtlases.begin();\n\t\t\t\tconst defaultTexture = atlas.getDefaultTexture();\n\t\t\t\tconst baseTexture: BaseTexture = atlas.getBaseTexture();\n\t\t\t\tthis.updateAtlases( shapes, atlas, fontAtlases, defaultTexture, baseTexture );\n\t\t\t\tfontAtlases.end();\n\t\t\t\tfontAtlases.update( atlas );\n\t\t\t\tthis.updateFontAtlases( shapes, atlas, fontAtlases, defaultTexture );\n\t\t\t\tatlas.end();\n\t\t\t\tatlas.repack();\n\n\t\t\t\t// Update buffers\n\t\t\t\tthis.updateBuffers( shapes, buffers, renderer, shader );\n\t\t\t}\n\n\t\t\t// Render buffers\n\t\t\tshader.uniforms.pixelScale = container.getPixelScale();\n\t\t\tshader.uniforms.antialiasWeight = EShapeDefaults.ANTIALIAS_WEIGHT;\n\t\t\tshader.uniforms.translationMatrix = container.worldTransform.toArray( true );\n\t\t\trenderer.shader.bind( shader, false );\n\t\t\trenderer.state!.setBlendMode(utils.correctBlendMode(BLEND_MODES.NORMAL, true));\n\t\t\tfor( let i = 0, imax = buffers.length; i < imax; ++i ) {\n\t\t\t\tbuffers[ i ].render( shader );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected increaseBufferSize(): boolean {\n\t\tconst bufferSize = this._bufferSize;\n\t\tconst bufferSizeMax = this._bufferSizeMax;\n\t\tif( bufferSize < bufferSizeMax ) {\n\t\t\tthis._bufferSize = Math.min( bufferSizeMax, bufferSize << 1 );\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected getBufferSize(): number {\n\t\treturn this._bufferSize;\n\t}\n\n\tupdateBuffers(\n\t\tshapes: EShape[], buffers: EShapeBuffer[], renderer: Renderer, shader: Shader\n\t): void {\n\t\tconst iterator = this._iterator;\n\t\titerator.reset( shapes );\n\t\tlet ib = 0;\n\t\tconst ibmax = buffers.length;\n\t\tfor( ; iterator.get() != null && ib < ibmax; ++ib ) {\n\t\t\tif( ! buffers[ ib ].update( iterator ) ) {\n\t\t\t\t// Failed to update the shapes.\n\t\t\t\t// This is most likely caused by small buffers.\n\t\t\t\t// So increase the buffer size.\n\t\t\t\tthis.increaseBufferSize();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif( ib < ibmax ) {\n\t\t\tfor( let jb = ib; jb < ibmax; ++jb ) {\n\t\t\t\tbuffers[ jb ].destroy();\n\t\t\t}\n\t\t\tbuffers.length = ib;\n\t\t}\n\n\t\twhile( iterator.get() != null ) {\n\t\t\tconst buffer = new EShapeBuffer( this.getBufferSize(), renderer, shader );\n\t\t\tif( buffer.update( iterator ) ) {\n\t\t\t\tbuffers.push( buffer );\n\t\t\t} else {\n\t\t\t\tbuffer.destroy();\n\n\t\t\t\t// Again, increase the buffer size;\n\t\t\t\tif( ! this.increaseBufferSize() ) {\n\t\t\t\t\t// No way to render\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, IPoint, Point, Renderer } from \"pixi.js\";\nimport { DynamicAtlas } from \"../util/dynamic-atlas\";\nimport { DynamicSDFFontAtlases } from \"../util/dynamic-sdf-font-atlases\";\nimport { EShape } from \"./e-shape\";\nimport { EShapeBuffer } from \"./e-shape-buffer\";\nimport \"./e-shape-renderer\";\nimport { EShapeRenderer } from \"./e-shape-renderer\";\n\nexport class EShapeContainer extends DisplayObject {\n\tstatic SHAPE_RENDERER: EShapeRenderer | null = null;\n\n\treadonly children: EShape[];\n\tprotected _childrenId: number;\n\tprotected _childrenIdRendered: number;\n\n\tprotected _atlas: DynamicAtlas;\n\tprotected _fontAtlases: DynamicSDFFontAtlases;\n\n\tprotected _pixelScale: number;\n\tprotected _pixelScaleId: number;\n\n\tprotected _work: Point;\n\n\tprotected _buffers: EShapeBuffer[];\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.children = [];\n\n\t\tthis._childrenId = 0;\n\t\tthis._childrenIdRendered = -1;\n\n\t\tthis._atlas = new DynamicAtlas();\n\t\tthis._fontAtlases = new DynamicSDFFontAtlases();\n\n\t\tthis._pixelScale = 1;\n\t\tthis._pixelScaleId = NaN;\n\n\t\tthis._work = new Point();\n\n\t\tthis._buffers = [];\n\t}\n\n\tcalculateBounds(): void {\n\t\tthis._bounds.clear();\n\t}\n\n\tonChildTransformChange(): void {\n\t\t// DO NOTHING\n\t}\n\n\ttoDirty(): number {\n\t\treturn this._childrenId += 1;\n\t}\n\n\tisDirty(): boolean {\n\t\treturn this._childrenIdRendered < this._childrenId;\n\t}\n\n\trender( renderer: Renderer ): void {\n\t\tif( !this.visible || this.worldAlpha <= 0 || !this.renderable ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst childrenId = this._childrenId;\n\t\tconst childrenIdRendered = this._childrenIdRendered;\n\t\tthis._childrenIdRendered = childrenId;\n\n\t\tlet shapeRenderer: EShapeRenderer | null = EShapeContainer.SHAPE_RENDERER;\n\t\tif( shapeRenderer == null ) {\n\t\t\tshapeRenderer = EShapeContainer.SHAPE_RENDERER = new EShapeRenderer( renderer );\n\t\t}\n\t\trenderer.batch.setObjectRenderer( shapeRenderer );\n\t\tshapeRenderer.render_(\n\t\t\tthis, this.children, this._atlas, this._fontAtlases,\n\t\t\tchildrenIdRendered < childrenId, this._buffers\n\t\t);\n\t}\n\n\tcontainsPoint( point: Point ): boolean {\n\t\treturn false;\n\t}\n\n\tgetPixelScale(): number {\n\t\tthis.updateTransform();\n\t\tconst transform = this.transform;\n\t\tconst worldID = (transform as any)._worldID;\n\t\tif( worldID !== this._pixelScaleId ) {\n\t\t\tthis._pixelScaleId = worldID;\n\t\t\tconst worldTransform = transform.worldTransform;\n\t\t\tconst a = worldTransform.a;\n\t\t\tconst b = worldTransform.b;\n\t\t\tconst scale = Math.sqrt( a * a + b * b );\n\t\t\tconst dpr = window.devicePixelRatio || 1;\n\t\t\tthis._pixelScale = 1 / ( dpr * scale );\n\t\t}\n\t\treturn this._pixelScale;\n\t}\n\n\thitTest( global: IPoint, handler?: ( shape: EShape ) => boolean ): EShape | null {\n\t\tconst work = this._work;\n\t\tconst children = this.children;\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child.visible ) {\n\t\t\t\tconst childLocal = child.toLocal( global, undefined, work );\n\t\t\t\tconst childResult = child.contains( childLocal );\n\t\t\t\tif( childResult != null ) {\n\t\t\t\t\tif( handler == null || handler( childResult ) ) {\n\t\t\t\t\t\treturn childResult;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\thitTestBBox( global: IPoint, handler?: ( shape: EShape ) => boolean ): EShape | null {\n\t\tconst work = this._work;\n\t\tconst children = this.children;\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child.visible ) {\n\t\t\t\tconst childLocal = child.toLocal( global, undefined, work );\n\t\t\t\tif( child.containsBBox( childLocal ) ) {\n\t\t\t\t\tif( handler == null || handler( child ) ) {\n\t\t\t\t\t\treturn child;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tdestroy(): void {\n\t\t// Buffer\n\t\tconst buffers = this._buffers;\n\t\tif( buffers != null ) {\n\t\t\tfor( let i = 0, imax = buffers.length; i < imax; ++i ) {\n\t\t\t\tbuffers[ i ].destroy();\n\t\t\t}\n\t\t}\n\t\tthis._buffers.length = 0;\n\n\t\t// Shapes\n\t\tconst children = this.children;\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\tchildren[ i ].destroy();\n\t\t}\n\t\tchildren.length = 0;\n\n\t\t//\n\t\tsuper.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"./e-shape\";\nimport { EShapeContainer } from \"./e-shape-container\";\nimport { EShapeType } from \"./e-shape-type\";\nimport { EShapeBase } from \"./variant/e-shape-base\";\n\nexport class EShapeSearch {\n\tstatic COMPARATOR_INDEX = ( a: EShape, b: EShape ): number => {\n\t\treturn a.index - b.index;\n\t}\n\n\tstatic toIndices( shapes: EShape[] ): number[] {\n\t\tconst result = [];\n\t\tfor( let i = 0, imax = shapes.length; i < imax; ++i ) {\n\t\t\tresult.push( shapes[ i ].index );\n\t\t}\n\t\treturn result;\n\t}\n\n\tstatic toDepth( shape: EShape ): number {\n\t\tlet result = 0;\n\t\tlet parent = shape.parent;\n\t\twhile( parent instanceof EShapeBase ) {\n\t\t\tresult += 1;\n\t\t\tparent = parent.parent;\n\t\t}\n\t\treturn result;\n\t}\n\n\tstatic toSharedParent( first: EShape, shape: EShape ): EShape | EShapeContainer {\n\t\tconst depthA = this.toDepth( first );\n\t\tconst depthB = this.toDepth( shape );\n\t\tif( depthA < depthB ) {\n\t\t\tlet parent = first.parent;\n\t\t\twhile( parent instanceof EShapeBase ) {\n\t\t\t\tif( this.isParent( shape, parent ) ) {\n\t\t\t\t\treturn parent;\n\t\t\t\t}\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\t\t\treturn parent!;\n\t\t} else {\n\t\t\tlet parent = shape.parent;\n\t\t\twhile( parent instanceof EShapeBase ) {\n\t\t\t\tif( this.isParent( first, parent ) ) {\n\t\t\t\t\treturn parent;\n\t\t\t\t}\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\t\t\treturn parent!;\n\t\t}\n\t}\n\n\tstatic toOfParent( shape: EShape, parent: EShape | EShapeContainer ) {\n\t\tlet shapeParent = shape.parent;\n\t\twhile( shapeParent !== parent && shapeParent instanceof EShapeBase ) {\n\t\t\tshape = shapeParent;\n\t\t\tshapeParent = shapeParent.parent;\n\t\t}\n\t\treturn shape;\n\t}\n\n\tstatic isParent( shape: EShape, target: EShape | null ): boolean {\n\t\tlet parent = shape.parent;\n\t\twhile( parent instanceof EShapeBase ) {\n\t\t\tif( parent === target ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tparent = parent.parent;\n\t\t}\n\t\treturn false;\n\t}\n\n\tstatic toSelected( shape: EShape ): EShape | null {\n\t\tlet target: EShape | EShapeContainer | null = shape;\n\t\twhile( target instanceof EShapeBase ) {\n\t\t\tif( target.selected ) {\n\t\t\t\treturn target;\n\t\t\t}\n\t\t\ttarget = target.parent;\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic findChildById( shape: { children: EShape[] }, id: string, recursively?: boolean ): EShape | null {\n\t\tconst children = shape.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child.id === id ) {\n\t\t\t\treturn child;\n\t\t\t}\n\t\t\tif( recursively === true ) {\n\t\t\t\tconst result = EShapeSearch.findChildById( child, id, recursively );\n\t\t\t\tif( result != null ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic findChildByType( shape: { children: EShape[] }, type: EShapeType, recursively?: boolean ): EShape | null {\n\t\tconst children = shape.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child.type === type ) {\n\t\t\t\treturn child;\n\t\t\t}\n\t\t\tif( recursively === true ) {\n\t\t\t\tconst result = EShapeSearch.findChildByType( child, type, recursively );\n\t\t\t\tif( result != null ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic findChild(\n\t\tshape: { children: EShape[] }, matcher: ( shape: EShape ) => boolean, recursively?: boolean\n\t): EShape | null {\n\t\tconst children = shape.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( matcher( child ) ) {\n\t\t\t\treturn child;\n\t\t\t}\n\t\t\tif( recursively === true ) {\n\t\t\t\tconst result = EShapeSearch.findChild( child, matcher, recursively );\n\t\t\t\tif( result != null ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic findChildrenByType(\n\t\tshape: { children: EShape[] }, type: EShapeType, recursively?: boolean, result?: EShape[]\n\t): EShape[] {\n\t\tresult = result || [];\n\t\tconst children = shape.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child.type === type ) {\n\t\t\t\tresult.push( child );\n\t\t\t}\n\t\t\tif( recursively === true ) {\n\t\t\t\tEShapeSearch.findChildrenByType( child, type, recursively, result );\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tstatic findChildren(\n\t\tshape: { children: EShape[] }, matcher: ( shape: EShape ) => boolean, recursively?: boolean, result?: EShape[]\n\t): EShape[] {\n\t\tresult = result || [];\n\t\tconst children = shape.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( matcher( child ) ) {\n\t\t\t\tresult.push( child );\n\t\t\t}\n\t\t\tif( recursively === true ) {\n\t\t\t\tEShapeSearch.findChildren( child, matcher, recursively, result );\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"./e-shape\";\nimport { EShapeContainer } from \"./e-shape-container\";\nimport { EShapeSearch } from \"./e-shape-search\";\n\nexport class EShapeDeleter {\n\tstatic delete(\n\t\tparent: EShape | EShapeContainer, shapes?: EShape[], generateListOfDetachedShapes?: boolean\n\t): EShape[] | null {\n\t\tconst children = parent.children;\n\t\tconst length = children.length;\n\n\t\t// Update indices\n\t\tfor( let i = 0; i < length; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child.selected ) {\n\t\t\t\tchild.index = length + i;\n\t\t\t} else {\n\t\t\t\tchild.index = i;\n\t\t\t}\n\t\t}\n\n\t\t// Sort\n\t\tchildren.sort( EShapeSearch.COMPARATOR_INDEX );\n\n\t\t// Detach\n\t\tif( generateListOfDetachedShapes === true ) {\n\t\t\tfor( let i = length - 1; 0 <= i; --i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child.selected ) {\n\t\t\t\t\tchild.index -= length;\n\t\t\t\t\tchild.parent = null;\n\t\t\t\t\tchild.selected = false;\n\t\t\t\t\tchild.uploaded = undefined;\n\t\t\t\t} else {\n\t\t\t\t\tconst size = children.length - (i + 1);\n\t\t\t\t\tif( 0 < size ) {\n\t\t\t\t\t\tconst result = children.splice( i + 1, size );\n\t\t\t\t\t\tif( shapes != null ) {\n\t\t\t\t\t\t\tshapes.length = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparent.onChildTransformChange();\n\t\t\t\t\t\tparent.toDirty();\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif( shapes != null ) {\n\t\t\t\t\t\t\tshapes.length = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( 0 < children.length ) {\n\t\t\t\tconst result = children.splice( 0, children.length );\n\t\t\t\tif( shapes != null ) {\n\t\t\t\t\tshapes.length = 0;\n\t\t\t\t}\n\t\t\t\tparent.onChildTransformChange();\n\t\t\t\tparent.toDirty();\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\tif( shapes != null ) {\n\t\t\t\t\tshapes.length = 0;\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else {\n\t\t\tfor( let i = length - 1; 0 <= i; --i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child.selected ) {\n\t\t\t\t\tchild.parent = null;\n\t\t\t\t\tchild.selected = false;\n\t\t\t\t\tchild.uploaded = undefined;\n\t\t\t\t} else {\n\t\t\t\t\tchildren.length = i + 1;\n\t\t\t\t\tif( shapes != null ) {\n\t\t\t\t\t\tshapes.length = 0;\n\t\t\t\t\t}\n\t\t\t\t\tparent.onChildTransformChange();\n\t\t\t\t\tparent.toDirty();\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( 0 < children.length ) {\n\t\t\t\tchildren.length = 0;\n\t\t\t\tif( shapes != null ) {\n\t\t\t\t\tshapes.length = 0;\n\t\t\t\t}\n\t\t\t\tparent.onChildTransformChange();\n\t\t\t\tparent.toDirty();\n\t\t\t} else {\n\t\t\t\tif( shapes != null ) {\n\t\t\t\t\tshapes.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class EShapeResourceManagerSerialization {\n\tprotected resources: string[];\n\tprotected resourceToIndex: Map<string, number>;\n\n\tconstructor() {\n\t\tthis.resources = [];\n\t\tthis.resourceToIndex = new Map<string, number>();\n\t}\n\n\tadd( resource: string ): number {\n\t\tconst resources = this.resources;\n\t\tconst resourceToIndex = this.resourceToIndex;\n\t\tconst result = resourceToIndex.get( resource );\n\t\tif( result != null ) {\n\t\t\treturn result;\n\t\t}\n\t\tconst index = resources.length;\n\t\tresources.push( resource );\n\t\tresourceToIndex.set( resource, index );\n\t\treturn index;\n\t}\n\n\tserialize(): string[] {\n\t\treturn this.resources;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"./e-shape\";\nimport { EShapeRuntime } from \"./e-shape-runtime\";\n\nexport const EShapeRuntimes: {\n\t[ type: number ]: (new ( shape: EShape ) => EShapeRuntime) | undefined\n} = {};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartAxisPosition, DChartAxisTickPosition } from \"../../d-chart-axis\";\nimport { DThemeChartAxisBase } from \"../../d-chart-axis-base-options\";\nimport { EShapePointsStyle } from \"../../shape\";\nimport { EShapeTextAlignHorizontal } from \"../../shape/e-shape-text-align-horizontal\";\nimport { EShapeTextAlignVertical } from \"../../shape/e-shape-text-align-vertical\";\nimport { EShapeTextDirection } from \"../../shape/e-shape-text-direction\";\n\nexport class DThemeWhiteChartAxisBase implements DThemeChartAxisBase {\n\tgetPosition(): DChartAxisPosition {\n\t\treturn DChartAxisPosition.BOTTOM;\n\t}\n\n\tgetPadding(): number {\n\t\treturn 75;\n\t}\n\n\tgetLabelAlignHorizontal( position: DChartAxisPosition ): EShapeTextAlignHorizontal {\n\t\tswitch( position ) {\n\t\tcase DChartAxisPosition.TOP:\n\t\t\treturn EShapeTextAlignHorizontal.CENTER;\n\t\tcase DChartAxisPosition.BOTTOM:\n\t\t\treturn EShapeTextAlignHorizontal.CENTER;\n\t\tcase DChartAxisPosition.LEFT:\n\t\t\treturn EShapeTextAlignHorizontal.OUTSIDE_LEFT;\n\t\tcase DChartAxisPosition.RIGHT:\n\t\t\treturn EShapeTextAlignHorizontal.OUTSIDE_RIGHT;\n\t\t}\n\t}\n\n\tgetLabelAlignVertical( position: DChartAxisPosition ): EShapeTextAlignVertical {\n\t\tswitch( position ) {\n\t\tcase DChartAxisPosition.TOP:\n\t\t\treturn EShapeTextAlignVertical.OUTSIDE_TOP;\n\t\tcase DChartAxisPosition.BOTTOM:\n\t\t\treturn EShapeTextAlignVertical.OUTSIDE_BOTTOM;\n\t\tcase DChartAxisPosition.LEFT:\n\t\t\treturn EShapeTextAlignVertical.MIDDLE;\n\t\tcase DChartAxisPosition.RIGHT:\n\t\t\treturn EShapeTextAlignVertical.MIDDLE;\n\t\t}\n\t}\n\n\tgetLabelPaddingHorizontal(): number {\n\t\treturn 50;\n\t}\n\n\tgetLabelPaddingVertical(): number {\n\t\treturn 50;\n\t}\n\n\tgetLabelDirection(): EShapeTextDirection {\n\t\treturn EShapeTextDirection.LEFT_TO_RIGHT;\n\t}\n\n\tgetTickEnable(): boolean {\n\t\treturn true;\n\t}\n\n\tgetMajorTickCount(): number {\n\t\treturn 3;\n\t}\n\n\tgetMajorTickSize(): number {\n\t\treturn 10;\n\t}\n\n\tgetMajorTickPosition(): DChartAxisTickPosition {\n\t\treturn DChartAxisTickPosition.OUTSIDE;\n\t}\n\n\tgetMajorTickStyle(): EShapePointsStyle {\n\t\treturn EShapePointsStyle.NONE;\n\t}\n\n\tgetMajorTickTextAlignHorizontal( position: DChartAxisPosition ): EShapeTextAlignHorizontal {\n\t\tswitch( position ) {\n\t\tcase DChartAxisPosition.TOP:\n\t\t\treturn EShapeTextAlignHorizontal.CENTER;\n\t\tcase DChartAxisPosition.BOTTOM:\n\t\t\treturn EShapeTextAlignHorizontal.CENTER;\n\t\tcase DChartAxisPosition.LEFT:\n\t\t\treturn EShapeTextAlignHorizontal.OUTSIDE_LEFT;\n\t\tcase DChartAxisPosition.RIGHT:\n\t\t\treturn EShapeTextAlignHorizontal.OUTSIDE_RIGHT;\n\t\t}\n\t}\n\n\tgetMajorTickTextAlignVertical( position: DChartAxisPosition ): EShapeTextAlignVertical {\n\t\tswitch( position ) {\n\t\tcase DChartAxisPosition.TOP:\n\t\t\treturn EShapeTextAlignVertical.OUTSIDE_TOP;\n\t\tcase DChartAxisPosition.BOTTOM:\n\t\t\treturn EShapeTextAlignVertical.OUTSIDE_BOTTOM;\n\t\tcase DChartAxisPosition.LEFT:\n\t\t\treturn EShapeTextAlignVertical.MIDDLE;\n\t\tcase DChartAxisPosition.RIGHT:\n\t\t\treturn EShapeTextAlignVertical.MIDDLE;\n\t\t}\n\t}\n\n\tgetMajorTickTextDirection(): EShapeTextDirection {\n\t\treturn EShapeTextDirection.LEFT_TO_RIGHT;\n\t}\n\n\tgetMajorTickTextFormat(): string {\n\t\treturn \"%YMD\\n%Hms.%mi\";\n\t}\n\n\tgetMajorTickTextPaddingHorizontal(): number {\n\t\treturn 15;\n\t}\n\n\tgetMajorTickTextPaddingVertical(): number {\n\t\treturn 15;\n\t}\n\n\tgetMinorTickCount(): number {\n\t\treturn 3;\n\t}\n\n\tgetMinorTickSize(): number {\n\t\treturn 5;\n\t}\n\n\tgetMinorTickPosition(): DChartAxisTickPosition {\n\t\treturn DChartAxisTickPosition.OUTSIDE;\n\t}\n\n\tgetMinorTickStyle(): EShapePointsStyle {\n\t\treturn EShapePointsStyle.NONE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteChartAxisBase } from \"./d-theme-white-chart-axis-base\";\n\nexport class DThemeWhiteChartAxisX extends DThemeWhiteChartAxisBase {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartAxisPosition } from \"../../d-chart-axis\";\nimport { EShapeTextDirection } from \"../../shape/e-shape-text-direction\";\nimport { DThemeWhiteChartAxisBase } from \"./d-theme-white-chart-axis-base\";\n\nexport class DThemeWhiteChartAxisY extends DThemeWhiteChartAxisBase {\n\tgetPosition(): DChartAxisPosition {\n\t\treturn DChartAxisPosition.LEFT;\n\t}\n\n\tgetMajorTickTextFormat(): string {\n\t\treturn \"%ssi\";\n\t}\n\n\tgetLabelDirection(): EShapeTextDirection {\n\t\treturn EShapeTextDirection.BOTTOM_TO_TOP;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeChartCoordinateLinear } from \"../../d-chart-coordinate-linear\";\n\nexport class DThemeWhiteChartCoordinateLinear implements DThemeChartCoordinateLinear {\n\tgetPadding(): number {\n\t\treturn 10;\n\t}\n\n\tisZero( value: number ): boolean {\n\t\treturn Math.abs( value ) < 0.00001;\n\t}\n\n\ttoStepScale( scale: number ): number {\n\t\tif( 5.5 <= scale ) {\n\t\t\treturn 10;\n\t\t} else if( 2.2 <= scale ) {\n\t\t\treturn 5;\n\t\t} else if( 1.1 <= scale ) {\n\t\t\treturn 2;\n\t\t}\n\t\treturn 1;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDiagramBase } from \"../../d-diagram-base\";\nimport { DThemeWhiteCanvasContainer } from \"./d-theme-white-canvas-container\";\n\nexport class DThemeWhiteDiagramBase extends DThemeWhiteCanvasContainer implements DThemeDiagramBase {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDiagram } from \"../../d-diagram\";\nimport { DThemeWhiteDiagramBase } from \"./d-theme-white-diagram-base\";\n\nexport class DThemeWhiteDiagram extends DThemeWhiteDiagramBase implements DThemeDiagram {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDiagramCanvasBase } from \"../../d-diagram-canvas-base\";\nimport { DThemeWhiteCanvas } from \"./d-theme-white-canvas\";\n\nexport class DThemeWhiteDiagramCanvasBase extends DThemeWhiteCanvas implements DThemeDiagramCanvasBase {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDiagramCanvas } from \"../../d-diagram-canvas\";\nimport { DThemeWhiteDiagramCanvasBase } from \"./d-theme-white-diagram-canvas-base\";\n\nexport class DThemeWhiteDiagramCanvas extends DThemeWhiteDiagramCanvasBase implements DThemeDiagramCanvas {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDiagram } from \"../theme/white/d-theme-white-diagram\";\nimport { DThemeWhiteDiagramCanvas } from \"../theme/white/d-theme-white-diagram-canvas\";\n\nexport const loadThemeWhiteDiagram = () => {\n\tDThemeWhite.set( \"DDiagram\", DThemeWhiteDiagram );\n\tDThemeWhite.set( \"DDiagramCanvas\", DThemeWhiteDiagramCanvas );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDiagramCanvasEditor } from \"../../d-diagram-canvas-editor\";\nimport { DThemeWhiteDiagramCanvasBase } from \"./d-theme-white-diagram-canvas-base\";\n\nexport class DThemeWhiteDiagramCanvasEditor extends DThemeWhiteDiagramCanvasBase implements DThemeDiagramCanvasEditor {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDiagramEditor } from \"../../d-diagram-editor\";\nimport { DMouseModifier } from \"../../d-mouse-modifier\";\nimport { DThemeWhiteDiagramBase } from \"./d-theme-white-diagram-base\";\n\nexport class DThemeWhiteDiagramEditor extends DThemeWhiteDiagramBase implements DThemeDiagramEditor {\n\tgetDragModifier(): DMouseModifier {\n\t\treturn DMouseModifier.ALT;\n\t}\n}\n","import { EShapeActionValue, EThemeShapeActionValue } from \"../../shape/action/e-shape-action-value\";\nimport { EShapeActionValueBase } from \"../../shape/action/e-shape-action-value-base\";\nimport { EShapeActionValueBlinkType } from \"../../shape/action/e-shape-action-value-blink-type\";\nimport {\n\tEShapeActionValueChangeColorTarget, EShapeActionValueChangeColorType\n} from \"../../shape/action/e-shape-action-value-change-color-type\";\nimport { EShapeActionValueChangeTextType } from \"../../shape/action/e-shape-action-value-change-text-type\";\nimport { EShapeActionValueMiscType } from \"../../shape/action/e-shape-action-value-misc-type\";\nimport { EShapeActionValueOpenType } from \"../../shape/action/e-shape-action-value-open-type\";\nimport { EShapeActionValueOpetyped } from \"../../shape/action/e-shape-action-value-opetyped\";\nimport { EShapeActionValueShowHideType } from \"../../shape/action/e-shape-action-value-show-hide-type\";\nimport { EShapeActionValueSubtyped } from \"../../shape/action/e-shape-action-value-subtyped\";\nimport { EShapeActionValueTransformMoveType } from \"../../shape/action/e-shape-action-value-transform-move-type\";\nimport { EShapeActionValueTransformResizeType } from \"../../shape/action/e-shape-action-value-transform-resize-type\";\nimport { EShapeActionValueTransformRotateType } from \"../../shape/action/e-shape-action-value-transform-rotate-type\";\nimport { EShapeActionValueTransformType } from \"../../shape/action/e-shape-action-value-transform-type\";\nimport { EShapeActionValueType } from \"../../shape/action/e-shape-action-value-type\";\n\nexport class EThemeWhiteShapeActionValue implements EThemeShapeActionValue {\n\ttoLabel( value: EShapeActionValue ): string {\n\t\tconst type = value.type;\n\t\tif( value instanceof EShapeActionValueSubtyped ) {\n\t\t\tconst subtype = value.subtype;\n\t\t\tif( value instanceof EShapeActionValueOpetyped ) {\n\t\t\t\tconst result = this.toOpetypedLabel( type, subtype, value.opetype, value );\n\t\t\t\tif( result != null ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst result = this.toSubtypedLabel( type, subtype, value );\n\t\t\t\tif( result != null ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.toTypedLabel( type, value );\n\t}\n\n\tprotected toTypedLabel( type: EShapeActionValueType, value: EShapeActionValueBase ): string {\n\t\treturn `${this.toTypeLabel( type )}: ${this.toConditionLabel( value.condition )}`;\n\t}\n\n\tprotected toSubtypedLabel(\n\t\ttype: EShapeActionValueType, subtype: number, value: EShapeActionValueSubtyped<any>\n\t): string | null {\n\t\tconst typeLabel = this.toTypeLabel( type );\n\t\tswitch( type ) {\n\t\tcase EShapeActionValueType.SHOW_HIDE:\n\t\t\treturn `${this.toShowHideTypeLabel( subtype )}`;\n\t\tcase EShapeActionValueType.BLINK:\n\t\t\treturn `${typeLabel}: ${this.toBlinkTypeLabel( subtype )}`;\n\t\tcase EShapeActionValueType.CHANGE_COLOR:\n\t\t\treturn `${typeLabel}: ${this.toChangeColorTypeLabel( subtype )}`;\n\t\tcase EShapeActionValueType.MISC:\n\t\t\treturn `${typeLabel}: ${this.toMiscTypeLabel( subtype )}`;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected toOpetypedLabel(\n\t\ttype: EShapeActionValueType, subtype: number, opetype: number, value: EShapeActionValueOpetyped<any, any>\n\t): string | null {\n\t\tswitch( type ) {\n\t\tcase EShapeActionValueType.TRANSFORM:\n\t\t\tconst subtypeLabel = this.toTransformTypeLabel( subtype );\n\t\t\tswitch( subtype ) {\n\t\t\tcase EShapeActionValueTransformType.ROTATE:\n\t\t\t\treturn `${subtypeLabel}: ${this.toTransformRotateTypeLabel( opetype )}`;\n\t\t\tcase EShapeActionValueTransformType.MOVE:\n\t\t\t\treturn `${subtypeLabel}: ${this.toTransformMoveTypeLabel( opetype )}`;\n\t\t\tcase EShapeActionValueTransformType.RESIZE:\n\t\t\t\treturn `${subtypeLabel}: ${this.toTransformResizeTypeLabel( opetype )}`;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\ttoTypeLabel( type: EShapeActionValueType ): string {\n\t\tswitch( type ) {\n\t\tcase EShapeActionValueType.SHOW_HIDE:\n\t\t\treturn \"Show / hide\";\n\t\tcase EShapeActionValueType.BLINK:\n\t\t\treturn \"Blink\";\n\t\tcase EShapeActionValueType.TRANSFORM:\n\t\t\treturn \"Transform\";\n\t\tcase EShapeActionValueType.OPEN:\n\t\t\treturn \"Open\";\n\t\tcase EShapeActionValueType.CHANGE_COLOR:\n\t\t\treturn \"Change color\";\n\t\tcase EShapeActionValueType.CHANGE_TEXT:\n\t\t\treturn \"Change text\";\n\t\tcase EShapeActionValueType.CHANGE_CURSOR:\n\t\t\treturn \"Change cursor\";\n\t\tcase EShapeActionValueType.EMIT_EVENT:\n\t\t\treturn \"Emit an event\";\n\t\tcase EShapeActionValueType.MISC:\n\t\t\treturn \"Misc.\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoConditionLabel( condition: string ): string {\n\t\tconst l = 20;\n\t\tif( l < condition.length ) {\n\t\t\treturn condition.substring( 0, l ) + \"...\";\n\t\t} else {\n\t\t\treturn condition;\n\t\t}\n\t}\n\n\ttoBlinkTypeLabel( type: EShapeActionValueBlinkType ): string {\n\t\tswitch (type) {\n\t\tcase EShapeActionValueBlinkType.VISIBILITY:\n\t\t\treturn \"Visibility\";\n\t\tcase EShapeActionValueBlinkType.BRIGHTEN:\n\t\t\treturn \"Brighten\";\n\t\tcase EShapeActionValueBlinkType.DARKEN:\n\t\t\treturn \"Darken\";\n\t\tcase EShapeActionValueBlinkType.OPACITY:\n\t\t\treturn \"Opacity\";\n\t\tcase EShapeActionValueBlinkType.COLOR_FILL:\n\t\t\treturn \"Fill\";\n\t\tcase EShapeActionValueBlinkType.COLOR_STROKE:\n\t\t\treturn \"Stroke\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoShowHideTypeLabel( type: EShapeActionValueShowHideType ): string {\n\t\tswitch (type) {\n\t\tcase EShapeActionValueShowHideType.SHOW:\n\t\t\treturn \"Show\";\n\t\tcase EShapeActionValueShowHideType.HIDE:\n\t\t\treturn \"Hide\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoTransformTypeLabel( type: EShapeActionValueTransformType ): string {\n\t\tswitch (type) {\n\t\tcase EShapeActionValueTransformType.RESIZE:\n\t\t\treturn \"Resize\";\n\t\tcase EShapeActionValueTransformType.MOVE:\n\t\t\treturn \"Move\";\n\t\tcase EShapeActionValueTransformType.ROTATE:\n\t\t\treturn \"Rotate\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoTransformRotateTypeLabel( type: EShapeActionValueTransformRotateType ): string {\n\t\tswitch (type) {\n\t\tcase EShapeActionValueTransformRotateType.RELATIVE:\n\t\t\treturn \"Relative\";\n\t\tcase EShapeActionValueTransformRotateType.ABSOLUTE:\n\t\t\treturn \"Absolute\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoTransformMoveTypeLabel( type: EShapeActionValueTransformMoveType ): string {\n\t\tswitch (type) {\n\t\tcase EShapeActionValueTransformMoveType.RELATIVE_X:\n\t\t\treturn \"Relative X\";\n\t\tcase EShapeActionValueTransformMoveType.RELATIVE_Y:\n\t\t\treturn \"Relative Y\";\n\t\tcase EShapeActionValueTransformMoveType.ABSOLUTE_X:\n\t\t\treturn \"Absolute X\";\n\t\tcase EShapeActionValueTransformMoveType.ABSOLUTE_Y:\n\t\t\treturn \"Absolute Y\";\n\t\tcase EShapeActionValueTransformMoveType.FORWARD_OR_BACKWARD:\n\t\t\treturn \"Forward / backward\";\n\t\tcase EShapeActionValueTransformMoveType.LEFT_OR_RIGHT:\n\t\t\treturn \"Left / right\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoTransformResizeTypeLabel( type: EShapeActionValueTransformResizeType ): string {\n\t\tswitch (type) {\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_SIZE:\n\t\t\treturn \"Height & width\";\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_SIZE:\n\t\t\treturn \"Height & width (%)\";\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_HEIGHT:\n\t\t\treturn \"Height\";\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_HEIGHT:\n\t\t\treturn \"Height (%)\";\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_WIDTH:\n\t\t\treturn \"Width\";\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_WIDTH:\n\t\t\treturn \"Width (%)\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoChangeColorTypeLabel( type: EShapeActionValueChangeColorType ): string {\n\t\tswitch (type) {\n\t\tcase EShapeActionValueChangeColorType.FILL:\n\t\t\treturn \"Fill\";\n\t\tcase EShapeActionValueChangeColorType.STROKE:\n\t\t\treturn \"Stroke\";\n\t\tcase EShapeActionValueChangeColorType.FILL_AND_STROKE:\n\t\t\treturn \"Fill and stroke\";\n\t\tcase EShapeActionValueChangeColorType.TEXT:\n\t\t\treturn \"Text\";\n\t\tcase EShapeActionValueChangeColorType.TEXT_OUTLINE:\n\t\t\treturn \"Text outline\";\n\t\tcase EShapeActionValueChangeColorType.ALL:\n\t\t\treturn \"ALL\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoChangeColorTargetLabel( type: EShapeActionValueChangeColorTarget ): string {\n\t\tswitch (type) {\n\t\tcase EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA:\n\t\t\treturn \"Color\";\n\t\tcase EShapeActionValueChangeColorTarget.COLOR:\n\t\t\treturn \"RGB\";\n\t\tcase EShapeActionValueChangeColorTarget.ALPHA:\n\t\t\treturn \"Alpha\";\n\t\tcase EShapeActionValueChangeColorTarget.CODE:\n\t\t\treturn \"Dynamic color\";\n\t\tcase EShapeActionValueChangeColorTarget.BRIGHTNESS:\n\t\t\treturn \"Brightness\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoChangeTextTypeLabel( type: EShapeActionValueChangeTextType ): string {\n\t\tswitch( type ) {\n\t\tcase EShapeActionValueChangeTextType.TEXT:\n\t\t\treturn \"Text\";\n\t\tcase EShapeActionValueChangeTextType.NUMBER:\n\t\t\treturn \"Number\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoOpenTypeLabel( type: EShapeActionValueOpenType ): string {\n\t\tswitch (type) {\n\t\tcase EShapeActionValueOpenType.FLOW:\n\t\t\treturn \"Flow\";\n\t\tcase EShapeActionValueOpenType.PAGE:\n\t\t\treturn \"Page (New window)\";\n\t\tcase EShapeActionValueOpenType.PAGE_INPLACE:\n\t\t\treturn \"Page (In-place)\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoMiscTypeLabel( type: EShapeActionValueMiscType ): string {\n\t\tswitch( type ) {\n\t\tcase EShapeActionValueMiscType.INPUT:\n\t\t\treturn \"Input\";\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { EThemeWhiteShapeActionValue } from \"../theme/white/e-theme-white-shape-action-value\";\n\nexport const loadThemeWhiteShapeActionValue = () => {\n\tDThemeWhite.set( \"EShapeActionValue\", EThemeWhiteShapeActionValue );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDiagramCanvasEditor } from \"../theme/white/d-theme-white-diagram-canvas-editor\";\nimport { DThemeWhiteDiagramEditor } from \"../theme/white/d-theme-white-diagram-editor\";\nimport { loadThemeWhiteShapeActionValue } from \"./load-theme-white-shape-action-value\";\n\nexport const loadThemeWhiteDiagramEditor = () => {\n\tDThemeWhite.set( \"DDiagramEditor\", DThemeWhiteDiagramEditor );\n\tDThemeWhite.set( \"DDiagramCanvasEditor\", DThemeWhiteDiagramCanvasEditor );\n\tloadThemeWhiteShapeActionValue();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialog } from \"../theme/white/d-theme-white-dialog\";\n\nexport const loadThemeWhiteDialog = () => {\n\tDThemeWhite.set( \"DDialog\", DThemeWhiteDialog );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogCommand } from \"../theme/white/d-theme-white-dialog-command\";\n\nexport const loadThemeWhiteDialogCommand = () => {\n\tDThemeWhite.set( \"DDialogCommand\", DThemeWhiteDialogCommand );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDialogConfirm } from \"../../d-dialog-confirm\";\nimport { DStateAwareOrValue } from \"../../d-state-aware\";\nimport { DThemeWhiteDialogCommand } from \"./d-theme-white-dialog-command\";\n\nexport class DThemeWhiteDialogConfirm extends DThemeWhiteDialogCommand implements DThemeDialogConfirm {\n\tgetOk(): string | null {\n\t\treturn \"Yes\";\n\t}\n\n\tgetCancel(): string | null {\n\t\treturn \"No\";\n\t}\n\n\tgetMessage(): DStateAwareOrValue<string> {\n\t\treturn \"\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeImage } from \"../../d-image\";\nimport { DThemeWhiteImageBase } from \"./d-theme-white-image-base\";\n\nexport class DThemeWhiteImage extends DThemeWhiteImageBase implements DThemeImage {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeDialogConfirmMessage } from \"../../d-dialog-confirm-message\";\nimport { DThemeWhiteImage } from \"./d-theme-white-image\";\n\nexport class DThemeWhiteDialogConfirmMessage extends DThemeWhiteImage implements DThemeDialogConfirmMessage {\n\tgetWidth(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetHeight(): number {\n\t\treturn 200;\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.CENTER;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogConfirm } from \"../theme/white/d-theme-white-dialog-confirm\";\nimport { DThemeWhiteDialogConfirmMessage } from \"../theme/white/d-theme-white-dialog-confirm-message\";\n\nexport const loadThemeWhiteDialogConfirm = () => {\n\tDThemeWhite.set( \"DDialogConfirm\", DThemeWhiteDialogConfirm );\n\tDThemeWhite.set( \"DDialogConfirmMessage\", DThemeWhiteDialogConfirmMessage );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DStateAwareOrValue } from \"../../d-state-aware\";\nimport { DThemeWhiteDialogConfirm } from \"./d-theme-white-dialog-confirm\";\n\nexport class DThemeWhiteDialogConfirmDelete extends DThemeWhiteDialogConfirm {\n\tgetMessage(): DStateAwareOrValue<string> {\n\t\treturn \"Are you sure you want to delete this data?\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogConfirmDelete } from \"../theme/white/d-theme-white-dialog-confirm-delete\";\n\nexport const loadThemeWhiteDialogConfirmDelete = () => {\n\tDThemeWhite.set( \"DDialogConfirmDelete\", DThemeWhiteDialogConfirmDelete );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DStateAwareOrValue } from \"../../d-state-aware\";\nimport { DThemeWhiteDialogConfirm } from \"./d-theme-white-dialog-confirm\";\n\nexport class DThemeWhiteDialogConfirmDiscard extends DThemeWhiteDialogConfirm {\n\tgetMessage(): DStateAwareOrValue<string> {\n\t\treturn \"Your changes have not been saved.\\n\" +\n\t\t\t\"Do you want to discard the changes and continue?\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogConfirmDiscard } from \"../theme/white/d-theme-white-dialog-confirm-discard\";\n\nexport const loadThemeWhiteDialogConfirmDiscard = () => {\n\tDThemeWhite.set( \"DDialogConfirmDiscard\", DThemeWhiteDialogConfirmDiscard );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeDialogInputText } from \"../../d-dialog-input-text\";\nimport { DThemeWhiteDialog } from \"./d-theme-white-dialog\";\n\nexport class DThemeWhiteDialogInputText extends DThemeWhiteDialog implements DThemeDialogInputText {\n\tgetOk(): string {\n\t\treturn \"OK\";\n\t}\n\n\tgetCancel(): string {\n\t\treturn \"Cancel\";\n\t}\n\n\tgetLabel(): string {\n\t\treturn \"\";\n\t}\n\n\tgetLabelWidth(): number {\n\t\treturn 60;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogInputText } from \"../theme/white/d-theme-white-dialog-input-text\";\n\nexport const loadThemeWhiteDialogInputText = () => {\n\tDThemeWhite.set( \"DDialogInputText\", DThemeWhiteDialogInputText );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDialogMessage } from \"../../d-dialog-message\";\nimport { DThemeWhiteDialogConfirm } from \"./d-theme-white-dialog-confirm\";\n\nexport class DThemeWhiteDialogMessage extends DThemeWhiteDialogConfirm implements DThemeDialogMessage {\n\tgetOk(): string | null {\n\t\treturn \"OK\";\n\t}\n\n\tgetCancel(): string | null {\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogMessage } from \"../theme/white/d-theme-white-dialog-message\";\n\nexport const loadThemeWhiteDialogMessage = () => {\n\tDThemeWhite.set( \"DDialogMessage\", DThemeWhiteDialogMessage );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DThemeDialogProcessing } from \"../../d-dialog-processing\";\nimport { DStateAwareOrValue } from \"../../d-state-aware\";\nimport { DThemeWhiteDialogConfirm } from \"./d-theme-white-dialog-confirm\";\n\nconst message = ( state: DBaseState ): string => {\n\tif( DBaseStates.isSucceeded( state ) ) {\n\t\treturn \"Processed successfully\";\n\t} else if( DBaseStates.isFailed( state ) ) {\n\t\treturn \"Failed to process the request\";\n\t} else {\n\t\treturn \"Processing...\";\n\t}\n};\n\nexport class DThemeWhiteDialogProcessing extends DThemeWhiteDialogConfirm implements DThemeDialogProcessing {\n\tgetOk(): string | null {\n\t\treturn \"OK\";\n\t}\n\n\tgetCancel(): string | null {\n\t\treturn null;\n\t}\n\n\tgetMessage(): DStateAwareOrValue<string> {\n\t\treturn message;\n\t}\n\n\tgetInterval(): number {\n\t\treturn 400;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteDialogConfirmMessage } from \"./d-theme-white-dialog-confirm-message\";\n\nexport class DThemeWhiteDialogProcessingMessage extends DThemeWhiteDialogConfirmMessage {\n\tgetHeight(): number {\n\t\treturn 90;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogProcessing } from \"../theme/white/d-theme-white-dialog-processing\";\nimport { DThemeWhiteDialogProcessingMessage } from \"../theme/white/d-theme-white-dialog-processing-message\";\n\nexport const loadThemeWhiteDialogProcessing = () => {\n\tDThemeWhite.set( \"DDialogProcessing\", DThemeWhiteDialogProcessing );\n\tDThemeWhite.set( \"DDialogProcessingMessage\", DThemeWhiteDialogProcessingMessage );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDialogSaveAs } from \"../../d-dialog-save-as\";\nimport { DThemeWhiteDialogInputText } from \"./d-theme-white-dialog-input-text\";\n\nexport class DThemeWhiteDialogSaveAs extends DThemeWhiteDialogInputText implements DThemeDialogSaveAs {\n\tgetOk(): string {\n\t\treturn \"Save\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogSaveAs } from \"../theme/white/d-theme-white-dialog-save-as\";\n\nexport const loadThemeWhiteDialogSaveAs = () => {\n\tDThemeWhite.set( \"DDialogSaveAs\", DThemeWhiteDialogSaveAs );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDialogSelect } from \"../../d-dialog-select\";\nimport { DThemeWhiteDialog } from \"./d-theme-white-dialog\";\n\nexport class DThemeWhiteDialogSelect extends DThemeWhiteDialog implements DThemeDialogSelect {\n\tgetNoteNoItemsText(): string {\n\t\treturn \"No Items\";\n\t}\n\n\tgetNoteSearchingText(): string {\n\t\treturn \"Searching...\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DDragMode } from \"../../d-drag-mode\";\nimport { DThemePane } from \"../../d-pane\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\n\nexport class DThemeWhitePane extends DThemeWhiteBase implements DThemePane {\n\tisOverflowMaskEnabled() {\n\t\treturn true;\n\t}\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteConstants.BACKGROUND_COLOR;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n\n\tgetWheelSpeed(): number {\n\t\treturn 2.24;\n\t}\n\n\tgetDragMode(): DDragMode {\n\t\treturn DDragMode.TOUCH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeWhitePane } from \"./d-theme-white-pane\";\n\nexport class DThemeWhiteList extends DThemeWhitePane {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn 0xffffff;\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn 1;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeDialogSelecList } from \"../../d-dialog-select-list\";\nimport { DThemeWhiteList } from \"./d-theme-white-list\";\n\nexport class DThemeWhiteDialogSelectList extends DThemeWhiteList implements DThemeDialogSelecList {\n\tgetBackgroundColor(): number | null {\n\t\treturn null;\n\t}\n\n\tgetBorderColor(): number | null {\n\t\treturn null;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 250;\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DCornerMask.ALL;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeListItem } from \"../../d-list-item\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteImage } from \"./d-theme-white-image\";\n\nexport class DThemeWhiteListItem extends DThemeWhiteImage implements DThemeListItem {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t} else if( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteConstants.HIGHLIGHT_ALPHA;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.LEFT;\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 10;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 10;\n\t}\n\n\tgetCornerMask(): number {\n\t\treturn DCornerMask.ALL;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeDialogSelecListItem } from \"../../d-dialog-select-list-item\";\nimport { DThemeWhiteFont } from \"./d-theme-white-font\";\nimport { DThemeWhiteListItem } from \"./d-theme-white-list-item\";\n\nexport class DThemeWhiteDialogSelectListItem extends DThemeWhiteListItem implements DThemeDialogSelecListItem {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn super.getBackgroundColor( state & ~DBaseState.ACTIVE );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn super.getBackgroundAlpha( state & ~DBaseState.ACTIVE );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteFont.getColor( state );\n\t}\n\n\tgetCornerMask(): number {\n\t\treturn DCornerMask.NONE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogSelect } from \"../theme/white/d-theme-white-dialog-select\";\nimport { DThemeWhiteDialogSelectList } from \"../theme/white/d-theme-white-dialog-select-list\";\nimport { DThemeWhiteDialogSelectListItem } from \"../theme/white/d-theme-white-dialog-select-list-item\";\n\nexport const loadThemeWhiteDialogSelect = () => {\n\tDThemeWhite.set( \"DDialogSelect\", DThemeWhiteDialogSelect );\n\tDThemeWhite.set( \"DDialogSelectList\", DThemeWhiteDialogSelectList );\n\tDThemeWhite.set( \"DDialogSelectListItem\", DThemeWhiteDialogSelectListItem );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { loadThemeWhiteDialog } from \"./load-theme-white-dialog\";\nimport { loadThemeWhiteDialogColor } from \"./load-theme-white-dialog-color\";\nimport { loadThemeWhiteDialogColorGradient } from \"./load-theme-white-dialog-color-gradient\";\nimport { loadThemeWhiteDialogCommand } from \"./load-theme-white-dialog-command\";\nimport { loadThemeWhiteDialogConfirm } from \"./load-theme-white-dialog-confirm\";\nimport { loadThemeWhiteDialogConfirmDelete } from \"./load-theme-white-dialog-confirm-delete\";\nimport { loadThemeWhiteDialogConfirmDiscard } from \"./load-theme-white-dialog-confirm-discard\";\nimport { loadThemeWhiteDialogDate } from \"./load-theme-white-dialog-date\";\nimport { loadThemeWhiteDialogDatetime } from \"./load-theme-white-dialog-datetime\";\nimport { loadThemeWhiteDialogInputText } from \"./load-theme-white-dialog-input-text\";\nimport { loadThemeWhiteDialogMessage } from \"./load-theme-white-dialog-message\";\nimport { loadThemeWhiteDialogProcessing } from \"./load-theme-white-dialog-processing\";\nimport { loadThemeWhiteDialogSaveAs } from \"./load-theme-white-dialog-save-as\";\nimport { loadThemeWhiteDialogSelect } from \"./load-theme-white-dialog-select\";\nimport { loadThemeWhiteDialogTime } from \"./load-theme-white-dialog-time\";\n\nexport const loadThemeWhiteDialogAll = () => {\n\tloadThemeWhiteDialogColorGradient();\n\tloadThemeWhiteDialogColor();\n\tloadThemeWhiteDialogCommand();\n\tloadThemeWhiteDialogConfirmDelete();\n\tloadThemeWhiteDialogConfirmDiscard();\n\tloadThemeWhiteDialogConfirm();\n\tloadThemeWhiteDialogDate();\n\tloadThemeWhiteDialogDatetime();\n\tloadThemeWhiteDialogInputText();\n\tloadThemeWhiteDialogMessage();\n\tloadThemeWhiteDialogProcessing();\n\tloadThemeWhiteDialogSaveAs();\n\tloadThemeWhiteDialogSelect();\n\tloadThemeWhiteDialogTime();\n\tloadThemeWhiteDialog();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeDropdown } from \"../../d-dropdown\";\nimport { DStateAwareOrValueMightBe } from \"../../d-state-aware\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteButtonBase } from \"./d-theme-white-button-base\";\n\nDThemeWhiteAtlas.add( \"dropdown_mark\", 20, 14,\n\t`<g>` +\n\t\t`<polyline fill=\"none\" stroke=\"#fff\" stroke-width=\"1\" points=\"16 5 10 11 4 5\"></polyline>` +\n\t`</g>`\n);\n\nexport class DThemeWhiteDropdown extends DThemeWhiteButtonBase implements DThemeDropdown {\n\tgetImageAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.RIGHT;\n\t}\n\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.PADDING;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn - this.getPaddingRight() * 0.5;\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\treturn DThemeWhiteAtlas.mappings.dropdown_mark;\n\t}\n\n\tnewTextValue(): DStateAwareOrValueMightBe<string> {\n\t\treturn \"\";\n\t}\n\n\tgetTextValue( state: DBaseState ): string {\n\t\treturn \"\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DLayoutDirection, DThemeLayout } from \"../../d-layout\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhiteLayout extends DThemeWhiteBase implements DThemeLayout {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetMargin(): number {\n\t\treturn 5;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.CHILDREN;\n\t}\n\n\tgetDirection(): DLayoutDirection {\n\t\treturn DLayoutDirection.VERTICAL;\n\t}\n\n\tgetCornerAdjust(): boolean {\n\t\treturn false;\n\t}\n\n\tgetMultiplicity(): number {\n\t\treturn 1;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DLayoutDirection } from \"../../d-layout\";\nimport { DThemeLayoutVertical } from \"../../d-layout-vertical\";\nimport { DThemeWhiteLayout } from \"./d-theme-white-layout\";\n\nexport class DThemeWhiteLayoutVertical extends DThemeWhiteLayout implements DThemeLayoutVertical {\n\tgetDirection(): DLayoutDirection {\n\t\treturn DLayoutDirection.VERTICAL;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeMenu } from \"../../d-menu\";\nimport { DShadow } from \"../../d-shadow\";\nimport { DThemeWhiteLayoutVertical } from \"./d-theme-white-layout-vertical\";\n\nexport class DThemeWhiteMenu extends DThemeWhiteLayoutVertical implements DThemeMenu {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn 0xffffff;\n\t}\n\n\tgetOffsetX(): number {\n\t\treturn 5;\n\t}\n\n\tgetOffsetY(): number {\n\t\treturn 5;\n\t}\n\n\tgetPaddingTop(): number {\n\t\treturn 5;\n\t}\n\n\tgetPaddingBottom(): number {\n\t\treturn 5;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 200;\n\t}\n\n\tgetMargin(): number {\n\t\treturn 0;\n\t}\n\n\tgetShadow(): DShadow | null {\n\t\treturn this.newShadowWeak();\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeMenuItem } from \"../../d-menu-item\";\nimport { DThemeWhiteListItem } from \"./d-theme-white-list-item\";\n\nexport class DThemeWhiteMenuItem extends DThemeWhiteListItem implements DThemeMenuItem {\n\tgetPaddingLeft(): number {\n\t\treturn this.getPaddingRight();\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 26;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeMenuItemText } from \"../../d-menu-item-text\";\nimport { DThemeWhiteMenuItem } from \"./d-theme-white-menu-item\";\n\nexport class DThemeWhiteMenuItemText extends DThemeWhiteMenuItem implements DThemeMenuItemText {\n\tgetShortcutTextMargin(): number {\n\t\treturn this.getPaddingRight();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DThemeMenuItemCheck } from \"../../d-menu-item-check\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteMenuItemText } from \"./d-theme-white-menu-item-text\";\n\nDThemeWhiteAtlas.add( \"menu_item_mark_check_active\", 14, 14,\n\t`<g>` +\n\t\t`<polyline fill=\"none\" stroke=\"#fff\" stroke-width=\"1\" points=\"1 6.5 5 11 13 2.5\"></polyline>` +\n\t`</g>`\n);\n\nDThemeWhiteAtlas.add( \"menu_item_mark_check_inactive\", 14, 14,\n\t`<g></g>`\n);\n\nexport class DThemeWhiteMenuItemCheck extends DThemeWhiteMenuItemText implements DThemeMenuItemCheck {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn super.getBackgroundColor( state & ~DBaseState.ACTIVE );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn super.getColor( state & ~DBaseState.ACTIVE );\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\tif( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteAtlas.mappings.menu_item_mark_check_active;\n\t\t} else {\n\t\t\treturn DThemeWhiteAtlas.mappings.menu_item_mark_check_inactive;\n\t\t}\n\t}\n\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.BORDER;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn 7;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeMenuItemExpandable } from \"../../d-menu-item-expandable\";\nimport { DThemeWhiteLayoutVertical } from \"./d-theme-white-layout-vertical\";\n\nexport class DThemeWhiteMenuItemExpandable extends DThemeWhiteLayoutVertical implements DThemeMenuItemExpandable {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isActive( state ) ) {\n\t\t\treturn 0xf0f8ff;\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\tif( DBaseStates.isActive( state ) ) {\n\t\t\treturn 0.1;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetMargin(): number {\n\t\treturn 0;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DCornerMask.ALL;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeMenuItemExpandableBody } from \"../../d-menu-item-expandable-body\";\nimport { DThemeWhiteLayoutVertical } from \"./d-theme-white-layout-vertical\";\n\nexport class DThemeWhiteMenuItemExpandableBody extends DThemeWhiteLayoutVertical\n\timplements DThemeMenuItemExpandableBody {\n\n\tgetWidth(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DCornerMask.ALL;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DThemeMenuItemExpandableHeader } from \"../../d-menu-item-expandable-header\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteListItem } from \"./d-theme-white-list-item\";\n\nDThemeWhiteAtlas.add( \"menu_item_expandable_header_closed\", 14, 14,\n\t`<g transform=\"scale(1, 0.7)\">` +\n\t\t`<polyline fill=\"none\" stroke=\"#fff\" stroke-width=\"1\" points=\"6 16 10 10 6 4\"></polyline>` +\n\t`</g>`\n);\n\nDThemeWhiteAtlas.add( \"menu_item_expandable_header_opened\", 14, 14,\n\t`<g transform=\"scale(0.7, 1)\">` +\n\t\t`<polyline fill=\"none\" stroke=\"#fff\" stroke-width=\"1\" points=\"16 6 10 10 4 6\"></polyline>` +\n\t`</g>`\n);\n\nexport class DThemeWhiteMenuItemExpandableHeader extends DThemeWhiteListItem implements DThemeMenuItemExpandableHeader {\n\tgetPaddingLeft(): number {\n\t\treturn this.getPaddingRight();\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 26;\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\tif( DBaseStates.isActiveIn( state ) ) {\n\t\t\treturn DThemeWhiteAtlas.mappings.menu_item_expandable_header_opened;\n\t\t} else {\n\t\t\treturn DThemeWhiteAtlas.mappings.menu_item_expandable_header_closed;\n\t\t}\n\t}\n\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.BORDER;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn 7;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemCheck } from \"./d-theme-white-menu-item-check\";\n\nexport class DThemeWhiteMenuItemExpandableItemCheck extends DThemeWhiteMenuItemCheck {\n\tgetPaddingLeft(): number {\n\t\treturn super.getPaddingLeft() + 16;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn super.getImageMarginHorizontal() + 16;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DMenuOptions } from \"../../d-menu\";\nimport { DMenuItemLinkMenuItemId, DThemeMenuItemLink } from \"../../d-menu-item-link\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteMenuItemText } from \"./d-theme-white-menu-item-text\";\n\nDThemeWhiteAtlas.add( \"menu_item_mark_link\", 24, 24,\n\t`<g>` +\n\t\t`<path fill=\"none\" stroke=\"#fff\" stroke-width=\"1\" ` +\n\t\t\t`d=\"M10 6H7c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h8c1.1 0 2-.9 2-2v-3 M19 11V4h-7 M18.75 4.5l-8 8\" />` +\n\t`</g>`\n);\n\nexport class DThemeWhiteMenuItemLink extends DThemeWhiteMenuItemText implements DThemeMenuItemLink {\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\tif( state & DBaseState.EXTENSION_0 ) {\n\t\t\treturn DThemeWhiteAtlas.mappings.menu_item_mark_link;\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetImageTintAlpha( state: DBaseState ): number {\n\t\tif( state & DBaseState.HOVERED ) {\n\t\t\treturn super.getImageTintAlpha( state );\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.BORDER;\n\t}\n\n\tgetImageAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.RIGHT;\n\t}\n\n\tgetMenuOptions(): DMenuOptions<DMenuItemLinkMenuItemId> {\n\t\treturn {\n\t\t\tsticky: true,\n\t\t\tfit: true,\n\t\t\titems: [{\n\t\t\t\tvalue: DMenuItemLinkMenuItemId.OPEN_LINK_IN_NEW_WINDOW,\n\t\t\t\ttext: {\n\t\t\t\t\tvalue: this.getOpenLinkInNewWindow()\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tvalue: DMenuItemLinkMenuItemId.COPY_LINK_ADDRESS,\n\t\t\t\ttext: {\n\t\t\t\t\tvalue: this.getCopyLinkAddress()\n\t\t\t\t}\n\t\t\t}]\n\t\t};\n\t}\n\n\tgetOpenLinkInNewWindow(): string {\n\t\treturn \"Open link in new window\";\n\t}\n\n\tgetCopyLinkAddress(): string {\n\t\treturn \"Copy link address\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemLink } from \"./d-theme-white-menu-item-link\";\n\nexport class DThemeWhiteMenuItemExpandableItemLink extends DThemeWhiteMenuItemLink {\n\tgetPaddingLeft(): number {\n\t\treturn super.getPaddingLeft() + 16;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeMenuItemMenu } from \"../../d-menu-item-menu\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteMenuItem } from \"./d-theme-white-menu-item\";\n\nDThemeWhiteAtlas.add( \"menu_item_mark_next\", 14, 20,\n\t`<g>` +\n\t\t`<polyline fill=\"none\" stroke=\"#fff\" stroke-width=\"1\" points=\"5 16 11 10 5 4\"></polyline>` +\n\t`</g>`\n);\n\nexport class DThemeWhiteMenuItemMenu extends DThemeWhiteMenuItem implements DThemeMenuItemMenu {\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\treturn DThemeWhiteAtlas.mappings.menu_item_mark_next;\n\t}\n\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.BORDER;\n\t}\n\n\tgetImageAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.RIGHT;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn 12;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemMenu } from \"./d-theme-white-menu-item-menu\";\n\nexport class DThemeWhiteMenuItemExpandableItemMenu extends DThemeWhiteMenuItemMenu {\n\tgetPaddingLeft(): number {\n\t\treturn super.getPaddingLeft() + 16;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeListItemSeparator } from \"../../d-list-item-separator\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteImage } from \"./d-theme-white-image\";\n\nexport class DThemeWhiteListItemSeparator extends DThemeWhiteImage implements DThemeListItemSeparator {\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t}\n\n\tgetBorderAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_ALPHA;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 15;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 10;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 10;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeMenuItemSeparator } from \"../../d-menu-item-separator\";\nimport { DThemeWhiteListItemSeparator } from \"./d-theme-white-list-item-separator\";\n\nexport class DThemeWhiteMenuItemSeparator extends DThemeWhiteListItemSeparator implements DThemeMenuItemSeparator {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemSeparator } from \"./d-theme-white-menu-item-separator\";\n\nexport class DThemeWhiteMenuItemExpandableItemSeparator extends DThemeWhiteMenuItemSeparator {\n\tgetPaddingLeft(): number {\n\t\treturn super.getPaddingLeft() + 16;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DLayoutClearType } from \"../../d-layout-clear-type\";\nimport { DThemeLayoutSpace } from \"../../d-layout-space\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhiteLayoutSpace extends DThemeWhiteBase implements DThemeLayoutSpace {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 0;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 0;\n\t}\n\n\tgetClearType(): DLayoutClearType {\n\t\treturn DLayoutClearType.BOTH;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.CHILDREN;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeMenuItemSpace } from \"../../d-menu-item-space\";\nimport { DThemeWhiteLayoutSpace } from \"./d-theme-white-layout-space\";\n\nexport class DThemeWhiteMenuItemSpace extends DThemeWhiteLayoutSpace implements DThemeMenuItemSpace {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemSpace } from \"./d-theme-white-menu-item-space\";\n\nexport class DThemeWhiteMenuItemExpandableItemSpace extends DThemeWhiteMenuItemSpace {\n\tgetPaddingLeft(): number {\n\t\treturn super.getPaddingLeft() + 16;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemText } from \"./d-theme-white-menu-item-text\";\n\nexport class DThemeWhiteMenuItemExpandableItemText extends DThemeWhiteMenuItemText {\n\tgetPaddingLeft(): number {\n\t\treturn super.getPaddingLeft() + 16;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteMenu } from \"../theme/white/d-theme-white-menu\";\nimport { DThemeWhiteMenuItem } from \"../theme/white/d-theme-white-menu-item\";\nimport { DThemeWhiteMenuItemCheck } from \"../theme/white/d-theme-white-menu-item-check\";\nimport { DThemeWhiteMenuItemExpandable } from \"../theme/white/d-theme-white-menu-item-expandable\";\nimport { DThemeWhiteMenuItemExpandableBody } from \"../theme/white/d-theme-white-menu-item-expandable-body\";\nimport { DThemeWhiteMenuItemExpandableHeader } from \"../theme/white/d-theme-white-menu-item-expandable-header\";\nimport { DThemeWhiteMenuItemExpandableItemCheck } from \"../theme/white/d-theme-white-menu-item-expandable-item-check\";\nimport { DThemeWhiteMenuItemExpandableItemLink } from \"../theme/white/d-theme-white-menu-item-expandable-item-link\";\nimport { DThemeWhiteMenuItemExpandableItemMenu } from \"../theme/white/d-theme-white-menu-item-expandable-item-menu\";\nimport {\n\tDThemeWhiteMenuItemExpandableItemSeparator\n} from \"../theme/white/d-theme-white-menu-item-expandable-item-separator\";\nimport { DThemeWhiteMenuItemExpandableItemSpace } from \"../theme/white/d-theme-white-menu-item-expandable-item-space\";\nimport { DThemeWhiteMenuItemExpandableItemText } from \"../theme/white/d-theme-white-menu-item-expandable-item-text\";\nimport { DThemeWhiteMenuItemLink } from \"../theme/white/d-theme-white-menu-item-link\";\nimport { DThemeWhiteMenuItemMenu } from \"../theme/white/d-theme-white-menu-item-menu\";\nimport { DThemeWhiteMenuItemSeparator } from \"../theme/white/d-theme-white-menu-item-separator\";\nimport { DThemeWhiteMenuItemSpace } from \"../theme/white/d-theme-white-menu-item-space\";\nimport { DThemeWhiteMenuItemText } from \"../theme/white/d-theme-white-menu-item-text\";\n\nexport const loadThemeWhiteMenu = () => {\n\tDThemeWhite.set( \"DMenu\", DThemeWhiteMenu );\n\n\tDThemeWhite.set( \"DMenuItem\", DThemeWhiteMenuItem );\n\tDThemeWhite.set( \"DMenuItemCheck\", DThemeWhiteMenuItemCheck );\n\tDThemeWhite.set( \"DMenuItemLink\", DThemeWhiteMenuItemLink );\n\tDThemeWhite.set( \"DMenuItemMenu\", DThemeWhiteMenuItemMenu );\n\tDThemeWhite.set( \"DMenuItemSeparator\", DThemeWhiteMenuItemSeparator );\n\tDThemeWhite.set( \"DMenuItemSpace\", DThemeWhiteMenuItemSpace );\n\tDThemeWhite.set( \"DMenuItemText\", DThemeWhiteMenuItemText );\n\n\tDThemeWhite.set( \"DMenuItemExpandableBody\", DThemeWhiteMenuItemExpandableBody );\n\tDThemeWhite.set( \"DMenuItemExpandableHeader\", DThemeWhiteMenuItemExpandableHeader );\n\tDThemeWhite.set( \"DMenuItemExpandableItemCheck\", DThemeWhiteMenuItemExpandableItemCheck );\n\tDThemeWhite.set( \"DMenuItemExpandableItemLink\", DThemeWhiteMenuItemExpandableItemLink );\n\tDThemeWhite.set( \"DMenuItemExpandableItemMenu\", DThemeWhiteMenuItemExpandableItemMenu );\n\tDThemeWhite.set( \"DMenuItemExpandableItemSeparator\", DThemeWhiteMenuItemExpandableItemSeparator );\n\tDThemeWhite.set( \"DMenuItemExpandableItemSpace\", DThemeWhiteMenuItemExpandableItemSpace );\n\tDThemeWhite.set( \"DMenuItemExpandableItemText\", DThemeWhiteMenuItemExpandableItemText );\n\tDThemeWhite.set( \"DMenuItemExpandable\", DThemeWhiteMenuItemExpandable );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDropdown } from \"../theme/white/d-theme-white-dropdown\";\nimport { loadThemeWhiteMenu } from \"./load-theme-white-menu\";\n\nexport const loadThemeWhiteDropdown = () => {\n\tDThemeWhite.set( \"DDropdown\", DThemeWhiteDropdown );\n\tloadThemeWhiteMenu();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeExpandable } from \"../../d-expandable\";\nimport { DThemeWhiteLayoutVertical } from \"./d-theme-white-layout-vertical\";\n\nexport class DThemeWhiteExpandable extends DThemeWhiteLayoutVertical implements DThemeExpandable {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isActive( state ) ) {\n\t\t\treturn 0xf0f8ff;\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\tif( DBaseStates.isActive( state ) ) {\n\t\t\treturn 0.1;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetMargin(): number {\n\t\treturn 0;\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DCornerMask.ALL;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeExpandableHeader } from \"../../d-expandable-header\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteImage } from \"./d-theme-white-image\";\n\nDThemeWhiteAtlas.add( \"menu_item_expandable_header_closed\", 14, 14,\n\t`<g transform=\"scale(1, 0.7)\">` +\n\t\t`<polyline fill=\"none\" stroke=\"#fff\" stroke-width=\"1\" points=\"6 16 10 10 6 4\"></polyline>` +\n\t`</g>`\n);\n\nDThemeWhiteAtlas.add( \"menu_item_expandable_header_opened\", 14, 14,\n\t`<g transform=\"scale(0.7, 1)\">` +\n\t\t`<polyline fill=\"none\" stroke=\"#fff\" stroke-width=\"1\" points=\"16 6 10 10 4 6\"></polyline>` +\n\t`</g>`\n);\n\nexport class DThemeWhiteExpandableHeader extends DThemeWhiteImage implements DThemeExpandableHeader {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn 0xf8f8f8;\n\t\t} else if( DBaseStates.isActiveIn( state ) ) {\n\t\t\treturn 0xf8f8f8;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 16;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 16;\n\t}\n\n\tgetCornerMask(): number {\n\t\treturn DCornerMask.ALL;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedSnapTargetValue } from \"../d-diagram-serialized\";\n\nexport enum ESnapperTargetValueType {\n\tHORIZONTAL = 0,\n\tVERTICAL = 1\n}\n\nexport class ESnapperTargetValue {\n\ttype: ESnapperTargetValueType;\n\tposition: number;\n\n\tconstructor( type: ESnapperTargetValueType, position: number ) {\n\t\tthis.type = type;\n\t\tthis.position = position;\n\t}\n\n\tserialize(): DDiagramSerializedSnapTargetValue {\n\t\treturn [ this.type, this.position ];\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteExpandable } from \"../theme/white/d-theme-white-expandable\";\nimport { DThemeWhiteExpandableHeader } from \"../theme/white/d-theme-white-expandable-header\";\n\nexport const loadThemeWhiteExpandable = () => {\n\tDThemeWhite.set( \"DExpandableHeader\", DThemeWhiteExpandableHeader );\n\tDThemeWhite.set( \"DExpandable\", DThemeWhiteExpandable );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteImage } from \"../theme/white/d-theme-white-image\";\n\nexport const loadThemeWhiteImage = () => {\n\tDThemeWhite.set( \"DImage\", DThemeWhiteImage );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DLayoutDirection } from \"../../d-layout\";\nimport { DThemeLayoutHorizontal } from \"../../d-layout-horizontal\";\nimport { DThemeWhiteLayout } from \"./d-theme-white-layout\";\n\nexport class DThemeWhiteLayoutHorizontal extends DThemeWhiteLayout implements DThemeLayoutHorizontal {\n\tgetDirection(): DLayoutDirection {\n\t\treturn DLayoutDirection.HORIZONTAL;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeInputAndLabel } from \"../../d-input-and-label\";\nimport { DThemeWhiteLayoutHorizontal } from \"./d-theme-white-layout-horizontal\";\n\nexport class DThemeWhiteInputAndLabel extends DThemeWhiteLayoutHorizontal implements DThemeInputAndLabel {\n\tgetHeight(): DCoordinate {\n\t\treturn this.getLineHeight();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteInputAndLabel } from \"../theme/white/d-theme-white-input-and-label\";\n\nexport const loadThemeWhiteInputAndLabel = () => {\n\tDThemeWhite.set( \"DInputAndLabel\", DThemeWhiteInputAndLabel );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeInput } from \"../../d-input\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteImageBase } from \"./d-theme-white-image-base\";\n\nconst editingValidator = (): unknown => {\n\treturn null;\n};\n\nconst editingUnformatter = ( text: string ): string => {\n\treturn text;\n};\n\nexport class DThemeWhiteInput extends DThemeWhiteImageBase implements DThemeInput {\n\tCOLOR = 0xffffff;\n\tCOLOR_HOVERED = UtilRgb.darken( this.COLOR, 0.017 );\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) || DBaseStates.isReadOnly( state ) ) {\n\t\t\treturn null;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn this.COLOR_HOVERED;\n\t\t} else {\n\t\t\treturn this.COLOR;\n\t\t}\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn 0xe5e5e5;\n\t}\n\n\tgetOutlineColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isInvalid( state ) ) {\n\t\t\treturn DThemeWhiteConstants.INVALID_COLOR;\n\t\t}\n\t\treturn super.getOutlineColor( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn this.getLineHeight();\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 100;\n\t}\n\n\tgetPlaceholder(): string {\n\t\treturn \"\";\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 10;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 10;\n\t}\n\n\tgetEditingFormatter(): ( value: any, caller: any ) => string {\n\t\treturn this.getTextFormatter();\n\t}\n\n\tgetEditingUnformatter(): ( text: string, caller: any ) => any {\n\t\treturn editingUnformatter;\n\t}\n\n\tgetEditingValidator(): ( value: any, caller: any ) => unknown {\n\t\treturn editingValidator;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeInputNumber } from \"../../d-input-number\";\nimport { DStateAwareOrValueMightBe } from \"../../d-state-aware\";\nimport { DThemeWhiteInput } from \"./d-theme-white-input\";\n\nexport class DThemeWhiteInputNumber extends DThemeWhiteInput implements DThemeInputNumber {\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.CENTER;\n\t}\n\n\tgetStep(): number | null {\n\t\treturn 1;\n\t}\n\n\tgetMin(): number | null {\n\t\treturn null;\n\t}\n\n\tgetMax(): number | null {\n\t\treturn null;\n\t}\n\n\tnewTextValue(): DStateAwareOrValueMightBe<number> {\n\t\treturn 0;\n\t}\n\n\tgetTextValue( state: DBaseState ): number {\n\t\treturn 0;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeInputInteger } from \"../../d-input-integer\";\nimport { DInputNumber } from \"../../d-input-number\";\nimport { DThemeWhiteInputNumber } from \"./d-theme-white-input-number\";\n\nconst editingUnformatter = ( text: string ): number => {\n\treturn parseInt( text, 10 );\n};\n\nexport class DThemeWhiteInputInteger extends DThemeWhiteInputNumber implements DThemeInputInteger {\n\tgetEditingUnformatter(): ( text: string, caller: DInputNumber ) => number {\n\t\treturn editingUnformatter;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteInputInteger } from \"../theme/white/d-theme-white-input-integer\";\n\nexport const loadThemeWhiteInputInteger = () => {\n\tDThemeWhite.set( \"DInputInteger\", DThemeWhiteInputInteger );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeInputLabel } from \"../../d-input-label\";\nimport { DThemeWhiteText } from \"./d-theme-white-text\";\n\nexport class DThemeWhiteInputLabel extends DThemeWhiteText implements DThemeInputLabel {\n\tgetTextAlignHorizontal() {\n\t\treturn DAlignHorizontal.RIGHT;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 60;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn this.getLineHeight();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteInputLabel } from \"../theme/white/d-theme-white-input-label\";\n\nexport const loadThemeWhiteInputLabel = () => {\n\tDThemeWhite.set( \"DInputLabel\", DThemeWhiteInputLabel );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DInputNumber } from \"../../d-input-number\";\nimport { DThemeInputReal } from \"../../d-input-real\";\nimport { DThemeWhiteInputNumber } from \"./d-theme-white-input-number\";\n\nconst editingUnformatter = ( text: string ): number => {\n\treturn parseFloat( text );\n};\n\nexport class DThemeWhiteInputReal extends DThemeWhiteInputNumber implements DThemeInputReal {\n\tgetStep(): number | null {\n\t\treturn 0.1;\n\t}\n\n\tgetEditingUnformatter(): ( text: string, caller: DInputNumber ) => number {\n\t\treturn editingUnformatter;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteInputReal } from \"../theme/white/d-theme-white-input-real\";\n\nexport const loadThemeWhiteInputReal = () => {\n\tDThemeWhite.set( \"DInputReal\", DThemeWhiteInputReal );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeInputText } from \"../../d-input-text\";\nimport { DStateAwareOrValueMightBe } from \"../../d-state-aware\";\nimport { DThemeWhiteInput } from \"./d-theme-white-input\";\n\nexport class DThemeWhiteInputText extends DThemeWhiteInput implements DThemeInputText {\n\tnewTextValue(): DStateAwareOrValueMightBe<string> {\n\t\treturn \"\";\n\t}\n\n\tgetTextValue( state: DBaseState ): string {\n\t\treturn \"\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteInputText } from \"../theme/white/d-theme-white-input-text\";\n\nexport const loadThemeWhiteInputText = () => {\n\tDThemeWhite.set( \"DInputText\", DThemeWhiteInputText );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { loadThemeWhiteInputAndLabel } from \"./load-theme-white-input-and-label\";\nimport { loadThemeWhiteInputInteger } from \"./load-theme-white-input-integer\";\nimport { loadThemeWhiteInputLabel } from \"./load-theme-white-input-label\";\nimport { loadThemeWhiteInputReal } from \"./load-theme-white-input-real\";\nimport { loadThemeWhiteInputText } from \"./load-theme-white-input-text\";\n\nexport const loadThemeWhiteInputAll = () => {\n\tloadThemeWhiteInputAndLabel();\n\tloadThemeWhiteInputInteger();\n\tloadThemeWhiteInputLabel();\n\tloadThemeWhiteInputReal();\n\tloadThemeWhiteInputText();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteLayout } from \"../theme/white/d-theme-white-layout\";\nimport { DThemeWhiteLayoutHorizontal } from \"../theme/white/d-theme-white-layout-horizontal\";\nimport { DThemeWhiteLayoutSpace } from \"../theme/white/d-theme-white-layout-space\";\nimport { DThemeWhiteLayoutVertical } from \"../theme/white/d-theme-white-layout-vertical\";\n\nexport const loadThemeWhiteLayout = () => {\n\tDThemeWhite.set( \"DLayout\", DThemeWhiteLayout );\n\tDThemeWhite.set( \"DLayoutHorizontal\", DThemeWhiteLayoutHorizontal );\n\tDThemeWhite.set( \"DLayoutSpace\", DThemeWhiteLayoutSpace );\n\tDThemeWhite.set( \"DLayoutVertical\", DThemeWhiteLayoutVertical );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteList } from \"../theme/white/d-theme-white-list\";\nimport { DThemeWhiteListItem } from \"../theme/white/d-theme-white-list-item\";\nimport { DThemeWhiteListItemSeparator } from \"../theme/white/d-theme-white-list-item-separator\";\n\nexport const loadThemeWhiteList = () => {\n\tDThemeWhite.set( \"DListItemSeparator\", DThemeWhiteListItemSeparator );\n\tDThemeWhite.set( \"DListItem\", DThemeWhiteListItem );\n\tDThemeWhite.set( \"DList\", DThemeWhiteList );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeMenuBar } from \"../../d-menu-bar\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteLayoutHorizontal } from \"./d-theme-white-layout-horizontal\";\n\nexport class DThemeWhiteMenuBar extends DThemeWhiteLayoutHorizontal implements DThemeMenuBar {\n\tgetBackgroundColor() {\n\t\treturn DThemeWhiteConstants.BACKGROUND_COLOR;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetMargin(): number {\n\t\treturn 0;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeMenuBarItem } from \"../../d-menu-bar-item\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\n\nexport class DThemeWhiteMenuBarItem extends DThemeWhiteButton implements DThemeMenuBarItem {\n\tCOLOR = 0xffffff;\n\tCOLOR_HOVERED = UtilRgb.darken( this.COLOR, 0.017 );\n\tCOLOR_PRESSED = UtilRgb.darken( this.COLOR, 0.034 );\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t} else if( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t} else if( DBaseStates.isPressed( state ) ) {\n\t\t\treturn this.COLOR_PRESSED;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn this.COLOR_HOVERED;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetBorderColor(): number | null {\n\t\treturn null;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"100%\";\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 10;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 10;\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DCornerMask.ALL;\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.LEFT;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteMenuBar } from \"../theme/white/d-theme-white-menu-bar\";\nimport { DThemeWhiteMenuBarItem } from \"../theme/white/d-theme-white-menu-bar-item\";\nimport { loadThemeWhiteMenu } from \"./load-theme-white-menu\";\n\nexport const loadThemeWhiteMenuBar = () => {\n\tDThemeWhite.set( \"DMenuBarItem\", DThemeWhiteMenuBarItem );\n\tDThemeWhite.set( \"DMenuBar\", DThemeWhiteMenuBar );\n\tloadThemeWhiteMenu();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeMenuSided } from \"../../d-menu-sided\";\nimport { DThemeWhitePane } from \"./d-theme-white-pane\";\n\nexport class DThemeWhiteMenuSided extends DThemeWhitePane implements DThemeMenuSided {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn 0xffffff;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeMenuSidedContent } from \"../../d-menu-sided-content\";\nimport { DThemeWhiteLayoutVertical } from \"./d-theme-white-layout-vertical\";\n\nexport class DThemeWhiteMenuSidedContent extends DThemeWhiteLayoutVertical implements DThemeMenuSidedContent {\n\tgetWidth(): DCoordinate {\n\t\treturn \"100%\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetPaddingTop(): number {\n\t\treturn 16;\n\t}\n\n\tgetPaddingBottom(): number {\n\t\treturn 16;\n\t}\n\n\tgetMargin(): number {\n\t\treturn 0;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemCheck } from \"./d-theme-white-menu-item-check\";\n\nexport class DThemeWhiteMenuSidedItemCheck extends DThemeWhiteMenuItemCheck {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemExpandable } from \"./d-theme-white-menu-item-expandable\";\n\nexport class DThemeWhiteMenuSidedItemExpandable extends DThemeWhiteMenuItemExpandable {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemExpandableItemCheck } from \"./d-theme-white-menu-item-expandable-item-check\";\n\nexport class DThemeWhiteMenuSidedItemExpandableItemCheck extends DThemeWhiteMenuItemExpandableItemCheck {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemExpandableItemLink } from \"./d-theme-white-menu-item-expandable-item-link\";\n\nexport class DThemeWhiteMenuSidedItemExpandableItemLink extends DThemeWhiteMenuItemExpandableItemLink {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemExpandableItemMenu } from \"./d-theme-white-menu-item-expandable-item-menu\";\n\nexport class DThemeWhiteMenuSidedItemExpandableItemMenu extends DThemeWhiteMenuItemExpandableItemMenu {\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemExpandableItemSeparator } from \"./d-theme-white-menu-item-expandable-item-separator\";\n\nexport class DThemeWhiteMenuSidedItemExpandableItemSeparator extends DThemeWhiteMenuItemExpandableItemSeparator {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemExpandableItemSpace } from \"./d-theme-white-menu-item-expandable-item-space\";\n\nexport class DThemeWhiteMenuSidedItemExpandableItemSpace extends DThemeWhiteMenuItemExpandableItemSpace {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemExpandableItemText } from \"./d-theme-white-menu-item-expandable-item-text\";\n\nexport class DThemeWhiteMenuSidedItemExpandableItemText extends DThemeWhiteMenuItemExpandableItemText {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemLink } from \"./d-theme-white-menu-item-link\";\n\nexport class DThemeWhiteMenuSidedItemLink extends DThemeWhiteMenuItemLink {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemMenu } from \"./d-theme-white-menu-item-menu\";\n\nexport class DThemeWhiteMenuSidedItemMenu extends DThemeWhiteMenuItemMenu {\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemSeparator } from \"./d-theme-white-menu-item-separator\";\n\nexport class DThemeWhiteMenuSidedItemSeparator extends DThemeWhiteMenuItemSeparator {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemSpace } from \"./d-theme-white-menu-item-space\";\n\nexport class DThemeWhiteMenuSidedItemSpace extends DThemeWhiteMenuItemSpace {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemText } from \"./d-theme-white-menu-item-text\";\n\nexport class DThemeWhiteMenuSidedItemText extends DThemeWhiteMenuItemText {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteMenuSided } from \"../theme/white/d-theme-white-menu-sided\";\nimport { DThemeWhiteMenuSidedContent } from \"../theme/white/d-theme-white-menu-sided-content\";\nimport { DThemeWhiteMenuSidedItemCheck } from \"../theme/white/d-theme-white-menu-sided-item-check\";\nimport { DThemeWhiteMenuSidedItemExpandable } from \"../theme/white/d-theme-white-menu-sided-item-expandable\";\nimport {\n\tDThemeWhiteMenuSidedItemExpandableItemCheck\n} from \"../theme/white/d-theme-white-menu-sided-item-expandable-item-check\";\nimport {\n\tDThemeWhiteMenuSidedItemExpandableItemLink\n} from \"../theme/white/d-theme-white-menu-sided-item-expandable-item-link\";\nimport {\n\tDThemeWhiteMenuSidedItemExpandableItemMenu\n} from \"../theme/white/d-theme-white-menu-sided-item-expandable-item-menu\";\nimport {\n\tDThemeWhiteMenuSidedItemExpandableItemSeparator\n} from \"../theme/white/d-theme-white-menu-sided-item-expandable-item-separator\";\nimport {\n\tDThemeWhiteMenuSidedItemExpandableItemSpace\n} from \"../theme/white/d-theme-white-menu-sided-item-expandable-item-space\";\nimport {\n\tDThemeWhiteMenuSidedItemExpandableItemText\n} from \"../theme/white/d-theme-white-menu-sided-item-expandable-item-text\";\nimport { DThemeWhiteMenuSidedItemLink } from \"../theme/white/d-theme-white-menu-sided-item-link\";\nimport { DThemeWhiteMenuSidedItemMenu } from \"../theme/white/d-theme-white-menu-sided-item-menu\";\nimport { DThemeWhiteMenuSidedItemSeparator } from \"../theme/white/d-theme-white-menu-sided-item-separator\";\nimport { DThemeWhiteMenuSidedItemSpace } from \"../theme/white/d-theme-white-menu-sided-item-space\";\nimport { DThemeWhiteMenuSidedItemText } from \"../theme/white/d-theme-white-menu-sided-item-text\";\n\nexport const loadThemeWhiteMenuSided = () => {\n\tDThemeWhite.set( \"DMenuSided\", DThemeWhiteMenuSided );\n\tDThemeWhite.set( \"DMenuSidedContent\", DThemeWhiteMenuSidedContent );\n\n\tDThemeWhite.set( \"DMenuSidedItemCheck\", DThemeWhiteMenuSidedItemCheck );\n\tDThemeWhite.set( \"DMenuSidedItemLink\", DThemeWhiteMenuSidedItemLink );\n\tDThemeWhite.set( \"DMenuSidedItemMenu\", DThemeWhiteMenuSidedItemMenu );\n\tDThemeWhite.set( \"DMenuSidedItemSeparator\", DThemeWhiteMenuSidedItemSeparator );\n\tDThemeWhite.set( \"DMenuSidedItemSpace\", DThemeWhiteMenuSidedItemSpace );\n\tDThemeWhite.set( \"DMenuSidedItemText\", DThemeWhiteMenuSidedItemText );\n\n\tDThemeWhite.set( \"DMenuSidedItemExpandable\", DThemeWhiteMenuSidedItemExpandable );\n\tDThemeWhite.set( \"DMenuSidedItemExpandableItemCheck\", DThemeWhiteMenuSidedItemExpandableItemCheck );\n\tDThemeWhite.set( \"DMenuSidedItemExpandableItemLink\", DThemeWhiteMenuSidedItemExpandableItemLink );\n\tDThemeWhite.set( \"DMenuSidedItemExpandableItemMenu\", DThemeWhiteMenuSidedItemExpandableItemMenu );\n\tDThemeWhite.set( \"DMenuSidedItemExpandableItemSeparator\", DThemeWhiteMenuSidedItemExpandableItemSeparator );\n\tDThemeWhite.set( \"DMenuSidedItemExpandableItemSpace\", DThemeWhiteMenuSidedItemExpandableItemSpace );\n\tDThemeWhite.set( \"DMenuSidedItemExpandableItemText\", DThemeWhiteMenuSidedItemExpandableItemText );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeNote } from \"../../d-note\";\nimport { DThemeWhiteText } from \"./d-theme-white-text\";\n\nexport class DThemeWhiteNote extends DThemeWhiteText implements DThemeNote {\n\tgetWidth(): DCoordinate {\n\t\treturn \"100%\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"100%\";\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.CENTER;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.NONE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteNote } from \"../theme/white/d-theme-white-note\";\n\nexport const loadThemeWhiteNote = () => {\n\tDThemeWhite.set( \"DNote\", DThemeWhiteNote );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhiteContent extends DThemeWhiteBase {\n\tgetWidth(): DCoordinate {\n\t\treturn \"100%\";\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeScrollBar } from \"../../d-scroll-bar\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhiteScrollBar extends DThemeWhiteBase implements DThemeScrollBar {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn 0x000000;\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn 0;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 13;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 13;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeScrollBarThumb } from \"../../d-scroll-bar-thumb\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\n\nexport class DThemeWhiteScrollBarThumb extends DThemeWhiteBase implements DThemeScrollBarThumb {\n\tCOLOR = UtilRgb.darken( DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR, 0.25 );\n\n\tgetBackgroundColor( state: DBaseState ): number {\n\t\tif( DBaseStates.isHovered( state ) || DBaseStates.isDragging( state ) ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t} else {\n\t\t\treturn this.COLOR;\n\t\t}\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\tif( DBaseStates.isHovered( state ) || DBaseStates.isDragging( state ) ) {\n\t\t\treturn 1.0;\n\t\t} else {\n\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_ALPHA;\n\t\t}\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetBorderAlpha( state: DBaseState ): number {\n\t\treturn 0;\n\t}\n\n\tgetBorderWidth( state: DBaseState ): number {\n\t\treturn 1;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 13;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 13;\n\t}\n\n\tgetMinimumSize(): number {\n\t\treturn 16;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteScrollBar } from \"../theme/white/d-theme-white-scroll-bar\";\nimport { DThemeWhiteScrollBarThumb } from \"../theme/white/d-theme-white-scroll-bar-thumb\";\n\nexport const loadThemeWhiteScrollBar = () => {\n\tDThemeWhite.set( \"DScrollBar\", DThemeWhiteScrollBar );\n\tDThemeWhite.set( \"DScrollBarThumb\", DThemeWhiteScrollBarThumb );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteContent } from \"../theme/white/d-theme-white-content\";\nimport { DThemeWhitePane } from \"../theme/white/d-theme-white-pane\";\nimport { loadThemeWhiteScrollBar } from \"./load-theme-white-scroll-bar\";\n\nexport const loadThemeWhitePane = () => {\n\tDThemeWhite.set( \"DPane\", DThemeWhitePane );\n\tDThemeWhite.set( \"DContent\", DThemeWhiteContent );\n\tloadThemeWhiteScrollBar();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeSelect } from \"../../d-select\";\nimport { DThemeWhiteDropdown } from \"./d-theme-white-dropdown\";\n\nexport class DThemeWhiteSelect extends DThemeWhiteDropdown implements DThemeSelect {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteSelect } from \"../theme/white/d-theme-white-select\";\nimport { loadThemeWhiteDropdown } from \"./load-theme-white-dropdown\";\n\nexport const loadThemeWhiteSelect = () => {\n\tDThemeWhite.set( \"DSelect\", DThemeWhiteSelect );\n\tloadThemeWhiteDropdown();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeTable } from \"../../d-table\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteLayoutVertical } from \"./d-theme-white-layout-vertical\";\n\nexport class DThemeWhiteTable extends DThemeWhiteLayoutVertical implements DThemeTable {\n\tgetBackgroundColor() {\n\t\treturn DThemeWhiteConstants.BACKGROUND_COLOR;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn 0xdddddd;\n\t}\n\n\tgetMargin(): number {\n\t\treturn 0;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBody } from \"../../d-table-body\";\nimport { DThemeWhitePane } from \"./d-theme-white-pane\";\n\nexport class DThemeWhiteTableBody extends DThemeWhitePane implements DThemeTableBody {\n\tgetWidth(): DCoordinate {\n\t\treturn \"100%\";\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DCornerMask.TOP;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetRowHeight(): number {\n\t\treturn 30;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteFont } from \"./d-theme-white-font\";\n\nexport class DThemeWhiteTableBodyCells {\n\tstatic readonly IMAGE_TINT_COLOR_FOCUSED = UtilRgb.darken( DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR, 0.1 );\n\n\tstatic getBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isInvalid( state ) ) {\n\t\t\treturn DThemeWhiteConstants.INVALID_COLOR;\n\t\t} else if( state & DBaseState.ACTIVE_IN ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t} else {\n\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t\t}\n\t}\n\n\tstatic getBackgroundAlpha( state: DBaseState ): number {\n\t\tif( ! DBaseStates.isDisabled( state ) ) {\n\t\t\tif( DBaseStates.isPressed( state ) || DBaseStates.isFocused( state ) ) {\n\t\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_ALPHA;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tstatic getBorderColor( state: DBaseState ): number | null {\n\t\treturn 0xf6f6f6;\n\t}\n\n\tstatic getBorderAlign( state: DBaseState ): number {\n\t\treturn 0.5;\n\t}\n\n\tstatic getBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DBorderMask.TOP_BOTTOM;\n\t}\n\n\tstatic getColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteFont.getColor( state );\n\t}\n\n\tstatic getAlpha( state: DBaseState ): number {\n\t\tif( ! DBaseStates.isDisabled( state ) ) {\n\t\t\treturn DThemeWhiteFont.getAlpha( state );\n\t\t}\n\t\treturn 0;\n\t}\n\n\tstatic getImageTintColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) || DBaseStates.isReadOnly( state ) || ! DBaseStates.isActive( state ) ) {\n\t\t\tif( DBaseStates.isFocused( state ) ) {\n\t\t\t\treturn this.IMAGE_TINT_COLOR_FOCUSED;\n\t\t\t} else {\n\t\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t\t\t}\n\t\t} else {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t}\n\t}\n\n\tstatic getOutlineAlign( state: DBaseState ): number {\n\t\treturn -2;\n\t}\n\n\tstatic getHeight(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tstatic getCornerMask(): DCornerMask {\n\t\treturn DCornerMask.ALL;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBodyCellCheck } from \"../../d-table-body-cell-check\";\nimport { DThemeWhiteButtonCheck } from \"./d-theme-white-button-check\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nexport class DThemeWhiteTableBodyCellCheck extends DThemeWhiteButtonCheck implements DThemeTableBodyCellCheck {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetImageTintColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getImageTintColor( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBodyCellColor } from \"../../d-table-body-cell-color\";\nimport { DThemeWhiteButtonColor } from \"./d-theme-white-button-color\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nexport class DThemeWhiteTableBodyCellColor extends DThemeWhiteButtonColor implements DThemeTableBodyCellColor {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DPickerDates } from \"../../d-picker-dates\";\nimport { DTableBodyCellDate, DThemeTableBodyCellDate } from \"../../d-table-body-cell-date\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nconst formatter = ( value: Date ): string => {\n\treturn DPickerDates.format( value );\n};\n\nexport class DThemeWhiteTableBodyCellDate extends DThemeWhiteButton implements DThemeTableBodyCellDate {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state);\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n\n\tgetTextFormatter(): ( value: Date, caller: DTableBodyCellDate ) => string {\n\t\treturn formatter;\n\t}\n\n\tgetTextValue( state: DBaseState ): Date {\n\t\treturn new Date();\n\t}\n\n\tnewTextValue(): Date {\n\t\treturn new Date();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DPickerDatetimes } from \"../../d-picker-datetimes\";\nimport { DTableBodyCellDatetime, DThemeTableBodyCellDatetime } from \"../../d-table-body-cell-datetime\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nconst formatter = ( value: Date, caller: DTableBodyCellDatetime ): string => {\n\treturn DPickerDatetimes.format( value, caller.getDatetimeMask() );\n};\n\nexport class DThemeWhiteTableBodyCellDatetime extends DThemeWhiteButton implements DThemeTableBodyCellDatetime {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n\n\tgetTextFormatter(): ( value: Date, caller: DTableBodyCellDatetime ) => string {\n\t\treturn formatter;\n\t}\n\n\tgetTextValue( state: DBaseState ): Date {\n\t\treturn new Date();\n\t}\n\n\tnewTextValue(): Date {\n\t\treturn new Date();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DTableBodyCellIndex, DThemeTableBodyCellIndex } from \"../../d-table-body-cell-index\";\nimport { DThemeWhiteImageBase } from \"./d-theme-white-image-base\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nconst formatter = ( index: unknown ): string => {\n\treturn String( Number( index ) + 1 );\n};\n\nexport class DThemeWhiteTableBodyCellIndex extends DThemeWhiteImageBase implements DThemeTableBodyCellIndex {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 10;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 10;\n\t}\n\n\tgetTextFormatter(): ( value: number, caller: DTableBodyCellIndex ) => string {\n\t\treturn formatter;\n\t}\n\n\tgetTextValue( state: DBaseState ): number {\n\t\treturn 0;\n\t}\n\n\tnewTextValue(): number {\n\t\treturn 0;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBodyCellInputInteger } from \"../../d-table-body-cell-input-integer\";\nimport { DThemeWhiteInputInteger } from \"./d-theme-white-input-integer\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nexport class DThemeWhiteTableBodyCellInputInteger extends DThemeWhiteInputInteger\n\timplements DThemeTableBodyCellInputInteger {\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.RIGHT;\n\t}\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n\n\tgetOutlineColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn super.getOutlineColor( state );\n\t}\n\n\tgetOutlineAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getOutlineAlign( state );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBodyCellInputReal } from \"../../d-table-body-cell-input-real\";\nimport { DThemeWhiteInputReal } from \"./d-theme-white-input-real\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nexport class DThemeWhiteTableBodyCellInputReal extends DThemeWhiteInputReal\n\timplements DThemeTableBodyCellInputReal {\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.RIGHT;\n\t}\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n\n\tgetOutlineColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn super.getOutlineColor( state );\n\t}\n\n\tgetOutlineAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getOutlineAlign( state );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBodyCellInputText } from \"../../d-table-body-cell-input-text\";\nimport { DThemeWhiteInputText } from \"./d-theme-white-input-text\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nexport class DThemeWhiteTableBodyCellInputText extends DThemeWhiteInputText\n\timplements DThemeTableBodyCellInputText {\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n\n\tgetOutlineColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn super.getOutlineColor( state );\n\t}\n\n\tgetOutlineAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getOutlineAlign( state );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBodyCellSelectDialog } from \"../../d-table-body-cell-select-dialog\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nexport class DThemeWhiteTableBodyCellSelectDialog extends DThemeWhiteButton\n\timplements DThemeTableBodyCellSelectDialog {\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBodyCellSelectFetcher } from \"../../d-table-body-cell-select-fetcher\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nexport class DThemeWhiteTableBodyCellSelectFetcher extends DThemeWhiteButton\n\timplements DThemeTableBodyCellSelectFetcher {\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBodyCellSelectMenu } from \"../../d-table-body-cell-select-menu\";\nimport { DThemeWhiteSelect } from \"./d-theme-white-select\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nexport class DThemeWhiteTableBodyCellSelectMenu extends DThemeWhiteSelect\n\timplements DThemeTableBodyCellSelectMenu {\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBodyCellText } from \"../../d-table-body-cell-text\";\nimport { DThemeWhiteImageBase } from \"./d-theme-white-image-base\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nexport class DThemeWhiteTableBodyCellText extends DThemeWhiteImageBase implements DThemeTableBodyCellText {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 10;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 10;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DPickerTimes } from \"../../d-picker-times\";\nimport { DTableBodyCellTime, DThemeTableBodyCellTime } from \"../../d-table-body-cell-time\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nconst formatter = ( value: Date, caller: DTableBodyCellTime ): string => {\n\treturn DPickerTimes.format( value, caller.getDatetimeMask() );\n};\n\nexport class DThemeWhiteTableBodyCellTime extends DThemeWhiteButton\n\timplements DThemeTableBodyCellTime {\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n\n\tgetTextFormatter(): ( value: Date, caller: DTableBodyCellTime ) => string {\n\t\treturn formatter;\n\t}\n\n\tgetTextValue( state: DBaseState ): Date {\n\t\treturn new Date();\n\t}\n\n\tnewTextValue(): Date {\n\t\treturn new Date();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableRow } from \"../../d-table-row\";\nimport { DThemeWhiteLayoutHorizontal } from \"./d-theme-white-layout-horizontal\";\n\nexport class DThemeWhiteTableRow extends DThemeWhiteLayoutHorizontal implements DThemeTableRow {\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetCornerMask(): number {\n\t\treturn DCornerMask.ALL;\n\t}\n\n\tgetMargin(): number {\n\t\treturn 0;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeTableBodyRow } from \"../../d-table-body-row\";\nimport { DThemeWhiteTableRow } from \"./d-theme-white-table-row\";\n\nexport class DThemeWhiteTableBodyRow extends DThemeWhiteTableRow implements DThemeTableBodyRow {\n\tgetWidth(): DCoordinate {\n\t\treturn \"100%\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DThemeTableBodyRow } from \"../../d-table-body-row\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteTableBodyRow } from \"./d-theme-white-table-body-row\";\n\nexport class DThemeWhiteTableBodyRowEven extends DThemeWhiteTableBodyRow implements DThemeTableBodyRow {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn 0xffffff;\n\t\t} else if( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_BLENDED;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_BLENDED;\n\t\t} else {\n\t\t\treturn 0xffffff;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DThemeTableBodyRow } from \"../../d-table-body-row\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteTableBodyRow } from \"./d-theme-white-table-body-row\";\n\nexport class DThemeWhiteTableBodyRowOdd extends DThemeWhiteTableBodyRow implements DThemeTableBodyRow {\n\tCOLOR = UtilRgb.darken( 0xffffff, 0.017 );\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn this.COLOR;\n\t\t} else if( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_BLENDED;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_BLENDED;\n\t\t} else {\n\t\t\treturn this.COLOR;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeTableHeader } from \"../../d-table-header\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteTableRow } from \"./d-theme-white-table-row\";\n\nexport class DThemeWhiteTableHeader extends DThemeWhiteTableRow implements DThemeTableHeader {\n\tCOLOR = 0xf9f9f9;\n\tCOLOR_HOVERED = UtilRgb.darken( this.COLOR, 0.017 );\n\tCOLOR_PRESSED = UtilRgb.darken( this.COLOR, 0.034 );\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t} else if( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t} else if( DBaseStates.isPressed( state ) ) {\n\t\t\treturn this.COLOR_PRESSED;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn this.COLOR_HOVERED;\n\t\t} else {\n\t\t\treturn this.COLOR;\n\t\t}\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn \"100%\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 30;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DStateAwareOrValueMightBe } from \"../../d-state-aware\";\nimport { DThemeTableHeaderCell } from \"../../d-table-header-cell\";\nimport { DThemeWhiteTextBase } from \"./d-theme-white-text-base\";\n\nexport class DThemeWhiteTableHeaderCell extends DThemeWhiteTextBase implements DThemeTableHeaderCell {\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.CENTER;\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DCornerMask.ALL;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 10;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 10;\n\t}\n\n\tgetTextValue( state: DBaseState ): string | null {\n\t\treturn null;\n\t}\n\n\tnewTextValue(): DStateAwareOrValueMightBe<string | null> {\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteTable } from \"../theme/white/d-theme-white-table\";\nimport { DThemeWhiteTableBody } from \"../theme/white/d-theme-white-table-body\";\nimport { DThemeWhiteTableBodyCellCheck } from \"../theme/white/d-theme-white-table-body-cell-check\";\nimport { DThemeWhiteTableBodyCellColor } from \"../theme/white/d-theme-white-table-body-cell-color\";\nimport { DThemeWhiteTableBodyCellDate } from \"../theme/white/d-theme-white-table-body-cell-date\";\nimport { DThemeWhiteTableBodyCellDatetime } from \"../theme/white/d-theme-white-table-body-cell-datetime\";\nimport { DThemeWhiteTableBodyCellIndex } from \"../theme/white/d-theme-white-table-body-cell-index\";\nimport { DThemeWhiteTableBodyCellInputInteger } from \"../theme/white/d-theme-white-table-body-cell-input-integer\";\nimport { DThemeWhiteTableBodyCellInputReal } from \"../theme/white/d-theme-white-table-body-cell-input-real\";\nimport { DThemeWhiteTableBodyCellInputText } from \"../theme/white/d-theme-white-table-body-cell-input-text\";\nimport { DThemeWhiteTableBodyCellSelectDialog } from \"../theme/white/d-theme-white-table-body-cell-select-dialog\";\nimport { DThemeWhiteTableBodyCellSelectFetcher } from \"../theme/white/d-theme-white-table-body-cell-select-fetcher\";\nimport { DThemeWhiteTableBodyCellSelectMenu } from \"../theme/white/d-theme-white-table-body-cell-select-menu\";\nimport { DThemeWhiteTableBodyCellText } from \"../theme/white/d-theme-white-table-body-cell-text\";\nimport { DThemeWhiteTableBodyCellTime } from \"../theme/white/d-theme-white-table-body-cell-time\";\nimport { DThemeWhiteTableBodyRow } from \"../theme/white/d-theme-white-table-body-row\";\nimport { DThemeWhiteTableBodyRowEven } from \"../theme/white/d-theme-white-table-body-row-even\";\nimport { DThemeWhiteTableBodyRowOdd } from \"../theme/white/d-theme-white-table-body-row-odd\";\nimport { DThemeWhiteTableHeader } from \"../theme/white/d-theme-white-table-header\";\nimport { DThemeWhiteTableHeaderCell } from \"../theme/white/d-theme-white-table-header-cell\";\nimport { DThemeWhiteTableRow } from \"../theme/white/d-theme-white-table-row\";\nimport { loadThemeWhiteButtonCheck } from \"./load-theme-white-button-check\";\nimport { loadThemeWhiteButtonColor } from \"./load-theme-white-button-color\";\nimport { loadThemeWhiteButtonDate } from \"./load-theme-white-button-date\";\nimport { loadThemeWhiteButtonDatetime } from \"./load-theme-white-button-datetime\";\nimport { loadThemeWhiteDialogSelect } from \"./load-theme-white-dialog-select\";\nimport { loadThemeWhiteInputInteger } from \"./load-theme-white-input-integer\";\nimport { loadThemeWhiteInputReal } from \"./load-theme-white-input-real\";\nimport { loadThemeWhiteInputText } from \"./load-theme-white-input-text\";\nimport { loadThemeWhiteMenu } from \"./load-theme-white-menu\";\n\nexport const loadThemeWhiteTable = () => {\n\tDThemeWhite.set( \"DTableBodyCellCheck\", DThemeWhiteTableBodyCellCheck );\n\tDThemeWhite.set( \"DTableBodyCellColor\", DThemeWhiteTableBodyCellColor );\n\tDThemeWhite.set( \"DTableBodyCellDate\", DThemeWhiteTableBodyCellDate );\n\tDThemeWhite.set( \"DTableBodyCellDatetime\", DThemeWhiteTableBodyCellDatetime );\n\tDThemeWhite.set( \"DTableBodyCellIndex\", DThemeWhiteTableBodyCellIndex );\n\tDThemeWhite.set( \"DTableBodyCellInputInteger\", DThemeWhiteTableBodyCellInputInteger );\n\tDThemeWhite.set( \"DTableBodyCellInputReal\", DThemeWhiteTableBodyCellInputReal );\n\tDThemeWhite.set( \"DTableBodyCellInputText\", DThemeWhiteTableBodyCellInputText );\n\tDThemeWhite.set( \"DTableBodyCellSelectDialog\", DThemeWhiteTableBodyCellSelectDialog );\n\tDThemeWhite.set( \"DTableBodyCellSelectFetcher\", DThemeWhiteTableBodyCellSelectFetcher );\n\tDThemeWhite.set( \"DTableBodyCellSelectMenu\", DThemeWhiteTableBodyCellSelectMenu );\n\tDThemeWhite.set( \"DTableBodyCellText\", DThemeWhiteTableBodyCellText );\n\tDThemeWhite.set( \"DTableBodyCellTime\", DThemeWhiteTableBodyCellTime );\n\tDThemeWhite.set( \"DTableBodyRowEven\", DThemeWhiteTableBodyRowEven );\n\tDThemeWhite.set( \"DTableBodyRowOdd\", DThemeWhiteTableBodyRowOdd );\n\tDThemeWhite.set( \"DTableBodyRow\", DThemeWhiteTableBodyRow );\n\tDThemeWhite.set( \"DTableBody\", DThemeWhiteTableBody );\n\tDThemeWhite.set( \"DTableHeaderCell\", DThemeWhiteTableHeaderCell );\n\tDThemeWhite.set( \"DTableHeader\", DThemeWhiteTableHeader );\n\tDThemeWhite.set( \"DTableRow\", DThemeWhiteTableRow );\n\tDThemeWhite.set( \"DTable\", DThemeWhiteTable );\n\tloadThemeWhiteButtonCheck();\n\tloadThemeWhiteButtonColor();\n\tloadThemeWhiteButtonDate();\n\tloadThemeWhiteButtonDatetime();\n\tloadThemeWhiteInputInteger();\n\tloadThemeWhiteInputReal();\n\tloadThemeWhiteInputText();\n\tloadThemeWhiteDialogSelect();\n\tloadThemeWhiteMenu();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteText } from \"../theme/white/d-theme-white-text\";\n\nexport const loadThemeWhiteText = () => {\n\tDThemeWhite.set( \"DText\", DThemeWhiteText );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { loadThemeWhite } from \"./load-theme-white\";\nimport { loadThemeWhiteBase } from \"./load-theme-white-base\";\nimport { loadThemeWhiteBoard } from \"./load-theme-white-board\";\nimport { loadThemeWhiteButtonAll } from \"./load-theme-white-button-all\";\nimport { loadThemeWhiteCanvasContainer } from \"./load-theme-white-canvas-container\";\nimport { loadThemeWhiteChart } from \"./load-theme-white-chart\";\nimport { loadThemeWhiteDiagram } from \"./load-theme-white-diagram\";\nimport { loadThemeWhiteDiagramEditor } from \"./load-theme-white-diagram-editor\";\nimport { loadThemeWhiteDialogAll } from \"./load-theme-white-dialog-all\";\nimport { loadThemeWhiteDropdown } from \"./load-theme-white-dropdown\";\nimport { loadThemeWhiteExpandable } from \"./load-theme-white-expandable\";\nimport { loadThemeWhiteImage } from \"./load-theme-white-image\";\nimport { loadThemeWhiteInputAll } from \"./load-theme-white-input-all\";\nimport { loadThemeWhiteLayout } from \"./load-theme-white-layout\";\nimport { loadThemeWhiteList } from \"./load-theme-white-list\";\nimport { loadThemeWhiteMenu } from \"./load-theme-white-menu\";\nimport { loadThemeWhiteMenuBar } from \"./load-theme-white-menu-bar\";\nimport { loadThemeWhiteMenuSided } from \"./load-theme-white-menu-sided\";\nimport { loadThemeWhiteNote } from \"./load-theme-white-note\";\nimport { loadThemeWhitePane } from \"./load-theme-white-pane\";\nimport { loadThemeWhitePickerColor } from \"./load-theme-white-picker-color\";\nimport { loadThemeWhitePickerColorGradient } from \"./load-theme-white-picker-color-gradient\";\nimport { loadThemeWhitePickerDate } from \"./load-theme-white-picker-date\";\nimport { loadThemeWhitePickerDatetime } from \"./load-theme-white-picker-datetime\";\nimport { loadThemeWhitePickerTime } from \"./load-theme-white-picker-time\";\nimport { loadThemeWhiteSelect } from \"./load-theme-white-select\";\nimport { loadThemeWhiteTable } from \"./load-theme-white-table\";\nimport { loadThemeWhiteText } from \"./load-theme-white-text\";\n\nexport const loadThemeWhiteAll = () => {\n\tloadThemeWhite();\n\tloadThemeWhiteBase();\n\tloadThemeWhiteBoard();\n\tloadThemeWhiteButtonAll();\n\tloadThemeWhiteCanvasContainer();\n\tloadThemeWhiteChart();\n\tloadThemeWhiteDiagramEditor();\n\tloadThemeWhiteDiagram();\n\tloadThemeWhiteDialogAll();\n\tloadThemeWhiteDropdown();\n\tloadThemeWhiteExpandable();\n\tloadThemeWhiteImage();\n\tloadThemeWhiteInputAll();\n\tloadThemeWhiteLayout();\n\tloadThemeWhiteList();\n\tloadThemeWhiteMenuBar();\n\tloadThemeWhiteMenuSided();\n\tloadThemeWhiteMenu();\n\tloadThemeWhiteNote();\n\tloadThemeWhitePane();\n\tloadThemeWhitePickerColorGradient();\n\tloadThemeWhitePickerColor();\n\tloadThemeWhitePickerDate();\n\tloadThemeWhitePickerDatetime();\n\tloadThemeWhitePickerTime();\n\tloadThemeWhiteSelect();\n\tloadThemeWhiteTable();\n\tloadThemeWhiteText();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteChart } from \"../theme/white/d-theme-white-chart\";\nimport { DThemeWhiteChartAxisX } from \"../theme/white/d-theme-white-chart-axis-x\";\nimport { DThemeWhiteChartAxisY } from \"../theme/white/d-theme-white-chart-axis-y\";\nimport { DThemeWhiteChartCoordinateLinear } from \"../theme/white/d-theme-white-chart-coordinate-linear\";\n\nexport const loadThemeWhiteChart = () => {\n\tDThemeWhite.set( \"DChart\", DThemeWhiteChart );\n\tDThemeWhite.set( \"DChartAxisX\", DThemeWhiteChartAxisX );\n\tDThemeWhite.set( \"DChartAxisY\", DThemeWhiteChartAxisY );\n\tDThemeWhite.set( \"DChartCoordinateLinear\", DThemeWhiteChartCoordinateLinear );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { loadMenuItemAll } from \"./load-menu-item-all\";\nimport { loadShapeAll } from \"./load-shape-all\";\nimport { loadThemeWhiteAll } from \"./load-theme-white-all\";\n\nexport const loadAll = () => {\n\tloadMenuItemAll();\n\tloadThemeWhiteAll();\n\tloadShapeAll();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\nimport { DDiagramSerializedSnapGrid } from \"../d-diagram-serialized\";\nimport { ESnapperResult } from \"./e-snapper-result\";\n\nexport class ESnapperGrid extends utils.EventEmitter {\n\tprotected _isEnabled: boolean;\n\tprotected _size: number;\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis._isEnabled = true;\n\t\tthis._size = 10;\n\t}\n\n\ttoggle(): boolean {\n\t\tthis._isEnabled = ! this._isEnabled;\n\t\tthis.emit( \"change\", this );\n\t\treturn this._isEnabled;\n\t}\n\n\tenable(): void {\n\t\tif( this._isEnabled !== true ) {\n\t\t\tthis._isEnabled = true;\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tdisable(): void {\n\t\tif( this._isEnabled !== false ) {\n\t\t\tthis._isEnabled = false;\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this._isEnabled;\n\t}\n\n\tget size(): number {\n\t\treturn this._size;\n\t}\n\n\tset size( size: number ) {\n\t\tif( this._size !== size ) {\n\t\t\tthis._size = size;\n\t\t\tthis.emit( \"change\", size, this );\n\t\t}\n\t}\n\n\tsnap( value: number, result: ESnapperResult ): void {\n\t\tif( this._isEnabled ) {\n\t\t\tconst size = this._size;\n\t\t\tresult.set( value, Math.round( value / size ) * size );\n\t\t}\n\t}\n\n\treset(): void {\n\t\tthis._isEnabled = true;\n\t\tthis._size = 10;\n\t\tthis.emit( \"change\", this );\n\t}\n\n\tserialize(): DDiagramSerializedSnapGrid {\n\t\treturn [\n\t\t\t(this._isEnabled ? 1 : 0),\n\t\t\tthis._size\n\t\t];\n\t}\n\n\tdeserialize( serialized: DDiagramSerializedSnapGrid ): void {\n\t\tif( serialized[ 0 ] !== 0 ) {\n\t\t\tthis.enable();\n\t\t} else {\n\t\t\tthis.disable();\n\t\t}\n\n\t\tthis.size = serialized[ 1 ];\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class ESnapperResult {\n\tdistance: number;\n\tresult: number;\n\tthreshold: number;\n\n\tconstructor() {\n\t\tthis.distance = NaN;\n\t\tthis.result = 0;\n\t\tthis.threshold = 10;\n\t}\n\n\treset( value: number, scale: number ): void {\n\t\tthis.distance = NaN;\n\t\tthis.result = value;\n\t\tthis.threshold = ( 0.0001 < scale ? 10 / scale : 10 );\n\t}\n\n\tset( value: number, snapped: number ): void {\n\t\tconst newDistance = Math.abs( snapped - value );\n\t\tif( newDistance <= this.threshold ) {\n\t\t\tconst oldDistance = this.distance;\n\t\t\tif( oldDistance !== oldDistance || newDistance < oldDistance ) {\n\t\t\t\tthis.distance = newDistance;\n\t\t\t\tthis.result = snapped;\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, IPoint, Matrix, Point, Rectangle, utils } from \"pixi.js\";\nimport { DDiagramSerializedSnap } from \"../d-diagram-serialized\";\nimport { utilIsNaN } from \"../util/util-is-nan\";\nimport { ESnapperGrid } from \"./e-snapper-grid\";\nimport { ESnapperResult } from \"./e-snapper-result\";\nimport { ESnapperResultScale } from \"./e-snapper-result-scale\";\nimport { ESnapperTarget } from \"./e-snapper-target\";\n\nconst EPSILON = 0.00001;\n\nexport interface ESnapperModifier extends DisplayObject {\n\twidth: number;\n\theight: number;\n}\n\nexport enum ESnapperModifierAnchor {\n\tNONE,\n\tTOP_LEFT,\n\tTOP_CENTER,\n\tTOP_RIGHT,\n\tMIDDLE_LEFT,\n\tMIDDLE_RIGHT,\n\tBOTTOM_LEFT,\n\tBOTTOM_CENTER,\n\tBOTTOM_RIGHT,\n\tROTATION\n}\n\nexport interface ESnapperParentCanvas {\n\tscale: {\n\t\tx: number,\n\t\ty: number\n\t};\n\twidth: number;\n\theight: number;\n}\n\nexport interface ESnapperParent {\n\tcanvas: ESnapperParentCanvas | null;\n}\n\nexport class ESnapper extends utils.EventEmitter {\n\tprotected _points: Point[];\n\tprotected _normals: Point[];\n\tprotected _lengths: number[];\n\n\tprotected _workScale: Point;\n\tprotected _workScaleResult: ESnapperResultScale;\n\n\tprotected _workTranslate: Point;\n\n\tprotected _workSnap: Point;\n\tprotected _workSnapRectangle: Rectangle;\n\tprotected _workSnapResultX: ESnapperResult;\n\tprotected _workSnapResultY: ESnapperResult;\n\n\tprotected _parent: ESnapperParent;\n\n\tprotected _isEnabled: boolean;\n\n\tgrid: ESnapperGrid;\n\n\ttarget: ESnapperTarget;\n\n\tconstructor( parent: ESnapperParent ) {\n\t\tsuper();\n\n\t\tthis._points = [\n\t\t\tnew Point(), // Top left\n\t\t\tnew Point(), // Top right\n\t\t\tnew Point(), // Bottom left\n\t\t\tnew Point(), // Bottom right\n\t\t\tnew Point()  // Center\n\t\t];\n\n\t\tthis._normals = [\n\t\t\tnew Point(),\n\t\t\tnew Point()\n\t\t];\n\n\t\tthis._lengths = [\n\t\t\t1,\n\t\t\t1\n\t\t];\n\n\t\tthis._workScale = new Point();\n\t\tthis._workSnapResultX = new ESnapperResult();\n\t\tthis._workSnapResultY = new ESnapperResult();\n\t\tthis._workScaleResult = {\n\t\t\tdistance: 0,\n\t\t\tscale: new Point()\n\t\t};\n\n\t\tthis._workTranslate = new Point();\n\n\t\tthis._workSnapRectangle = new Rectangle();\n\t\tthis._workSnap = new Point();\n\n\t\t// Grid\n\t\tthis.grid = new ESnapperGrid();\n\n\t\t// Target\n\t\tthis.target = new ESnapperTarget();\n\n\t\t//\n\t\tthis._parent = parent;\n\t\tthis._isEnabled = true;\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this._isEnabled;\n\t}\n\n\ttoggle(): boolean {\n\t\tthis._isEnabled = ! this._isEnabled;\n\t\tthis.emit( \"change\", this );\n\t\treturn this._isEnabled;\n\t}\n\n\tenable(): void {\n\t\tif( this._isEnabled !== true ) {\n\t\t\tthis._isEnabled = true;\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tdisable(): void {\n\t\tif( this._isEnabled !== false ) {\n\t\t\tthis._isEnabled = false;\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tprotected prepare( modifier: ESnapperModifier ): void {\n\t\tmodifier.updateTransform();\n\t\tconst localTransform = modifier.transform.localTransform;\n\t\tconst sx = modifier.width;\n\t\tconst sy = modifier.height;\n\n\t\tconst points = this._points;\n\t\tpoints[ 0 ].set( 0, 0 );\n\t\tpoints[ 1 ].set( sx, 0 );\n\t\tpoints[ 2 ].set( sx, sy );\n\t\tpoints[ 3 ].set( 0, sy );\n\t\tpoints[ 4 ].set( sx * 0.5, sy * 0.5 );\n\n\t\tlocalTransform.apply( points[ 0 ], points[ 0 ] );\n\t\tlocalTransform.apply( points[ 1 ], points[ 1 ] );\n\t\tlocalTransform.apply( points[ 2 ], points[ 2 ] );\n\t\tlocalTransform.apply( points[ 3 ], points[ 3 ] );\n\t\tlocalTransform.apply( points[ 4 ], points[ 4 ] );\n\t}\n\n\tprepareForTranslate( modifier: ESnapperModifier ): void {\n\t\tif( this._isEnabled ) {\n\t\t\tthis.prepare( modifier );\n\t\t}\n\t}\n\n\tprotected snap( point: IPoint, result: IPoint ): IPoint {\n\t\tconst px = point.x;\n\t\tconst py = point.y;\n\t\tconst canvas = this._parent.canvas;\n\t\tconst x = this._workSnapResultX;\n\t\tconst y = this._workSnapResultY;\n\n\t\t// Canvas\n\t\tif( canvas != null ) {\n\t\t\tconst scale = Math.max( canvas.scale.x, canvas.scale.y );\n\t\t\tx.reset( px, scale );\n\t\t\ty.reset( py, scale );\n\t\t\tx.set( px, 0 );\n\t\t\tx.set( px, canvas.width );\n\t\t\ty.set( py, 0 );\n\t\t\ty.set( py, canvas.height );\n\t\t} else {\n\t\t\tx.reset( px, 1 );\n\t\t\ty.reset( py, 1 );\n\t\t}\n\n\t\t// Target\n\t\tthis.target.snap( px, py, x, y );\n\n\t\t// Grid\n\t\tthis.grid.snap( px, x );\n\t\tthis.grid.snap( py, y );\n\n\t\t//\n\t\tresult.x = ( utilIsNaN( x.distance ) ? NaN : x.result );\n\t\tresult.y = ( utilIsNaN( y.distance ) ? NaN : y.result );\n\t\treturn result;\n\t}\n\n\ttoSnapped( point: IPoint, result: IPoint ): IPoint {\n\t\tconst px = point.x;\n\t\tconst py = point.y;\n\t\tif( this._isEnabled ) {\n\t\t\tthis.snap( point, result );\n\t\t\tconst x = result.x;\n\t\t\tconst y = result.y;\n\t\t\tresult.set(\n\t\t\t\tutilIsNaN( x ) ? px : x,\n\t\t\t\tutilIsNaN( y ) ? py : y\n\t\t\t);\n\t\t} else {\n\t\t\tresult.set( px, py );\n\t\t}\n\t\treturn result;\n\t}\n\n\ttoTranslationSnapped( delta: IPoint, result: IPoint ): IPoint {\n\t\tconst dx = delta.x;\n\t\tconst dy = delta.y;\n\t\tlet x = NaN;\n\t\tlet y = NaN;\n\t\tif( this._isEnabled ) {\n\t\t\tconst workTranslate = this._workTranslate;\n\t\t\tconst points = this._points;\n\t\t\tfor( let i = 0, imax = points.length; i < imax; ++i ) {\n\t\t\t\tconst point = points[ i ];\n\t\t\t\tworkTranslate.set( point.x + dx, point.y + dy );\n\t\t\t\tthis.snap( workTranslate, workTranslate );\n\n\t\t\t\t// X\n\t\t\t\tif( ! utilIsNaN( workTranslate.x ) ) {\n\t\t\t\t\tconst newDx = workTranslate.x - point.x;\n\t\t\t\t\tif( utilIsNaN( x ) || Math.abs( newDx - dx ) < Math.abs( x - dx ) ) {\n\t\t\t\t\t\tx = newDx;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Y\n\t\t\t\tif( ! utilIsNaN( workTranslate.y ) ) {\n\t\t\t\t\tconst newDy = workTranslate.y - point.y;\n\t\t\t\t\tif( utilIsNaN( y ) || Math.abs( newDy - dy ) < Math.abs( y - dy ) ) {\n\t\t\t\t\t\ty = newDy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tresult.x = ( utilIsNaN( x ) ? dx : x );\n\t\tresult.y = ( utilIsNaN( y ) ? dy : y );\n\t\treturn result;\n\t}\n\n\tprepareForRotate( modifier: ESnapperModifier ): void {\n\t\t//\n\t}\n\n\tprotected getGridSizeRotation(): number {\n\t\treturn 5;\n\t}\n\n\tprotected toRadian( value: number ): number {\n\t\treturn value / 180 * Math.PI;\n\t}\n\n\tprotected toDegree( value: number ): number {\n\t\treturn value / Math.PI * 180;\n\t}\n\n\ttoRotationSnapped( baseRotation: number, deltaRotation: number ): number {\n\t\tif( this._isEnabled ) {\n\t\t\tconst gridSize = this.getGridSizeRotation();\n\t\t\tconst newRotation = baseRotation + deltaRotation;\n\t\t\tconst newRotationDegree = Math.round( this.toDegree( newRotation ) );\n\t\t\tconst newRotationDegreeResidual = newRotationDegree % 90;\n\t\t\tif( Math.abs( newRotationDegreeResidual ) <= gridSize ) {\n\t\t\t\treturn this.toRadian( newRotationDegree - newRotationDegreeResidual ) - baseRotation;\n\t\t\t} else {\n\t\t\t\tif( 90 - gridSize <= newRotationDegreeResidual ) {\n\t\t\t\t\treturn this.toRadian( newRotationDegree + (90 - newRotationDegreeResidual) ) - baseRotation;\n\t\t\t\t} else if( newRotationDegreeResidual <= -90 + gridSize ) {\n\t\t\t\t\treturn this.toRadian( newRotationDegree - (90 + newRotationDegreeResidual) ) - baseRotation;\n\t\t\t\t} else {\n\t\t\t\t\treturn deltaRotation;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn deltaRotation;\n\t}\n\n\tprotected calcNormalizedVector( p0: IPoint, p1: IPoint, result: Point ): number {\n\t\tconst dx = p1.x - p0.x;\n\t\tconst dy = p1.y - p0.y;\n\t\tconst l = Math.sqrt( dx * dx + dy * dy );\n\t\tif( EPSILON < l ) {\n\t\t\tconst d = 1 / l;\n\t\t\tresult.x = dx * d;\n\t\t\tresult.y = dy * d;\n\t\t} else {\n\t\t\tresult.x = 1;\n\t\t\tresult.y = 0;\n\t\t}\n\t\treturn l;\n\t}\n\n\tprepareForScale( modifier: ESnapperModifier, anchor: ESnapperModifierAnchor ): void {\n\t\tif( this._isEnabled ) {\n\t\t\tthis.prepare( modifier );\n\n\t\t\tconst points = this._points;\n\t\t\tconst normals = this._normals;\n\t\t\tconst lengths = this._lengths;\n\t\t\tswitch( anchor ) {\n\t\t\tcase ESnapperModifierAnchor.TOP_LEFT:\n\t\t\t\tlengths[ 0 ] = this.calcNormalizedVector( points[ 1 ], points[ 0 ], normals[ 0 ] );\n\t\t\t\tlengths[ 1 ] = this.calcNormalizedVector( points[ 3 ], points[ 0 ], normals[ 1 ] );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.TOP_CENTER:\n\t\t\t\tlengths[ 0 ] = this.calcNormalizedVector( points[ 3 ], points[ 0 ], normals[ 0 ] );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.TOP_RIGHT:\n\t\t\t\tlengths[ 0 ] = this.calcNormalizedVector( points[ 0 ], points[ 1 ], normals[ 0 ] );\n\t\t\t\tlengths[ 1 ] = this.calcNormalizedVector( points[ 2 ], points[ 1 ], normals[ 1 ] );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.MIDDLE_LEFT:\n\t\t\t\tlengths[ 0 ] = this.calcNormalizedVector( points[ 1 ], points[ 0 ], normals[ 0 ] );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.NONE:\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.MIDDLE_RIGHT:\n\t\t\t\tlengths[ 0 ] = this.calcNormalizedVector( points[ 0 ], points[ 1 ], normals[ 0 ] );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.BOTTOM_LEFT:\n\t\t\t\tlengths[ 0 ] = this.calcNormalizedVector( points[ 2 ], points[ 3 ], normals[ 0 ] );\n\t\t\t\tlengths[ 1 ] = this.calcNormalizedVector( points[ 0 ], points[ 3 ], normals[ 1 ] );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.BOTTOM_CENTER:\n\t\t\t\tlengths[ 0 ] = this.calcNormalizedVector( points[ 0 ], points[ 3 ], normals[ 0 ] );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.BOTTOM_RIGHT:\n\t\t\t\tlengths[ 0 ] = this.calcNormalizedVector( points[ 3 ], points[ 2 ], normals[ 0 ] );\n\t\t\t\tlengths[ 1 ] = this.calcNormalizedVector( points[ 1 ], points[ 2 ], normals[ 1 ] );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected setScaleSnappedResult(\n\t\tdistance: number,\n\t\tlength: number,\n\t\tmove: number,\n\t\taxis: boolean, // true => x axis, false y axis\n\t\tresult: ESnapperResultScale\n\t): void {\n\t\tif( EPSILON < length ) {\n\t\t\tif( utilIsNaN( result.distance ) || distance < result.distance ) {\n\t\t\t\tresult.distance = distance;\n\t\t\t\tconst newScale = 1 + move / length;\n\t\t\t\tif( axis ) {\n\t\t\t\t\tresult.scale.x = newScale;\n\t\t\t\t} else {\n\t\t\t\t\tresult.scale.y = newScale;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected calcScaleSnapped1D(\n\t\ttransform: Matrix,\n\t\tpoint: Point,\n\t\tnormal: IPoint,\n\t\tlength: number,\n\t\taxis: boolean,\n\t\tresult: ESnapperResultScale\n\t): void {\n\t\tconst work = this._workScale;\n\t\ttransform.apply( point, work );\n\t\tconst tx = work.x;\n\t\tconst ty = work.y;\n\t\tthis.snap( work, work );\n\t\tconst x = work.x;\n\t\tconst y = work.y;\n\n\t\t// X coordinate\n\t\tif( ! utilIsNaN( x ) ) {\n\t\t\tconst nx = Math.abs( normal.x );\n\t\t\tif( EPSILON < nx ) {\n\t\t\t\tconst dx = (x - tx) / normal.x;\n\t\t\t\tconst distance = Math.abs( dx );\n\t\t\t\tconst mx = (x - point.x) / normal.x;\n\t\t\t\tthis.setScaleSnappedResult( distance, length, mx, axis, result );\n\t\t\t}\n\t\t}\n\n\t\t// Y coordinate\n\t\tif( ! utilIsNaN( y ) ) {\n\t\t\tconst ny = Math.abs( normal.y );\n\t\t\tif( EPSILON < ny ) {\n\t\t\t\tconst dy = (y - ty) / normal.y;\n\t\t\t\tconst distance = Math.abs( dy );\n\t\t\t\tconst my = (y - point.y) / normal.y;\n\t\t\t\tthis.setScaleSnappedResult( distance, length, my, axis, result );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected calcScaleSnappedX(\n\t\ttransform: Matrix,\n\t\tpoint: Point,\n\t\tnormal: IPoint,\n\t\tlength: number,\n\t\tresult: ESnapperResultScale\n\t): void {\n\t\tthis.calcScaleSnapped1D( transform, point, normal, length, true, result );\n\t}\n\n\tprotected calcScaleSnappedY(\n\t\ttransform: Matrix,\n\t\tpoint: Point,\n\t\tnormal: IPoint,\n\t\tlength: number,\n\t\tresult: ESnapperResultScale\n\t): void {\n\t\tthis.calcScaleSnapped1D( transform, point, normal, length, false, result );\n\t}\n\n\tcalcScaleSnapped2D(\n\t\ttransform: Matrix, point: Point, normals: IPoint[],\n\t\tlengths: number[], result: ESnapperResultScale\n\t): void {\n\t\tconst work = this._workScale;\n\t\ttransform.apply( point, work );\n\t\tconst tx = work.x;\n\t\tconst ty = work.y;\n\n\t\tthis.snap( work, work );\n\t\tlet x = work.x;\n\t\tlet y = work.y;\n\t\tif( utilIsNaN( x ) ) {\n\t\t\tif( utilIsNaN( y ) ) {\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tx = tx;\n\t\t\t}\n\t\t} else {\n\t\t\tif( utilIsNaN( y ) ) {\n\t\t\t\ty = ty;\n\t\t\t}\n\t\t}\n\n\t\t// (x, y) = (tx, ty) + normalA * a + normalB * b\n\t\t// dx = x - tx\n\t\t// dy = y - ty\n\t\t// V = ( a, b )^T\n\t\t// D = ( dx, dy )^T\n\t\t// A = | normalA.x normalB.x |\n\t\t//     | normalA.y normalB.y |\n\t\t// A V = D\n\t\t// det A = normalA.x * normalB.y - normalB.x * normalA.y\n\t\t// A^-1 = |  normalB.y -normalB.x | / det A\n\t\t//        | -normalA.y  normalA.x |\n\t\tconst detA = normals[ 0 ].x * normals[ 1 ].y - normals[ 1 ].x * normals[ 0 ].y;\n\t\tif( EPSILON < Math.abs( detA ) ) {\n\t\t\tconst dx = x - tx;\n\t\t\tconst dy = y - ty;\n\t\t\tconst distance = Math.abs( dx * dx + dy * dy );\n\t\t\tif( utilIsNaN( result.distance ) || distance < result.distance ) {\n\t\t\t\tresult.distance = distance;\n\t\t\t\tconst mdx = x - point.x;\n\t\t\t\tconst mdy = y - point.y;\n\t\t\t\tconst mx = ( +normals[ 1 ].y * mdx - normals[ 1 ].x * mdy ) / detA;\n\t\t\t\tconst my = ( -normals[ 0 ].y * mdx + normals[ 0 ].x * mdy ) / detA;\n\t\t\t\tresult.scale.set(\n\t\t\t\t\t1 + mx / lengths[ 0 ],\n\t\t\t\t\t1 + my / lengths[ 1 ]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected calcScaleSnappedXY(\n\t\ttransform: Matrix,\n\t\tpointO: Point,\n\t\tpointX: Point,\n\t\tpointY: Point,\n\t\tnormals: IPoint[],\n\t\tlengths: number[],\n\t\tresult: ESnapperResultScale\n\t): void {\n\t\tthis.calcScaleSnapped2D( transform, pointO, normals, lengths, result );\n\t\tthis.calcScaleSnappedX( transform, pointY, normals[ 0 ], lengths[ 0 ], result );\n\t\tthis.calcScaleSnappedY( transform, pointX, normals[ 1 ], lengths[ 1 ], result );\n\t}\n\n\ttoScaleSnapped(\n\t\ttransform: Matrix, anchor: ESnapperModifierAnchor, keepRatio: boolean, scale: IPoint\n\t): boolean {\n\t\tif( this._isEnabled ) {\n\t\t\tconst points = this._points;\n\t\t\tconst normals = this._normals;\n\t\t\tconst lengths = this._lengths;\n\t\t\tconst work = this._workScaleResult;\n\t\t\twork.distance = NaN;\n\t\t\twork.scale.set( scale.x, scale.y );\n\n\t\t\tswitch( anchor ) {\n\t\t\tcase ESnapperModifierAnchor.TOP_LEFT:\n\t\t\t\tthis.calcScaleSnappedXY( transform, points[ 0 ], points[ 1 ], points[ 3 ], normals, lengths, work );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.TOP_CENTER:\n\t\t\t\tthis.calcScaleSnappedY( transform, points[ 0 ], normals[ 0 ], lengths[ 0 ], work );\n\t\t\t\tthis.calcScaleSnappedY( transform, points[ 1 ], normals[ 0 ], lengths[ 0 ], work );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.TOP_RIGHT:\n\t\t\t\tthis.calcScaleSnappedXY( transform, points[ 1 ], points[ 0 ], points[ 2 ], normals, lengths, work );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.MIDDLE_LEFT:\n\t\t\t\tthis.calcScaleSnappedX( transform, points[ 0 ], normals[ 0 ], lengths[ 0 ], work );\n\t\t\t\tthis.calcScaleSnappedX( transform, points[ 3 ], normals[ 0 ], lengths[ 0 ], work );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.NONE:\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.MIDDLE_RIGHT:\n\t\t\t\tthis.calcScaleSnappedX( transform, points[ 1 ], normals[ 0 ], lengths[ 0 ], work );\n\t\t\t\tthis.calcScaleSnappedX( transform, points[ 2 ], normals[ 0 ], lengths[ 0 ], work );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.BOTTOM_LEFT:\n\t\t\t\tthis.calcScaleSnappedXY( transform, points[ 3 ], points[ 2 ], points[ 0 ], normals, lengths, work );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.BOTTOM_CENTER:\n\t\t\t\tthis.calcScaleSnappedY( transform, points[ 2 ], normals[ 0 ], lengths[ 0 ], work );\n\t\t\t\tthis.calcScaleSnappedY( transform, points[ 3 ], normals[ 0 ], lengths[ 0 ], work );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.BOTTOM_RIGHT:\n\t\t\t\tthis.calcScaleSnappedXY( transform, points[ 2 ], points[ 3 ], points[ 1 ], normals, lengths, work );\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif( ! utilIsNaN( work.distance ) ) {\n\t\t\t\tscale.copyFrom( work.scale );\n\t\t\t\tif( keepRatio ) {\n\t\t\t\t\tswitch( anchor ) {\n\t\t\t\t\tcase ESnapperModifierAnchor.TOP_LEFT:\n\t\t\t\t\tcase ESnapperModifierAnchor.TOP_RIGHT:\n\t\t\t\t\tcase ESnapperModifierAnchor.BOTTOM_LEFT:\n\t\t\t\t\tcase ESnapperModifierAnchor.BOTTOM_RIGHT:\n\t\t\t\t\t\tscale.x = scale.y = Math.max( scale.x, scale.y );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ESnapperModifierAnchor.TOP_CENTER:\n\t\t\t\t\tcase ESnapperModifierAnchor.BOTTOM_CENTER:\n\t\t\t\t\t\tscale.x = scale.y;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ESnapperModifierAnchor.MIDDLE_LEFT:\n\t\t\t\t\tcase ESnapperModifierAnchor.MIDDLE_RIGHT:\n\t\t\t\t\t\tscale.y = scale.x;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ESnapperModifierAnchor.NONE:\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\treset(): void {\n\t\tthis.enable();\n\t\tthis.target.reset();\n\t\tthis.grid.reset();\n\t}\n\n\tserialize(): DDiagramSerializedSnap {\n\t\treturn [\n\t\t\t(this._isEnabled ? 1 : 0),\n\t\t\tthis.target.serialize(),\n\t\t\tthis.grid.serialize()\n\t\t];\n\t}\n\n\tdeserialize( serialized: DDiagramSerializedSnap ): void {\n\t\tif( serialized[ 0 ] !== 0 ) {\n\t\t\tthis.enable();\n\t\t} else {\n\t\t\tthis.disable();\n\t\t}\n\t\tthis.target.deserialize( serialized[ 1 ] );\n\t\tthis.grid.deserialize( serialized[ 2 ] );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\nimport { DDiagramSerializedSnapTarget, DDiagramSerializedSnapTargetValue } from \"../d-diagram-serialized\";\nimport { ESnapperResult } from \"./e-snapper-result\";\nimport { ESnapperTargetValue, ESnapperTargetValueType } from \"./e-snapper-target-value\";\n\nexport class ESnapperTarget extends utils.EventEmitter {\n\tvalues: ESnapperTargetValue[];\n\tprotected _isVisible: boolean;\n\tprotected _isEnabled: boolean;\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.values = [];\n\t\tthis._isVisible = true;\n\t\tthis._isEnabled = true;\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this._isEnabled;\n\t}\n\n\ttoggle(): boolean {\n\t\tthis._isEnabled = ! this._isEnabled;\n\t\tthis.emit( \"change\", this );\n\t\treturn this._isEnabled;\n\t}\n\n\tenable(): void {\n\t\tif( this._isEnabled !== true ) {\n\t\t\tthis._isEnabled = true;\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tdisable(): void {\n\t\tif( this._isEnabled !== false ) {\n\t\t\tthis._isEnabled = false;\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tadd( target: ESnapperTargetValue, index?: number ): void {\n\t\tif( index != null ) {\n\t\t\tthis.values.splice( index, 0, target );\n\t\t} else {\n\t\t\tthis.values.push( target );\n\t\t}\n\t\tthis.emit( \"change\", this );\n\t}\n\n\tremove( index: number ): void {\n\t\tconst values = this.values;\n\t\tif( 0 <= index && index < values.length ) {\n\t\t\tvalues.splice( index, 1 );\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tsize(): number {\n\t\treturn this.values.length;\n\t}\n\n\treplace( index: number, value: ESnapperTargetValue ): ESnapperTargetValue | null {\n\t\tconst values = this.values;\n\t\tif( 0 <= index && index < values.length ) {\n\t\t\tconst result = values[ index ];\n\t\t\tvalues[ index ] = value;\n\t\t\tthis.emit( \"change\", this );\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tswap( indexA: number, indexB: number ): void {\n\t\tif( indexA !== indexB ) {\n\t\t\tconst values = this.values;\n\t\t\tconst valueA = values[ indexA ];\n\t\t\tvalues[ indexA ] = values[ indexB ];\n\t\t\tvalues[ indexB ] = valueA;\n\t\t}\n\t}\n\n\tget visible(): boolean {\n\t\treturn this._isVisible;\n\t}\n\n\tset visible( visible: boolean ) {\n\t\tif( this._isVisible !== visible ) {\n\t\t\tthis._isVisible = visible;\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tsnap( px: number, py: number, x: ESnapperResult, y: ESnapperResult ): void {\n\t\tif( this._isEnabled ) {\n\t\t\tconst values = this.values;\n\t\t\tfor( let i = 0, imax = values.length; i < imax; ++i ) {\n\t\t\t\tconst value = values[ i ];\n\t\t\t\tif( value.type === ESnapperTargetValueType.VERTICAL ) {\n\t\t\t\t\tx.set( px, value.position );\n\t\t\t\t} else {\n\t\t\t\t\ty.set( py, value.position );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treset(): void {\n\t\tthis._isEnabled = true;\n\t\tthis._isVisible = true;\n\t\tthis.values.length = 0;\n\t\tthis.emit( \"change\", this );\n\t}\n\n\tserialize(): DDiagramSerializedSnapTarget {\n\t\tconst targets: DDiagramSerializedSnapTargetValue[] = [];\n\t\tconst values = this.values;\n\t\tfor( let i = 0, imax = values.length; i < imax; ++i ) {\n\t\t\ttargets.push( values[ i ].serialize() );\n\t\t}\n\t\treturn [\n\t\t\t(this._isEnabled ? 1 : 0),\n\t\t\t(this._isVisible ? 1 : 0),\n\t\t\ttargets\n\t\t];\n\t}\n\n\tdeserialize( serialized: DDiagramSerializedSnapTarget ): void {\n\t\t// Availability\n\t\tthis._isEnabled = ( serialized[ 0 ] !== 0 );\n\n\t\t// Visibility\n\t\tthis._isVisible = ( serialized[ 1 ] !== 0 );\n\n\t\t// Values\n\t\tconst sources = serialized[ 2 ];\n\t\tconst values = this.values;\n\t\tvalues.length = 0;\n\t\tfor( let i = 0, imax = sources.length; i < imax; ++i ) {\n\t\t\tconst source = sources[ i ];\n\t\t\tvalues.push( new ESnapperTargetValue( source[ 0 ], source[ 1 ] ) );\n\t\t}\n\t\tthis.emit( \"change\", this );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\nimport { DAnimation, DAnimationOnEnd, DAnimationOnTime, DAnimationOptions } from \"./d-animation\";\nimport { DBase } from \"./d-base\";\n\nexport class DAnimationEmpty extends utils.EventEmitter implements DAnimation {\n\tprotected _reverse: boolean;\n\tprotected _onTime: DAnimationOnTime | undefined;\n\tprotected _onStart: DAnimationOnEnd | undefined;\n\tprotected _onEnd: DAnimationOnEnd | undefined;\n\tprotected _target: DBase<any, any> | null;\n\tprotected _isStarted: boolean;\n\n\tconstructor( options?: DAnimationOptions ) {\n\t\tsuper();\n\n\t\tthis._target = null;\n\t\tthis._reverse = false;\n\t\tthis._isStarted = false;\n\t\tthis._onTime = ( options != null ? options.onTime : undefined );\n\t\tthis._onStart = ( options != null ? options.onStart : undefined );\n\t\tthis._onEnd = ( options != null ? options.onEnd : undefined );\n\t}\n\n\tget target(): DBase<any, any> | null {\n\t\treturn this._target;\n\t}\n\n\tset target( target: DBase<any, any> | null ) {\n\t\tthis._target = target;\n\t}\n\n\tget duration(): number {\n\t\treturn 0;\n\t}\n\n\tset duration( duration: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tstart( reverse: boolean = false ): void {\n\t\tthis.stop();\n\t\tthis._isStarted = true;\n\t\tthis._reverse = reverse;\n\n\t\t// onStart\n\t\tthis.onStart( reverse );\n\t\tif( ! this._isStarted ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// onTime\n\t\tthis.onTime( reverse ? 1 : 0, reverse, 0 );\n\t\tif( ! this._isStarted ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.onTime( reverse ? 0 : 1, reverse, 0 );\n\t\tif( this._isStarted ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// OnEnd\n\t\tthis.onEnd( reverse );\n\t}\n\n\tprotected onStart( isReverse: boolean ): void {\n\t\tconst onStart = this._onStart;\n\t\tif( onStart != null ) {\n\t\t\tonStart( isReverse, this );\n\t\t}\n\t\tthis.emit( \"start\", isReverse, this );\n\t}\n\n\tprotected onTime( time: number, isReverse: boolean, elapsedTime: number ): void {\n\t\tconst onTime = this._onTime;\n\t\tif( onTime != null ) {\n\t\t\tonTime( time, isReverse, elapsedTime, this );\n\t\t}\n\t\tthis.emit( \"time\", time, isReverse, elapsedTime, this );\n\t}\n\n\tprotected onEnd( isReverse: boolean ): void {\n\t\tconst onEnd = this._onEnd;\n\t\tif( onEnd != null ) {\n\t\t\tonEnd( isReverse, this );\n\t\t}\n\t\tthis.emit( \"end\", isReverse, this );\n\t}\n\n\tisStarted(): boolean {\n\t\treturn this._isStarted;\n\t}\n\n\tisReverse(): boolean {\n\t\treturn this._reverse;\n\t}\n\n\tstop(): void {\n\t\tthis._isStarted = false;\n\t}\n\n\tend(): void {\n\t\tconst isStarted = this._isStarted;\n\t\tif( isStarted ) {\n\t\t\tthis._isStarted = false;\n\n\t\t\t// OnTime\n\t\t\tconst reverse = this._reverse;\n\t\t\tconst time = ( reverse ? 0 : 1 );\n\t\t\tthis.onTime( time, reverse, 0 );\n\n\t\t\t// OnEnd\n\t\t\tthis.onEnd( reverse );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeBase } from \"./d-base\";\nimport { DPadding } from \"./d-padding\";\n\nexport class DApplicationPadding implements DPadding {\n\tleft: number;\n\ttop: number;\n\tright: number;\n\tbottom: number;\n\n\tconstructor( top: number, right: number, bottom: number, left: number ) {\n\t\tthis.left = left;\n\t\tthis.top = top;\n\t\tthis.right = right;\n\t\tthis.bottom = bottom;\n\t}\n\n\tgetTheme(): DThemeBase {\n\t\tthrow new Error( \"Not supported\" );\n\t}\n\n\tsetTheme( theme: DThemeBase ): void {\n\t\tthrow new Error( \"Not supported\" );\n\t}\n\n\tgetTop(): number {\n\t\treturn this.left;\n\t}\n\n\tgetRight(): number {\n\t\treturn this.right;\n\t}\n\n\tgetBottom(): number {\n\t\treturn this.bottom;\n\t}\n\n\tgetLeft(): number {\n\t\treturn this.left;\n\t}\n\n\tset( padding: number ): void;\n\tset( topAndBottom: number, leftAndRight: number ): void;\n\tset( top: number, leftAndRight: number, bottom: number ): void;\n\tset( top: number, right?: number, bottom?: number, left?: number ): void {\n\t\tif( right == null ) {\n\t\t\tthis.top = top;\n\t\t\tthis.right = top;\n\t\t\tthis.bottom = top;\n\t\t\tthis.left = top;\n\t\t} else if( bottom == null ) {\n\t\t\tthis.top = top;\n\t\t\tthis.right = right;\n\t\t\tthis.bottom = top;\n\t\t\tthis.left = right;\n\t\t} else if( left == null ) {\n\t\t\tthis.top = top;\n\t\t\tthis.right = right;\n\t\t\tthis.bottom = bottom;\n\t\t\tthis.left = right;\n\t\t} else {\n\t\t\tthis.top = top;\n\t\t\tthis.right = right;\n\t\t\tthis.bottom = bottom;\n\t\t\tthis.left = left;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplicationPadding } from \"./d-application-padding\";\nimport { DPadding } from \"./d-padding\";\n\n/**\n * PixiJS options\n */\ninterface PixiApplicationOptions {\n\twidth: number;\n\theight: number;\n\tautoStart: boolean;\n\tbackgroundColor: number;\n\tantialias: boolean;\n}\n\n/**\n * DApplication options\n */\nexport class DApplicationOptions {\n\tprivate _root: HTMLElement;\n\tprivate _pixi: PixiApplicationOptions;\n\tprivate _padding: DPadding;\n\n\tconstructor() {\n\t\tconst body = this._root = document.body;\n\t\tconst bbox = body.getBoundingClientRect();\n\t\tthis._padding = new DApplicationPadding( 6, 6, 6, 6 );\n\t\tthis._pixi = {\n\t\t\twidth: bbox.width,\n\t\t\theight: bbox.height,\n\t\t\tautoStart: false,\n\t\t\tbackgroundColor: 0xeeeeee,\n\t\t\tantialias: false\n\t\t};\n\t}\n\n\t/**\n\t * Returns a root element.\n\t * `HTMLCanvasElement` and other DOM elements are created in this element.\n\t * The default root element is `document.body`.\n\t */\n\tgetRootElement(): HTMLElement {\n\t\treturn this._root;\n\t}\n\n\t/**\n\t * Sets a root element and updates the canvas width and height\n\t * if `updateWidthAndHeight` is not false.\n\t *\n\t * @param root new root element\n\t * @param updateWidthAndHeight false to preserve the canvas width / height\n\t */\n\tsetRootElement( root: HTMLElement, updateWidthAndHeight?: boolean ): this {\n\t\tif( this._root !== root ) {\n\t\t\tthis._root = root;\n\t\t\tif( updateWidthAndHeight !== false ) {\n\t\t\t\tconst bbox = root.getBoundingClientRect();\n\t\t\t\tconst pixi = this._pixi;\n\t\t\t\tpixi.width = bbox.width;\n\t\t\t\tpixi.height = bbox.height;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns a canvas width.\n\t */\n\tgetWidth() {\n\t\treturn this._pixi.width;\n\t}\n\n\t/**\n\t * Sets a canvas width.\n\t *\n\t * @param width new canvas width\n\t */\n\tsetWidth( width: number ): this {\n\t\tthis._pixi.width = width;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns a canvas height.\n\t */\n\tgetHeight() {\n\t\treturn this._pixi.height;\n\t}\n\n\t/**\n\t * Sets a canvas height.\n\t *\n\t * @param height new canvas height\n\t */\n\tsetHeight( height: number ): this {\n\t\tthis._pixi.height = height;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns padding sizes.\n\t * The default padding size is 6.\n\t */\n\tgetPadding(): DPadding {\n\t\treturn this._padding;\n\t}\n\n\t/**\n\t * Sets padding sizes.\n\t *\n\t * @param left new left padding\n\t * @param top new top padding\n\t * @param right new right padding\n\t * @param bottom new bottom padding\n\t * @asse getPadding\n\t */\n\tsetPadding( left: number, top: number, right: number, bottom: number ): this {\n\t\tconst padding = this._padding;\n\t\tpadding.left = left;\n\t\tpadding.top = top;\n\t\tpadding.right = right;\n\t\tpadding.bottom = bottom;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns a background color.\n\t */\n\tgetBackgroundColor(): number {\n\t\treturn this._pixi.backgroundColor;\n\t}\n\n\t/**\n\t * Sets a background color.\n\t *\n\t * @param color new background color\n\t */\n\tsetBackgroundColor( color: number ): this {\n\t\tthis._pixi.backgroundColor = color;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns an antialias setting.\n\t * The default antialias setting is false.\n\t */\n\tgetAntialias(): boolean {\n\t\treturn this._pixi.antialias;\n\t}\n\n\t/**\n\t * Sets an antialias setting.\n\t *\n\t * @param antialias new antialias setting\n\t */\n\tsetAntialias( antialias: boolean ): this {\n\t\tthis._pixi.antialias = antialias;\n\t\treturn this;\n\t}\n\n\tgetPixiApplicationOptions(): PixiApplicationOptions {\n\t\treturn this._pixi;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Application, interaction, Point, Renderer, settings } from \"pixi.js\";\nimport { DApplicationOptions } from \"./d-application-options\";\nimport { DApplications } from \"./d-applications\";\nimport { DBase } from \"./d-base\";\nimport { DFocusable, DFocusableContainer } from \"./d-controller-focus\";\nimport { DControllers } from \"./d-controllers\";\nimport { DPadding } from \"./d-padding\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\nimport { UtilWheelEvent, UtilWheelEventDeltas } from \"./util/util-wheel-event\";\n\n// Global Settings\nsettings.RESOLUTION = window.devicePixelRatio || 1;\nsettings.ROUND_PIXELS = false;\ndelete (Renderer as any).__plugins.accessibility;\n\n//\ninterface DblClickable {\n\tonDblClick( e: MouseEvent | TouchEvent ): boolean;\n}\n\nconst isDblClickable = ( target: any ): target is DblClickable => {\n\treturn target != null && target.onDblClick != null;\n};\n\ninterface Wheelable {\n\tonWheel( e: WheelEvent, deltas: UtilWheelEventDeltas, global: Point ): boolean;\n}\n\nconst isWheelable = ( target: any ): target is Wheelable => {\n\treturn target != null && target.onWheel != null;\n};\n\n//\nexport class DApplication extends Application {\n\tprotected _options: DApplicationOptions;\n\tprotected _renderId: number | null = null;\n\tprotected _renderBound: () => void;\n\tprotected _isUpdateAllowed: boolean;\n\tprotected _refitLimit: number;\n\tprotected _reflowLimit: number;\n\n\tconstructor( options: DApplicationOptions = new DApplicationOptions() ) {\n\t\tsuper( options.getPixiApplicationOptions() );\n\n\t\tDApplications.setInstace( this );\n\n\t\tthis._options = options;\n\t\tthis._isUpdateAllowed = true;\n\t\tthis._refitLimit = 5;\n\t\tthis._reflowLimit = 5;\n\n\t\tthis._renderBound = (): void => {\n\t\t\tif( this._renderId != null ) {\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t};\n\n\t\t// Canvas initialization\n\t\tconst rootElement = options.getRootElement();\n\t\tconst children = rootElement.children;\n\t\tif( 0 < children.length ) {\n\t\t\trootElement.insertBefore( this.view, children[ 0 ] );\n\t\t} else {\n\t\t\trootElement.appendChild( this.view );\n\t\t}\n\t\trootElement.style.margin = \"0px\";\n\t\trootElement.style.padding = \"0px\";\n\t\trootElement.style.overflow = \"hidden\";\n\t\tthis.view.style.width = \"100%\";\n\t\tthis.view.style.height = \"100%\";\n\t\tthis.view.style.display = \"block\";\n\n\t\t// Focus handling\n\t\tlet hasFocus = false;\n\t\tconst focusController = DControllers.getFocusController();\n\t\tconst onBlurBound = (): void => {\n\t\t\tif( ! hasFocus ) {\n\t\t\t\tfocusController.setFocused( null, true, false );\n\t\t\t}\n\t\t};\n\t\trootElement.addEventListener( \"focus\", ( e ): void => {\n\t\t\thasFocus = true;\n\t\t}, true );\n\t\trootElement.addEventListener( \"blur\", ( e ): void => {\n\t\t\thasFocus = false;\n\t\t\tsetTimeout( onBlurBound, 0 );\n\t\t}, true );\n\t\tthis.view.setAttribute( \"tabindex\", \"0\" );\n\n\t\tDControllers.getKeyboardController().init( this.view, this.stage, focusController );\n\n\t\tconst interactionManager: interaction.InteractionManager = this.renderer.plugins.interaction;\n\t\tinteractionManager.on( UtilPointerEvent.down, ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( e.target == null ) {\n\t\t\t\tfocusController.setFocused( null, true, false );\n\t\t\t}\n\t\t});\n\n\t\t// Resize handling\n\t\tconst onResize = (): void => {\n\t\t\tconst bbox = options.getRootElement().getBoundingClientRect();\n\t\t\tthis.renderer.resize( bbox.width, bbox.height );\n\t\t\tthis.resizeChildren( bbox.width, bbox.height, options.getPadding() );\n\t\t\tthis.update();\n\t\t};\n\t\twindow.addEventListener( \"resize\", onResize );\n\t\twindow.addEventListener( \"orientationchange\", onResize );\n\n\t\t// Mouse wheel handling\n\t\tconst wheelGlobal = new Point();\n\t\tconst wheelEventUtil = UtilWheelEvent.getInstance();\n\t\twheelEventUtil.on( this.view, ( e: WheelEvent | Event ): void => {\n\t\t\tconst wheelEvent = e as WheelEvent;\n\t\t\tUtilPointerEvent.toGlobal( wheelEvent, wheelGlobal );\n\t\t\tlet current = interactionManager.hitTest( wheelGlobal );\n\t\t\tconst deltas = wheelEventUtil.normalize( e );\n\t\t\tif( deltas != null ) {\n\t\t\t\twhile( current != null ) {\n\t\t\t\t\tif( isWheelable( current ) ) {\n\t\t\t\t\t\tif( current.onWheel( wheelEvent, deltas, wheelGlobal ) ) {\n\t\t\t\t\t\t\twheelEvent.preventDefault();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcurrent = current.parent;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Double click handling\n\t\tUtilPointerEvent.onDblClick( this.view, ( e: MouseEvent | TouchEvent ) => {\n\t\t\tconst focused = focusController.getFocused();\n\t\t\tif( focused != null ) {\n\t\t\t\tlet current: DFocusable | DFocusableContainer | null = focused;\n\t\t\t\twhile( current != null ) {\n\t\t\t\t\tif( isDblClickable( current ) ) {\n\t\t\t\t\t\tif( current.onDblClick( e ) ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcurrent = current.parent;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t//\n\t\tthis.stage.interactive = true;\n\t}\n\n\tdisallowUpdate(): void {\n\t\tthis._isUpdateAllowed = false;\n\t}\n\n\tallowUpdate(): void {\n\t\tthis._isUpdateAllowed = true;\n\t}\n\n\tupdate(): void {\n\t\tif( this._isUpdateAllowed && this._renderId == null ) {\n\t\t\tthis._renderId = requestAnimationFrame( this._renderBound );\n\t\t}\n\t}\n\n\trender(): void {\n\t\tconst oldRenderId = this._renderId;\n\t\tthis._renderId = null;\n\t\tthis.onRendering();\n\t\tconst newRenderId = this._renderId;\n\t\tthis._renderId = oldRenderId;\n\t\tthis.refit();\n\t\tthis.reflow();\n\t\tsuper.render();\n\t\tthis._renderId = newRenderId;\n\t}\n\n\tprotected onRendering(): void {\n\t\t// DO NOTHING\n\t}\n\n\tget width(): number {\n\t\treturn this.screen.width;\n\t}\n\n\tget height(): number {\n\t\treturn this.screen.height;\n\t}\n\n\tget padding(): DPadding {\n\t\treturn this._options.getPadding();\n\t}\n\n\tprotected resizeChildren( width: number, height: number, padding: DPadding ): void {\n\t\tconst children = this.stage.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child instanceof DBase ) {\n\t\t\t\tchild.onParentResize( width, height, padding );\n\t\t\t}\n\t\t}\n\t}\n\n\trefit(): void {\n\t\tconst children = this.stage.children;\n\t\tfor( let ilimit = 0, limit = this._refitLimit; ilimit < limit; ++ilimit ) {\n\t\t\tlet isChildrenDirty = false;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child instanceof DBase ) {\n\t\t\t\t\tchild.refit();\n\t\t\t\t\tisChildrenDirty = isChildrenDirty || child.isChildrenDirty();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If DBases are changed during the `refit` process, need to refit again.\n\t\t\tif( ! isChildrenDirty ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treflow(): void {\n\t\tconst children = this.stage.children;\n\t\tfor( let ilimit = 0, limit = this._refitLimit; ilimit < limit; ++ilimit ) {\n\t\t\tlet isDirty = false;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child instanceof DBase ) {\n\t\t\t\t\tchild.reflow();\n\t\t\t\t\tisDirty = isDirty || child.isDirty() || child.hasDirty();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If DBases are changed during the `reflow` process, need to reflow again.\n\t\t\tif( ! isDirty ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetRootElement(): HTMLElement {\n\t\treturn this._options.getRootElement();\n\t}\n\n\tgetOptions(): DApplicationOptions {\n\t\treturn this._options;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartCoordinateContainerSub } from \"./d-chart-coordinate-container-sub\";\n\nexport enum DChartCoordinateDirection {\n\tX,\n\tY\n}\n\nexport interface DChartCoordinate {\n\treadonly id: number;\n\n\tbind( container: DChartCoordinateContainerSub, direction: DChartCoordinateDirection ): void;\n\tunbind(): void;\n\n\tfit(): void;\n\n\tmap( value: number ): number;\n\tunmap( value: number ): number;\n\n\t/**\n\t *\n\t * @param majorCount Expected major tick count\n\t * @param minorCountPerMajor Expected minor tick count per major ticks\n\t * @param minorCount Expected total minor tick count\n\t * @param majorResult `majorResult.length` must be larger than `majorCount * 3`.\n\t * @param minorResult `minorResult.length` must be larger than `minorCount * 3`.\n\t */\n\tticks(\n\t\tmajorCount: number,\n\t\tminorCountPerMajor: number,\n\t\tminorCount: number,\n\t\tmajorResult: Float64Array,\n\t\tminorResult: Float64Array\n\t): void;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\n\nexport interface DBoardOptions<THEME extends DThemeBoard = DThemeBoard> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemeBoard extends DThemeBase {\n\n}\n\nexport class DBoard<\n\tTHEME extends DThemeBoard = DThemeBoard,\n\tOPTIONS extends DBoardOptions<THEME> = DBoardOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DBoard\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DBaseStates } from \"./d-base-states\";\nimport { DButtonGroup } from \"./d-button-group\";\nimport { DImageBase, DImageBaseOptions, DThemeImageBase } from \"./d-image-base\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport interface DButtonBaseOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonBase = DThemeButtonBase\n> extends DImageBaseOptions<VALUE, THEME> {\n\ttoggle?: boolean;\n\tgroup?: DButtonGroup;\n}\n\nexport interface DThemeButtonBase extends DThemeImageBase {\n\tisToggle(): boolean;\n}\n\n// Option parser\nconst isToggle = <VALUE, THEME extends DThemeButtonBase>(\n\ttheme: DThemeButtonBase, options: DButtonBaseOptions<VALUE, THEME> | undefined\n): boolean => {\n\tif( options != null && options.toggle != null ) {\n\t\treturn options.toggle;\n\t}\n\treturn theme.isToggle();\n};\n\nexport class DButtonBase<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonBase = DThemeButtonBase,\n\tOPTIONS extends DButtonBaseOptions<VALUE, THEME> = DButtonBaseOptions<VALUE, THEME>\n> extends DImageBase<VALUE, THEME, OPTIONS> {\n\tprotected _isToggle!: boolean;\n\tprotected _onActiveUpBound!: () => void;\n\tprotected _onActiveUpBoundTarget!: Container | null;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis.buttonMode = true;\n\t\tthis._isToggle = isToggle( this.theme, options );\n\t\tthis._onActiveUpBound = (): void => {\n\t\t\tthis.setPressed( false );\n\t\t\tconst target = this._onActiveUpBoundTarget;\n\t\t\tif( target != null ) {\n\t\t\t\ttarget.off( UtilPointerEvent.up, this._onActiveUpBound );\n\t\t\t}\n\t\t};\n\t\tthis._onActiveUpBoundTarget = null;\n\t\tthis.setActiveHandlers();\n\n\t\t// Group\n\t\tif( options != null && options.group != null ) {\n\t\t\toptions.group.add( this );\n\t\t}\n\t}\n\n\tprotected onShortcut( e: KeyboardEvent ): void {\n\t\tsuper.onShortcut( e );\n\t\tthis.onClick();\n\t}\n\n\tisToggle(): boolean {\n\t\treturn this._isToggle;\n\t}\n\n\tprotected setActiveHandlers(): void {\n\t\tUtilPointerEvent.onClick( this, (): void => {\n\t\t\tthis.onClick();\n\t\t});\n\n\t\tif( ! this.isToggle() ) {\n\t\t\tthis.on( UtilPointerEvent.down, (): void => {\n\t\t\t\tthis.setPressed( true );\n\t\t\t\tconst target = this._onActiveUpBoundTarget = DApplications.getInstance().stage;\n\t\t\t\ttarget.on( UtilPointerEvent.up, this._onActiveUpBound );\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected onStateChange( newState: number, oldState: number ): void {\n\t\tsuper.onStateChange( newState, oldState );\n\t\tthis.buttonMode = DBaseStates.isActionable( newState );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DButton\";\n\t}\n\n\tonClick(): void {\n\t\tif( this.isActionable() ) {\n\t\t\tif( this.isToggle() ) {\n\t\t\t\tthis.onToggleStart();\n\t\t\t\tthis.onToggleEnd();\n\t\t\t} else {\n\t\t\t\tthis.emit( \"active\", this );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onToggleStart(): void {\n\t\tthis.setActive( ! this.isActive() );\n\t}\n\n\tprotected onToggleEnd(): void {\n\t\tthis.emit( this.isActive() ? \"active\" : \"inactive\", this );\n\t}\n\n\tprotected onActivateKeyDown(): void {\n\t\tif( this.isActionable() ) {\n\t\t\tif( this.isToggle() ) {\n\t\t\t\tthis.onToggleStart();\n\t\t\t} else {\n\t\t\t\tthis.setPressed( true );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onActivateKeyUp(): void {\n\t\tif( this.isActionable() ) {\n\t\t\tif( this.isToggle() ) {\n\t\t\t\tthis.onToggleEnd();\n\t\t\t} else {\n\t\t\t\tif( this.isPressed() ) {\n\t\t\t\t\tthis.emit( \"active\", this );\n\t\t\t\t}\n\t\t\t\tthis.setPressed( false );\n\t\t\t}\n\t\t}\n\t}\n\n\tonKeyDown( e: KeyboardEvent ): boolean {\n\t\tif( UtilKeyboardEvent.isActivateKey( e ) ) {\n\t\t\tthis.onActivateKeyDown();\n\t\t}\n\n\t\treturn super.onKeyDown( e );\n\t}\n\n\tonKeyUp( e: KeyboardEvent ): boolean {\n\t\tif( UtilKeyboardEvent.isActivateKey( e ) ) {\n\t\t\tthis.onActivateKeyUp();\n\t\t}\n\n\t\treturn super.onKeyUp( e );\n\t}\n\n\tdestroy(): void {\n\t\t// Group\n\t\tconst options = this._options;\n\t\tif( options != null && options.group != null ) {\n\t\t\toptions.group.remove( this );\n\t\t}\n\n\t\tsuper.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonBase, DButtonBaseOptions, DThemeButtonBase } from \"./d-button-base\";\n\nexport interface DButtonOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeButton = DThemeButton\n> extends DButtonBaseOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeButton extends DThemeButtonBase {\n\n}\n\nexport class DButton<\n\tVALUE = unknown,\n\tTHEME extends DThemeButton = DThemeButton,\n\tOPTIONS extends DButtonOptions<VALUE, THEME> = DButtonOptions<VALUE, THEME>\n> extends DButtonBase<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DButton\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\n\nexport interface DButtonAmbientOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonAmbient = DThemeButtonAmbient\n> extends DButtonOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeButtonAmbient extends DThemeButton {\n\n}\n\nexport class DButtonAmbient<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonAmbient = DThemeButtonAmbient,\n\tOPTIONS extends DButtonAmbientOptions<VALUE, THEME> = DButtonAmbientOptions<VALUE, THEME>\n> extends DButton<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DButtonAmbient\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonBase, DButtonBaseOptions, DThemeButtonBase } from \"./d-button-base\";\n\nexport interface DButtonCheckOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonCheck = DThemeButtonCheck\n> extends DButtonBaseOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeButtonCheck extends DThemeButtonBase {\n\n}\n\nexport class DButtonCheck<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonCheck = DThemeButtonCheck,\n\tOPTIONS extends DButtonCheckOptions<VALUE, THEME> = DButtonCheckOptions<VALUE, THEME>\n> extends DButtonBase<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DButtonCheck\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonCheck, DButtonCheckOptions, DThemeButtonCheck } from \"./d-button-check\";\n\nexport interface DButtonCheckRightOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonCheckRight = DThemeButtonCheckRight\n> extends DButtonCheckOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeButtonCheckRight extends DThemeButtonCheck {\n\n}\n\nexport class DButtonCheckRight<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonCheck = DThemeButtonCheck,\n\tOPTIONS extends DButtonCheckOptions<VALUE, THEME> = DButtonCheckOptions<VALUE, THEME>\n> extends DButtonCheck<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DButtonCheckRight\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton } from \"./d-button\";\n\nexport class DButtonPrimary extends DButton {\n\tprotected getType(): string {\n\t\treturn \"DButtonPrimary\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DLayout, DLayoutOptions, DThemeLayout } from \"./d-layout\";\n\nexport interface DLayoutHorizontalOptions<THEME extends DThemeLayout> extends DLayoutOptions<THEME> {\n\n}\n\nexport interface DThemeLayoutHorizontal extends DThemeLayout {\n\n}\n\nexport class DLayoutHorizontal<\n\tTHEME extends DThemeLayoutHorizontal = DThemeLayoutHorizontal,\n\tOPTIONS extends DLayoutHorizontalOptions<THEME> = DLayoutHorizontalOptions<THEME>\n> extends DLayout<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DLayoutHorizontal\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton } from \"./d-button\";\nimport { DButtonPrimary } from \"./d-button-primary\";\nimport { DCoordinate } from \"./d-coordinate\";\nimport { DDialog, DDialogOptions, DThemeDialog } from \"./d-dialog\";\nimport { DLayoutHorizontal } from \"./d-layout-horizontal\";\nimport { DLayoutSpace } from \"./d-layout-space\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\n\nexport interface DDialogCommandOptions<\n\tTHEME extends DThemeDialogCommand = DThemeDialogCommand\n> extends DDialogOptions<THEME> {\n\tok?: string;\n\tcancel?: string;\n}\n\nexport interface DThemeDialogCommand extends DThemeDialog {\n\tgetOk(): string | null;\n\tgetCancel(): string | null;\n\tgetLayoutX(): DCoordinate;\n\tgetLayoutY(): DCoordinate;\n\tgetLayoutWidth(): DCoordinate;\n\tgetLayoutHeight(): DCoordinate;\n}\n\nexport class DDialogCommand<\n\tTHEME extends DThemeDialogCommand = DThemeDialogCommand,\n\tOPTIONS extends DDialogCommandOptions<THEME> = DDialogCommandOptions<THEME>\n> extends DDialog<THEME, OPTIONS> {\n\tprotected _promise: Promise<void> | null = null;\n\tprotected _resolve: (() => void) | null = null;\n\tprotected _reject: (() => void) | null = null;\n\tprotected _buttonLayout?: DLayoutHorizontal;\n\tprotected _buttonOk?: DButton;\n\tprotected _buttonCancel?: DButton;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tconst theme = this.theme;\n\t\tconst layout = new DLayoutVertical({\n\t\t\tparent: this,\n\t\t\tx: theme.getLayoutX(),\n\t\t\ty: theme.getLayoutY(),\n\t\t\twidth: theme.getLayoutWidth(),\n\t\t\theight: theme.getLayoutHeight()\n\t\t});\n\n\t\tthis.onInit( layout, options );\n\n\t\t// Buttons\n\t\tconst ok = ( options && options.ok || theme.getOk() );\n\t\tconst cancel = ( options && options.cancel || theme.getCancel() );\n\t\tif( ok != null || cancel != null ) {\n\t\t\tconst buttonLayout = new DLayoutHorizontal({\n\t\t\t\tparent: layout,\n\t\t\t\twidth: \"padding\", height: \"auto\",\n\t\t\t\tpadding: {\n\t\t\t\t\ttop: this.padding.getTop()\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._buttonLayout = buttonLayout;\n\t\t\tnew DLayoutSpace({\n\t\t\t\tparent: buttonLayout,\n\t\t\t\tweight: 1\n\t\t\t});\n\t\t\tif( ok != null && cancel != null ) {\n\t\t\t\tthis._buttonCancel = new DButtonPrimary({\n\t\t\t\t\tparent: buttonLayout,\n\t\t\t\t\ttext: {\n\t\t\t\t\t\tvalue: cancel\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tactive: (): void => {\n\t\t\t\t\t\t\tthis.onCancel();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis._buttonOk = new DButton({\n\t\t\t\t\tparent: buttonLayout,\n\t\t\t\t\ttext: {\n\t\t\t\t\t\tvalue: ok\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tactive: (): void => {\n\t\t\t\t\t\t\tthis.onOk();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if( ok != null ) {\n\t\t\t\tthis._buttonOk = new DButtonPrimary({\n\t\t\t\t\tparent: buttonLayout,\n\t\t\t\t\ttext: {\n\t\t\t\t\t\tvalue: ok\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tactive: (): void => {\n\t\t\t\t\t\t\tthis.onOk();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if( cancel != null ) {\n\t\t\t\tthis._buttonCancel = new DButtonPrimary({\n\t\t\t\t\tparent: buttonLayout,\n\t\t\t\t\ttext: {\n\t\t\t\t\t\tvalue: cancel\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tactive: (): void => {\n\t\t\t\t\t\t\tthis.onCancel();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tnew DLayoutSpace({\n\t\t\t\tparent: buttonLayout,\n\t\t\t\tweight: 1\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected onInit( layout: DLayoutVertical, options?: OPTIONS ) {\n\t\t// OVERRIDE THIS\n\t}\n\n\topen(): Promise<void> {\n\t\tsuper.open();\n\t\treturn this._promise!;\n\t}\n\n\tprotected onOpen() {\n\t\tsuper.onOpen();\n\n\t\tif( this._promise == null ) {\n\t\t\tthis._promise = new Promise(( resolve, reject ): void => {\n\t\t\t\tthis._resolve = resolve;\n\t\t\t\tthis._reject = reject;\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected onClose() {\n\t\tsuper.onClose();\n\n\t\tconst reject = this._reject;\n\t\tthis._promise = null;\n\t\tthis._resolve = null;\n\t\tthis._reject = null;\n\n\t\tif( reject != null ) {\n\t\t\treject();\n\t\t}\n\t}\n\n\tprotected onOk() {\n\t\tconst resolve = this._resolve;\n\t\tthis._promise = null;\n\t\tthis._resolve = null;\n\t\tthis._reject = null;\n\n\t\tthis.close();\n\n\t\tif( resolve != null ) {\n\t\t\tresolve();\n\t\t}\n\n\t\tthis.emit( \"ok\", this );\n\t}\n\n\tprotected onCancel() {\n\t\tconst reject = this._reject;\n\t\tthis._promise = null;\n\t\tthis._resolve = null;\n\t\tthis._reject = null;\n\n\t\tthis.close();\n\n\t\tif( reject != null ) {\n\t\t\treject();\n\t\t}\n\n\t\tthis.emit( \"cancel\", this );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogCommand\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction, Point, Rectangle, Renderer, Text } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DApplications } from \"./d-applications\";\nimport { DBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DControllers } from \"./d-controllers\";\nimport { DDynamicText } from \"./d-dynamic-text\";\nimport { DImageBase, DImageBaseOptions, DThemeImageBase } from \"./d-image-base\";\nimport { utilIsString } from \"./util/util-is-string\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\n\nexport interface DInputOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeInput = DThemeInput\n> extends DImageBaseOptions<VALUE, THEME> {\n\tdescription?: string;\n\tediting?: {\n\t\tformatter?: ( value: VALUE ) => string;\n\t\tunformatter?: ( text: string ) => VALUE;\n\t\tvalidator?: ( value: VALUE ) => string | null;\n\t};\n}\n\nexport interface DThemeInput extends DThemeImageBase {\n\tgetEditingFormatter(): ( value: any, caller: any ) => string;\n\tgetEditingUnformatter(): ( text: string, caller: any ) => any;\n\tgetEditingValidator(): ( value: any, caller: any ) => unknown;\n}\n\nexport abstract class DInput<\n\tVALUE = unknown,\n\tTHEME extends DThemeInput = DThemeInput,\n\tOPTIONS extends DInputOptions<VALUE, THEME> = DInputOptions<VALUE, THEME>\n> extends DImageBase<VALUE, THEME, OPTIONS> {\n\tprotected static _input: HTMLInputElement | null = null;\n\tprotected static _clipper: HTMLDivElement | null = null;\n\tprotected _isInputShown!: boolean;\n\tprotected _inputRect!: Rectangle | null;\n\tprotected _isInputSelected!: boolean;\n\tprotected _isStarted!: boolean;\n\tprotected _clipperRect!: Rectangle | null;\n\tprotected _onInputKeyDownBound!: ( e: KeyboardEvent ) => void;\n\tprotected _onInputBlurBound!: ( e: FocusEvent ) => void;\n\tprotected _updateInputBound!: () => void;\n\tprotected _onInputChangeBound!: ( e: Event ) => void;\n\tprotected _onInputInputBound!: ( e: Event ) => void;\n\tprotected _onPreRenderBound!: () => void;\n\tprotected _updateInputBoundRenderer!: Renderer | null;\n\tprotected _description!: string;\n\tprotected _editingFormatter!: ( value: VALUE, caller: DInput<VALUE> ) => string;\n\tprotected _editingUnformatter!: ( text: string, caller: DInput<VALUE> ) => VALUE;\n\tprotected _editingValidator!: ( value: VALUE, caller: DInput<VALUE> ) => unknown;\n\tprotected _editingValidationResult!: unknown;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tthis._editingValidationResult = null;\n\t\tthis._editingValidator = ( options && options.editing && options.editing.validator ) ||\n\t\t\tthis.theme.getEditingValidator();\n\n\t\tsuper.init( options );\n\n\t\tthis._isInputShown = false;\n\t\tthis._inputRect = null;\n\t\tthis._isInputSelected = false;\n\t\tthis._isStarted = false;\n\t\tthis._clipperRect = null;\n\n\t\tthis.cursor = \"text\";\n\n\t\tthis._description = ( options && options.description ) || \"\";\n\t\tthis._editingFormatter = ( options && options.editing && options.editing.formatter ) ||\n\t\t\tthis.theme.getEditingFormatter();\n\t\tthis._editingUnformatter = ( options && options.editing && options.editing.unformatter ) ||\n\t\t\tthis.theme.getEditingUnformatter();\n\n\t\tthis._onInputKeyDownBound = ( e: KeyboardEvent ): void => {\n\t\t\tthis.onInputKeyDown( e );\n\t\t};\n\n\t\tthis._onInputBlurBound = ( e: FocusEvent ): void => {\n\t\t\tthis.onInputBlur( e );\n\t\t};\n\n\t\tthis._updateInputBound = (): void => {\n\t\t\tthis.updateInput();\n\t\t};\n\n\t\tthis._onInputChangeBound = (): void => {\n\t\t\tthis.onInputChange();\n\t\t};\n\n\t\tthis._onInputInputBound = ( e: Event ): void => {\n\t\t\tthis.onInputInput( e );\n\t\t};\n\n\t\tthis._onPreRenderBound = (): void => {\n\t\t\tthis.onPreRender();\n\t\t};\n\n\t\tthis._updateInputBoundRenderer = null;\n\t}\n\n\tget value(): VALUE {\n\t\treturn this._textValueComputed;\n\t}\n\n\tset value( value: VALUE ) {\n\t\tthis.text = value;\n\t}\n\n\tprotected onTextChange(): void {\n\t\tsuper.onTextChange();\n\t\tthis.validate();\n\t}\n\n\tvalidate(): unknown {\n\t\tconst result = this._editingValidator( this._textValueComputed, this );\n\t\tif( this._editingValidationResult !== result ) {\n\t\t\tthis._editingValidationResult = result;\n\t\t\tthis.setInvalid( result != null );\n\t\t\tif( this.isHovered() ) {\n\t\t\t\tthis.applyTitle();\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected applyTitle(): void {\n\t\tconst editingValidationResult = this._editingValidationResult;\n\t\tif( utilIsString( editingValidationResult ) ) {\n\t\t\tDApplications.getInstance().view.title = editingValidationResult;\n\t\t} else {\n\t\t\tsuper.applyTitle();\n\t\t}\n\t}\n\n\tprotected onFocused(): void {\n\t\tsuper.onFocused();\n\t\tthis.start();\n\t}\n\n\tprotected onBlured(): void {\n\t\tsuper.onBlured();\n\t\tif( this._isInputShown ) {\n\t\t\tthis.onInputChange();\n\t\t}\n\t\tthis.cancel();\n\t}\n\n\tprotected onPreRender(): void {\n\t\tif( this._isStarted ) {\n\t\t\tthis._isStarted = false;\n\t\t\tthis.start_( false );\n\t\t}\n\t}\n\n\tstart(): void {\n\t\tif( ! this.isDisabled() && this._isStarted !== true ) {\n\t\t\t// This method might be invoked in the `pointerown` event handler.\n\t\t\t// Because of this, focusing on an input element in this method invokes\n\t\t\t// the `onInputBlur` immediately. Thus, must not call the `start` here.\n\t\t\tthis._isStarted = true;\n\t\t\tDApplications.getInstance().renderer.once(\n\t\t\t\t\"prerender\", this._onPreRenderBound\n\t\t\t);\n\t\t\tDApplications.update();\n\t\t}\n\t}\n\n\tprotected start_( update?: boolean ): void {\n\t\tif( ! this._isInputShown ) {\n\t\t\tthis._isInputShown = true;\n\n\t\t\tconst text = this._text;\n\t\t\tif( text != null ) {\n\t\t\t\ttext.visible = false;\n\t\t\t}\n\n\t\t\tconst app = DApplications.getInstance();\n\t\t\tconst clipper = this.getClipper();\n\t\t\tif( clipper != null ) {\n\t\t\t\tconst input = this.getInput( clipper );\n\t\t\t\tif( input != null ) {\n\t\t\t\t\tconst resolution = app.renderer.resolution;\n\t\t\t\t\tconst inputRect = this.getInputRect( resolution );\n\t\t\t\t\tconst clipperRect = this.getClipperRect( inputRect, resolution );\n\t\t\t\t\tthis.initInput( input, clipper, inputRect, clipperRect );\n\n\t\t\t\t\tconst updateInputBound = this._updateInputBound;\n\t\t\t\t\tconst renderer = this._updateInputBoundRenderer;\n\t\t\t\t\tif( renderer != null ) {\n\t\t\t\t\t\trenderer.off( \"postrender\", updateInputBound );\n\t\t\t\t\t}\n\t\t\t\t\tthis._updateInputBoundRenderer = app.renderer;\n\t\t\t\t\tapp.renderer.on( \"postrender\", updateInputBound );\n\n\t\t\t\t\tclipper.style.display = \"\";\n\t\t\t\t\tinput.focus();\n\t\t\t\t\tclipper.scrollTop = 0;\n\t\t\t\t\tclipper.scrollLeft = 0;\n\n\t\t\t\t\tif( this._isInputSelected ) {\n\t\t\t\t\t\tthis._isInputSelected = false;\n\t\t\t\t\t\tinput.select();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( update !== false ) {\n\t\t\t\tDApplications.update();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected createText( formatted: string ): Text | DDynamicText {\n\t\tconst result = super.createText( formatted );\n\t\tif( this._isInputShown ) {\n\t\t\tresult.visible = false;\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * Please note that this method does not update transforms.\n\t *\n\t * @param inputRect\n\t */\n\tprotected getClipperRect( inputRect: Rectangle, resolution: number ) {\n\t\tconst rect = this._clipperRect = ( this._clipperRect != null ? this._clipperRect : new Rectangle() );\n\t\trect.copyFrom( inputRect );\n\n\t\tconst p = new Point( 0, 0 );\n\t\tlet current = this.parent;\n\t\twhile( current instanceof DBase ) {\n\t\t\tp.set( 0, 0 );\n\t\t\tcurrent.toGlobal( p, p, false );\n\t\t\tlet x = p.x;\n\t\t\tlet y = p.y;\n\n\t\t\tp.set( current.width, current.height );\n\t\t\tcurrent.toGlobal( p, p, true );\n\t\t\tconst w = p.x - x;\n\t\t\tconst h = p.y - y;\n\n\t\t\tx = ( (x * resolution) | 0 ) / resolution;\n\t\t\ty = ( (y * resolution) | 0 ) / resolution;\n\n\t\t\tconst x0 = rect.x;\n\t\t\tconst y0 = rect.y;\n\t\t\tconst x1 = rect.x + rect.width;\n\t\t\tconst y1 = rect.y + rect.height;\n\n\t\t\trect.x = Math.min( Math.max( x0, x ), x + w );\n\t\t\trect.y = Math.min( Math.max( y0, y ), y + h );\n\n\t\t\trect.width = Math.min( Math.max( x1, x ), x + w ) - rect.x;\n\t\t\trect.height = Math.min( Math.max( y1, y ), y + h ) - rect.y;\n\n\t\t\tcurrent = current.parent;\n\t\t}\n\t\treturn rect;\n\t}\n\n\t/**\n\t * Please note that this method does not update transforms.\n\t */\n\tprotected getInputRect( resolution: number ) {\n\t\tconst rect = this._inputRect = ( this._inputRect != null ? this._inputRect : new Rectangle() );\n\n\t\tconst p = new Point( 0, 0 );\n\t\tthis.toGlobal( p, p, false );\n\t\trect.x = p.x;\n\t\trect.y = p.y;\n\n\t\tp.set( this.width, this.height );\n\t\tthis.toGlobal( p, p, true );\n\t\trect.width = p.x - rect.x;\n\t\trect.height = p.y - rect.y;\n\n\t\t// Rounds pixels as Pixi.js does\n\t\trect.x = ( (rect.x * resolution) | 0 ) / resolution;\n\t\trect.y = ( (rect.y * resolution) | 0 ) / resolution;\n\n\t\treturn rect;\n\t}\n\n\tprotected initInput(\n\t\tinput: HTMLInputElement, clipper: HTMLDivElement,\n\t\tinputRect: Rectangle, clipperRect: Rectangle\n\t) {\n\t\tinput.type = this.getInputType();\n\t\tinput.value = this._editingFormatter( this._textValueComputed, this );\n\t\tinput.addEventListener( \"keydown\", this._onInputKeyDownBound );\n\t\tinput.addEventListener( \"blur\", this._onInputBlurBound );\n\t\tinput.addEventListener( \"change\", this._onInputChangeBound );\n\t\tinput.addEventListener( \"input\", this._onInputInputBound );\n\n\t\t// Style\n\t\tconst theme = this.theme;\n\t\tconst state = this.state;\n\t\tclipper.setAttribute( \"style\", this.getClipperStyle( state, theme, inputRect, clipperRect ) );\n\t\tinput.setAttribute( \"style\", this.getInputStyle( state, theme, inputRect, clipperRect ) );\n\n\t\t// ReadOnly\n\t\tif( this.isReadOnly() ) {\n\t\t\tinput.setAttribute( \"readonly\", \"readonly\" );\n\t\t} else {\n\t\t\tinput.removeAttribute( \"readonly\" );\n\t\t}\n\n\t\t// Disabled\n\t\tif( this.isDisabled() ) {\n\t\t\tinput.setAttribute( \"disabled\", \"disabled\" );\n\t\t} else {\n\t\t\tinput.removeAttribute( \"disabled\" );\n\t\t}\n\t}\n\n\tcancel(): void {\n\t\tif( this._isInputShown ) {\n\t\t\tthis._isInputShown = false;\n\n\t\t\tconst text = this._text;\n\t\t\tif( text != null ) {\n\t\t\t\ttext.visible = true;\n\t\t\t}\n\n\t\t\tconst input = DInput._input;\n\t\t\tif( input != null ) {\n\t\t\t\tinput.removeEventListener( \"keydown\", this._onInputKeyDownBound );\n\t\t\t\tinput.removeEventListener( \"blur\", this._onInputBlurBound );\n\t\t\t\tinput.removeEventListener( \"change\", this._onInputChangeBound );\n\t\t\t\tinput.removeEventListener( \"input\", this._onInputInputBound );\n\t\t\t\tinput.type = \"text\";\n\t\t\t\tthis.resetSelection( input );\n\t\t\t}\n\n\t\t\tconst clipper = DInput._clipper;\n\t\t\tif( clipper != null ) {\n\t\t\t\tclipper.style.display = \"none\";\n\t\t\t}\n\n\t\t\tconst renderer = this._updateInputBoundRenderer;\n\t\t\tif( renderer != null ) {\n\t\t\t\tthis._updateInputBoundRenderer = null;\n\t\t\t\trenderer.off( \"postrender\", this._updateInputBound );\n\t\t\t}\n\n\t\t\tthis._isInputSelected = false;\n\n\t\t\tconst application = DApplications.getInstance();\n\t\t\tconst view = application.view;\n\t\t\tview.focus();\n\n\t\t\tconst interactionManager = application.renderer.plugins.interaction;\n\t\t\tif( this.containsPoint( interactionManager.mouse.global ) && ! this.isHovered() ) {\n\t\t\t\tthis.setHovered( true );\n\t\t\t\tview.style.cursor = this.cursor;\n\t\t\t}\n\n\t\t\tDApplications.update();\n\t\t}\n\t}\n\n\tprotected resetSelection( input: HTMLInputElement ) {\n\t\tinput.setSelectionRange( input.value.length, input.value.length, \"backward\" );\n\t}\n\n\tprotected getInput( clipper: HTMLDivElement ): HTMLInputElement | null {\n\t\tif( DInput._input == null ) {\n\t\t\tclipper.appendChild( DInput._input = this.createInput() );\n\t\t}\n\t\treturn DInput._input;\n\t}\n\n\tprotected createInput(): HTMLInputElement {\n\t\tconst result = document.createElement( \"input\" );\n\t\tresult.setAttribute( \"spellcheck\", \"false\" );\n\t\treturn result;\n\t}\n\n\tprotected getClipper(): HTMLDivElement | null {\n\t\tif( DInput._clipper == null ) {\n\t\t\tconst clipper = DInput._clipper = this.createClipper();\n\t\t\tDApplications.getInstance().getRootElement().appendChild( clipper );\n\t\t}\n\t\treturn DInput._clipper;\n\t}\n\n\tprotected createClipper(): HTMLDivElement {\n\t\treturn document.createElement( \"div\" );\n\t}\n\n\tprotected getInputStyleBackground( state: DBaseState, theme: DThemeInput ): string {\n\t\treturn `background-color: transparent;`;\n\t}\n\n\tprotected getInputStyleBorder( state: DBaseState, theme: DThemeInput ): string {\n\t\treturn `border: none; box-sizing: border-box;`;\n\t}\n\n\tprotected getInputStylePadding( state: DBaseState, theme: DThemeInput, inputRect: Rectangle ): string {\n\t\tconst paddingTop = theme.getPaddingTop();\n\t\tconst paddingRight = theme.getPaddingRight();\n\t\tconst paddingBottom = theme.getPaddingBottom();\n\t\tconst paddingLeft = theme.getPaddingLeft();\n\t\treturn `padding: ${paddingTop}px ${paddingRight}px ${paddingBottom}px ${paddingLeft}px;`;\n\t}\n\n\tprotected getInputStyleOutline( state: DBaseState, theme: DThemeInput ): string {\n\t\treturn `outline: none;`;\n\t}\n\n\tprotected getInputStylePosition(\n\t\tstate: DBaseState, theme: DThemeInput,\n\t\tinputRect: Rectangle, clipperRect: Rectangle\n\t): string {\n\t\treturn `position: absolute;` +\n\t\t\t`left: ${inputRect.x - clipperRect.x}px;` +\n\t\t\t`top: ${inputRect.y - clipperRect.y}px;` +\n\t\t\t`width: ${inputRect.width}px;` +\n\t\t\t`height: ${inputRect.height}px;` +\n\t\t\t`line-height: ${inputRect.height}px;`;\n\t}\n\n\tprotected getInputStyleText( state: DBaseState, theme: DThemeInput ): string {\n\t\treturn `font-family: ${theme.getFontFamilly()};` +\n\t\t\t`font-size: ${theme.getFontSize()}px;` +\n\t\t\t`color: #${theme.getColor( state ).toString( 16 )};`;\n\t}\n\n\tprotected getInputStyleMargin( state: DBaseState, theme: DThemeInput ): string {\n\t\treturn \"margin: 0;\";\n\t}\n\n\tprotected getInputStyle(\n\t\tstate: DBaseState, theme: DThemeInput,\n\t\tinputRect: Rectangle, clipperRect: Rectangle\n\t): string {\n\t\treturn this.getInputStylePosition( state, theme, inputRect, clipperRect ) +\n\t\t\tthis.getInputStyleMargin( state, theme ) +\n\t\t\tthis.getInputStyleText( state, theme ) +\n\t\t\tthis.getInputStyleBackground( state, theme ) +\n\t\t\tthis.getInputStyleBorder( state, theme ) +\n\t\t\tthis.getInputStylePadding( state, theme, inputRect ) +\n\t\t\tthis.getInputStyleOutline( state, theme );\n\t}\n\n\tprotected getClipperStylePosition(\n\t\tstate: DBaseState, theme: DThemeInput,\n\t\tinputRect: Rectangle, clipperRect: Rectangle\n\t): string {\n\t\treturn `position: absolute;` +\n\t\t\t`left: ${clipperRect.x}px;` +\n\t\t\t`top: ${clipperRect.y}px;` +\n\t\t\t`width: ${clipperRect.width}px;` +\n\t\t\t`height: ${clipperRect.height}px;` +\n\t\t\t`line-height: ${inputRect.height}px;`;\n\t}\n\n\tprotected getClipperStyle(\n\t\tstate: DBaseState, theme: DThemeInput,\n\t\tinputRect: Rectangle, clipperRect: Rectangle\n\t) {\n\t\treturn `overflow: hidden; outline: none;` +\n\t\t\t`padding: 0; margin: 0; border: none; background-color: transparent;` +\n\t\t\tthis.getClipperStylePosition( state, theme, inputRect, clipperRect );\n\t}\n\n\tprotected onInputKeyDown( e: KeyboardEvent ) {\n\t\tif( UtilKeyboardEvent.isFocusKey( e ) ) {\n\t\t\tthis.end();\n\n\t\t\tconst focusController = DControllers.getFocusController();\n\t\t\tconst direction = UtilKeyboardEvent.getFocusDirection( e );\n\t\t\tconst focusable = focusController.findFocusable( this, false, false, direction );\n\t\t\tif( focusable != null ) {\n\t\t\t\tDApplications.getInstance().view.focus();\n\t\t\t\tfocusController.setFocused( focusable, true, true );\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t}\n\t\t} else if( UtilKeyboardEvent.isOkKey( e ) ) {\n\t\t\tthis.end();\n\t\t\tthis.emit( \"enter\", this );\n\t\t} else if( UtilKeyboardEvent.isCancelKey( e ) ) {\n\t\t\tthis.cancel();\n\t\t}\n\t}\n\n\tprotected onInputBlur( e: FocusEvent ) {\n\t\tthis.end();\n\t}\n\n\tend(): void {\n\t\tthis.onInputChange();\n\t\tthis.cancel();\n\t}\n\n\tprotected onInputInput( e: Event ) {\n\t\tif( e.target instanceof HTMLInputElement ) {\n\t\t\tthis.emit( \"input\", this.toValue( e.target.value ), this );\n\t\t}\n\t}\n\n\tprotected onInputChange() {\n\t\tif( this._isInputShown ) {\n\t\t\tconst input = DInput._input;\n\t\t\tif( input != null ) {\n\t\t\t\tconst newValue = this.toValue( input.value );\n\t\t\t\tconst oldValue = this._textValueComputed;\n\t\t\t\tif( oldValue !== newValue ) {\n\t\t\t\t\tthis.text = newValue;\n\t\t\t\t\tthis.onTextValueChange( newValue, oldValue );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onTextValueChange( newValue: VALUE, oldValue: VALUE ): void {\n\t\tthis.validate();\n\t\tthis.emit( \"change\", newValue, oldValue, this );\n\t}\n\n\tselect(): this {\n\t\tconst input = DInput._input;\n\t\tif( input != null && this._isInputShown ) {\n\t\t\tinput.select();\n\t\t} else {\n\t\t\tthis._isInputSelected = true;\n\t\t}\n\t\treturn this;\n\t}\n\n\tprotected updateInput() {\n\t\tif( this._isInputShown ) {\n\t\t\tif( this.worldVisible ) {\n\t\t\t\tconst input = DInput._input;\n\t\t\t\tconst clipper = DInput._clipper;\n\t\t\t\tif( input != null && clipper != null ) {\n\t\t\t\t\tconst resolution = DApplications.getInstance().renderer.resolution;\n\t\t\t\t\tconst inputRect = this.getInputRect( resolution );\n\t\t\t\t\tconst clipperRect = this.getClipperRect( inputRect, resolution );\n\t\t\t\t\tconst theme = this.theme;\n\t\t\t\t\tconst state = this.state;\n\t\t\t\t\tinput.setAttribute( \"style\", this.getInputStyle( state, theme, inputRect, clipperRect ) );\n\t\t\t\t\tclipper.setAttribute( \"style\", this.getClipperStyle( state, theme, inputRect, clipperRect ) );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.cancel();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onDownThis( e: InteractionEvent ): void {\n\t\tif( this.isFocused() ) {\n\t\t\tthis.start();\n\t\t}\n\t\tsuper.onDownThis( e );\n\t}\n\n\tprotected abstract toValue( valueAsString: string ): VALUE;\n\tprotected abstract getInputType(): string;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Rectangle } from \"pixi.js\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DInput, DInputOptions, DThemeInput } from \"./d-input\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\n\nexport interface DInputNumberOptions<\n\tTHEME extends DThemeInputNumber = DThemeInputNumber\n> extends DInputOptions<number, THEME> {\n\tstep?: number | null;\n\tmin?: number | null;\n\tmax?: number | null;\n}\n\nexport interface DThemeInputNumber extends DThemeInput {\n\tgetEditingFormatter(): ( value: number, caller: DInputNumber ) => string;\n\tgetEditingUnformatter(): ( text: string, caller: DInputNumber ) => number;\n\tgetEditingValidator(): ( value: number, caller: DInputNumber ) => unknown;\n\tgetTextValue( state: DBaseState ): number;\n\tnewTextValue(): DStateAwareOrValueMightBe<number>;\n\tgetStep(): number | null;\n\tgetMin(): number | null;\n\tgetMax(): number | null;\n}\n\n// Option parser\nconst toStep = <THEME extends DThemeInputNumber>(\n\ttheme: THEME, options?: DInputNumberOptions<THEME>\n): number | null => {\n\tif( options != null ) {\n\t\treturn ( options.step != null ? options.step : theme.getStep() );\n\t}\n\treturn null;\n};\n\nconst toMin = <THEME extends DThemeInputNumber>(\n\ttheme: THEME, options?: DInputNumberOptions<THEME>\n): number | null => {\n\tif( options != null ) {\n\t\treturn ( options.min != null ? options.min : theme.getMin() );\n\t}\n\treturn null;\n};\n\nconst toMax = <THEME extends DThemeInputNumber>(\n\ttheme: THEME, options?: DInputNumberOptions<THEME>\n): number | null => {\n\tif( options != null ) {\n\t\treturn ( options.max != null ? options.max : theme.getMax() );\n\t}\n\treturn null;\n};\n\nexport abstract class DInputNumber<\n\tTHEME extends DThemeInputNumber = DThemeInputNumber,\n\tOPTIONS extends DInputNumberOptions<THEME> = DInputNumberOptions<THEME>\n> extends DInput<number, THEME, OPTIONS> {\n\tprotected _step!: number | null;\n\tprotected _min!: number | null;\n\tprotected _max!: number | null;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tconst theme = this.theme;\n\t\tthis._step = toStep( theme, options );\n\t\tthis._min = toMin( theme, options );\n\t\tthis._max = toMax( theme, options );\n\t}\n\n\tget step(): number | null {\n\t\treturn this._step;\n\t}\n\n\tset step( step: number | null ) {\n\t\tif( this._step !== step ) {\n\t\t\tthis._step = step;\n\t\t\tthis.updateInputStep();\n\t\t}\n\t}\n\n\tget min(): number | null {\n\t\treturn this._min;\n\t}\n\n\tset min( min: number | null ) {\n\t\tif( this._min !== min ) {\n\t\t\tthis._min = min;\n\t\t\tthis.updateInputMin();\n\t\t}\n\t}\n\n\tget max(): number | null {\n\t\treturn this._max;\n\t}\n\n\tset max( max: number | null ) {\n\t\tif( this._max !== max ) {\n\t\t\tthis._max = max;\n\t\t\tthis.updateInputMax();\n\t\t}\n\t}\n\n\tprotected toValue( valueAsString: string ): number {\n\t\tconst result = this._editingUnformatter( valueAsString, this );\n\t\tif( result === result /* NaN Check */ ) {\n\t\t\tif( this._min != null && result < this._min ) {\n\t\t\t\treturn this._min;\n\t\t\t}\n\t\t\tif( this._max != null && this._max < result ) {\n\t\t\t\treturn this._max;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\treturn this.value;\n\t}\n\n\tprotected updateInputStep(): void {\n\t\tif( this._isInputShown ) {\n\t\t\tconst input = DInput._input;\n\t\t\tif( input != null ) {\n\t\t\t\tthis.initInputStep( input );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected updateInputMin(): void {\n\t\tif( this._isInputShown ) {\n\t\t\tconst input = DInput._input;\n\t\t\tif( input != null ) {\n\t\t\t\tthis.initInputMin( input );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected updateInputMax(): void {\n\t\tif( this._isInputShown ) {\n\t\t\tconst input = DInput._input;\n\t\t\tif( input != null ) {\n\t\t\t\tthis.initInputMax( input );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected initInputStep( input: HTMLInputElement ): void {\n\t\tif( this._step != null ) {\n\t\t\tinput.step = String( this._step );\n\t\t} else {\n\t\t\tinput.removeAttribute( \"step\" );\n\t\t}\n\t}\n\n\tprotected initInputMin( input: HTMLInputElement ): void {\n\t\tif( this._min != null ) {\n\t\t\tinput.min = `${this._min}`;\n\t\t} else {\n\t\t\tinput.removeAttribute( \"min\" );\n\t\t}\n\t}\n\n\tprotected initInputMax( input: HTMLInputElement ): void {\n\t\tif( this._max != null ) {\n\t\t\tinput.max = `${this._max}`;\n\t\t} else {\n\t\t\tinput.removeAttribute( \"max\" );\n\t\t}\n\t}\n\n\tprotected initInput(\n\t\tinput: HTMLInputElement, clipper: HTMLDivElement,\n\t\tinputRect: Rectangle, clipperRect: Rectangle\n\t): void {\n\t\tsuper.initInput( input, clipper, inputRect, clipperRect );\n\t\tthis.initInputStep( input );\n\t\tthis.initInputMin( input );\n\t\tthis.initInputMax( input );\n\t}\n\n\tprotected resetSelection( input: HTMLInputElement ) {\n\t\tinput.type = \"text\";\n\t\tsuper.resetSelection( input );\n\t\tinput.type = \"number\";\n\t}\n\n\tprotected getInputType(): string {\n\t\treturn \"number\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DInputNumber, DInputNumberOptions, DThemeInputNumber } from \"./d-input-number\";\n\nexport interface DInputRealOptions<\n\tTHEME extends DThemeInputReal = DThemeInputReal\n> extends DInputNumberOptions<THEME> {\n\n}\n\nexport interface DThemeInputReal extends DThemeInputNumber {\n\n}\n\nexport class DInputReal<\n\tTHEME extends DThemeInputReal = DThemeInputReal,\n\tOPTIONS extends DInputRealOptions<THEME> = DInputRealOptions<THEME>\n> extends DInputNumber<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DInputReal\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DTextBase, DTextBaseOptions, DThemeTextBase } from \"./d-text-base\";\n\nexport interface DTextOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeText = DThemeText\n> extends DTextBaseOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeText extends DThemeTextBase {\n\n}\n\nexport class DText<\n\tVALUE = unknown,\n\tTHEME extends DThemeText = DThemeText,\n\tOPTIONS extends DTextOptions<VALUE, THEME> = DTextOptions<VALUE, THEME>\n> extends DTextBase<VALUE, THEME, OPTIONS> {\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DText\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DText, DTextOptions, DThemeText } from \"./d-text\";\n\nexport interface DInputLabelOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeText = DThemeText\n> extends DTextOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeInputLabel extends DThemeText {\n\n}\n\nexport class DInputLabel<\n\tVALUE = unknown,\n\tTHEME extends DThemeInputLabel = DThemeInputLabel,\n\tOPTIONS extends DInputLabelOptions<VALUE, THEME> = DInputLabelOptions<VALUE, THEME>\n> extends DText<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DInputLabel\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DInputLabel, DInputLabelOptions } from \"./d-input-label\";\nimport { DLayoutOptions } from \"./d-layout\";\nimport { DLayoutHorizontal, DThemeLayoutHorizontal } from \"./d-layout-horizontal\";\nimport { DLayoutSpace, DLayoutSpaceOptions } from \"./d-layout-space\";\n\ninterface InputOptions {\n\tweight?: number;\n}\n\ninterface Input extends DisplayObject {\n\treadonly height: number;\n}\n\nexport interface DInputAndLabelOptions<\n\tINPUT_OPTIONS extends InputOptions = InputOptions,\n\tTHEME extends DThemeInputAndLabel = DThemeInputAndLabel\n> extends DLayoutOptions<THEME> {\n\tinput?: INPUT_OPTIONS;\n\tlabel?: DInputLabelOptions;\n\tspace?: DLayoutSpaceOptions;\n}\n\nexport interface DThemeInputAndLabel extends DThemeLayoutHorizontal {\n\n}\n\nexport abstract class DInputAndLabel<\n\tINPUT extends Input,\n\tINPUT_OPTIONS extends InputOptions,\n\tTHEME extends DThemeInputAndLabel = DThemeInputAndLabel,\n\tOPTIONS extends DInputAndLabelOptions<INPUT_OPTIONS, THEME> = DInputAndLabelOptions<INPUT_OPTIONS, THEME>\n> extends DLayoutHorizontal<THEME, OPTIONS> {\n\tprotected _input: INPUT;\n\tprotected _label: DInputLabel;\n\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis.addChild( this._label = new DInputLabel( options != null ? options.label : undefined ) );\n\t\tthis.addChild( this._input = this.createInput( options != null ? options.input : undefined ) );\n\t\tif( options != null && options.space != null ) {\n\t\t\tthis.addChild( new DLayoutSpace( options.space ) );\n\t\t}\n\t}\n\n\tget input() {\n\t\treturn this._input;\n\t}\n\n\tget label() {\n\t\treturn this._label;\n\t}\n\n\tprotected abstract createInput( options?: INPUT_OPTIONS | { weight: number } ): INPUT;\n\n\tprotected getType(): string {\n\t\treturn \"DInputAndLabel\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DInputAndLabel, DInputAndLabelOptions, DThemeInputAndLabel } from \"./d-input-and-label\";\nimport { DInputReal, DInputRealOptions, DThemeInputReal } from \"./d-input-real\";\n\nexport interface DInputRealAndLabelOptions<\n\tTHEME extends DThemeInputAndLabel = DThemeInputAndLabel\n> extends DInputAndLabelOptions<DInputRealOptions, THEME> {}\n\nexport class DInputRealAndLabel<\n\tTHEME extends DThemeInputAndLabel = DThemeInputAndLabel,\n\tOPTIONS extends DInputRealAndLabelOptions<THEME> = DInputRealAndLabelOptions<THEME>\n> extends DInputAndLabel<DInputReal, DInputRealOptions, THEME, OPTIONS> {\n\tprotected createInput( options?: DInputRealOptions<DThemeInputReal> ): DInputReal {\n\t\treturn new DInputReal( options );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DInput, DInputOptions, DThemeInput } from \"./d-input\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\n\nexport interface DInputTextOptions<\n\tTHEME extends DThemeInputText = DThemeInputText\n> extends DInputOptions<string, THEME> {\n\n}\n\nexport interface DThemeInputText extends DThemeInput {\n\tgetEditingFormatter(): ( value: string, caller: DInputText ) => string;\n\tgetEditingUnformatter(): ( text: string, caller: DInputText ) => string;\n\tgetEditingValidator(): ( value: string, caller: DInputText ) => unknown;\n\tgetTextFormatter(): ( value: string, caller: DInputText ) => string;\n\tgetTextValue( state: DBaseState ): string;\n\tnewTextValue(): DStateAwareOrValueMightBe<string>;\n}\n\nexport class DInputText<\n\tTHEME extends DThemeInputText = DThemeInputText,\n\tOPTIONS extends DInputTextOptions<THEME> = DInputTextOptions<THEME>\n> extends DInput<string, THEME, OPTIONS> {\n\tprotected toValue( valueAsString: string ): string {\n\t\treturn this._editingUnformatter( valueAsString, this );\n\t}\n\n\tprotected getInputType(): string {\n\t\treturn \"text\";\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DInputText\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DInputAndLabel, DInputAndLabelOptions, DThemeInputAndLabel } from \"./d-input-and-label\";\nimport { DInputText, DInputTextOptions, DThemeInputText } from \"./d-input-text\";\n\nexport interface DInputTextAndLabelOptions<\n\tTHEME extends DThemeInputAndLabel = DThemeInputAndLabel\n> extends DInputAndLabelOptions<DInputTextOptions, THEME> {}\n\nexport class DInputTextAndLabel<\n\tTHEME extends DThemeInputAndLabel = DThemeInputAndLabel,\n\tOPTIONS extends DInputTextAndLabelOptions<THEME> = DInputTextAndLabelOptions<THEME>\n> extends DInputAndLabel<DInputText, DInputTextOptions, THEME, OPTIONS> {\n\tprotected createInput( options?: DInputTextOptions<DThemeInputText> ): DInputText {\n\t\treturn new DInputText( options );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DColorAndAlpha } from \"./d-color\";\n\nexport class DPickerColorAndAlpha implements DColorAndAlpha {\n\tprotected _colorAndAlpha: DColorAndAlpha;\n\tprotected _onColorChange: ( color: number ) => void;\n\tprotected _onAlphaChange: ( alpha: number ) => void;\n\n\tconstructor(\n\t\tcolorAndAlpha: DColorAndAlpha,\n\t\tonColorChange: ( color: number ) => void,\n\t\tonAlphaChange: ( alpha: number ) => void\n\t) {\n\t\tthis._colorAndAlpha = colorAndAlpha;\n\t\tthis._onColorChange = onColorChange;\n\t\tthis._onAlphaChange = onAlphaChange;\n\t}\n\n\tget color() {\n\t\treturn this._colorAndAlpha.color;\n\t}\n\n\tset color( color: number ) {\n\t\tif( this._colorAndAlpha.color !== color ) {\n\t\t\tconst callback = this._onColorChange;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback( color );\n\t\t\t}\n\t\t}\n\t}\n\n\tget alpha() {\n\t\treturn this._colorAndAlpha.alpha;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tif( this._colorAndAlpha.alpha !== alpha ) {\n\t\t\tconst callback = this._onAlphaChange;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback( alpha );\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\nimport { DColorAndAlpha } from \"./d-color\";\n\nexport class DPickerColorRecent extends utils.EventEmitter {\n\tprotected _recents: DColorAndAlpha[];\n\tprotected _capacity: number;\n\n\tconstructor( recents: DColorAndAlpha[], capacity: number ) {\n\t\tsuper();\n\n\t\tthis._recents = recents;\n\t\tthis._capacity = capacity;\n\t}\n\n\tget( index: number ): DColorAndAlpha | null {\n\t\tconst recents = this._recents;\n\t\tif( 0 <= index && index < recents.length ) {\n\t\t\treturn recents[ recents.length - 1 - index ];\n\t\t}\n\t\treturn null;\n\t}\n\n\tset( index: number, colorAndAlpha: DColorAndAlpha ): DColorAndAlpha | null {\n\t\tconst recents = this._recents;\n\t\tif( 0 <= index && index < recents.length ) {\n\t\t\tconst result = recents[ recents.length - 1 - index ];\n\t\t\trecents[ recents.length - 1 - index ] = {\n\t\t\t\tcolor: colorAndAlpha.color,\n\t\t\t\talpha: colorAndAlpha.alpha\n\t\t\t};\n\t\t\tthis.emit( \"change\", this );\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tcontains( colorAndAlpha: DColorAndAlpha ): boolean {\n\t\tconst recents = this._recents;\n\t\tfor( let i = 0, imax = recents.length; i < imax; ++i ) {\n\t\t\tconst recent = recents[ i ];\n\t\t\tif( recent.color === colorAndAlpha.color && recent.alpha === colorAndAlpha.alpha ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tadd( colorAndAlpha: DColorAndAlpha ): this {\n\t\tconst recents = this._recents;\n\t\trecents.push({\n\t\t\tcolor: colorAndAlpha.color,\n\t\t\talpha: colorAndAlpha.alpha\n\t\t});\n\t\tif( this._capacity < recents.length ) {\n\t\t\trecents.shift();\n\t\t}\n\t\tthis.emit( \"change\", this );\n\t\treturn this;\n\t}\n\n\tpop(): DColorAndAlpha | null {\n\t\tconst recents = this._recents;\n\t\tconst result = recents.shift();\n\t\tif( result != null ) {\n\t\t\tthis.emit( \"change\", this );\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tsize(): number {\n\t\treturn this._recents.length;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, interaction, Point, Sprite, Texture } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DApplications } from \"./d-applications\";\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DColorAndAlpha } from \"./d-color\";\nimport { DInputRealAndLabel } from \"./d-input-real-and-label\";\nimport { DInputTextAndLabel } from \"./d-input-text-and-label\";\nimport { DPickerColorAndAlpha } from \"./d-picker-color-and-alpha\";\nimport { DPickerColorRecent } from \"./d-picker-color-recent\";\nimport { UtilHsv } from \"./util/util-hsv\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\nimport { UtilRgb } from \"./util/util-rgb\";\n\nexport interface DPickerColorOptions<THEME extends DThemePickerColor = DThemePickerColor> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemePickerColor extends DThemeBase {\n\tgetMainWidth(): number;\n\tgetMainHeight(): number;\n\tgetMainTexture(): Texture;\n\tgetMainPointerTexture(): Texture;\n\tgetMainPointerColor(): number;\n\tgetMainPointerAlpha(): number;\n\n\tgetBaseHeight(): number;\n\tgetBaseMargin(): number;\n\tgetBaseTexture(): Texture;\n\tgetBasePointerTexture(): Texture;\n\tgetBasePointerColor(): number;\n\tgetBasePointerAlpha(): number;\n\n\tgetAlphaHeight(): number;\n\tgetAlphaMargin(): number;\n\tgetAlphaTexture(): Texture;\n\tgetAlphaCheckerboardTexture(): Texture;\n\tgetAlphaPointerTexture(): Texture;\n\tgetAlphaPointerColor(): number;\n\tgetAlphaPointerAlpha(): number;\n\n\tgetRecentMargin(): number;\n\tgetRecentColorMargin(): number;\n\tgetRecentColorWidth(): number;\n\tgetRecentColorHeight(): number;\n\tgetRecentColorCount(): number;\n\tgetRecentCheckerboardTexture(): Texture;\n\tgetRecents(): DColorAndAlpha[];\n\n\tgetInputMargin(): number;\n\tgetInputLabelWidth(): number;\n\n\tgetSampleWidth(): number;\n\tgetSampleHeight(): number;\n\tgetSampleCheckerboardTexture(): Texture;\n}\n\nexport class DPickerColor<\n\tTHEME extends DThemePickerColor = DThemePickerColor,\n\tOPTIONS extends DPickerColorOptions<THEME> = DPickerColorOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tprotected static RECENT_COLORS: DPickerColorRecent | null = null;\n\n\tprotected _mainBaseSprite!: Sprite;\n\tprotected _mainSprite!: Sprite;\n\tprotected _mainPointerSprite!: Sprite;\n\tprotected _pointerPoint!: Point;\n\tprotected _onMainMoveBound!: ( e: InteractionEvent ) => void;\n\tprotected _onMainUpBound!: ( e: InteractionEvent ) => void;\n\n\tprotected _baseSprite!: Sprite;\n\tprotected _basePointerSprite!: Sprite;\n\tprotected _onBaseMoveBound!: ( e: InteractionEvent ) => void;\n\tprotected _onBaseUpBound!: ( e: InteractionEvent ) => void;\n\n\tprotected _alphaCheckerboardSprite!: Sprite;\n\tprotected _alphaSprite!: Sprite;\n\tprotected _alphaPointerSprite!: Sprite;\n\tprotected _onAlphaMoveBound!: ( e: InteractionEvent ) => void;\n\tprotected _onAlphaUpBound!: ( e: InteractionEvent ) => void;\n\n\tprotected _recentColorSprites!: Sprite[];\n\tprotected _recent!: DPickerColorRecent;\n\n\tprotected _inputAndLabelColor!: DInputTextAndLabel;\n\tprotected _inputAndLabelAlpha!: DInputRealAndLabel;\n\n\tprotected _sampleCurrentCheckerboardSprite!: Sprite;\n\tprotected _sampleCurrentSprite!: Sprite;\n\tprotected _sampleNewCheckerboardSprite!: Sprite;\n\tprotected _sampleNewSprite!: Sprite;\n\n\tprotected _current!: DColorAndAlpha;\n\tprotected _currentPicker!: DPickerColorAndAlpha;\n\tprotected _base!: number;\n\tprotected _new!: DColorAndAlpha;\n\tprotected _newPicker!: DPickerColorAndAlpha;\n\n\tget current(): DColorAndAlpha {\n\t\treturn this._currentPicker;\n\t}\n\n\tget new(): DColorAndAlpha {\n\t\treturn this._newPicker;\n\t}\n\n\tget recent(): DPickerColorRecent {\n\t\treturn this._recent;\n\t}\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\n\t\tthis._base = 0xff0000;\n\t\tthis._new = { color: 0xffffff, alpha: 1 };\n\t\tthis._newPicker = new DPickerColorAndAlpha( this._new, ( color ) => {\n\t\t\tthis.setColorNew( color );\n\t\t}, ( alpha: number ) => {\n\t\t\tthis.setAlphaNew( alpha );\n\t\t});\n\t\tthis._current = { color: 0xffffff, alpha: 1 };\n\t\tthis._currentPicker = new DPickerColorAndAlpha( this._current, ( color ) => {\n\t\t\tthis.setColorCurrent( color );\n\t\t}, ( alpha: number ) => {\n\t\t\tthis.setAlphaCurrent( alpha );\n\t\t});\n\n\t\tconst theme = this.theme;\n\t\tconst padding = this._padding;\n\t\tconst paddingTop = padding.getTop();\n\t\tconst paddingRight = padding.getRight();\n\t\tconst paddingBottom = padding.getBottom();\n\t\tconst paddingLeft = padding.getLeft();\n\t\tthis._pointerPoint = new Point();\n\n\t\t// Main\n\t\tconst mainWidth = theme.getMainWidth();\n\t\tconst mainHeight = theme.getMainHeight();\n\t\tconst mainBaseSprite = this._mainBaseSprite = new Sprite( Texture.WHITE );\n\t\tmainBaseSprite.x = paddingLeft;\n\t\tmainBaseSprite.y = paddingTop;\n\t\tmainBaseSprite.width = mainWidth;\n\t\tmainBaseSprite.height = mainHeight;\n\t\tmainBaseSprite.interactive = true;\n\t\tthis.addChild( mainBaseSprite );\n\n\t\tconst mainSprite = this._mainSprite = new Sprite( theme.getMainTexture() );\n\t\tmainSprite.x = paddingLeft;\n\t\tmainSprite.y = paddingTop;\n\t\tmainSprite.tint = this._base;\n\t\tmainSprite.interactive = false;\n\t\tthis.addChild( mainSprite );\n\n\t\t// Main event handling\n\t\tthis._onMainMoveBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onMainMove( e );\n\t\t};\n\t\tthis._onMainUpBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onMainUp( e );\n\t\t};\n\t\tmainBaseSprite.on( UtilPointerEvent.down, ( e: InteractionEvent ) => {\n\t\t\tthis.onMainDown( e );\n\t\t});\n\n\t\t// Base color picker\n\t\tconst baseSprite = this._baseSprite = new Sprite( theme.getBaseTexture() );\n\t\tbaseSprite.x = paddingLeft;\n\t\tbaseSprite.y = mainBaseSprite.y + mainBaseSprite.height + theme.getBaseMargin();\n\t\tbaseSprite.interactive = true;\n\t\tthis.addChild( baseSprite );\n\n\t\t// Base event\n\t\tthis._onBaseMoveBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onBaseMove( e );\n\t\t};\n\t\tthis._onBaseUpBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onBaseUp( e );\n\t\t};\n\t\tbaseSprite.on( UtilPointerEvent.down, ( e: InteractionEvent ) => {\n\t\t\tthis.onBaseDown( e );\n\t\t});\n\n\t\t// Alpha picker\n\t\tconst alphaCheckerboardSprite = this._alphaCheckerboardSprite =\n\t\t\tnew Sprite( theme.getAlphaCheckerboardTexture() );\n\t\talphaCheckerboardSprite.x = padding.getLeft();\n\t\talphaCheckerboardSprite.y = baseSprite.y + theme.getBaseHeight() + theme.getBaseMargin();\n\t\talphaCheckerboardSprite.interactive = false;\n\t\tthis.addChild( alphaCheckerboardSprite );\n\n\t\tconst alphaSprite = new Sprite( theme.getAlphaTexture() );\n\t\talphaSprite.tint = this._new.color;\n\t\talphaSprite.interactive = true;\n\t\talphaCheckerboardSprite.addChild( alphaSprite );\n\n\t\t// Alpha event\n\t\tthis._onAlphaMoveBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onAlphaMove( e );\n\t\t};\n\t\tthis._onAlphaUpBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onAlphaUp( e );\n\t\t};\n\t\talphaSprite.on( UtilPointerEvent.down, ( e: InteractionEvent ) => {\n\t\t\tthis.onAlphaDown( e );\n\t\t});\n\n\t\t// Pointers\n\t\tconst mainPointerSprite = this._mainPointerSprite = new Sprite( theme.getMainPointerTexture() );\n\t\tmainPointerSprite.x = paddingLeft;\n\t\tmainPointerSprite.y = paddingTop;\n\t\tmainPointerSprite.anchor.x = 0.5;\n\t\tmainPointerSprite.anchor.y = 0.5;\n\t\tmainPointerSprite.tint = theme.getMainPointerColor();\n\t\tmainPointerSprite.alpha = theme.getMainPointerAlpha();\n\t\tmainPointerSprite.interactive = false;\n\t\tthis.addChild( mainPointerSprite );\n\n\t\tconst alphaPointerSprite = this._alphaPointerSprite = new Sprite( theme.getAlphaPointerTexture() );\n\t\talphaPointerSprite.x = mainWidth;\n\t\talphaPointerSprite.y = alphaCheckerboardSprite.height * 0.5;\n\t\talphaPointerSprite.tint = theme.getAlphaPointerColor();\n\t\talphaPointerSprite.alpha = theme.getAlphaPointerAlpha();\n\t\talphaPointerSprite.anchor.set( 0.5, 0.5 );\n\t\talphaPointerSprite.interactive = false;\n\t\talphaCheckerboardSprite.addChild( alphaPointerSprite );\n\n\t\tconst basePointerSprite = this._basePointerSprite = new Sprite( theme.getBasePointerTexture() );\n\t\tbasePointerSprite.x = 0;\n\t\tbasePointerSprite.y = baseSprite.height * 0.5;\n\t\tbasePointerSprite.tint = theme.getBasePointerColor();\n\t\tbasePointerSprite.alpha = theme.getBasePointerAlpha();\n\t\tbasePointerSprite.anchor.set( 0.5, 0.5 );\n\t\tbasePointerSprite.interactive = false;\n\t\tbaseSprite.addChild( basePointerSprite );\n\n\t\t// Recently used\n\t\tthis._recentColorSprites = [];\n\t\tconst recentColorSprites = this._recentColorSprites;\n\t\tconst recentColorCount = theme.getRecentColorCount();\n\t\tconst recentColorWidth = theme.getRecentColorWidth();\n\t\tconst recentColorHeight = theme.getRecentColorHeight();\n\t\tconst recentColorWidthHalf = recentColorWidth * 0.5;\n\t\tconst recentColorHeightHalf = recentColorHeight * 0.5;\n\t\tconst recentColorMargin = theme.getRecentColorMargin();\n\t\tconst recentColorY = alphaCheckerboardSprite.y + theme.getAlphaHeight() + theme.getRecentMargin();\n\t\tconst recentCheckerboardTexture = theme.getRecentCheckerboardTexture();\n\t\tif( DPickerColor.RECENT_COLORS == null ) {\n\t\t\tDPickerColor.RECENT_COLORS = new DPickerColorRecent(\n\t\t\t\ttheme.getRecents().slice( 0 ),\n\t\t\t\trecentColorCount\n\t\t\t);\n\t\t}\n\t\tconst recent = this._recent = DPickerColor.RECENT_COLORS;\n\t\trecent.on( \"change\", () => {\n\t\t\tthis.onRecentChange();\n\t\t});\n\t\tconst onRecentClick = ( e: InteractionEvent ) => {\n\t\t\tconst checkerboardSprite = e.currentTarget;\n\t\t\tif( checkerboardSprite instanceof Container ) {\n\t\t\t\tconst sprite = checkerboardSprite.children[ 0 ];\n\t\t\t\tif( sprite instanceof Sprite ) {\n\t\t\t\t\tthis.setColorNew( sprite.tint );\n\t\t\t\t\tthis.setAlphaNew( sprite.alpha );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tfor( let i = 0; i < recentColorCount; ++i ) {\n\t\t\tconst x = paddingLeft + i * (recentColorWidth + recentColorMargin);\n\n\t\t\tconst checkerboardSprite = new Sprite( recentCheckerboardTexture );\n\t\t\tcheckerboardSprite.x = x + recentColorWidthHalf;\n\t\t\tcheckerboardSprite.y = recentColorY + recentColorHeightHalf;\n\t\t\tcheckerboardSprite.anchor.x = 0.5;\n\t\t\tcheckerboardSprite.anchor.y = 0.5;\n\t\t\tcheckerboardSprite.buttonMode = true;\n\t\t\tcheckerboardSprite.interactive = true;\n\t\t\tUtilPointerEvent.onClick( checkerboardSprite, onRecentClick );\n\t\t\tthis.addChild( checkerboardSprite );\n\n\t\t\tconst sprite = new Sprite( Texture.WHITE );\n\t\t\tconst recentColorAndAlpha = recent.get( i );\n\t\t\tif( recentColorAndAlpha != null ) {\n\t\t\t\tsprite.tint = recentColorAndAlpha.color;\n\t\t\t\tsprite.alpha = recentColorAndAlpha.alpha;\n\t\t\t} else {\n\t\t\t\tsprite.tint = 0xffffff;\n\t\t\t\tsprite.alpha = 0;\n\t\t\t}\n\t\t\tsprite.width = recentColorWidth;\n\t\t\tsprite.height = recentColorHeight;\n\t\t\tsprite.anchor.x = 0.5;\n\t\t\tsprite.anchor.y = 0.5;\n\t\t\tsprite.interactive = false;\n\t\t\tcheckerboardSprite.addChild( sprite );\n\t\t\trecentColorSprites.push( sprite );\n\t\t}\n\n\t\t// Input color\n\t\tconst inputMargin = theme.getInputMargin();\n\t\tconst inputY = recentColorY + recentColorHeight + inputMargin;\n\t\tconst inputWidth = mainWidth * 0.5;\n\t\tconst inputAndLabelColor = this._inputAndLabelColor = new DInputTextAndLabel({\n\t\t\tparent: this,\n\t\t\tx: paddingLeft,\n\t\t\ty: inputY,\n\t\t\twidth: inputWidth,\n\t\t\tlabel: {\n\t\t\t\twidth: theme.getInputLabelWidth(),\n\t\t\t\ttext: {\n\t\t\t\t\tvalue: \"#\"\n\t\t\t\t}\n\t\t\t},\n\t\t\tinput: {\n\t\t\t\tweight: 1,\n\t\t\t\ttext: {\n\t\t\t\t\tvalue: \"FFFFFF\"\n\t\t\t\t},\n\t\t\t\ton: {\n\t\t\t\t\tinput: ( code: string ): void => {\n\t\t\t\t\t\tconst color = UtilRgb.fromCode( code );\n\t\t\t\t\t\tif( color != null ) {\n\t\t\t\t\t\t\tthis.setColorNew( color );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst inputAndLabelAlpha = this._inputAndLabelAlpha = new DInputRealAndLabel({\n\t\t\tparent: this,\n\t\t\tx: paddingLeft,\n\t\t\ty: inputY + inputAndLabelColor.height + inputMargin,\n\t\t\twidth: inputWidth,\n\t\t\tlabel: {\n\t\t\t\twidth: theme.getInputLabelWidth(),\n\t\t\t\ttext: {\n\t\t\t\t\tvalue: \"A\"\n\t\t\t\t}\n\t\t\t},\n\t\t\tinput: {\n\t\t\t\tweight: 1,\n\t\t\t\ttext: {\n\t\t\t\t\tvalue: 1\n\t\t\t\t},\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1,\n\t\t\t\ton: {\n\t\t\t\t\tinput: ( value: number ) => {\n\t\t\t\t\t\tthis.setAlphaNew( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Samples\n\t\tconst sampleWidth = theme.getSampleWidth();\n\t\tconst sampleHeight = theme.getSampleHeight();\n\t\tconst sampleX = paddingLeft + mainWidth * 0.75 - sampleWidth;\n\t\tconst sampleY = inputY + (inputAndLabelColor.height + inputMargin + inputAndLabelAlpha.height - sampleHeight) * 0.5;\n\n\t\tconst sampleCurrentCheckerboardSprite = this._sampleCurrentCheckerboardSprite =\n\t\t\tnew Sprite( theme.getSampleCheckerboardTexture() );\n\t\tsampleCurrentCheckerboardSprite.x = sampleX;\n\t\tsampleCurrentCheckerboardSprite.y = sampleY;\n\t\tsampleCurrentCheckerboardSprite.width = sampleWidth;\n\t\tsampleCurrentCheckerboardSprite.height = sampleHeight;\n\t\tsampleCurrentCheckerboardSprite.interactive = false;\n\t\tthis.addChild( sampleCurrentCheckerboardSprite );\n\n\t\tconst current = this._current;\n\t\tconst sampleCurrentSprite = this._sampleCurrentSprite = new Sprite( Texture.WHITE );\n\t\tsampleCurrentSprite.x = sampleX;\n\t\tsampleCurrentSprite.y = sampleY;\n\t\tsampleCurrentSprite.tint = current.color;\n\t\tsampleCurrentSprite.alpha = current.alpha;\n\t\tsampleCurrentSprite.width = sampleWidth;\n\t\tsampleCurrentSprite.height = sampleHeight;\n\t\tsampleCurrentSprite.interactive = true;\n\t\tsampleCurrentSprite.buttonMode = true;\n\t\tUtilPointerEvent.onClick( sampleCurrentSprite, (): void => {\n\t\t\tthis.setColorNew( current.color );\n\t\t\tthis.setAlphaNew( current.alpha );\n\t\t});\n\t\tthis.addChild( sampleCurrentSprite );\n\n\t\tconst sampleNewCheckerboardSprite = this._sampleNewCheckerboardSprite =\n\t\t\tnew Sprite( theme.getSampleCheckerboardTexture() );\n\t\tsampleNewCheckerboardSprite.x = sampleX + sampleWidth;\n\t\tsampleNewCheckerboardSprite.y = sampleY;\n\t\tsampleNewCheckerboardSprite.width = sampleWidth;\n\t\tsampleNewCheckerboardSprite.height = sampleHeight;\n\t\tsampleNewCheckerboardSprite.interactive = false;\n\t\tthis.addChild( sampleNewCheckerboardSprite );\n\n\t\tconst sampleNewSprite = this._sampleNewSprite = new Sprite( Texture.WHITE );\n\t\tsampleNewSprite.x = sampleX + sampleWidth;\n\t\tsampleNewSprite.y = sampleY;\n\t\tsampleNewSprite.tint = this._new.color;\n\t\tsampleNewSprite.alpha = this._new.alpha;\n\t\tsampleNewSprite.width = sampleWidth;\n\t\tsampleNewSprite.height = sampleHeight;\n\t\tsampleNewSprite.interactive = false;\n\t\tthis.addChild( sampleNewSprite );\n\n\t\t// Width\n\t\tif( options == null || options.width == null ) {\n\t\t\tthis.width = paddingLeft + mainWidth + paddingRight;\n\t\t}\n\n\t\t// Height\n\t\tif( options == null || options.height == null ) {\n\t\t\tthis.height = inputY + inputAndLabelColor.height + inputMargin + inputAndLabelAlpha.height + paddingBottom;\n\t\t}\n\t}\n\n\tprotected onMainDown( e: InteractionEvent ): void {\n\t\tthis.onMainPick( e.data.global );\n\n\t\tconst stage = DApplications.getInstance().stage;\n\t\tstage.on( UtilPointerEvent.move, this._onMainMoveBound );\n\t\tstage.on( UtilPointerEvent.up, this._onMainUpBound );\n\t}\n\n\tprotected onMainMove( e: InteractionEvent ): void {\n\t\tthis.onMainPick( e.data.global );\n\t}\n\n\tprotected onMainUp( e: InteractionEvent ): void {\n\t\tconst stage = DApplications.getInstance().stage;\n\t\tstage.off( UtilPointerEvent.move, this._onMainMoveBound );\n\t\tstage.off( UtilPointerEvent.up, this._onMainUpBound );\n\t}\n\n\tprotected toMainHex( b: number, w0: number, w1: number, shift: number ) {\n\t\treturn Math.max( 0, Math.min( 255, w0 * 255 + w1 * (( b >> shift ) & 0xff) ) ) << shift;\n\t}\n\n\tprotected toMainColor( base: number, tx: number, ty: number, width: number, height: number ): number {\n\t\tconst hw = width * 0.5;\n\t\tconst ux = Math.max( 0, Math.min( 1, ((tx - hw) * ( 1 - ty / height ) + hw) / width ) );\n\t\tconst uy = Math.max( 0, Math.min( 1, ty / height ) );\n\t\tconst w1 = Math.abs( 0.5 * uy  - ux );\n\t\tconst w0 = 1 - w1 - uy;\n\t\tconst r = this.toMainHex( base, w0, w1, 16 );\n\t\tconst g = this.toMainHex( base, w0, w1, 8 );\n\t\tconst b = this.toMainHex( base, w0, w1, 0 );\n\t\treturn r | g | b;\n\t}\n\n\tprotected onMainPick( global: Point ) {\n\t\tconst point = this._pointerPoint;\n\t\tconst padding = this._padding;\n\t\tconst paddingLeft = padding.getLeft();\n\t\tconst paddingTop = padding.getTop();\n\t\tconst theme = this.theme;\n\t\tconst mainWidth = theme.getMainWidth();\n\t\tconst mainHeight = theme.getMainHeight();\n\t\tthis.toLocal( global, undefined, point );\n\t\tconst x = Math.max( 0, Math.min( mainWidth, point.x - paddingLeft ) );\n\t\tconst y = Math.max( 0, Math.min( mainHeight, point.y - paddingTop ) );\n\t\tconst mainPointerSprite = this._mainPointerSprite;\n\t\tmainPointerSprite.position.set( paddingLeft + x, paddingTop + y );\n\t\tthis.onColorNew( this.toMainColor(\n\t\t\tthis._base, x, y, mainWidth, mainHeight ) );\n\t}\n\n\tprotected setColorCurrent( color: number ) {\n\t\tthis._sampleCurrentSprite.tint = this._current.color = color;\n\t}\n\n\tprotected setAlphaCurrent( alpha: number ) {\n\t\tthis._sampleCurrentSprite.alpha = this._current.alpha = alpha;\n\t}\n\n\tprotected setColorNew( color: number ) {\n\t\tconst theme = this.theme;\n\t\tconst mainWidth = theme.getMainWidth();\n\t\tconst mainHeight = theme.getMainHeight();\n\t\tconst padding = this._padding;\n\n\t\t// Base color\n\t\tconst hsv = UtilHsv.fromRgb( color );\n\t\tthis._mainSprite.tint = this._base = UtilHsv.toRgb( hsv[ 0 ], 255, 255 );\n\n\t\t// Move the base pointer\n\t\tconst basePointerSprite = this._basePointerSprite;\n\t\tbasePointerSprite.x = Math.max( 0, Math.min( 1, hsv[ 0 ] / 360 ) ) * mainWidth;\n\n\t\t// Move the main pointer\n\t\tconst ns = Math.max( 0, Math.min( 1, hsv[ 1 ] / 255 ) );\n\t\tconst nv = Math.max( 0, Math.min( 1, 1 - hsv[ 2 ] / 255 ) );\n\t\tconst mainPointerSprite = this._mainPointerSprite;\n\t\tmainPointerSprite.tint = (nv < 0.45 ? theme.getMainPointerColor() : 0xffffff);\n\t\tmainPointerSprite.position.set(\n\t\t\tpadding.getLeft() + ns * mainWidth,\n\t\t\tpadding.getTop() + nv * mainHeight\n\t\t);\n\n\t\t// New color\n\t\tthis.onColorNew( color );\n\t}\n\n\tprotected onColorNew( color: number ) {\n\t\tconst application = DApplications.getInstance();\n\t\tapplication.disallowUpdate();\n\t\tthis._sampleNewSprite.tint = this._new.color = color;\n\t\tthis._inputAndLabelColor.input.value = UtilRgb.toCode( color );\n\t\tthis.emit( \"newcolorchange\", color, this );\n\t\tapplication.allowUpdate();\n\t\tapplication.update();\n\t}\n\n\tprotected onBaseDown( e: InteractionEvent ): void {\n\t\tthis.onBasePick( e.data.global );\n\n\t\tconst stage = DApplications.getInstance().stage;\n\t\tstage.on( UtilPointerEvent.move, this._onBaseMoveBound );\n\t\tstage.on( UtilPointerEvent.up, this._onBaseUpBound );\n\t}\n\n\tprotected onBaseMove( e: InteractionEvent ): void {\n\t\tthis.onBasePick( e.data.global );\n\t}\n\n\tprotected onBaseUp( e: InteractionEvent ): void {\n\t\tconst stage = DApplications.getInstance().stage;\n\t\tstage.off( UtilPointerEvent.move, this._onBaseMoveBound );\n\t\tstage.off( UtilPointerEvent.up, this._onBaseUpBound );\n\t}\n\n\tprotected toBaseHex( t: number, shift: number ) {\n\t\treturn Math.max( 0, Math.min( 255, t * 6 * 255 ) ) << shift;\n\t}\n\n\tprotected toBaseColor( t: number ): number {\n\t\tif( t <= 0.167 ) {\n\t\t\treturn 0xff0000 + this.toBaseHex( t, 8 );\n\t\t} else if( t <= 0.333 ) {\n\t\t\tt = 0.333 - t;\n\t\t\treturn 0x00ff00 + this.toBaseHex( t, 16 );\n\t\t} else if( t <= 0.5 ) {\n\t\t\tt -= 0.333;\n\t\t\treturn 0x00ff00 + this.toBaseHex( t, 0 );\n\t\t} else if( t < 0.667 ) {\n\t\t\tt = 0.667 - t;\n\t\t\treturn 0x0000ff + this.toBaseHex( t, 8 );\n\t\t} else if( t < 0.883 ) {\n\t\t\tt -= 0.667;\n\t\t\treturn 0x0000ff + this.toBaseHex( t, 16 );\n\t\t} else {\n\t\t\tt = 0.883 - t;\n\t\t\treturn 0xff0000 + this.toBaseHex( t, 0 );\n\t\t}\n\t}\n\n\tprotected onBasePick( global: Point ) {\n\t\tconst point = this._pointerPoint;\n\t\tconst padding = this._padding;\n\t\tconst theme = this.theme;\n\t\tconst mainWidth = theme.getMainWidth();\n\t\tthis.toLocal( global, undefined, point );\n\t\tconst x = Math.max( 0, Math.min( mainWidth, point.x - padding.getLeft() ) );\n\t\tconst basePointerSprite = this._basePointerSprite;\n\t\tbasePointerSprite.x = x;\n\t\tthis.onColorBase( this.toBaseColor( x / mainWidth ) );\n\t}\n\n\tprotected setColorBase( h: number ) {\n\t\tconst theme = this.theme;\n\t\tconst mainWidth = theme.getMainWidth();\n\t\tconst basePointerSprite = this._basePointerSprite;\n\t\tbasePointerSprite.x = Math.max( 0, Math.min( 1, h / 360 ) ) * mainWidth;\n\t\tthis.onColorBase( UtilHsv.toRgb( h, 255, 255 ) );\n\t}\n\n\tprotected onColorBase( color: number ) {\n\t\tthis._mainSprite.tint = this._base = color;\n\n\t\tconst mainPointerSprite = this._mainPointerSprite;\n\t\tconst theme = this.theme;\n\t\tconst mainWidth = theme.getMainWidth();\n\t\tconst mainHeight = theme.getMainHeight();\n\t\tconst padding = this._padding;\n\t\tthis.onColorNew( this.toMainColor(\n\t\t\tthis._base,\n\t\t\tmainPointerSprite.x - padding.getLeft(),\n\t\t\tmainPointerSprite.y - padding.getTop(),\n\t\t\tmainWidth,\n\t\t\tmainHeight\n\t\t));\n\t}\n\n\tprotected onAlphaDown( e: InteractionEvent ): void {\n\t\tthis.onAlphaPick( e.data.global );\n\n\t\tconst stage = DApplications.getInstance().stage;\n\t\tstage.on( UtilPointerEvent.move, this._onAlphaMoveBound );\n\t\tstage.on( UtilPointerEvent.up, this._onAlphaUpBound );\n\t}\n\n\tprotected onAlphaMove( e: InteractionEvent ): void {\n\t\tthis.onAlphaPick( e.data.global );\n\t}\n\n\tprotected onAlphaUp( e: InteractionEvent ): void {\n\t\tconst stage = DApplications.getInstance().stage;\n\t\tstage.off( UtilPointerEvent.move, this._onAlphaMoveBound );\n\t\tstage.off( UtilPointerEvent.up, this._onAlphaUpBound );\n\t}\n\n\tprotected onAlphaPick( global: Point ) {\n\t\tconst point = this._pointerPoint;\n\t\tconst padding = this._padding;\n\t\tconst theme = this.theme;\n\t\tconst mainWidth = theme.getMainWidth();\n\t\tthis.toLocal( global, undefined, point );\n\t\tconst x = Math.max( 0, Math.min( mainWidth, point.x - padding.getLeft() ) );\n\t\tthis._alphaPointerSprite.x = x;\n\t\tthis.onAlphaNew( x / mainWidth );\n\t}\n\n\tprotected setAlphaNew( alpha: number ): void {\n\t\tconst theme = this.theme;\n\t\tconst mainWidth = theme.getMainWidth();\n\t\tthis._alphaPointerSprite.x = Math.max( 0, Math.min( 1, alpha ) ) * mainWidth;\n\t\tthis.onAlphaNew( alpha );\n\t}\n\n\tprotected onAlphaNew( alpha: number ): void {\n\t\tconst application = DApplications.getInstance();\n\t\tapplication.disallowUpdate();\n\t\tthis._sampleNewSprite.alpha = this._new.alpha = alpha;\n\t\tthis._inputAndLabelAlpha.input.value = Number( alpha.toFixed( 2 ) );\n\t\tthis.emit( \"newalphachange\", alpha, this );\n\t\tapplication.allowUpdate();\n\t\tapplication.update();\n\t}\n\n\tprotected onRecentChange(): void {\n\t\tconst sprites = this._recentColorSprites;\n\t\tconst recent = this._recent;\n\t\tfor( let i = 0, imax = sprites.length; i < imax; ++i ) {\n\t\t\tconst sprite = sprites[ i ];\n\t\t\tconst colorAndAlpha = recent.get( i );\n\t\t\tif( colorAndAlpha != null ) {\n\t\t\t\tsprite.tint = colorAndAlpha.color;\n\t\t\t\tsprite.alpha = colorAndAlpha.alpha;\n\t\t\t} else {\n\t\t\t\tsprite.tint = 0xffffff;\n\t\t\t\tsprite.alpha = 0;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DPickerColor\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer, Geometry, Mesh, Point, Rectangle, Shader, Texture, TextureUvs, utils } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DPickerColorGradientDataLike } from \"./d-picker-color-gradient-data\";\n\nconst VERTEX_SHADER = `\nattribute vec2 aPosition;\nattribute vec2 aUv;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\n\nvarying vec2 vUv;\nvarying vec4 vColor;\n\nvoid main(void) {\n\tvec3 position = vec3(aPosition.x, aPosition.y, 1.0);\n\tgl_Position = vec4((projectionMatrix * translationMatrix * position).xy, 0.0, 1.0);\n\tvUv = aUv;\n\tvColor = aColor;\n}\n`;\n\nconst FRAGMENT_SHADER = `\nvarying vec2 vUv;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void) {\n\tvec4 texture = texture2D(uSampler, vUv);\n\tfloat cy = step( 1.0, mod( gl_FragCoord.y / 10.0, 2.0 ) );\n\tfloat cx = step( 1.0, mod( gl_FragCoord.x / 10.0 + cy, 2.0 ) );\n\tfloat c = mix( 0.75, 0.65, cx );\n\tgl_FragColor = texture * vec4( mix( vec3( c ), vColor.xyz, vColor.a ), 1.0 );\n}`;\n\ntype Parts = Array<{ data: DPickerColorGradientDataLike | null, rect: Rectangle }>;\n\nexport class DPickerColorGradientDataView extends Mesh {\n\tprotected _nPointsPerData: number;\n\tprotected _vertices: Float32Array;\n\tprotected _uvs: Float32Array;\n\tprotected _colors: Float32Array;\n\tprotected _indices: Uint16Array;\n\tprotected _lastHitIndex: number;\n\n\tprotected _workColor: number[];\n\tprotected _workPoint: Point;\n\n\tprotected _parts: Parts;\n\n\tprotected constructor(\n\t\tnPointsPerData: number,\n\t\tvertices: Float32Array, uvs: Float32Array, colors: Float32Array, indices: Uint16Array,\n\t\tparts: Parts, geometry: Geometry, shader: Shader\n\t) {\n\t\tsuper( geometry, shader );\n\n\t\tthis.interactive = true;\n\t\tthis.interactiveChildren = false;\n\t\tthis.cursor = \"pointer\";\n\n\t\tthis._nPointsPerData = nPointsPerData;\n\t\tthis._vertices = vertices;\n\t\tthis._uvs = uvs;\n\t\tthis._colors = colors;\n\t\tthis._indices = indices;\n\t\tthis._lastHitIndex = -1;\n\t\tthis._workColor = [ 0, 0, 0 ];\n\t\tthis._workPoint = new Point();\n\t\tthis._parts = parts;\n\n\t\tshader.uniforms.uSampler.on( \"update\", (): void => {\n\t\t\tthis.update();\n\t\t\tDApplications.update();\n\t\t});\n\t\tthis.update();\n\t}\n\n\tgetRectangle( index: number ): Rectangle | null {\n\t\tconst parts = this._parts;\n\t\tif( 0 <= index && index < parts.length ) {\n\t\t\treturn parts[ index ].rect;\n\t\t}\n\t\treturn null;\n\t}\n\n\tsetRectangle( index: number, x: number, y: number, width: number, height: number ): void {\n\t\tconst parts = this._parts;\n\t\tif( 0 <= index && index < parts.length ) {\n\t\t\tconst rect = parts[ index ].rect;\n\t\t\trect.x = x;\n\t\t\trect.y = y;\n\t\t\trect.width = width;\n\t\t\trect.height = height;\n\t\t}\n\t}\n\n\tgetData( index: number ): DPickerColorGradientDataLike | null {\n\t\tconst parts = this._parts;\n\t\tif( 0 <= index && index < parts.length ) {\n\t\t\treturn parts[ index ].data;\n\t\t}\n\t\treturn null;\n\t}\n\n\tsetData( index: number, data: DPickerColorGradientDataLike | null ): void {\n\t\tconst parts = this._parts;\n\t\tif( 0 <= index && index < parts.length ) {\n\t\t\tparts[ index ].data = data;\n\t\t}\n\t}\n\n\tgetLastHitIndex(): number {\n\t\treturn this._lastHitIndex;\n\t}\n\n\tprivate setColors( ic: number, colors: Float32Array, rgb: number[], alpha: number ) {\n\t\tcolors[ ic + 0 ] = rgb[ 0 ];\n\t\tcolors[ ic + 1 ] = rgb[ 1 ];\n\t\tcolors[ ic + 2 ] = rgb[ 2 ];\n\t\tcolors[ ic + 3 ] = alpha;\n\t\tcolors[ ic + 4 ] = rgb[ 0 ];\n\t\tcolors[ ic + 5 ] = rgb[ 1 ];\n\t\tcolors[ ic + 6 ] = rgb[ 2 ];\n\t\tcolors[ ic + 7 ] = alpha;\n\t}\n\n\tprivate setColorsHex( ic: number, colors: Float32Array, color: number, alpha: number ) {\n\t\tconst rgb = utils.hex2rgb( color, this._workColor );\n\t\tthis.setColors( ic, colors, rgb, alpha );\n\t}\n\n\tprivate setColorsWhite( ic: number, colors: Float32Array ) {\n\t\tconst rgb = this._workColor;\n\t\trgb[ 0 ] = 1;\n\t\trgb[ 1 ] = 1;\n\t\trgb[ 2 ] = 1;\n\t\tthis.setColors( ic, colors, rgb, 0 );\n\t}\n\n\tprivate setColorsPoint( ic: number, data: DPickerColorGradientDataLike, index: number, colors: Float32Array ) {\n\t\tconst point = data.points[ index ];\n\t\tif( point != null ) {\n\t\t\tthis.setColorsHex( ic, colors, point.color, point.alpha );\n\t\t} else {\n\t\t\tthis.setColorsWhite( ic, colors );\n\t\t}\n\t}\n\n\tprotected setVertices( iv: number, vertices: Float32Array, position: number, rect: Rectangle ) {\n\t\tconst y = rect.y + rect.height * position;\n\t\tvertices[ iv + 0 ] = rect.x;\n\t\tvertices[ iv + 1 ] = y;\n\t\tvertices[ iv + 2 ] = rect.x + rect.width;\n\t\tvertices[ iv + 3 ] = y;\n\t}\n\n\tprotected setUvs( iv: number, uvs: Float32Array, position: number, textureUvs: TextureUvs ) {\n\t\tconst x0 = textureUvs.x0 + (textureUvs.x3 - textureUvs.x0) * position;\n\t\tconst y0 = textureUvs.y0 + (textureUvs.y3 - textureUvs.y0) * position;\n\t\tconst x1 = textureUvs.x1 + (textureUvs.x2 - textureUvs.x1) * position;\n\t\tconst y1 = textureUvs.y1 + (textureUvs.y2 - textureUvs.y1) * position;\n\t\tuvs[ iv + 0 ] = x0;\n\t\tuvs[ iv + 1 ] = y0;\n\t\tuvs[ iv + 2 ] = x1;\n\t\tuvs[ iv + 3 ] = y1;\n\t}\n\n\tprivate newIndices( ii: number, iv: number, size: number, indices: Uint16Array ): Uint16Array {\n\t\tfor( let i = 0; i < size; ++i ) {\n\t\t\tindices[ ii + 0 ] = iv + 0;\n\t\t\tindices[ ii + 1 ] = iv + 1;\n\t\t\tindices[ ii + 2 ] = iv + 2;\n\n\t\t\tindices[ ii + 3 ] = iv + 2;\n\t\t\tindices[ ii + 4 ] = iv + 1;\n\t\t\tindices[ ii + 5 ] = iv + 3;\n\n\t\t\tii += 6;\n\t\t\tiv += 2;\n\t\t}\n\t\treturn indices;\n\t}\n\n\tprotected _calculateBounds() {\n\t\tconst rect = this._parts[ 0 ].rect;\n\t\tconst bounds = this._bounds;\n\t\tconst work = this._workPoint;\n\t\twork.set( rect.x, rect.y );\n\t\tbounds.addPoint( work );\n\t\twork.set( rect.x + rect.width, rect.y + rect.height );\n\t\tbounds.addPoint( work );\n\t}\n\n\tupdate(): void {\n\t\tconst vertices = this._vertices;\n\t\tconst uvs = this._uvs;\n\t\tconst colors = this._colors;\n\t\tconst indices = this._indices;\n\n\t\tconst texture = this.shader.uniforms.uSampler;\n\t\tif( texture._uvs == null ) {\n\t\t\ttexture.updateUvs();\n\t\t}\n\t\tconst textureUvs: TextureUvs = texture._uvs;\n\n\t\tlet iv = 0;\n\t\tlet nv = 0;\n\t\tlet ic = 0;\n\t\tlet ii = 0;\n\n\t\tconst parts = this._parts;\n\t\tfor( let i = 0, imax = parts.length; i < imax; ++i ) {\n\t\t\tconst data = parts[ i ].data;\n\t\t\tconst rect = parts[ i ].rect;\n\t\t\tif( data == null ) {\n\t\t\t\tthis.setVertices( iv, vertices, 0, rect );\n\t\t\t\tthis.setUvs( iv, uvs, 0, textureUvs );\n\t\t\t\tthis.setColorsWhite( ic, colors );\n\t\t\t\tthis.setVertices( iv + 4, vertices, 1, rect );\n\t\t\t\tthis.setUvs( iv, uvs, 1, textureUvs );\n\t\t\t\tthis.setColorsWhite( ic + 8, colors );\n\t\t\t\tthis.newIndices( ii, nv, 1, indices );\n\t\t\t\tiv += 4 * 2;\n\t\t\t\tic += 4 * 4;\n\t\t\t\tnv += 4;\n\t\t\t\tii += 6;\n\t\t\t} else {\n\t\t\t\tthis.setVertices( iv, vertices, 0, rect );\n\t\t\t\tthis.setUvs( iv, uvs, 0, textureUvs );\n\t\t\t\tthis.setColorsPoint( ic, data, 0, colors );\n\t\t\t\tiv += 2 * 2;\n\t\t\t\tic += 2 * 4;\n\t\t\t\tconst pointSize = data.points.length;\n\t\t\t\tfor( let j = 0, jmax = Math.min( pointSize, this._nPointsPerData ); j < jmax; ++j ) {\n\t\t\t\t\tconst point = data.points[ j ];\n\t\t\t\t\tthis.setVertices( iv, vertices, point.position, rect );\n\t\t\t\t\tthis.setUvs( iv, uvs, point.position, textureUvs );\n\t\t\t\t\tthis.setColorsHex( ic, colors, point.color, point.alpha );\n\t\t\t\t\tiv += 2 * 2;\n\t\t\t\t\tic += 2 * 4;\n\t\t\t\t}\n\t\t\t\tthis.setVertices( iv, vertices, 1, rect );\n\t\t\t\tthis.setUvs( iv, uvs, 1, textureUvs );\n\t\t\t\tthis.setColorsPoint( ic, data, pointSize - 1, colors );\n\t\t\t\tiv += 2 * 2;\n\t\t\t\tic += 2 * 4;\n\n\t\t\t\tthis.newIndices( ii, nv, pointSize + 1, indices );\n\t\t\t\tii += (pointSize + 1) * 6;\n\t\t\t\tnv += (pointSize + 2) * 2;\n\t\t\t}\n\t\t}\n\n\t\tthis.size = ii;\n\n\t\tconst geometry = this.geometry;\n\t\tgeometry.getBuffer( \"aPosition\" ).update();\n\t\tgeometry.getBuffer( \"aUv\" ).update();\n\t\tgeometry.getBuffer( \"aColor\" ).update();\n\t\tgeometry.getIndex().update();\n\t}\n\n\tcontainsPoint( point: Point ): boolean {\n\t\tconst local = this.toLocal( point, undefined, this._workPoint );\n\t\tconst parts = this._parts;\n\t\tfor( let i = 0, imax = parts.length; i < imax; ++i ) {\n\t\t\tconst rect = parts[ i ].rect;\n\t\t\tif( rect.contains( local.x, local.y ) ) {\n\t\t\t\tthis._lastHitIndex = i;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tstatic from( size: number, nPointsPerData: number, texture: Texture = Texture.WHITE ) {\n\t\tconst vertices = new Float32Array( size * ( nPointsPerData + 2 ) * 2 * 2 );\n\t\tconst uvs = new Float32Array( size * ( nPointsPerData + 2 ) * 2 * 2 );\n\t\tconst colors = new Float32Array( size * ( nPointsPerData + 2 ) * 2 * 4 );\n\t\tconst indices = new Uint16Array( size * ( nPointsPerData + 1 ) * 6 );\n\n\t\tconst parts: Parts = [];\n\t\tfor( let i = 0; i < size; ++i ) {\n\t\t\tparts.push({\n\t\t\t\tdata: null,\n\t\t\t\trect: new Rectangle()\n\t\t\t});\n\t\t}\n\n\t\tconst geometry = new Geometry()\n\t\t\t.addIndex( new Buffer( indices, false, true ) )\n\t\t\t.addAttribute( \"aPosition\", new Buffer( vertices, false, false ), 2 )\n\t\t\t.addAttribute( \"aUv\", new Buffer( uvs, false, false ), 2 )\n\t\t\t.addAttribute( \"aColor\", new Buffer( colors, false, false ), 4 );\n\t\tconst shader = Shader.from( VERTEX_SHADER, FRAGMENT_SHADER, { uSampler: texture } );\n\n\t\treturn new DPickerColorGradientDataView(\n\t\t\tnPointsPerData,\n\t\t\tvertices, uvs, colors, indices,\n\t\t\tparts, geometry, shader\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\nimport { DPickerColorGradientDataLike } from \"./d-picker-color-gradient-data\";\n\nconst isEqual = ( a: DPickerColorGradientDataLike, b: DPickerColorGradientDataLike ) => {\n\tif( a.direction !== b.direction ) {\n\t\treturn false;\n\t}\n\n\tconst ap = a.points;\n\tconst bp = b.points;\n\tif( ap.length !== bp.length ) {\n\t\treturn false;\n\t}\n\n\tfor( let j = 0, jmax = ap.length; j < jmax; ++j ) {\n\t\tconst apj = ap[ j ];\n\t\tconst bpj = bp[ j ];\n\t\tif( apj.color !== bpj.color || apj.alpha !== bpj.alpha || apj.position !== bpj.position ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n};\n\nexport class DPickerColorGradientRecent extends utils.EventEmitter {\n\tprotected _recents: DPickerColorGradientDataLike[];\n\tprotected _capacity: number;\n\n\tconstructor( recents: DPickerColorGradientDataLike[], capacity: number ) {\n\t\tsuper();\n\n\t\tthis._recents = recents;\n\t\tthis._capacity = capacity;\n\t}\n\n\tgetCapacity(): number {\n\t\treturn this._capacity;\n\t}\n\n\tget( index: number ): DPickerColorGradientDataLike | null {\n\t\tconst recents = this._recents;\n\t\tif( 0 <= index && index < recents.length ) {\n\t\t\treturn recents[ recents.length - 1 - index ];\n\t\t}\n\t\treturn null;\n\t}\n\n\tset( index: number, points: DPickerColorGradientDataLike ): DPickerColorGradientDataLike | null {\n\t\tconst recents = this._recents;\n\t\tif( 0 <= index && index < recents.length ) {\n\t\t\tconst result = recents[ recents.length - 1 - index ];\n\t\t\trecents[ recents.length - 1 - index ] = points;\n\t\t\tthis.emit( \"change\", this );\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tcontains( points: DPickerColorGradientDataLike ): boolean {\n\t\tconst recents = this._recents;\n\t\tfor( let i = 0, imax = recents.length; i < imax; ++i ) {\n\t\t\tif( isEqual( recents[ i ], points ) ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tadd( points: DPickerColorGradientDataLike ): this {\n\t\tconst recents = this._recents;\n\t\trecents.push( points );\n\t\tif( this._capacity < recents.length ) {\n\t\t\trecents.shift();\n\t\t}\n\t\tthis.emit( \"change\", this );\n\t\treturn this;\n\t}\n\n\tpop(): DPickerColorGradientDataLike | null {\n\t\tconst recents = this._recents;\n\t\tconst result = recents.shift();\n\t\tif( result != null ) {\n\t\t\tthis.emit( \"change\", this );\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tsize(): number {\n\t\treturn this._recents.length;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction, Point, Sprite, Texture } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DAlignWith } from \"./d-align-with\";\nimport { DApplications } from \"./d-applications\";\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DInputReal } from \"./d-input-real\";\nimport { DPickerColor } from \"./d-picker-color\";\nimport { DPickerColorGradientData, DPickerColorGradientDataLike } from \"./d-picker-color-gradient-data\";\nimport { DPickerColorGradientDataView } from \"./d-picker-color-gradient-data-view\";\nimport { DPickerColorGradientPoint } from \"./d-picker-color-gradient-point\";\nimport { DPickerColorGradientRecent } from \"./d-picker-color-gradient-recent\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport interface DPickerColorGradientOptions<\n\tTHEME extends DThemePickerColorGradient = DThemePickerColorGradient\n> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemePickerColorGradient extends DThemeBase {\n\tgetGradientPointsWidth(): number;\n\tgetGradientPointsMargin(): number;\n\n\tgetGradientAnchorTexture(): Texture;\n\tgetGradientAnchorOutlinedTexture(): Texture;\n\tgetGradientAnchorOutlineTexture(): Texture;\n\n\tgetGradientDirectionMargin(): number;\n\tgetGradientDirectionTexture(): Texture;\n\n\tgetGradientRecentColumn(): number;\n\tgetGradientRecentWidth(): number;\n\tgetGradientRecentMargin(): number;\n\tgetGradientRecentCount(): number;\n\tgetGradientRecents(): DPickerColorGradientDataLike[];\n}\n\nexport class DPickerColorGradient<\n\tTHEME extends DThemePickerColorGradient = DThemePickerColorGradient,\n\tOPTIONS extends DPickerColorGradientOptions<THEME> = DPickerColorGradientOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tprotected static RECENT_COLOR_GRADIENT: DPickerColorGradientRecent | null = null;\n\n\tprotected _picker!: DPickerColor;\n\tprotected _view!: DPickerColorGradientDataView;\n\tprotected _anchors!: Sprite[];\n\tprotected _recent!: DPickerColorGradientRecent;\n\n\tprotected _onAnchorDownBound!: ( e: InteractionEvent ) => void;\n\tprotected _onAnchorMoveBound!: ( e: InteractionEvent ) => void;\n\tprotected _onAnchorUpBound!: ( e: InteractionEvent ) => void;\n\n\tprotected _data!: DPickerColorGradientData;\n\tprotected _work!: Point;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\n\t\tconst theme = this.theme;\n\t\tconst padding = this._padding;\n\t\tconst paddingTop = padding.getTop();\n\t\tconst paddingRight = padding.getRight();\n\t\tconst paddingBottom = padding.getBottom();\n\t\tconst paddingLeft = padding.getLeft();\n\t\tthis._work = new Point();\n\n\t\t// Picker\n\t\tconst gradientPointsWidth = theme.getGradientPointsWidth();\n\t\tconst gradientPointsMargin = theme.getGradientPointsMargin();\n\t\tconst picker = this._picker = new DPickerColor({\n\t\t\tx: paddingLeft + gradientPointsWidth + gradientPointsMargin,\n\t\t\ty: paddingTop\n\t\t});\n\t\tpicker.on( \"newcolorchange\", ( color: number ): void => {\n\t\t\tthis.onAnchorColorChange( color );\n\t\t});\n\t\tpicker.on( \"newalphachange\", ( alpha: number ): void => {\n\t\t\tthis.onAnchorAlphaChange( alpha );\n\t\t});\n\t\tthis.addChild( picker );\n\n\t\t// Points view\n\t\tconst view = this._view = DPickerColorGradientDataView.from( 17, 10 );\n\t\tview.setRectangle( 0, paddingLeft, paddingTop, gradientPointsWidth, picker.height );\n\t\tthis.addChild( view );\n\t\tview.on( UtilPointerEvent.down, ( e: InteractionEvent ): void => {\n\t\t\tif( view.getLastHitIndex() === 0 ) {\n\t\t\t\tthis.onViewDown( e );\n\t\t\t}\n\t\t});\n\n\t\t// Anchor\n\t\tthis._onAnchorDownBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onAnchorDown( e );\n\t\t};\n\t\tthis._onAnchorMoveBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onAnchorMove( e );\n\t\t};\n\t\tthis._onAnchorUpBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onAnchorUp( e );\n\t\t};\n\t\tthis._anchors = [];\n\n\t\t//\n\t\tconst inputLabelWidth = picker.theme.getInputLabelWidth();\n\t\tconst inputWidth = picker.theme.getMainWidth() * 0.5;\n\t\tconst inputMargin = 5;\n\t\tconst inputDirectionMargin = theme.getGradientDirectionMargin();\n\t\tconst inputDirectionTexture = theme.getGradientDirectionTexture();\n\t\tconst inputLeft = picker.x + picker.width + inputDirectionMargin;\n\t\tconst inputDirection = new DInputReal({\n\t\t\tparent: this,\n\t\t\tx: inputLeft + inputLabelWidth + inputMargin,\n\t\t\ty: paddingTop,\n\t\t\twidth: inputWidth - inputLabelWidth - inputMargin,\n\t\t\tstep: 1,\n\t\t\timage: {\n\t\t\t\tsource: inputDirectionTexture,\n\t\t\t\talign: {\n\t\t\t\t\twith: DAlignWith.BORDER\n\t\t\t\t},\n\t\t\t\tmargin: {\n\t\t\t\t\thorizontal: -inputDirectionTexture.width - inputMargin\n\t\t\t\t}\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tchange: ( value: number ) => {\n\t\t\t\t\t(this._data as any)._direction = value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Recent gradients\n\t\tconst recentColumn = theme.getGradientRecentColumn();\n\t\tconst recentWidth = theme.getGradientRecentWidth();\n\t\tconst recentMargin = theme.getGradientRecentMargin();\n\t\tconst recentWidthAndMargin = recentWidth + recentMargin;\n\t\tconst x0 = inputLeft;\n\t\tconst y0 = inputDirection.y + inputDirection.height + inputDirectionMargin;\n\t\tif( DPickerColorGradient.RECENT_COLOR_GRADIENT == null ) {\n\t\t\tDPickerColorGradient.RECENT_COLOR_GRADIENT = new DPickerColorGradientRecent(\n\t\t\t\ttheme.getGradientRecents(),\n\t\t\t\ttheme.getGradientRecentCount()\n\t\t\t);\n\t\t}\n\t\tthis._recent = DPickerColorGradient.RECENT_COLOR_GRADIENT;\n\t\tconst recent = this._recent;\n\t\tfor( let i = 0, imax = recent.getCapacity(); i < imax; ++i ) {\n\t\t\tconst ix = i % recentColumn;\n\t\t\tconst x = x0 + ix * recentWidthAndMargin;\n\t\t\tconst iy = (i / recentColumn) | 0;\n\t\t\tconst y = y0 + iy * recentWidthAndMargin;\n\t\t\tview.setRectangle( 1 + i, x, y, recentWidth, recentWidth );\n\t\t}\n\t\trecent.on( \"change\", (): void => {\n\t\t\tthis.onRecentUpdate();\n\t\t});\n\t\tUtilPointerEvent.onClick( view, ( e: InteractionEvent ): void => {\n\t\t\tconst lastHitIndex = view.getLastHitIndex();\n\t\t\tif( 1 <= lastHitIndex ) {\n\t\t\t\tthis.onRecentClick( view.getData( lastHitIndex ) );\n\t\t\t}\n\t\t});\n\n\t\t// Points\n\t\tconst data = this._data = new DPickerColorGradientData();\n\t\tdata.on( \"change\", (): void => {\n\t\t\tthis.updateAnchors();\n\t\t\tview.update();\n\t\t});\n\t\tdata.on( \"selectionchange\", ( point: DPickerColorGradientPoint ): void => {\n\t\t\tthis.onAnchorSelect( point );\n\t\t});\n\t\tdata.on( \"directionchange\", ( value: number ): void => {\n\t\t\tinputDirection.value = value;\n\t\t});\n\t\tview.setData( 0, data );\n\t\tview.update();\n\t\tinputDirection.value = data.direction;\n\t\tthis.updateAnchors();\n\t\tconst selected = data.selected;\n\t\tif( selected != null ) {\n\t\t\tthis.onAnchorSelect( selected );\n\t\t}\n\n\t\t// Width\n\t\tif( options == null || options.width == null ) {\n\t\t\tthis.width = paddingLeft + gradientPointsWidth + gradientPointsMargin +\n\t\t\t\tpicker.width + inputDirectionMargin + (recentColumn - 1) * recentMargin +\n\t\t\t\trecentColumn * recentWidth + paddingRight;\n\t\t}\n\n\t\t// Height\n\t\tif( options == null || options.height == null ) {\n\t\t\tthis.height = paddingTop + picker.height + paddingBottom;\n\t\t}\n\t}\n\n\tget data(): DPickerColorGradientData {\n\t\treturn this._data;\n\t}\n\n\tget recent() {\n\t\treturn this._recent;\n\t}\n\n\tprotected onRecentClick( recentData: DPickerColorGradientDataLike | null ) {\n\t\tconst data = this._data;\n\t\tif( recentData != null ) {\n\t\t\tdata.fromObject( recentData );\n\t\t} else {\n\t\t\tdata.reset();\n\t\t}\n\t}\n\n\tprotected onRecentUpdate() {\n\t\tconst recent = this._recent;\n\t\tconst view = this._view;\n\t\tfor( let i = 0, imax = recent.size(); i < imax; ++i ) {\n\t\t\tview.setData( 1 + i, recent.get( i ) );\n\t\t}\n\t\tview.update();\n\t\tDApplications.update();\n\t}\n\n\tprotected toAnchorPosition( e: InteractionEvent ) {\n\t\tconst local = this.toLocal( e.data.global, undefined, this._work );\n\t\treturn Math.max( 0, Math.min( 1, (local.y - this.padding.getTop()) / this._picker.height ) );\n\t}\n\n\tprotected onViewDown( e: InteractionEvent ) {\n\t\tthis._data.addAt( this.toAnchorPosition( e ) );\n\t\tthis.onAnchorDragStart();\n\t}\n\n\tprotected onAnchorDown( e: InteractionEvent ) {\n\t\tconst target = e.target;\n\t\tif( target instanceof Sprite ) {\n\t\t\tconst data = this._data;\n\t\t\tconst index = this._anchors.indexOf( target );\n\t\t\tif( 0 <= index && index < data.points.length ) {\n\t\t\t\tdata.points[ index ].selected = true;\n\t\t\t\tthis.onAnchorDragStart();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onAnchorSelect( point: DPickerColorGradientPoint ) {\n\t\tconst picker = this._picker;\n\t\tpicker.current.color = point.color;\n\t\tpicker.current.alpha = point.alpha;\n\t\tpicker.new.color = point.color;\n\t\tpicker.new.alpha = point.alpha;\n\t}\n\n\tprotected onAnchorColorChange( color: number ) {\n\t\tconst points = this._data;\n\t\tif( points != null ) {\n\t\t\tconst selected = points.selected;\n\t\t\tif( selected != null ) {\n\t\t\t\tselected.color = color;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onAnchorAlphaChange( alpha: number ) {\n\t\tconst points = this._data;\n\t\tif( points != null ) {\n\t\t\tconst selected = points.selected;\n\t\t\tif( selected != null ) {\n\t\t\t\tselected.alpha = alpha;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onAnchorDragStart() {\n\t\tconst stage = DApplications.getInstance().stage;\n\t\tstage.on( UtilPointerEvent.move, this._onAnchorMoveBound );\n\t\tstage.on( UtilPointerEvent.up, this._onAnchorUpBound );\n\t}\n\n\tprotected onAnchorMove( e: InteractionEvent ): void {\n\t\tconst points = this._data;\n\t\tif( points != null ) {\n\t\t\tconst selected = points.selected;\n\t\t\tif( selected != null ) {\n\t\t\t\tselected.position = this.toAnchorPosition( e );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onAnchorUp( e: InteractionEvent ): void {\n\t\tconst stage = DApplications.getInstance().stage;\n\t\tstage.off( UtilPointerEvent.move, this._onAnchorMoveBound );\n\t\tstage.off( UtilPointerEvent.up, this._onAnchorUpBound );\n\t}\n\n\tprotected updateAnchors() {\n\t\tconst theme = this.theme;\n\t\tconst anchorTexture = theme.getGradientAnchorTexture();\n\t\tconst anchorOutlinedTexture = theme.getGradientAnchorOutlinedTexture();\n\t\tconst gradientPointsWidth = theme.getGradientPointsWidth();\n\n\t\tconst data = this._data;\n\t\tconst pointSize = data.points.length;\n\n\t\tconst anchors = this._anchors;\n\t\tconst anchorSize = anchors.length;\n\t\tfor( let i = anchorSize; i < pointSize; ++i ) {\n\t\t\tconst newAnchor = new Sprite( anchorTexture );\n\t\t\tnewAnchor.anchor.set( 0.5, 0.5 );\n\t\t\tnewAnchor.cursor = \"pointer\";\n\t\t\tnewAnchor.interactive = true;\n\t\t\tnewAnchor.on( UtilPointerEvent.down, this._onAnchorDownBound );\n\t\t\tanchors.push( newAnchor );\n\t\t\tthis.addChild( newAnchor );\n\t\t}\n\n\t\tfor( let i = anchorSize - 1; pointSize <= i; --i ) {\n\t\t\tconst oldAnchor = anchors[ i ];\n\t\t\toldAnchor.off( UtilPointerEvent.down, this._onAnchorDownBound );\n\t\t\toldAnchor.destroy();\n\t\t}\n\t\tanchors.length = pointSize;\n\n\t\tconst y = this.padding.getTop();\n\t\tconst right = this.padding.getLeft() + gradientPointsWidth;\n\t\tconst height = this._picker.height;\n\t\tfor( let i = 0; i < pointSize; ++i ) {\n\t\t\tconst point = data.points[ i ];\n\t\t\tconst anchor = anchors[ i ];\n\t\t\tanchor.tint = point.color;\n\t\t\tanchor.position.set(\n\t\t\t\tright,\n\t\t\t\ty + height * point.position\n\t\t\t);\n\t\t\tanchor.texture = (point.selected ? anchorOutlinedTexture : anchorTexture);\n\t\t}\n\n\t\tDApplications.update();\n\t}\n\n\tonKeyDown( e: KeyboardEvent ): boolean {\n\t\tif( UtilKeyboardEvent.isDeleteKey( e ) ) {\n\t\t\tconst points = this._data;\n\t\t\tif( points != null ) {\n\t\t\t\tconst selected = points.selected;\n\t\t\t\tif( selected != null ) {\n\t\t\t\t\tpoints.remove( selected );\n\t\t\t\t\tsuper.onKeyDown( e );\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn super.onKeyDown( e );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DPickerColorGradient\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogCommand, DDialogCommandOptions, DThemeDialogCommand } from \"./d-dialog-command\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\nimport { DPickerColorGradient, DPickerColorGradientOptions } from \"./d-picker-color-gradient\";\nimport { DPickerColorGradientData } from \"./d-picker-color-gradient-data\";\nimport { DPickerColorGradientRecent } from \"./d-picker-color-gradient-recent\";\n\nexport interface DDialogColorGradientOptions<\n\tTHEME extends DThemeDialogColorGradient = DThemeDialogColorGradient\n> extends DDialogCommandOptions<THEME> {\n\tpicker?: DPickerColorGradientOptions;\n}\n\nexport interface DThemeDialogColorGradient extends DThemeDialogCommand {\n\n}\n\nexport class DDialogColorGradient<\n\tTHEME extends DThemeDialogColorGradient = DThemeDialogColorGradient,\n\tOPTIONS extends DDialogColorGradientOptions<THEME> = DDialogColorGradientOptions<THEME>\n> extends DDialogCommand<THEME, OPTIONS> {\n\tprotected _picker!: DPickerColorGradient;\n\n\tprotected onInit( layout: DLayoutVertical, options?: OPTIONS ) {\n\t\tsuper.onInit( layout, options );\n\n\t\tconst picker = new DPickerColorGradient( options && options.picker );\n\t\tthis._picker = picker;\n\t\tlayout.addChild( picker );\n\n\t\tthis.on( \"ok\", (): void => {\n\t\t\tconst data = picker.data;\n\t\t\tconst recent = picker.recent;\n\t\t\tif( ! recent.contains( data ) ) {\n\t\t\t\trecent.add( data.toObject() );\n\t\t\t}\n\t\t});\n\t}\n\n\tget data(): DPickerColorGradientData {\n\t\treturn this._picker.data;\n\t}\n\n\tget recent(): DPickerColorGradientRecent {\n\t\treturn this._picker.recent;\n\t}\n\n\tget picker(): DPickerColorGradient {\n\t\treturn this._picker;\n\t}\n\n\tonKeyDown( e: KeyboardEvent ): boolean {\n\t\tthis._picker.onKeyDown( e );\n\t\treturn super.onKeyDown( e );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogColorGradient\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DDialogColorGradient, DDialogColorGradientOptions } from \"./d-dialog-color-gradient\";\nimport { DPickerColorGradientData } from \"./d-picker-color-gradient-data\";\nimport { DPickerColorGradientDataView } from \"./d-picker-color-gradient-data-view\";\n\nexport interface DButtonColorGradientOptions<\n\tTHEME extends DThemeButtonColorGradient = DThemeButtonColorGradient\n> extends DButtonOptions<DPickerColorGradientData, THEME> {\n\tdialog?: DDialogColorGradientOptions;\n}\n\nexport interface DThemeButtonColorGradient extends DThemeButton {\n\tgetViewBaseTexture(): Texture | null;\n\tgetTextFormatter(): ( value: DPickerColorGradientData, caller: DButtonColorGradient ) => string;\n\tgetTextValue( state: DBaseState ): DPickerColorGradientData;\n\tnewTextValue(): DPickerColorGradientData;\n}\n\nexport class DButtonColorGradient<\n\tTHEME extends DThemeButtonColorGradient = DThemeButtonColorGradient,\n\tOPTIONS extends DButtonColorGradientOptions<THEME> = DButtonColorGradientOptions<THEME>\n> extends DButton<DPickerColorGradientData, THEME, OPTIONS> {\n\tprotected static DIALOG?: DDialogColorGradient;\n\tprotected _dialog?: DDialogColorGradient;\n\tprotected _dialogOptions?: DDialogColorGradientOptions;\n\tprotected _view?: DPickerColorGradientDataView;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tconst data = this._textValueComputed;\n\t\tthis._dialogOptions = options && options.dialog;\n\n\t\tif( options == null || options.image == null || options.image.source === undefined ) {\n\t\t\tconst texture = this.theme.getViewBaseTexture();\n\t\t\tif( texture instanceof Texture ) {\n\t\t\t\tconst view = this._view = DPickerColorGradientDataView.from( 1, 10, texture );\n\t\t\t\tview.setRectangle( 0, 0, 0, texture.width, texture.height );\n\t\t\t\tview.setData( 0, data );\n\t\t\t\tview.update();\n\t\t\t\tthis.image = view;\n\t\t\t}\n\t\t}\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tconst dialog = this.dialog;\n\t\t\tdialog.data.fromObject( data );\n\t\t\tdialog.open().then((): void => {\n\t\t\t\tdata.fromObject( dialog.data );\n\t\t\t\tconst view = this._view;\n\t\t\t\tif( view != null ) {\n\t\t\t\t\tview.update();\n\t\t\t\t}\n\t\t\t\tthis.onTextChange();\n\t\t\t\tthis.createOrUpdateText();\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t});\n\t\t});\n\t}\n\n\tget dialog(): DDialogColorGradient {\n\t\tlet dialog = this._dialog;\n\t\tif( dialog == null ) {\n\t\t\tconst dialogOptions = this._dialogOptions;\n\t\t\tif( dialogOptions != null ) {\n\t\t\t\tdialog = new DDialogColorGradient( this._dialogOptions );\n\t\t\t} else {\n\t\t\t\tif( DButtonColorGradient.DIALOG == null ) {\n\t\t\t\t\tDButtonColorGradient.DIALOG = new DDialogColorGradient();\n\t\t\t\t}\n\t\t\t\tdialog = DButtonColorGradient.DIALOG;\n\t\t\t}\n\t\t\tthis._dialog = dialog;\n\t\t}\n\t\treturn dialog;\n\t}\n\n\tget value(): DPickerColorGradientData {\n\t\treturn this._textValueComputed;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DButtonColorGradient\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DColorAndAlpha } from \"./d-color\";\nimport { DDialogCommand, DDialogCommandOptions, DThemeDialogCommand } from \"./d-dialog-command\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\nimport { DPickerColor, DPickerColorOptions } from \"./d-picker-color\";\nimport { DPickerColorRecent } from \"./d-picker-color-recent\";\n\nexport interface DDialogColorOptions<\n\tTHEME extends DThemeDialogColor = DThemeDialogColor\n> extends DDialogCommandOptions<THEME> {\n\tpicker?: DPickerColorOptions;\n}\n\nexport interface DThemeDialogColor extends DThemeDialogCommand {\n\n}\n\nexport class DDialogColor<\n\tTHEME extends DThemeDialogColor = DThemeDialogColor,\n\tOPTIONS extends DDialogColorOptions<THEME> = DDialogColorOptions<THEME>\n> extends DDialogCommand<THEME, OPTIONS> {\n\tprotected _picker!: DPickerColor;\n\n\tprotected onInit( layout: DLayoutVertical, options?: OPTIONS ) {\n\t\tsuper.onInit( layout, options );\n\n\t\tconst picker = new DPickerColor( options && options.picker );\n\t\tthis._picker = picker;\n\t\tlayout.addChild( picker );\n\n\t\tthis.on( \"ok\", (): void => {\n\t\t\tconst recent = picker.recent;\n\t\t\tif( ! recent.contains( picker.new ) ) {\n\t\t\t\trecent.add( picker.new );\n\t\t\t}\n\t\t});\n\t}\n\n\tget current(): DColorAndAlpha {\n\t\treturn this._picker.current;\n\t}\n\n\tget new(): DColorAndAlpha {\n\t\treturn this._picker.new;\n\t}\n\n\tget recent(): DPickerColorRecent {\n\t\treturn this._picker.recent;\n\t}\n\n\tget picker(): DPickerColor {\n\t\treturn this._picker;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogColor\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DColorAndAlpha } from \"./d-color\";\nimport { DDialogColor, DDialogColorOptions } from \"./d-dialog-color\";\nimport { DPickerColorAndAlpha } from \"./d-picker-color-and-alpha\";\n\nexport interface DButtonColorOptions<\n\tTHEME extends DThemeButtonColor = DThemeButtonColor\n> extends DButtonOptions<DColorAndAlpha, THEME> {\n\tdialog?: DDialogColorOptions;\n}\n\nexport interface DThemeButtonColor extends DThemeButton {\n\tgetTextFormatter(): ( value: DColorAndAlpha, caller: DButtonColor ) => string;\n\tgetTextValue( state: DBaseState ): DColorAndAlpha;\n\tnewTextValue(): DColorAndAlpha;\n}\n\nexport class DButtonColor<\n\tTHEME extends DThemeButtonColor = DThemeButtonColor,\n\tOPTIONS extends DButtonColorOptions<THEME> = DButtonColorOptions<THEME>\n> extends DButton<DColorAndAlpha, THEME, OPTIONS> {\n\tprotected static DIALOG?: DDialogColor;\n\tprotected _dialog?: DDialogColor;\n\tprotected _dialogOptions!: DDialogColorOptions | undefined;\n\tprotected _value!: DPickerColorAndAlpha;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tconst colorAndAlpha = this._textValueComputed;\n\t\tthis._dialogOptions = options && options.dialog;\n\t\tthis._value = new DPickerColorAndAlpha( colorAndAlpha, ( color: number ): void => {\n\t\t\tcolorAndAlpha.color = color;\n\t\t\tthis.onColorChange();\n\t\t}, ( alpha: number ): void => {\n\t\t\tcolorAndAlpha.alpha = alpha;\n\t\t\tthis.updateTextForcibly();\n\t\t});\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tconst dialog = this.dialog;\n\t\t\tdialog.current.color = colorAndAlpha.color;\n\t\t\tdialog.current.alpha = colorAndAlpha.alpha;\n\t\t\tdialog.new.color = colorAndAlpha.color;\n\t\t\tdialog.new.alpha = colorAndAlpha.alpha;\n\t\t\tdialog.open().then((): void => {\n\t\t\t\tconst dialogNew = dialog.new;\n\t\t\t\tconst dialogCurrent = dialog.current;\n\t\t\t\tthis.emit( \"select\", dialogNew, dialogCurrent, this );\n\t\t\t\tcolorAndAlpha.color = dialogNew.color;\n\t\t\t\tcolorAndAlpha.alpha = dialogNew.alpha;\n\t\t\t\tthis.onColorChange();\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t});\n\t\t});\n\t}\n\n\tprotected getImageTintColor( theme: THEME, state: DBaseState ): number | null {\n\t\treturn this._textValueComputed.color;\n\t}\n\n\tprotected onColorChange(): void {\n\t\tconst image = this._image;\n\t\tif( this.isTintAware( image ) ) {\n\t\t\timage.tint = this._textValueComputed.color;\n\t\t}\n\t\tthis.updateTextForcibly();\n\t}\n\n\tprotected updateTextForcibly(): void {\n\t\tthis.onTextChange();\n\t\tthis.createOrUpdateText();\n\t}\n\n\tget dialog(): DDialogColor {\n\t\tlet dialog = this._dialog;\n\t\tif( dialog == null ) {\n\t\t\tconst dialogOptions = this._dialogOptions;\n\t\t\tif( dialogOptions != null ) {\n\t\t\t\tdialog = new DDialogColor( this._dialogOptions );\n\t\t\t} else {\n\t\t\t\tif( DButtonColor.DIALOG == null ) {\n\t\t\t\t\tDButtonColor.DIALOG = new DDialogColor();\n\t\t\t\t}\n\t\t\t\tdialog = DButtonColor.DIALOG;\n\t\t\t}\n\t\t\tthis._dialog = dialog;\n\t\t}\n\t\treturn dialog;\n\t}\n\n\tget value(): DColorAndAlpha {\n\t\treturn this._value;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DButtonColor\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton } from \"./d-button\";\n\nexport class DButtonDanger extends DButton {\n\tprotected getType(): string {\n\t\treturn \"DButtonDanger\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonAmbient, DButtonAmbientOptions, DThemeButtonAmbient } from \"./d-button-ambient\";\n\nexport interface DPickerDatetimeButtonBackOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeButtonBack = DThemePickerDatetimeButtonBack\n> extends DButtonAmbientOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemePickerDatetimeButtonBack extends DThemeButtonAmbient {\n\n}\n\nexport class DPickerDatetimeButtonBack<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeButtonBack = DThemePickerDatetimeButtonBack,\n\tOPTIONS extends DPickerDatetimeButtonBackOptions<VALUE, THEME> = DPickerDatetimeButtonBackOptions<VALUE, THEME>\n> extends DButtonAmbient<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DPickerDatetimeButtonBack\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonAmbient, DButtonAmbientOptions, DThemeButtonAmbient } from \"./d-button-ambient\";\n\nexport interface DPickerDatetimeButtonDateOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeButtonDate = DThemePickerDatetimeButtonDate\n> extends DButtonAmbientOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemePickerDatetimeButtonDate extends DThemeButtonAmbient {\n\n}\n\nexport class DPickerDatetimeButtonDate<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeButtonDate = DThemePickerDatetimeButtonDate,\n\tOPTIONS extends DPickerDatetimeButtonDateOptions<VALUE, THEME> = DPickerDatetimeButtonDateOptions<VALUE, THEME>\n> extends DButtonAmbient<VALUE, THEME, OPTIONS> {\n\tprotected onToggleStart(): void {\n\t\tif( ! this.isActive() ) {\n\t\t\tthis.setActive( true );\n\t\t}\n\t}\n\n\tprotected onToggleEnd(): void {\n\t\tthis.emit( this.isActive() ? \"active\" : \"inactive\", this );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DPickerDatetimeButtonDate\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonAmbient, DButtonAmbientOptions, DThemeButtonAmbient } from \"./d-button-ambient\";\n\nexport interface DPickerDatetimeButtonNextOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeButtonNext = DThemePickerDatetimeButtonNext\n> extends DButtonAmbientOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemePickerDatetimeButtonNext extends DThemeButtonAmbient {\n\n}\n\nexport class DPickerDatetimeButtonNext<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeButtonNext = DThemePickerDatetimeButtonNext,\n\tOPTIONS extends DPickerDatetimeButtonNextOptions<VALUE, THEME> = DPickerDatetimeButtonNextOptions<VALUE, THEME>\n> extends DButtonAmbient<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DPickerDatetimeButtonNext\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DText, DTextOptions, DThemeText } from \"./d-text\";\n\nexport interface DPickerDatetimeLabelOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeLabel = DThemePickerDatetimeLabel\n> extends DTextOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemePickerDatetimeLabel extends DThemeText {\n\n}\n\nexport class DPickerDatetimeLabel<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeLabel = DThemePickerDatetimeLabel,\n\tOPTIONS extends DPickerDatetimeLabelOptions<VALUE, THEME> = DPickerDatetimeLabelOptions<VALUE, THEME>\n> extends DText<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DPickerDatetimeLabel\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DText, DTextOptions, DThemeText } from \"./d-text\";\n\nexport interface DPickerDatetimeLabelDateOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeLabelDate = DThemePickerDatetimeLabelDate\n> extends DTextOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemePickerDatetimeLabelDate extends DThemeText {\n\n}\n\nexport class DPickerDatetimeLabelDate<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeLabelDate = DThemePickerDatetimeLabelDate,\n\tOPTIONS extends DPickerDatetimeLabelDateOptions<VALUE, THEME> = DPickerDatetimeLabelDateOptions<VALUE, THEME>\n> extends DText<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DPickerDatetimeLabelDate\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\n\nexport interface DPickerDatetimeSpaceOptions<\n\tTHEME extends DThemePickerDatetimeSpace = DThemePickerDatetimeSpace\n> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemePickerDatetimeSpace extends DThemeBase {\n\n}\n\nexport class DPickerDatetimeSpace<\n\tTHEME extends DThemePickerDatetimeSpace = DThemePickerDatetimeSpace,\n\tOPTIONS extends DPickerDatetimeSpaceOptions<THEME> = DPickerDatetimeSpaceOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t\tthis.renderable = false;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DPickerDatetimeSpace\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DInputNumber, DInputNumberOptions, DThemeInputNumber } from \"./d-input-number\";\n\nexport interface DInputIntegerOptions<\n\tTHEME extends DThemeInputInteger = DThemeInputInteger\n> extends DInputNumberOptions<THEME> {\n\n}\n\nexport interface DThemeInputInteger extends DThemeInputNumber {\n}\n\nexport class DInputInteger<\n\tTHEME extends DThemeInputInteger = DThemeInputInteger,\n\tOPTIONS extends DInputIntegerOptions<THEME> = DInputIntegerOptions<THEME>\n> extends DInputNumber<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DInputInteger\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport type DPickerTimeBoundDate = Date | null;\n\nexport interface DPickerTimeBoundOptions {\n\tdate?: DPickerTimeBoundDate;\n\tinclusive?: boolean;\n}\n\nexport class DPickerTimeBound {\n\tprotected _date: DPickerTimeBoundDate;\n\tprotected _inclusive: boolean;\n\tprotected _onChange: () => void;\n\n\tconstructor( options: DPickerTimeBoundOptions | undefined, onChange: () => void ) {\n\t\tthis._date = ( options && options.date !== undefined ? options.date : null );\n\t\tthis._inclusive = ( options && options.inclusive !== undefined ? options.inclusive : false );\n\t\tthis._onChange = onChange;\n\t}\n\n\tget date(): DPickerTimeBoundDate {\n\t\treturn this._date;\n\t}\n\n\tset date( date: DPickerTimeBoundDate ) {\n\t\tif( this._date !== date ) {\n\t\t\tthis._date = date;\n\t\t\tthis._onChange();\n\t\t}\n\t}\n\n\tget inclusive(): boolean {\n\t\treturn this._inclusive;\n\t}\n\n\tset inclusive( inclusive: boolean ) {\n\t\tif( this._inclusive !== inclusive ) {\n\t\t\tthis._inclusive = inclusive;\n\t\t\tthis._onChange();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerTimeBound } from \"./d-picker-time-bound\";\nimport { DPickerTimeBoundConstant } from \"./d-picker-time-bound-constant\";\n\nexport interface DPickerTimeBoundHoursParent {\n\tlower: DPickerTimeBound;\n\tupper: DPickerTimeBound;\n\tmask: DPickerDatetimeMask;\n\tconstant: DPickerTimeBoundConstant;\n}\n\nexport class DPickerTimeBoundHours {\n\tprotected _parent: DPickerTimeBoundHoursParent;\n\n\tconstructor( parent: DPickerTimeBoundHoursParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tmin( date: Date ): number {\n\t\tconst parent = this._parent;\n\t\tconst lower = parent.lower;\n\t\tconst lowerDate = lower.date;\n\t\tconst constant = parent.constant;\n\t\tif( lowerDate != null ) {\n\t\t\tconst mask = parent.mask;\n\t\t\tif( mask & DPickerDatetimeMask.DATE ) {\n\t\t\t\tif( lowerDate.getFullYear() < date.getFullYear() ) {\n\t\t\t\t\treturn constant.hour.min;\n\t\t\t\t}\n\t\t\t\tif( lowerDate.getMonth() < date.getMonth() ) {\n\t\t\t\t\treturn constant.hour.min;\n\t\t\t\t}\n\t\t\t\tif( lowerDate.getDate() < date.getDate() ) {\n\t\t\t\t\treturn constant.hour.min;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst lowerDateHours = lowerDate.getHours();\n\t\t\tif( lower.inclusive ) {\n\t\t\t\treturn lowerDateHours;\n\t\t\t} else {\n\t\t\t\tif( mask & DPickerDatetimeMask.SECONDS ) {\n\t\t\t\t\tif( lowerDate.getSeconds() < constant.second.max ) {\n\t\t\t\t\t\treturn lowerDateHours;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif( mask & DPickerDatetimeMask.MINUTES ) {\n\t\t\t\t\tif( lowerDate.getMinutes() < constant.minute.max ) {\n\t\t\t\t\t\treturn lowerDateHours;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn lowerDateHours + 1;\n\t\t\t}\n\t\t}\n\t\treturn constant.hour.min;\n\t}\n\n\tmax( date: Date ): number {\n\t\tconst parent = this._parent;\n\t\tconst upper = parent.upper;\n\t\tconst upperDate = upper.date;\n\t\tconst constant = parent.constant;\n\t\tif( upperDate != null ) {\n\t\t\tconst mask = parent.mask;\n\t\t\tif( mask & DPickerDatetimeMask.DATE ) {\n\t\t\t\tif( date.getFullYear() < upperDate.getFullYear() ) {\n\t\t\t\t\treturn constant.hour.max;\n\t\t\t\t}\n\t\t\t\tif( date.getMonth() < upperDate.getMonth() ) {\n\t\t\t\t\treturn constant.hour.max;\n\t\t\t\t}\n\t\t\t\tif( date.getDate() < upperDate.getDate() ) {\n\t\t\t\t\treturn constant.hour.max;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst upperDateHours = upperDate.getHours();\n\t\t\tif( upper.inclusive ) {\n\t\t\t\treturn upperDateHours;\n\t\t\t} else {\n\t\t\t\tif( mask & DPickerDatetimeMask.SECONDS ) {\n\t\t\t\t\tif( constant.second.min < upperDate.getSeconds() ) {\n\t\t\t\t\t\treturn upperDateHours;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif( mask & DPickerDatetimeMask.MINUTES ) {\n\t\t\t\t\tif( constant.minute.min < upperDate.getMinutes() ) {\n\t\t\t\t\t\treturn upperDateHours;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn upperDateHours - 1;\n\t\t\t}\n\t\t}\n\t\treturn constant.hour.max;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerTimeBound } from \"./d-picker-time-bound\";\nimport { DPickerTimeBoundConstant } from \"./d-picker-time-bound-constant\";\n\nexport interface DPickerTimeBoundMinutesParent {\n\tlower: DPickerTimeBound;\n\tupper: DPickerTimeBound;\n\tmask: DPickerDatetimeMask;\n\tconstant: DPickerTimeBoundConstant;\n}\n\nexport class DPickerTimeBoundMinutes {\n\tprotected _parent: DPickerTimeBoundMinutesParent;\n\n\tconstructor( parent: DPickerTimeBoundMinutesParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tmin( date: Date ): number {\n\t\tconst parent = this._parent;\n\t\tconst lower = parent.lower;\n\t\tconst lowerDate = lower.date;\n\t\tconst constant = parent.constant;\n\t\tif( lowerDate != null ) {\n\t\t\tconst mask = parent.mask;\n\t\t\tif( mask & DPickerDatetimeMask.DATE ) {\n\t\t\t\tif( lowerDate.getFullYear() < date.getFullYear() ) {\n\t\t\t\t\treturn constant.minute.min;\n\t\t\t\t}\n\t\t\t\tif( lowerDate.getMonth() < date.getMonth() ) {\n\t\t\t\t\treturn constant.minute.min;\n\t\t\t\t}\n\t\t\t\tif( lowerDate.getDate() < date.getDate() ) {\n\t\t\t\t\treturn constant.minute.min;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( mask & DPickerDatetimeMask.HOURS ) {\n\t\t\t\tif( lowerDate.getHours() < date.getHours() ) {\n\t\t\t\t\treturn constant.minute.min;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst lowerDateMinutes = lowerDate.getMinutes();\n\t\t\tif( lower.inclusive ) {\n\t\t\t\treturn lowerDateMinutes;\n\t\t\t} else {\n\t\t\t\tif( mask & DPickerDatetimeMask.SECONDS ) {\n\t\t\t\t\tif( lowerDate.getSeconds() < constant.second.max ) {\n\t\t\t\t\t\treturn lowerDateMinutes;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn lowerDateMinutes + 1;\n\t\t\t}\n\t\t}\n\t\treturn constant.minute.min;\n\t}\n\n\tmax( date: Date ): number {\n\t\tconst parent = this._parent;\n\t\tconst upper = parent.upper;\n\t\tconst upperDate = upper.date;\n\t\tconst constant = parent.constant;\n\t\tif( upperDate != null ) {\n\t\t\tconst mask = parent.mask;\n\t\t\tif( mask & DPickerDatetimeMask.DATE ) {\n\t\t\t\tif( date.getFullYear() < upperDate.getFullYear() ) {\n\t\t\t\t\treturn constant.minute.max;\n\t\t\t\t}\n\t\t\t\tif( date.getMonth() < upperDate.getMonth() ) {\n\t\t\t\t\treturn constant.minute.max;\n\t\t\t\t}\n\t\t\t\tif( date.getDate() < upperDate.getDate() ) {\n\t\t\t\t\treturn constant.minute.max;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( mask & DPickerDatetimeMask.HOURS ) {\n\t\t\t\tif( date.getHours() < upperDate.getHours() ) {\n\t\t\t\t\treturn constant.minute.max;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst upperDateMinutes = upperDate.getMinutes();\n\t\t\tif( upper.inclusive ) {\n\t\t\t\treturn upperDateMinutes;\n\t\t\t} else {\n\t\t\t\tif( mask & DPickerDatetimeMask.SECONDS ) {\n\t\t\t\t\tif( constant.second.min < upperDate.getSeconds() ) {\n\t\t\t\t\t\treturn upperDateMinutes;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn upperDateMinutes - 1;\n\t\t\t}\n\t\t}\n\t\treturn constant.minute.max;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerTimeBound } from \"./d-picker-time-bound\";\nimport { DPickerTimeBoundConstant } from \"./d-picker-time-bound-constant\";\n\nexport interface DPickerTimeBoundSecondsParent {\n\tlower: DPickerTimeBound;\n\tupper: DPickerTimeBound;\n\tmask: DPickerDatetimeMask;\n\tconstant: DPickerTimeBoundConstant;\n}\n\nexport class DPickerTimeBoundSeconds {\n\tprotected _parent: DPickerTimeBoundSecondsParent;\n\n\tconstructor( parent: DPickerTimeBoundSecondsParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tmin( date: Date ): number {\n\t\tconst parent = this._parent;\n\t\tconst lower = parent.lower;\n\t\tconst lowerDate = lower.date;\n\t\tconst constant = parent.constant;\n\t\tif( lowerDate != null ) {\n\t\t\tconst mask = parent.mask;\n\t\t\tif( mask & DPickerDatetimeMask.DATE ) {\n\t\t\t\tif( lowerDate.getFullYear() < date.getFullYear() ) {\n\t\t\t\t\treturn constant.second.min;\n\t\t\t\t}\n\t\t\t\tif( lowerDate.getMonth() < date.getMonth() ) {\n\t\t\t\t\treturn constant.second.min;\n\t\t\t\t}\n\t\t\t\tif( lowerDate.getDate() < date.getDate() ) {\n\t\t\t\t\treturn constant.second.min;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( mask & DPickerDatetimeMask.HOURS ) {\n\t\t\t\tif( lowerDate.getHours() < date.getHours() ) {\n\t\t\t\t\treturn constant.second.min;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( mask & DPickerDatetimeMask.MINUTES ) {\n\t\t\t\tif( lowerDate.getMinutes() < date.getMinutes() ) {\n\t\t\t\t\treturn constant.second.min;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn lowerDate.getSeconds() + ( lower.inclusive ? 0 : 1 );\n\t\t}\n\t\treturn constant.second.min;\n\t}\n\n\tmax( date: Date ): number {\n\t\tconst parent = this._parent;\n\t\tconst upper = parent.upper;\n\t\tconst upperDate = upper.date;\n\t\tconst constant = parent.constant;\n\t\tif( upperDate != null ) {\n\t\t\tconst mask = parent.mask;\n\t\t\tif( mask & DPickerDatetimeMask.DATE ) {\n\t\t\t\tif( date.getFullYear() < upperDate.getFullYear() ) {\n\t\t\t\t\treturn constant.second.max;\n\t\t\t\t}\n\t\t\t\tif( date.getMonth() < upperDate.getMonth() ) {\n\t\t\t\t\treturn constant.second.max;\n\t\t\t\t}\n\t\t\t\tif( date.getDate() < upperDate.getDate() ) {\n\t\t\t\t\treturn constant.second.max;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( mask & DPickerDatetimeMask.HOURS ) {\n\t\t\t\tif( date.getHours() < upperDate.getHours() ) {\n\t\t\t\t\treturn constant.second.max;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( mask & DPickerDatetimeMask.MINUTES ) {\n\t\t\t\tif( date.getMinutes() < upperDate.getMinutes() ) {\n\t\t\t\t\treturn constant.second.max;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn upperDate.getSeconds() - ( upper.inclusive ? 0 : 1 );\n\t\t}\n\t\treturn constant.second.max;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerTimeBound, DPickerTimeBoundOptions } from \"./d-picker-time-bound\";\nimport { DPickerTimeBoundConstant } from \"./d-picker-time-bound-constant\";\nimport { DPickerTimeBoundHours } from \"./d-picker-time-bound-hours\";\nimport { DPickerTimeBoundMinutes } from \"./d-picker-time-bound-minutes\";\nimport { DPickerTimeBoundSeconds } from \"./d-picker-time-bound-seconds\";\n\nexport interface DPickerTimeBoundsOptions {\n\tlower?: DPickerTimeBoundOptions;\n\tupper?: DPickerTimeBoundOptions;\n}\n\nexport class DPickerTimeBounds {\n\tlower: DPickerTimeBound;\n\tupper: DPickerTimeBound;\n\tmask: DPickerDatetimeMask;\n\thours: DPickerTimeBoundHours;\n\tminutes: DPickerTimeBoundMinutes;\n\tseconds: DPickerTimeBoundSeconds;\n\tconstant: DPickerTimeBoundConstant;\n\n\tconstructor( options: DPickerTimeBoundsOptions | undefined, onChange: () => void ) {\n\t\tthis.constant = this.newConstant();\n\t\tthis.lower = new DPickerTimeBound( options && options.lower, onChange );\n\t\tthis.upper = new DPickerTimeBound( options && options.upper, onChange );\n\t\tthis.mask = DPickerDatetimeMask.ALL;\n\t\tthis.hours = new DPickerTimeBoundHours( this );\n\t\tthis.minutes = new DPickerTimeBoundMinutes( this );\n\t\tthis.seconds = new DPickerTimeBoundSeconds( this );\n\t}\n\n\tnewConstant(): DPickerTimeBoundConstant {\n\t\treturn {\n\t\t\tsecond: {\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 59\n\t\t\t},\n\n\t\t\tminute: {\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 59\n\t\t\t},\n\n\t\t\thour: {\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 23\n\t\t\t}\n\t\t};\n\t}\n\n\tadjust( date: Date ): boolean {\n\t\tconst result = this.test( date );\n\t\tif( result < 0 ) {\n\t\t\tconst lower = this.lower;\n\t\t\tconst lowerDate = lower.date;\n\t\t\tif( lowerDate ) {\n\t\t\t\tdate.setTime( lowerDate.getTime() );\n\t\t\t\tif( ! lower.inclusive ) {\n\t\t\t\t\tconst mask = this.mask;\n\t\t\t\t\tif( mask & DPickerDatetimeMask.SECONDS ) {\n\t\t\t\t\t\tdate.setSeconds( lowerDate.getSeconds() + 1 );\n\t\t\t\t\t} else if( mask & DPickerDatetimeMask.MINUTES ) {\n\t\t\t\t\t\tdate.setMinutes( lowerDate.getMinutes() + 1 );\n\t\t\t\t\t} else if( mask & DPickerDatetimeMask.HOURS ) {\n\t\t\t\t\t\tdate.setHours( lowerDate.getHours() + 1 );\n\t\t\t\t\t} else if( mask & DPickerDatetimeMask.DATE ) {\n\t\t\t\t\t\tdate.setDate( lowerDate.getDate() + 1 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else if( 0 < result ) {\n\t\t\tconst upper = this.upper;\n\t\t\tconst upperDate = upper.date;\n\t\t\tif( upperDate ) {\n\t\t\t\tdate.setTime( upperDate.getTime() );\n\t\t\t\tif( ! upper.inclusive ) {\n\t\t\t\t\tconst mask = this.mask;\n\t\t\t\t\tif( mask & DPickerDatetimeMask.SECONDS ) {\n\t\t\t\t\t\tdate.setSeconds( upperDate.getSeconds() - 1 );\n\t\t\t\t\t} else if( mask & DPickerDatetimeMask.MINUTES ) {\n\t\t\t\t\t\tdate.setMinutes( upperDate.getMinutes() - 1 );\n\t\t\t\t\t} else if( mask & DPickerDatetimeMask.HOURS ) {\n\t\t\t\t\t\tdate.setHours( upperDate.getHours() - 1 );\n\t\t\t\t\t} else if( mask & DPickerDatetimeMask.DATE ) {\n\t\t\t\t\t\tdate.setDate( upperDate.getDate() - 1 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tcompare( a: Date, b: Date ): number {\n\t\tconst mask = this.mask;\n\t\tif( mask & DPickerDatetimeMask.DATE ) {\n\t\t\tconst ay = a.getFullYear();\n\t\t\tconst by = b.getFullYear();\n\t\t\tif( ay !== by ) {\n\t\t\t\treturn ( ay < by ? -1 : +1 );\n\t\t\t}\n\n\t\t\tconst am = a.getMonth();\n\t\t\tconst bm = b.getMonth();\n\t\t\tif( am !== bm ) {\n\t\t\t\treturn ( am < bm ? -1 : +1 );\n\t\t\t}\n\n\t\t\tconst ad = a.getDate();\n\t\t\tconst bd = b.getDate();\n\t\t\tif( ad !== bd ) {\n\t\t\t\treturn ( ad < bd ? -1 : +1 );\n\t\t\t}\n\t\t}\n\t\tif( mask & DPickerDatetimeMask.HOURS ) {\n\t\t\tconst ah = a.getHours();\n\t\t\tconst bh = b.getHours();\n\t\t\tif( ah !== bh ) {\n\t\t\t\treturn ( ah < bh ? -1 : +1 );\n\t\t\t}\n\t\t}\n\t\tif( mask & DPickerDatetimeMask.MINUTES ) {\n\t\t\tconst am = a.getMinutes();\n\t\t\tconst bm = b.getMinutes();\n\t\t\tif( am !== bm ) {\n\t\t\t\treturn ( am < bm ? -1 : +1 );\n\t\t\t}\n\t\t}\n\t\tif( mask & DPickerDatetimeMask.SECONDS ) {\n\t\t\tconst ad = a.getSeconds();\n\t\t\tconst bd = b.getSeconds();\n\t\t\tif( ad !== bd ) {\n\t\t\t\treturn ( ad < bd ? -1 : +1 );\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\ttest( date: Date ): number {\n\t\t// Lower bound\n\t\tconst lower = this.lower;\n\t\tconst lowerDate = lower.date;\n\t\tif( lowerDate != null ) {\n\t\t\tconst result = this.compare( lowerDate, date );\n\t\t\tif( lower.inclusive ) {\n\t\t\t\treturn ( result <= 0 ? 0 : -1 );\n\t\t\t} else {\n\t\t\t\treturn ( result < 0 ? 0 : -1 );\n\t\t\t}\n\t\t}\n\n\t\t// Upper bound\n\t\tconst upper = this.upper;\n\t\tconst upperDate = upper.date;\n\t\tif( upperDate != null ) {\n\t\t\tconst result = this.compare( date, upperDate );\n\t\t\tif( upper.inclusive ) {\n\t\t\t\treturn ( result <= 0 ? 0 : +1 );\n\t\t\t} else {\n\t\t\t\treturn ( result < 0 ? 0 : +1 );\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tcontains( date: Date ): boolean {\n\t\treturn this.test( date ) === 0;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DCoordinate } from \"./d-coordinate\";\nimport { DInputInteger, DInputIntegerOptions } from \"./d-input-integer\";\nimport { DLayoutHorizontal } from \"./d-layout-horizontal\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerTimeBoundDate, DPickerTimeBoundOptions } from \"./d-picker-time-bound\";\nimport { DPickerTimeBounds, DPickerTimeBoundsOptions } from \"./d-picker-time-bounds\";\nimport { DText } from \"./d-text\";\n\nexport interface DPickerTimeOptions<THEME extends DThemePickerTime = DThemePickerTime> extends DBaseOptions<THEME> {\n\tmargin?: number;\n\thours?: DInputIntegerOptions;\n\tminutes?: DInputIntegerOptions;\n\tseconds?: DInputIntegerOptions;\n\tmask?: DPickerDatetimeMask;\n\tbounds?: DPickerTimeBoundsOptions;\n}\n\nexport interface DThemePickerTime extends DThemeBase {\n\tgetMargin(): number;\n\tgetHoursOptions(): DInputIntegerOptions;\n\tgetMinutesOptions(): DInputIntegerOptions;\n\tgetSecondsOptions(): DInputIntegerOptions;\n\tgetMask(): DPickerDatetimeMask;\n\tgetLowerBound(): DPickerTimeBoundDate;\n\tisLowerBoundInclusive(): boolean;\n\tgetUpperBound(): DPickerTimeBoundDate;\n\tisUpperBoundInclusive(): boolean;\n}\n\nconst toBoundOptions = (\n\toptions: DPickerTimeBoundOptions | undefined,\n\tdate: DPickerTimeBoundDate,\n\tinclusive: boolean\n): DPickerTimeBoundOptions => {\n\tif( options ) {\n\t\treturn {\n\t\t\tdate: ( options.date !== undefined ? options.date : date ),\n\t\t\tinclusive: ( options.inclusive !== undefined ? options.inclusive : inclusive )\n\t\t};\n\t}\n\treturn {\n\t\tdate,\n\t\tinclusive\n\t};\n};\n\nconst toBoundsOptions = (\n\ttheme: DThemePickerTime,\n\toptions: DPickerTimeBoundsOptions | undefined\n): DPickerTimeBoundsOptions => {\n\tif( options ) {\n\t\treturn {\n\t\t\tlower: toBoundOptions(\n\t\t\t\toptions.lower,\n\t\t\t\ttheme.getLowerBound(),\n\t\t\t\ttheme.isLowerBoundInclusive()\n\t\t\t),\n\t\t\tupper: toBoundOptions(\n\t\t\t\toptions.upper,\n\t\t\t\ttheme.getUpperBound(),\n\t\t\t\ttheme.isUpperBoundInclusive()\n\t\t\t)\n\t\t};\n\t}\n\treturn {\n\t\tlower: {\n\t\t\tdate: theme.getLowerBound(),\n\t\t\tinclusive: theme.isLowerBoundInclusive()\n\t\t},\n\t\tupper: {\n\t\t\tdate: theme.getUpperBound(),\n\t\t\tinclusive: theme.isUpperBoundInclusive()\n\t\t}\n\t};\n};\n\nexport class DPickerTime<\n\tTHEME extends DThemePickerTime = DThemePickerTime,\n\tOPTIONS extends DPickerTimeOptions<THEME> = DPickerTimeOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tprotected _dateBounds!: DPickerTimeBounds;\n\tprotected _dateCurrent!: Date;\n\tprotected _dateNew!: Date;\n\tprotected _inputHours!: DInputInteger | null;\n\tprotected _inputMinutes!: DInputInteger | null;\n\tprotected _inputSeconds!: DInputInteger | null;\n\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis.onNewChanged();\n\t}\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\n\t\tconst theme = this.theme;\n\t\tthis._dateCurrent = new Date();\n\t\tconst dateCurrentTime = this._dateCurrent.getTime();\n\t\tthis._dateNew = new Date( dateCurrentTime );\n\t\tthis._dateBounds = new DPickerTimeBounds(\n\t\t\ttoBoundsOptions( theme, options && options.bounds ),\n\t\t\t(): void => { this.onNewChanged(); }\n\t\t);\n\t\tconst margin = ( options && options.margin != null ?\n\t\t\toptions.margin : theme.getMargin() );\n\t\tnew DLayoutVertical({\n\t\t\tparent: this,\n\t\t\tx: \"padding\", y: \"padding\",\n\t\t\twidth: \"auto\", height: \"auto\",\n\t\t\tmargin,\n\t\t\tchildren: this.newChildren( theme, options, margin )\n\t\t});\n\t}\n\n\tget current(): Date {\n\t\treturn this._dateCurrent;\n\t}\n\n\tset current( dateCurrent: Date ) {\n\t\tif( this._dateCurrent.getTime() !== dateCurrent.getTime() ) {\n\t\t\tthis._dateCurrent = dateCurrent;\n\t\t}\n\t}\n\n\tget new(): Date {\n\t\treturn this._dateNew;\n\t}\n\n\tset new( dateNew: Date ) {\n\t\tif( this._dateNew.getTime() !== dateNew.getTime() ) {\n\t\t\tthis._dateNew = dateNew;\n\t\t\tthis.onNewChanged();\n\t\t}\n\t}\n\n\tget bounds(): DPickerTimeBounds {\n\t\treturn this._dateBounds;\n\t}\n\n\thasHours(): boolean {\n\t\treturn this._inputHours != null;\n\t}\n\n\thasMinutes(): boolean {\n\t\treturn this._inputMinutes != null;\n\t}\n\n\thasSeconds(): boolean {\n\t\treturn this._inputSeconds != null;\n\t}\n\n\treset(): void {\n\t\tconst currentTime = this._dateCurrent.getTime();\n\t\tthis._dateNew.setTime( currentTime );\n\t\tthis.onReset();\n\t}\n\n\tprotected onReset(): void {\n\t\tthis.onNewChanged();\n\t}\n\n\tprotected onNewChanged(): void {\n\t\tconst dateNew = this._dateNew;\n\t\tconst dateBounds = this._dateBounds;\n\t\tdateBounds.adjust( this._dateNew );\n\n\t\tconst inputHours = this._inputHours;\n\t\tif( inputHours ) {\n\t\t\tconst hours = dateBounds.hours;\n\t\t\tinputHours.value = dateNew.getHours();\n\t\t\tinputHours.min = hours.min( dateNew );\n\t\t\tinputHours.max = hours.max( dateNew );\n\t\t}\n\n\t\tconst inputMinutes = this._inputMinutes;\n\t\tif( inputMinutes ) {\n\t\t\tconst minutes = dateBounds.minutes;\n\t\t\tinputMinutes.value = dateNew.getMinutes();\n\t\t\tinputMinutes.min = minutes.min( dateNew );\n\t\t\tinputMinutes.max = minutes.max( dateNew );\n\t\t}\n\n\t\tconst inputSeconds = this._inputSeconds;\n\t\tif( inputSeconds ) {\n\t\t\tconst seconds = dateBounds.seconds;\n\t\t\tinputSeconds.value = dateNew.getSeconds();\n\t\t\tinputSeconds.min = seconds.min( dateNew );\n\t\t\tinputSeconds.max = seconds.max( dateNew );\n\t\t}\n\t}\n\n\tprotected newChildren( theme: THEME, options: OPTIONS | undefined, margin: number ): Array<DisplayObject | null> {\n\t\tconst mask = ( (options && options.mask != null) ? options.mask : theme.getMask() );\n\t\tthis._dateBounds.mask = mask;\n\t\tthis._inputHours = ( (mask & DPickerDatetimeMask.HOURS) ? this.newInputHours( theme, options ) : null );\n\t\tthis._inputMinutes = ( (mask & DPickerDatetimeMask.MINUTES) ? this.newInputMinutes( theme, options ) : null );\n\t\tthis._inputSeconds = ( (mask & DPickerDatetimeMask.SECONDS) ? this.newInputSeconds( theme, options ) : null );\n\t\treturn [\n\t\t\tthis.newTimeLayout(\n\t\t\t\tthis._inputHours,\n\t\t\t\tthis._inputMinutes,\n\t\t\t\tthis._inputSeconds,\n\t\t\t\tmargin\n\t\t\t)\n\t\t];\n\t}\n\n\tprotected newTimeLayout(\n\t\thours: DInputInteger | null,\n\t\tminutes: DInputInteger | null,\n\t\tseconds: DInputInteger | null,\n\t\tmargin: number\n\t): DLayoutHorizontal | null {\n\t\tconst children = this.newTimeLayoutChildren( hours, minutes, seconds );\n\t\tif( 0 < children.length ) {\n\t\t\treturn new DLayoutHorizontal({\n\t\t\t\twidth: this.getTimeLayoutWidth(),\n\t\t\t\theight: this.getTimeLayoutHeight(),\n\t\t\t\tmargin,\n\t\t\t\tchildren\n\t\t\t});\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected getTimeLayoutWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tprotected getTimeLayoutHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tprotected newTimeLayoutChildren(\n\t\thours: DInputInteger | null,\n\t\tminutes: DInputInteger | null,\n\t\tseconds: DInputInteger | null\n\t): Array<DisplayObject | null> {\n\t\tconst result = [];\n\t\tif( hours != null ) {\n\t\t\tresult.push( hours );\n\t\t}\n\t\tif( minutes != null ) {\n\t\t\tif( 0 < result.length ) {\n\t\t\t\tresult.push( this.newMinuteSeparator() );\n\t\t\t}\n\t\t\tresult.push( minutes );\n\t\t}\n\t\tif( seconds != null ) {\n\t\t\tif( 0 < result.length ) {\n\t\t\t\tresult.push( this.newSecondSeparator() );\n\t\t\t}\n\t\t\tresult.push( seconds );\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected newMinuteSeparator(): DText | null {\n\t\treturn new DText({\n\t\t\twidth: \"auto\",\n\t\t\ttext: {\n\t\t\t\tvalue: this.getMinuteSeparator()\n\t\t\t}\n\t\t});\n\t}\n\n\tgetMinuteSeparator(): string {\n\t\treturn \":\";\n\t}\n\n\tprotected newSecondSeparator(): DText | null {\n\t\treturn new DText({\n\t\t\twidth: \"auto\",\n\t\t\ttext: {\n\t\t\t\tvalue: this.getSecondSeparator()\n\t\t\t}\n\t\t});\n\t}\n\n\tgetSecondSeparator(): string {\n\t\treturn \":\";\n\t}\n\n\tprotected adjustInputOptions( theme: THEME, options: DInputIntegerOptions, max: number ): DInputIntegerOptions {\n\t\tif( options.step == null ) {\n\t\t\toptions.step = 1;\n\t\t}\n\t\tif( options.min == null ) {\n\t\t\toptions.min = 0;\n\t\t}\n\t\tif( options.max == null ) {\n\t\t\toptions.max = max;\n\t\t}\n\t\treturn options;\n\t}\n\n\tprotected newInputHours( theme: THEME, options?: OPTIONS ): DInputInteger | null {\n\t\tconst inputOptions = ( options && options.hours ) || theme.getHoursOptions();\n\t\tconst max = this._dateBounds.constant.hour.max;\n\t\tconst input = new DInputInteger( this.adjustInputOptions( theme, inputOptions, max ) );\n\t\tinput.on( \"change\", ( value: number ): void => {\n\t\t\tthis.onHoursChanged( value );\n\t\t});\n\t\treturn input;\n\t}\n\n\tprotected onHoursChanged( value: number ): void {\n\t\tconst dateNew = this._dateNew;\n\t\tdateNew.setHours( value );\n\t\tthis.onNewChanged();\n\t}\n\n\tprotected newInputMinutes( theme: THEME, options?: OPTIONS ): DInputInteger | null {\n\t\tconst inputOptions = ( options && options.minutes ) || theme.getMinutesOptions();\n\t\tconst max = this._dateBounds.constant.minute.max;\n\t\tconst input = new DInputInteger( this.adjustInputOptions( theme, inputOptions, max ) );\n\t\tinput.on( \"change\", ( value: number ): void => {\n\t\t\tthis.onMinutesChanged( value );\n\t\t});\n\t\treturn input;\n\t}\n\n\tprotected onMinutesChanged( value: number ): void {\n\t\tconst dateNew = this._dateNew;\n\t\tdateNew.setMinutes( value );\n\t\tthis.onNewChanged();\n\t}\n\n\tprotected newInputSeconds( theme: THEME, options?: OPTIONS ): DInputInteger | null {\n\t\tconst inputOptions = ( options && options.seconds ) || theme.getSecondsOptions();\n\t\tconst max = this._dateBounds.constant.second.max;\n\t\tconst input = new DInputInteger( this.adjustInputOptions( theme, inputOptions, max ) );\n\t\tinput.on( \"change\", ( value: number ): void => {\n\t\t\tthis.onSecondsChanged( value );\n\t\t});\n\t\treturn input;\n\t}\n\n\tprotected onSecondsChanged( value: number ): void {\n\t\tthis._dateNew.setSeconds( value );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DPickerTime\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DCoordinate } from \"./d-coordinate\";\nimport { DInputIntegerOptions } from \"./d-input-integer\";\nimport { DLayoutHorizontal } from \"./d-layout-horizontal\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\nimport { DPickerDatetimeButtonBack, DPickerDatetimeButtonBackOptions } from \"./d-picker-datetime-button-back\";\nimport { DPickerDatetimeButtonDate } from \"./d-picker-datetime-button-date\";\nimport { DPickerDatetimeButtonNext, DPickerDatetimeButtonNextOptions } from \"./d-picker-datetime-button-next\";\nimport { DPickerDatetimeLabel } from \"./d-picker-datetime-label\";\nimport { DPickerDatetimeLabelDate } from \"./d-picker-datetime-label-date\";\nimport { DPickerDatetimeSpace } from \"./d-picker-datetime-space\";\nimport { DPickerTime, DPickerTimeOptions, DThemePickerTime } from \"./d-picker-time\";\nimport { DText } from \"./d-text\";\n\nexport type DPickerDatetimeLabelFormatter = ( date: Date ) => string;\nexport type DPickerDatetimeDateDecorator = ( date: Date, button: DPickerDatetimeButtonDate ) => void;\nexport type DPickerDatetimeDayLabels = [ string, string, string, string, string, string, string ];\n\nexport interface DPickerDatetimeOptions<\n\tTHEME extends DThemePickerDatetime = DThemePickerDatetime\n> extends DPickerTimeOptions<THEME> {\n\tback?: DPickerDatetimeButtonBackOptions | null;\n\tnext?: DPickerDatetimeButtonNextOptions | null;\n\tday?: {\n\t\tstart?: number;\n\t\tlabels?: DPickerDatetimeDayLabels;\n\t};\n\tlabel?: {\n\t\tformatter?: DPickerDatetimeLabelFormatter;\n\t};\n\tdate?: {\n\t\tdecorator?: DPickerDatetimeDateDecorator;\n\t};\n}\n\nexport interface DThemePickerDatetime extends DThemePickerTime {\n\tgetDayLabels(): DPickerDatetimeDayLabels;\n\tgetDayStart(): number;\n\tgetLabelFormatter(): DPickerDatetimeLabelFormatter;\n\tgetDateDecorator(): DPickerDatetimeDateDecorator;\n\tgetBackButtonOptions(): DPickerDatetimeButtonBackOptions | null;\n\tgetNextButtonOptions(): DPickerDatetimeButtonNextOptions | null;\n}\n\nexport class DPickerDatetime<\n\tTHEME extends DThemePickerDatetime = DThemePickerDatetime,\n\tOPTIONS extends DPickerDatetimeOptions<THEME> = DPickerDatetimeOptions<THEME>\n> extends DPickerTime<THEME, OPTIONS> {\n\tprotected _datePage!: Date;\n\tprotected _dateButtons!: Array<DPickerDatetimeSpace | DPickerDatetimeButtonDate>;\n\tprotected _dateDecorator!: DPickerDatetimeDateDecorator;\n\tprotected _label!: DText;\n\tprotected _labelFormatter!: DPickerDatetimeLabelFormatter;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis._datePage = new Date( this._dateCurrent.getTime() );\n\t}\n\n\tprotected newChildren( theme: THEME, options: OPTIONS | undefined, margin: number ): Array<DisplayObject | null> {\n\t\tthis._dateButtons = this.newDateButtons( theme, options );\n\t\tthis._dateDecorator = ( options && options.date && options.date.decorator ) ||\n\t\t\ttheme.getDateDecorator();\n\t\tthis._label = this.newLabel();\n\t\tthis._labelFormatter = ( options && options.label && options.label.formatter ) ||\n\t\t\ttheme.getLabelFormatter();\n\t\tconst result = super.newChildren( theme, options, margin );\n\t\tresult.unshift(\n\t\t\tnew DLayoutHorizontal({\n\t\t\t\twidth: \"100%\", height: \"auto\",\n\t\t\t\tchildren: [\n\t\t\t\t\tthis.newBackButton( theme, options ),\n\t\t\t\t\tthis._label,\n\t\t\t\t\tthis.newNextButton( theme, options )\n\t\t\t\t]\n\t\t\t}),\n\t\t\tnew DLayoutHorizontal({\n\t\t\t\twidth: \"auto\", height: \"auto\",\n\t\t\t\tmargin,\n\t\t\t\tchildren: this.newDateLabels( theme, options )\n\t\t\t}),\n\t\t\tnew DLayoutVertical({\n\t\t\t\twidth: \"auto\", height: \"auto\",\n\t\t\t\tmargin,\n\t\t\t\tcolumn: 7,\n\t\t\t\tchildren: this._dateButtons\n\t\t\t})\n\t\t);\n\t\treturn result;\n\t}\n\n\tget page(): Date {\n\t\treturn this._datePage;\n\t}\n\n\tset page( datePage: Date ) {\n\t\tif( this._datePage.getTime() !== datePage.getTime() ) {\n\t\t\tthis._datePage = datePage;\n\t\t\tthis.onPageChanged();\n\t\t}\n\t}\n\n\tprotected onReset(): void {\n\t\tthis._datePage.setTime( this._dateCurrent.getTime() );\n\t\tsuper.onReset();\n\t}\n\n\tnext(): void {\n\t\tconst work = this._datePage;\n\t\twork.setFullYear( work.getFullYear(), work.getMonth() + 1, 1 );\n\t\twork.setHours( 0, 0, 0, 0 );\n\t\tthis.onPageChanged();\n\t}\n\n\tback(): void {\n\t\tconst work = this._datePage;\n\t\twork.setFullYear( work.getFullYear(), work.getMonth() - 1, 1 );\n\t\twork.setHours( 0, 0, 0, 0 );\n\t\tthis.onPageChanged();\n\t}\n\n\tonNewChanged(): void {\n\t\tthis._dateBounds.adjust( this._datePage );\n\t\tsuper.onNewChanged();\n\t\tthis.onPageChanged();\n\t}\n\n\tprotected onPageChanged(): void {\n\t\tconst buttons = this._dateButtons;\n\t\tconst bounds = this._dateBounds;\n\t\tconst datePage = this._datePage;\n\t\tconst dateNew = this._dateNew;\n\n\t\tconst tmp = new Date( datePage.getTime() );\n\t\ttmp.setDate( 1 );\n\t\ttmp.setHours( 0, 0, 0, 0 );\n\n\t\t// Spaces\n\t\tconst theme = this.theme;\n\t\tconst spaceCount = ( tmp.getDay() - theme.getDayStart() + 7 ) % 7;\n\t\tfor( let i = 0; i < spaceCount; ++i ) {\n\t\t\tbuttons[ i ].show();\n\t\t}\n\t\tfor( let i = spaceCount; i < 7; ++i ) {\n\t\t\tbuttons[ i ].hide();\n\t\t}\n\n\t\t// Date buttons\n\t\tconst dateDecorator = this._dateDecorator;\n\t\ttmp.setFullYear( tmp.getFullYear(), tmp.getMonth() + 1, 0 );\n\t\tconst dateCount = tmp.getDate();\n\t\tconst dateNewDate = ( dateNew.getFullYear() === tmp.getFullYear() &&\n\t\t\tdateNew.getMonth() === tmp.getMonth() ? dateNew.getDate() : 0 );\n\t\tfor( let i = 0; i < dateCount; ++i ) {\n\t\t\ttmp.setDate( i + 1 );\n\n\t\t\tconst button = buttons[ i + 7 ];\n\t\t\tbutton.setActive( dateNewDate === i + 1 );\n\t\t\tbutton.setDisabled( ! bounds.contains( tmp ) );\n\t\t\tbutton.show();\n\n\t\t\tdateDecorator( tmp, button as DPickerDatetimeButtonDate );\n\t\t}\n\t\tfor( let i = dateCount; i < 31; ++i ) {\n\t\t\tconst button = buttons[ i + 7 ];\n\t\t\tbutton.setActive( false );\n\t\t\tbutton.hide();\n\t\t}\n\n\t\t// Label\n\t\tthis._label.text = this._labelFormatter( datePage );\n\t}\n\n\tprotected adjustInputOptions( theme: THEME, options: DInputIntegerOptions, max: number ): DInputIntegerOptions {\n\t\tif( options.weight == null ) {\n\t\t\toptions.weight = 1;\n\t\t}\n\t\treturn super.adjustInputOptions( theme, options, max );\n\t}\n\n\tprotected getTimeLayoutWidth(): DCoordinate {\n\t\treturn \"100%\";\n\t}\n\n\tprotected newLabel(): DPickerDatetimeLabel {\n\t\treturn new DPickerDatetimeLabel({\n\t\t\tweight: 1,\n\t\t\tpadding: 0,\n\t\t\ttext: {\n\t\t\t\talign: {\n\t\t\t\t\thorizontal: \"CENTER\"\n\t\t\t\t},\n\t\t\t\tvalue: \"\"\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected newBackButton( theme: THEME, options?: OPTIONS ): DPickerDatetimeButtonBack | null {\n\t\tconst buttonOptions = ( options && options.back !== undefined ?\n\t\t\toptions.back : theme.getBackButtonOptions() );\n\t\tif( buttonOptions != null ) {\n\t\t\tconst button = new DPickerDatetimeButtonBack( buttonOptions );\n\t\t\tbutton.on( \"active\", (): void => {\n\t\t\t\tthis.back();\n\t\t\t});\n\t\t\treturn button;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected newNextButton( theme: THEME, options?: OPTIONS ): DPickerDatetimeButtonNext | null {\n\t\tconst buttonOptions = ( options && options.next !== undefined ?\n\t\t\toptions.next : theme.getNextButtonOptions() );\n\t\tif( buttonOptions != null ) {\n\t\t\tconst button = new DPickerDatetimeButtonNext( buttonOptions );\n\t\t\tbutton.on( \"active\", (): void => {\n\t\t\t\tthis.next();\n\t\t\t});\n\t\t\treturn button;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected newDateLabels( theme: THEME, options: OPTIONS | undefined ): DPickerDatetimeLabelDate[] {\n\t\tconst dateLabels = theme.getDayLabels();\n\t\tconst dayStart = theme.getDayStart();\n\t\tconst result: DPickerDatetimeLabelDate[] = [];\n\t\tfor( let i = 0; i < 7; ++i ) {\n\t\t\tconst label = dateLabels[ (dayStart + i) % 7 ];\n\t\t\tresult.push(\n\t\t\t\tthis.newDateLabel( theme, options, label )\n\t\t\t);\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected newDateLabel( theme: THEME, options: OPTIONS | undefined, label: string ): DPickerDatetimeLabelDate {\n\t\treturn new DPickerDatetimeLabelDate({\n\t\t\ttext: {\n\t\t\t\tvalue: label\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected newDateButtons(\n\t\ttheme: THEME, options: OPTIONS | undefined\n\t): Array<DPickerDatetimeSpace | DPickerDatetimeButtonDate> {\n\t\tconst result: Array<DPickerDatetimeSpace | DPickerDatetimeButtonDate> = [];\n\t\tfor( let i = 0; i < 7; ++i ) {\n\t\t\tresult.push(\n\t\t\t\tthis.newSpace( theme, options )\n\t\t\t);\n\t\t}\n\t\tfor( let i = 1; i <= 31; ++i ) {\n\t\t\tresult.push(\n\t\t\t\tthis.newDateButton( theme, options, i )\n\t\t\t);\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected newSpace( theme: THEME, options: OPTIONS | undefined ): DPickerDatetimeSpace {\n\t\treturn new DPickerDatetimeSpace();\n\t}\n\n\tprotected newDateButton( theme: THEME, options: OPTIONS | undefined, date: number ): DPickerDatetimeButtonDate {\n\t\treturn new DPickerDatetimeButtonDate({\n\t\t\ttext: {\n\t\t\t\tvalue: String( date )\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tactive: (): void => {\n\t\t\t\t\tthis.onDateButtonClicked( date );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected onDateButtonClicked( date: number ): void {\n\t\tconst dateNew = this._dateNew;\n\t\tif( dateNew.getDate() !== date ) {\n\t\t\tconst datePage = this._datePage;\n\t\t\tdateNew.setFullYear( datePage.getFullYear() );\n\t\t\tdateNew.setMonth( datePage.getMonth() );\n\t\t\tdateNew.setDate( date );\n\t\t\tthis.onNewChanged();\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DPickerDatetime\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DPickerDatetime, DPickerDatetimeOptions, DThemePickerDatetime } from \"./d-picker-datetime\";\n\nexport interface DPickerDateOptions<\n\tTHEME extends DThemePickerDate = DThemePickerDate\n> extends DPickerDatetimeOptions<THEME> {\n\n}\n\nexport interface DThemePickerDate extends DThemePickerDatetime {\n\n}\n\nexport class DPickerDate<\n\tTHEME extends DThemePickerDate = DThemePickerDate,\n\tOPTIONS extends DPickerDateOptions<THEME> = DPickerDateOptions<THEME>\n> extends DPickerDatetime<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DPickerDate\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogCommand, DDialogCommandOptions, DThemeDialogCommand } from \"./d-dialog-command\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\nimport { DPickerDate, DPickerDateOptions } from \"./d-picker-date\";\n\nexport interface DDialogDateOptions<\n\tTHEME extends DThemeDialogDate = DThemeDialogDate\n> extends DDialogCommandOptions<THEME> {\n\tpicker?: DPickerDateOptions;\n}\n\nexport interface DThemeDialogDate extends DThemeDialogCommand {\n\n}\n\nexport class DDialogDate<\n\tTHEME extends DThemeDialogDate = DThemeDialogDate,\n\tOPTIONS extends DDialogDateOptions<THEME> = DDialogDateOptions<THEME>\n> extends DDialogCommand<THEME, OPTIONS> {\n\tprotected _picker!: DPickerDate;\n\n\tprotected onInit( layout: DLayoutVertical, options?: OPTIONS ) {\n\t\tsuper.onInit( layout, options );\n\n\t\tconst picker = new DPickerDate( options && options.picker );\n\t\tthis._picker = picker;\n\t\tlayout.addChild( picker );\n\t}\n\n\tget current(): Date {\n\t\treturn this._picker.current;\n\t}\n\n\tset current( dateCurrent: Date ) {\n\t\tthis._picker.current = dateCurrent;\n\t}\n\n\tget new(): Date {\n\t\treturn this._picker.new;\n\t}\n\n\tset new( dateNew: Date ) {\n\t\tthis._picker.new = dateNew;\n\t}\n\n\tget page(): Date {\n\t\treturn this._picker.new;\n\t}\n\n\tset page( datePage: Date ) {\n\t\tthis._picker.page = datePage;\n\t}\n\n\tget picker(): DPickerDate {\n\t\treturn this._picker;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogDate\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogDate } from \"./d-dialog-date\";\n\nexport class DDialogDates {\n\tprotected static INSTANCE?: DDialogDate;\n\tstatic getInstance(): DDialogDate {\n\t\tif( DDialogDates.INSTANCE == null ) {\n\t\t\tDDialogDates.INSTANCE = new DDialogDate();\n\t\t}\n\t\treturn DDialogDates.INSTANCE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DDialogDate, DDialogDateOptions } from \"./d-dialog-date\";\nimport { DDialogDates } from \"./d-dialog-dates\";\n\nexport interface DButtonDateOptions<\n\tTHEME extends DThemeButtonDate = DThemeButtonDate\n> extends DButtonOptions<Date, THEME> {\n\tdialog?: DDialogDateOptions;\n}\n\nexport interface DThemeButtonDate extends DThemeButton {\n\tgetTextFormatter(): ( value: Date, caller: DButtonDate ) => string;\n\tgetTextValue( state: DBaseState ): Date;\n\tnewTextValue(): Date;\n}\n\nexport class DButtonDate<\n\tTHEME extends DThemeButtonDate = DThemeButtonDate,\n\tOPTIONS extends DButtonDateOptions<THEME> = DButtonDateOptions<THEME>\n> extends DButton<Date, THEME, OPTIONS> {\n\tprotected _dialog?: DDialogDate;\n\tprotected _dialogOptions?: DDialogDateOptions;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis._dialogOptions = options && options.dialog;\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tconst currentTime = this._textValueComputed.getTime();\n\t\t\tconst dialog = this.dialog;\n\t\t\tdialog.current = new Date( currentTime );\n\t\t\tdialog.new = new Date( currentTime );\n\t\t\tdialog.page = new Date( currentTime );\n\t\t\tdialog.open().then((): void => {\n\t\t\t\tconst dateNew = dialog.new;\n\t\t\t\tconst dateCurrent = dialog.current;\n\t\t\t\tthis.emit( \"select\", dateNew, dateCurrent, this );\n\t\t\t\tthis.text = new Date( dateNew.getTime() );\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t});\n\t\t});\n\t}\n\n\tget dialog(): DDialogDate {\n\t\tlet dialog = this._dialog;\n\t\tif( dialog == null ) {\n\t\t\tconst dialogOptions = this._dialogOptions;\n\t\t\tif( dialogOptions != null ) {\n\t\t\t\tdialog = new DDialogDate( this._dialogOptions );\n\t\t\t} else {\n\t\t\t\tdialog = DDialogDates.getInstance();\n\t\t\t}\n\t\t\tthis._dialog = dialog;\n\t\t}\n\t\treturn dialog;\n\t}\n\n\tget value(): Date {\n\t\treturn this._textValueComputed;\n\t}\n\n\tset value( value: Date ) {\n\t\tif( this._textValueComputed.getTime() !== value.getTime() ) {\n\t\t\tthis.text = value;\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DButtonDate\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogCommand, DDialogCommandOptions, DThemeDialogCommand } from \"./d-dialog-command\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\nimport { DPickerDatetime, DPickerDatetimeOptions } from \"./d-picker-datetime\";\n\nexport interface DDialogDatetimeOptions<\n\tTHEME extends DThemeDialogDatetime = DThemeDialogDatetime\n> extends DDialogCommandOptions<THEME> {\n\tpicker?: DPickerDatetimeOptions;\n}\n\nexport interface DThemeDialogDatetime extends DThemeDialogCommand {\n\n}\n\nexport class DDialogDatetime<\n\tTHEME extends DThemeDialogDatetime = DThemeDialogDatetime,\n\tOPTIONS extends DDialogDatetimeOptions<THEME> = DDialogDatetimeOptions<THEME>\n> extends DDialogCommand<THEME, OPTIONS> {\n\tprotected _picker!: DPickerDatetime;\n\n\tprotected onInit( layout: DLayoutVertical, options?: OPTIONS ) {\n\t\tsuper.onInit( layout, options );\n\n\t\tconst picker = new DPickerDatetime( options && options.picker );\n\t\tthis._picker = picker;\n\t\tlayout.addChild( picker );\n\t}\n\n\tget current(): Date {\n\t\treturn this._picker.current;\n\t}\n\n\tset current( dateCurrent: Date ) {\n\t\tthis._picker.current = dateCurrent;\n\t}\n\n\tget new(): Date {\n\t\treturn this._picker.new;\n\t}\n\n\tset new( dateNew: Date ) {\n\t\tthis._picker.new = dateNew;\n\t}\n\n\tget page(): Date {\n\t\treturn this._picker.new;\n\t}\n\n\tset page( datePage: Date ) {\n\t\tthis._picker.page = datePage;\n\t}\n\n\tget picker(): DPickerDatetime {\n\t\treturn this._picker;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogDatetime\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogDatetime } from \"./d-dialog-datetime\";\n\nexport class DDialogDatetimes {\n\tprotected static INSTANCE?: DDialogDatetime;\n\tstatic getInstance(): DDialogDatetime {\n\t\tif( DDialogDatetimes.INSTANCE == null ) {\n\t\t\tDDialogDatetimes.INSTANCE = new DDialogDatetime();\n\t\t}\n\t\treturn DDialogDatetimes.INSTANCE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DDialogDatetime, DDialogDatetimeOptions } from \"./d-dialog-datetime\";\nimport { DDialogDatetimes } from \"./d-dialog-datetimes\";\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerDatetimes } from \"./d-picker-datetimes\";\n\nexport interface DButtonDatetimeOptions<\n\tTHEME extends DThemeButtonDatetime = DThemeButtonDatetime\n> extends DButtonOptions<Date, THEME> {\n\tdialog?: DDialogDatetimeOptions;\n}\n\nexport interface DThemeButtonDatetime extends DThemeButton {\n\tgetTextFormatter(): ( value: Date, caller: DButtonDatetime ) => string;\n\tgetTextValue( state: DBaseState ): Date;\n\tnewTextValue(): Date;\n}\n\nexport class DButtonDatetime<\n\tTHEME extends DThemeButtonDatetime = DThemeButtonDatetime,\n\tOPTIONS extends DButtonDatetimeOptions<THEME> = DButtonDatetimeOptions<THEME>\n> extends DButton<Date, THEME, OPTIONS> {\n\tprotected _dialog?: DDialogDatetime;\n\tprotected _dialogOptions?: DDialogDatetimeOptions;\n\tprotected _datetimeMask!: DPickerDatetimeMask;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tthis._dialogOptions = options && options.dialog;\n\t\tthis._datetimeMask = DPickerDatetimes.toMask( options && options.dialog && options.dialog.picker );\n\n\t\tsuper.init( options );\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tconst currentTime = this._textValueComputed.getTime();\n\t\t\tconst dialog = this.dialog;\n\t\t\tdialog.current = new Date( currentTime );\n\t\t\tdialog.new = new Date( currentTime );\n\t\t\tdialog.page = new Date( currentTime );\n\t\t\tdialog.open().then((): void => {\n\t\t\t\tconst dateNew = dialog.new;\n\t\t\t\tconst dateCurrent = dialog.current;\n\t\t\t\tthis.emit( \"select\", dateNew, dateCurrent, this );\n\t\t\t\tthis.text = new Date( dateNew.getTime() );\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t});\n\t\t});\n\t}\n\n\tgetDatetimeMask(): DPickerDatetimeMask {\n\t\treturn this._datetimeMask;\n\t}\n\n\tget dialog(): DDialogDatetime {\n\t\tlet dialog = this._dialog;\n\t\tif( dialog == null ) {\n\t\t\tconst dialogOptions = this._dialogOptions;\n\t\t\tif( dialogOptions != null ) {\n\t\t\t\tdialog = new DDialogDatetime( this._dialogOptions );\n\t\t\t} else {\n\t\t\t\tdialog = DDialogDatetimes.getInstance();\n\t\t\t}\n\t\t\tthis._dialog = dialog;\n\t\t}\n\t\treturn dialog;\n\t}\n\n\tget value(): Date {\n\t\treturn this._textValueComputed;\n\t}\n\n\tset value( value: Date ) {\n\t\tif( this._textValueComputed.getTime() !== value.getTime() ) {\n\t\t\tthis.text = value;\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DButtonDatetime\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { UtilFileAs, UtilFileOpener } from \"./util/util-file-opener\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport import DButtonFileAs = UtilFileAs;\n\nexport interface DButtonFileOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonFile = DThemeButtonFile\n> extends DButtonOptions<VALUE, THEME> {\n\tas?: (keyof typeof UtilFileAs) | UtilFileAs;\n\tchecker?: () => Promise<unknown> | boolean;\n}\n\nexport interface DThemeButtonFile extends DThemeButton {\n\n}\n\nexport class DButtonFile<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonFile = DThemeButtonFile,\n\tOPTIONS extends DButtonFileOptions<VALUE, THEME> = DButtonFileOptions<VALUE, THEME>\n> extends DButton<VALUE, THEME, OPTIONS> {\n\tprotected _checker!: (() => Promise<unknown> | boolean) | undefined;\n\tprotected _opener!: UtilFileOpener;\n\n\tprotected init( options?: OPTIONS ): void {\n\t\tsuper.init( options );\n\n\t\tthis._checker = ( options != null && options.checker != null ? options.checker : undefined );\n\t\tconst as: DButtonFileAs = ( options != null && options.as != null ?\n\t\t\t( utilIsString( options.as ) ? DButtonFileAs[ options.as ] : options.as ) :\n\t\t\tDButtonFileAs.TEXT\n\t\t);\n\t\tconst opener = new UtilFileOpener( as, this );\n\t\tthis._opener = opener;\n\t\tthis.on( \"active\", (): void => {\n\t\t\tconst result = this.onOpening();\n\t\t\tif( result === true ) {\n\t\t\t\topener.open();\n\t\t\t} else if( result === false ) {\n\t\t\t\t// DO NOTHING\n\t\t\t} else {\n\t\t\t\tresult.then((): void => {\n\t\t\t\t\topener.open();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tonOpening(): boolean | Promise<unknown> {\n\t\tconst checker = this._checker;\n\t\tif( checker != null ) {\n\t\t\treturn checker();\n\t\t}\n\t\treturn true;\n\t}\n\n\topen(): void {\n\t\tthis._opener.open();\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DButtonFile\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DButtonBase } from \"./d-button-base\";\n\ntype BUTTON = DButtonBase<any, any, any>;\n\nexport interface DButtonGroupOptions {\n\ton?: { [name: string]: Function };\n}\n\nexport class DButtonGroup extends utils.EventEmitter {\n\tprotected _buttons: BUTTON[];\n\tprotected _active: BUTTON | null;\n\tprotected _stateOn: DBaseState;\n\tprotected _stateOff: DBaseState;\n\tprotected _onActiveBound: ( button: BUTTON ) => void;\n\n\tconstructor( options?: DButtonGroupOptions ) {\n\t\tsuper();\n\n\t\tthis._buttons = [];\n\t\tthis._active = null;\n\t\tthis._stateOn = DBaseState.NONE;\n\t\tthis._stateOff = DBaseState.NONE;\n\t\tthis._onActiveBound = ( button: BUTTON ): void => {\n\t\t\tthis.onActive( button );\n\t\t};\n\n\t\t// Events\n\t\tif( options != null ) {\n\t\t\tconst on = options.on;\n\t\t\tif( on != null ) {\n\t\t\t\tfor( const name in on ) {\n\t\t\t\t\tthis.on( name, on[ name ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Done\n\t\tthis.emit( \"init\", this );\n\t}\n\n\tadd( button: BUTTON ): void {\n\t\tconst buttons = this._buttons;\n\t\tconst index = buttons.indexOf( button );\n\t\tif( index < 0 ) {\n\t\t\tthis._buttons.push( button );\n\t\t\tbutton.setState( this._stateOn, true );\n\t\t\tbutton.setState( this._stateOff, false );\n\t\t\tbutton.on( \"active\", this._onActiveBound );\n\t\t\tif( button.isActive() ) {\n\t\t\t\tthis.onActive( button );\n\t\t\t}\n\t\t}\n\t}\n\n\tget active() {\n\t\treturn this._active;\n\t}\n\n\tprotected onActive( active: BUTTON ): void {\n\t\tif( active.isToggle() ) {\n\t\t\tthis._active = active;\n\t\t\tconst buttons = this._buttons;\n\t\t\tfor( let i = 0, imax = buttons.length; i < imax; ++i ) {\n\t\t\t\tconst button = buttons[ i ];\n\t\t\t\tif( button !== active && button.isToggle() && button.isActive() ) {\n\t\t\t\t\tbutton.onClick();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tremove( button: BUTTON ): void {\n\t\tconst buttons = this._buttons;\n\t\tconst index = buttons.indexOf( button );\n\t\tif( 0 <= index ) {\n\t\t\tbuttons.splice( index, 1 );\n\t\t\tbutton.off( \"active\", this._onActiveBound );\n\t\t}\n\t}\n\n\tcontains( button: BUTTON ): boolean {\n\t\tconst buttons = this._buttons;\n\t\tconst index = buttons.indexOf( button );\n\t\treturn ( 0 <= index );\n\t}\n\n\tsetHovered( isHovered: boolean ) {\n\t\treturn this.setState( DBaseState.HOVERED, isHovered );\n\t}\n\n\tsetActive( isActive: boolean ) {\n\t\treturn this.setState( DBaseState.ACTIVE, isActive );\n\t}\n\n\tsetReadOnly( isReadOnly: boolean ) {\n\t\treturn this.setState( DBaseState.READ_ONLY, isReadOnly );\n\t}\n\n\tsetDisabled( isDisabled: boolean ) {\n\t\treturn this.setState( DBaseState.DISABLED, isDisabled );\n\t}\n\n\tsetDragging( isDragging: boolean ) {\n\t\treturn this.setState( DBaseState.DRAGGING, isDragging );\n\t}\n\n\tisHovered(): boolean {\n\t\treturn this.hasState( DBaseState.HOVERED );\n\t}\n\n\tisActive(): boolean {\n\t\treturn this.hasState( DBaseState.ACTIVE );\n\t}\n\n\tisReadOnly(): boolean {\n\t\treturn this.hasState( DBaseState.READ_ONLY );\n\t}\n\n\tisDisabled(): boolean {\n\t\treturn this.hasState( DBaseState.DISABLED );\n\t}\n\n\tisDragging(): boolean {\n\t\treturn this.hasState( DBaseState.DRAGGING );\n\t}\n\n\tisFocused(): boolean {\n\t\treturn this.hasState( DBaseState.FOCUSED );\n\t}\n\n\tisUnfocusable(): boolean {\n\t\treturn this.hasState( DBaseState.UNFOCUSABLE );\n\t}\n\n\tsetState( state: DBaseState, isOn: boolean ) {\n\t\tif( isOn ) {\n\t\t\tthis._stateOn |= state;\n\t\t\tthis._stateOff &= ~state;\n\t\t} else {\n\t\t\tthis._stateOff |= state;\n\t\t\tthis._stateOn &= ~state;\n\t\t}\n\n\t\tconst buttons = this._buttons;\n\t\tfor( let i = 0, imax = buttons.length; i < imax; ++i ) {\n\t\t\tconst button = buttons[ i ];\n\t\t\tbutton.setState( state, isOn );\n\t\t}\n\t\treturn this;\n\t}\n\n\thasState( state: DBaseState ): boolean {\n\t\tconst buttons = this._buttons;\n\t\tfor( let i = 0, imax = buttons.length; i < imax; ++i ) {\n\t\t\tif( buttons[ i ].hasState( state ) ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tclear(): void {\n\t\tthis._buttons.length = 0;\n\t}\n\n\tdestroy(): void {\n\t\tthis.clear();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonBase, DButtonBaseOptions, DThemeButtonBase } from \"./d-button-base\";\n\nexport interface DButtonRadioOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonRadio = DThemeButtonRadio\n> extends DButtonBaseOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeButtonRadio extends DThemeButtonBase {\n\n}\n\nexport class DButtonRadio<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonRadio = DThemeButtonRadio,\n\tOPTIONS extends DButtonRadioOptions<VALUE, THEME> = DButtonRadioOptions<VALUE, THEME>\n> extends DButtonBase<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DButtonRadio\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonRadio, DButtonRadioOptions, DThemeButtonRadio } from \"./d-button-radio\";\n\nexport interface DButtonRadioRightOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonRadioRight = DThemeButtonRadioRight\n> extends DButtonRadioOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeButtonRadioRight extends DThemeButtonRadio {\n\n}\n\nexport class DButtonRadioRight<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonRadioRight = DThemeButtonRadioRight,\n\tOPTIONS extends DButtonRadioRightOptions<VALUE, THEME> = DButtonRadioRightOptions<VALUE, THEME>\n> extends DButtonRadio<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DButtonRadioRight\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DControllers } from \"./d-controllers\";\n\nexport class DButtonRedo<\n\tVALUE = unknown,\n\tTHEME extends DThemeButton = DThemeButton,\n\tOPTIONS extends DButtonOptions<VALUE, THEME> = DButtonOptions<VALUE, THEME>\n> extends DButton<VALUE, THEME, OPTIONS> {\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\n\t\tconst commandController = DControllers.getCommandController();\n\t\tthis.setState( DBaseState.DISABLED, ! commandController.isRedoable() );\n\t\tcommandController.on( \"change\", () => {\n\t\t\tthis.setState( DBaseState.DISABLED, ! commandController.isRedoable() );\n\t\t});\n\n\t\tthis.on( \"active\", () => {\n\t\t\tcommandController.redo();\n\t\t});\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton } from \"./d-button\";\n\nexport class DButtonSecondary extends DButton {\n\tprotected getType(): string {\n\t\treturn \"DButtonSecondary\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogCommand, DDialogCommandOptions, DThemeDialogCommand } from \"./d-dialog-command\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\nimport { DPickerTime, DPickerTimeOptions } from \"./d-picker-time\";\n\nexport interface DDialogTimeOptions<\n\tTHEME extends DThemeDialogTime = DThemeDialogTime\n> extends DDialogCommandOptions<THEME> {\n\tpicker?: DPickerTimeOptions;\n}\n\nexport interface DThemeDialogTime extends DThemeDialogCommand {\n\n}\n\nexport class DDialogTime<\n\tTHEME extends DThemeDialogTime = DThemeDialogTime,\n\tOPTIONS extends DDialogTimeOptions<THEME> = DDialogTimeOptions<THEME>\n> extends DDialogCommand<THEME, OPTIONS> {\n\tprotected _picker!: DPickerTime;\n\n\tprotected onInit( layout: DLayoutVertical, options?: OPTIONS ) {\n\t\tsuper.onInit( layout, options );\n\n\t\tconst picker = new DPickerTime( options && options.picker );\n\t\tthis._picker = picker;\n\t\tlayout.addChild( picker );\n\t}\n\n\tget current(): Date {\n\t\treturn this._picker.current;\n\t}\n\n\tset current( dateCurrent: Date ) {\n\t\tthis._picker.current = dateCurrent;\n\t}\n\n\tget new(): Date {\n\t\treturn this._picker.new;\n\t}\n\n\tset new( dateNew: Date ) {\n\t\tthis._picker.new = dateNew;\n\t}\n\n\tget picker(): DPickerTime {\n\t\treturn this._picker;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogTime\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogTime } from \"./d-dialog-time\";\n\nexport class DDialogTimes {\n\tprotected static INSTANCE?: DDialogTime;\n\tstatic getInstance(): DDialogTime {\n\t\tif( DDialogTimes.INSTANCE == null ) {\n\t\t\tDDialogTimes.INSTANCE = new DDialogTime();\n\t\t}\n\t\treturn DDialogTimes.INSTANCE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DDialogTime, DDialogTimeOptions } from \"./d-dialog-time\";\nimport { DDialogTimes } from \"./d-dialog-times\";\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerTimes } from \"./d-picker-times\";\n\nexport interface DButtonTimeOptions<\n\tTHEME extends DThemeButtonTime = DThemeButtonTime\n> extends DButtonOptions<Date, THEME> {\n\tdialog?: DDialogTimeOptions;\n}\n\nexport interface DThemeButtonTime extends DThemeButton {\n\tgetTextFormatter(): ( value: Date, caller: DButtonTime ) => string;\n\tgetTextValue( state: DBaseState ): Date;\n\tnewTextValue(): Date;\n}\n\nexport class DButtonTime<\n\tTHEME extends DThemeButtonTime = DThemeButtonTime,\n\tOPTIONS extends DButtonTimeOptions<THEME> = DButtonTimeOptions<THEME>\n> extends DButton<Date, THEME, OPTIONS> {\n\tprotected _dialog?: DDialogTime;\n\tprotected _dialogOptions?: DDialogTimeOptions;\n\tprotected _datetimeMask!: DPickerDatetimeMask;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tthis._dialogOptions = options && options.dialog;\n\t\tthis._datetimeMask = DPickerTimes.toMask( options && options.dialog && options.dialog.picker );\n\n\t\tsuper.init( options );\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tconst currentTime = this._textValueComputed.getTime();\n\t\t\tconst dialog = this.dialog;\n\t\t\tdialog.current = new Date( currentTime );\n\t\t\tdialog.new = new Date( currentTime );\n\t\t\tdialog.open().then((): void => {\n\t\t\t\tconst dateNew = dialog.new;\n\t\t\t\tconst dateCurrent = dialog.current;\n\t\t\t\tthis.emit( \"select\", dateNew, dateCurrent, this );\n\t\t\t\tthis.text = new Date( dateNew.getTime() );\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t});\n\t\t});\n\t}\n\n\tgetDatetimeMask(): DPickerDatetimeMask {\n\t\treturn this._datetimeMask;\n\t}\n\n\tget dialog(): DDialogTime {\n\t\tlet dialog = this._dialog;\n\t\tif( dialog == null ) {\n\t\t\tconst dialogOptions = this._dialogOptions;\n\t\t\tif( dialogOptions != null ) {\n\t\t\t\tdialog = new DDialogTime( this._dialogOptions );\n\t\t\t} else {\n\t\t\t\tdialog = DDialogTimes.getInstance();\n\t\t\t}\n\t\t\tthis._dialog = dialog;\n\t\t}\n\t\treturn dialog;\n\t}\n\n\tget value(): Date {\n\t\treturn this._textValueComputed;\n\t}\n\n\tset value( value: Date ) {\n\t\tif( this._textValueComputed.getTime() !== value.getTime() ) {\n\t\t\tthis.text = value;\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DButtonTime\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DControllers } from \"./d-controllers\";\n\nexport class DButtonUndo<\n\tVALUE = unknown,\n\tTHEME extends DThemeButton = DThemeButton,\n\tOPTIONS extends DButtonOptions<VALUE, THEME> = DButtonOptions<VALUE, THEME>\n> extends DButton<VALUE, THEME, OPTIONS> {\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\n\t\tconst commandController = DControllers.getCommandController();\n\t\tthis.setState( DBaseState.DISABLED, ! commandController.isUndoable() );\n\t\tcommandController.on( \"change\", () => {\n\t\t\tthis.setState( DBaseState.DISABLED, ! commandController.isUndoable() );\n\t\t});\n\n\t\tthis.on( \"active\", () => {\n\t\t\tcommandController.undo();\n\t\t});\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Graphics, Renderer } from \"pixi.js\";\nimport { DBase, DReflowable } from \"./d-base\";\nimport { DCornerMask } from \"./d-corner\";\n\nexport class DBaseOverflowMask extends Graphics implements DReflowable {\n\tconstructor( parent: DBase ) {\n\t\tsuper();\n\t\t(this as any).parent = parent;\n\t}\n\n\trender( renderer: Renderer ): void {\n\t\tthis.updateTransform();\n\t\tsuper.render( renderer );\n\t}\n\n\tonReflow( base: DBase, width: number, height: number): void {\n\t\tconst x = 0;\n\t\tconst y = 0;\n\t\tconst corner = base.corner;\n\t\tconst cornerRadius = Math.max( 0, corner.getRadius() - 0.5 );\n\t\tconst cornerMask = corner.getMask();\n\t\tconst tl = ( cornerMask & DCornerMask.TOP_LEFT ? 0 : cornerRadius );\n\t\tconst tr = ( cornerMask & DCornerMask.TOP_RIGHT ? 0 : cornerRadius );\n\t\tconst bl = ( cornerMask & DCornerMask.BOTTOM_LEFT ? 0 : cornerRadius );\n\t\tconst br = ( cornerMask & DCornerMask.BOTTOM_RIGHT ? 0 : cornerRadius );\n\t\tthis.clear();\n\t\tthis.beginFill( 0xFFFFFF, 1 );\n\t\tthis.lineStyle( 0, 0, 0, 0, false );\n\t\tif( tl <= 0 && tr <= 0 && bl <= 0 && br <= 0 ) {\n\t\t\tthis.moveTo( x, y );\n\t\t\tthis.lineTo( x + width, y );\n\t\t\tthis.lineTo( x + width, y + height );\n\t\t\tthis.lineTo( x, y + height );\n\t\t\tthis.lineTo( x, y );\n\t\t} else {\n\t\t\tthis.moveTo( x + tl, y );\n\t\t\tif( 0 < tr ) {\n\t\t\t\tthis.arcTo( x + width, y, x + width, y + height, tr );\n\t\t\t} else {\n\t\t\t\tthis.lineTo( x + width, y );\n\t\t\t}\n\t\t\tif( 0 < br ) {\n\t\t\t\tthis.arcTo( x + width, y + height, x, y + height, br );\n\t\t\t} else {\n\t\t\t\tthis.lineTo( x + width, y + height );\n\t\t\t}\n\t\t\tif( 0 < bl ) {\n\t\t\t\tthis.arcTo( x, y + height, x, y, bl );\n\t\t\t} else {\n\t\t\t\tthis.lineTo( x, y + height );\n\t\t\t}\n\t\t\tif( 0 < tl ) {\n\t\t\t\tthis.arcTo( x, y, x + width, y, tl );\n\t\t\t} else {\n\t\t\t\tthis.lineTo( x, y );\n\t\t\t}\n\t\t}\n\t\tthis.endFill();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"./d-base\";\nimport { DCanvas } from \"./d-canvas\";\nimport { DCanvasContainerOptions, DThemeCanvasContainer } from \"./d-canvas-container\";\nimport { DCanvasContainerViewParent } from \"./d-canvas-container-view\";\nimport { DCanvasContainerViewStopper } from \"./d-canvas-container-view-stopper\";\nimport { DDragMode } from \"./d-drag-mode\";\nimport { DMouseModifier } from \"./d-mouse-modifier\";\nimport { UtilDrag } from \"./util/util-drag\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport class DCanvasContainerViewDrag<\n\tCANVAS extends DBase = DCanvas,\n\tTHEME extends DThemeCanvasContainer = DThemeCanvasContainer,\n\tOPTIONS extends DCanvasContainerOptions<CANVAS, THEME> = DCanvasContainerOptions<CANVAS, THEME>\n> {\n\tprotected _parent: DCanvasContainerViewParent<CANVAS>;\n\tprotected _stopper: DCanvasContainerViewStopper;\n\tprotected _dragUtil?: UtilDrag;\n\n\tconstructor(\n\t\tparent: DCanvasContainerViewParent<CANVAS>,\n\t\tstopper: DCanvasContainerViewStopper,\n\t\ttheme: THEME,\n\t\toptions: OPTIONS | undefined\n\t) {\n\t\tthis._parent = parent;\n\t\tthis._stopper = stopper;\n\n\t\tconst drag = options && options.drag;\n\t\tconst mode = ( drag && drag.mode != null ?\n\t\t\t( utilIsString( drag.mode ) ? DDragMode[ drag.mode ] : drag.mode ) :\n\t\t\ttheme.getDragMode()\n\t\t);\n\t\tconst modifier = ( drag && drag.modifier != null ?\n\t\t\t( utilIsString( drag.modifier ) ? DMouseModifier[ drag.modifier ] : drag.modifier ) :\n\t\t\ttheme.getDragModifier()\n\t\t);\n\t\tconst duration = ( drag && drag.duration != null ?\n\t\t\tdrag.duration : {\n\t\t\t\tposition: theme.getDragDurationPosition(),\n\t\t\t\tscale: theme.getDragDurationScale()\n\t\t\t}\n\t\t);\n\t\tif( mode === DDragMode.ON || mode === DDragMode.TOUCH ) {\n\t\t\tthis._dragUtil = new UtilDrag({\n\t\t\t\ttarget: parent,\n\t\t\t\ttouch: mode === DDragMode.TOUCH,\n\t\t\t\tmodifier,\n\t\t\t\tchecker: drag && drag.checker,\n\t\t\t\teasing: {\n\t\t\t\t\tduration\n\t\t\t\t},\n\t\t\t\ton: {\n\t\t\t\t\tstart: (): void => {\n\t\t\t\t\t\tthis._stopper.stop();\n\t\t\t\t\t},\n\t\t\t\t\tmove: ( dx: number, dy: number, x: number, y: number, ds: number ): void => {\n\t\t\t\t\t\tconst canvas = parent.canvas;\n\t\t\t\t\t\tif( canvas != null ) {\n\t\t\t\t\t\t\t// Scale\n\t\t\t\t\t\t\tconst oldScale = canvas.scale.y;\n\t\t\t\t\t\t\tconst newScale = stopper.toNormalizedScale( oldScale * ds );\n\t\t\t\t\t\t\tconst scaleRatio = newScale / oldScale;\n\n\t\t\t\t\t\t\t// Position\n\t\t\t\t\t\t\tconst cx = x - dx;\n\t\t\t\t\t\t\tconst cy = y - dy;\n\t\t\t\t\t\t\tconst position = canvas.position;\n\t\t\t\t\t\t\tconst newX = (position.x - cx) * scaleRatio + x;\n\t\t\t\t\t\t\tconst newY = (position.y - cy) * scaleRatio + y;\n\n\t\t\t\t\t\t\t// Update\n\t\t\t\t\t\t\tcanvas.scale.set( newScale, newScale );\n\t\t\t\t\t\t\tcanvas.position.set( newX, newY );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstop(): void {\n\t\tconst dragUtil = this._dragUtil;\n\t\tif( dragUtil != null ) {\n\t\t\tdragUtil.stop();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAnimationBase } from \"./d-animation-base\";\nimport { DBase } from \"./d-base\";\nimport { DCanvas } from \"./d-canvas\";\nimport { DCanvasContainerViewParent } from \"./d-canvas-container-view\";\nimport { DCanvasContainerViewStopper } from \"./d-canvas-container-view-stopper\";\n\nexport class DCanvasContainerViewTransform<CANVAS extends DBase = DCanvas> {\n\tprotected _parent: DCanvasContainerViewParent<CANVAS>;\n\tprotected _newX: number;\n\tprotected _newY: number;\n\tprotected _newScale: number;\n\tprotected _oldX: number;\n\tprotected _oldY: number;\n\tprotected _oldScale: number;\n\tprotected _animation: DAnimationBase;\n\tprotected _stopper: DCanvasContainerViewStopper;\n\tprotected _duration: number;\n\n\tconstructor( parent: DCanvasContainerViewParent<CANVAS>, stopper: DCanvasContainerViewStopper, duration: number ) {\n\t\tthis._parent = parent;\n\t\tthis._newScale = 1;\n\t\tthis._newX =  0;\n\t\tthis._newY = 0;\n\t\tthis._oldScale = 1;\n\t\tthis._oldX = 0;\n\t\tthis._oldY = 0;\n\t\tthis._animation = new DAnimationBase({\n\t\t\tonTime: ( time: number ): void => {\n\t\t\t\tthis.onTime( time );\n\t\t\t},\n\t\t\tduration\n\t\t});\n\t\tthis._stopper = stopper;\n\t\tthis._duration = duration;\n\t}\n\n\tprotected onTime( time: number ): void {\n\t\tconst w0 = 1 - time;\n\t\tconst w1 = time;\n\n\t\tconst scale = this._oldScale * w0 + this._newScale * w1;\n\t\tconst x = this._oldX * w0 + this._newX * w1;\n\t\tconst y = this._oldY * w0 + this._newY * w1;\n\n\t\tconst canvas = this._parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\tcanvas.scale.set( scale, scale );\n\t\t\tcanvas.position.set( x, y );\n\t\t}\n\t}\n\n\tstart( canvas: CANVAS, newX: number, newY: number, newScale: number, duration?: number, stop?: boolean ): void {\n\t\tif( stop !== false ) {\n\t\t\tthis._stopper.stop();\n\t\t}\n\t\tif( duration == null ) {\n\t\t\tduration = this._duration;\n\t\t}\n\t\tif( duration <= 0 ) {\n\t\t\tcanvas.scale.set( newScale, newScale );\n\t\t\tcanvas.position.set( newX, newY );\n\t\t} else {\n\t\t\tconst position = canvas.position;\n\t\t\tconst scale = canvas.scale;\n\t\t\tthis._oldX = position.x;\n\t\t\tthis._oldY = position.y;\n\t\t\tthis._oldScale = scale.y;\n\n\t\t\tthis._newX = newX;\n\t\t\tthis._newY = newY;\n\t\t\tthis._newScale = newScale;\n\n\t\t\tthis._animation.duration = duration;\n\t\t\tthis._animation.start();\n\t\t}\n\t}\n\n\tstop(): void {\n\t\tthis._animation.stop();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Point } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\nimport { DCanvas } from \"./d-canvas\";\nimport { DCanvasContainerOptions, DThemeCanvasContainer } from \"./d-canvas-container\";\nimport { DCanvasContainerViewDrag } from \"./d-canvas-container-view-drag\";\nimport { DCanvasContainerViewTransform } from \"./d-canvas-container-view-transform\";\nimport { DMouseModifier } from \"./d-mouse-modifier\";\nimport { DMouseModifiers } from \"./d-mouse-modifiers\";\nimport { utilIsString } from \"./util/util-is-string\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\nimport { UtilWheelEventDeltas } from \"./util/util-wheel-event\";\n\nexport interface DCanvasContainerViewParent<CANVAS extends DBase = DCanvas> extends DBase {\n\tcanvas: CANVAS | null;\n}\n\nexport type DCanvasContainerViewChecker =\n\t( e: WheelEvent | MouseEvent | TouchEvent, modifier: DMouseModifier, target: DBase ) => boolean;\n\nexport class DCanvasContainerView<\n\tCANVAS extends DBase = DCanvas,\n\tTHEME extends DThemeCanvasContainer = DThemeCanvasContainer,\n\tOPTIONS extends DCanvasContainerOptions<CANVAS, THEME> = DCanvasContainerOptions<CANVAS, THEME>\n> {\n\tprotected _parent: DCanvasContainerViewParent<CANVAS>;\n\n\tprotected _zoomPoint: Point;\n\tprotected _zoomMin: number;\n\tprotected _zoomMax: number;\n\n\tprotected _isWheelZoomEnabled: boolean;\n\tprotected _wheelZoomSpeed: number;\n\tprotected _wheelZoomModifier: DMouseModifier;\n\tprotected _wheelZoomChecker: DCanvasContainerViewChecker;\n\n\tprotected _isDblClickZoomEnabled: boolean;\n\tprotected _dblClickZoomSpeed: number;\n\tprotected _dblClickZoomModifier: DMouseModifier;\n\tprotected _dblClickZoomChecker: DCanvasContainerViewChecker;\n\tprotected _dblclickZoomDuration: number;\n\n\tprotected _isWheelTranslationEnabled: boolean;\n\tprotected _wheelTranslationSpeed: number;\n\tprotected _wheelTranslationModifier: DMouseModifier;\n\tprotected _wheelTranslationChecker: DCanvasContainerViewChecker;\n\n\tprotected _transform: DCanvasContainerViewTransform<CANVAS>;\n\tprotected _drag: DCanvasContainerViewDrag<CANVAS, THEME, OPTIONS>;\n\n\tconstructor( parent: DCanvasContainerViewParent<CANVAS>, theme: THEME, options: OPTIONS | undefined ) {\n\t\tthis._parent = parent;\n\n\t\t// Zoom\n\t\tconst zoom = options && options.zoom;\n\t\tthis._zoomPoint = new Point();\n\t\tthis._zoomMin = zoom && zoom.min != null ? zoom.min : theme.getZoomMin();\n\t\tthis._zoomMax = zoom && zoom.max != null ? zoom.max : theme.getZoomMax();\n\n\t\t// Zoom: Wheel\n\t\tconst wheelZoom = zoom && zoom.wheel;\n\t\tthis._isWheelZoomEnabled = ( wheelZoom && wheelZoom.enable != null ?\n\t\t\twheelZoom.enable : theme.isWheelZoomEnabled()\n\t\t);\n\t\tthis._wheelZoomSpeed = ( wheelZoom && wheelZoom.speed != null ?\n\t\t\twheelZoom.speed : theme.getWheelZoomSpeed()\n\t\t);\n\t\tthis._wheelZoomModifier = ( wheelZoom && wheelZoom.modifier != null ?\n\t\t\t( utilIsString( wheelZoom.modifier ) ?\n\t\t\t\tDMouseModifier[ wheelZoom.modifier ] : wheelZoom.modifier\n\t\t\t) :\n\t\t\ttheme.getWheelZoomModifier()\n\t\t);\n\t\tthis._wheelZoomChecker = (wheelZoom && wheelZoom.checker) || DMouseModifiers.match;\n\n\t\t// Zoom: Dbl click\n\t\tconst dblClickZoom = zoom && zoom.dblclick;\n\t\tthis._isDblClickZoomEnabled = ( dblClickZoom && dblClickZoom.enable != null ?\n\t\t\tdblClickZoom.enable : theme.isDblClickZoomEnabled()\n\t\t);\n\t\tthis._dblClickZoomSpeed = ( dblClickZoom && dblClickZoom.amount != null ?\n\t\t\tdblClickZoom.amount : theme.getDblClickZoomSpeed()\n\t\t);\n\t\tthis._dblClickZoomModifier = ( dblClickZoom && dblClickZoom.modifier != null ?\n\t\t\t( utilIsString( dblClickZoom.modifier ) ?\n\t\t\t\tDMouseModifier[ dblClickZoom.modifier ] : dblClickZoom.modifier\n\t\t\t) :\n\t\t\ttheme.getDblClickZoomModifier()\n\t\t);\n\t\tthis._dblClickZoomChecker = ( dblClickZoom && dblClickZoom.checker ) || DMouseModifiers.match;\n\t\tthis._dblclickZoomDuration = ( dblClickZoom && dblClickZoom.duration != null ?\n\t\t\tdblClickZoom.duration : theme.getDblClickZoomDuration()\n\t\t);\n\n\t\t// Translation: Wheel\n\t\tconst wheelTranslation = options && options.translation && options.translation.wheel;\n\t\tthis._isWheelTranslationEnabled = ( wheelTranslation && wheelTranslation.enable != null ?\n\t\t\twheelTranslation.enable : theme.isWheelTranslationEnabled()\n\t\t);\n\t\tthis._wheelTranslationSpeed = ( wheelTranslation && wheelTranslation.speed != null ?\n\t\t\twheelTranslation.speed : theme.getWheelTranslationSpeed()\n\t\t);\n\t\tthis._wheelTranslationModifier = ( wheelTranslation && wheelTranslation.modifier != null ?\n\t\t\t( utilIsString( wheelTranslation.modifier ) ?\n\t\t\t\tDMouseModifier[ wheelTranslation.modifier ] : wheelTranslation.modifier\n\t\t\t) :\n\t\t\ttheme.getWheelTranslationModifier()\n\t\t);\n\t\tthis._wheelTranslationChecker = ( wheelTranslation && wheelTranslation.checker ) || DMouseModifiers.match;\n\n\t\t// Drag\n\t\tthis._drag = new DCanvasContainerViewDrag<CANVAS, THEME, OPTIONS>( parent, this, theme, options );\n\n\t\t// Transform\n\t\tthis._transform = new DCanvasContainerViewTransform( parent, this, this._dblclickZoomDuration );\n\t}\n\n\tget drag(): DCanvasContainerViewDrag<CANVAS, THEME, OPTIONS> {\n\t\treturn this._drag;\n\t}\n\n\tstop(): void {\n\t\tthis._drag.stop();\n\t\tthis._transform.stop();\n\t}\n\n\treset( duration?: number, stop?: boolean ): void {\n\t\tconst parent = this._parent;\n\t\tconst canvas = parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst newCanvasX = (parent.width - canvas.width) * 0.5;\n\t\t\tconst newCanvasY = (parent.height - canvas.height) * 0.5;\n\t\t\tthis._transform.start( canvas, newCanvasX, newCanvasY, 1, duration, stop );\n\t\t}\n\t}\n\n\tfit( duration?: number, stop?: boolean ): void {\n\t\tconst parent = this._parent;\n\t\tconst canvas = parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst padding = parent.padding;\n\t\t\tconst width = parent.width;\n\t\t\tconst height = parent.height;\n\t\t\tconst canvasWidth = canvas.width;\n\t\t\tconst canvasHeight = canvas.height;\n\t\t\tconst canvasScaleX = (width - padding.getLeft() - padding.getRight()) / canvasWidth;\n\t\t\tconst canvasScaleY = (height - padding.getTop() - padding.getBottom()) / canvasHeight;\n\t\t\tconst newCanvasScale = this.toNormalizedScale( Math.min( canvasScaleX, canvasScaleY ) );\n\t\t\tconst newCanvasWidth = canvasWidth * newCanvasScale;\n\t\t\tconst newCanvasHeight = canvasHeight * newCanvasScale;\n\t\t\tconst newCanvasX = (width - newCanvasWidth) * 0.5;\n\t\t\tconst newCanvasY = (height - newCanvasHeight) * 0.5;\n\t\t\tthis._transform.start( canvas, newCanvasX, newCanvasY, newCanvasScale, duration, stop );\n\t\t}\n\t}\n\n\tzoomIn( duration?: number, stop?: boolean ): void {\n\t\tthis.zoom( this.scale * this._dblClickZoomSpeed, duration, stop );\n\t}\n\n\tzoomOut( duration?: number, stop?: boolean ): void {\n\t\tthis.zoom( this.scale / this._dblClickZoomSpeed, duration, stop );\n\t}\n\n\t/**\n\t *\n\t * @param x local x coordinate\n\t * @param y local y coordinate\n\t * @param scale scale\n\t */\n\tzoomAt( x: number, y: number, scale: number, duration?: number, stop?: boolean ): void {\n\t\tconst parent = this._parent;\n\t\tconst canvas = parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\t// Canvas Scale\n\t\t\tconst oldCanvasScale = canvas.scale.y;\n\t\t\tconst newCanvasScale = this.toNormalizedScale( scale );\n\t\t\tconst canvasScaleRatio = newCanvasScale / oldCanvasScale;\n\n\t\t\t// Canvas Position\n\t\t\tconst newCanvasX = (canvas.x - x) * canvasScaleRatio + x;\n\t\t\tconst newCanvasY = (canvas.y - y) * canvasScaleRatio + y;\n\n\t\t\t// Canvas\n\t\t\tthis._transform.start( canvas, newCanvasX, newCanvasY, newCanvasScale, duration, stop );\n\t\t}\n\t}\n\n\tzoomAtGlobal( x: number, y: number, scale: number, duration?: number, stop?: boolean ): void {\n\t\tconst local = this._zoomPoint;\n\t\tlocal.set( x, y );\n\t\tthis.toLocal( local, local );\n\t\tthis.zoomAt( local.x, local.y, scale, duration, stop );\n\t}\n\n\tzoom( scale: number, duration?: number, stop?: boolean ): void {\n\t\tconst parent = this._parent;\n\t\tthis.zoomAt( parent.width * 0.5, parent.height * 0.5, scale, duration, stop );\n\t}\n\n\tget scale(): number {\n\t\tconst parent = this._parent;\n\t\tconst canvas = parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\treturn canvas.scale.y;\n\t\t} else {\n\t\t\treturn 1;\n\t\t}\n\t}\n\n\tset scale( scale: number ) {\n\t\tconst parent = this._parent;\n\t\tconst canvas = parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst newScale = this.toNormalizedScale( scale );\n\t\t\tcanvas.scale.set( newScale, newScale );\n\t\t}\n\t}\n\n\tmoveTo( x: number, y: number, duration?: number, stop?: boolean ): void {\n\t\tconst parent = this._parent;\n\t\tconst canvas = parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\tthis._transform.start( canvas, x, y, canvas.scale.y, duration, stop );\n\t\t}\n\t}\n\n\tget position(): PIXI.IPoint {\n\t\tconst parent = this._parent;\n\t\tconst canvas = parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\treturn canvas.position;\n\t\t}\n\t\treturn new PIXI.Point( 0, 0 );\n\t}\n\n\tset position( position: PIXI.IPoint ) {\n\t\tconst parent = this._parent;\n\t\tconst canvas = parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\tcanvas.position.set( position.x, position.y );\n\t\t}\n\t}\n\n\ttransform( newX: number, newY: number, newScale: number, duration?: number, stop?: boolean ): void {\n\t\tconst canvas = this._parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\tthis._transform.start( canvas, newX, newY, newScale, duration, stop );\n\t\t}\n\t}\n\n\ttoLocal( global: PIXI.IPoint, local: PIXI.IPoint, skipUpdate?: boolean ): PIXI.IPoint {\n\t\treturn this._parent.toLocal( global, undefined, local, skipUpdate );\n\t}\n\n\ttoGlobal( local: PIXI.IPoint, global: PIXI.IPoint, skipUpdate?: boolean ): PIXI.IPoint {\n\t\treturn this._parent.toGlobal( local, global, skipUpdate );\n\t}\n\n\ttoNormalizedScale( scale: number ): number {\n\t\treturn Math.min( this._zoomMax, Math.max( this._zoomMin, scale ) );\n\t}\n\n\tonWheel( e: WheelEvent, deltas: UtilWheelEventDeltas, global: Point ): boolean {\n\t\tif( this._isWheelZoomEnabled &&\n\t\t\tthis._wheelZoomChecker( e, this._wheelZoomModifier, this._parent ) ) {\n\t\t\tif( deltas.deltaY !== 0 ) {\n\t\t\t\tconst speed = deltas.lowest * this._wheelZoomSpeed;\n\t\t\t\tconst scale = this.scale * ( 1 + deltas.deltaY * speed );\n\t\t\t\tthis.zoomAtGlobal( global.x, global.y, scale, 0 );\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tif( this._isWheelTranslationEnabled &&\n\t\t\tthis._wheelTranslationChecker( e, this._wheelTranslationModifier, this._parent ) ) {\n\t\t\tconst parent = this._parent;\n\t\t\tconst canvas = parent.canvas;\n\t\t\tif( canvas != null ) {\n\t\t\t\tthis.stop();\n\t\t\t\tconst speed = deltas.lowest * this._wheelTranslationSpeed;\n\t\t\t\tcanvas.position.set(\n\t\t\t\t\tcanvas.x - deltas.deltaX * speed,\n\t\t\t\t\tcanvas.y + deltas.deltaY * speed\n\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tonDblClick( e: MouseEvent | TouchEvent ): boolean {\n\t\tif( this._isDblClickZoomEnabled &&\n\t\t\tthis._dblClickZoomChecker( e, this._dblClickZoomModifier, this._parent ) ) {\n\t\t\tconst global = this._zoomPoint;\n\t\t\tUtilPointerEvent.toGlobal( e, global );\n\t\t\tconst scale = this.scale * this._dblClickZoomSpeed;\n\t\t\tthis.zoomAtGlobal( global.x, global.y, scale, this._dblclickZoomDuration );\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Point } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseOverflowMask } from \"./d-base-overflow-mask\";\nimport { DCanvas } from \"./d-canvas\";\nimport { DCanvasContainerView, DCanvasContainerViewChecker } from \"./d-canvas-container-view\";\nimport { DDragMode } from \"./d-drag-mode\";\nimport { DMouseModifier } from \"./d-mouse-modifier\";\nimport { UtilDragChecker } from \"./util/util-drag\";\nimport { UtilWheelEventDeltas } from \"./util/util-wheel-event\";\n\nexport interface DCanvasContainerOptions<\n\tCANVAS extends DBase = DCanvas,\n\tTHEME extends DThemeCanvasContainer = DThemeCanvasContainer\n> extends DBaseOptions<THEME> {\n\tmask?: boolean;\n\tcanvas?: CANVAS;\n\tdrag?: {\n\t\tmode?: (keyof typeof DDragMode) | DDragMode;\n\t\tmodifier?: (keyof typeof DMouseModifier) | DMouseModifier;\n\t\tchecker?: {\n\t\t\tstart?: UtilDragChecker,\n\t\t\tmove?: UtilDragChecker\n\t\t},\n\t\tduration?: number | {\n\t\t\tposition?: number,\n\t\t\tscale?: number\n\t\t};\n\t};\n\tzoom?: {\n\t\tmin?: number;\n\t\tmax?: number;\n\t\twheel?: {\n\t\t\tenable?: boolean;\n\t\t\tspeed?: number;\n\t\t\tmodifier?: (keyof typeof DMouseModifier) | DMouseModifier;\n\t\t\tchecker?: DCanvasContainerViewChecker;\n\t\t},\n\t\tdblclick?: {\n\t\t\tenable?: boolean;\n\t\t\tamount?: number;\n\t\t\tmodifier?: (keyof typeof DMouseModifier) | DMouseModifier;\n\t\t\tchecker?: DCanvasContainerViewChecker;\n\t\t\tduration?: number;\n\t\t}\n\t};\n\ttranslation?: {\n\t\twheel?: {\n\t\t\tenable?: boolean;\n\t\t\tspeed?: number;\n\t\t\tmodifier?: (keyof typeof DMouseModifier) | DMouseModifier;\n\t\t\tchecker?: DCanvasContainerViewChecker;\n\t\t}\n\t};\n}\n\nexport interface DThemeCanvasContainer extends DThemeBase {\n\tisOverflowMaskEnabled(): boolean;\n\tisWheelZoomEnabled(): boolean;\n\tisDblClickZoomEnabled(): boolean;\n\tisWheelTranslationEnabled(): boolean;\n\tgetWheelZoomSpeed(): number;\n\tgetWheelZoomModifier(): DMouseModifier;\n\tgetDblClickZoomSpeed(): number;\n\tgetDblClickZoomModifier(): DMouseModifier;\n\tgetDblClickZoomDuration(): number;\n\tgetWheelTranslationSpeed(): number;\n\tgetWheelTranslationModifier(): DMouseModifier;\n\tgetDragMode(): DDragMode;\n\tgetDragModifier(): DMouseModifier;\n\tgetDragDurationPosition(): number;\n\tgetDragDurationScale(): number;\n\tgetZoomMin(): number;\n\tgetZoomMax(): number;\n}\n\nconst isOverflowMaskEnabled = <\n\tCANVAS extends DBase,\n\tTHEME extends DThemeCanvasContainer\n>( theme: THEME, options?: DCanvasContainerOptions<CANVAS, THEME> ): boolean => {\n\tif( options && options.mask != null ) {\n\t\treturn options.mask;\n\t}\n\treturn theme.isOverflowMaskEnabled();\n};\n\nexport class DCanvasContainer<\n\tCANVAS extends DBase = DCanvas,\n\tTHEME extends DThemeCanvasContainer = DThemeCanvasContainer,\n\tOPTIONS extends DCanvasContainerOptions<CANVAS, THEME> = DCanvasContainerOptions<CANVAS, THEME>\n> extends DBase<THEME, OPTIONS> {\n\tprotected _canvas!: CANVAS | null;\n\tprotected _overflowMask!: DBaseOverflowMask | null;\n\tprotected _view!: DCanvasContainerView<CANVAS, THEME, OPTIONS>;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis._canvas = null;\n\t\tconst theme = this.theme;\n\t\tthis._view = new DCanvasContainerView( this, theme, options );\n\n\t\t// Canvas\n\t\tthis.canvas = ( options && options.canvas ? options.canvas : null );\n\n\t\t// Overflow mask\n\t\tif( isOverflowMaskEnabled( theme, options ) ) {\n\t\t\tthis.mask = this.getOrCreateOverflowMask();\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DCanvasContainer\";\n\t}\n\n\tonResize( newWidth: number, newHeight: number, oldWidth: number, oldHeight: number ): void {\n\t\tsuper.onResize( newWidth, newHeight, oldWidth, oldHeight );\n\t\tthis.updateContentSize( newWidth, newHeight, oldWidth, oldHeight );\n\t}\n\n\tget canvas(): CANVAS | null {\n\t\treturn this._canvas;\n\t}\n\n\tset canvas( canvas: CANVAS | null ) {\n\t\tconst previous = this._canvas;\n\t\tif( previous != null ) {\n\t\t\tthis._canvas = null;\n\t\t\tthis.removeChild( previous );\n\t\t\tthis.emit( \"unset\", previous, this );\n\t\t\tprevious.destroy();\n\t\t}\n\n\t\tthis._canvas = canvas;\n\t\tif( canvas != null ) {\n\t\t\tthis.addChild( canvas );\n\t\t\tthis.emit( \"set\", canvas, this );\n\t\t\tthis._view.reset( 0 );\n\t\t} else {\n\t\t\tDApplications.update();\n\t\t}\n\t}\n\n\tprotected getOrCreateOverflowMask(): DBaseOverflowMask {\n\t\tif( this._overflowMask == null ) {\n\t\t\tthis._overflowMask = new DBaseOverflowMask( this );\n\t\t\tthis.addReflowable( this._overflowMask );\n\t\t\tthis.toDirty();\n\t\t}\n\t\treturn this._overflowMask;\n\t}\n\n\tprotected updateContentSize( newWidth: number, newHeight: number, oldWidth: number, oldHeight: number ): void {\n\t\tconst canvas = this._canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst canvasX = canvas.x + (newWidth - oldWidth) * 0.5;\n\t\t\tconst canvasY = canvas.y + (newHeight - oldHeight) * 0.5;\n\t\t\tcanvas.position.set( canvasX, canvasY );\n\t\t}\n\t}\n\n\tget view(): DCanvasContainerView<CANVAS, THEME, OPTIONS> {\n\t\treturn this._view;\n\t}\n\n\tonWheel( e: WheelEvent, deltas: UtilWheelEventDeltas, global: Point ): boolean {\n\t\tconst vresult = this._view.onWheel( e, deltas, global );\n\t\tconst sresult = super.onWheel( e, deltas, global );\n\t\treturn vresult || sresult;\n\t}\n\n\tonDblClick( e: MouseEvent | TouchEvent ): boolean {\n\t\tconst vresult = this._view.onDblClick( e );\n\t\tconst sresult = super.onDblClick( e );\n\t\treturn vresult || sresult;\n\t}\n\n\tdestroy(): void {\n\t\t// Overflow mask\n\t\tconst overflowMask = this._overflowMask;\n\t\tif( overflowMask != null ) {\n\t\t\tthis._overflowMask = null;\n\t\t\toverflowMask.destroy();\n\t\t}\n\t\tthis.mask = null;\n\n\t\tsuper.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase,  DBaseOptions, DThemeBase } from \"./d-base\";\n\nexport interface DCanvasOptions<THEME extends DThemeCanvas = DThemeCanvas> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemeCanvas extends DThemeBase {\n\n}\n\nexport class DCanvas<\n\tTHEME extends DThemeCanvas = DThemeCanvas,\n\tOPTIONS extends DCanvasOptions<THEME> = DCanvasOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DCanvas\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartAxisOptions, DChartAxisPosition, DChartAxisTickPosition } from \"./d-chart-axis\";\nimport { EShapePointsStyle } from \"./shape/e-shape-points\";\nimport { EShapeStrokeLike } from \"./shape/e-shape-stroke\";\nimport { EShapeTextLike } from \"./shape/e-shape-text\";\nimport { EShapeTextAlignLike } from \"./shape/e-shape-text-align\";\nimport { EShapeTextAlignHorizontal } from \"./shape/e-shape-text-align-horizontal\";\nimport { EShapeTextAlignVertical } from \"./shape/e-shape-text-align-vertical\";\nimport { EShapeTextDirection } from \"./shape/e-shape-text-direction\";\nimport { EShapeTextOffsetLike } from \"./shape/e-shape-text-offset\";\nimport { EShapeTextOutlineLike } from \"./shape/e-shape-text-outline\";\nimport { EShapeBar } from \"./shape/variant/e-shape-bar\";\nimport { EShapeBarPosition } from \"./shape/variant/e-shape-bar-position\";\nimport { DeepPartial } from \"./util/deep-partial\";\nimport { NumberFormatter } from \"./util/number-formatter\";\nimport { NumberFormatters } from \"./util/number-formatters\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport interface DThemeChartAxisBase {\n\tgetPosition(): DChartAxisPosition;\n\tgetPadding(): number;\n\n\tgetLabelAlignHorizontal( position: DChartAxisPosition ): EShapeTextAlignHorizontal;\n\tgetLabelAlignVertical( position: DChartAxisPosition ): EShapeTextAlignVertical;\n\tgetLabelPaddingHorizontal(): number;\n\tgetLabelPaddingVertical(): number;\n\tgetLabelDirection(): EShapeTextDirection;\n\n\tgetTickEnable(): boolean;\n\n\tgetMajorTickCount(): number;\n\tgetMajorTickSize(): number;\n\tgetMajorTickPosition(): DChartAxisTickPosition;\n\tgetMajorTickStyle(): EShapePointsStyle;\n\tgetMajorTickTextAlignHorizontal( position: DChartAxisPosition ): EShapeTextAlignHorizontal;\n\tgetMajorTickTextAlignVertical( position: DChartAxisPosition ): EShapeTextAlignVertical;\n\tgetMajorTickTextDirection(): EShapeTextDirection;\n\tgetMajorTickTextFormat(): string;\n\tgetMajorTickTextPaddingHorizontal(): number;\n\tgetMajorTickTextPaddingVertical(): number;\n\n\tgetMinorTickCount(): number;\n\tgetMinorTickSize(): number;\n\tgetMinorTickPosition(): DChartAxisTickPosition;\n\tgetMinorTickStyle(): EShapePointsStyle;\n}\n\nexport interface DChartAxisBaseTickMajorOptions {\n\tcount?: number;\n\tsize?: number;\n\tposition?: DChartAxisTickPosition | keyof typeof DChartAxisTickPosition;\n\tstyle?: EShapePointsStyle | keyof typeof EShapePointsStyle;\n\tstroke?: Partial<EShapeStrokeLike>;\n\ttext?: DeepPartial<EShapeTextLike>;\n}\n\nexport interface DChartAxisBaseTickMinorOptions {\n\tcount?: number;\n\tsize?: number;\n\tposition?: DChartAxisTickPosition | keyof typeof DChartAxisTickPosition;\n\tstyle?: EShapePointsStyle | keyof typeof EShapePointsStyle;\n\tstroke?: Partial<EShapeStrokeLike>;\n}\n\nexport interface DChartAxisBaseTickContainerOptions {\n\tenable?: boolean;\n\tposition?: DChartAxisTickPosition | keyof typeof DChartAxisTickPosition;\n\tstyle?: EShapePointsStyle | keyof typeof EShapePointsStyle;\n\tstroke?: Partial<EShapeStrokeLike>;\n\tmajor?: DChartAxisBaseTickMajorOptions;\n\tminor?: DChartAxisBaseTickMinorOptions;\n}\n\nexport interface DChartAxisBaseOptions extends DChartAxisOptions {\n\ttick?: DChartAxisBaseTickContainerOptions;\n\tlabel?: DeepPartial<EShapeTextLike>;\n\ttheme?: DThemeChartAxisBase;\n\tcoordinate?: number;\n\tpadding?: number;\n}\n\nexport interface DChartAxisBaseTickMajor {\n\tcount: number;\n\tsize: number;\n\tposition: EShapeBarPosition;\n\tstyle: EShapePointsStyle;\n\tstroke?: Partial<EShapeStrokeLike>;\n\ttext?: DeepPartial<EShapeTextLike>;\n\tformatter: NumberFormatter;\n\tshapes?: EShapeBar[];\n}\n\nexport interface DChartAxisBaseTickMinor {\n\tcount: number;\n\tsize: number;\n\tposition: EShapeBarPosition;\n\tstyle: EShapePointsStyle;\n\tstroke?: Partial<EShapeStrokeLike>;\n\tshapes?: EShapeBar[];\n}\n\nexport interface DChartAxisBaseTickContainer {\n\tenable: boolean;\n\tmajor: DChartAxisBaseTickMajor;\n\tminor: DChartAxisBaseTickMinor;\n}\n\nexport class DChartAxisBaseOptionParser {\n\tprotected _coordinateIndex: number;\n\tprotected _position: DChartAxisPosition;\n\tprotected _tick: DChartAxisBaseTickContainer;\n\tprotected _label: DeepPartial<EShapeTextLike> | undefined;\n\tprotected _padding: number;\n\n\tconstructor( theme: DThemeChartAxisBase, options?: DChartAxisBaseOptions ) {\n\t\tthis._coordinateIndex = ( options && options.coordinate != null ? options.coordinate : 0 );\n\t\tthis._position = this.toPosition( theme, options );\n\t\tthis._tick = this.toTickContainer( theme, options );\n\t\tthis._label = this.toLabel( theme, options );\n\t\tthis._padding = ( options && options.padding != null ? options.padding : theme.getPadding() );\n\t}\n\n\tget coordinateIndex(): number {\n\t\treturn this._coordinateIndex;\n\t}\n\n\tget padding(): number {\n\t\treturn this._padding;\n\t}\n\n\tget position(): DChartAxisPosition {\n\t\treturn this._position;\n\t}\n\n\tget tick(): DChartAxisBaseTickContainer {\n\t\treturn this._tick;\n\t}\n\n\tget label(): DeepPartial<EShapeTextLike> | undefined {\n\t\treturn this._label;\n\t}\n\n\tprotected toPosition(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: DChartAxisBaseOptions\n\t): DChartAxisPosition {\n\t\tconst position = options && options.position;\n\t\tif( utilIsString( position ) ) {\n\t\t\treturn DChartAxisPosition[ position ];\n\t\t} else if( position != null ) {\n\t\t\treturn position;\n\t\t}\n\t\treturn theme.getPosition();\n\t}\n\n\tprotected toTickContainer(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: DChartAxisBaseOptions\n\t): DChartAxisBaseTickContainer {\n\t\tconst tick = options && options.tick;\n\t\treturn {\n\t\t\tenable: ( tick && tick.enable != null ? tick.enable : theme.getTickEnable() ),\n\t\t\tmajor: this.toTickMajor( theme, tick ),\n\t\t\tminor: this.toMinorTick( theme, tick )\n\t\t};\n\t}\n\n\tprotected toTickMajor(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: DChartAxisBaseTickContainerOptions\n\t): DChartAxisBaseTickMajor {\n\t\tconst major: DChartAxisBaseTickMajorOptions | undefined = options && options.major;\n\t\tconst position = ( major && major.position != null ? major.position :\n\t\t\t( options && options.position != null ? options.position : theme.getMajorTickPosition() )\n\t\t);\n\t\tconst style = ( major && major.style != null ? major.style :\n\t\t\t( options && options.style != null ? options.style : theme.getMajorTickStyle() )\n\t\t);\n\t\treturn {\n\t\t\tcount: ( major && major.count != null ? major.count : theme.getMajorTickCount() ),\n\t\t\tsize: ( major && major.size != null ? major.size : theme.getMajorTickSize() ),\n\t\t\tposition: this.toTickPosition( position ),\n\t\t\tstyle: ( utilIsString( style ) ? EShapePointsStyle[ style ] : style ),\n\t\t\tstroke: this.toTickStroke( theme, major && major.stroke, options && options.stroke ),\n\t\t\ttext: this.toMajorTickText( theme, major && major.text ),\n\t\t\tformatter: this.toMajorTickFormatter( theme, major ),\n\t\t\tshapes: undefined\n\t\t};\n\t}\n\n\tprotected toTickPosition(\n\t\ttickPosition: DChartAxisTickPosition | keyof typeof DChartAxisTickPosition\n\t): EShapeBarPosition {\n\t\tconst position = this._position;\n\t\tif( tickPosition === DChartAxisTickPosition.OUTSIDE || tickPosition === \"OUTSIDE\" ) {\n\t\t\tswitch( position ) {\n\t\t\tcase DChartAxisPosition.TOP:\n\t\t\t\treturn EShapeBarPosition.BOTTOM;\n\t\t\tcase DChartAxisPosition.BOTTOM:\n\t\t\t\treturn EShapeBarPosition.TOP;\n\t\t\tcase DChartAxisPosition.LEFT:\n\t\t\t\treturn EShapeBarPosition.RIGHT;\n\t\t\tcase DChartAxisPosition.RIGHT:\n\t\t\t\treturn EShapeBarPosition.LEFT;\n\t\t\tdefault:\n\t\t\t\treturn EShapeBarPosition.TOP;\n\t\t\t}\n\t\t} else {\n\t\t\tswitch( position ) {\n\t\t\tcase DChartAxisPosition.TOP:\n\t\t\t\treturn EShapeBarPosition.TOP;\n\t\t\tcase DChartAxisPosition.BOTTOM:\n\t\t\t\treturn EShapeBarPosition.BOTTOM;\n\t\t\tcase DChartAxisPosition.LEFT:\n\t\t\t\treturn EShapeBarPosition.LEFT;\n\t\t\tcase DChartAxisPosition.RIGHT:\n\t\t\t\treturn EShapeBarPosition.RIGHT;\n\t\t\tdefault:\n\t\t\t\treturn EShapeBarPosition.TOP;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected toMinorTick(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: DChartAxisBaseTickContainerOptions\n\t): DChartAxisBaseTickMinor {\n\t\tconst minor: DChartAxisBaseTickMajorOptions | undefined = options && options.major;\n\t\tconst position = ( minor && minor.position != null ? minor.position :\n\t\t\t( options && options.position != null ? options.position : theme.getMinorTickPosition() )\n\t\t);\n\t\tconst style = ( minor && minor.style != null ? minor.style :\n\t\t\t( options && options.style != null ? options.style : theme.getMinorTickStyle() )\n\t\t);\n\t\treturn {\n\t\t\tcount: ( minor && minor.count != null ? minor.count : theme.getMinorTickCount() ),\n\t\t\tsize: ( minor && minor.size != null ? minor.size : theme.getMinorTickSize() ),\n\t\t\tposition: this.toTickPosition( position ),\n\t\t\tstyle: ( utilIsString( style ) ? EShapePointsStyle[ style ] : style ),\n\t\t\tstroke: this.toTickStroke( theme, minor && minor.stroke, options && options.stroke ),\n\t\t\tshapes: undefined\n\t\t};\n\t}\n\n\tprotected toTickStroke(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptionsA?: Partial<EShapeStrokeLike>,\n\t\toptionsB?: Partial<EShapeStrokeLike>\n\t): Partial<EShapeStrokeLike> | undefined {\n\t\tif( optionsA ) {\n\t\t\tif( optionsB ) {\n\t\t\t\treturn {\n\t\t\t\t\tenable: ( optionsA.enable != null ? optionsA.enable : optionsB.enable ),\n\t\t\t\t\tcolor: ( optionsA.color != null ? optionsA.color : optionsB.color ),\n\t\t\t\t\talpha: ( optionsA.alpha != null ? optionsA.alpha : optionsB.alpha ),\n\t\t\t\t\twidth: ( optionsA.width != null ? optionsA.width : optionsB.width ),\n\t\t\t\t\talign: ( optionsA.align != null ? optionsA.align : optionsB.align ),\n\t\t\t\t\tside: ( optionsA.side != null ? optionsA.side : optionsB.side )\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tenable: optionsA.enable,\n\t\t\t\t\tcolor: optionsA.color,\n\t\t\t\t\talpha: optionsA.alpha,\n\t\t\t\t\twidth: optionsA.width,\n\t\t\t\t\talign: optionsA.align,\n\t\t\t\t\tside: optionsA.side\n\t\t\t\t};\n\t\t\t}\n\t\t} else if( optionsB ) {\n\t\t\treturn {\n\t\t\t\tenable: optionsB.enable,\n\t\t\t\tcolor: optionsB.color,\n\t\t\t\talpha: optionsB.alpha,\n\t\t\t\twidth: optionsB.width,\n\t\t\t\talign: optionsB.align,\n\t\t\t\tside: optionsB.side\n\t\t\t};\n\t\t}\n\t}\n\n\tprotected toMajorTickFormatter(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: DChartAxisBaseTickMajorOptions\n\t): NumberFormatter {\n\t\tconst format = ( options && options.text && options.text.value );\n\t\treturn NumberFormatters.create( format != null ?\n\t\t\tformat : theme.getMajorTickTextFormat()\n\t\t);\n\t}\n\n\tprotected toMajorTickText(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: DeepPartial<EShapeTextLike>\n\t): DeepPartial<EShapeTextLike> | undefined {\n\t\toptions = options || {};\n\t\treturn {\n\t\t\tvalue: options.value,\n\t\t\tcolor: options.color,\n\t\t\talpha: options.alpha,\n\t\t\tfamily: options.family,\n\t\t\tsize: options.size,\n\t\t\tweight: options.weight,\n\t\t\talign: this.toMajorTickTextAlign( theme, options.align ),\n\t\t\toffset: this.toMajorTickTextOffset( theme, options.offset ),\n\t\t\tstyle: options.style,\n\t\t\toutline: this.toMajorTickTextOutline( theme, options.outline ),\n\t\t\tspacing: this.toMajorTickTextSpacing( theme, options.spacing ),\n\t\t\tdirection: this.toTickMajorTextDirection( theme, options.direction ),\n\t\t\tpadding: this.toMajorTickTextPadding( theme, options.padding ),\n\t\t\tclipping: options.clipping\n\t\t};\n\t}\n\n\tprotected toMajorTickTextOutline(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextOutlineLike>\n\t): Partial<EShapeTextOutlineLike> | undefined {\n\t\tif( options ) {\n\t\t\treturn {\n\t\t\t\tenable: options.enable,\n\t\t\t\tcolor: options.color,\n\t\t\t\talpha: options.alpha,\n\t\t\t\twidth: options.width\n\t\t\t};\n\t\t}\n\t}\n\n\tprotected toMajorTickTextAlign(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextAlignLike>\n\t): Partial<EShapeTextAlignLike> | undefined {\n\t\tconst position = this._position;\n\t\tif( options ) {\n\t\t\treturn {\n\t\t\t\thorizontal: ( options.horizontal != null ? options.horizontal : theme.getMajorTickTextAlignHorizontal( position ) ),\n\t\t\t\tvertical: ( options.vertical != null ? options.vertical : theme.getMajorTickTextAlignVertical( position ) )\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\thorizontal: theme.getMajorTickTextAlignHorizontal( position ),\n\t\t\tvertical: theme.getMajorTickTextAlignVertical( position )\n\t\t};\n\t}\n\n\tprotected toMajorTickTextOffset(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextOffsetLike>\n\t): Partial<EShapeTextOffsetLike> | undefined {\n\t\tif( options ) {\n\t\t\treturn {\n\t\t\t\thorizontal: options.horizontal,\n\t\t\t\tvertical: options.vertical\n\t\t\t};\n\t\t}\n\t}\n\n\tprotected toMajorTickTextSpacing(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextOffsetLike>\n\t): Partial<EShapeTextOffsetLike> | undefined {\n\t\tif( options ) {\n\t\t\treturn {\n\t\t\t\thorizontal: options.horizontal,\n\t\t\t\tvertical: options.vertical\n\t\t\t};\n\t\t}\n\t}\n\n\tprotected toMajorTickTextPadding(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextOffsetLike>\n\t): Partial<EShapeTextOffsetLike> {\n\t\treturn {\n\t\t\thorizontal: ( options && options.horizontal != null ?\n\t\t\t\toptions.horizontal : theme.getMajorTickTextPaddingHorizontal()\n\t\t\t),\n\t\t\tvertical: ( options && options.vertical != null ?\n\t\t\t\toptions.vertical : theme.getMajorTickTextPaddingVertical()\n\t\t\t)\n\t\t};\n\t}\n\n\tprotected toTickMajorTextDirection(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: EShapeTextDirection\n\t): EShapeTextDirection {\n\t\treturn ( options != null ? options : theme.getMajorTickTextDirection() );\n\t}\n\n\tprotected toLabel(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: DChartAxisBaseOptions\n\t): DeepPartial<EShapeTextLike> | undefined {\n\t\tconst label = options && options.label;\n\t\tif( label ) {\n\t\t\treturn {\n\t\t\t\tvalue: label.value,\n\t\t\t\tcolor: label.color,\n\t\t\t\talpha: label.alpha,\n\t\t\t\tfamily: label.family,\n\t\t\t\tsize: label.size,\n\t\t\t\tweight: label.weight,\n\t\t\t\talign: this.toLabelAlign( theme, label.align ),\n\t\t\t\toffset: this.toLabelOffset( theme, label.offset ),\n\t\t\t\tstyle: label.style,\n\t\t\t\toutline: this.toLabelOutline( theme, label.outline ),\n\t\t\t\tspacing: this.toLabelSpacing( theme, label.spacing ),\n\t\t\t\tdirection: this.toLabelDirection( theme, label.direction ),\n\t\t\t\tpadding: this.toLabelPadding( theme, label.padding ),\n\t\t\t\tclipping: label.clipping\n\t\t\t};\n\t\t}\n\t}\n\n\tprotected toLabelOutline(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextOutlineLike>\n\t): Partial<EShapeTextOutlineLike> | undefined {\n\t\tif( options ) {\n\t\t\treturn {\n\t\t\t\tenable: options.enable,\n\t\t\t\tcolor: options.color,\n\t\t\t\talpha: options.alpha,\n\t\t\t\twidth: options.width\n\t\t\t};\n\t\t}\n\t}\n\n\tprotected toLabelAlign(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextAlignLike>\n\t): Partial<EShapeTextAlignLike> | undefined {\n\t\tconst position = this._position;\n\t\tif( options ) {\n\t\t\treturn {\n\t\t\t\thorizontal: ( options.horizontal != null ?\n\t\t\t\t\toptions.horizontal : theme.getLabelAlignHorizontal( position )\n\t\t\t\t),\n\t\t\t\tvertical: ( options.vertical != null ?\n\t\t\t\t\toptions.vertical : theme.getLabelAlignVertical( position )\n\t\t\t\t)\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\thorizontal: theme.getLabelAlignHorizontal( position ),\n\t\t\tvertical: theme.getLabelAlignVertical( position )\n\t\t};\n\t}\n\n\tprotected toLabelOffset(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextOffsetLike>\n\t): Partial<EShapeTextOffsetLike> | undefined {\n\t\tif( options ) {\n\t\t\treturn {\n\t\t\t\thorizontal: options.horizontal,\n\t\t\t\tvertical: options.vertical\n\t\t\t};\n\t\t}\n\t}\n\n\tprotected toLabelSpacing(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextOffsetLike>\n\t): Partial<EShapeTextOffsetLike> | undefined {\n\t\tif( options ) {\n\t\t\treturn {\n\t\t\t\thorizontal: options.horizontal,\n\t\t\t\tvertical: options.vertical\n\t\t\t};\n\t\t}\n\t}\n\n\tprotected toLabelPadding(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextOffsetLike>\n\t): Partial<EShapeTextOffsetLike> {\n\t\treturn {\n\t\t\thorizontal: ( options && options.horizontal != null ?\n\t\t\t\toptions.horizontal : theme.getLabelPaddingHorizontal()\n\t\t\t),\n\t\t\tvertical: ( options && options.vertical != null ?\n\t\t\t\toptions.vertical : theme.getLabelPaddingVertical()\n\t\t\t)\n\t\t};\n\t}\n\n\tprotected toLabelDirection(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: EShapeTextDirection\n\t): EShapeTextDirection {\n\t\treturn ( options != null ? options : theme.getLabelDirection() );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartAxis, DChartAxisPosition } from \"./d-chart-axis\";\nimport {\n\tDChartAxisBaseOptionParser, DChartAxisBaseOptions, DChartAxisBaseTickContainer, DThemeChartAxisBase\n} from \"./d-chart-axis-base-options\";\nimport { DChartAxisContainer } from \"./d-chart-axis-container\";\nimport { DChartCoordinate } from \"./d-chart-coordinate\";\nimport { EShapeDefaults } from \"./shape/e-shape-defaults\";\nimport { EShapePointsStyle } from \"./shape/e-shape-points\";\nimport { EShapeTextLike } from \"./shape/e-shape-text\";\nimport { EShapeBar } from \"./shape/variant/e-shape-bar\";\nimport { EShapeBarPosition } from \"./shape/variant/e-shape-bar-position\";\nimport { DThemes } from \"./theme/d-themes\";\nimport { DeepPartial } from \"./util/deep-partial\";\nimport { utilIsNaN } from \"./util/util-is-nan\";\n\nexport class DChartAxisBase implements DChartAxis {\n\tprotected _coordinateIndex: number;\n\tprotected _padding: number;\n\tprotected _position: DChartAxisPosition;\n\tprotected _container?: DChartAxisContainer;\n\tprotected _bar?: EShapeBar;\n\tprotected _index: number;\n\tprotected _tick: DChartAxisBaseTickContainer;\n\tprotected _majorTicks: Float64Array;\n\tprotected _minorTicks: Float64Array;\n\tprotected _label?: DeepPartial<EShapeTextLike>;\n\tprotected _theme: DThemeChartAxisBase;\n\n\tconstructor( options?: DChartAxisBaseOptions ) {\n\t\tconst theme = ( options && options.theme ) || this.getThemeDefault();\n\t\tthis._theme = theme;\n\t\tthis._index = 0;\n\n\t\tconst parser = new DChartAxisBaseOptionParser( theme, options );\n\t\tthis._coordinateIndex = parser.coordinateIndex;\n\t\tthis._padding = parser.padding;\n\t\tthis._position = parser.position;\n\t\tconst tick = parser.tick;\n\t\tthis._tick = tick;\n\t\tthis._label = parser.label;\n\t\tthis._majorTicks = new Float64Array( tick.major.count * 3 );\n\t\tthis._minorTicks = new Float64Array( (tick.major.count + 1) * tick.minor.count * 3 );\n\t}\n\n\tget position(): DChartAxisPosition {\n\t\treturn this._position;\n\t}\n\n\tprotected updateBar(): void {\n\t\tconst position = this._position;\n\t\tconst container = this._container;\n\t\tconst bar = this._bar;\n\t\tif( container && bar ) {\n\t\t\tconst plotAreaSize = container.plotArea.size;\n\t\t\tconst plotAreaSizeX = plotAreaSize.x;\n\t\t\tconst plotAreaSizeY = plotAreaSize.y;\n\t\t\tconst padding = this._padding * this._index;\n\t\t\tbar.disallowUploadedUpdate();\n\t\t\tswitch( position ) {\n\t\t\tcase DChartAxisPosition.TOP:\n\t\t\t\tbar.transform.position.set( plotAreaSizeX * 0.5, 0 - padding );\n\t\t\t\tbar.size.set( plotAreaSizeX, 0 );\n\t\t\t\tbreak;\n\t\t\tcase DChartAxisPosition.BOTTOM:\n\t\t\t\tbar.transform.position.set( plotAreaSizeX * 0.5, plotAreaSizeY + padding );\n\t\t\t\tbar.size.set( plotAreaSizeX, 0 );\n\t\t\t\tbreak;\n\t\t\tcase DChartAxisPosition.LEFT:\n\t\t\t\tbar.transform.position.set( 0 - padding, plotAreaSizeY * 0.5 );\n\t\t\t\tbar.size.set( 0, plotAreaSizeY );\n\t\t\t\tbreak;\n\t\t\tcase DChartAxisPosition.RIGHT:\n\t\t\t\tbar.transform.position.set( plotAreaSizeX + padding, plotAreaSizeY * 0.5 );\n\t\t\t\tbar.size.set( 0, plotAreaSizeY );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbar.allowUploadedUpdate();\n\t\t}\n\t}\n\n\tupdateTicksX(\n\t\tcoordinate: DChartCoordinate,\n\t\tmajorShapes: EShapeBar[], minorShapes: EShapeBar[],\n\t\tshapePositionY: number\n\t): void {\n\t\tconst tick = this._tick;\n\t\tconst majorCount = tick.major.count;\n\t\tconst majorFormatter = tick.major.formatter;\n\t\tconst minorCountPerMajor = tick.minor.count;\n\t\tconst minorCount = (majorCount + 1) * minorCountPerMajor;\n\t\tconst majorTicks = this._majorTicks;\n\t\tconst minorTicks = this._minorTicks;\n\t\tcoordinate.ticks( majorCount, minorCountPerMajor, minorCount, majorTicks, minorTicks );\n\n\t\tfor( let i = 0; i < majorCount; ++i ) {\n\t\t\tconst majorShape = majorShapes[ i ];\n\t\t\tconst imajorTick = i * 3;\n\t\t\tconst majorTickPosition = majorTicks[ imajorTick + 0 ];\n\t\t\tconst majorTickProjectedPosition = majorTicks[ imajorTick + 1 ];\n\t\t\tconst majorTickStep = majorTicks[ imajorTick + 2 ];\n\t\t\tif( ! utilIsNaN( majorTickPosition ) ) {\n\t\t\t\tmajorShape.disallowUploadedUpdate();\n\t\t\t\tmajorShape.visible = true;\n\t\t\t\tmajorShape.transform.position.set( majorTickProjectedPosition, shapePositionY );\n\t\t\t\tmajorShape.text.value = majorFormatter.format( majorTickPosition, majorTickStep );\n\t\t\t\tmajorShape.allowUploadedUpdate();\n\t\t\t} else {\n\t\t\t\tmajorShape.visible = false;\n\t\t\t}\n\t\t}\n\n\t\tfor( let i = 0; i < minorCount; ++i ) {\n\t\t\tconst minorShape = minorShapes[ i ];\n\t\t\tconst iminorTick = i * 3;\n\t\t\tconst minorTickPosition = minorTicks[ iminorTick + 0 ];\n\t\t\tconst minorTickProjectedPosition = minorTicks[ iminorTick + 1 ];\n\t\t\tif( ! utilIsNaN( minorTickPosition ) ) {\n\t\t\t\tminorShape.disallowUploadedUpdate();\n\t\t\t\tminorShape.visible = true;\n\t\t\t\tminorShape.transform.position.set( minorTickProjectedPosition, shapePositionY );\n\t\t\t\tminorShape.allowUploadedUpdate();\n\t\t\t} else {\n\t\t\t\tminorShape.visible = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateTicksY(\n\t\tcoordinate: DChartCoordinate,\n\t\tmajorShapes: EShapeBar[], minorShapes: EShapeBar[],\n\t\tshapePositionX: number\n\t): void {\n\t\tconst tick = this._tick;\n\t\tconst majorCount = tick.major.count;\n\t\tconst majorFormatter = tick.major.formatter;\n\t\tconst minorCountPerMajor = tick.minor.count;\n\t\tconst minorCount = (majorCount + 1) * minorCountPerMajor;\n\t\tconst majorTicks = this._majorTicks;\n\t\tconst minorTicks = this._minorTicks;\n\t\tcoordinate.ticks( majorCount, minorCountPerMajor, minorCount, majorTicks, minorTicks );\n\n\t\tfor( let i = 0; i < majorCount; ++i ) {\n\t\t\tconst majorShape = majorShapes[ i ];\n\t\t\tconst imajorTick = i * 3;\n\t\t\tconst majorTickPosition = majorTicks[ imajorTick + 0 ];\n\t\t\tconst majorTickProjectedPosition = majorTicks[ imajorTick + 1 ];\n\t\t\tconst majorTickStep = majorTicks[ imajorTick + 2 ];\n\t\t\tif( ! utilIsNaN( majorTickPosition ) ) {\n\t\t\t\tmajorShape.disallowUploadedUpdate();\n\t\t\t\tmajorShape.visible = true;\n\t\t\t\tmajorShape.transform.position.set( shapePositionX, majorTickProjectedPosition );\n\t\t\t\tmajorShape.text.value = majorFormatter.format( majorTickPosition, majorTickStep );\n\t\t\t\tmajorShape.allowUploadedUpdate();\n\t\t\t} else {\n\t\t\t\tmajorShape.visible = false;\n\t\t\t}\n\t\t}\n\n\t\tfor( let i = 0; i < minorCount; ++i ) {\n\t\t\tconst minorShape = minorShapes[ i ];\n\t\t\tconst iminorTick = i * 3;\n\t\t\tconst minorTickPosition = minorTicks[ iminorTick + 0 ];\n\t\t\tconst minorTickProjectedPosition = minorTicks[ iminorTick + 1 ];\n\t\t\tif( ! utilIsNaN( minorTickPosition ) ) {\n\t\t\t\tminorShape.disallowUploadedUpdate();\n\t\t\t\tminorShape.visible = true;\n\t\t\t\tminorShape.transform.position.set( shapePositionX, minorTickProjectedPosition );\n\t\t\t\tminorShape.allowUploadedUpdate();\n\t\t\t} else {\n\t\t\t\tminorShape.visible = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected updateTicks(): void {\n\t\tconst tick = this._tick;\n\t\tconst majorShapes = tick.major.shapes;\n\t\tconst minorShapes = tick.minor.shapes;\n\t\tconst container = this._container;\n\t\tif( majorShapes && minorShapes && container ) {\n\t\t\tconst plotArea = container.plotArea;\n\t\t\tconst coordinateIndex = this._coordinateIndex;\n\t\t\tlet coordinate: DChartCoordinate | null;\n\t\t\tconst padding = this._padding * this._index;\n\t\t\tswitch( this._position ) {\n\t\t\tcase DChartAxisPosition.TOP:\n\t\t\t\tcoordinate = plotArea.coordinate.x.get( coordinateIndex );\n\t\t\t\tif( coordinate ) {\n\t\t\t\t\tthis.updateTicksX(\n\t\t\t\t\t\tcoordinate,\n\t\t\t\t\t\tmajorShapes, minorShapes,\n\t\t\t\t\t\t0 - padding\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase DChartAxisPosition.BOTTOM:\n\t\t\t\tcoordinate = plotArea.coordinate.x.get( coordinateIndex );\n\t\t\t\tif( coordinate ) {\n\t\t\t\t\tthis.updateTicksX(\n\t\t\t\t\t\tcoordinate,\n\t\t\t\t\t\tmajorShapes, minorShapes,\n\t\t\t\t\t\tplotArea.size.y + padding\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase DChartAxisPosition.LEFT:\n\t\t\t\tcoordinate = plotArea.coordinate.y.get( coordinateIndex );\n\t\t\t\tif( coordinate ) {\n\t\t\t\t\tthis.updateTicksY(\n\t\t\t\t\t\tcoordinate,\n\t\t\t\t\t\tmajorShapes, minorShapes,\n\t\t\t\t\t\t0 - padding\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase DChartAxisPosition.RIGHT:\n\t\t\t\tcoordinate = plotArea.coordinate.y.get( coordinateIndex );\n\t\t\t\tif( coordinate ) {\n\t\t\t\t\tthis.updateTicksY(\n\t\t\t\t\t\tcoordinate,\n\t\t\t\t\t\tmajorShapes, minorShapes,\n\t\t\t\t\t\tplotArea.size.x + padding\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tbind( container: DChartAxisContainer, index: number ): void {\n\t\tthis._container = container;\n\t\tthis._index = index;\n\t\tconst tickShapeContainer = container.container;\n\n\t\t// Bar\n\t\tlet bar = this._bar;\n\t\tif( ! bar ) {\n\t\t\tconst position = this._position;\n\t\t\tconst barPosition = ( position === DChartAxisPosition.LEFT || position === DChartAxisPosition.RIGHT ?\n\t\t\t\tEShapeBarPosition.TOP : EShapeBarPosition.LEFT\n\t\t\t);\n\t\t\tbar = new EShapeBar( barPosition, -1, EShapeDefaults.STROKE_WIDTH, EShapePointsStyle.NONE );\n\t\t\tbar.text.copy( this._label );\n\t\t\tthis._bar = bar;\n\t\t}\n\t\tbar.attach( container.container );\n\n\t\t// Major ticks\n\t\tconst tick = this._tick;\n\t\tconst tickMajor = tick.major;\n\t\tlet tickMajorShapes = tickMajor.shapes;\n\t\tif( ! tickMajorShapes && tick.enable ) {\n\t\t\ttickMajorShapes = [];\n\t\t\ttickMajor.shapes = tickMajorShapes;\n\t\t\tconst tickMajorCount = tickMajor.count;\n\t\t\tconst tickMajorSize = tickMajor.size;\n\t\t\tconst tickMajorPosition = tickMajor.position;\n\t\t\tconst tickMajorStyle = tickMajor.style;\n\t\t\tfor( let i = 0; i < tickMajorCount; ++i ) {\n\t\t\t\tconst tickMajorShape = new EShapeBar(\n\t\t\t\t\ttickMajorPosition,\n\t\t\t\t\ttickMajorSize,\n\t\t\t\t\tEShapeDefaults.STROKE_WIDTH,\n\t\t\t\t\ttickMajorStyle\n\t\t\t\t);\n\t\t\t\ttickMajorShape.stroke.copy( tickMajor.stroke );\n\t\t\t\ttickMajorShape.text.copy( tickMajor.text );\n\t\t\t\ttickMajorShape.size.set( 0, 0 );\n\t\t\t\ttickMajorShapes.push( tickMajorShape );\n\t\t\t}\n\t\t}\n\t\tif( tickMajorShapes ) {\n\t\t\tfor( let i = 0, imax = tickMajorShapes.length; i < imax; ++i ) {\n\t\t\t\ttickMajorShapes[ i ].attach( tickShapeContainer );\n\t\t\t}\n\t\t}\n\n\t\t// Minor ticks\n\t\tconst tickMinor = tick.minor;\n\t\tlet tickMinorShapes = tickMinor.shapes;\n\t\tif( ! tickMinorShapes && tick.enable ) {\n\t\t\ttickMinorShapes = [];\n\t\t\ttickMinor.shapes = tickMinorShapes;\n\t\t\tconst tickMinorCount = tickMinor.count;\n\t\t\tconst tickMinorSize = tickMinor.size;\n\t\t\tconst tickMinorPosition = tickMinor.position;\n\t\t\tconst tickMinorStyle = tickMinor.style;\n\t\t\tfor( let i = 0, imax = ( tickMajor.count + 1 ) * tickMinorCount; i < imax; ++i ) {\n\t\t\t\tconst tickMinorShape = new EShapeBar(\n\t\t\t\t\ttickMinorPosition,\n\t\t\t\t\ttickMinorSize,\n\t\t\t\t\tEShapeDefaults.STROKE_WIDTH,\n\t\t\t\t\ttickMinorStyle\n\t\t\t\t);\n\t\t\t\ttickMinorShape.stroke.copy( tickMinor.stroke );\n\t\t\t\ttickMinorShape.size.set( 0, 0 );\n\t\t\t\ttickMinorShapes.push( tickMinorShape );\n\t\t\t}\n\t\t}\n\t\tif( tickMinorShapes ) {\n\t\t\tfor( let i = 0, imax = tickMinorShapes.length; i < imax; ++i ) {\n\t\t\t\ttickMinorShapes[ i ].attach( tickShapeContainer );\n\t\t\t}\n\t\t}\n\t}\n\n\tunbind(): void {\n\t\t// Bar\n\t\tconst bar = this._bar;\n\t\tif( bar ) {\n\t\t\tbar.detach();\n\t\t}\n\n\t\t// Major ticks\n\t\tconst tick = this._tick;\n\t\tconst tickMajorShapes = tick.major.shapes;\n\t\tif( tickMajorShapes ) {\n\t\t\tfor( let i = 0, imax = tickMajorShapes.length; i < imax; ++i ) {\n\t\t\t\ttickMajorShapes[ i ].detach();\n\t\t\t}\n\t\t}\n\n\t\t// Minor ticks\n\t\tconst tickMinorShapes = tick.minor.shapes;\n\t\tif( tickMinorShapes ) {\n\t\t\tfor( let i = 0, imax = tickMinorShapes.length; i < imax; ++i ) {\n\t\t\t\ttickMinorShapes[ i ].detach();\n\t\t\t}\n\t\t}\n\n\t\t//\n\t\tthis._container = undefined;\n\t}\n\n\tupdate(): void {\n\t\tthis.updateBar();\n\t\tthis.updateTicks();\n\t}\n\n\tdestroy(): void {\n\t\t// Bar\n\t\tconst bar = this._bar;\n\t\tif( bar ) {\n\t\t\tbar.destroy();\n\t\t}\n\n\t\t// Major ticks\n\t\tconst tick = this._tick;\n\t\tconst tickMajorShapes = tick.major.shapes;\n\t\tif( tickMajorShapes ) {\n\t\t\tfor( let i = 0, imax = tickMajorShapes.length; i < imax; ++i ) {\n\t\t\t\ttickMajorShapes[ i ].destroy();\n\t\t\t}\n\t\t}\n\n\t\t// Minor ticks\n\t\tconst tickMinorShapes = tick.minor.shapes;\n\t\tif( tickMinorShapes ) {\n\t\t\tfor( let i = 0, imax = tickMinorShapes.length; i < imax; ++i ) {\n\t\t\t\ttickMinorShapes[ i ].destroy();\n\t\t\t}\n\t\t}\n\n\t\t//\n\t\tthis._container = undefined;\n\t}\n\n\tprotected getThemeDefault(): DThemeChartAxisBase {\n\t\treturn DThemes.getInstance().get( this.getType() );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DChartAxisBase\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartAxis, DChartAxisPosition } from \"./d-chart-axis\";\nimport { DChartAxisContainer, DChartAxisContainerOptions } from \"./d-chart-axis-container\";\nimport { DChartPlotArea } from \"./d-chart-plot-area\";\nimport { EShapeContainer } from \"./shape/e-shape-container\";\nimport { utilIsNumber } from \"./util/util-is-number\";\n\nexport class DChartAxisContainerImpl implements DChartAxisContainer {\n\tprotected _plotArea: DChartPlotArea;\n\tprotected _container: EShapeContainer;\n\tprotected _list: Map<DChartAxisPosition, DChartAxis[]>;\n\n\tconstructor( plotArea: DChartPlotArea, options?: DChartAxisContainerOptions ) {\n\t\tthis._plotArea = plotArea;\n\t\tthis._container = new EShapeContainer();\n\n\t\tthis._list = new Map<DChartAxisPosition, DChartAxis[]>();\n\t\tconst list = options && options.list;\n\t\tif( list ) {\n\t\t\tfor( let i = 0, imax = list.length; i < imax; ++i ) {\n\t\t\t\tthis.add( list[ i ] );\n\t\t\t}\n\t\t}\n\t}\n\n\tget container(): EShapeContainer {\n\t\treturn this._container;\n\t}\n\n\tget plotArea(): DChartPlotArea {\n\t\treturn this._plotArea;\n\t}\n\n\tadd( axis: DChartAxis ): void {\n\t\tconst list = this._list;\n\t\tlet axes = list.get( axis.position );\n\t\tif( axes == null ) {\n\t\t\taxes = [];\n\t\t\tlist.set( axis.position, axes );\n\t\t}\n\t\taxes.push( axis );\n\t\taxis.bind( this, axes.length - 1 );\n\t}\n\n\tget( position: DChartAxisPosition, index: number ): DChartAxis | null {\n\t\tconst list = this._list;\n\t\tconst axes = list.get( position );\n\t\tif( axes ) {\n\t\t\tif( 0 <= index && index < axes.length ) {\n\t\t\t\treturn axes[ index ];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tindexOf( axis: DChartAxis ): number {\n\t\tconst list = this._list;\n\t\tconst axes = list.get( axis.position );\n\t\tif( axes ) {\n\t\t\treturn axes.indexOf( axis );\n\t\t}\n\t\treturn -1;\n\t}\n\n\tremove( axis: DChartAxis ): DChartAxis | null;\n\tremove( position: DChartAxisPosition, index: number ): DChartAxis | null;\n\tremove( axisOrPosition: DChartAxis | DChartAxisPosition, indexOrUndefined?: number ): DChartAxis | null {\n\t\tconst list = this._list;\n\t\tif( utilIsNumber( axisOrPosition ) ) {\n\t\t\tconst position: DChartAxisPosition = axisOrPosition;\n\t\t\tconst index = indexOrUndefined!;\n\t\t\tconst axes = list.get( position );\n\t\t\tif( axes ) {\n\t\t\t\tif( 0 <= index && index < axes.length ) {\n\t\t\t\t\tconst removed = axes.splice( index, 1 )[ 0 ];\n\t\t\t\t\tremoved.unbind();\n\t\t\t\t\tremoved.destroy();\n\t\t\t\t\treturn removed;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tconst axis = axisOrPosition;\n\t\t\tconst position: DChartAxisPosition = axis.position;\n\t\t\tconst axes = list.get( position );\n\t\t\tif( axes ) {\n\t\t\t\tconst index = axes.indexOf( axisOrPosition );\n\t\t\t\tif( 0 <= index ) {\n\t\t\t\t\taxes.splice( index, 1 );\n\t\t\t\t\taxis.unbind();\n\t\t\t\t\taxis.destroy();\n\t\t\t\t\treturn axis;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tclear( position: DChartAxisPosition ): this {\n\t\tconst list = this._list;\n\t\tconst axes = list.get( position );\n\t\tif( axes ) {\n\t\t\tfor( let i = 0, imax = axes.length; i < imax; ++i ) {\n\t\t\t\taxes[ i ].destroy();\n\t\t\t}\n\t\t\taxes.length = 0;\n\t\t}\n\t\treturn this;\n\t}\n\n\tsize( position: DChartAxisPosition ): number {\n\t\tconst list = this._list;\n\t\tconst axes = list.get( position );\n\t\tif( axes ) {\n\t\t\treturn axes.length;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tupdate(): void {\n\t\tthis._list.forEach(( axes: DChartAxis[] ): void => {\n\t\t\tfor( let i = 0, imax = axes.length; i < imax; ++i ) {\n\t\t\t\taxes[ i ].update();\n\t\t\t}\n\t\t});\n\t}\n\n\tdestroy(): void {\n\t\tthis._list.forEach(( axes: DChartAxis[] ): void => {\n\t\t\tfor( let i = 0, imax = axes.length; i < imax; ++i ) {\n\t\t\t\taxes[ i ].destroy();\n\t\t\t}\n\t\t\taxes.length = 0;\n\t\t});\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartAxisBase } from \"./d-chart-axis-base\";\n\nexport class DChartAxisX extends DChartAxisBase {\n\tprotected getType(): string {\n\t\treturn \"DChartAxisX\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartAxisBase } from \"./d-chart-axis-base\";\n\nexport class DChartAxisY extends DChartAxisBase {\n\tprotected getType(): string {\n\t\treturn \"DChartAxisY\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilRgb } from \"./util/util-rgb\";\n\nconst DCHART_COLOR_SET_1 = [\n\t0x10b7e3,\n\t0xfe5420,\n\t0xf0c312,\n\t0x1c5d71\n];\n\nconst DCHART_COLOR_SET_2 = [\n\tDCHART_COLOR_SET_1[ 0 ],\n\tUtilRgb.brighten( DCHART_COLOR_SET_1[ 0 ], 0.4 ),\n\n\tDCHART_COLOR_SET_1[ 1 ],\n\tUtilRgb.brighten( DCHART_COLOR_SET_1[ 1 ], 0.4 ),\n\n\tDCHART_COLOR_SET_1[ 2 ],\n\tUtilRgb.brighten( DCHART_COLOR_SET_1[ 2 ], 0.4 ),\n\n\tDCHART_COLOR_SET_1[ 3 ],\n\tUtilRgb.brighten( DCHART_COLOR_SET_1[ 3 ], 0.4 )\n];\n\nexport const DChartColorSet1 = ( index: number ): number => {\n\treturn DCHART_COLOR_SET_1[ index % DCHART_COLOR_SET_1.length ];\n};\n\nexport const DChartColorSet2 = ( index: number ): number => {\n\treturn DCHART_COLOR_SET_2[ index % DCHART_COLOR_SET_2.length ];\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartCoordinate, DChartCoordinateDirection } from \"./d-chart-coordinate\";\nimport { DChartCoordinateContainer } from \"./d-chart-coordinate-container\";\nimport { DChartCoordinateContainerSub } from \"./d-chart-coordinate-container-sub\";\nimport { utilIsNumber } from \"./util\";\n\nexport class DChartCoordinateContainerSubImpl implements DChartCoordinateContainerSub {\n\tprotected _list: DChartCoordinate[];\n\tprotected _direction: DChartCoordinateDirection;\n\tprotected _container: DChartCoordinateContainer;\n\n\tconstructor( container: DChartCoordinateContainer, direction: DChartCoordinateDirection ) {\n\t\tthis._container = container;\n\t\tthis._direction = direction;\n\t\tthis._list = [];\n\t}\n\n\tget container(): DChartCoordinateContainer {\n\t\treturn this._container;\n\t}\n\n\tadd( coordinate: DChartCoordinate, index?: number ): this {\n\t\tconst list = this._list;\n\t\tif( index == null ) {\n\t\t\tlist.push( coordinate );\n\t\t} else if( 0 <= index && index < list.length ) {\n\t\t\tlist.splice( index, 0, coordinate );\n\t\t} else {\n\t\t\tlist.push( coordinate );\n\t\t}\n\t\tcoordinate.bind( this, this._direction );\n\t\treturn this;\n\t}\n\n\tget( index: number ): DChartCoordinate | null {\n\t\tconst list = this._list;\n\t\tif( 0 <= index && index < list.length ) {\n\t\t\treturn list[ index ];\n\t\t}\n\t\treturn null;\n\t}\n\n\tindexOf( coordinate: DChartCoordinate ): number {\n\t\treturn this._list.indexOf( coordinate );\n\t}\n\n\tremove( coordinate: DChartCoordinate ): DChartCoordinate | null;\n\tremove( index: number ): DChartCoordinate | null;\n\tremove( coordinateOrIndex: DChartCoordinate | number ): DChartCoordinate | null {\n\t\tconst list = this._list;\n\t\tif( utilIsNumber( coordinateOrIndex ) ) {\n\t\t\tconst index = coordinateOrIndex;\n\t\t\tif( 0 <= index && index < list.length ) {\n\t\t\t\tconst removed = list.splice( index, 1 )[ 0 ];\n\t\t\t\tremoved.unbind();\n\t\t\t\treturn removed;\n\t\t\t}\n\t\t} else {\n\t\t\tconst coordinate = coordinateOrIndex;\n\t\t\tconst index = list.indexOf( coordinate );\n\t\t\tif( 0 <= index ) {\n\t\t\t\tlist.splice( index, 1 );\n\t\t\t\tcoordinate.unbind();\n\t\t\t\treturn coordinate;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tclear(): this {\n\t\tconst list = this._list;\n\t\tfor( let i = 0, imax = list.length; i < imax; ++i ) {\n\t\t\tlist[ i ].unbind();\n\t\t}\n\t\tlist.length = 0;\n\t\treturn this;\n\t}\n\n\tdestroy(): this {\n\t\treturn this.clear();\n\t}\n\n\tsize(): number {\n\t\treturn this._list.length;\n\t}\n\n\tfit(): this {\n\t\tconst list = this._list;\n\t\tfor( let i = 0, imax = list.length; i < imax; ++i ) {\n\t\t\tlist[ i ].fit();\n\t\t}\n\t\treturn this;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint } from \"pixi.js\";\nimport { DChartAxisContainer, DChartAxisContainerOptions } from \"./d-chart-axis-container\";\nimport { DChartCoordinateContainer, DChartCoordinateContainerOptions } from \"./d-chart-coordinate-container\";\nimport { DChartSeriesContainer, DChartSeriesContainerOptions } from \"./d-chart-series-container\";\nimport { EShapeContainer } from \"./shape/e-shape-container\";\n\nexport enum DChartPlotAreaFitTarget {\n\tNONE\t= 0,\n\tDOMAIN\t= 1,\n\tRANGE\t= 2,\n\tBOTH\t= DOMAIN | RANGE\n}\n\nexport interface DChartPlotAreaOptions {\n\twidth?: number;\n\theight?: number;\n\tcoordinate?: DChartCoordinateContainerOptions;\n\tseries?: DChartSeriesContainerOptions;\n\taxis?: DChartAxisContainerOptions;\n}\n\nexport interface DChartPlotArea {\n\treadonly series: DChartSeriesContainer;\n\treadonly coordinate: DChartCoordinateContainer;\n\treadonly container: EShapeContainer;\n\treadonly size: IPoint;\n\treadonly axis: DChartAxisContainer;\n\n\tdestroy(): void;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartCoordinateDirection } from \"./d-chart-coordinate\";\nimport { DChartCoordinateContainer, DChartCoordinateContainerOptions } from \"./d-chart-coordinate-container\";\nimport { DChartCoordinateContainerSub } from \"./d-chart-coordinate-container-sub\";\nimport { DChartCoordinateContainerSubImpl } from \"./d-chart-coordinate-container-sub-impl\";\nimport { DChartPlotArea } from \"./d-chart-plot-area\";\nimport { utilIsArray } from \"./util/util-is-array\";\n\nexport class DChartCoordinateContainerImpl implements DChartCoordinateContainer {\n\tprotected _x: DChartCoordinateContainerSub;\n\tprotected _y: DChartCoordinateContainerSub;\n\tprotected _plotArea: DChartPlotArea;\n\n\tconstructor( plotArea: DChartPlotArea, options?: DChartCoordinateContainerOptions ) {\n\t\tthis._plotArea = plotArea;\n\t\tconst x = this._x = new DChartCoordinateContainerSubImpl( this, DChartCoordinateDirection.X );\n\t\tconst y = this._y = new DChartCoordinateContainerSubImpl( this, DChartCoordinateDirection.Y );\n\t\tif( options ) {\n\t\t\tconst cxs = options.x;\n\t\t\tif( cxs ) {\n\t\t\t\tif( utilIsArray( cxs ) ) {\n\t\t\t\t\tfor( let i = 0, imax = cxs.length; i < imax; ++i ) {\n\t\t\t\t\t\tx.add( cxs[ i ] );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tx.add( cxs );\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst cys = options.y;\n\t\t\tif( cys ) {\n\t\t\t\tif( utilIsArray( cys ) ) {\n\t\t\t\t\tfor( let i = 0, imax = cys.length; i < imax; ++i ) {\n\t\t\t\t\t\ty.add( cys[ i ] );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ty.add( cys );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget x(): DChartCoordinateContainerSub {\n\t\treturn this._x;\n\t}\n\n\tget y(): DChartCoordinateContainerSub {\n\t\treturn this._y;\n\t}\n\n\tget plotArea(): DChartPlotArea {\n\t\treturn this._plotArea;\n\t}\n\n\tfit(): this {\n\t\tthis._x.fit();\n\t\tthis._y.fit();\n\t\treturn this;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartRegion } from \"./d-chart-region\";\n\nexport class DChartRegionImplObservable implements DChartRegion {\n\tprotected _from: number;\n\tprotected _to: number;\n\tprotected _onChange: () => void;\n\n\tconstructor( from: number, to: number, onChange: () => void ) {\n\t\tthis._from = from;\n\t\tthis._to = to;\n\t\tthis._onChange = onChange;\n\t}\n\n\tget from(): number {\n\t\treturn this._from;\n\t}\n\n\tset from( from: number ) {\n\t\tthis.set( from, undefined );\n\t}\n\n\tget to(): number {\n\t\treturn this._to;\n\t}\n\n\tset to( to: number ) {\n\t\tthis.set( undefined, to );\n\t}\n\n\tset( from?: number, to?: number ): this {\n\t\tlet isChanged = false;\n\n\t\tif( from != null && this._from !== from ) {\n\t\t\tthis._from = from;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( to != null && this._to !== to ) {\n\t\t\tthis._to = to;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tthis._onChange();\n\t\t}\n\t\treturn this;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartCoordinate, DChartCoordinateDirection } from \"./d-chart-coordinate\";\nimport { DChartCoordinateContainerSub } from \"./d-chart-coordinate-container-sub\";\nimport { DChartRegion } from \"./d-chart-region\";\nimport { DChartRegionImplObservable } from \"./d-chart-region-impl-observable\";\nimport { DThemes } from \"./theme\";\nimport { utilIsNaN } from \"./util/util-is-nan\";\n\nexport interface DThemeChartCoordinateLinear {\n\tgetPadding(): number;\n\tisZero( value: number ): boolean;\n\ttoStepScale( scale: number ): number;\n}\n\nexport interface DChartCoordinateLinearOptions {\n\tpadding?: number;\n\tdomain?: {\n\t\tfrom?: number;\n\t\tto?: number;\n\t};\n\trange?: {\n\t\tfrom?: number;\n\t\tto?: number;\n\t};\n\ttheme?: DThemeChartCoordinateLinear;\n}\n\nexport class DChartCoordinateLinear implements DChartCoordinate {\n\tprotected _id: number;\n\tprotected _padding: number;\n\tprotected _domain: DChartRegionImplObservable;\n\tprotected _range: DChartRegionImplObservable;\n\n\tprotected _container?: DChartCoordinateContainerSub;\n\tprotected _direction: DChartCoordinateDirection;\n\n\tprotected _ratio!: number;\n\tprotected _offset!: number;\n\tprotected _iratio!: number;\n\tprotected _ioffset!: number;\n\n\tprotected _theme: DThemeChartCoordinateLinear;\n\n\tconstructor( options?: DChartCoordinateLinearOptions ) {\n\t\tconst theme = ( options && options.theme ) || this.getThemeDefault();\n\t\tthis._theme = theme;\n\t\tthis._id = 0;\n\t\tthis._padding = ( options && options.padding != null ? options.padding : theme.getPadding() );\n\t\tthis._direction = DChartCoordinateDirection.X;\n\t\tconst domainFrom = ( options && options.domain && options.domain.from != null ? options.domain.from : 0 );\n\t\tconst domainTo = ( options && options.domain && options.domain.to != null ? options.domain.to : 1 );\n\t\tthis._domain = new DChartRegionImplObservable( domainFrom, domainTo, (): void => {\n\t\t\tthis.onRegionChange();\n\t\t});\n\t\tconst rangeFrom = ( options && options.range && options.range.from != null ? options.range.from : 0 );\n\t\tconst rangeTo = ( options && options.range && options.range.to != null ? options.range.to : 1 );\n\t\tthis._range = new DChartRegionImplObservable( rangeFrom, rangeTo, (): void => {\n\t\t\tthis.onRegionChange();\n\t\t});\n\t\tthis.onRegionChange();\n\t}\n\n\tprotected getThemeDefault(): DThemeChartCoordinateLinear {\n\t\treturn DThemes.getInstance().get( this.getType() );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DChartCoordinateLinear\";\n\t}\n\n\tbind( container: DChartCoordinateContainerSub, direction: DChartCoordinateDirection ): void {\n\t\tthis._container = container;\n\t\tthis._direction = direction;\n\t}\n\n\tunbind(): void {\n\t\tthis._container = undefined;\n\t}\n\n\tfit(): void {\n\t\tconst container = this._container;\n\t\tif( container ) {\n\t\t\tconst plotArea = container.container.plotArea;\n\t\t\tconst padding = this._padding;\n\t\t\tswitch( this._direction ) {\n\t\t\tcase DChartCoordinateDirection.X:\n\t\t\t\tconst domain = plotArea.series.domain;\n\t\t\t\tconst domainFrom = domain.from;\n\t\t\t\tconst domainTo = domain.to;\n\t\t\t\tif( ! (utilIsNaN( domainFrom ) || utilIsNaN( domainTo )) ) {\n\t\t\t\t\tthis._domain.set( domainFrom, domainTo );\n\t\t\t\t\tlet pixelFrom = padding;\n\t\t\t\t\tlet pixelTo = plotArea.size.x - padding;\n\t\t\t\t\tif( pixelTo < pixelFrom ) {\n\t\t\t\t\t\tpixelFrom = plotArea.size.x * 0.5;\n\t\t\t\t\t\tpixelTo = pixelFrom;\n\t\t\t\t\t}\n\t\t\t\t\tthis._range.set( pixelFrom, pixelTo );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase DChartCoordinateDirection.Y:\n\t\t\t\tconst range = plotArea.series.range;\n\t\t\t\tconst rangeFrom = range.from;\n\t\t\t\tconst rangeTo = range.to;\n\t\t\t\tif( ! (utilIsNaN( rangeFrom ) || utilIsNaN( rangeTo )) ) {\n\t\t\t\t\tthis._domain.set( rangeFrom, rangeTo );\n\t\t\t\t\tlet pixelFrom = plotArea.size.y - padding;\n\t\t\t\t\tlet pixelTo = padding;\n\t\t\t\t\tif( pixelFrom < pixelTo ) {\n\t\t\t\t\t\tpixelFrom = plotArea.size.y * 0.5;\n\t\t\t\t\t\tpixelTo = pixelFrom;\n\t\t\t\t\t}\n\t\t\t\t\tthis._range.set( pixelFrom, pixelTo );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onRegionChange(): void {\n\t\tthis._id += 1;\n\t\tconst domain = this._domain;\n\t\tconst range = this._range;\n\t\tconst domainSpan = domain.to - domain.from;\n\t\tconst rangeSpan = range.to - range.from;\n\t\tconst theme = this._theme;\n\t\tthis._ratio = ( theme.isZero( domainSpan ) ? 0 : rangeSpan / domainSpan );\n\t\tthis._offset = range.from - this._ratio * domain.from;\n\t\tthis._iratio = ( theme.isZero( rangeSpan ) ? 0 : domainSpan / rangeSpan );\n\t\tthis._ioffset = domain.from - this._iratio * range.from;\n\t}\n\n\tget id(): number {\n\t\treturn this._id;\n\t}\n\n\tget domain(): DChartRegion {\n\t\treturn this._domain;\n\t}\n\n\tget range(): DChartRegion {\n\t\treturn this._range;\n\t}\n\n\tmap( value: number ): number {\n\t\treturn this._offset + this._ratio * value;\n\t}\n\n\tunmap( value: number ): number {\n\t\treturn this._ioffset + this._iratio * value;\n\t}\n\n\tprotected calcStepMajor( count: number ): number {\n\t\tif( 0 < count ) {\n\t\t\tconst domain = this._domain;\n\t\t\tconst span = Math.abs( domain.to - domain.from ) / count;\n\t\t\tconst power = Math.floor( Math.log( span ) / Math.LN10 );\n\t\t\tconst base = Math.pow( 10, power );\n\t\t\treturn this._theme.toStepScale( span / base ) * base;\n\t\t}\n\t\treturn -1;\n\t}\n\n\tprotected calcStepMinor( step: number, minorCount: number ): number {\n\t\tif( 0 <= step ) {\n\t\t\treturn step / ( minorCount + 1 );\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t}\n\n\tprotected calcTickMinorPositions(\n\t\tstep: number, count: number, majorPosition: number,\n\t\trangeMin: number, rangeMax: number,\n\t\tiresult: number, result: Float64Array\n\t): void {\n\t\tfor( let i = 0; i < count; i += 1 ) {\n\t\t\tconst minorPosition = majorPosition + (i + 1) * step;\n\t\t\tif( rangeMin <= minorPosition && minorPosition <= rangeMax ) {\n\t\t\t\tresult[ iresult++ ] = minorPosition;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected getRangeMax(): number {\n\t\tconst container = this._container;\n\t\tif( container ) {\n\t\t\tconst plotAreaSize = container.container.plotArea.size;\n\t\t\tswitch( this._direction ) {\n\t\t\tcase DChartCoordinateDirection.X:\n\t\t\t\treturn plotAreaSize.x;\n\t\t\tcase DChartCoordinateDirection.Y:\n\t\t\t\treturn plotAreaSize.y;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tticks(\n\t\tmajorCount: number,\n\t\tminorCountPerMajor: number,\n\t\tminorCount: number,\n\t\tmajorResult: Float64Array,\n\t\tminorResult: Float64Array\n\t): void {\n\t\tif( majorCount <= 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst domain = this._domain;\n\t\tconst domainMin = Math.min( domain.from, domain.to );\n\t\tconst domainMax = Math.max( domain.from, domain.to );\n\n\t\tconst majorStep = this.calcStepMajor( majorCount );\n\t\tif( majorStep <= 0 ) {\n\t\t\tmajorResult[ 0 ] = domainMin;\n\t\t\tmajorResult[ 1 ] = this.map( domainMin );\n\t\t\tmajorResult[ 2 ] = 0;\n\t\t\tfor( let i = 1; i < majorCount; ++i ) {\n\t\t\t\tconst imajorResult = i * 3;\n\t\t\t\tmajorResult[ imajorResult + 0 ] = NaN;\n\t\t\t\tmajorResult[ imajorResult + 1 ] = NaN;\n\t\t\t\tmajorResult[ imajorResult + 2 ] = NaN;\n\t\t\t}\n\t\t\tfor( let i = 0; i < minorCount; ++i ) {\n\t\t\t\tconst iminorResult = i * 3;\n\t\t\t\tminorResult[ iminorResult + 0 ] = NaN;\n\t\t\t\tminorResult[ iminorResult + 1 ] = NaN;\n\t\t\t\tminorResult[ iminorResult + 2 ] = NaN;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// Range\n\t\tconst rangeMin = 0;\n\t\tconst rangeMax = this.getRangeMax();\n\n\t\t// Major tick start position\n\t\tconst idomainStart = Math.floor( domainMin / majorStep ) - 1;\n\t\tconst idomainEnd = Math.ceil( domainMax / majorStep ) + 1;\n\n\t\t// Major / minor tick positions\n\t\tconst minorStep = this.calcStepMinor( majorStep, minorCountPerMajor );\n\t\tlet imajor = 0;\n\t\tlet iminor = 0;\n\t\tfor( let i = idomainStart; i <= idomainEnd; ++i ) {\n\t\t\tconst majorPosition = i * majorStep;\n\t\t\tif( imajor < majorCount ) {\n\t\t\t\tconst majorProjectedPosition = this.map( majorPosition );\n\t\t\t\tif( rangeMin <= majorProjectedPosition && majorProjectedPosition <= rangeMax ) {\n\t\t\t\t\tconst imajorResult = imajor * 3;\n\t\t\t\t\tmajorResult[ imajorResult + 0 ] = majorPosition;\n\t\t\t\t\tmajorResult[ imajorResult + 1 ] = majorProjectedPosition;\n\t\t\t\t\tmajorResult[ imajorResult + 2 ] = majorStep;\n\t\t\t\t\timajor += 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor( let j = 0; j < minorCountPerMajor; j += 1 ) {\n\t\t\t\tif( iminor < minorCount ) {\n\t\t\t\t\tconst minorPosition = majorPosition + (j + 1) * minorStep;\n\t\t\t\t\tconst minorProjectedPosition = this.map( minorPosition );\n\t\t\t\t\tif( rangeMin <= minorProjectedPosition && minorProjectedPosition <= rangeMax ) {\n\t\t\t\t\t\tconst iminorResult = iminor * 3;\n\t\t\t\t\t\tminorResult[ iminorResult + 0 ] = minorPosition;\n\t\t\t\t\t\tminorResult[ iminorResult + 1 ] = minorProjectedPosition;\n\t\t\t\t\t\tminorResult[ iminorResult + 2 ] = minorStep;\n\t\t\t\t\t\timinor += 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor( let i = imajor; i < majorCount; ++i ) {\n\t\t\tconst imajorResult = i * 3;\n\t\t\tmajorResult[ imajorResult + 0 ] = NaN;\n\t\t\tmajorResult[ imajorResult + 1 ] = NaN;\n\t\t\tmajorResult[ imajorResult + 2 ] = NaN;\n\t\t}\n\t\tfor( let i = iminor; i < minorCount; ++i ) {\n\t\t\tconst iminorResult = i * 3;\n\t\t\tminorResult[ iminorResult + 0 ] = NaN;\n\t\t\tminorResult[ iminorResult + 1 ] = NaN;\n\t\t\tminorResult[ iminorResult + 2 ] = NaN;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartRegion } from \"./d-chart-region\";\nimport { utilIsNaN } from \"./util/util-is-nan\";\n\nexport class DChartRegionImpl implements DChartRegion {\n\tfrom: number;\n\tto: number;\n\n\tconstructor( from: number, to: number ) {\n\t\tthis.from = from;\n\t\tthis.to = to;\n\t}\n\n\tset( from?: number, to?: number ): this {\n\t\tif( from != null ) {\n\t\t\tthis.from = from;\n\t\t}\n\t\tif( to != null ) {\n\t\t\tthis.to = to;\n\t\t}\n\t\treturn this;\n\t}\n\n\tclear(): this {\n\t\tthis.from = NaN;\n\t\tthis.to = NaN;\n\t\treturn this;\n\t}\n\n\tadd( from: number, to: number ): this {\n\t\tif( ! utilIsNaN( from ) ) {\n\t\t\tthis.from = ( utilIsNaN( this.from ) ?\n\t\t\t\tfrom : Math.min( this.from, from )\n\t\t\t);\n\t\t}\n\n\t\tif( ! utilIsNaN( to ) ) {\n\t\t\tthis.to = ( utilIsNaN( this.to ) ?\n\t\t\t\tto : Math.max( this.to, to )\n\t\t\t);\n\t\t}\n\n\t\treturn this;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartColorSet2 } from \"./d-chart-color-set\";\nimport { DChartSeriesScalar } from \"./d-chart-series-scalar\";\nimport { DChartSeriesStroke, DChartSeriesStrokeOptions, DChartSeriesStrokeStyleOption } from \"./d-chart-series-stroke\";\nimport { EShapeDefaults } from \"./shape/e-shape-defaults\";\nimport { EShapePointsStyle } from \"./shape/e-shape-points\";\nimport { utilIsArray } from \"./util/util-is-array\";\nimport { utilIsFunction } from \"./util/util-is-function\";\n\nexport class DChartSeriesStrokeImpl implements DChartSeriesStroke {\n\twidth: DChartSeriesScalar<number>;\n\tcolor: DChartSeriesScalar<number>;\n\talpha: DChartSeriesScalar<number>;\n\tstyle: DChartSeriesScalar<DChartSeriesStrokeStyleOption>;\n\n\tconstructor( options?: DChartSeriesStrokeOptions ) {\n\t\tthis.width = this.toScalar( options && options.width, EShapeDefaults.STROKE_WIDTH );\n\t\tthis.color = this.toScalar( options && options.color, DChartColorSet2 );\n\t\tthis.alpha = this.toScalar( options && options.alpha, EShapeDefaults.STROKE_ALPHA );\n\t\tthis.style = this.toScalar( options && options.style, EShapePointsStyle.NONE );\n\t}\n\n\tprotected toScalar<T>(\n\t\tvalue: T | T[] | DChartSeriesScalar<T> | undefined,\n\t\tdef: T | T[] | DChartSeriesScalar<T>\n\t): DChartSeriesScalar<T> {\n\t\tif( utilIsArray( value ) ) {\n\t\t\treturn ( index: number ) => value[ index % value.length ];\n\t\t} else if( utilIsFunction( value ) ) {\n\t\t\treturn value;\n\t\t} else if( value != null ) {\n\t\t\treturn () => value;\n\t\t} else if( utilIsArray( def ) ) {\n\t\t\treturn ( index: number ) => def[ index % def.length ];\n\t\t} else if( utilIsFunction( def ) ) {\n\t\t\treturn def;\n\t\t} else {\n\t\t\treturn () => def;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartPlotArea } from \"./d-chart-plot-area\";\nimport { DChartRegion } from \"./d-chart-region\";\nimport { DChartRegionImpl } from \"./d-chart-region-impl\";\nimport { DChartSeries } from \"./d-chart-series\";\nimport { DChartSeriesContainer, DChartSeriesContainerOptions } from \"./d-chart-series-container\";\nimport { DChartSeriesStroke } from \"./d-chart-series-stroke\";\nimport { DChartSeriesStrokeImpl } from \"./d-chart-series-stroke-impl\";\nimport { utilIsNumber } from \"./util\";\n\nexport class DChartSeriesContainerImpl implements DChartSeriesContainer {\n\tprotected _plotArea: DChartPlotArea;\n\tprotected _list: DChartSeries[];\n\tprotected _domain: DChartRegionImpl;\n\tprotected _range: DChartRegionImpl;\n\tprotected _stroke: DChartSeriesStrokeImpl;\n\n\tconstructor( plotArea: DChartPlotArea, options?: DChartSeriesContainerOptions ) {\n\t\tthis._plotArea = plotArea;\n\t\tthis._domain = new DChartRegionImpl( NaN, NaN );\n\t\tthis._range = new DChartRegionImpl( NaN, NaN );\n\t\tthis._stroke = new DChartSeriesStrokeImpl( options && options.stroke );\n\n\t\tthis._list = [];\n\t\tconst list = options && options.list;\n\t\tif( list ) {\n\t\t\tconst listLength = list.length;\n\t\t\tif( 0 < listLength ) {\n\t\t\t\tfor( let i = 0; i < listLength; ++i ) {\n\t\t\t\t\tthis.add( list[ i ] );\n\t\t\t\t}\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t}\n\t}\n\n\tget plotArea(): DChartPlotArea {\n\t\treturn this._plotArea;\n\t}\n\n\tget stroke(): DChartSeriesStroke {\n\t\treturn this._stroke;\n\t}\n\n\tupdate(): void {\n\t\tconst list = this._list;\n\t\tfor( let i = 0, imax = list.length; i < imax; ++i ) {\n\t\t\tlist[ i ].update();\n\t\t}\n\t}\n\n\tadd( series: DChartSeries ): void {\n\t\tconst list = this._list;\n\t\tseries.bind( this, list.length );\n\t\tlist.push( series );\n\t}\n\n\tget( index: number ): DChartSeries | null {\n\t\tconst list = this._list;\n\t\tif( 0 <= index && index < list.length ) {\n\t\t\treturn list[ index ];\n\t\t}\n\t\treturn null;\n\t}\n\n\tindexOf( series: DChartSeries ): number {\n\t\treturn this._list.indexOf( series );\n\t}\n\n\tremove( series: DChartSeries ): DChartSeries | null;\n\tremove( index: number ): DChartSeries | null;\n\tremove( seriesOrIndex: DChartSeries | number ): DChartSeries | null {\n\t\tconst list = this._list;\n\t\tif( utilIsNumber( seriesOrIndex ) ) {\n\t\t\tconst index = seriesOrIndex;\n\t\t\tif( 0 <= index && index < list.length ) {\n\t\t\t\tconst removed = list.splice( index, 1 )[ 0 ];\n\t\t\t\tremoved.unbind();\n\t\t\t\tremoved.destroy();\n\t\t\t\treturn removed;\n\t\t\t}\n\t\t} else {\n\t\t\tconst series = seriesOrIndex;\n\t\t\tconst index = list.indexOf( series );\n\t\t\tif( 0 <= index ) {\n\t\t\t\tlist.splice( index, 1 );\n\t\t\t\tseries.unbind();\n\t\t\t\tseries.destroy();\n\t\t\t\treturn series;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tclear(): this {\n\t\tconst list = this._list;\n\t\tfor( let i = 0, imax = list.length; i < imax; ++i ) {\n\t\t\tlist[ i ].destroy();\n\t\t}\n\t\tlist.length = 0;\n\t\treturn this;\n\t}\n\n\tsize(): number {\n\t\treturn this._list.length;\n\t}\n\n\tdestroy(): void {\n\t\tthis.clear();\n\t}\n\n\tget domain(): DChartRegion {\n\t\tconst result = this._domain;\n\t\tresult.clear();\n\n\t\tconst list = this._list;\n\t\tfor( let i = 0, imax = list.length; i < imax; ++i ) {\n\t\t\tconst domain = list[ i ].domain;\n\t\t\tresult.add( domain.from, domain.to );\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tget range(): DChartRegion {\n\t\tconst result = this._range;\n\t\tresult.clear();\n\n\t\tconst list = this._list;\n\t\tfor( let i = 0, imax = list.length; i < imax; ++i ) {\n\t\t\tconst range = list[ i ].range;\n\t\t\tresult.add( range.from, range.to );\n\t\t}\n\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint, Point } from \"pixi.js\";\nimport { DChartAxisContainer } from \"./d-chart-axis-container\";\nimport { DChartAxisContainerImpl } from \"./d-chart-axis-container-impl\";\nimport { DChartCoordinateContainer } from \"./d-chart-coordinate-container\";\nimport { DChartCoordinateContainerImpl } from \"./d-chart-coordinate-container-impl\";\nimport { DChartPlotArea, DChartPlotAreaOptions } from \"./d-chart-plot-area\";\nimport { DChartSeriesContainer } from \"./d-chart-series-container\";\nimport { DChartSeriesContainerImpl } from \"./d-chart-series-container-impl\";\nimport { EShapeContainer } from \"./shape\";\n\nexport class DChartPlotAreaImpl implements DChartPlotArea {\n\tprotected _container: EShapeContainer;\n\tprotected _series: DChartSeriesContainerImpl;\n\tprotected _coordinate: DChartCoordinateContainer;\n\tprotected _size: Point;\n\tprotected _axis: DChartAxisContainerImpl;\n\n\tconstructor( options?: DChartPlotAreaOptions ) {\n\t\tthis._size = new Point(\n\t\t\toptions && options.width != null ? options.width : 100,\n\t\t\toptions && options.height != null ? options.height : 100\n\t\t);\n\t\tthis._container = new EShapeContainer();\n\t\tthis._coordinate = new DChartCoordinateContainerImpl( this, options && options.coordinate );\n\t\tthis._series = new DChartSeriesContainerImpl( this, options && options.series );\n\t\tthis._axis = new DChartAxisContainerImpl( this, options && options.axis );\n\t}\n\n\tget coordinate(): DChartCoordinateContainer {\n\t\treturn this._coordinate;\n\t}\n\n\tget series(): DChartSeriesContainer {\n\t\treturn this._series;\n\t}\n\n\tget container(): EShapeContainer {\n\t\treturn this._container;\n\t}\n\n\tget size(): IPoint {\n\t\treturn this._size;\n\t}\n\n\tget axis(): DChartAxisContainer {\n\t\treturn this._axis;\n\t}\n\n\tdestroy(): void {\n\t\tthis._container.destroy();\n\t\tthis._series.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplications } from \"./d-applications\";\nimport { DChartCoordinate } from \"./d-chart-coordinate\";\nimport { DChartRegionImmutable } from \"./d-chart-region\";\nimport { DChartRegionImpl } from \"./d-chart-region-impl\";\nimport { DChartSeries } from \"./d-chart-series\";\nimport { DChartSeriesContainer } from \"./d-chart-series-container\";\nimport { DChartSeriesStrokeComputed, DChartSeriesStrokeComputedOptions } from \"./d-chart-series-stroke\";\nimport { EShapePointsStyle } from \"./shape\";\nimport { EShapeLine } from \"./shape/variant/e-shape-line\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport interface DChartSeriesLineOptions {\n\tpoints?: Array<number | null>;\n\tstroke?: DChartSeriesStrokeComputedOptions;\n\tcoordinate?: {\n\t\tx?: number;\n\t\ty?: number;\n\t};\n}\n\nexport class DChartSeriesLine implements DChartSeries {\n\tprotected _line?: EShapeLine;\n\tprotected _coordinateIndexX: number;\n\tprotected _coordinateIndexY: number;\n\n\tprotected _points: Array<number | null>;\n\tprotected _pointId: number;\n\tprotected _pointIdUpdated: number;\n\n\tprotected _coordinateIdUpdatedX: number;\n\tprotected _coordinateIdUpdatedY: number;\n\n\tprotected _container?: DChartSeriesContainer;\n\n\tprotected _domain: DChartRegionImpl;\n\tprotected _range: DChartRegionImpl;\n\tprotected _regionPointId: number;\n\n\tprotected _options?: DChartSeriesLineOptions;\n\n\tconstructor( options?: DChartSeriesLineOptions ) {\n\t\tconst coordinate = options && options.coordinate;\n\t\tthis._coordinateIndexX = ( coordinate && coordinate.x != null ? coordinate.x : 0 );\n\t\tthis._coordinateIndexY = ( coordinate && coordinate.y != null ? coordinate.y : 0 );\n\n\t\tthis._points = (options && options.points) || [];\n\t\tthis._pointId = 0;\n\t\tthis._pointIdUpdated = NaN;\n\n\t\tthis._coordinateIdUpdatedX = NaN;\n\t\tthis._coordinateIdUpdatedY = NaN;\n\n\t\tthis._domain = new DChartRegionImpl( NaN, NaN );\n\t\tthis._range = new DChartRegionImpl( NaN, NaN );\n\t\tthis._regionPointId = NaN;\n\n\t\tthis._options = options;\n\t}\n\n\tprotected toStroke( container: DChartSeriesContainer, index: number ): DChartSeriesStrokeComputed {\n\t\tconst options = this._options;\n\t\tconst stroke = options && options.stroke;\n\t\tconst containerStroke = container.stroke;\n\t\tif( stroke ) {\n\t\t\tconst style = ( stroke.style != null ? stroke.style : containerStroke.style( index ) );\n\t\t\treturn {\n\t\t\t\twidth: ( stroke.width != null ? stroke.width : containerStroke.width( index ) ),\n\t\t\t\tcolor: ( stroke.color != null ? stroke.color : containerStroke.color( index ) ),\n\t\t\t\talpha: ( stroke.alpha != null ? stroke.alpha : containerStroke.alpha( index ) ),\n\t\t\t\tstyle: ( utilIsString( style ) ? EShapePointsStyle[ style ] : style )\n\t\t\t};\n\t\t} else {\n\t\t\tconst style = containerStroke.style( index );\n\t\t\treturn {\n\t\t\t\twidth: containerStroke.width( index ),\n\t\t\t\tcolor: containerStroke.color( index ),\n\t\t\t\talpha: containerStroke.alpha( index ),\n\t\t\t\tstyle: ( utilIsString( style ) ? EShapePointsStyle[ style ] : style )\n\t\t\t};\n\t\t}\n\t}\n\n\tbind( container: DChartSeriesContainer, index: number ): void {\n\t\tlet line = this._line;\n\t\tif( ! line ) {\n\t\t\tconst stroke = this.toStroke( container, index );\n\t\t\tline = this._line = new EShapeLine([], [], stroke.width, stroke.style);\n\t\t\tline.stroke.color = stroke.color;\n\t\t\tline.stroke.alpha = stroke.alpha;\n\t\t}\n\t\tthis._container = container;\n\t\tline.attach( container.plotArea.container, index );\n\t\tthis._pointIdUpdated = NaN;\n\t\tthis._coordinateIdUpdatedX = NaN;\n\t\tthis._coordinateIdUpdatedY = NaN;\n\t}\n\n\tunbind(): void {\n\t\tconst line = this._line;\n\t\tif( line ) {\n\t\t\tline.detach();\n\t\t}\n\t\tthis._container = undefined;\n\t}\n\n\tget points(): Array<number | null> {\n\t\treturn this._points;\n\t}\n\n\tset points( points: Array<number | null> ) {\n\t\tthis._points = points;\n\t\tthis._pointId += 1;\n\t}\n\n\ttoDirty(): void {\n\t\tthis._pointId += 1;\n\t}\n\n\tupdate(): void {\n\t\tconst line = this._line;\n\t\tconst container = this._container;\n\t\tif( line && container ) {\n\t\t\tconst plotArea = container.plotArea;\n\t\t\tconst coordinate = plotArea.coordinate;\n\t\t\tconst coordinateX = coordinate.x.get( this._coordinateIndexX );\n\t\t\tconst coordinateY = coordinate.y.get( this._coordinateIndexY );\n\t\t\tif( coordinateX && coordinateY ) {\n\t\t\t\tconst coordinateIdX = coordinateX.id;\n\t\t\t\tconst coordinateIdY = coordinateY.id;\n\n\t\t\t\tconst pointId = this._pointId;\n\t\t\t\tconst isPointChanged = ( pointId !== this._pointIdUpdated );\n\t\t\t\tconst isCoordinateXChanged = ( coordinateIdX !== this._coordinateIdUpdatedX );\n\t\t\t\tconst isCoordinateYChanged = ( coordinateIdY !== this._coordinateIdUpdatedY );\n\t\t\t\tif( isPointChanged || isCoordinateXChanged || isCoordinateYChanged ) {\n\t\t\t\t\tthis._pointIdUpdated = pointId;\n\t\t\t\t\tthis._coordinateIdUpdatedX = coordinateIdX;\n\t\t\t\t\tthis._coordinateIdUpdatedY = coordinateIdY;\n\t\t\t\t\tthis.updateLine( line, coordinateX, coordinateY );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected updateLine(\n\t\tline: EShapeLine,\n\t\txcoordinate: DChartCoordinate,\n\t\tycoordinate: DChartCoordinate\n\t): void {\n\t\tconst values = line.points.values;\n\t\tconst segments = line.points.segments;\n\t\tconst valuesLength = values.length;\n\t\tconst segmentsLength = segments.length;\n\t\tlet ivalues = 0;\n\t\tlet isegments = 0;\n\t\tconst points = this._points;\n\t\tfor( let i = 0, imax = points.length; i < imax; i += 2 ) {\n\t\t\tconst xraw = points[ i ];\n\t\t\tconst yraw = points[ i + 1 ];\n\t\t\tif( xraw != null && yraw != null ) {\n\t\t\t\tconst x = xcoordinate.map( xraw );\n\t\t\t\tconst y = ycoordinate.map( yraw );\n\t\t\t\tif( ivalues < valuesLength ) {\n\t\t\t\t\tvalues[ ivalues ] = x;\n\t\t\t\t\tvalues[ ivalues + 1 ] = y;\n\t\t\t\t} else {\n\t\t\t\t\tvalues.push( x, y );\n\t\t\t\t}\n\t\t\t\tivalues += 2;\n\t\t\t} else {\n\t\t\t\tconst segment = (i >> 1) - isegments;\n\t\t\t\tif( isegments < segmentsLength ) {\n\t\t\t\t\tsegments[ isegments ] = segment;\n\t\t\t\t} else {\n\t\t\t\t\tsegments.push( segment );\n\t\t\t\t}\n\t\t\t\tisegments += 1;\n\t\t\t}\n\t\t}\n\t\tif( values.length !== ivalues ) {\n\t\t\tvalues.length = ivalues;\n\t\t}\n\t\tif( segments.length !== isegments ) {\n\t\t\tsegments.length = isegments;\n\t\t}\n\t\tline.points.set( values, segments );\n\t\tDApplications.update();\n\t}\n\n\tget domain(): DChartRegionImmutable {\n\t\tthis.updateRegion();\n\t\treturn this._domain;\n\t}\n\n\tget range(): DChartRegionImmutable {\n\t\tthis.updateRegion();\n\t\treturn this._range;\n\t}\n\n\tprotected updateRegion(): void {\n\t\tconst pointId = this._pointId;\n\t\tif( this._regionPointId !== pointId ) {\n\t\t\tthis._regionPointId = pointId;\n\n\t\t\tconst points = this._points;\n\t\t\tconst domain = this._domain;\n\t\t\tconst range = this._range;\n\t\t\tdomain.clear();\n\t\t\trange.clear();\n\t\t\tif( points != null ) {\n\t\t\t\tfor( let i = 0, imax = points.length; i < imax; i += 2 ) {\n\t\t\t\t\tconst xraw = points[ i ];\n\t\t\t\t\tif( xraw != null ) {\n\t\t\t\t\t\tdomain.add( xraw, xraw );\n\t\t\t\t\t}\n\t\t\t\t\tconst yraw = points[ i + 1 ];\n\t\t\t\t\tif( yraw != null ) {\n\t\t\t\t\t\trange.add( yraw, yraw );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy(): void {\n\t\tconst line = this._line;\n\t\tif( line ) {\n\t\t\tthis._line = undefined;\n\t\t\tline.detach();\n\t\t\tline.destroy();\n\t\t}\n\n\t\tthis._container = undefined;\n\t\tthis._points.length = 0;\n\t\tthis._pointId = 0;\n\t\tthis._pointIdUpdated = NaN;\n\t\tthis._coordinateIdUpdatedX = NaN;\n\t\tthis._coordinateIdUpdatedY = NaN;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, utils } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\n\nexport enum DListSelectionMode {\n\tNONE,\n\tSINGLE,\n\tMULTIPLE\n}\n\nexport interface DListSelectionOptions {\n\tmode?: DListSelectionMode;\n\ton?: { [ name: string ]: Function };\n}\n\nexport class DListSelection extends utils.EventEmitter {\n\tprotected _content: Container;\n\tprotected _isDirty: boolean;\n\tprotected _indices: number[];\n\tprotected _mode: DListSelectionMode;\n\n\tconstructor( content: Container, options?: DListSelectionOptions ) {\n\t\tsuper();\n\n\t\tthis._content = content;\n\t\tthis._isDirty = false;\n\t\tthis._indices = [];\n\t\tthis._mode = ( options && options.mode != null ? options.mode : DListSelectionMode.SINGLE );\n\n\t\t// Events\n\t\tconst on = options && options.on;\n\t\tif( on ) {\n\t\t\tfor( const name in on ) {\n\t\t\t\tthis.on( name, on[ name ] );\n\t\t\t}\n\t\t}\n\t}\n\n\ttoDirty() {\n\t\tthis._isDirty = true;\n\t}\n\n\tupdate() {\n\t\tif( this._isDirty ) {\n\t\t\tthis._isDirty = false;\n\t\t\tconst indices = this._indices;\n\t\t\tindices.length = 0;\n\t\t\tconst content = this._content;\n\t\t\tconst children = content.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child instanceof DBase ) {\n\t\t\t\t\tif( child.isActive() ) {\n\t\t\t\t\t\tindices.push( i );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsize() {\n\t\tthis.update();\n\t\treturn this._indices.length;\n\t}\n\n\tisEmpty(): boolean {\n\t\treturn this.size() <= 0;\n\t}\n\n\tfirst<T>(): T | null {\n\t\treturn this.get( 0 );\n\t}\n\n\tget<T>( index: number ): T | null {\n\t\tthis.update();\n\t\tconst indices = this._indices;\n\t\tif( 0 <= index && index < indices.length ) {\n\t\t\tconst content = this._content;\n\t\t\tconst child = content.children[ indices[ index ] ];\n\t\t\tif( child != null ) {\n\t\t\t\treturn child as any;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetIndex( index: number ): number | null {\n\t\tthis.update();\n\t\tconst indices = this._indices;\n\t\tif( 0 <= index && index < indices.length ) {\n\t\t\treturn indices[ index ];\n\t\t}\n\t\treturn null;\n\t}\n\n\tclear(): void {\n\t\tthis.update();\n\t\tconst indices = this._indices;\n\t\tif( 0 < indices.length ) {\n\t\t\tconst content = this._content;\n\t\t\tconst children = content.children;\n\t\t\tfor( let i = 0, imax = indices.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ indices[ i ] ];\n\t\t\t\tif( child instanceof DBase ) {\n\t\t\t\t\tchild.setActive( false );\n\t\t\t\t}\n\t\t\t}\n\t\t\tindices.length = 0;\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tadd<T extends DBase<any, any>>( target: T ) {\n\t\tconst mode = this._mode;\n\t\tconst content = this._content;\n\t\tif( mode === DListSelectionMode.SINGLE ) {\n\t\t\tif( ! target.isActive() ) {\n\t\t\t\tthis.update();\n\n\t\t\t\t// Remove the existing\n\t\t\t\tconst indices = this._indices;\n\t\t\t\tconst children = content.children;\n\t\t\t\tfor( let i = 0, imax = indices.length; i < imax; ++i ) {\n\t\t\t\t\tconst child = children[ indices[ i ] ];\n\t\t\t\t\tif( child instanceof DBase ) {\n\t\t\t\t\t\tchild.setActive( false );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tindices.length = 0;\n\n\t\t\t\t// Add a new child\n\t\t\t\tindices.push( content.getChildIndex( target ) );\n\t\t\t\ttarget.setActive( true );\n\n\t\t\t\t// Event\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t}\n\t\t} else if( mode === DListSelectionMode.MULTIPLE ) {\n\t\t\tif( ! target.isActive() ) {\n\t\t\t\tif( this._isDirty ) {\n\t\t\t\t\ttarget.setActive( true );\n\t\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\t} else {\n\t\t\t\t\t// Find an insertion position\n\t\t\t\t\tconst indices = this._indices;\n\t\t\t\t\tconst targetIndex = content.getChildIndex( target );\n\t\t\t\t\tfor( let i = 0, imax = indices.length; i < imax; ++i ) {\n\t\t\t\t\t\tconst index = indices[ i ];\n\t\t\t\t\t\tif( targetIndex === index ) {\n\t\t\t\t\t\t\ttarget.setActive( true );\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else if( targetIndex < index ) {\n\t\t\t\t\t\t\tindices.splice( i, 0, targetIndex );\n\t\t\t\t\t\t\ttarget.setActive( true );\n\t\t\t\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Push\n\t\t\t\t\tindices.push( targetIndex );\n\t\t\t\t\ttarget.setActive( true );\n\t\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tremove<T extends DBase<any, any>>( target: T ) {\n\t\tif( ! target.isActive() ) {\n\t\t\tif( this._isDirty ) {\n\t\t\t\ttarget.setActive( false );\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t} else {\n\t\t\t\tconst indices = this._indices;\n\t\t\t\tconst content = this._content;\n\t\t\t\tconst targetIndex = content.getChildIndex( target );\n\t\t\t\tfor( let i = 0, imax = indices.length; i < imax; ++i ) {\n\t\t\t\t\tconst index = indices[ i ];\n\t\t\t\t\tif( targetIndex === index ) {\n\t\t\t\t\t\tindices.splice( i, 1 );\n\t\t\t\t\t\ttarget.setActive( false );\n\t\t\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DChartPlotArea, DChartPlotAreaOptions} from \"./d-chart-plot-area\";\nimport { DChartPlotAreaImpl } from \"./d-chart-plot-area-impl\";\n\nexport interface DChartOptions<THEME extends DThemeChart> extends DBaseOptions<THEME> {\n\tplotArea: DChartPlotAreaOptions;\n}\n\nexport interface DThemeChart extends DThemeBase {\n}\n\nexport class DChart<\n\tTHEME extends DThemeChart = DThemeChart,\n\tOPTIONS extends DChartOptions<THEME> = DChartOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tprotected _plotArea!: DChartPlotArea;\n\n\tprotected init( options?: OPTIONS ): void {\n\t\tsuper.init( options );\n\n\t\tconst plotArea = new DChartPlotAreaImpl( options && options.plotArea );\n\t\tthis._plotArea = plotArea;\n\t\tthis.addChild( plotArea.container );\n\t\tthis.addChild( plotArea.axis.container );\n\t}\n\n\tget plotArea(): DChartPlotArea {\n\t\treturn this._plotArea;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DChart\";\n\t}\n\n\tdestroy(): void {\n\t\tif( ! this._destroyed ) {\n\t\t\tthis._plotArea.destroy();\n\t\t\tsuper.destroy();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCommand } from \"./d-command\";\nimport { DCommandFlag } from \"./d-command-flag\";\n\nexport abstract class DCommandCreate implements DCommand {\n\tabstract execute(): Promise<unknown> | boolean;\n\n\tredo(): Promise<unknown> | boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tundo(): Promise<unknown> | boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tdestroy(): void {\n\t\t// DO NOTHING\n\t}\n\n\tgetFlag(): DCommandFlag {\n\t\treturn DCommandFlag.UNSTORABLE | DCommandFlag.CLEAR;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCommand } from \"./d-command\";\nimport { DCommandFlag } from \"./d-command-flag\";\nimport { DControllers } from \"./d-controllers\";\n\nexport class DCommandDelete implements DCommand {\n\texecute(): Promise<unknown> | boolean {\n\t\treturn DControllers.getDocumentController().delete();\n\t}\n\n\tredo(): Promise<unknown> | boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tundo(): Promise<unknown> | boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tdestroy(): void {\n\t\t// DO NOTHING\n\t}\n\n\tgetFlag(): DCommandFlag {\n\t\treturn DCommandFlag.UNSTORABLE | DCommandFlag.CLEAR;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCommand } from \"./d-command\";\nimport { DCommandFlag } from \"./d-command-flag\";\nimport { DControllers } from \"./d-controllers\";\n\nexport class DCommandSaveAs implements DCommand {\n\tprotected _name: string;\n\n\tconstructor( name: string ) {\n\t\tthis._name = name;\n\t}\n\n\texecute(): Promise<unknown> | boolean {\n\t\treturn DControllers.getDocumentController().saveAs( this._name );\n\t}\n\n\tredo(): Promise<unknown> | boolean {\n\t\treturn true;\n\t}\n\n\tundo(): Promise<unknown> | boolean {\n\t\treturn true;\n\t}\n\n\tdestroy(): void {\n\t\t// DO NOTHING\n\t}\n\n\tgetFlag(): DCommandFlag {\n\t\treturn DCommandFlag.UNSTORABLE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCommand } from \"./d-command\";\nimport { DCommandFlag } from \"./d-command-flag\";\nimport { DControllers } from \"./d-controllers\";\n\nexport class DCommandSave implements DCommand {\n\texecute(): Promise<unknown> | boolean {\n\t\treturn DControllers.getDocumentController().save();\n\t}\n\n\tredo(): Promise<unknown> | boolean {\n\t\treturn true;\n\t}\n\n\tundo(): Promise<unknown> | boolean {\n\t\treturn true;\n\t}\n\n\tdestroy(): void {\n\t\t// DO NOTHING\n\t}\n\n\tgetFlag(): DCommandFlag {\n\t\treturn DCommandFlag.UNSTORABLE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\n\nexport interface DContentOptions extends DBaseOptions<DThemeContent> {\n\n}\n\nexport interface DThemeContent extends DThemeBase {\n\n}\n\nexport class DContent extends DBase<DThemeContent, DContentOptions> {\n\tprotected init( options?: DContentOptions ) {\n\t\tsuper.init( options );\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tprotected initReflowable(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DContent\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { ObservablePoint } from \"pixi.js\";\nimport { DMapTileMappingPoint } from \"./d-map-tile-mapping\";\n\nexport class DDiagramCanvasTileMappingPointImpl extends ObservablePoint implements DMapTileMappingPoint {\n\tget lon(): number {\n\t\treturn this.x;\n\t}\n\n\tset lon( lon: number ) {\n\t\tthis.x = lon;\n\t}\n\n\tget lat(): number {\n\t\treturn this.y;\n\t}\n\n\tset lat( lat: number ) {\n\t\tthis.y = lat;\n\t}\n\n\ttoObject(): { lon: number, lat: number } {\n\t\treturn {\n\t\t\tlon: this.x,\n\t\t\tlat: this.y\n\t\t};\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramCanvasTileMapping } from \"./d-diagram-canvas-mapping\";\nimport { DDiagramCanvasTileMappingPointImpl } from \"./d-diagram-canvas-mapping-point-impl\";\nimport { DMapTileMappingPoint } from \"./d-map-tile-mapping\";\n\nexport class DDiagramCanvasTileMappingImpl implements DDiagramCanvasTileMapping {\n\tprotected _enable: boolean;\n\tprotected _from: DDiagramCanvasTileMappingPointImpl;\n\tprotected _to: DDiagramCanvasTileMappingPointImpl;\n\tprotected _cb: () => void;\n\n\tconstructor( cb: () => void, mapping?: DDiagramCanvasTileMapping );\n\tconstructor( cb: () => void, enable: boolean, lon0: number, lat0: number, lon1: number, lat1: number );\n\tconstructor(\n\t\tcb: () => void,\n\t\tmappingOrEnable?: DDiagramCanvasTileMapping | boolean,\n\t\tlon0?: number,\n\t\tlat0?: number,\n\t\tlon1?: number,\n\t\tlat1?: number\n\t) {\n\t\tthis._cb = cb;\n\t\tif( mappingOrEnable === true || mappingOrEnable === false ) {\n\t\t\tthis._enable = mappingOrEnable;\n\t\t\tthis._from = new DDiagramCanvasTileMappingPointImpl( cb, null, lon0, lat0 );\n\t\t\tthis._to = new DDiagramCanvasTileMappingPointImpl( cb, null, lon1, lat1 );\n\t\t} else if( mappingOrEnable != null ) {\n\t\t\tthis._enable = mappingOrEnable.enable;\n\t\t\tthis._from = new DDiagramCanvasTileMappingPointImpl( cb, null, mappingOrEnable.from.lon, mappingOrEnable.from.lat );\n\t\t\tthis._to = new DDiagramCanvasTileMappingPointImpl( cb, null, mappingOrEnable.to.lon, mappingOrEnable.to.lat );\n\t\t} else {\n\t\t\tthis._enable = false;\n\t\t\tthis._from = new DDiagramCanvasTileMappingPointImpl( cb, null, -180, +85.05112877980659 );\n\t\t\tthis._to = new DDiagramCanvasTileMappingPointImpl( cb, null, +180, -85.05112877980659 );\n\t\t}\n\t}\n\n\tget enable(): boolean {\n\t\treturn this._enable;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\tif( this._enable !== enable ) {\n\t\t\tthis._enable = enable;\n\t\t\tthis._cb();\n\t\t}\n\t}\n\n\tget from(): DMapTileMappingPoint {\n\t\treturn this._from;\n\t}\n\n\tget to(): DMapTileMappingPoint {\n\t\treturn this._to;\n\t}\n\n\tserialize(): DDiagramCanvasTileMapping {\n\t\treturn {\n\t\t\tenable: this._enable,\n\t\t\tfrom: this._from.toObject(),\n\t\t\tto: this._to.toObject()\n\t\t};\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramCanvasBase } from \"./d-diagram-canvas-base\";\nimport { DDiagramCanvasTileMapping } from \"./d-diagram-canvas-mapping\";\nimport { DDiagramCanvasTileMappingImpl } from \"./d-diagram-canvas-mapping-impl\";\nimport { DMapTilePyramid } from \"./d-map-tile-pyramid\";\n\nexport type DDiagramCanvasTilePyramidFactory = ( canvas: DDiagramCanvasBase<any, any> ) => DMapTilePyramid;\n\nexport interface DDiagramCanvasTileOptions {\n\tfactory?: DDiagramCanvasTilePyramidFactory;\n\tmapping?: DDiagramCanvasTileMapping;\n}\n\nexport class DDiagramCanvasTile {\n\tprotected _canvas: DDiagramCanvasBase<any, any>;\n\tprotected _pyramid?: DMapTilePyramid;\n\tprotected _factory?: DDiagramCanvasTilePyramidFactory;\n\tprotected _mapping: DDiagramCanvasTileMappingImpl;\n\n\tconstructor( canvas: DDiagramCanvasBase<any, any>, options?: DDiagramCanvasTileOptions ) {\n\t\tthis._canvas = canvas;\n\t\tthis._factory = options && options.factory;\n\t\tthis._mapping = new DDiagramCanvasTileMappingImpl((): void => {\n\t\t\tthis.onMappingChange();\n\t\t}, options && options.mapping );\n\t}\n\n\tinit(): void {\n\t\tthis.onMappingChange();\n\t}\n\n\tprotected onMappingChange(): void {\n\t\tconst factory = this._factory;\n\t\tif( factory ) {\n\t\t\tconst mapping = this._mapping;\n\t\t\tif( mapping.enable ) {\n\t\t\t\tconst pyramid = this._pyramid;\n\t\t\t\tif( pyramid ) {\n\t\t\t\t\tpyramid.mapping = mapping;\n\t\t\t\t} else {\n\t\t\t\t\tthis._pyramid = factory( this._canvas ).fit();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst pyramid = this._pyramid;\n\t\t\t\tif( pyramid ) {\n\t\t\t\t\tthis._pyramid = undefined;\n\t\t\t\t\tpyramid.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget pyramid(): DMapTilePyramid | undefined {\n\t\treturn this._pyramid;\n\t}\n\n\tget factory(): DDiagramCanvasTilePyramidFactory | undefined {\n\t\treturn this._factory;\n\t}\n\n\tget mapping(): DDiagramCanvasTileMapping {\n\t\treturn this._mapping;\n\t}\n\n\tserialize(): { mapping: DDiagramCanvasTileMapping } {\n\t\treturn {\n\t\t\tmapping: this._mapping.serialize()\n\t\t};\n\t}\n\n\tdestroy(): void {\n\t\tconst pyramid = this._pyramid;\n\t\tif( pyramid != null ) {\n\t\t\tthis._pyramid = undefined;\n\t\t\tpyramid.destroy();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem, DDiagramSerializedLayer } from \"./d-diagram-serialized\";\nimport { EShapeContainer } from \"./shape/e-shape-container\";\nimport { EShapeResourceManagerSerialization } from \"./shape/e-shape-resource-manager-serialization\";\n\nexport class DDiagramLayer extends EShapeContainer {\n\treference: number;\n\n\tconstructor( name: string ) {\n\t\tsuper();\n\t\tthis.name = name;\n\t\tthis.interactive = false;\n\t\tthis.reference = 0;\n\t}\n\n\tdestroy(): void {\n\t\tif( ! this._destroyed ) {\n\t\t\tconst children = this.children;\n\t\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\t\tchildren[ i ].destroy();\n\t\t\t}\n\t\t\tchildren.length = 0;\n\t\t\tsuper.destroy();\n\t\t}\n\t}\n\n\tserialize(\n\t\tlayer: number, manager: EShapeResourceManagerSerialization, items: DDiagramSerializedItem[]\n\t): DDiagramSerializedLayer {\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst shape = children[ i ];\n\t\t\tconst item = shape.serialize( manager );\n\t\t\titem[ 16 ] = layer;\n\t\t\titems.push( item );\n\t\t}\n\n\t\treturn [\n\t\t\tthis.name || \"\"\n\t\t];\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DDiagramLayer } from \"./d-diagram-layer\";\nimport { DDiagramSerializedItem, DDiagramSerializedLayer } from \"./d-diagram-serialized\";\nimport { EShapeResourceManagerSerialization } from \"./shape/e-shape-resource-manager-serialization\";\n\nexport class DDiagramLayerContainer extends Container {\n\tpublic children!: DDiagramLayer[];\n\tprotected _active: DDiagramLayer | null;\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis._active = null;\n\t\tthis.interactive = false;\n\t\tthis.interactiveChildren = false;\n\t}\n\n\tget active(): DDiagramLayer | null {\n\t\treturn this._active;\n\t}\n\n\tset active( layer: DDiagramLayer | null ) {\n\t\tif( this._active !== layer && (layer == null || 0 <= this.children.indexOf( layer )) ) {\n\t\t\tthis._active = layer;\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tcreate( name: string, activate?: boolean ): DDiagramLayer {\n\t\tconst result = new DDiagramLayer( name );\n\t\tthis.attach( result, activate );\n\t\treturn result;\n\t}\n\n\t/**\n\t * Adds the specified layer and activates it if the `activate` is true.\n\t *\n\t * @param layer\n\t * @param activate\n\t */\n\tattach( layer: DDiagramLayer, activate?: boolean ): void {\n\t\tthis.addChild( layer );\n\t\tif( activate === true ) {\n\t\t\tthis._active = layer;\n\t\t}\n\t\tthis.emit( \"change\", this );\n\t\tDApplications.update();\n\t}\n\n\tattachAt( layer: DDiagramLayer, index: number, activate?: boolean ): void {\n\t\tthis.addChildAt( layer, index );\n\t\tif( activate === true ) {\n\t\t\tthis._active = layer;\n\t\t}\n\t\tthis.emit( \"change\", this );\n\t\tDApplications.update();\n\t}\n\n\t/**\n\t * Removes the specified layer from this container and activates the specified layer.\n\t * This method does not destroy the secified layer.\n\t *\n\t * @param layer\n\t */\n\tdetach( layer: DDiagramLayer, active: DDiagramLayer | null ): void {\n\t\tconst children = this.children;\n\t\tconst index = children.indexOf( layer );\n\t\tif( 0 <= index ) {\n\t\t\tthis._active = active;\n\n\t\t\tchildren.splice( index, 1 );\n\t\t\t(layer as any).parent = undefined;\n\n\t\t\tthis.emit( \"change\", this );\n\t\t\tDApplications.update();\n\t\t}\n\t}\n\n\t/**\n\t * Removes the specified layer and activate the next layer.\n\t * This method does not destroy the specified layer.\n\t *\n\t * @param layer\n\t * @param activateNext\n\t */\n\tdelete( layer: DDiagramLayer, activateNext?: boolean ): number {\n\t\tconst children = this.children;\n\t\tconst index = children.indexOf( layer );\n\t\tif( 0 <= index ) {\n\t\t\tchildren.splice( index, 1 );\n\t\t\t(layer as any).parent = undefined;\n\n\t\t\tif( this._active === layer ) {\n\t\t\t\tif( activateNext === true ) {\n\t\t\t\t\tif( index < children.length ) {\n\t\t\t\t\t\tthis._active = children[ index ];\n\t\t\t\t\t} else if( 0 < children.length ) {\n\t\t\t\t\t\tthis._active = children[ index - 1 ];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._active = null;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis._active = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.emit( \"change\", this );\n\t\t\tDApplications.update();\n\t\t}\n\t\treturn index;\n\t}\n\n\tget( index: number ): DDiagramLayer | null {\n\t\tconst child = this.children[ index ];\n\t\tif( child != null ) {\n\t\t\treturn child;\n\t\t}\n\t\treturn null;\n\t}\n\n\tclear(): void {\n\t\tconst children = this.children;\n\t\tif( 0 < children.length ) {\n\t\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\t(child as any).parent = null;\n\t\t\t\tchild.destroy();\n\t\t\t}\n\t\t\tchildren.length = 0;\n\n\t\t\tthis.emit( \"change\", this );\n\t\t\tDApplications.update();\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tif( ! this._destroyed ) {\n\t\t\tthis.clear();\n\t\t\tsuper.destroy();\n\t\t}\n\t}\n\n\tsize(): number {\n\t\treturn this.children.length;\n\t}\n\n\tserialize(\n\t\tmanager: EShapeResourceManagerSerialization, items: DDiagramSerializedItem[]\n\t): DDiagramSerializedLayer[] {\n\t\tconst result: DDiagramSerializedLayer[] = [];\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tresult.push( child.serialize( i, manager, items ) );\n\t\t}\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint } from \"pixi.js\";\nimport { DCanvas, DCanvasOptions, DThemeCanvas } from \"./d-canvas\";\nimport { DDiagramCanvasTile, DDiagramCanvasTileOptions } from \"./d-diagram-canvas-tile\";\nimport { DDiagramLayerContainer } from \"./d-diagram-layer-container\";\nimport { EShape } from \"./shape/e-shape\";\n\nexport interface DDiagramCanvasBaseOptions<\n\tTHEME extends DThemeDiagramCanvasBase = DThemeDiagramCanvasBase\n> extends DCanvasOptions<THEME> {\n\ttile?: DDiagramCanvasTileOptions;\n}\n\nexport interface DThemeDiagramCanvasBase extends DThemeCanvas {\n\n}\n\nexport class DDiagramCanvasBase<\n\tTHEME extends DThemeDiagramCanvasBase = DThemeDiagramCanvasBase,\n\tOPTIONS extends DDiagramCanvasBaseOptions<THEME> = DDiagramCanvasBaseOptions<THEME>\n> extends DCanvas<THEME, OPTIONS> {\n\tprotected _layer: DDiagramLayerContainer;\n\tprotected _tile: DDiagramCanvasTile;\n\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\n\t\tconst layer = new DDiagramLayerContainer();\n\t\tthis._layer = layer;\n\t\tthis.addChild( layer );\n\n\t\tconst tile = this._tile = new DDiagramCanvasTile( this, options && options.tile );\n\t\ttile.init();\n\t}\n\n\tget tile(): DDiagramCanvasTile {\n\t\treturn this._tile;\n\t}\n\n\tget layer(): DDiagramLayerContainer {\n\t\treturn this._layer;\n\t}\n\n\tinitialize( shapes: EShape[] ): void {\n\t\t// DO NOTHING\n\t}\n\n\tdestroy(): void {\n\t\tif( ! this._destroyed ) {\n\t\t\tthis._tile.destroy();\n\t\t\tthis._layer.destroy();\n\t\t\tsuper.destroy();\n\t\t}\n\t}\n\n\thitTest( global: IPoint, handler?: ( shape: EShape ) => boolean ): EShape | null {\n\t\tconst layers = this._layer.children;\n\t\tfor( let i = layers.length - 1; 0 <= i; --i ) {\n\t\t\tconst layer = layers[ i ];\n\t\t\tconst shape = layer.hitTest( global, handler );\n\t\t\tif( shape != null ) {\n\t\t\t\treturn shape;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDiagramCanvasBase\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Graphics } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DDiagramCanvasBase, DDiagramCanvasBaseOptions, DThemeDiagramCanvasBase } from \"./d-diagram-canvas-base\";\nimport { DDiagramSerialized, DDiagramSerializedItem, DDiagramSerializedVersion } from \"./d-diagram-serialized\";\nimport { EShapeResourceManagerSerialization } from \"./shape/e-shape-resource-manager-serialization\";\nimport { ESnapper } from \"./snapper/e-snapper\";\nimport { ESnapperTargetValueType } from \"./snapper/e-snapper-target-value\";\n\nexport interface DDiagramCanvasEditorOptions<\n\tTHEME extends DThemeDiagramCanvasEditor = DThemeDiagramCanvasEditor\n> extends DDiagramCanvasBaseOptions<THEME> {\n\tsnapper: ESnapper;\n}\n\nexport interface DThemeDiagramCanvasEditor extends DThemeDiagramCanvasBase {\n\n}\n\nexport class DDiagramCanvasEditor<\n\tTHEME extends DThemeDiagramCanvasEditor = DThemeDiagramCanvasEditor,\n\tOPTIONS extends DDiagramCanvasEditorOptions<THEME> = DDiagramCanvasEditorOptions<THEME>\n> extends DDiagramCanvasBase<THEME, OPTIONS> {\n\tprotected _snapper: ESnapper;\n\tprotected _snapperGraphics: Graphics;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\n\t\tthis.shadow = this.theme.newShadowWeak();\n\n\t\tconst snapperGraphics = new Graphics();\n\t\tsnapperGraphics.visible = false;\n\t\tthis.addChildAt( snapperGraphics, this.children.length - 1 );\n\t\tthis._snapperGraphics = snapperGraphics;\n\n\t\tconst snapper = options.snapper;\n\t\tsnapper.target.on( \"change\", (): void => {\n\t\t\tthis.toDirty();\n\t\t\tDApplications.update();\n\t\t});\n\t\tthis._snapper = snapper;\n\t}\n\n\tserialize( id: number | undefined ): DDiagramSerialized {\n\t\tconst manager = new EShapeResourceManagerSerialization();\n\t\tconst items: DDiagramSerializedItem[] = [];\n\t\tconst background = this.background;\n\t\treturn {\n\t\t\tversion: DDiagramSerializedVersion,\n\t\t\tid,\n\t\t\tname: this.name,\n\t\t\twidth: this.width,\n\t\t\theight: this.height,\n\t\t\tbackground: {\n\t\t\t\tcolor: background.getColor( 0 ),\n\t\t\t\talpha: background.getAlpha( 0 )\n\t\t\t},\n\t\t\ttile: this._tile.serialize(),\n\t\t\tresources: manager.serialize(),\n\t\t\tlayers: this._layer.serialize( manager, items ),\n\t\t\titems,\n\t\t\tsnap: this._snapper.serialize()\n\t\t};\n\t}\n\n\tonReflow(): void {\n\t\tsuper.onReflow();\n\n\t\tconst snapperGraphics = this._snapperGraphics;\n\t\tconst target = this._snapper.target;\n\t\tif( target.visible ) {\n\t\t\tconst borderColor = 0x1e87f0;\n\t\t\tconst borderWidth = 1;\n\t\t\tconst borderAlpha = 0.5;\n\t\t\tconst width = this.width + 0.5;\n\t\t\tconst height = this.height + 0.5;\n\t\t\tconst values = target.values;\n\t\t\tsnapperGraphics.clear();\n\t\t\tsnapperGraphics.lineStyle( 0, 0, 0, 0 );\n\t\t\tsnapperGraphics.beginFill( borderColor, borderAlpha );\n\t\t\tfor( let i = 0, imax = values.length; i < imax; ++i ) {\n\t\t\t\tconst value = values[ i ];\n\t\t\t\tif( value.type === ESnapperTargetValueType.VERTICAL ) {\n\t\t\t\t\tsnapperGraphics.drawRect( value.position, 0, borderWidth, height );\n\t\t\t\t} else {\n\t\t\t\t\tsnapperGraphics.drawRect( 0, value.position, width, borderWidth );\n\t\t\t\t}\n\t\t\t}\n\t\t\tsnapperGraphics.endFill();\n\t\t\tsnapperGraphics.visible = true;\n\t\t} else {\n\t\t\tsnapperGraphics.visible = false;\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDiagramCanvasEditor\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramCanvasTileMapping } from \"./d-diagram-canvas-mapping\";\n\nexport const DDiagramSerializedVersion = 1;\n\nexport interface DDiagramSerializedTagRange {\n\t[ 0 ]: number; // type\n\t[ 1 ]: number; // from\n\t[ 2 ]: number; // to\n}\n\nexport interface DDiagramSerializedTagValue {\n\t[ 0 ]: number; // id (Stored as a resouce)\n\t[ 1 ]: number; // initial value (Stored as a resource)\n\t[ 2 ]: number; // format (Stored as a resouce)\n\t[ 3 ]: number; // Range (Stored as a resource)\n\t[ 4 ]: number; // Capacity\n\t[ 5 ]: number; // Order\n}\n\nexport interface DDiagramSerializedFill {\n\t[ 0 ]: number; // enable (0: false, 1: true)\n\t[ 1 ]: number; // color\n\t[ 2 ]: number; // alpha\n}\n\nexport interface DDiagramSerializedStroke {\n\t[ 0 ]: number; // enable (0: false, 1: true)\n\t[ 1 ]: number; // color\n\t[ 2 ]: number; // alpha\n\t[ 3 ]: number; // width\n\t[ 4 ]: number; // align\n\t[ 5 ]: number; // side\n}\n\nexport interface DDiagramSerializedTextOutline {\n\t[ 0 ]: number; // enable (0: false, 1: true)\n\t[ 1 ]: number; // color\n\t[ 2 ]: number; // alpha\n\t[ 3 ]: number; // width\n}\n\nexport interface DDiagramSerializedText {\n\t[  0 ]: number; // value (Stored as a resouce)\n\t[  1 ]: number; // color\n\t[  2 ]: number; // alpha\n\t[  3 ]: number; // family (Stored as a resouce)\n\t[  4 ]: number; // size\n\t[  5 ]: number; // weight (0: normal, 1: bold)\n\t[  6 ]: number; // align (Stored as a resource)\n\t[  7 ]: number; // margin (Stored as a resource)\n\t[  8 ]: number; // style (0: normal, 1: italic)\n\t[  9 ]: number; // outline (Stored as a resource)\n\t[ 10 ]: number; // spacing (Stored as a resource)\n\t[ 11 ]: number; // direction\n\t[ 12 ]: number; // padding\n\t[ 13 ]: number; // clipping (0: false, 1: true)\n}\n\nexport interface DDiagramSerializedItem {\n\t[  0 ]: number; // type\n\t[  1 ]: number; // id (Stored as resource)\n\t[  2 ]: number; // x\n\t[  3 ]: number; // y\n\t[  4 ]: number; // width\n\t[  5 ]: number; // height\n\t[  6 ]: number; // rotation\n\t[  7 ]: number; // skew\n\t[  8 ]: number; // fill (Stored as a resource)\n\t[  9 ]: number; // stroke (Stored as a resource)\n\t[ 10 ]: number; // cursor (Stored as a resource)\n\t[ 11 ]: number; // text (Stored as a resource)\n\t[ 12 ]: number; // tag (Stored as a resource)\n\t[ 13 ]: number; // radius\n\t[ 14 ]: number; // Corner\n\t[ 15 ]: number; // resource (Stored as a resouce)\n\t[ 16 ]: number; // layer\n\t[ 17 ]: number[]; // actions\n\t[ 18 ]: number; // Image (Stored as a resource)\n\t[ 19 ]: number; // Gradient\n\t[ 20 ]: DDiagramSerializedItem[];\n\t[ 21 ]: number; // pivot x\n\t[ 22 ]: number; // pivot y\n\t[ 23 ]: number; // (interactive ? 1 : 0) | (unfocusable ? 2 : 0)\n\t[ 24 ]: number; // shortcut\n\t[ 25 ]: number; // title\n}\n\nexport interface DDiagramSerializedLayer {\n\t[ 0 ]: string;\n}\n\nexport interface DDiagramSerializedSnapTargetValue {\n\t[ 0 ]: number; // 0: Horizontal, 1: Vertical\n\t[ 1 ]: number; // Position\n}\n\nexport interface DDiagramSerializedSnapTarget {\n\t[ 0 ]: number; // Snap on guide (0: Off, 1: On)\n\t[ 1 ]: number; // Visibility (0: Invisible, 1: Visible)\n\t[ 2 ]: DDiagramSerializedSnapTargetValue[]; // Snap targets\n}\n\nexport interface DDiagramSerializedSnapGrid {\n\t[ 0 ]: number; // Snap on grid (0: Off, 1: On)\n\t[ 1 ]: number; // Grid size\n}\n\nexport interface DDiagramSerializedSnap {\n\t[ 0 ]: number; // Snap (0: Off, 1: On)\n\t[ 1 ]: DDiagramSerializedSnapTarget;\n\t[ 2 ]: DDiagramSerializedSnapGrid;\n}\n\nexport interface DDiagramSerialized {\n\tversion: number;\n\tid?: number;\n\tname: string;\n\twidth: number;\n\theight: number;\n\tbackground?: {\n\t\tcolor?: number | null,\n\t\talpha?: number\n\t};\n\ttile?: {\n\t\tmapping?: DDiagramCanvasTileMapping;\n\t};\n\tresources: string[];\n\tlayers: DDiagramSerializedLayer[];\n\titems: DDiagramSerializedItem[];\n\tsnap?: DDiagramSerializedSnap;\n}\n\nexport interface DDiagramSerializedSimple {\n\tversion: number;\n\tid: number | undefined;\n\tname: string;\n\tdata: string;\n}\n\nexport interface DDiagramSerializedName {\n\tid: number;\n\tname: string;\n}\n\nexport interface DDiagramSerializedTag {\n\tgid: number;\n\tid: string;\n\tsource: string;\n\tdevice: string;\n\tsensor: string;\n\ttype: string;\n\tinterval: number;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction, Point } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DControllers } from \"./d-controllers\";\nimport { DDiagramCanvasBase, DDiagramCanvasBaseOptions, DThemeDiagramCanvasBase } from \"./d-diagram-canvas-base\";\nimport { EShape } from \"./shape/e-shape\";\nimport { EShapeTagValue } from \"./shape/e-shape-tag-value\";\nimport { EShapeBase } from \"./shape/variant/e-shape-base\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\n\ninterface Tags { [ id: string ]: EShapeTagValue[]; }\ninterface Ids { [ id: string ]: EShape[] | undefined; }\n\nexport interface DDiagramCanvasOptions<\n\tTHEME extends DThemeDiagramCanvas = DThemeDiagramCanvas\n> extends DDiagramCanvasBaseOptions<THEME> {\n\n}\n\nexport interface DThemeDiagramCanvas extends DThemeDiagramCanvasBase {\n\n}\n\nexport class DDiagramCanvas<\n\tTHEME extends DThemeDiagramCanvas = DThemeDiagramCanvas,\n\tOPTIONS extends DDiagramCanvasOptions<THEME> = DDiagramCanvasOptions<THEME>\n> extends DDiagramCanvasBase<THEME, OPTIONS> {\n\ttags: Tags;\n\tinteractives: EShape[];\n\tactionables: EShape[];\n\tids: Ids;\n\n\tprotected _work: Point;\n\tprotected _lastOverShape: EShape | null;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis.tags = {};\n\t\tthis.interactives = [];\n\t\tthis.actionables = [];\n\t\tthis.ids = {};\n\t\tthis._work = new Point();\n\t\tthis._lastOverShape = null;\n\t}\n\n\tinitialize(): void {\n\t\tconst time = Date.now();\n\t\tconst tags = this.tags;\n\t\tconst interactives = this.interactives;\n\t\tconst actionables = this.actionables;\n\t\tconst ids = this.ids;\n\t\tconst layers = this._layer.children;\n\n\t\tfor( let i = 0, imax = layers.length; i < imax; ++i ) {\n\t\t\tthis.initializeShapes( layers[ i ].children, tags, interactives, actionables, ids );\n\t\t}\n\n\t\tfor( let i = 0, imax = layers.length; i < imax; ++i ) {\n\t\t\tthis.updateShapes( layers[ i ].children, time );\n\t\t}\n\n\t\tthis.initializeFocus();\n\t}\n\n\tprotected initializeFocus(): void {\n\t\tconst focusController = DControllers.getFocusController();\n\t\tconst focusable = focusController.findFocusable( this, false, true, true );\n\t\tif( focusable != null ) {\n\t\t\tfocusController.setFocused( focusable, true, true );\n\t\t}\n\t}\n\n\tprotected initializeShapes(\n\t\tshapes: EShape[], tags: Tags, interactives: EShape[], actionables: EShape[], ids: Ids\n\t): void {\n\t\tfor( let i = 0, imax = shapes.length; i < imax; ++i ) {\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\t// Tag mappings\n\t\t\tconst tag = shape.tag;\n\t\t\tfor( let j = 0, jmax = tag.size(); j < jmax; ++j ) {\n\t\t\t\tconst value = tag.get( j );\n\t\t\t\tif( value != null ) {\n\t\t\t\t\tconst valueId = value.id;\n\t\t\t\t\tif( 0 < valueId.length ) {\n\t\t\t\t\t\tlet values = tags[ valueId ];\n\t\t\t\t\t\tif( values == null ) {\n\t\t\t\t\t\t\tvalues = [];\n\t\t\t\t\t\t\ttags[ valueId ] = values;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvalues.push( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Id mappings\n\t\t\tconst shapeId = shape.id;\n\t\t\tif( 0 < shapeId.length ) {\n\t\t\t\tconst mapping: EShape[] | undefined = ids[ shapeId ];\n\t\t\t\tif( mapping == null ) {\n\t\t\t\t\tids[ shapeId ] = [ shape ];\n\t\t\t\t} else {\n\t\t\t\t\tmapping.push( shape );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Interactives\n\t\t\tif( shape.interactive || (0 < shape.cursor.length) || (shape.runtime != null && shape.runtime.interactive) ) {\n\t\t\t\tinteractives.push( shape );\n\t\t\t}\n\n\t\t\t// Actionables\n\t\t\tconst runtime = shape.runtime;\n\t\t\tif( runtime != null && 0 < runtime.actions.length ) {\n\t\t\t\tactionables.push( shape );\n\t\t\t}\n\n\t\t\t// Shortcuts\n\t\t\tconst shortcut = shape.shortcut;\n\t\t\tif( shortcut != null ) {\n\t\t\t\tUtilKeyboardEvent.on( this, shortcut, ( e: KeyboardEvent ): void => {\n\t\t\t\t\tshape.onShortcut( e );\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Children\n\t\t\tconst children = shape.children;\n\t\t\tif( 0 < children.length ) {\n\t\t\t\tthis.initializeShapes( children, tags, interactives, actionables, ids );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected updateShapes( shapes: EShape[], time: number ): void {\n\t\tfor( let i = 0, imax = shapes.length; i < imax; ++i ) {\n\t\t\tshapes[ i ].update( time );\n\t\t}\n\t}\n\n\tonShapeMove( e: interaction.InteractionEvent ): boolean {\n\t\tconst global = e.data.global;\n\t\tconst work = this._work;\n\n\t\tconst interactives = this.interactives;\n\t\tlet found: EShape | null = null;\n\t\tfor( let i = interactives.length - 1; 0 <= i; --i ) {\n\t\t\tconst interactive = interactives[ i ];\n\t\t\tif( interactive.visible ) {\n\t\t\t\tconst interactiveLocal = interactive.toLocal( global, undefined, work );\n\t\t\t\tif( interactive.contains( interactiveLocal ) != null ) {\n\t\t\t\t\tfound = interactive;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst application = DApplications.getInstance();\n\t\tif( found != null ) {\n\t\t\tif( 0 < found.cursor.length ) {\n\t\t\t\tif( application.view.style.cursor !== found.cursor ) {\n\t\t\t\t\tapplication.view.style.cursor = found.cursor;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst lastOverShape = this._lastOverShape;\n\t\t\tif( found === lastOverShape ) {\n\t\t\t\tconst runtime = lastOverShape.runtime;\n\t\t\t\tif( runtime != null ) {\n\t\t\t\t\truntime.onPointerMove( lastOverShape, e );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._lastOverShape = found;\n\n\t\t\t\t// Previous\n\t\t\t\tif( lastOverShape != null ) {\n\t\t\t\t\tconst previousRuntime = lastOverShape.runtime;\n\t\t\t\t\tif( previousRuntime != null ) {\n\t\t\t\t\t\tpreviousRuntime.onPointerOut( lastOverShape, e );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Parents\n\t\t\t\t\tlet lastOverParent = lastOverShape.parent;\n\t\t\t\t\twhile( (lastOverParent instanceof EShapeBase) && lastOverParent !== found ) {\n\t\t\t\t\t\tconst parentRuntime = lastOverShape.runtime;\n\t\t\t\t\t\tif( parentRuntime != null ) {\n\t\t\t\t\t\t\tparentRuntime.onPointerOut( lastOverParent, e );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlastOverParent = lastOverParent.parent;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Next\n\t\t\t\tconst runtime = found.runtime;\n\t\t\t\tif( runtime != null ) {\n\t\t\t\t\truntime.onPointerOver( found, e );\n\t\t\t\t}\n\t\t\t\tDApplications.getInstance().view.title = ( found.title || \"\" );\n\n\t\t\t\t// Parents\n\t\t\t\tlet parent = found.parent;\n\t\t\t\twhile( parent instanceof EShapeBase ) {\n\t\t\t\t\tconst parentRuntime = parent.runtime;\n\t\t\t\t\tif( parentRuntime != null ) {\n\t\t\t\t\t\tparentRuntime.onPointerOver( parent, e );\n\t\t\t\t\t}\n\t\t\t\t\tparent = parent.parent;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t} else {\n\t\t\tif( application.view.style.cursor !== \"auto\" ) {\n\t\t\t\tapplication.view.style.cursor = \"auto\";\n\t\t\t}\n\n\t\t\t// Previous\n\t\t\tconst lastOverShape = this._lastOverShape;\n\t\t\tthis._lastOverShape = null;\n\t\t\tif( lastOverShape != null ) {\n\t\t\t\tconst runtime = lastOverShape.runtime;\n\t\t\t\tif( runtime != null ) {\n\t\t\t\t\truntime.onPointerOut( lastOverShape, e );\n\t\t\t\t}\n\n\t\t\t\t// Parents\n\t\t\t\tlet lastOverParent = lastOverShape.parent;\n\t\t\t\twhile( lastOverParent instanceof EShapeBase ) {\n\t\t\t\t\tconst parentRuntime = lastOverParent.runtime;\n\t\t\t\t\tif( parentRuntime != null ) {\n\t\t\t\t\t\tparentRuntime.onPointerOut( lastOverParent, e );\n\t\t\t\t\t}\n\t\t\t\t\tlastOverParent = lastOverParent.parent;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//\n\t\t\tDApplications.getInstance().view.title = \"\";\n\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tonShapeDown( e: interaction.InteractionEvent ): boolean {\n\t\tconst interactives = this.interactives;\n\t\tconst global = e.data.global;\n\t\tconst work = this._work;\n\t\tfor( let i = interactives.length - 1; 0 <= i; --i ) {\n\t\t\tconst interactive = interactives[ i ];\n\t\t\tif( interactive.visible ) {\n\t\t\t\tconst local = interactive.toLocal( global, undefined, work );\n\t\t\t\tif( interactive.contains( local ) != null ) {\n\t\t\t\t\tconst runtime = interactive.runtime;\n\t\t\t\t\tif( runtime != null ) {\n\t\t\t\t\t\truntime.onPointerDown( interactive, e );\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tonShapeUp( e: interaction.InteractionEvent ): boolean {\n\t\tconst interactives = this.interactives;\n\t\tconst global = e.data.global;\n\t\tconst work = this._work;\n\t\tfor( let i = interactives.length - 1; 0 <= i; --i ) {\n\t\t\tconst interactive = interactives[ i ];\n\t\t\tif( interactive.visible ) {\n\t\t\t\tconst local = interactive.toLocal( global, undefined, work );\n\t\t\t\tif( interactive.contains( local ) != null ) {\n\t\t\t\t\tconst runtime = interactive.runtime;\n\t\t\t\t\tif( runtime != null ) {\n\t\t\t\t\t\truntime.onPointerUp( interactive, e );\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tonShapeClick( e: interaction.InteractionEvent ): boolean {\n\t\tconst interactives = this.interactives;\n\t\tconst global = e.data.global;\n\t\tconst work = this._work;\n\t\tfor( let i = interactives.length - 1; 0 <= i; --i ) {\n\t\t\tconst clickable = interactives[ i ];\n\t\t\tif( clickable.visible ) {\n\t\t\t\tconst clickableLocal = clickable.toLocal( global, undefined, work );\n\t\t\t\tif( clickable.contains( clickableLocal ) != null ) {\n\t\t\t\t\tlet target: EShape = clickable;\n\t\t\t\t\twhile( true ) {\n\t\t\t\t\t\tconst runtime = target.runtime;\n\t\t\t\t\t\tif( runtime != null ) {\n\t\t\t\t\t\t\truntime.onPointerClick( target, e );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst parent = target.parent;\n\t\t\t\t\t\tif( parent instanceof EShapeBase ) {\n\t\t\t\t\t\t\ttarget = parent;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDiagramCanvas\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplications } from \"./d-applications\";\nimport { DBase } from \"./d-base\";\nimport { DDiagramLayerContainer } from \"./d-diagram-layer-container\";\nimport { DDiagramSerialized, DDiagramSerializedSimple } from \"./d-diagram-serialized\";\nimport { EShape } from \"./shape/e-shape\";\nimport { EShapeDefaults } from \"./shape/e-shape-defaults\";\nimport { EShapeDeserializer } from \"./shape/e-shape-deserializer\";\n\nexport class DDiagrams {\n\tstatic toSerialized( simple: DDiagramSerializedSimple ): DDiagramSerialized {\n\t\tconst result: DDiagramSerialized = JSON.parse( simple.data );\n\t\tresult.id = simple.id;\n\t\treturn result;\n\t}\n\n\tstatic newLayer(\n\t\tserialized: DDiagramSerialized,\n\t\tcontainer: DDiagramLayerContainer\n\t): Promise<EShape[]> {\n\t\t// Layers\n\t\tconst pflayers = serialized.layers;\n\t\tfor( let i = 0, imax = pflayers.length; i < imax; ++i ) {\n\t\t\tcontainer.create( pflayers[ i ][ 0 ] || \"\" );\n\t\t}\n\n\t\t// Activate the first later if it exists\n\t\tif( 0 < container.size() ) {\n\t\t\tcontainer.active = container.children[ 0 ];\n\t\t}\n\n\t\t// Items\n\t\tconst pfresources = serialized.resources;\n\t\tconst pfitems = serialized.items;\n\t\tconst shapePromises = EShapeDeserializer.deserializeAll( pfitems, pfresources );\n\t\tif( shapePromises != null ) {\n\t\t\treturn shapePromises.then(( shapes: EShape[] ): EShape[] => {\n\t\t\t\tconst layers = container.children;\n\t\t\t\tfor( let i = 0, imax = shapes.length; i < imax; ++i ) {\n\t\t\t\t\tconst pfitem = pfitems[ i ];\n\t\t\t\t\tconst shape = shapes[ i ];\n\t\t\t\t\tconst layer = layers[ pfitem[ 16 ] ];\n\t\t\t\t\tif( layer != null ) {\n\t\t\t\t\t\tshape.attach( layer );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn shapes;\n\t\t\t});\n\t\t} else {\n\t\t\treturn Promise.resolve([]);\n\t\t}\n\t}\n\n\tstatic applyBackground(\n\t\tserialized: DDiagramSerialized,\n\t\tcanvas: DBase,\n\t\tcanvasContainer: DBase\n\t): void {\n\t\tconst background = serialized.background;\n\t\tconst renderer = DApplications.getInstance().renderer;\n\t\tconst backgroundColor = ( background && background.color != null ? background.color : 0xffffff );\n\t\tconst backgroundAlpha = ( background && background.alpha != null ? background.alpha : 1.0 );\n\t\tif( EShapeDefaults.IS_EDIT_MODE ) {\n\t\t\tcanvas.background.color = backgroundColor;\n\t\t\tcanvas.background.alpha = backgroundAlpha;\n\t\t} else {\n\t\t\tcanvasContainer.background.color = backgroundColor;\n\t\t\trenderer.backgroundColor = backgroundColor;\n\t\t\tcanvasContainer.background.alpha = backgroundAlpha;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplications } from \"./d-applications\";\nimport { DCanvasContainer, DCanvasContainerOptions, DThemeCanvasContainer } from \"./d-canvas-container\";\nimport { DDiagramCanvasBase } from \"./d-diagram-canvas-base\";\nimport { DDiagramCanvasTilePyramidFactory } from \"./d-diagram-canvas-tile\";\nimport { DDiagramLayer } from \"./d-diagram-layer\";\nimport { DDiagramSerialized } from \"./d-diagram-serialized\";\nimport { DDiagrams } from \"./d-diagrams\";\nimport { EShape } from \"./shape/e-shape\";\n\nexport interface DDiagramBaseOptions<\n\tCANVAS extends DDiagramCanvasBase = DDiagramCanvasBase,\n\tTHEME extends DThemeDiagramBase = DThemeDiagramBase\n> extends DCanvasContainerOptions<CANVAS, THEME> {\n\ttile?: DDiagramCanvasTilePyramidFactory;\n}\n\nexport interface DThemeDiagramBase extends DThemeCanvasContainer {\n\n}\n\nexport abstract class DDiagramBase<\n\tCANVAS extends DDiagramCanvasBase = DDiagramCanvasBase,\n\tTHEME extends DThemeDiagramBase = DThemeDiagramBase,\n\tOPTIONS extends DDiagramBaseOptions<CANVAS, THEME> = DDiagramBaseOptions<CANVAS, THEME>\n> extends DCanvasContainer<CANVAS, THEME, OPTIONS> {\n\tprotected _serialized: DDiagramSerialized | null;\n\tprotected _tileFactory?: DDiagramCanvasTilePyramidFactory;\n\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis._serialized = null;\n\t\tthis._tileFactory = options && options.tile;\n\t}\n\n\tset( serialized: DDiagramSerialized | null ) {\n\t\tconst oldSerialized = this._serialized;\n\t\tif( oldSerialized !== serialized ) {\n\t\t\tif( oldSerialized ) {\n\t\t\t\tthis._serialized = null;\n\t\t\t\tthis.onUnset();\n\t\t\t}\n\n\t\t\tthis._serialized = serialized;\n\t\t\tif( serialized ) {\n\t\t\t\tthis.onSet( serialized );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onSet( serialized: DDiagramSerialized ): void {\n\t\tconst canvas = this.newCanvas( serialized );\n\t\tDDiagrams.newLayer( serialized, canvas.layer ).then(( shapes: EShape[] ): void => {\n\t\t\tthis.initialize( shapes );\n\t\t\tcanvas.initialize( shapes );\n\t\t\tDApplications.update();\n\t\t});\n\t\tDDiagrams.applyBackground( serialized, canvas, this );\n\t\tthis.canvas = canvas;\n\t}\n\n\tprotected initialize( shapes: EShape[] ): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected abstract newCanvas( serialized: DDiagramSerialized ): CANVAS;\n\n\tprotected onUnset(): void {\n\t\tconst canvas = this.canvas;\n\t\tif( canvas != null ) {\n\t\t\tthis.canvas = null;\n\t\t}\n\t}\n\n\tget(): DDiagramSerialized | null {\n\t\treturn this._serialized;\n\t}\n\n\tget layer(): DDiagramLayer | null {\n\t\tconst canvas = this.canvas;\n\t\tif( canvas != null ) {\n\t\t\treturn canvas.layer.active;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDiagramBase\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DControllerDocument } from \"./d-controller-document\";\nimport { DControllers } from \"./d-controllers\";\nimport { DDiagramBase, DDiagramBaseOptions, DThemeDiagramBase } from \"./d-diagram-base\";\nimport { DDiagramCanvasEditor } from \"./d-diagram-canvas-editor\";\nimport { DDiagramSerialized, DDiagramSerializedSimple, DDiagramSerializedVersion } from \"./d-diagram-serialized\";\nimport { DDiagrams } from \"./d-diagrams\";\nimport { ESnapper } from \"./snapper/e-snapper\";\n\nexport interface DDiagramEditorController {\n\tget( id: number ): Promise<DDiagramSerializedSimple>;\n\tsave( simple: DDiagramSerializedSimple ): Promise<number>;\n\tdelete( id: number ): Promise<void>;\n}\n\nexport interface DDiagramEditorOptions<\n\tTHEME extends DThemeDiagramEditor = DThemeDiagramEditor\n> extends DDiagramBaseOptions<DDiagramCanvasEditor, THEME> {\n\tcontroller: DDiagramEditorController;\n}\n\nexport interface DThemeDiagramEditor extends DThemeDiagramBase {\n\n}\n\nexport class DDiagramEditor<\n\tTHEME extends DThemeDiagramEditor = DThemeDiagramEditor,\n\tOPTIONS extends DDiagramEditorOptions<THEME> = DDiagramEditorOptions<THEME>\n> extends DDiagramBase<DDiagramCanvasEditor, THEME, OPTIONS> implements DControllerDocument<DDiagramSerialized> {\n\tprotected _isChanged: boolean = false;\n\tprotected _controller: DDiagramEditorController;\n\tsnapper: ESnapper;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis._controller = options.controller;\n\t\tthis._isChanged = false;\n\n\t\tconst commands = DControllers.getCommandController();\n\t\tcommands.on( \"dirty\", (): void => {\n\t\t\tif( this._isChanged !== true ) {\n\t\t\t\tthis._isChanged = true;\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t}\n\t\t});\n\n\t\tthis.snapper = new ESnapper( this );\n\t}\n\n\tprotected newCanvas( serialized: DDiagramSerialized ): DDiagramCanvasEditor {\n\t\treturn new DDiagramCanvasEditor({\n\t\t\tname: serialized.name,\n\t\t\twidth: serialized.width,\n\t\t\theight: serialized.height,\n\t\t\tsnapper: this.snapper,\n\t\t\ttile: {\n\t\t\t\tfactory: this._tileFactory,\n\t\t\t\tmapping: serialized.tile && serialized.tile.mapping\n\t\t\t}\n\t\t});\n\t}\n\n\tserialize(): DDiagramSerialized | null {\n\t\tconst canvas = this.canvas;\n\t\tconst serialized = this._serialized;\n\t\tif( canvas != null && serialized != null ) {\n\t\t\treturn canvas.serialize( serialized.id );\n\t\t}\n\t\treturn null;\n\t}\n\n\tsave(): Promise<unknown> | boolean {\n\t\tconst serialized = this.serialize();\n\t\tif( serialized != null ) {\n\t\t\treturn this.controller.save({\n\t\t\t\tversion: serialized.version,\n\t\t\t\tid: serialized.id,\n\t\t\t\tname: serialized.name,\n\t\t\t\tdata: JSON.stringify( serialized )\n\t\t\t})\n\t\t\t.then(( newId: number ): void => {\n\t\t\t\tthis._isChanged = false;\n\t\t\t\tserialized.id = newId;\n\t\t\t\tthis._serialized = serialized;\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\tthis.emit( \"success\", \"save\", this );\n\t\t\t}, ( reason: any ): void => {\n\t\t\t\tthis.emit( \"fail\", \"save\", this );\n\t\t\t});\n\t\t}\n\t\treturn true;\n\t}\n\n\tsaveAs( name: string ): Promise<unknown> | boolean {\n\t\tconst serialized = this.serialize();\n\t\tif( serialized != null ) {\n\t\t\tserialized.id = undefined;\n\t\t\tserialized.name = name;\n\t\t\treturn this.controller.save({\n\t\t\t\tversion: serialized.version,\n\t\t\t\tid: serialized.id,\n\t\t\t\tname: serialized.name,\n\t\t\t\tdata: JSON.stringify( serialized )\n\t\t\t})\n\t\t\t.then(( newId: number ): void => {\n\t\t\t\tthis._isChanged = false;\n\t\t\t\tserialized.id = newId;\n\t\t\t\tthis._serialized = serialized;\n\t\t\t\tconst canvas = this.canvas;\n\t\t\t\tif( canvas != null ) {\n\t\t\t\t\tcanvas.name = name;\n\t\t\t\t}\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\tthis.emit( \"success\", \"save-as\", this );\n\t\t\t}, ( reason: any ): void => {\n\t\t\t\tthis.emit( \"fail\", \"save-as\", this );\n\t\t\t});\n\t\t}\n\t\treturn true;\n\t}\n\n\tdelete(): Promise<unknown> | boolean {\n\t\tconst serialized = this._serialized;\n\t\tif( serialized != null ) {\n\t\t\tif( serialized.id != null ) {\n\t\t\t\treturn this.controller.delete( serialized.id )\n\t\t\t\t.then((): void => {\n\t\t\t\t\tthis.set( null );\n\t\t\t\t\tthis.emit( \"success\", \"delete\", this );\n\t\t\t\t}, ( reason: any ): void => {\n\t\t\t\t\tthis.emit( \"fail\", \"delete\", this );\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.set( null );\n\t\t\t\tthis.emit( \"success\", \"delete\", this );\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tcreate( name: string, width: number, height: number ): Promise<unknown> | boolean {\n\t\tthis.set({\n\t\t\tversion: DDiagramSerializedVersion,\n\t\t\tid: undefined,\n\t\t\tname,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tresources: [],\n\t\t\tlayers: [[ \"Default layer\" ]],\n\t\t\titems: [],\n\t\t\tsnap: undefined\n\t\t});\n\t\treturn true;\n\t}\n\n\tprotected onSet( serialized: DDiagramSerialized ): void {\n\t\tsuper.onSet( serialized );\n\t\tconst snap = serialized.snap;\n\t\tconst snapper = this.snapper;\n\t\tif( snap != null ) {\n\t\t\tsnapper.deserialize( snap );\n\t\t} else {\n\t\t\tsnapper.reset();\n\t\t}\n\t\tthis._isChanged = false;\n\t\tthis.emit( \"change\", this );\n\t}\n\n\tprotected onUnset(): void {\n\t\tsuper.onUnset();\n\t\tthis._isChanged = false;\n\t\tthis.emit( \"change\", this );\n\t}\n\n\topen( id: number ): Promise<unknown> | boolean {\n\t\treturn this._controller.get( id ).then(( simple: DDiagramSerializedSimple ): void => {\n\t\t\tthis.set( DDiagrams.toSerialized( simple ) );\n\t\t\tthis.emit( \"success\", \"open\", this );\n\t\t}, ( reason: any ): void => {\n\t\t\tthis.emit( \"fail\", \"open\", this );\n\t\t});\n\t}\n\n\tclose(): void {\n\t\tthis.set( null );\n\t}\n\n\tisChanged(): boolean {\n\t\treturn this._isChanged || this.isNew();\n\t}\n\n\tisNew(): boolean {\n\t\tconst serialized = this._serialized;\n\t\tif( serialized != null ) {\n\t\t\treturn serialized.id == null;\n\t\t}\n\t\treturn false;\n\t}\n\n\tgetName(): string | null {\n\t\tconst serialized = this._serialized;\n\t\tif( serialized != null ) {\n\t\t\treturn serialized.name;\n\t\t}\n\t\treturn null;\n\t}\n\n\tget controller(): DDiagramEditorController {\n\t\treturn this._controller;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDiagramEditor\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction } from \"pixi.js\";\nimport { DDiagramBase, DDiagramBaseOptions, DThemeDiagramBase } from \"./d-diagram-base\";\nimport { DDiagramCanvas } from \"./d-diagram-canvas\";\nimport { DDiagramSerialized } from \"./d-diagram-serialized\";\nimport { EShapeActionRuntime } from \"./shape/action/e-shape-action-runtime\";\nimport { EShapeActionRuntimeOpen } from \"./shape/action/e-shape-action-runtime-open\";\nimport { EShapeActionValue } from \"./shape/action/e-shape-action-value\";\nimport { EShape } from \"./shape/e-shape\";\nimport { EShapeRuntime } from \"./shape/e-shape-runtime\";\nimport { EShapeRuntimes } from \"./shape/e-shape-runtimes\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport interface DDiagramOptions<\n\tTHEME extends DThemeDiagram = DThemeDiagram\n> extends DDiagramBaseOptions<DDiagramCanvas, THEME> {\n\n}\n\nexport interface DThemeDiagram extends DThemeDiagramBase {\n\n}\n\nexport class DDiagram<\n\tTHEME extends DThemeDiagram = DThemeDiagram,\n\tOPTIONS extends DDiagramOptions<THEME> = DDiagramOptions<THEME>\n> extends DDiagramBase<DDiagramCanvas, THEME, OPTIONS> {\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\n\t\t// Hover handling\n\t\tthis.on( UtilPointerEvent.move, ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( UtilPointerEvent.contains( this, e.target ) ) {\n\t\t\t\tconst canvas = this.canvas;\n\t\t\t\tif( canvas != null ) {\n\t\t\t\t\tcanvas.onShapeMove( e );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Pointer down / up handling\n\t\tthis.on( UtilPointerEvent.up, ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( UtilPointerEvent.contains( this, e.target ) ) {\n\t\t\t\tconst canvas = this.canvas;\n\t\t\t\tif( canvas != null ) {\n\t\t\t\t\tcanvas.onShapeUp( e );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Click handling\n\t\tthis.on( \"click\", ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( UtilPointerEvent.contains( this, e.target ) ) {\n\t\t\t\tconst canvas = this.canvas;\n\t\t\t\tif( canvas != null ) {\n\t\t\t\t\tcanvas.onShapeClick( e );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected initialize( shapes: EShape[] ): void {\n\t\tconst formatterMap: { [format: string]: ( value: unknown ) => unknown } = {};\n\t\tconst initialMap: { [initial: string]: unknown | undefined } = {};\n\t\tconst actionMap: Map<EShapeActionValue, EShapeActionRuntime> = new Map<EShapeActionValue, EShapeActionRuntime>();\n\n\t\tfor( let i = 0, imax = shapes.length; i < imax; ++i ) {\n\t\t\tconst shape = shapes[ i ];\n\t\t\tconst runtimeConstructor = EShapeRuntimes[ shape.type ] || EShapeRuntime;\n\t\t\tconst runtime = shape.runtime = new (runtimeConstructor)( shape );\n\n\t\t\t// Tag\n\t\t\tconst tag = shape.tag;\n\t\t\tfor( let j = 0, jmax = tag.size(); j < jmax; ++j ) {\n\t\t\t\tconst value = tag.get( j );\n\t\t\t\tif( value != null ) {\n\t\t\t\t\t// Format\n\t\t\t\t\tconst tagFormat = value.format;\n\t\t\t\t\tconst tagInitial = value.initial;\n\t\t\t\t\tif( tagFormat in formatterMap ) {\n\t\t\t\t\t\tvalue.formatter = formatterMap[ tagFormat ];\n\t\t\t\t\t} else if( 0 < tagFormat.length ) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst formatter = Function(\n\t\t\t\t\t\t\t\t\"value\",\n\t\t\t\t\t\t\t\t`try {` +\n\t\t\t\t\t\t\t\t\t`return (${tagFormat});` +\n\t\t\t\t\t\t\t\t`} catch( e1 ) {` +\n\t\t\t\t\t\t\t\t\t`try {` +\n\t\t\t\t\t\t\t\t\t\t`return (${0 < tagInitial.length ? tagInitial : 0});` +\n\t\t\t\t\t\t\t\t\t`} catch( e2 ) {` +\n\t\t\t\t\t\t\t\t\t\t`return 0;` +\n\t\t\t\t\t\t\t\t\t`}` +\n\t\t\t\t\t\t\t\t`}`\n\t\t\t\t\t\t\t) as any;\n\t\t\t\t\t\t\tformatterMap[ tagFormat ] = formatter;\n\t\t\t\t\t\t\tvalue.formatter = formatter;\n\t\t\t\t\t\t} catch( e ) {\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Initial\n\t\t\t\t\tif( tagInitial in initialMap ) {\n\t\t\t\t\t\tvalue.value = initialMap[ tagInitial ];\n\t\t\t\t\t} else if( 0 < tagInitial.length ) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tvalue.value = initialMap[ tagInitial ] = (Function(\n\t\t\t\t\t\t\t\t`try {` +\n\t\t\t\t\t\t\t\t\t`return (${tagInitial});` +\n\t\t\t\t\t\t\t\t`} catch( e ) {` +\n\t\t\t\t\t\t\t\t\t`return 0;` +\n\t\t\t\t\t\t\t\t`}`\n\t\t\t\t\t\t\t)());\n\t\t\t\t\t\t} catch( e ) {\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Initialize runtime actions\n\t\t\tconst values = shape.action.values;\n\t\t\tconst actions = runtime.actions;\n\t\t\tfor( let j = 0, jmax = values.length; j < jmax; ++j ) {\n\t\t\t\tconst value = values[ j ];\n\t\t\t\tlet action: EShapeActionRuntime | undefined | null = actionMap.get( value );\n\t\t\t\tif( action == null ) {\n\t\t\t\t\taction = value.toRuntime( shape );\n\t\t\t\t\tif( action != null ) {\n\t\t\t\t\t\tif( action instanceof EShapeActionRuntimeOpen ) {\n\t\t\t\t\t\t\tif( shape.cursor.length <= 0 ) {\n\t\t\t\t\t\t\t\tshape.cursor = \"pointer\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tactionMap.set( value, action );\n\t\t\t\t\t\tactions.push( action );\n\t\t\t\t\t\truntime.reset |= action.reset;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tactions.push( action );\n\t\t\t\t\truntime.reset |= action.reset;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Children\n\t\t\tconst children = shape.children;\n\t\t\tif( 0 < children.length ) {\n\t\t\t\tthis.initialize( children );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected newCanvas( serialized: DDiagramSerialized ): DDiagramCanvas {\n\t\treturn new DDiagramCanvas({\n\t\t\tname: serialized.name,\n\t\t\twidth: serialized.width,\n\t\t\theight: serialized.height,\n\t\t\tbackground: {\n\t\t\t\tcolor: null\n\t\t\t},\n\t\t\tborder: {\n\t\t\t\tcolor: null\n\t\t\t},\n\t\t\ttile: {\n\t\t\t\tfactory: this._tileFactory,\n\t\t\t\tmapping: serialized.tile && serialized.tile.mapping\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected onDown( e: interaction.InteractionEvent ): void {\n\t\tconst canvas = this.canvas;\n\t\tif( canvas != null ) {\n\t\t\tif( canvas.onShapeDown( e ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tsuper.onDown( e );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDiagram\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DImage, DImageOptions, DThemeImage } from \"./d-image\";\n\nexport interface DDialogConfirmMessageOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeDialogConfirmMessage = DThemeDialogConfirmMessage\n> extends DImageOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeDialogConfirmMessage extends DThemeImage {\n\n}\n\nexport class DDialogConfirmMessage<\n\tVALUE = unknown,\n\tTHEME extends DThemeDialogConfirmMessage = DThemeDialogConfirmMessage,\n\tOPTIONS extends DDialogConfirmMessageOptions<VALUE, THEME> = DDialogConfirmMessageOptions<VALUE, THEME>\n> extends DImage<VALUE, THEME, OPTIONS> {\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogConfirmMessage\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"./d-base\";\nimport { DDialogCommand, DDialogCommandOptions, DThemeDialogCommand } from \"./d-dialog-command\";\nimport { DDialogConfirmMessage, DDialogConfirmMessageOptions } from \"./d-dialog-confirm-message\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\nimport { DStateAwareOrValue } from \"./d-state-aware\";\nimport { utilIsFunction } from \"./util/util-is-function\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport interface DDialogConfirmOptions<\n\tTHEME extends DThemeDialogConfirm = DThemeDialogConfirm\n> extends DDialogCommandOptions<THEME> {\n\tmessage?: DStateAwareOrValue<string> | DDialogConfirmMessageOptions | DDialogConfirmMessage;\n}\n\nexport interface DThemeDialogConfirm extends DThemeDialogCommand {\n\tgetMessage(): DStateAwareOrValue<string>;\n}\n\nexport class DDialogConfirm<\n\tTHEME extends DThemeDialogConfirm = DThemeDialogConfirm,\n\tOPTIONS extends DDialogConfirmOptions<THEME> = DDialogConfirmOptions<THEME>\n> extends DDialogCommand<THEME, OPTIONS> {\n\tprotected _message!: DDialogConfirmMessage;\n\n\tprotected onInit( layout: DLayoutVertical, options?: OPTIONS ) {\n\t\tsuper.onInit( layout, options );\n\t\tconst message = this.toMessage( this.theme, options );\n\t\tthis._message = message;\n\t\tlayout.addChild( message );\n\t}\n\n\tprotected toMessage( theme: DThemeDialogConfirm, options?: DDialogConfirmOptions ): DDialogConfirmMessage {\n\t\tif( options && options.message != null ) {\n\t\t\tconst message = options.message;\n\t\t\tif( utilIsString( message ) || utilIsFunction( message ) ) {\n\t\t\t\treturn this.newMessage(\n\t\t\t\t\tthis.toMessageOptions( message )\n\t\t\t\t);\n\t\t\t} else if( message instanceof DBase ) {\n\t\t\t\treturn message;\n\t\t\t} else {\n\t\t\t\treturn this.newMessage(\n\t\t\t\t\tthis.toMessageOptionsMerged( message, theme.getMessage() )\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn this.newMessage(\n\t\t\tthis.toMessageOptions( theme.getMessage() )\n\t\t);\n\t}\n\n\tprotected toMessageOptionsMerged(\n\t\toptions: DDialogConfirmMessageOptions,\n\t\tmessage: DStateAwareOrValue<string>\n\t): DDialogConfirmMessageOptions {\n\t\tif( options.text == null ) {\n\t\t\toptions.text ={};\n\t\t}\n\t\tif( options.text.value === undefined ) {\n\t\t\toptions.text.value = message;\n\t\t}\n\t\treturn options;\n\t}\n\n\tprotected toMessageOptions( message: DStateAwareOrValue<string> ): DDialogConfirmMessageOptions {\n\t\treturn {\n\t\t\ttext: {\n\t\t\t\tvalue: message\n\t\t\t}\n\t\t};\n\t}\n\n\tprotected newMessage( options: DDialogConfirmMessageOptions ): DDialogConfirmMessage {\n\t\treturn new DDialogConfirmMessage( options );\n\t}\n\n\tget message(): DDialogConfirmMessage {\n\t\treturn this._message;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogConfirm\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogConfirm, DDialogConfirmOptions, DThemeDialogConfirm } from \"./d-dialog-confirm\";\n\nexport interface DDialogConfirmDeleteOptions<\n\tTHEME extends DThemeDialogConfirm\n> extends DDialogConfirmOptions<THEME> {\n\n}\n\nexport interface DThemeDialogConfirmDelete extends DThemeDialogConfirm {\n\n}\n\nexport class DDialogConfirmDelete<\n\tTHEME extends DThemeDialogConfirm = DThemeDialogConfirm,\n\tOPTIONS extends DDialogConfirmDeleteOptions<THEME> = DDialogConfirmDeleteOptions<THEME>\n> extends DDialogConfirm<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DDialogConfirmDelete\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogConfirm, DDialogConfirmOptions, DThemeDialogConfirm } from \"./d-dialog-confirm\";\n\nexport interface DDialogConfirmDiscardOptions<\n\tTHEME extends DThemeDialogConfirm\n> extends DDialogConfirmOptions<THEME> {\n\n}\n\nexport interface DThemeDialogConfirmDiscard extends DThemeDialogConfirm {\n\n}\n\nexport class DDialogConfirmDiscard<\n\tTHEME extends DThemeDialogConfirm = DThemeDialogConfirm,\n\tOPTIONS extends DDialogConfirmDiscardOptions<THEME> = DDialogConfirmDiscardOptions<THEME>\n> extends DDialogConfirm<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DDialogConfirmDiscard\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton } from \"./d-button\";\nimport { DButtonPrimary } from \"./d-button-primary\";\nimport { DDialog, DDialogOptions, DThemeDialog } from \"./d-dialog\";\nimport { DInputTextAndLabel } from \"./d-input-text-and-label\";\nimport { DLayoutHorizontal } from \"./d-layout-horizontal\";\nimport { DLayoutSpace } from \"./d-layout-space\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\n\nexport interface DDialogInputTextOptions<THEME extends DThemeDialog> extends DDialogOptions<THEME> {\n\tok?: string;\n\tcancel?: string;\n\tlabel?: string;\n}\n\nexport interface DThemeDialogInputText extends DThemeDialog {\n\tgetOk(): string;\n\tgetCancel(): string;\n\tgetLabel(): string;\n\tgetLabelWidth(): number;\n}\n\nexport class DDialogInputText<\n\tTHEME extends DThemeDialogInputText = DThemeDialogInputText,\n\tOPTIONS extends DDialogInputTextOptions<THEME> = DDialogInputTextOptions<THEME>\n> extends DDialog<THEME, OPTIONS> {\n\tprotected _input: DInputTextAndLabel;\n\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\n\t\tconst theme = this.theme;\n\n\t\tconst layout = new DLayoutVertical({\n\t\t\tparent: this,\n\t\t\tx: \"padding\", y: \"padding\",\n\t\t\twidth: \"padding\", height: \"auto\"\n\t\t});\n\n\t\t// Input\n\t\tthis._input = new DInputTextAndLabel({\n\t\t\tparent: layout,\n\t\t\twidth: \"padding\", height: \"auto\",\n\t\t\tinput: {\n\t\t\t\tweight: 1,\n\t\t\t\ton: {\n\t\t\t\t\tenter: () => {\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\tthis.onOk();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tlabel: {\n\t\t\t\twidth: theme.getLabelWidth(),\n\t\t\t\ttext: {\n\t\t\t\t\tvalue: ( options != null && options.label != null ?\n\t\t\t\t\t\toptions.label : theme.getLabel()\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t},\n\t\t\tspace: {\n\t\t\t\twidth: theme.getLabelWidth()\n\t\t\t}\n\t\t});\n\n\t\t// Buttons\n\t\tnew DLayoutHorizontal({\n\t\t\tparent: layout,\n\t\t\twidth: \"padding\", height: \"auto\",\n\t\t\tpadding: {\n\t\t\t\ttop: this.padding.getBottom()\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tnew DLayoutSpace({\n\t\t\t\t\tweight: 1\n\t\t\t\t}),\n\t\t\t\tnew DButtonPrimary({\n\t\t\t\t\ttext: {\n\t\t\t\t\t\tvalue: ( options != null && options.ok != null ?\n\t\t\t\t\t\t\toptions.ok : theme.getOk()\n\t\t\t\t\t\t)\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tactive: () => {\n\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t\tthis.onOk();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tnew DButton({\n\t\t\t\t\ttext: {\n\t\t\t\t\t\tvalue: ( options != null && options.cancel != null ?\n\t\t\t\t\t\t\toptions.cancel : theme.getCancel()\n\t\t\t\t\t\t)\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tactive: () => {\n\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t\tthis.onCancel();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tnew DLayoutSpace({\n\t\t\t\t\tweight: 1\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\t}\n\n\tget input() {\n\t\treturn this._input.input;\n\t}\n\n\tprotected onOk() {\n\t\tthis.emit( \"ok\", this._input.input.value, this );\n\t}\n\n\tprotected onCancel() {\n\t\tthis.emit( \"cancel\", this );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogInputText\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogConfirm, DDialogConfirmOptions, DThemeDialogConfirm } from \"./d-dialog-confirm\";\n\nexport interface DDialogMessageOptions<THEME extends DThemeDialogMessage> extends DDialogConfirmOptions<THEME> {\n\n}\n\nexport interface DThemeDialogMessage extends DThemeDialogConfirm {\n\n}\n\nexport class DDialogMessage<\n\tTHEME extends DThemeDialogMessage = DThemeDialogMessage,\n\tOPTIONS extends DDialogMessageOptions<THEME> = DDialogMessageOptions<THEME>\n> extends DDialogConfirm<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DDialogMessage\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n\tDDialogConfirmMessage, DDialogConfirmMessageOptions, DThemeDialogConfirmMessage\n} from \"./d-dialog-confirm-message\";\n\nexport class DDialogProcessingMessage<\n\tVALUE = unknown,\n\tTHEME extends DThemeDialogConfirmMessage = DThemeDialogConfirmMessage,\n\tOPTIONS extends DDialogConfirmMessageOptions<VALUE, THEME> = DDialogConfirmMessageOptions<VALUE, THEME>\n> extends DDialogConfirmMessage<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DDialogProcessingMessage\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DDialogConfirm, DDialogConfirmOptions, DThemeDialogConfirm } from \"./d-dialog-confirm\";\nimport { DDialogConfirmMessage, DDialogConfirmMessageOptions } from \"./d-dialog-confirm-message\";\nimport { DDialogProcessingMessage } from \"./d-dialog-processing-message\";\n\nexport interface DDialogProcessingOptions<THEME extends DThemeDialogProcessing> extends DDialogConfirmOptions<THEME> {\n\tinterval?: number;\n}\n\nexport interface DThemeDialogProcessing extends DThemeDialogConfirm {\n\tgetInterval(): number;\n}\n\nexport class DDialogProcessing<\n\tTHEME extends DThemeDialogProcessing = DThemeDialogProcessing,\n\tOPTIONS extends DDialogProcessingOptions<THEME> = DDialogProcessingOptions<THEME>\n> extends DDialogConfirm<THEME, OPTIONS> {\n\tprotected _isDone: boolean;\n\tprotected _startTime: number;\n\tprotected _interval: number;\n\tprotected _timeoutId?: number;\n\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis._isDone = true;\n\t\tthis._startTime =  0;\n\t\tthis._interval = ( options && options.interval != null ? options.interval : this.theme.getInterval() );\n\t}\n\n\tprotected newMessage( options: DDialogConfirmMessageOptions ): DDialogConfirmMessage {\n\t\treturn new DDialogProcessingMessage( options );\n\t}\n\n\tprotected onOpen() {\n\t\tthis._isDone = false;\n\t\tthis._startTime = Date.now();\n\t\tconst timeoutId = this._timeoutId;\n\t\tif( timeoutId != null ) {\n\t\t\tclearTimeout( timeoutId );\n\t\t}\n\t\tthis._message.setStates( DBaseState.NONE, DBaseState.SUCCEEDED | DBaseState.FAILED );\n\t\tconst buttonLayout = this._buttonLayout;\n\t\tif( buttonLayout != null ) {\n\t\t\tbuttonLayout.setDisabled( true );\n\t\t}\n\t\tsuper.onOpen();\n\t}\n\n\tprotected onDone(): void {\n\t\tconst buttonLayout = this._buttonLayout;\n\t\tif( buttonLayout != null ) {\n\t\t\tbuttonLayout.setDisabled( false );\n\t\t} else {\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\tprotected onResolved( message?: string ): void {\n\t\tif( message != null ) {\n\t\t\tthis._message.text = message;\n\t\t}\n\t\tthis._message.setStates( DBaseState.SUCCEEDED, DBaseState.FAILED );\n\t\tthis.onDone();\n\t}\n\n\tprotected onRejected( message?: string ): void {\n\t\tif( message != null ) {\n\t\t\tthis._message.text = message;\n\t\t}\n\t\tthis._message.setStates( DBaseState.FAILED, DBaseState.SUCCEEDED );\n\t\tthis.onDone();\n\t}\n\n\tresolve( message?: string ): void {\n\t\tif( ! this._isDone ) {\n\t\t\tthis._isDone = true;\n\t\t\tconst elapsedTime = Date.now() - this._startTime;\n\t\t\tconst delay = this._interval - elapsedTime;\n\t\t\tif( 0 < delay ) {\n\t\t\t\tthis._timeoutId = window.setTimeout((): void => {\n\t\t\t\t\tthis._timeoutId = undefined;\n\t\t\t\t\tthis.onResolved( message );\n\t\t\t\t}, delay );\n\t\t\t} else {\n\t\t\t\tthis.onResolved( message );\n\t\t\t}\n\t\t}\n\t}\n\n\treject( message?: string ): void {\n\t\tif( ! this._isDone ) {\n\t\t\tthis._isDone = true;\n\t\t\tconst elapsedTime = Date.now() - this._startTime;\n\t\t\tconst delay = this._interval - elapsedTime;\n\t\t\tif( 0 < delay ) {\n\t\t\t\tthis._timeoutId = window.setTimeout((): void => {\n\t\t\t\t\tthis._timeoutId = undefined;\n\t\t\t\t\tthis.onRejected( message );\n\t\t\t\t}, delay );\n\t\t\t} else {\n\t\t\t\tthis.onRejected( message );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onCloseOn(): void {\n\t\tif( this._isDone ) {\n\t\t\tsuper.onCloseOn();\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogProcessing\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCommandSaveAs } from \"./d-command-save-as\";\nimport { DControllers } from \"./d-controllers\";\nimport { DDialogInputText, DDialogInputTextOptions, DThemeDialogInputText } from \"./d-dialog-input-text\";\n\nexport interface DDialogSaveAsOptions<THEME extends DThemeDialogSaveAs> extends DDialogInputTextOptions<THEME> {\n\n}\n\nexport interface DThemeDialogSaveAs extends DThemeDialogInputText {\n\n}\n\nexport class DDialogSaveAs<\n\tTHEME extends DThemeDialogSaveAs = DThemeDialogSaveAs,\n\tOPTIONS extends DDialogSaveAsOptions<THEME> = DDialogSaveAsOptions<THEME>\n> extends DDialogInputText<THEME, OPTIONS> {\n\tprotected onOpen() {\n\t\tconst name = DControllers.getDocumentController().getName();\n\t\tif( name != null ) {\n\t\t\tthis._input.input.value = name;\n\t\t}\n\t\tsuper.onOpen();\n\t}\n\n\tprotected onOk() {\n\t\tsuper.onOk();\n\n\t\tconst name = this._input.input.value;\n\t\tDControllers.getCommandController().push( new DCommandSaveAs( name ) );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogSaveAs\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DListItem, DListItemOptions, DThemeListItem } from \"./d-list-item\";\n\nexport interface DDialogSelectListItemOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeDialogSelecListItem = DThemeDialogSelecListItem\n> extends DListItemOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeDialogSelecListItem extends DThemeListItem {\n\n}\n\nexport class DDialogSelectListItem<\n\tVALUE = unknown,\n\tTHEME extends DThemeDialogSelecListItem = DThemeDialogSelecListItem,\n\tOPTIONS extends DDialogSelectListItemOptions<VALUE, THEME> = DDialogSelectListItemOptions<VALUE, THEME>\n> extends DListItem<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DDialogSelectListItem\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DScrollBarThumb, DScrollBarThumbOptions } from \"./d-scroll-bar-thumb\";\n\nexport interface DScrollBarOptions extends DBaseOptions<DThemeScrollBar> {\n\tthumb?: DScrollBarThumbOptions;\n}\n\nexport interface DThemeScrollBar extends DThemeBase {\n\n}\n\nexport abstract class DScrollBar extends DBase<DThemeScrollBar, DScrollBarOptions> {\n\tprotected _start!: number;\n\tprotected _end!: number;\n\tprotected _thumb!: DScrollBarThumb;\n\n\tprotected init( options?: DScrollBarOptions ): void {\n\t\tsuper.init( options );\n\n\t\tthis._start = 0;\n\t\tthis._end = 1;\n\t\tconst thumb = this._thumb = this.createThumb( options != null ? options.thumb : undefined );\n\t\tthis.addChild( thumb );\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tget thumb(): DScrollBarThumb {\n\t\treturn this._thumb;\n\t}\n\n\tprotected abstract createThumb( options?: DScrollBarThumbOptions ): DScrollBarThumb;\n\n\tprotected getType(): string {\n\t\treturn \"DScrollBar\";\n\t}\n\n\tsetRegion( start: number, end: number, size: number ): void {\n\t\tif( size < 1 ) {\n\t\t\tstart = 0;\n\t\t\tend = 1;\n\t\t} else {\n\t\t\tstart = Math.max( 0, Math.min( 1, start / size ) );\n\t\t\tend = Math.max( start, Math.min( 1, end / size ) );\n\t\t}\n\t\tif( this._start !== start || this._end !== end ) {\n\t\t\tthis._start = start;\n\t\t\tthis._end = end;\n\t\t\tthis.onRegionChange();\n\t\t}\n\t}\n\n\tisRegionVisible(): boolean {\n\t\treturn 0 < this._start || this._end < 1;\n\t}\n\n\tonResize( newWidth: number, newHeight: number, oldWidth: number, oldHeight: number ): void {\n\t\tsuper.onResize( newWidth, newHeight, oldWidth, oldHeight );\n\t\tthis.onRegionChange();\n\t}\n\n\tonRegionChange(): void {\n\t\t// DO NOTHING\n\t}\n\n\tgetRegionStart(): number {\n\t\treturn this._start;\n\t}\n\n\tgetRegionEnd(): number {\n\t\treturn this._end;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Point } from \"pixi.js\";\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { UtilDrag } from \"./util/util-drag\";\n\nexport interface DScrollBarThumbOptions extends DBaseOptions<DThemeScrollBarThumb> {\n\n}\n\nexport interface DThemeScrollBarThumb extends DThemeBase {\n\tgetMinimumSize(): number;\n}\n\nexport abstract class DScrollBarThumb extends DBase<DThemeScrollBarThumb, DScrollBarThumbOptions> {\n\tprotected _dragUtil!: UtilDrag;\n\n\tprotected init( options?: DScrollBarThumbOptions ) {\n\t\tsuper.init( options );\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\n\t\tconst position = new Point();\n\t\tthis._dragUtil = new UtilDrag({\n\t\t\ttarget: this,\n\t\t\teasing: false,\n\t\t\ton: {\n\t\t\t\tstart: (): void => {\n\t\t\t\t\tposition.copyFrom( this.position );\n\t\t\t\t},\n\t\t\t\tmove: ( dx: number, dy: number ): void => {\n\t\t\t\t\tposition.set( position.x + dx, position.y + dy );\n\t\t\t\t\tthis.onDragMove( position.x, position.y );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetMinimumSize(): number {\n\t\treturn this.theme.getMinimumSize();\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DScrollBarThumb\";\n\t}\n\n\tprotected abstract onDragMove( dx: number, dy: number ): void;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Graphics } from \"pixi.js\";\nimport { DBase, DReflowable } from \"./d-base\";\nimport { DScrollBarThumb } from \"./d-scroll-bar-thumb\";\n\nexport class DScrollBarThumbReflowableHorizontal extends Graphics implements DReflowable {\n\tconstructor( base: DScrollBarThumb ) {\n\t\tsuper();\n\t\tbase.appendRenderable( this, true );\n\t\tbase.addReflowable( this );\n\t}\n\n\tonReflow( base: DBase, width: number, height: number ): void {\n\t\tconst state = base.state;\n\n\t\tthis.clear();\n\n\t\tconst background = base.background;\n\t\tconst backgroundColor = background.getColor( state );\n\t\tconst backgroundAlpha = background.getAlpha( state );\n\t\tif( backgroundColor != null ) {\n\t\t\tconst size = 1;\n\t\t\tthis.beginFill( backgroundColor, backgroundAlpha );\n\t\t\tthis.lineStyle( 0, 0, 0, 0 );\n\t\t\tthis.drawRect( 0, height * 0.5 - size, width, size * 2 );\n\t\t\tthis.endFill();\n\t\t\tthis.visible = true;\n\t\t} else {\n\t\t\tthis.visible = false;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DScrollBarThumb } from \"./d-scroll-bar-thumb\";\nimport { DScrollBarThumbReflowableHorizontal } from \"./d-scroll-bar-thumb-reflowable-horizontal\";\n\nexport class DScrollBarThumbHorizontal extends DScrollBarThumb {\n\tprotected onDragMove( dx: number, dy: number ) {\n\t\tthis.emit( \"regionmove\", dx, this );\n\t}\n\n\tprotected initReflowable(): void {\n\t\tnew DScrollBarThumbReflowableHorizontal( this );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DScrollBar, DScrollBarOptions } from \"./d-scroll-bar\";\nimport { DScrollBarThumb, DScrollBarThumbOptions } from \"./d-scroll-bar-thumb\";\nimport { DScrollBarThumbHorizontal } from \"./d-scroll-bar-thumb-horizontal\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport class DScrollBarHorizontal extends DScrollBar {\n\tprotected init( options?: DScrollBarOptions ) {\n\t\tsuper.init( options );\n\n\t\tthis.on( UtilPointerEvent.down, ( e: InteractionEvent ) => {\n\t\t\tif( e.target === this ) {\n\t\t\t\tconst width = this.width;\n\t\t\t\tif( 0 < width ) {\n\t\t\t\t\tconst size = this._end - this._start;\n\t\t\t\t\tconst position = e.data.getLocalPosition( this );\n\t\t\t\t\tconst newStart = Math.min( 1 - size, Math.max( 0, position.x / width - size * 0.5 ) );\n\t\t\t\t\tif( this._start !== newStart ) {\n\t\t\t\t\t\tthis.emit( \"regionmove\", newStart, this );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis._thumb.on( \"regionmove\", ( x: number ) => {\n\t\t\tconst width = this.width;\n\t\t\tif( 0 < width ) {\n\t\t\t\tconst size = this._end - this._start;\n\t\t\t\tconst newStart = Math.min( 1 - size, Math.max( 0, x / width ) );\n\t\t\t\tif( this._start !== newStart ) {\n\t\t\t\t\tthis.emit( \"regionmove\", newStart, this );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected createThumb( options?: DScrollBarThumbOptions ): DScrollBarThumb {\n\t\treturn new DScrollBarThumbHorizontal( options );\n\t}\n\n\tonRegionChange(): void {\n\t\tconst thumb = this._thumb;\n\t\tconst width = this.width;\n\t\tconst height = this.height;\n\t\tconst thumbMinimumSize = Math.min( width * 0.5, thumb.getMinimumSize() );\n\t\tconst space = width - thumbMinimumSize;\n\t\tconst barStart = space * this._start;\n\t\tconst barSize = space * this._end + thumbMinimumSize - barStart;\n\n\t\tthumb.position.set( barStart, 0 );\n\t\tthumb.resize( barSize, height );\n\n\t\tsuper.onRegionChange();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Graphics } from \"pixi.js\";\nimport { DBase, DReflowable } from \"./d-base\";\n\nexport class DScrollBarThumbReflowableVertical extends Graphics implements DReflowable {\n\tconstructor( base: DBase ) {\n\t\tsuper();\n\t\tbase.appendRenderable( this, true );\n\t\tbase.addReflowable( this );\n\t}\n\n\tonReflow( base: DBase, width: number, height: number ): void {\n\t\tconst state = base.state;\n\n\t\tthis.clear();\n\n\t\tconst background = base.background;\n\t\tconst backgroundColor = background.getColor( state );\n\t\tconst backgroundAlpha = background.getAlpha( state );\n\t\tif( backgroundColor != null ) {\n\t\t\tconst size = 1;\n\t\t\tthis.beginFill( backgroundColor, backgroundAlpha );\n\t\t\tthis.lineStyle( 0, 0, 0, 0 );\n\t\t\tthis.drawRect( width * 0.5 - size, 0, size * 2, height );\n\t\t\tthis.endFill();\n\t\t\tthis.visible = true;\n\t\t} else {\n\t\t\tthis.visible = false;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DScrollBarThumb } from \"./d-scroll-bar-thumb\";\nimport { DScrollBarThumbReflowableVertical } from \"./d-scroll-bar-thumb-reflowable-vertical\";\n\nexport class DScrollBarThumbVertocal extends DScrollBarThumb {\n\tprotected onDragMove( dx: number, dy: number ) {\n\t\tthis.emit( \"regionmove\", dy, this );\n\t}\n\n\tprotected initReflowable(): void {\n\t\tnew DScrollBarThumbReflowableVertical( this );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DScrollBar, DScrollBarOptions } from \"./d-scroll-bar\";\nimport { DScrollBarThumb, DScrollBarThumbOptions } from \"./d-scroll-bar-thumb\";\nimport { DScrollBarThumbVertocal } from \"./d-scroll-bar-thumb-vertical\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport class DScrollBarVertical extends DScrollBar {\n\tprotected init( options?: DScrollBarOptions ) {\n\t\tsuper.init( options );\n\n\t\tthis.on( UtilPointerEvent.down, ( e: InteractionEvent ): void => {\n\t\t\tif( e.target === this ) {\n\t\t\t\tconst height = this.height;\n\t\t\t\tif( 0 < height ) {\n\t\t\t\t\tconst size = this._end - this._start;\n\t\t\t\t\tconst position = e.data.getLocalPosition( this );\n\t\t\t\t\tconst newStart = Math.min( 1 - size, Math.max( 0, position.y / height - size * 0.5 ) );\n\t\t\t\t\tif( this._start !== newStart ) {\n\t\t\t\t\t\tthis.emit( \"regionmove\", newStart, this );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t});\n\n\t\tthis._thumb.on( \"regionmove\", ( y: number ): void => {\n\t\t\tconst height = this.height;\n\t\t\tif( 0 < height ) {\n\t\t\t\tconst size = this._end - this._start;\n\t\t\t\tconst newStart = Math.min( 1 - size, Math.max( 0, y / height ) );\n\t\t\t\tif( this._start !== newStart ) {\n\t\t\t\t\tthis.emit( \"regionmove\", newStart, this );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected createThumb( options?: DScrollBarThumbOptions ): DScrollBarThumb {\n\t\treturn new DScrollBarThumbVertocal( options );\n\t}\n\n\tonRegionChange(): void {\n\t\tconst thumb = this._thumb;\n\t\tconst width = this.width;\n\t\tconst height = this.height;\n\t\tconst thumbMinimumSize = Math.min( height * 0.5, thumb.getMinimumSize() );\n\t\tconst space = height - thumbMinimumSize;\n\t\tconst barStart = space * this._start;\n\t\tconst barSize = space * this._end + thumbMinimumSize - barStart;\n\n\t\tthumb.position.set( 0, barStart );\n\t\tthumb.resize( width, barSize );\n\n\t\tsuper.onRegionChange();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Point } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseOverflowMask } from \"./d-base-overflow-mask\";\nimport { DContent, DContentOptions } from \"./d-content\";\nimport { DDragMode } from \"./d-drag-mode\";\nimport { DScrollBar, DScrollBarOptions } from \"./d-scroll-bar\";\nimport { DScrollBarHorizontal } from \"./d-scroll-bar-horizontal\";\nimport { DScrollBarVertical } from \"./d-scroll-bar-vertical\";\nimport { UtilDrag } from \"./util/util-drag\";\nimport { utilIsString } from \"./util/util-is-string\";\nimport { UtilWheelEventDeltas } from \"./util/util-wheel-event\";\n\nexport interface DPaneOptions<\n\tTHEME extends DThemePane = DThemePane,\n\tCONTENT_OPTIONS extends DBaseOptions = DContentOptions\n> extends DBaseOptions<THEME> {\n\tmask?: boolean;\n\tcontent?: CONTENT_OPTIONS | DBase;\n\tbar?: {\n\t\tvertical?: DScrollBarOptions,\n\t\thorizontal?: DScrollBarOptions\n\t};\n\tdrag?: {\n\t\tmode?: (keyof typeof DDragMode) | DDragMode;\n\t};\n}\n\nexport interface DThemePane extends DThemeBase {\n\tisOverflowMaskEnabled(): boolean;\n\tgetWheelSpeed(): number;\n\tgetDragMode(): DDragMode;\n}\n\n// Option parsers\nconst isOverflowMaskEnabled = <\n\tTHEME extends DThemePane,\n\tCONTENT_OPTIONS extends DBaseOptions\n>( theme: THEME, options?: DPaneOptions<THEME, CONTENT_OPTIONS> ): boolean => {\n\tif( options && options.mask != null ) {\n\t\treturn options.mask;\n\t}\n\treturn theme.isOverflowMaskEnabled();\n};\n\nconst toBarOptionsVertical = ( options?: DPaneOptions ): DScrollBarOptions | undefined => {\n\treturn options && options.bar && options.bar.vertical;\n};\n\nconst toBarOptionsHorizontal = ( options?: DPaneOptions ): DScrollBarOptions | undefined => {\n\treturn options && options.bar && options.bar.horizontal;\n};\n\n// Class\nexport class DPane<\n\tTHEME extends DThemePane = DThemePane,\n\tCONTENT_OPTIONS extends DBaseOptions = DContentOptions,\n\tOPTIONS extends DPaneOptions<THEME, CONTENT_OPTIONS> = DPaneOptions<THEME, CONTENT_OPTIONS>\n> extends DBase<THEME, OPTIONS> {\n\tprotected static WORK_ON_FOCUSED = new Point();\n\tprotected _content!: DBase;\n\tprotected _overflowMask!: DBaseOverflowMask | null;\n\tprotected _verticalBar?: DScrollBarVertical;\n\tprotected _horizontalBar?: DScrollBarHorizontal;\n\tprotected _dragUtil?: UtilDrag;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis._overflowMask = null;\n\n\t\t// Content\n\t\tconst theme = this.theme;\n\t\tconst content = this._content = this.toContent( options );\n\t\tif( isOverflowMaskEnabled( theme, options ) ) {\n\t\t\tthis.mask = this.getOrCreateOverflowMask();\n\t\t}\n\t\tthis.addChild( content );\n\n\t\t// Scroll bar\n\t\tthis.initScrollBar( content, theme, options );\n\n\t\t// Drag\n\t\tthis.initDrag( content, theme, options );\n\t}\n\n\tprotected initDrag( content: DBase, theme: THEME, options?: OPTIONS ): void {\n\t\tconst dragMode = ( options && options.drag && options.drag.mode != null ?\n\t\t\t( utilIsString( options.drag.mode ) ? DDragMode[ options.drag.mode ] : options.drag.mode ) :\n\t\t\ttheme.getDragMode()\n\t\t);\n\t\t// Edge does not fire the wheel event when scrolling using the 2-fingure scroll gesture on a touchpad.\n\t\t// Instead, it fires touch events. This is why the dragging is enabled regardless of the `UtilPointerEvent.touchable`.\n\t\t// https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/7134034/\n\t\tif( dragMode === DDragMode.ON || dragMode === DDragMode.TOUCH ) {\n\t\t\tconst position = new Point();\n\t\t\tthis._dragUtil = new UtilDrag({\n\t\t\t\ttarget: this,\n\t\t\t\ttouch: dragMode === DDragMode.TOUCH,\n\t\t\t\ton: {\n\t\t\t\t\tstart: (): void => {\n\t\t\t\t\t\tposition.copyFrom( content.position );\n\t\t\t\t\t},\n\t\t\t\t\tmove: ( dx: number, dy: number ): void => {\n\t\t\t\t\t\tposition.set( position.x + dx, position.y + dy );\n\t\t\t\t\t\tcontent.position.set(\n\t\t\t\t\t\t\tthis.toContentX( content, position.x ),\n\t\t\t\t\t\t\tthis.toContentY( content, position.y )\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected onRegionMoveX( content: DBase, start: number ) {\n\t\tconst dragUtil = this._dragUtil;\n\t\tif( dragUtil != null ) {\n\t\t\tdragUtil.stop();\n\t\t}\n\t\tcontent.x = - content.width * start;\n\t}\n\n\tprotected onRegionMoveY( content: DBase, start: number ) {\n\t\tconst dragUtil = this._dragUtil;\n\t\tif( dragUtil != null ) {\n\t\t\tdragUtil.stop();\n\t\t}\n\t\tcontent.y = - content.height * start;\n\t}\n\n\tprotected initScrollBar( content: DBase, theme: THEME, options?: OPTIONS ): void {\n\t\t// Vertical bar\n\t\tconst verticalBar = this._verticalBar = new DScrollBarVertical( toBarOptionsVertical( options ) );\n\t\tverticalBar.on( \"regionmove\", ( start: number ): void => {\n\t\t\tthis.onRegionMoveY( content, start );\n\t\t});\n\t\tthis.addChild( verticalBar );\n\n\t\t// Horizontal bar\n\t\tconst horizontalBar = this._horizontalBar = new DScrollBarHorizontal( toBarOptionsHorizontal( options ) );\n\t\thorizontalBar.on( \"regionmove\", ( start: number ): void => {\n\t\t\tthis.onRegionMoveX( content, start );\n\t\t});\n\t\tthis.addChild( horizontalBar );\n\n\t\t//\n\t\tcontent.on( \"move\", (): void => {\n\t\t\tthis.onContentChanged();\n\t\t});\n\t\tcontent.on( \"resize\", (): void => {\n\t\t\tthis.onContentChanged();\n\t\t});\n\t\tthis.updateScrollBar();\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DPane\";\n\t}\n\n\tget content(): DBase {\n\t\treturn this._content;\n\t}\n\n\tprotected toContent( options?: OPTIONS ): DBase {\n\t\tif( options && options.content ) {\n\t\t\tconst content = options.content;\n\t\t\tif( content instanceof DBase ) {\n\t\t\t\treturn content;\n\t\t\t} else {\n\t\t\t\treturn this.newContent( content );\n\t\t\t}\n\t\t}\n\t\treturn this.newContent();\n\t}\n\n\tprotected newContent( options?: CONTENT_OPTIONS ): DBase {\n\t\treturn new DContent( options );\n\t}\n\n\tprotected getOrCreateOverflowMask(): DBaseOverflowMask {\n\t\tif( this._overflowMask == null ) {\n\t\t\tthis._overflowMask = new DBaseOverflowMask( this );\n\t\t\tthis.addReflowable( this._overflowMask );\n\t\t\tthis.toDirty();\n\t\t}\n\t\treturn this._overflowMask;\n\t}\n\n\tonWheel( e: WheelEvent, deltas: UtilWheelEventDeltas, global: Point ): boolean {\n\t\tconst content = this._content;\n\t\tconst x = this.getWheelContentX( content, deltas.deltaX * deltas.lowest );\n\t\tconst y = this.getWheelContentY( content, deltas.deltaY * deltas.lowest );\n\t\tif( content.x !== x || content.y !== y ) {\n\t\t\tconst dragUtil = this._dragUtil;\n\t\t\tif( dragUtil != null ) {\n\t\t\t\tdragUtil.stop();\n\t\t\t}\n\t\t\tcontent.position.set( x, y );\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected getWheelContentX( content: DBase, delta: number ): number {\n\t\tif( 0 < delta || delta < 0 ) {\n\t\t\tconst speed = this.theme.getWheelSpeed();\n\t\t\treturn this.toContentX( content, content.x - delta * speed );\n\t\t}\n\t\treturn content.x;\n\t}\n\n\tprotected getWheelContentY( content: DBase, delta: number ): number {\n\t\tif( 0 < delta || delta < 0 ) {\n\t\t\tconst speed = this.theme.getWheelSpeed();\n\t\t\treturn this.toContentY( content, content.y + delta * speed );\n\t\t}\n\t\treturn content.y;\n\t}\n\n\tprotected toContentX( content: DBase, x: number ): number {\n\t\treturn Math.min( 0, Math.max( this.width - content.width, x ) );\n\t}\n\n\tprotected toContentY( content: DBase, y: number ): number {\n\t\treturn Math.min( 0, Math.max( this.height - content.height, y ) );\n\t}\n\n\tprotected isRefitable( target: any ): target is DBase<any, any> {\n\t\treturn super.isRefitable( target ) && ! ( target instanceof DScrollBar );\n\t}\n\n\tonResize( newWidth: number, newHeight: number, oldWidth: number, oldHeight: number ): void {\n\t\tsuper.onResize( newWidth, newHeight, oldWidth, oldHeight );\n\t\tthis.updateScrollBar();\n\t}\n\n\tprotected onContentChanged(): void {\n\t\tthis.updateScrollBar();\n\t}\n\n\tprotected updateScrollBar(): void {\n\t\tconst verticalBar = this._verticalBar;\n\t\tconst horizontalBar = this._horizontalBar;\n\t\tif( verticalBar != null && horizontalBar != null ) {\n\t\t\tthis.updateScrollBarRegions( verticalBar, horizontalBar );\n\t\t\tthis.updateScrollBarVisibilities( verticalBar, horizontalBar );\n\t\t\tthis.updateScrollBarPositions( verticalBar, horizontalBar );\n\t\t}\n\t}\n\n\tprotected updateScrollBarPositions( verticalBar: DScrollBarVertical, horizontalBar: DScrollBarHorizontal ): void {\n\t\tconst width = this.width;\n\t\tconst height = this.height;\n\n\t\tconst verticalBarWidth = verticalBar.width;\n\t\tverticalBar.position.set( width - verticalBarWidth, verticalBarWidth * 0.5 );\n\t\tverticalBar.height = height - verticalBarWidth;\n\n\t\tconst horizontalBarHeight = horizontalBar.height;\n\t\thorizontalBar.position.set( horizontalBarHeight * 0.5, height - horizontalBarHeight );\n\t\thorizontalBar.width = width - horizontalBarHeight;\n\t}\n\n\tprotected updateScrollBarRegions( verticalBar: DScrollBarVertical, horizontalBar: DScrollBarHorizontal ): void {\n\t\tconst content = this._content;\n\t\tconst x = -content.x;\n\t\tconst y = -content.y;\n\t\thorizontalBar.setRegion( x, x + this.width, content.width );\n\t\tverticalBar.setRegion( y, y + this.height, content.height );\n\t}\n\n\tprotected updateScrollBarVisibilities( verticalBar: DScrollBarVertical, horizontalBar: DScrollBarHorizontal ): void {\n\t\tconst isChangedHorizontal = this.updateScrollBarVisibility( horizontalBar );\n\t\tconst isChangedVertical = this.updateScrollBarVisibility( verticalBar );\n\t\tif( isChangedHorizontal || isChangedVertical ) {\n\t\t\t// Update the overflow mask\n\t\t\tconst overflowMask = this._overflowMask;\n\t\t\tif( overflowMask != null ) {\n\t\t\t\tif( horizontalBar.visible || verticalBar.visible ) {\n\t\t\t\t\tconst content = this._content;\n\t\t\t\t\tif( content.mask !== overflowMask ) {\n\t\t\t\t\t\tcontent.mask = overflowMask;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst content = this._content;\n\t\t\t\t\tif( content.mask ) {\n\t\t\t\t\t\tcontent.mask = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Rerender\n\t\t\tDApplications.update();\n\t\t}\n\t}\n\n\tprotected updateScrollBarVisibility( bar: DScrollBar ): boolean {\n\t\tconst isRegionVisible = bar.isRegionVisible();\n\t\tif( bar.visible !== isRegionVisible ) {\n\t\t\tbar.visible = isRegionVisible;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected onChildFocused( focused: DBase ): void {\n\t\tconst work = DPane.WORK_ON_FOCUSED;\n\t\tconst content = this.content;\n\t\tconst contentX = content.x;\n\t\tconst contentY = content.y;\n\t\tconst contentWidth = content.width;\n\t\tconst contentHeight = content.height;\n\n\t\twork.set( 0, 0 );\n\t\tfocused.toGlobal( work, work, false );\n\t\tcontent.toLocal( work, undefined, work, false );\n\t\tconst x0 = contentX + Math.min( contentWidth, Math.max( 0, work.x ) );\n\t\tconst y0 = contentY + Math.min( contentHeight, Math.max( 0, work.y ) );\n\n\t\twork.set( focused.width, focused.height );\n\t\tfocused.toGlobal( work, work, true );\n\t\tcontent.toLocal( work, undefined, work, true );\n\t\tconst x1 = contentX + Math.min( contentWidth, Math.max( 0, work.x ) );\n\t\tconst y1 = contentY + Math.min( contentHeight, Math.max( 0, work.y ) );\n\n\t\tconst width = this.width;\n\t\tlet newX: number | null = null;\n\t\tif( x0 < 0 ) {\n\t\t\tif( x1 <= width ) {\n\t\t\t\tnewX = Math.max( width - contentWidth, Math.min( 0, contentX + (0 - x0) ) );\n\t\t\t}\n\t\t} else {\n\t\t\tif( width < x1 ) {\n\t\t\t\tnewX = Math.max( width - contentWidth, Math.min( 0, contentX - (x1 - width) ) );\n\t\t\t}\n\t\t}\n\n\t\tconst height = this.height;\n\t\tlet newY: number | null = null;\n\t\tif( y0 < 0 ) {\n\t\t\tif( y1 <= height ) {\n\t\t\t\tnewY = Math.max( height - contentHeight, Math.min( 0, contentY + (0 - y0) ) );\n\t\t\t}\n\t\t} else {\n\t\t\tif( height < y1 ) {\n\t\t\t\tnewY = Math.max( height - contentHeight, Math.min( 0, contentY - (y1 - height) ) );\n\t\t\t}\n\t\t}\n\n\t\tif( newX != null ) {\n\t\t\tif( newY != null ) {\n\t\t\t\tcontent.position.set( newX, newY );\n\t\t\t} else {\n\t\t\t\tcontent.position.x = newX;\n\t\t\t}\n\t\t} else {\n\t\t\tif( newY != null ) {\n\t\t\t\tcontent.position.y = newY;\n\t\t\t}\n\t\t}\n\n\t\tsuper.onChildFocused( focused );\n\t}\n\n\tdestroy(): void {\n\t\t// Overflow mask\n\t\tconst overflowMask = this._overflowMask;\n\t\tif( overflowMask != null ) {\n\t\t\tthis._overflowMask = null;\n\t\t\toverflowMask.destroy();\n\t\t}\n\t\tthis.mask = null;\n\n\t\tsuper.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, interaction } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DBase, DBaseOptions } from \"./d-base\";\nimport { DContentOptions } from \"./d-content\";\nimport { DListSelection, DListSelectionOptions } from \"./d-list-selection\";\nimport { DPane, DPaneOptions, DThemePane } from \"./d-pane\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport interface DListOptions<\n\tTHEME extends DThemeList = DThemeList,\n\tCONTENT_OPTIONS extends DBaseOptions = DContentOptions\n> extends DPaneOptions<THEME, CONTENT_OPTIONS> {\n\tselection?: DListSelectionOptions | DListSelection;\n}\n\nexport interface DThemeList extends DThemePane {\n\n}\n\nexport class DList<\n\tTHEME extends DThemeList = DThemeList,\n\tCONTENT_OPTIONS extends DBaseOptions = DContentOptions,\n\tOPTIONS extends DListOptions<THEME, CONTENT_OPTIONS> = DListOptions<THEME, CONTENT_OPTIONS>\n> extends DPane<THEME, CONTENT_OPTIONS, OPTIONS> {\n\tprotected _selection!: DListSelection;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tconst selection = options && options.selection;\n\t\tthis._selection = ( selection instanceof DListSelection ?\n\t\t\tselection : this.newSelection( selection )\n\t\t);\n\n\t\tUtilPointerEvent.onClick( this, ( e: InteractionEvent ): void => {\n\t\t\tconst child: DisplayObject | null = this.findItem( e.target );\n\t\t\tif( child instanceof DBase && child.isActionable() ) {\n\t\t\t\tthis.selection.add( child );\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected newSelection( options?: DListSelectionOptions ): DListSelection {\n\t\treturn new DListSelection( this._content, options );\n\t}\n\n\tprotected onChildrenDirty(): void {\n\t\tconst selection = this._selection;\n\t\tif( selection != null ) {\n\t\t\tselection.toDirty();\n\t\t}\n\t\tsuper.onChildrenDirty();\n\t}\n\n\tget selection(): DListSelection {\n\t\treturn this._selection;\n\t}\n\n\tprotected findItem( target: DisplayObject | null ): DisplayObject | null {\n\t\tconst content = this.content;\n\t\tlet current = target;\n\t\twhile( current != null ) {\n\t\t\tif( current.parent === content ) {\n\t\t\t\treturn current;\n\t\t\t}\n\t\t\tcurrent = current.parent;\n\t\t}\n\t\treturn null;\n\t}\n\n\tonRefit(): void {\n\t\tsuper.onRefit();\n\t\tthis.updateChildPosition();\n\t\tthis.updateChildVisibility();\n\t}\n\n\tprotected updateChildPosition(): void {\n\t\tconst content = this.content;\n\t\tconst items = content.children;\n\t\tlet y = 0;\n\t\tfor( let i = 0, imax = items.length; i < imax; ++i ) {\n\t\t\tconst item = items[ i ];\n\t\t\tif( item instanceof DBase ) {\n\t\t\t\titem.y = y;\n\t\t\t\ty += item.height;\n\t\t\t}\n\t\t}\n\t\tconst scrollLimit = Math.min( 0, -y + this.height );\n\t\tif( content.y < scrollLimit ) {\n\t\t\tcontent.y = scrollLimit;\n\t\t}\n\t\tcontent.height = y;\n\t}\n\n\tprotected updateChildVisibility(): void {\n\t\tconst content = this.content;\n\t\tconst items = content.children;\n\t\tconst from = -content.y;\n\t\tconst to = from + this.height;\n\t\tfor( let i = 0, imax = items.length; i < imax; ++i ) {\n\t\t\tconst item = items[ i ];\n\t\t\tif( item instanceof DBase ) {\n\t\t\t\tconst itemY = item.y;\n\t\t\t\titem.visible = ( from <= itemY + item.height && itemY <= to );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onContentChanged(): void {\n\t\tsuper.onContentChanged();\n\t\tthis.updateChildVisibility();\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DList\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseOptions } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DContentOptions } from \"./d-content\";\nimport { DList, DListOptions, DThemeList } from \"./d-list\";\n\nexport interface DDialogSelectListOptions<\n\tTHEME extends DThemeDialogSelecList = DThemeDialogSelecList,\n\tCONTENT_OPTIONS extends DBaseOptions = DContentOptions\n> extends DListOptions<THEME, CONTENT_OPTIONS> {\n\n}\n\nexport interface DThemeDialogSelecList extends DThemeList {\n\n}\n\nexport class DDialogSelectList<\n\tTHEME extends DThemeDialogSelecList = DThemeDialogSelecList,\n\tCONTENT_OPTIONS extends DBaseOptions = DContentOptions,\n\tOPTIONS extends DDialogSelectListOptions<THEME, CONTENT_OPTIONS> = DDialogSelectListOptions<THEME, CONTENT_OPTIONS>\n> extends DList<THEME, CONTENT_OPTIONS, OPTIONS> {\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogSelectList\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DText, DTextOptions, DThemeText } from \"./d-text\";\n\nexport interface DNoteOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeNote = DThemeNote\n> extends DTextOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeNote extends DThemeText {\n\n}\n\nexport class DNote<\n\tVALUE = unknown,\n\tTHEME extends DThemeNote = DThemeNote,\n\tOPTIONS extends DNoteOptions<VALUE, THEME> = DNoteOptions<VALUE, THEME>\n> extends DText<VALUE, THEME, OPTIONS> {\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis.visible = false;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DNote\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"./d-base\";\nimport { DDialog, DDialogOptions, DThemeDialog } from \"./d-dialog\";\nimport { DDialogSelectList } from \"./d-dialog-select-list\";\nimport { DDialogSelectListItem } from \"./d-dialog-select-list-item\";\nimport { DInputText } from \"./d-input-text\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\nimport { DListItem } from \"./d-list-item\";\nimport { DListSelection } from \"./d-list-selection\";\nimport { DNote, DNoteOptions } from \"./d-note\";\nimport { utilIsNumber } from \"./util/util-is-number\";\nimport { utilIsString } from \"./util/util-is-string\";\nimport { UtilTransition } from \"./util/util-transition\";\n\nexport interface Search<SEARCH_RESULT> {\n\tcreate( args: [ string ] ): void;\n\ton( event: \"success\", handler: ( e: unknown, searchResults: SEARCH_RESULT[] ) => void ): void;\n\ton( event: \"change\", handler: () => void ): void;\n\tisDone(): boolean;\n\tgetResult(): SEARCH_RESULT[] | null;\n}\n\nexport interface Controller<SEARCH_RESULT> {\n\tsearch: Search<SEARCH_RESULT>;\n}\n\nexport interface DDialogSelectOptions<\n\tSEARCH_RESULT,\n\tTHEME extends DThemeDialogSelect = DThemeDialogSelect\n> extends DDialogOptions<THEME> {\n\tcontroller: Controller<SEARCH_RESULT>;\n\tconverter?: {\n\t\ttoLabel?: ( searchResult: SEARCH_RESULT ) => string;\n\t};\n\tnote?: {\n\t\tnoItems?: DNoteOptions;\n\t\tsearching?: DNoteOptions;\n\t};\n}\n\nexport interface DThemeDialogSelect extends DThemeDialog {\n\tgetNoteNoItemsText(): string;\n\tgetNoteSearchingText(): string;\n}\n\n// Helper\nconst defaultConverter = {\n\ttoLabel: ( target: any ): string => {\n\t\tif( utilIsString( target ) ) {\n\t\t\treturn target;\n\t\t} else if( utilIsNumber( target ) ) {\n\t\t\treturn String( target );\n\t\t} else if( \"name\" in target ) {\n\t\t\treturn target.name;\n\t\t} else if( \"label\" in target ) {\n\t\t\treturn target.label;\n\t\t} else if( \"id\" in target ) {\n\t\t\treturn target.id;\n\t\t} else {\n\t\t\treturn \"\";\n\t\t}\n\t}\n};\n\nconst toToLabel = <SEARCH_RESULT>( options: DDialogSelectOptions<SEARCH_RESULT, any> ) => {\n\treturn ( options.converter != null ? options.converter.toLabel : null ) || defaultConverter.toLabel;\n};\n\nconst toNoteOptions = ( options: DNoteOptions | undefined, parent: DBase, text: string ): DNoteOptions => {\n\tif( options != null ) {\n\t\tif( options.parent == null ) {\n\t\t\toptions.parent = parent;\n\t\t}\n\t\tif( options.text == null ) {\n\t\t\toptions.text = {\n\t\t\t\tvalue: text\n\t\t\t};\n\t\t} else if( options.text.value == null ) {\n\t\t\toptions.text.value = text;\n\t\t}\n\t\treturn options;\n\t}\n\treturn {\n\t\tparent,\n\t\ttext: {\n\t\t\tvalue: text\n\t\t}\n\t};\n};\n\nconst toNoteNoItemsOptions = (\n\ttheme: DThemeDialogSelect, options: DDialogSelectOptions<any>, parent: DBase\n): DNoteOptions => {\n\treturn toNoteOptions(\n\t\toptions.note && options.note.noItems,\n\t\tparent,\n\t\ttheme.getNoteNoItemsText()\n\t);\n};\n\nconst toNoteSearchingOptions = (\n\ttheme: DThemeDialogSelect, options: DDialogSelectOptions<any>, parent: DBase\n): DNoteOptions => {\n\treturn toNoteOptions(\n\t\toptions.note && options.note.searching,\n\t\tparent,\n\t\ttheme.getNoteSearchingText()\n\t);\n};\n\nexport class DDialogSelect<\n\tSEARCH_RESULT,\n\tTHEME extends DThemeDialogSelect = DThemeDialogSelect,\n\tOPTIONS extends DDialogSelectOptions<SEARCH_RESULT, THEME> = DDialogSelectOptions<SEARCH_RESULT, THEME>\n> extends DDialog<THEME, OPTIONS> {\n\tprotected _value: SEARCH_RESULT | null;\n\tprotected _input: DInputText;\n\tprotected _list: DDialogSelectList;\n\tprotected _noteNoItems: DNote;\n\tprotected _noteSearching: DNote;\n\tprotected _controller: Controller<SEARCH_RESULT>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\n\t\tthis._value = null;\n\t\tconst theme = this.theme;\n\t\tconst controller = this._controller = options.controller;\n\t\tconst toLabel = toToLabel( options );\n\n\t\tconst layout = new DLayoutVertical({\n\t\t\tparent: this,\n\t\t\tx: \"padding\", y: \"padding\",\n\t\t\twidth: \"padding\", height: \"auto\"\n\t\t});\n\n\t\t// Search box\n\t\tthis._input = new DInputText({\n\t\t\tparent: layout,\n\t\t\twidth: \"padding\"\n\t\t});\n\n\t\t// List\n\t\tconst list = this._list = new DDialogSelectList({\n\t\t\tparent: layout,\n\t\t\twidth: \"padding\",\n\t\t\tselection: {\n\t\t\t\ton: {\n\t\t\t\t\tchange: ( selection: DListSelection ): void => {\n\t\t\t\t\t\tconst item: DListItem<SEARCH_RESULT> | null = selection.first();\n\t\t\t\t\t\tif( item != null ) {\n\t\t\t\t\t\t\tconst value = this._value = item.value;\n\t\t\t\t\t\t\tthis.emit( \"select\", value, this );\n\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Text No Items\n\t\tconst noteNoItems = new DNote( toNoteNoItemsOptions( theme, options, list ) );\n\t\tthis._noteNoItems = noteNoItems;\n\n\t\t// Text Searching\n\t\tconst noteSearching = new DNote( toNoteSearchingOptions( theme, options, list ) );\n\t\tthis._noteSearching = noteSearching;\n\n\t\t// Controller binding\n\t\tthis._input.on( \"input\", ( value: string ): void => {\n\t\t\tcontroller.search.create([ value ]);\n\t\t});\n\n\t\tcontroller.search.on( \"success\", ( e: unknown, searchResults: SEARCH_RESULT[] ): void => {\n\t\t\tconst content = list.content;\n\t\t\tconst children = content.children;\n\n\t\t\t// Update the existing children\n\t\t\tconst childrenLength = children.length;\n\t\t\tconst searchResultsLength = searchResults.length;\n\t\t\tconst minLength = Math.min( childrenLength, searchResultsLength );\n\t\t\tfor( let i = 0, imax = minLength; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tconst searchResult = searchResults[ i ];\n\t\t\t\tif( child instanceof DListItem ) {\n\t\t\t\t\tchild.text = toLabel( searchResult );\n\t\t\t\t\tchild.value = searchResult;\n\t\t\t\t} else {\n\t\t\t\t\tcontent.removeChildAt( i );\n\t\t\t\t\tchild.destroy();\n\t\t\t\t\tconst newChild = this.newItem( searchResult, toLabel( searchResult ) );\n\t\t\t\t\tcontent.addChildAt( newChild, i );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Insert new children\n\t\t\tfor( let i = minLength, imax = searchResultsLength; i < imax; ++i ) {\n\t\t\t\tconst searchResult = searchResults[ i ];\n\t\t\t\tconst newChild = this.newItem( searchResult, toLabel( searchResult ) );\n\t\t\t\tcontent.addChild( newChild );\n\t\t\t}\n\n\t\t\t// Remove unused children\n\t\t\tfor( let i = childrenLength - 1; minLength <= i; --i ) {\n\t\t\t\tchildren[ i ].destroy();\n\t\t\t}\n\t\t});\n\n\t\t// Visibility\n\t\tconst transition = new UtilTransition();\n\t\tcontroller.search.on( \"change\", (): void => {\n\t\t\tif( controller.search.isDone() ) {\n\t\t\t\tconst result = controller.search.getResult();\n\t\t\t\tif( result != null && 0 < result.length ) {\n\t\t\t\t\ttransition.hide();\n\t\t\t\t} else {\n\t\t\t\t\ttransition.show( noteNoItems );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttransition.show( noteSearching );\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected newItem( searchResult: SEARCH_RESULT, label: string ): DDialogSelectListItem<SEARCH_RESULT> {\n\t\treturn new DDialogSelectListItem<SEARCH_RESULT>({\n\t\t\tvalue: searchResult,\n\t\t\ttext: {\n\t\t\t\tvalue: label\n\t\t\t}\n\t\t});\n\t}\n\n\tget value() {\n\t\treturn this._value;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogSelect\";\n\t}\n\n\tprotected onOpen() {\n\t\tsuper.onOpen();\n\t\tthis._list.selection.clear();\n\t\tthis._controller.search.create([ this._input.value ]);\n\t}\n\n\tprotected onClose() {\n\t\tsuper.onClose();\n\t}\n\n\tdestroy() {\n\t\tthis._input.destroy();\n\t\tthis._noteNoItems.destroy();\n\t\tthis._noteSearching.destroy();\n\t\tthis._list.destroy();\n\t\tsuper.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\n\nexport interface Owner {\n\tfocus(): void;\n}\n\nexport interface Parent {\n\tparent: unknown;\n}\n\nexport interface Closeable extends DisplayObject {\n\tclose(): void;\n}\n\nexport class DMenuContext {\n\tprotected _owner: Owner;\n\tprotected _closeables: Closeable[];\n\n\tconstructor( owner: Owner ) {\n\t\tthis._owner = owner;\n\t\tthis._closeables = [];\n\t}\n\n\tprotected indexOf( target: unknown ): number {\n\t\treturn this._closeables.indexOf( target as any );\n\t}\n\n\tprotected close( index: number ): void {\n\t\tconst closeables = this._closeables;\n\t\tconst imin = Math.max( 0, index );\n\t\tfor( let i = closeables.length - 1; imin <= i; --i ) {\n\t\t\tcloseables[ i ].close();\n\t\t}\n\t}\n\n\tadd( closeable: Closeable ): void {\n\t\tthis._closeables.push( closeable );\n\t}\n\n\ttrim( closeable: Closeable | null ): void {\n\t\tthis.close( this.indexOf( closeable ) + 1 );\n\t}\n\n\tremove( closeable: Closeable ): void {\n\t\tconst index = this.indexOf( closeable );\n\t\tif( 0 <= index ) {\n\t\t\tthis.close( index + 1 );\n\t\t\tthis._closeables.splice( index, 1 );\n\t\t\tif( index === 0 ) {\n\t\t\t\tthis._owner.focus();\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Point } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DControllers } from \"./d-controllers\";\nimport { DLayoutVertical, DLayoutVerticalOptions, DThemeLayoutVertical } from \"./d-layout-vertical\";\nimport { DMenuAlign } from \"./d-menu-align\";\nimport { Closeable, DMenuContext } from \"./d-menu-context\";\nimport { DMenuItem } from \"./d-menu-item\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\nimport { DMenus } from \"./d-menus\";\nimport { UtilAttach } from \"./util/util-attach\";\nimport { UtilClickOutside } from \"./util/util-click-outside\";\nimport { utilIsString } from \"./util/util-is-string\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\n\nexport interface DMenuOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenu = DThemeMenu\n> extends DLayoutVerticalOptions<THEME> {\n\talign?: (keyof typeof DMenuAlign) | DMenuAlign;\n\tfit?: boolean;\n\tsticky?: boolean;\n\titems?: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject>;\n}\n\nexport interface DThemeMenu extends DThemeLayoutVertical {\n\tgetOffsetX(): number;\n\tgetOffsetY(): number;\n}\n\nexport class DMenu<\n\tVALUE,\n\tTHEME extends DThemeMenu = DThemeMenu,\n\tOPTIONS extends DMenuOptions<VALUE, THEME> = DMenuOptions<VALUE, THEME>\n> extends DLayoutVertical<THEME, OPTIONS> {\n\tprotected _align!: DMenuAlign;\n\tprotected _fit!: boolean;\n\tprotected _sticky!: boolean;\n\tprotected _sub!: boolean;\n\tprotected _owner!: DBase<any, any> | null;\n\tprotected _context!: DMenuContext | null;\n\tprotected _onPrerenderBound!: () => void;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis._onPrerenderBound = (): void => {\n\t\t\tthis.onPrerender();\n\t\t};\n\n\t\tif( options != null ) {\n\t\t\tthis._align = ( options.align != null ?\n\t\t\t\t( utilIsString( options.align ) ? DMenuAlign[ options.align ] : options.align ) :\n\t\t\t\tDMenuAlign.BOTTOM\n\t\t\t);\n\t\t\tthis._fit = ( options.fit != null ? options.fit : false );\n\t\t\tthis._sticky = ( options.sticky != null ? options.sticky : false );\n\t\t} else {\n\t\t\tthis._align = DMenuAlign.BOTTOM;\n\t\t\tthis._fit = false;\n\t\t\tthis._sticky = false;\n\t\t}\n\t\tthis._sub = false;\n\t\tthis._owner = null;\n\t\tthis.visible = false;\n\t\tthis._context = null;\n\t\tthis.setState( DBaseState.FOCUS_ROOT, true );\n\n\t\t// Event handlers\n\t\tUtilClickOutside.apply( this, (): void => {\n\t\t\tthis.close();\n\t\t});\n\n\t\tthis.on( \"select\", (): void => {\n\t\t\tthis.close();\n\t\t});\n\n\t\t// Items\n\t\tif( options != null && options.items != null ) {\n\t\t\tDMenus.newItems( this, options.items, this._sticky );\n\t\t}\n\t}\n\n\tfindItem( value: VALUE ): DMenuItem<VALUE> | null {\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child instanceof DMenuItem && child.value === value ) {\n\t\t\t\treturn child;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenu\";\n\t}\n\n\tgetContext(): DMenuContext | null {\n\t\treturn this._context;\n\t}\n\n\tgetCloseable(): Closeable | null {\n\t\treturn this;\n\t}\n\n\topen( owner: DBase<any, any>, closeable?: Closeable | null, context?: DMenuContext | null ): this {\n\t\tif( this.isHidden() ) {\n\t\t\tthis._owner = owner;\n\n\t\t\t// States\n\t\t\tconst children = this.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child instanceof DBase ) {\n\t\t\t\t\tchild.setState( DBaseState.FOCUSED | DBaseState.HOVERED, false );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Position & size\n\t\t\tconst application = DApplications.getInstance();\n\t\t\tconst renderer = application.renderer;\n\t\t\tconst onPrerenderBound = this._onPrerenderBound;\n\t\t\tif( this._sticky ) {\n\t\t\t\trenderer.on( \"prerender\", onPrerenderBound );\n\t\t\t} else {\n\t\t\t\trenderer.once( \"prerender\", onPrerenderBound );\n\t\t\t}\n\t\t\tif( this._fit ) {\n\t\t\t\tconst bounds = owner.getBounds();\n\t\t\t\tif( bounds != null ) {\n\t\t\t\t\tthis.width = bounds.width;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Target\n\t\t\tthis._sub = (context != null);\n\t\t\tcontext = context || new DMenuContext( owner );\n\t\t\tif( closeable != null ) {\n\t\t\t\tcontext.trim( closeable );\n\t\t\t}\n\t\t\tcontext.add( this );\n\t\t\tthis._context = context;\n\n\t\t\t// Stage\n\t\t\tapplication.stage.addChild( this );\n\n\t\t\t// Focus\n\t\t\tthis.focus();\n\n\t\t\t// Show\n\t\t\tsuper.show();\n\n\t\t\t// Event\n\t\t\tthis.emit( \"open\", this );\n\t\t}\n\t\treturn this;\n\t}\n\n\tprotected onPrerender(): void {\n\t\tconst owner = this._owner;\n\t\tif( owner != null ) {\n\t\t\tconst bounds = owner.getBounds();\n\t\t\tif( bounds != null ) {\n\t\t\t\tif( this._fit ) {\n\t\t\t\t\tthis.width = bounds.width;\n\t\t\t\t}\n\t\t\t\tconst theme = this.theme;\n\t\t\t\tconst application = DApplications.getInstance();\n\t\t\t\tUtilAttach.attach(\n\t\t\t\t\tthis,\n\t\t\t\t\tbounds,\n\t\t\t\t\ttheme.getOffsetX(), theme.getOffsetY(),\n\t\t\t\t\tapplication.width, application.height,\n\t\t\t\t\tthis._align\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tclose(): this {\n\t\tif( this.isShown() ) {\n\t\t\tconst context = this._context;\n\t\t\tif( context != null ) {\n\t\t\t\tcontext.remove( this );\n\t\t\t}\n\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.removeChild( this );\n\t\t\t}\n\n\t\t\tDApplications.getInstance().renderer.off( \"prerender\", this._onPrerenderBound );\n\n\t\t\tthis._owner = null;\n\n\t\t\tsuper.hide();\n\n\t\t\tthis.emit( \"close\", this );\n\t\t}\n\t\treturn this;\n\t}\n\n\tonKeyDown( e: KeyboardEvent ): boolean {\n\t\tif( UtilKeyboardEvent.isArrowUpKey( e ) || UtilKeyboardEvent.isArrowDownKey( e ) ) {\n\t\t\tconst focusController = DControllers.getFocusController();\n\t\t\tconst focused = focusController.getFocused();\n\t\t\tif( focused != null ) {\n\t\t\t\tconst direction = UtilKeyboardEvent.isArrowDownKey( e );\n\t\t\t\tconst next = focusController.findFocusable(\n\t\t\t\t\tfocused, false, focused.hasState( DBaseState.FOCUS_ROOT ) || direction, direction\n\t\t\t\t);\n\t\t\t\tif( next != null ) {\n\t\t\t\t\tfocusController.setFocused( next, true, true );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn super.onKeyDown( e );\n\t}\n\n\tprotected containsGlobalPoint( point: Point ): boolean {\n\t\treturn ! this._sub;\n\t}\n}\n\nDMenus.setMenuCreator( ( options?: DMenuOptions<any> ) => new DMenu<any>( options ) );\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DButtonBase, DButtonBaseOptions, DThemeButtonBase } from \"./d-button-base\";\nimport { DMenu, DMenuOptions, DThemeMenu } from \"./d-menu\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\n\nexport interface DDropdownOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeDropdown = DThemeDropdown\n> extends DButtonBaseOptions<string, THEME> {\n\tmenu?: DMenuOptions<VALUE> | DMenu<VALUE>;\n}\n\nexport interface DThemeDropdown extends DThemeButtonBase {\n\tgetTextFormatter(): ( value: string, caller: DDropdown ) => string;\n\tgetTextValue( state: DBaseState ): string;\n\tnewTextValue(): DStateAwareOrValueMightBe<string>;\n}\n\nexport class DDropdown<\n\tVALUE = unknown,\n\tTHEME extends DThemeDropdown = DThemeDropdown,\n\tOPTIONS extends DDropdownOptions<VALUE, THEME> = DDropdownOptions<VALUE, THEME>\n> extends DButtonBase<string, THEME, OPTIONS> {\n\tprotected _menu!: DMenu<VALUE>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tthis.start();\n\t\t});\n\t}\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis._menu = this.toMenu( this.theme, options );\n\t}\n\n\tprotected toMenu( theme: THEME, options?: OPTIONS ): DMenu<VALUE> {\n\t\tconst menu = options && options.menu;\n\t\treturn ( menu instanceof DMenu ? menu :\n\t\t\tnew DMenu<VALUE>( this.toMenuOptions( theme, menu ) )\n\t\t);\n\t}\n\n\tprotected toMenuOptions( theme: THEME, options?: DMenuOptions<VALUE> ): DMenuOptions<VALUE, DThemeMenu> {\n\t\toptions = options || {};\n\t\tif( options.fit == null ) {\n\t\t\toptions.fit = true;\n\t\t}\n\t\treturn options;\n\t}\n\n\tget menu(): DMenu<VALUE> {\n\t\treturn this._menu;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDropdown\";\n\t}\n\n\tstart(): void {\n\t\tthis._menu.open( this );\n\t}\n\n\tclose(): void {\n\t\tthis._menu.close();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, utils } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DListItem, DListItemSelection } from \"./d-list-item\";\nimport { DMenu } from \"./d-menu\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport enum DMenuSidedSelectionMode {\n\tNONE,\n\tSINGLE,\n\tSINGLE_ONCE,\n\tDEFAULT = SINGLE_ONCE\n}\n\nexport interface DMenuSidedSelectionOptions {\n\tmode?: (keyof typeof DMenuSidedSelectionMode) | DMenuSidedSelectionMode;\n\ton?: { [ name: string ]: Function };\n\tfilter?: ( item: DBase | null ) => boolean;\n}\n\nconst defaultFilter = () => true;\n\nexport class DMenuSidedSelection extends utils.EventEmitter implements DListItemSelection {\n\tprotected _content: Container;\n\tprotected _item: DBase | null;\n\tprotected _isDirty: boolean;\n\tprotected _mode: DMenuSidedSelectionMode;\n\tprotected _filter: ( item: DBase | null ) => boolean;\n\n\tconstructor( content: Container, options?: DMenuSidedSelectionOptions ) {\n\t\tsuper();\n\n\t\tthis._content = content;\n\t\tthis._item = null;\n\t\tthis._isDirty = true;\n\t\tthis._mode = ( options && options.mode != null ?\n\t\t\t(utilIsString( options.mode ) ? DMenuSidedSelectionMode[ options.mode ] : options.mode) :\n\t\t\tDMenuSidedSelectionMode.DEFAULT\n\t\t);\n\t\tthis._filter = ( options && options.filter ) || this.getFilterDefault();\n\n\t\t// Events\n\t\tconst on = options && options.on;\n\t\tif( on ) {\n\t\t\tfor( const name in on ) {\n\t\t\t\tthis.on( name, on[ name ] );\n\t\t\t}\n\t\t}\n\t}\n\n\ttoDirty() {\n\t\tthis._isDirty = true;\n\t}\n\n\tupdate() {\n\t\tif( this._isDirty ) {\n\t\t\tthis._isDirty = false;\n\t\t\tthis.update_( this._content );\n\t\t}\n\t}\n\n\tprotected hasMenu( child: any ): child is { menu: DMenu<any> } {\n\t\treturn child && child.menu instanceof DMenu;\n\t}\n\n\tprotected update_( root: Container ): void {\n\t\tconst children = root.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child instanceof DListItem ) {\n\t\t\t\tif( child.isActive() ) {\n\t\t\t\t\tthis.set_( child, false );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif( child instanceof Container ) {\n\t\t\t\tthis.update_( child );\n\t\t\t}\n\n\t\t\tif( this.hasMenu( child ) ) {\n\t\t\t\tthis.update_( child.menu );\n\t\t\t}\n\t\t}\n\t}\n\n\tadd( item: DBase ): void {\n\t\tthis.update();\n\t\tthis.set_( item, true );\n\t}\n\n\tset( item: DBase ): void {\n\t\tthis.update();\n\t\tthis.set_( item, true );\n\t}\n\n\tget(): DBase | null {\n\t\tthis.update();\n\t\treturn this._item;\n\t}\n\n\tsize(): number {\n\t\treturn ( this._item ? 1 : 0 );\n\t}\n\n\tisEmpty(): boolean {\n\t\treturn this._item == null;\n\t}\n\n\tremove( item: DBase ): void {\n\t\tthis.update();\n\t\tif( this._item === item ) {\n\t\t\tthis.set_( null, true );\n\t\t}\n\t}\n\n\tclear(): void {\n\t\tthis.update();\n\t\tthis.set_( null, true );\n\t}\n\n\tprotected getFilterDefault(): ( item: DBase | null ) => boolean {\n\t\treturn defaultFilter;\n\t}\n\n\tprotected set_( item: DBase | null, emit: boolean ): void {\n\t\tconst oldItem = this._item;\n\t\tconst mode = this._mode;\n\t\tif( mode !== DMenuSidedSelectionMode.NONE && this._filter( item ) && oldItem !== item ) {\n\t\t\tthis.setState( oldItem, mode, false );\n\t\t\tthis._item = item;\n\t\t\tthis.setState( item, mode, true );\n\t\t\tif( emit ) {\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected setState( item: DBase | null, mode: DMenuSidedSelectionMode, isOn: boolean ): void {\n\t\tif( item ) {\n\t\t\tif( mode === DMenuSidedSelectionMode.SINGLE ) {\n\t\t\t\titem.setState( DBaseState.ACTIVE, isOn );\n\t\t\t} else {\n\t\t\t\titem.setState( DBaseState.ACTIVE | DBaseState.READ_ONLY, isOn );\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DImage, DImageOptions, DThemeImage } from \"./d-image\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport interface DExpandableHeaderOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeExpandableHeader = DThemeExpandableHeader\n> extends DImageOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeExpandableHeader extends DThemeImage {\n\n}\n\nexport class DExpandableHeader<\n\tVALUE = unknown,\n\tTHEME extends DThemeExpandableHeader = DThemeExpandableHeader,\n\tOPTIONS extends DExpandableHeaderOptions<VALUE, THEME> = DExpandableHeaderOptions<VALUE, THEME>\n> extends DImage<VALUE, THEME, OPTIONS> {\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\n\t\tthis.on( UtilPointerEvent.down, (): void => {\n\t\t\tif( this.isActionable() ) {\n\t\t\t\tthis.onSelect();\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected onSelect() {\n\t\tthis.emit( \"select\", this );\n\t}\n\n\tonKeyDown( e: KeyboardEvent ): boolean {\n\t\tif( this.isActionable() && this.isFocused() && UtilKeyboardEvent.isActivateKey( e ) ) {\n\t\t\tthis.onSelect();\n\t\t}\n\n\t\treturn super.onKeyDown( e );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DExpandableHeader\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, DisplayObject } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DBaseStates } from \"./d-base-states\";\nimport { DExpandableHeader, DExpandableHeaderOptions } from \"./d-expandable-header\";\nimport { DLayoutVertical, DLayoutVerticalOptions, DThemeLayoutVertical } from \"./d-layout-vertical\";\n\nexport interface DExpandableOptions<\n\tTHEME extends DThemeExpandable = DThemeExpandable\n> extends DLayoutVerticalOptions<THEME> {\n\theader?: DisplayObject | DExpandableHeaderOptions;\n\tbody: Container;\n}\n\nexport interface DThemeExpandable extends DThemeLayoutVertical {\n\n}\n\nexport class DExpandable<\n\tTHEME extends DThemeExpandable = DThemeExpandable,\n\tOPTIONS extends DExpandableOptions<THEME> = DExpandableOptions<THEME>\n> extends DLayoutVertical<THEME, OPTIONS> {\n\tprotected _header!: DisplayObject;\n\tprotected _body!: Container;\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\t// Header\n\t\tconst theme = this.theme;\n\t\tconst header = this.toHeader( theme, options );\n\t\tthis._header = header;\n\t\theader.on( \"select\", (): void => {\n\t\t\tthis.toggle();\n\t\t});\n\t\tthis.addChild( header );\n\n\t\t// Body\n\t\tconst body = this.toBody( theme, options );\n\t\tthis._body = body;\n\t\tthis.addChild( body );\n\n\t\t//\n\t\tif( this.isActive() ) {\n\t\t\tthis.onActivated();\n\t\t} else {\n\t\t\tthis.onDeactivated();\n\t\t}\n\t}\n\n\tprotected toHeader( theme: THEME, options?: OPTIONS ): DisplayObject {\n\t\tif( options && options.header ) {\n\t\t\tif( options.header instanceof DisplayObject ) {\n\t\t\t\treturn options.header;\n\t\t\t} else {\n\t\t\t\treturn this.newHeader( theme, options.header );\n\t\t\t}\n\t\t}\n\t\treturn this.newHeader( theme );\n\t}\n\n\tprotected newHeader( theme: THEME, options?: DExpandableHeaderOptions ): DisplayObject {\n\t\treturn new DExpandableHeader( options );\n\t}\n\n\tprotected toBody( theme: THEME,  options: OPTIONS ): Container {\n\t\treturn options.body;\n\t}\n\n\topen(): void {\n\t\tthis.setActive( true );\n\t}\n\n\tclose(): void {\n\t\tthis.setActive( false );\n\t}\n\n\ttoggle(): void {\n\t\tthis.setActive( ! this.isActive() );\n\t}\n\n\tprotected onActivated(): void {\n\t\tconst body = this._body;\n\t\tif( body instanceof DBase ) {\n\t\t\tbody.show();\n\t\t} else {\n\t\t\tbody.visible = true;\n\t\t}\n\t}\n\n\tprotected onDeactivated(): void {\n\t\tconst body = this._body;\n\t\tif( body instanceof DBase ) {\n\t\t\tbody.hide();\n\t\t} else {\n\t\t\tbody.visible = false;\n\t\t}\n\t}\n\n\tprotected onStateChange( newState: DBaseState, oldState: DBaseState ): void {\n\t\tsuper.onStateChange( newState, oldState );\n\n\t\tif( DBaseStates.isActive( newState ) ) {\n\t\t\tif( ! DBaseStates.isActive( oldState ) ) {\n\t\t\t\tthis.onActivated();\n\t\t\t}\n\t\t} else {\n\t\t\tif( DBaseStates.isActive( oldState ) ) {\n\t\t\t\tthis.onDeactivated();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DExpandable\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DInputAndLabel, DInputAndLabelOptions, DThemeInputAndLabel } from \"./d-input-and-label\";\nimport { DInputInteger, DInputIntegerOptions, DThemeInputInteger } from \"./d-input-integer\";\n\nexport interface DInputIntegerAndLabelOptions<\n\tTHEME extends DThemeInputAndLabel = DThemeInputAndLabel\n> extends DInputAndLabelOptions<DInputIntegerOptions, THEME> {}\n\nexport class DInputIntegerAndLabel<\n\tTHEME extends DThemeInputAndLabel = DThemeInputAndLabel,\n\tOPTIONS extends DInputIntegerAndLabelOptions<THEME> = DInputIntegerAndLabelOptions<THEME>\n> extends DInputAndLabel<DInputInteger, DInputIntegerOptions, THEME, OPTIONS> {\n\tprotected createInput( options?: DInputIntegerOptions<DThemeInputInteger> ): DInputInteger {\n\t\treturn new DInputInteger( options );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMapCoordinate, DMapPoint } from \"./d-map-coordinate\";\n\nexport class DMapCoordinateEPSG3857 implements DMapCoordinate {\n\tprotected static CIRCUMFERENCE_HALF: number = Math.PI * 6378137 /* Approximate earth radius in meter */;\n\tprotected _tileSize: number;\n\n\tconstructor( tileSize: number = 256 ) {\n\t\tthis._tileSize = tileSize;\n\t}\n\n\tgetTileSize(): number {\n\t\treturn this._tileSize;\n\t}\n\n\t/**\n\t * Converts the given (lon, lat) point in WGS84 to (x, y) in EPSG:900913.\n\t * The origin of the converted point (x, y) is at the middle-left corner.\n\t * The `meters` can be the same instance that is passed in as the `lonlat`.\n\t *\n\t * @param lonlat (lon, lat) point\n\t * @param meters (x, y) point in meters converted from the given lonlat.\n\t * @return (x, y) point in meters\n\t * @see https://www.maptiler.com/google-maps-coordinates-tile-bounds-projection/\n\t * @see https://qiita.com/MALORGIS/items/1a9114dd090e5b891bf7\n\t */\n\tlonLatToMeters( lonlat: DMapPoint, meters: DMapPoint ): DMapPoint {\n\t\tconst C = DMapCoordinateEPSG3857.CIRCUMFERENCE_HALF;\n\t\tmeters.x = lonlat.x * C / 180;\n\t\tmeters.y = Math.log( Math.tan( ( 90 + lonlat.y ) * Math.PI / 360 ) ) * C / Math.PI;\n\t\treturn meters;\n\t}\n\n\t/**\n\t * The `lonlat` can be the same instance that is passed in as the `meters`.\n\t *\n\t * @param meters\n\t * @param lonlat\n\t */\n\tmetersToLonLat( meters: DMapPoint, lonlat: DMapPoint ): DMapPoint {\n\t\tconst C = DMapCoordinateEPSG3857.CIRCUMFERENCE_HALF;\n\t\tlonlat.x = meters.x / C * 180;\n\t\tlonlat.y = Math.atan( Math.exp( meters.y * Math.PI / C ) ) * 360 / Math.PI - 90;\n\t\treturn lonlat;\n\t}\n\n\t/**\n\t * Converts pixel coordinates in given zoom level of pyramid to EPSG:900913.\n\t * The origin of the `pixels` is the top-left corner.\n\t * The `meters` can be the same instance that is passed in as the `pixels`.\n\t */\n\tpixelsToMeters( pixels: DMapPoint, tz: number, tileSize: number, meters: DMapPoint ): DMapPoint {\n\t\tconst R = this.toResolution( tz, tileSize );\n\t\tconst C = DMapCoordinateEPSG3857.CIRCUMFERENCE_HALF;\n\t\tmeters.x = pixels.x * R - C;\n\t\tmeters.y = C - pixels.y * R;\n\t\treturn meters;\n\t}\n\n\t/**\n\t * Converts EPSG:900913 to pyramid pixel coordinates in given zoom level.\n\t * The origin of the pixels is the top-left corner.\n\t * The `pixels` can be the same instance that is passed in as the `meters`.\n\t */\n\tmetersToPixels( meters: DMapPoint, tz: number, tileSize: number, pixels: DMapPoint ): DMapPoint {\n\t\tconst R = this.toResolution( tz, tileSize );\n\t\tconst C = DMapCoordinateEPSG3857.CIRCUMFERENCE_HALF;\n\t\tpixels.x = ( meters.x + C ) / R;\n\t\tpixels.y = ( C - meters.y ) / R;\n\t\treturn pixels;\n\t}\n\n\t/**\n\t * Returns a tile covering region in given pixel coordinates.\n\t * The origin of the tile is the top-left corner.\n\t * The `tile` can be the same instance that is passed in as the `pixels`.\n\t */\n\tpixelsToTile( pixels: DMapPoint, tileSize: number, tile: DMapPoint ): DMapPoint {\n\t\ttile.x = Math.ceil( pixels.x / tileSize ) - 1;\n\t\ttile.y = Math.ceil( pixels.y / tileSize ) - 1;\n\t\treturn tile;\n\t}\n\n\t/**\n\t * The origin of the tile is the top-left corner.\n\t * The `tile` can be the same instance that is passed in as the `meters`.\n\t */\n\tmetersToTile( meters: DMapPoint, tz: number, tile: DMapPoint ): DMapPoint {\n\t\tconst C = DMapCoordinateEPSG3857.CIRCUMFERENCE_HALF;\n\t\tconst Z = 1 << tz;\n\t\ttile.x = Math.ceil( 0.5 * ( meters.x / C + 1 ) * Z ) - 1;\n\t\ttile.y = Math.ceil( 0.5 * ( 1 - meters.y / C ) * Z ) - 1;\n\t\treturn tile;\n\t}\n\n\tlonLatToTile( lonlat: DMapPoint, tz: number, tile: DMapPoint ): DMapPoint {\n\t\treturn this.metersToTile( this.lonLatToMeters( lonlat, tile ), tz, tile );\n\t}\n\n\tlonLatToPixels( lonlat: DMapPoint, tz: number, tileSize: number, pixels: DMapPoint ): DMapPoint {\n\t\treturn this.metersToPixels( this.lonLatToMeters( lonlat, pixels ), tz, tileSize, pixels );\n\t}\n\n\tpixelsToLonLat( pixels: DMapPoint, tz: number, tileSize: number, lonlat: DMapPoint ): DMapPoint {\n\t\treturn this.metersToLonLat( this.pixelsToMeters( pixels, tz, tileSize, lonlat ), lonlat );\n\t}\n\n\t/**\n\t * The `pixels` can be the same instance that is passed in as the `tile`.\n\t */\n\ttileToPixels( tile: DMapPoint, tileSize: number, pixels: DMapPoint ): DMapPoint {\n\t\tpixels.x = tile.x * tileSize;\n\t\tpixels.y = tile.y * tileSize;\n\t\treturn pixels;\n\t}\n\n\t/**\n\t * Returns bounds of the given tile in EPSG:900913 coordinates\n\t * The `meters` can be the same instance that is passed in as the `tile`.\n\t */\n\ttileToMeters( tile: DMapPoint, tz: number, meters: DMapPoint ): DMapPoint {\n\t\tconst R = this.toResolutionMeter( tz );\n\t\tconst C = DMapCoordinateEPSG3857.CIRCUMFERENCE_HALF;\n\t\tmeters.x = tile.x * R + C;\n\t\tmeters.y = C - tile.y * R;\n\t\treturn meters;\n\t}\n\n\tprotected toResolutionMeter( tz: number ): number {\n\t\treturn ( 2 * DMapCoordinateEPSG3857.CIRCUMFERENCE_HALF ) / ( 1 << tz );\n\t}\n\n\tprotected toResolution( tz: number, tileSize: number ): number {\n\t\treturn ( 2 * DMapCoordinateEPSG3857.CIRCUMFERENCE_HALF ) / ( tileSize << tz );\n\t}\n\n\ttoTileCount( tz: number ): number {\n\t\treturn (1 << tz);\n\t}\n\n\ttoTileCode( tz: number, tx: number, ty: number ): number {\n\t\treturn (tx << tz) + ty;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMapCoordinate } from \"./d-map-coordinate\";\nimport { DMapCoordinateEPSG3857 } from \"./d-map-coordinate-epsg3857\";\n\nexport class DMapCoordinates {\n\tprotected static _default?: DMapCoordinate;\n\n\tstatic get DEFAULT(): DMapCoordinate {\n\t\tif( this._default == null ) {\n\t\t\tthis._default = new DMapCoordinateEPSG3857();\n\t\t}\n\t\treturn this._default;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, Renderer, resources, Sprite, Texture } from \"pixi.js\";\n\nexport class DMapTile {\n\ttx: number;\n\tty: number;\n\n\tprotected _sprite: Sprite;\n\n\tconstructor(\n\t\tparent: Container,\n\t\ttx: number, ty: number,\n\t\tpx: number, py: number,\n\t\tscale: number\n\t) {\n\t\tthis.tx = tx;\n\t\tthis.ty = ty;\n\t\tconst sprite = new Sprite( Texture.EMPTY );\n\t\t(sprite as any).parent = parent;\n\t\tsprite.position.set( px, py );\n\t\tsprite.scale.set( scale, scale );\n\t\tthis._sprite = sprite;\n\t}\n\n\tload( url: string, onLoaded: () => void ): void {\n\t\tconst texture = Texture.from( url, { resolution: 1 } );\n\t\tthis._sprite.texture = texture;\n\t\tif( texture.valid ) {\n\t\t\tonLoaded();\n\t\t} else {\n\t\t\ttexture.on( \"update\", onLoaded );\n\t\t}\n\t}\n\n\ttransform( px: number, py: number, scale: number ): void {\n\t\tconst sprite = this._sprite;\n\t\tsprite.position.set( px, py );\n\t\tsprite.scale.set( scale, scale );\n\t}\n\n\tget loaded(): boolean {\n\t\treturn this._sprite.texture.valid;\n\t}\n\n\trender( renderer: Renderer ): void {\n\t\tconst sprite = this._sprite;\n\t\tsprite.updateTransform();\n\t\tsprite.render( renderer );\n\t}\n\n\tdestroy(): void {\n\t\tconst sprite = this._sprite;\n\t\tconst texture = sprite.texture;\n\t\tconst resource = texture.baseTexture.resource;\n\t\tlet image: HTMLImageElement | null = null;\n\t\tif( resource instanceof resources.BaseImageResource ) {\n\t\t\tif( resource.source instanceof HTMLImageElement ) {\n\t\t\t\timage = resource.source;\n\t\t\t}\n\t\t}\n\t\ttexture.destroy( true );\n\t\tsprite.destroy();\n\t\tif( image ) {\n\t\t\timage.src = \"\";\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Point, Renderer } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\nimport { DMapCoordinate } from \"./d-map-coordinate\";\nimport { DMapTile } from \"./d-map-tile\";\nimport { DMapTileMappingInternal } from \"./d-map-tile-mapping-internal\";\nimport { DMapTileUrlBuilder } from \"./d-map-tile-url-builder\";\n\nexport class DMapTilePlane {\n\tprotected static WORK: Point = new Point();\n\n\tprotected readonly _parent: DBase;\n\tprotected readonly _builder: DMapTileUrlBuilder;\n\tprotected readonly _tz: number;\n\tprotected _lon0: number;\n\tprotected _lat0: number;\n\tprotected _lon1: number;\n\tprotected _lat1: number;\n\tprotected readonly _tiles: Map<number, DMapTile>;\n\tprotected _renderer?: Renderer;\n\tprotected readonly _renderTileBound: ( tile: DMapTile ) => void;\n\tprotected _txmin: number;\n\tprotected _txmax: number;\n\tprotected _tymin: number;\n\tprotected _tymax: number;\n\tprotected readonly _deleteTileBound: ( tile: DMapTile, tileCode: number, tiles: Map<number, DMapTile> ) => void;\n\tprotected readonly _destroyTileBound: ( tile: DMapTile ) => void;\n\tprotected _tileCount: number;\n\tprotected _tileScale: number;\n\tprotected _tileScaleRelative: number;\n\tprotected _tileSize: number;\n\tprotected _mapping: DMapTileMappingInternal;\n\tprotected _coordinate: DMapCoordinate;\n\tprotected _isLoaded: boolean;\n\tprotected readonly _updateLoadingStateForEach: ( tile: DMapTile ) => void;\n\tprotected readonly _onLoaded: () => void;\n\tprotected readonly _onLoadedBound: () => void;\n\tprotected _isOnLoadedCalled: boolean;\n\tprotected _isOnLoadedAllowed: boolean;\n\n\tconstructor(\n\t\tparent: DBase,\n\t\tbuilder: DMapTileUrlBuilder,\n\t\ttz: number,\n\t\tmapping: DMapTileMappingInternal,\n\t\tcoordinate: DMapCoordinate,\n\t\tonLoaded: () => void\n\t) {\n\t\tthis._parent = parent;\n\t\tthis._builder = builder;\n\t\tthis._onLoaded = onLoaded;\n\t\tthis._isOnLoadedCalled = false;\n\t\tthis._isOnLoadedAllowed = true;\n\t\tthis._onLoadedBound = (): void => {\n\t\t\tthis.onLoaded();\n\t\t};\n\t\tthis._tz = tz;\n\t\tthis._lon0 = NaN;\n\t\tthis._lat0 = NaN;\n\t\tthis._lon1 = NaN;\n\t\tthis._lat1 = NaN;\n\t\tthis._tiles = new Map<number, DMapTile>();\n\t\tthis._renderTileBound = ( tile: DMapTile ): void => {\n\t\t\tthis.renderTile( tile );\n\t\t};\n\t\tthis._txmin = NaN;\n\t\tthis._txmax = NaN;\n\t\tthis._tymin = NaN;\n\t\tthis._tymax = NaN;\n\t\tthis._deleteTileBound = ( tile: DMapTile, tileCode: number, tiles: Map<number, DMapTile> ): void => {\n\t\t\tthis.deleteTile( tile, tileCode, tiles );\n\t\t};\n\t\tthis._destroyTileBound = ( tile: DMapTile ): void => {\n\t\t\tthis.destroyTile( tile );\n\t\t};\n\t\tthis._updateLoadingStateForEach = ( tile: DMapTile ): void => {\n\t\t\tif( ! tile.loaded ) {\n\t\t\t\tthis._isLoaded = false;\n\t\t\t}\n\t\t};\n\t\tthis._tileCount = coordinate.toTileCount( tz );\n\t\tthis._tileScaleRelative = 1 / this._tileCount;\n\t\tthis._tileScale = mapping.scale * this._tileScaleRelative;\n\t\tthis._tileSize = coordinate.getTileSize() * mapping.scale;\n\t\tthis._mapping = mapping;\n\t\tthis._coordinate = coordinate;\n\t\tthis._isLoaded = true;\n\t}\n\n\tprotected newTile( tx: number, ty: number, px: number, py: number, scale: number ): DMapTile {\n\t\treturn new DMapTile( this._parent, tx, ty, px, py, scale );\n\t}\n\n\tprotected renderTile( tile: DMapTile ): void {\n\t\ttile.render( this._renderer! );\n\t}\n\n\tget tz(): number {\n\t\treturn this._tz;\n\t}\n\n\trender( renderer: Renderer ): void {\n\t\tthis._renderer = renderer;\n\t\tthis._tiles.forEach( this._renderTileBound );\n\t}\n\n\tmove( lon0: number, lat0: number, lon1: number, lat1: number ): void {\n\t\tconst oldLon0 = this._lon0;\n\t\tconst oldLat0 = this._lat0;\n\t\tconst oldLon1 = this._lon1;\n\t\tconst oldLat1 = this._lat1;\n\t\tif( oldLon0 !== lon0 || oldLat0 !== lat0 || oldLon1 !== lon1 || oldLat1 !== lat1 ) {\n\t\t\tthis._lon0 = lon0;\n\t\t\tthis._lat0 = lat0;\n\t\t\tthis._lon1 = lon1;\n\t\t\tthis._lat1 = lat1;\n\n\t\t\tconst tz = this._tz;\n\t\t\tconst coordinate = this._coordinate;\n\n\t\t\tconst work = DMapTilePlane.WORK;\n\t\t\twork.set( lon0, lat0 );\n\t\t\tcoordinate.lonLatToTile( work, tz, work );\n\t\t\tconst tx0 = work.x;\n\t\t\tconst ty0 = work.y;\n\n\t\t\twork.set( lon1, lat1 );\n\t\t\tcoordinate.lonLatToTile( work, tz, work );\n\t\t\tconst tx1 = work.x;\n\t\t\tconst ty1 = work.y;\n\n\t\t\tconst tileCount = this._tileCount;\n\t\t\tlet txmin = Math.max( 0, tx0 );\n\t\t\tlet txmax = Math.min( tileCount - 1, tx1 );\n\t\t\tlet tymin = Math.max( 0, ty0 );\n\t\t\tlet tymax = Math.min( tileCount - 1, ty1 );\n\t\t\tconst dtxmin = txmin - this._txmin;\n\t\t\tconst dtxmax = txmax - this._txmax;\n\t\t\tconst dtymin = tymin - this._tymin;\n\t\t\tconst dtymax = tymax - this._tymax;\n\n\t\t\tconst isTxMinChanged = dtxmin !== dtxmin || dtxmin < 0 || 1 < dtxmin;\n\t\t\tconst isTxMaxChanged = dtxmax !== dtxmax || 0 < dtxmax || dtxmax < -1;\n\t\t\tconst isTyMinChanged = dtymin !== dtymin || dtymin < 0 || 1 < dtymin;\n\t\t\tconst isTyMaxChanged = dtymax !== dtymax || 0 < dtymax || dtymax < -1;\n\t\t\tif( isTxMinChanged || isTxMaxChanged || isTyMinChanged || isTyMaxChanged ) {\n\t\t\t\tif( isTxMinChanged ) {\n\t\t\t\t\tthis._txmin = txmin;\n\t\t\t\t} else {\n\t\t\t\t\ttxmin = this._txmin;\n\t\t\t\t}\n\t\t\t\tif( isTxMaxChanged ) {\n\t\t\t\t\tthis._txmax = txmax;\n\t\t\t\t} else {\n\t\t\t\t\ttxmax = this._txmax;\n\t\t\t\t}\n\t\t\t\tif( isTyMinChanged ) {\n\t\t\t\t\tthis._tymin = tymin;\n\t\t\t\t} else {\n\t\t\t\t\ttymin = this._tymin;\n\t\t\t\t}\n\t\t\t\tif( isTyMaxChanged ) {\n\t\t\t\t\tthis._tymax = tymax;\n\t\t\t\t} else {\n\t\t\t\t\ttymax = this._tymax;\n\t\t\t\t}\n\n\t\t\t\tconst tiles = this._tiles;\n\t\t\t\ttiles.forEach( this._deleteTileBound );\n\n\t\t\t\tconst ctx = (txmin + txmax) >> 1;\n\t\t\t\tconst cty = (tymin + tymax) >> 1;\n\t\t\t\tconst ltx = Math.max( ctx - txmin, txmax - ctx );\n\t\t\t\tconst lty = Math.max( cty - tymin, tymax - cty );\n\t\t\t\tconst lt = Math.max( ltx, lty );\n\n\t\t\t\tthis.toOffset( work );\n\t\t\t\tconst offsetX = work.x;\n\t\t\t\tconst offsetY = work.y;\n\n\t\t\t\tthis._isOnLoadedCalled = false;\n\t\t\t\tthis._isOnLoadedAllowed = false;\n\t\t\t\tthis.loadTile( tz, ctx, cty, offsetX, offsetY, work );\n\t\t\t\tfor( let it = 1; it <= lt; ++it ) {\n\t\t\t\t\tconst txa = ctx - it;\n\t\t\t\t\tif( txmin <= txa ) {\n\t\t\t\t\t\tthis.loadTilesY( tz, txa, cty, it, tymin, tymax, offsetX, offsetY, work );\n\t\t\t\t\t}\n\t\t\t\t\tconst txb = ctx + it;\n\t\t\t\t\tif( txb <= txmax ) {\n\t\t\t\t\t\tthis.loadTilesY( tz, txb, cty, it, tymin, tymax, offsetX, offsetY, work );\n\t\t\t\t\t}\n\t\t\t\t\tconst tya = cty - it;\n\t\t\t\t\tif( tymin <= tya ) {\n\t\t\t\t\t\tthis.loadTilesX( tz, ctx, it - 1, txmin, txmax, tya, offsetX, offsetY, work );\n\t\t\t\t\t}\n\t\t\t\t\tconst tyb = cty + it;\n\t\t\t\t\tif( tyb <= tymax ) {\n\t\t\t\t\t\tthis.loadTilesX( tz, ctx, it - 1, txmin, txmax, tyb, offsetX, offsetY, work );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._isOnLoadedAllowed = true;\n\t\t\t\tif( this._isOnLoadedCalled ) {\n\t\t\t\t\tthis.onLoaded();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected loadTilesX(\n\t\ttz: number,\n\t\tctx: number, ltx: number, txmin: number, txmax: number,\n\t\tty: number,\n\t\tox: number, oy: number,\n\t\twork: Point\n\t): void {\n\t\tthis.loadTile( tz, ctx, ty, ox, oy, work );\n\t\tfor( let i = 1; i <= ltx; ++i ) {\n\t\t\tconst txa = ctx - i;\n\t\t\tif( txmin <= txa ) {\n\t\t\t\tthis.loadTile( tz, txa, ty, ox, oy, work );\n\t\t\t}\n\t\t\tconst txb = ctx + i;\n\t\t\tif( txb <= txmax ) {\n\t\t\t\tthis.loadTile( tz, txb, ty, ox, oy, work );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected loadTilesY(\n\t\ttz: number, tx: number,\n\t\tcty: number, lty: number, tymin: number, tymax: number,\n\t\tox: number, oy: number,\n\t\twork: Point\n\t): void {\n\t\tthis.loadTile( tz, tx, cty, ox, oy, work );\n\t\tfor( let i = 1; i <= lty; ++i ) {\n\t\t\tconst tya = cty - i;\n\t\t\tif( tymin <= tya ) {\n\t\t\t\tthis.loadTile( tz, tx, tya, ox, oy, work );\n\t\t\t}\n\t\t\tconst tyb = cty + i;\n\t\t\tif( tyb <= tymax ) {\n\t\t\t\tthis.loadTile( tz, tx, tyb, ox, oy, work );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected loadTile( tz: number, tx: number, ty: number, ox: number, oy: number, work: Point ): void {\n\t\tconst coordinate = this._coordinate;\n\t\tconst tileCode = coordinate.toTileCode( tz, tx, ty );\n\t\tconst tiles = this._tiles;\n\t\tlet tile = tiles.get( tileCode );\n\t\tif( tile == null ) {\n\t\t\tthis.toTilePosition( tx, ty, ox, oy, work );\n\t\t\ttile = this.newTile( tx, ty, work.x, work.y, this._tileScale );\n\t\t\ttiles.set( tileCode, tile );\n\t\t\ttile.load( this._builder( tz, tx, ty ), this._onLoadedBound );\n\t\t\tthis._isLoaded = false;\n\t\t}\n\t}\n\n\tprotected toTilePosition( tx: number, ty: number, ox: number, oy: number, result: Point ): Point {\n\t\tconst tileSize = this._tileSize;\n\t\tconst tileScaleRelative = this._tileScaleRelative;\n\t\tresult.set( tx, ty );\n\t\tthis._coordinate.tileToPixels( result, tileSize, result );\n\t\tresult.set( result.x * tileScaleRelative + ox, result.y * tileScaleRelative + oy );\n\t\treturn result;\n\t}\n\n\tprotected toOffset( result: Point ): Point {\n\t\tconst parent = this._parent;\n\t\tconst mapping = this._mapping;\n\t\tconst tileSize = this._tileSize;\n\t\tresult.set(\n\t\t\t-mapping.x * tileSize + parent.width * 0.5,\n\t\t\t-mapping.y * tileSize + parent.height * 0.5\n\t\t);\n\t\treturn result;\n\t}\n\n\tprotected deleteTile( tile: DMapTile, tileCode: number, tiles: Map<number, DMapTile> ): void {\n\t\tconst tx = tile.tx;\n\t\tconst ty = tile.ty;\n\t\tif( tx < this._txmin || this._txmax < tx || ty < this._tymin || this._tymax < ty ) {\n\t\t\ttiles.delete( tileCode );\n\t\t\ttile.destroy();\n\t\t}\n\t}\n\n\tdestroy(): void {\n\t\tconst tiles = this._tiles;\n\t\ttiles.forEach( this._destroyTileBound );\n\t\ttiles.clear();\n\t}\n\n\tprotected destroyTile( tile: DMapTile ): void {\n\t\ttile.destroy();\n\t}\n\n\tprotected updateLoadingState(): void {\n\t\tthis._isLoaded = true;\n\t\tthis._tiles.forEach( this._updateLoadingStateForEach );\n\t}\n\n\tprotected onLoaded(): void {\n\t\tif( this._isOnLoadedAllowed ) {\n\t\t\tthis._onLoaded();\n\t\t} else {\n\t\t\tthis._isOnLoadedCalled = true;\n\t\t}\n\t}\n\n\tget loaded(): boolean {\n\t\tif( ! this._isLoaded ) {\n\t\t\tthis.updateLoadingState();\n\t\t}\n\t\treturn this._isLoaded;\n\t}\n\n\tget mapping(): DMapTileMappingInternal {\n\t\treturn this._mapping;\n\t}\n\n\tset mapping( mapping: DMapTileMappingInternal ) {\n\t\tconst coordinate = this._coordinate;\n\t\tconst tileScale = mapping.scale * this._tileScaleRelative;\n\t\tconst tileSize = coordinate.getTileSize() * mapping.scale;\n\t\tthis._tileScale = tileScale;\n\t\tthis._tileSize = tileSize;\n\t\tthis._mapping = mapping;\n\n\t\tconst work = DMapTilePlane.WORK;\n\t\tthis.toOffset( work );\n\t\tconst offsetX = work.x;\n\t\tconst offsetY = work.y;\n\n\t\tthis._tiles.forEach(( tile: DMapTile ): void => {\n\t\t\tthis.toTilePosition( tile.tx, tile.ty, offsetX, offsetY, work );\n\t\t\ttile.transform( work.x, work.y, tileScale );\n\t\t});\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Point, Renderer, utils } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DBase } from \"./d-base\";\nimport { DMapCoordinate } from \"./d-map-coordinate\";\nimport { DMapTileMapping } from \"./d-map-tile-mapping\";\nimport { DMapTileMappingInternal } from \"./d-map-tile-mapping-internal\";\nimport { DMapTilePlane } from \"./d-map-tile-plane\";\nimport { DMapTilePyramid, DMapTilePyramidOptions } from \"./d-map-tile-pyramid\";\nimport { DMapTileUrlBuilder } from \"./d-map-tile-url-builder\";\n\nexport class DMapTilePyramidImpl extends utils.EventEmitter implements DMapTilePyramid {\n\tprotected static WORK_LONLAT: Point = new Point();\n\n\tprotected readonly _canvas: DBase;\n\tprotected readonly _builder: DMapTileUrlBuilder;\n\tprotected readonly _planes: Array<DMapTilePlane | undefined>;\n\tprotected _z: number;\n\tprotected _tz: number;\n\tprotected _minZ: number;\n\tprotected _maxZ: number;\n\tprotected _mapping: DMapTileMapping;\n\tprotected _mappingInternal: DMapTileMappingInternal;\n\tprotected _coordinate: DMapCoordinate;\n\tprotected _onLoadedBound: () => void;\n\tprotected _fitBound: () => void;\n\tprotected _fitBoundTimeout: number | undefined;\n\tprotected _fitThrottledBound: () => void;\n\tprotected _fitThrottle: number;\n\n\tconstructor( options: DMapTilePyramidOptions ) {\n\t\tsuper();\n\t\tconst canvas = this._canvas = options.canvas;\n\t\tthis._builder = options.builder;\n\t\tconst mappingLonLat = this._mapping = options.mapping;\n\t\tconst coordinate = this._coordinate = options.coordinate;\n\t\tthis._mappingInternal = this.toMapping( canvas, mappingLonLat, coordinate );\n\t\tthis._z = NaN;\n\t\tthis._tz = NaN;\n\t\tthis._minZ = options.plane.min;\n\t\tthis._maxZ = options.plane.max;\n\t\tthis._planes = [];\n\t\tthis._onLoadedBound = (): void => {\n\t\t\tthis.onLoaded();\n\t\t};\n\t\tthis._fitBound = (): void => {\n\t\t\tthis._fitBoundTimeout = undefined;\n\t\t\tthis.fit();\n\t\t};\n\t\tthis._fitThrottle = options.plane.throttle;\n\t\tconst fitThrottledBound = this._fitThrottledBound = (): void => {\n\t\t\tthis.fitThrottled();\n\t\t};\n\t\tcanvas.on( \"scale\", fitThrottledBound );\n\t\tcanvas.on( \"move\", fitThrottledBound );\n\t\tcanvas.appendRenderable( this, true );\n\t}\n\n\tget coordinate(): DMapCoordinate {\n\t\treturn this._coordinate;\n\t}\n\n\tprotected fitThrottled(): void {\n\t\tif( this._fitBoundTimeout == null ) {\n\t\t\tthis._fitBoundTimeout = window.setTimeout( this._fitBound, this._fitThrottle );\n\t\t}\n\t}\n\n\tprotected toMapping( canvas: DBase, mapping: DMapTileMapping, coordinate: DMapCoordinate ): DMapTileMappingInternal {\n\t\tconst work = DMapTilePyramidImpl.WORK_LONLAT;\n\t\tconst tileSize = coordinate.getTileSize();\n\n\t\twork.set( mapping.from.lon, mapping.from.lat );\n\t\tcoordinate.lonLatToPixels( work, 0, tileSize, work );\n\t\tconst x0 = work.x;\n\t\tconst y0 = work.y;\n\n\t\twork.set( mapping.to.lon, mapping.to.lat );\n\t\tcoordinate.lonLatToPixels( work, 0, tileSize, work );\n\t\tconst x1 = work.x;\n\t\tconst y1 = work.y;\n\n\t\tconst dx = Math.abs(x1 - x0);\n\t\tconst dy = Math.abs(y1 - y0);\n\t\tconst dmin = 0.0000001;\n\t\tlet scale = 1;\n\t\tif( dmin < dx ) {\n\t\t\tif( dmin < dy ) {\n\t\t\t\tscale = Math.max( canvas.width / dx, canvas.height / dy );\n\t\t\t} else {\n\t\t\t\tscale = canvas.width / dx;\n\t\t\t}\n\t\t} else {\n\t\t\tif( dmin < dy ) {\n\t\t\t\tscale = canvas.height / dy;\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tscale,\n\t\t\tx: 0.5 * (x1 + x0) / tileSize,\n\t\t\ty: 0.5 * (y1 + y0) / tileSize\n\t\t};\n\t}\n\n\tget mapping(): DMapTileMapping {\n\t\treturn this._mapping;\n\t}\n\n\tset mapping( mapping: DMapTileMapping ) {\n\t\tconst oldMapping = this._mappingInternal;\n\t\tconst newMapping = this.toMapping( this._canvas, mapping, this._coordinate );\n\t\tconst threshold = 0.0000001;\n\t\tif(\n\t\t\tthreshold < Math.abs(oldMapping.scale - newMapping.scale) ||\n\t\t\tthreshold < Math.abs(oldMapping.x - newMapping.x) ||\n\t\t\tthreshold < Math.abs(oldMapping.y - newMapping.y)\n\t\t) {\n\t\t\tthis._mappingInternal = newMapping;\n\n\t\t\tconst planes = this._planes;\n\t\t\tfor( let i = 0, imax = planes.length; i < imax; ++i ) {\n\t\t\t\tconst plane = planes[ i ];\n\t\t\t\tif( plane ) {\n\t\t\t\t\tplane.mapping = newMapping;\n\t\t\t\t}\n\t\t\t}\n\t\t\tDApplications.update();\n\n\t\t\tthis._fitThrottledBound();\n\t\t}\n\t}\n\n\tprotected newPlane( tz: number ): DMapTilePlane {\n\t\treturn new DMapTilePlane(\n\t\t\tthis._canvas,\n\t\t\tthis._builder,\n\t\t\ttz,\n\t\t\tthis._mappingInternal,\n\t\t\tthis._coordinate,\n\t\t\tthis._onLoadedBound\n\t\t);\n\t}\n\n\trender( renderer: Renderer ): void {\n\t\tconst tz = this._tz;\n\t\tconst planes = this._planes;\n\t\tfor( let i = 0; i < tz; ++i ) {\n\t\t\tconst plane = planes[ i ];\n\t\t\tif( plane != null ) {\n\t\t\t\tplane.render( renderer );\n\t\t\t}\n\t\t}\n\n\t\tfor( let i = planes.length - 1; tz < i; --i ) {\n\t\t\tconst plane = planes[ i ];\n\t\t\tif( plane != null ) {\n\t\t\t\tplane.render( renderer );\n\t\t\t}\n\t\t}\n\n\t\tconst planeTz = planes[ tz ];\n\t\tif( planeTz != null ) {\n\t\t\tplaneTz.render( renderer );\n\t\t}\n\t}\n\n\tprotected toTileZ( tz: number ): number {\n\t\treturn Math.min( this._maxZ, Math.max( this._minZ, Math.floor( tz ) ) );\n\t}\n\n\tupdateTransform(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected toZ( scale: number ): number {\n\t\treturn Math.log( this._mappingInternal.scale * scale ) / Math.log( 2 );\n\t}\n\n\tmove( scale: number, lon0: number, lat0: number, lon1: number, lat1: number ): this {\n\t\tconst planes = this._planes;\n\t\tconst z = this.toZ( scale );\n\t\tif( this._z !== z ) {\n\t\t\tthis._z = z;\n\n\t\t\tconst tz = this.toTileZ( z );\n\t\t\tif( this._tz !== tz ) {\n\t\t\t\tthis._tz = tz;\n\n\t\t\t\tlet newPlane = planes[ tz ];\n\t\t\t\tif( newPlane == null ) {\n\t\t\t\t\tnewPlane = this.newPlane( tz );\n\t\t\t\t\tplanes[ tz ] = newPlane;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst plane = planes[ this._tz ];\n\t\tif( plane != null ) {\n\t\t\tplane.move( lon0, lat0, lon1, lat1 );\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tfit(): this {\n\t\tconst canvas = this._canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst container = canvas.parent;\n\t\t\tif( container != null ) {\n\t\t\t\tconst scale = canvas.scale;\n\t\t\t\tconst scaleX = scale.x;\n\t\t\t\tconst scaleY = scale.y;\n\t\t\t\tconst x = canvas.x;\n\t\t\t\tconst y = canvas.y;\n\t\t\t\tconst coordinate = this._coordinate;\n\t\t\t\tconst mapping = this._mappingInternal;\n\t\t\t\tconst tileSize = coordinate.getTileSize() * mapping.scale;\n\t\t\t\tconst x0 = mapping.x * tileSize - (x / scaleX + 0.5 * canvas.width);\n\t\t\t\tconst x1 = x0 + container.width / scaleX;\n\t\t\t\tconst y0 = mapping.y * tileSize - (y / scaleY + 0.5 * canvas.height);\n\t\t\t\tconst y1 = y0 + container.height / scaleY;\n\n\t\t\t\tconst work = DMapTilePyramidImpl.WORK_LONLAT;\n\t\t\t\twork.set( x0, y0 );\n\t\t\t\tcoordinate.pixelsToLonLat( work, 0, tileSize, work );\n\t\t\t\tconst lon0 = work.x;\n\t\t\t\tconst lat0 = work.y;\n\n\t\t\t\twork.set( x1, y1 );\n\t\t\t\tcoordinate.pixelsToLonLat( work, 0, tileSize, work );\n\t\t\t\tconst lon1 = work.x;\n\t\t\t\tconst lat1 = work.y;\n\n\t\t\t\tthis.move( scaleX, lon0, lat0, lon1, lat1 );\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tprotected destroyPlanesBefore( tz: number, planes: Array<DMapTilePlane | undefined> ): void {\n\t\tfor( let i = 0; i < tz; ++i ) {\n\t\t\tconst plane = planes[ i ];\n\t\t\tif( plane ) {\n\t\t\t\tplane.destroy();\n\t\t\t\tplanes[ i ] = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected destroyPlanesAfter( tz: number, planes: Array<DMapTilePlane | undefined> ): void {\n\t\tfor( let i = tz + 1, imax = planes.length; i < imax; ++i ) {\n\t\t\tconst plane = planes[ i ];\n\t\t\tif( plane ) {\n\t\t\t\tplane.destroy();\n\t\t\t\tplanes[ i ] = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected cleanup(): void {\n\t\tconst tz = this._tz;\n\t\tconst planes = this._planes;\n\t\tconst planeTz = planes[ tz ];\n\t\tif( planeTz && planeTz.loaded ) {\n\t\t\tthis.destroyPlanesBefore( tz, planes );\n\t\t\tthis.destroyPlanesAfter( tz, planes );\n\t\t\treturn;\n\t\t}\n\n\t\tfor( let i = tz + 1, imax = planes.length; i < imax; ++i ) {\n\t\t\tconst plane = planes[ i ];\n\t\t\tif( plane && plane.loaded ) {\n\t\t\t\tthis.destroyPlanesBefore( tz, planes );\n\t\t\t\tthis.destroyPlanesAfter( i, planes );\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tfor( let i = tz - 1; 0 <= i; --i ) {\n\t\t\tconst plane = planes[ i ];\n\t\t\tif( plane && plane.loaded ) {\n\t\t\t\tthis.destroyPlanesBefore( i, planes );\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onLoaded(): void {\n\t\tthis.cleanup();\n\t\tDApplications.update();\n\t}\n\n\tdestroy(): this {\n\t\tconst planes = this._planes;\n\t\tfor( let i = 0, imax = planes.length; i < imax; ++i ) {\n\t\t\tconst plane = planes[ i ];\n\t\t\tif( plane ) {\n\t\t\t\tplane.destroy();\n\t\t\t\tplanes[ i ] = undefined;\n\t\t\t}\n\t\t}\n\n\t\tconst canvas = this._canvas;\n\t\tconst fitThrottledBound = this._fitThrottledBound;\n\t\tcanvas.off( \"scale\", fitThrottledBound );\n\t\tcanvas.off( \"move\", fitThrottledBound );\n\t\tcanvas.removeRenderable( this, true );\n\n\t\treturn this;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramCanvasBase } from \"./d-diagram-canvas-base\";\nimport { DMapCoordinate } from \"./d-map-coordinate\";\nimport { DMapCoordinates } from \"./d-map-coordinates\";\nimport { DMapTilePyramid } from \"./d-map-tile-pyramid\";\nimport { DMapTilePyramidImpl } from \"./d-map-tile-pyramid-impl\";\nimport { DMapTileUrlBuilder } from \"./d-map-tile-url-builder\";\n\nexport const DMapTileUrlBuilderKokudo: DMapTileUrlBuilder = ( tz: number, tx: number, ty: number ): string => {\n\tif( 5 <= tz ) {\n\t\treturn `https://cyberjapandata.gsi.go.jp/xyz/pale/${tz}/${tx}/${ty}.png`;\n\t} else if( 2 <= tz ) {\n\t\treturn `https://cyberjapandata.gsi.go.jp/xyz/std/${tz}/${tx}/${ty}.png`;\n\t} else {\n\t\treturn `https://cyberjapandata.gsi.go.jp/xyz/earthhillshade/${tz}/${tx}/${ty}.png`;\n\t}\n};\n\nexport const DMapTileUrlBuilderOsm: DMapTileUrlBuilder = ( tz: number, tx: number, ty: number ): string => {\n\treturn `https://${\"abc\"[( tx + ty ) % 3]}.tile.openstreetmap.org/${tz}/${tx}/${ty}.png`;\n};\n\nexport const DMapTileUrlBuilderOsmfj: DMapTileUrlBuilder = ( tz: number, tx: number, ty: number ): string => {\n\treturn `https://j.tile.openstreetmap.jp/${tz}/${tx}/${ty}.png`;\n};\n\nexport interface DMapTilePyramidsFromOptions {\n\tcanvas: DDiagramCanvasBase<any, any>;\n\tbuilder?: DMapTileUrlBuilder;\n\tcoordinate?: DMapCoordinate;\n\tplane?: {\n\t\tmin?: number;\n\t\tmax?: number;\n\t\tthrottle?: number;\n\t};\n}\n\nexport class DMapTilePyramids {\n\tstatic MIN: number = 0;\n\tstatic MAX: number = 18;\n\tstatic THROTTLE: number = 333;\n\n\tstatic toPlaneOptions( options: DMapTilePyramidsFromOptions ) {\n\t\tconst plane = options.plane;\n\t\tif( plane ) {\n\t\t\treturn {\n\t\t\t\tmin: ( plane.min != null ? plane.min : this.MIN ),\n\t\t\t\tmax: ( plane.max != null ? plane.max : this.MAX ),\n\t\t\t\tthrottle: ( plane.throttle != null ? plane.throttle : this.THROTTLE )\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tmin: this.MIN,\n\t\t\t\tmax: this.MAX,\n\t\t\t\tthrottle: this.THROTTLE\n\t\t\t};\n\t\t}\n\t}\n\n\tstatic from( options: DMapTilePyramidsFromOptions ): DMapTilePyramid {\n\t\treturn new DMapTilePyramidImpl({\n\t\t\tcanvas: options.canvas,\n\t\t\tbuilder: options.builder || DMapTileUrlBuilderOsmfj,\n\t\t\tmapping: options.canvas.tile.mapping,\n\t\t\tcoordinate: options.coordinate || DMapCoordinates.DEFAULT,\n\t\t\tplane: this.toPlaneOptions( options )\n\t\t});\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DMenu, DMenuOptions } from \"./d-menu\";\nimport { DMenuItem } from \"./d-menu-item\";\n\nexport interface DMenuBarItemOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuBarItem = DThemeMenuBarItem\n> extends DButtonOptions<VALUE, THEME> {\n\tmenu?: DMenuOptions<VALUE> | DMenu<VALUE>;\n}\n\nexport interface DThemeMenuBarItem extends DThemeButton {\n\n}\n\nexport class DMenuBarItem<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuBarItem = DThemeMenuBarItem,\n\tOPTIONS extends DMenuBarItemOptions<VALUE, THEME> = DMenuBarItemOptions<VALUE, THEME>\n> extends DButton<VALUE, THEME, OPTIONS> {\n\tprotected _menu!: DMenu<VALUE>;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis._menu = this.toMenu( this.theme, options );\n\t\tthis._menu.on( \"select\", ( value: VALUE, item: DMenuItem<VALUE>, menu: DMenu<VALUE> ): void => {\n\t\t\tthis.onSelect( value, item, menu );\n\t\t});\n\t}\n\n\tprotected toMenu( theme: THEME, options?: OPTIONS ): DMenu<VALUE> {\n\t\tconst menu = options && options.menu;\n\t\tif( menu instanceof DMenu ) {\n\t\t\treturn menu;\n\t\t} else {\n\t\t\treturn new DMenu( this.toMenuOptions( theme, menu ) );\n\t\t}\n\t}\n\n\tprotected newMenu( theme: THEME, options?: DMenuOptions<VALUE> ): DMenu<VALUE> {\n\t\treturn new DMenu<VALUE>( this.toMenuOptions( theme, options ) );\n\t}\n\n\tprotected toMenuOptions( theme: THEME, options?: DMenuOptions<VALUE> ): DMenuOptions<VALUE> | undefined {\n\t\toptions = options || {};\n\t\tif( options.fit == null ) {\n\t\t\toptions.fit = false;\n\t\t}\n\t\treturn options;\n\t}\n\n\tclose(): void {\n\t\tthis._menu.close();\n\t}\n\n\tget menu() {\n\t\treturn this._menu;\n\t}\n\n\tprotected onSelect( value: VALUE, item: DMenuItem<VALUE>, menu: DMenu<VALUE> ): void {\n\t\tconst parent = this.parent;\n\t\tif( parent != null ) {\n\t\t\tparent.emit( \"select\", value, item, menu );\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuBarItem\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, interaction, Point } from \"pixi.js\";\nimport { DMenuBarItem } from \"./d-menu-bar-item\";\nimport { Closeable } from \"./d-menu-context\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport class DMenuBarBlocker extends Container {\n\tconstructor( target: Closeable & Container ) {\n\t\tsuper();\n\t\tthis.renderable = false;\n\t\tthis.interactive = true;\n\n\t\tthis.on( UtilPointerEvent.down, ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( e.target === this ) {\n\t\t\t\ttarget.close();\n\t\t\t}\n\t\t});\n\t\tthis.on( UtilPointerEvent.move, ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( e.target === this ) {\n\t\t\t\tconst children = target.children;\n\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\t\tconst child = children[ i ];\n\t\t\t\t\tif( child instanceof DMenuBarItem ) {\n\t\t\t\t\t\tchild.setHovered( child.containsPoint( e.data.global ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tcontainsPoint( global: Point ): boolean {\n\t\treturn true;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DBaseStates } from \"./d-base-states\";\nimport { DLayoutHorizontal, DLayoutHorizontalOptions, DThemeLayoutHorizontal } from \"./d-layout-horizontal\";\nimport { DMenuBarBlocker } from \"./d-menu-bar-blocker\";\nimport { DMenuBarItem, DMenuBarItemOptions, DThemeMenuBarItem } from \"./d-menu-bar-item\";\nimport { Closeable, DMenuContext } from \"./d-menu-context\";\nimport { UtilClickOutside } from \"./util/util-click-outside\";\n\nexport interface DMenuBarOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuBar = DThemeMenuBar\n> extends DLayoutHorizontalOptions<THEME> {\n\titems?: Array<DMenuBarItemOptions<VALUE, DThemeMenuBarItem> | DisplayObject>;\n}\n\nexport interface DThemeMenuBar extends DThemeLayoutHorizontal {\n\n}\n\nexport class DMenuBar<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuBar = DThemeMenuBar,\n\tOPTIONS extends DMenuBarOptions<VALUE, THEME> = DMenuBarOptions<VALUE, THEME>\n>extends DLayoutHorizontal<THEME, OPTIONS> {\n\tprotected _context!: DMenuContext | null;\n\tprotected _blocker!: DMenuBarBlocker;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis.setState( DBaseState.FOCUS_ROOT, true );\n\n\t\tif( options != null && options.items != null ) {\n\t\t\tconst items = options.items;\n\t\t\tUtilClickOutside.apply( this, (): void => {\n\t\t\t\tthis.close();\n\t\t\t});\n\t\t\tconst onStateChange = ( newState: DBaseState, oldState: DBaseState, item: DMenuBarItem<VALUE> ): void => {\n\t\t\t\tconst context = this._context;\n\t\t\t\tif( context == null ) {\n\t\t\t\t\tif( ! DBaseStates.isDisabled( newState ) ) {\n\t\t\t\t\t\tif( DBaseStates.isPressed( newState ) && ! DBaseStates.isPressed( oldState ) ) {\n\t\t\t\t\t\t\tthis.open( item );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif( ! DBaseStates.isDisabled( newState ) ) {\n\t\t\t\t\t\tif( DBaseStates.isHovered( newState ) && ! DBaseStates.isHovered( oldState ) ) {\n\t\t\t\t\t\t\tconst menu = item.menu;\n\t\t\t\t\t\t\tif( menu.isHidden() ) {\n\t\t\t\t\t\t\t\tmenu.open( item, this, context );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tfor( let i = 0, imax = items.length; i < imax; ++i ) {\n\t\t\t\tconst itemOrItemOptions = items[ i ];\n\t\t\t\tconst item = ( itemOrItemOptions instanceof DisplayObject ?\n\t\t\t\t\titemOrItemOptions : new DMenuBarItem<VALUE>( itemOrItemOptions )\n\t\t\t\t);\n\t\t\t\tif( item instanceof DMenuBarItem ) {\n\t\t\t\t\titem.on( \"statechange\", onStateChange );\n\t\t\t\t}\n\t\t\t\tthis.addChild( item );\n\t\t\t}\n\t\t}\n\n\t\tthis.on( \"select\", (): void => {\n\t\t\tthis.close();\n\t\t});\n\n\t\tthis._context = null;\n\t\tthis._blocker = new DMenuBarBlocker( this );\n\t}\n\n\tgetContext(): DMenuContext | null {\n\t\treturn this._context;\n\t}\n\n\tgetCloseable(): Closeable | null {\n\t\treturn this;\n\t}\n\n\topen( item: DMenuBarItem<VALUE> ): void {\n\t\tlet context = this._context;\n\t\tif( context == null ) {\n\t\t\tDApplications.getInstance().stage.addChild( this._blocker );\n\t\t\tcontext = this._context = new DMenuContext( this );\n\t\t\tcontext.trim( item );\n\t\t\tcontext.add( this );\n\t\t\titem.menu.open( item, this, context );\n\t\t}\n\t}\n\n\tclose(): void {\n\t\tconst context = this._context;\n\t\tif( context != null ) {\n\t\t\tthis._context = null;\n\t\t\tcontext.remove( this );\n\t\t\tDApplications.getInstance().stage.removeChild( this._blocker );\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuBar\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DLayoutHorizontal } from \"./d-layout-horizontal\";\nimport { DLayoutVerticalOptions, DThemeLayoutVertical } from \"./d-layout-vertical\";\n\nexport interface DMenuSidedContentOptions<\n\tTHEME extends DThemeMenuSidedContent = DThemeMenuSidedContent\n> extends DLayoutVerticalOptions<THEME> {\n\n}\n\nexport interface DThemeMenuSidedContent extends DThemeLayoutVertical {\n\n}\n\nexport class DMenuSidedContent<\n\tTHEME extends DThemeMenuSidedContent = DThemeMenuSidedContent,\n\tOPTIONS extends DMenuSidedContentOptions<THEME> = DMenuSidedContentOptions<THEME>\n> extends DLayoutHorizontal<THEME, OPTIONS> {\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tprotected initReflowable(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedContent\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"./d-align-horizontal\";\nimport { DDialogSelect, DDialogSelectOptions } from \"./d-dialog-select\";\nimport { DMenu, DMenuOptions } from \"./d-menu\";\nimport { DTableBodyCellCheckOptions } from \"./d-table-body-cell-check\";\nimport { DTableBodyCellColorOptions } from \"./d-table-body-cell-color\";\nimport { DTableBodyCellDateOptions } from \"./d-table-body-cell-date\";\nimport { DTableBodyCellDatetimeOptions } from \"./d-table-body-cell-datetime\";\nimport { DTableBodyCellIndexOptions } from \"./d-table-body-cell-index\";\nimport { DTableBodyCellInputIntegerOptions } from \"./d-table-body-cell-input-integer\";\nimport { DTableBodyCellInputRealOptions } from \"./d-table-body-cell-input-real\";\nimport { DTableBodyCellInputTextOptions } from \"./d-table-body-cell-input-text\";\nimport { DTableBodyCellSelectDialogOptions } from \"./d-table-body-cell-select-dialog\";\nimport { DTableBodyCellSelectFetcherOptions } from \"./d-table-body-cell-select-fetcher\";\nimport { DTableBodyCellSelectMenuOptions } from \"./d-table-body-cell-select-menu\";\nimport { DTableBodyCellTextOptions } from \"./d-table-body-cell-text\";\nimport { DTableBodyCellTimeOptions } from \"./d-table-body-cell-time\";\nimport { DTableHeaderCellOptions } from \"./d-table-header-cell\";\n\nexport enum DTableColumnType {\n\tINDEX,\n\tTEXT,\n\tINTEGER,\n\tREAL,\n\tCHECK,\n\tCOLOR,\n\tBUTTON,\n\tSELECT,\n\tDATE,\n\tDATETIME,\n\tTIME\n}\n\nexport type DTableGetter<ROW> = ( row: ROW, index: number ) => unknown;\nexport type DTableSetter<ROW> = ( row: ROW, index: number, cell: unknown ) => void;\nexport type DTableFormatter = ( cell: unknown ) => string;\nexport type DTableEditingFormatter = ( cell: unknown ) => string;\nexport type DTableEditingUnformatter = ( cell: string ) => unknown;\nexport type DTableEditingValidator = ( cell: unknown ) => unknown;\nexport type DTableSelectingGetter = ( selected: unknown ) => unknown;\n\nexport type DTableBodyCellOptionsUnion<ROW> = DTableBodyCellTextOptions<ROW> | DTableBodyCellInputTextOptions<ROW> |\n\tDTableBodyCellInputIntegerOptions<ROW> | DTableBodyCellInputRealOptions<ROW> | DTableBodyCellIndexOptions<ROW> |\n\tDTableBodyCellColorOptions<ROW> | DTableBodyCellCheckOptions<ROW> | DTableBodyCellSelectDialogOptions<ROW> |\n\tDTableBodyCellSelectFetcherOptions<ROW> | DTableBodyCellSelectMenuOptions<ROW> | DTableBodyCellDateOptions<ROW> |\n\tDTableBodyCellDatetimeOptions<ROW> | DTableBodyCellTimeOptions<ROW>;\n\nexport type DTableBodyCellOptionsMerged<ROW> = DTableBodyCellTextOptions<ROW> & DTableBodyCellInputTextOptions<ROW> &\n\tDTableBodyCellInputIntegerOptions<ROW> & DTableBodyCellInputRealOptions<ROW> & DTableBodyCellIndexOptions<ROW> &\n\tDTableBodyCellColorOptions<ROW> & DTableBodyCellCheckOptions<ROW> & DTableBodyCellSelectDialogOptions<ROW> &\n\tDTableBodyCellSelectFetcherOptions<ROW> & DTableBodyCellSelectMenuOptions<ROW> & DTableBodyCellDateOptions<ROW> &\n\tDTableBodyCellDatetimeOptions<ROW> & DTableBodyCellTimeOptions<ROW>;\n\nexport interface DTableColumnEditingOptions {\n\tformatter?: DTableEditingFormatter;\n\tunformatter?: DTableEditingUnformatter;\n\tvalidator?: DTableEditingValidator;\n}\n\nexport interface DTableColumnEditing {\n\tformatter?: DTableEditingFormatter;\n\tunformatter?: DTableEditingUnformatter;\n\tvalidator?: DTableEditingValidator;\n}\n\nexport interface DTableColumnSelectingOptions {\n\tgetter?: DTableSelectingGetter;\n\n\tmenu?: DMenuOptions<unknown> | DMenu<unknown>;\n\tdialog?: DDialogSelectOptions<unknown> | DDialogSelect<unknown>;\n\tfetcher?: () => Promise<unknown>;\n}\n\nexport interface DTableColumnSelecting {\n\tgetter: DTableSelectingGetter;\n\n\tmenu?: DMenu<unknown>;\n\tdialog?: DDialogSelect<unknown>;\n\tfetcher?: () => Promise<unknown>;\n}\n\nexport interface DTableColumnOptions<ROW> {\n\tweight?: number;\n\twidth?: number;\n\n\ttype?: (keyof typeof DTableColumnType) | DTableColumnType;\n\tlabel?: string;\n\tgetter?: DTableGetter<ROW>;\n\tsetter?: DTableSetter<ROW>;\n\tformatter?: DTableFormatter;\n\talign?: (keyof typeof DAlignHorizontal) | DAlignHorizontal;\n\n\teditable?: boolean;\n\tediting?: DTableColumnEditingOptions;\n\n\theader?: DTableHeaderCellOptions;\n\tbody?: DTableBodyCellOptionsUnion<ROW>;\n\n\tselecting?: DTableColumnSelectingOptions;\n}\n\nexport interface DTableColumn<ROW> {\n\tweight: number | undefined;\n\twidth: number | undefined;\n\n\ttype: DTableColumnType;\n\tlabel: string;\n\tgetter: DTableGetter<ROW>;\n\tsetter: DTableSetter<ROW>;\n\tformatter?: DTableFormatter;\n\talign: DAlignHorizontal;\n\n\teditable: boolean;\n\tediting: DTableColumnEditing;\n\n\theader?: DTableHeaderCellOptions;\n\tbody?: DTableBodyCellOptionsUnion<ROW>;\n\n\tselecting: DTableColumnSelecting;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DBase, DBaseOptions } from \"./d-base\";\nimport { Closeable, DMenuContext } from \"./d-menu-context\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\nimport { DMenuSidedContent, DMenuSidedContentOptions } from \"./d-menu-sided-content\";\nimport { DMenuSidedSelection, DMenuSidedSelectionOptions } from \"./d-menu-sided-selection\";\nimport { DMenuSideds } from \"./d-menu-sideds\";\nimport { DPane, DPaneOptions, DThemePane } from \"./d-pane\";\n\nexport interface DMenuSidedOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuSided = DThemeMenuSided,\n\tCONTENT_OPTIONS extends DBaseOptions = DMenuSidedContentOptions\n> extends DPaneOptions<THEME, CONTENT_OPTIONS> {\n\titems?: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject>;\n\tsticky?: boolean;\n\tselection?: DMenuSidedSelectionOptions | DMenuSidedSelection;\n}\n\nexport interface DThemeMenuSided extends DThemePane {\n\n}\n\nexport class DMenuSided<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuSided = DThemeMenuSided,\n\tCONTENT_OPTIONS extends DMenuSidedContentOptions = DMenuSidedContentOptions,\n\tOPTIONS extends DMenuSidedOptions<VALUE, THEME, CONTENT_OPTIONS> = DMenuSidedOptions<VALUE, THEME, CONTENT_OPTIONS>\n> extends DPane<THEME, CONTENT_OPTIONS, OPTIONS> {\n\tprotected _context!: DMenuContext | null;\n\tprotected _selection!: DMenuSidedSelection;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tconst context = new DMenuContext( this );\n\t\tthis._context = context;\n\t\tcontext.add( this );\n\n\t\tconst items = options && options.items;\n\t\tif( items != null ) {\n\t\t\tconst sticky = ( options && options.sticky != null ? options.sticky : false );\n\t\t\tthis.newItems( items, sticky );\n\t\t}\n\n\t\tconst selection = options && options.selection;\n\t\tthis._selection = ( selection instanceof DMenuSidedSelection ?\n\t\t\tselection : this.newSelection( selection ) );\n\t}\n\n\tprotected newSelection( options?: DMenuSidedSelectionOptions ): DMenuSidedSelection {\n\t\treturn new DMenuSidedSelection( this._content, options );\n\t}\n\n\tprotected onChildrenDirty(): void {\n\t\tconst selection = this._selection;\n\t\tif( selection != null ) {\n\t\t\tselection.toDirty();\n\t\t}\n\t\tsuper.onChildrenDirty();\n\t}\n\n\tprotected newItems( items: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject>, sticky: boolean ): void {\n\t\tDMenuSideds.newItems( this.content, items, sticky );\n\t}\n\n\tprotected newContent( options?: CONTENT_OPTIONS ): DBase {\n\t\treturn new DMenuSidedContent( options );\n\t}\n\n\tget selection(): DMenuSidedSelection {\n\t\treturn this._selection;\n\t}\n\n\tgetContext(): DMenuContext | null {\n\t\treturn this._context;\n\t}\n\n\tgetCloseable(): Closeable | null {\n\t\treturn this;\n\t}\n\n\topen(): void {\n\t\t// DO NOTHING\n\t}\n\n\tclose(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuSided\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\n\nexport interface DNotificationOptions<THEME extends DThemeNotification> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemeNotification extends DThemeBase {\n\n}\n\nexport class DNotification<\n\tTHEME extends DThemeNotification = DThemeNotification,\n\tOPTIONS extends DNotificationOptions<THEME> = DNotificationOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\n\nexport interface DPaginationOptions<THEME extends DThemePagination> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemePagination extends DThemeBase {\n\n}\n\nexport class DPagination<\n\tTHEME extends DThemePagination = DThemePagination,\n\tOPTIONS extends DPaginationOptions<THEME> = DPaginationOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\n\nexport interface DPickerDatetimeRangeOptions<THEME extends DThemePickerDatetimeRange> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemePickerDatetimeRange extends DThemeBase {\n\n}\n\nexport class DPickerDatetimeRange<\n\tTHEME extends DThemePickerDatetimeRange = DThemePickerDatetimeRange,\n\tOPTIONS extends DPickerDatetimeRangeOptions<THEME> = DPickerDatetimeRangeOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\n\nexport interface DPickerTimeRangeOptions<THEME extends DThemePickerTimeRange> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemePickerTimeRange extends DThemeBase {\n\n}\n\nexport class DPickerTimeRange<\n\tTHEME extends DThemePickerTimeRange = DThemePickerTimeRange,\n\tOPTIONS extends DPickerTimeRangeOptions<THEME> = DPickerTimeRangeOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDropdown, DDropdownOptions, DThemeDropdown } from \"./d-dropdown\";\nimport { DMenu } from \"./d-menu\";\nimport { DMenuItem } from \"./d-menu-item\";\nimport { DMenuItemMenu } from \"./d-menu-item-menu\";\n\nexport interface DSelectOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeSelect = DThemeSelect\n> extends DDropdownOptions<VALUE, THEME> {\n\tvalue?: VALUE;\n}\n\nexport interface DThemeSelect extends DThemeDropdown {\n\n}\n\nexport class DSelect<\n\tVALUE = unknown,\n\tTHEME extends DThemeSelect = DThemeSelect,\n\tOPTIONS extends DSelectOptions<VALUE, THEME> = DSelectOptions<VALUE, THEME>\n> extends DDropdown<VALUE, THEME, OPTIONS> {\n\tprotected _value!: VALUE | null;\n\tprotected _onSelectedBound!: ( value: VALUE, child: DMenuItem<VALUE> ) => void;\n\tprotected _onClosedBound!: () => void;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis._value = null;\n\n\t\tthis._onSelectedBound = ( value: VALUE, child: DMenuItem<VALUE> ): void => {\n\t\t\tthis.onSelected( value, child, true );\n\t\t};\n\t\tthis._onClosedBound = (): void => {\n\t\t\tthis.onClosed();\n\t\t};\n\n\t\t// Default value\n\t\tif( options != null && options.value !== undefined ) {\n\t\t\tthis.value = options.value;\n\t\t}\n\t}\n\n\tprotected onSelected( newValue: VALUE | null, item: DMenuItem<VALUE> | null, emit: boolean ): void {\n\t\tif( this._value !== newValue ) {\n\t\t\t// Value\n\t\t\tconst oldValue = this._value;\n\t\t\tthis._value = newValue;\n\n\t\t\t// Text\n\t\t\tif( item != null ) {\n\t\t\t\tthis.text = item.text || \"\";\n\t\t\t} else {\n\t\t\t\tconst options = this._options;\n\t\t\t\tthis.text = ( options && options.text && options.text.value ) || this.theme.newTextValue();\n\t\t\t}\n\n\t\t\t// Event\n\t\t\tif( emit ) {\n\t\t\t\tthis.emit( \"change\", newValue, oldValue, item, this );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onClosed(): void {\n\t\tconst menu = this._menu;\n\t\tmenu.off( \"select\", this._onSelectedBound );\n\t\tmenu.off( \"close\", this._onClosedBound );\n\t}\n\n\tstart(): void {\n\t\tconst menu = this._menu;\n\t\tmenu.on( \"select\", this._onSelectedBound );\n\t\tmenu.on( \"close\", this._onClosedBound );\n\t\tsuper.start();\n\t}\n\n\tprotected findMenuItem( menu: DMenu<VALUE>, value: VALUE | null ): DMenuItem<VALUE> | null {\n\t\tconst children = this._menu.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child instanceof DMenuItemMenu ) {\n\t\t\t\tconst result = this.findMenuItem( child.menu, value );\n\t\t\t\tif( result != null ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else if( child instanceof DMenuItem ) {\n\t\t\t\tif( child.value === value ) {\n\t\t\t\t\treturn child;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tget value(): VALUE | null {\n\t\treturn this._value;\n\t}\n\n\tset value( value: VALUE | null ) {\n\t\tconst item = this.findMenuItem( this._menu, value );\n\t\tif( item != null ) {\n\t\t\tthis.onSelected( value, item, false );\n\t\t} else {\n\t\t\tthis.onSelected( null, null, false );\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DSelect\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\n\nexport interface DSliderRangeOptions<THEME extends DThemeSliderRange> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemeSliderRange extends DThemeBase {\n\n}\n\nexport class DSliderRange<\n\tTHEME extends DThemeSliderRange = DThemeSliderRange,\n\tOPTIONS extends DSliderRangeOptions<THEME> = DSliderRangeOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\n\nexport interface DSliderOptions<THEME extends DThemeSlider> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemeSlider extends DThemeBase {\n\n}\n\nexport class DSlider<\n\tTHEME extends DThemeSlider = DThemeSlider,\n\tOPTIONS extends DSliderOptions<THEME> = DSliderOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonCheck, DButtonCheckOptions, DThemeButtonCheck } from \"./d-button-check\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableBodyCellCheckOptions<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellCheck = DThemeTableBodyCellCheck\n> extends DButtonCheckOptions<unknown, THEME>, DTableBodyCellOptions<ROW> {\n}\n\nexport interface DThemeTableBodyCellCheck extends DThemeButtonCheck {\n\n}\n\nexport class DTableBodyCellCheck<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellCheck = DThemeTableBodyCellCheck,\n\tOPTIONS extends DTableBodyCellCheckOptions<ROW, THEME> = DTableBodyCellCheckOptions<ROW, THEME>\n> extends DButtonCheck<unknown, THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tthis.emit( \"cellchange\", true, false, this._columnIndex, this._columnData );\n\t\t});\n\n\t\tthis.on( \"inactive\", (): void => {\n\t\t\tthis.emit( \"cellchange\", false, true, this._columnIndex, this._columnData );\n\t\t});\n\t}\n\n\tset( value: unknown ): void {\n\t\tthis.setActive( !! value );\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellCheck\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonColor, DButtonColorOptions, DThemeButtonColor } from \"./d-button-color\";\nimport { DColorAndAlpha } from \"./d-color\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\nimport { utilIsNumber } from \"./util/util-is-number\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport interface DTableBodyCellColorOptions<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellColor = DThemeTableBodyCellColor\n> extends DButtonColorOptions<THEME>, DTableBodyCellOptions<ROW> {\n}\n\nexport interface DThemeTableBodyCellColor extends DThemeButtonColor {\n\n}\n\nconst clone = ( value: DColorAndAlpha ): DColorAndAlpha => {\n\treturn {\n\t\tcolor: value.color,\n\t\talpha: value.alpha\n\t};\n};\n\nconst hasColor = ( value: any ): value is { color: unknown } => {\n\treturn ( \"color\" in value );\n};\n\nconst hasAlpha = ( value: any ): value is { alpha: unknown } => {\n\treturn ( \"alpha\" in value );\n};\n\nexport class DTableBodyCellColor<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellColor = DThemeTableBodyCellColor,\n\tOPTIONS extends DTableBodyCellColorOptions<ROW, THEME> = DTableBodyCellColorOptions<ROW, THEME>\n> extends DButtonColor<THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\n\t\tthis.on( \"select\", ( newValue: DColorAndAlpha, oldValue: DColorAndAlpha ): void => {\n\t\t\tthis.emit( \"cellchange\", clone( newValue ), clone( oldValue ), this._columnIndex, this._columnData );\n\t\t});\n\t}\n\n\tset( newValue: unknown ): void {\n\t\tconst value = this._value;\n\t\tif( utilIsNumber( newValue ) ) {\n\t\t\tvalue.color = newValue;\n\t\t\tvalue.alpha = 1;\n\t\t} else if( utilIsString( newValue ) ) {\n\t\t\tconst parsed = Number( newValue );\n\t\t\tif( parsed === parsed ) {\n\t\t\t\tvalue.color = parsed;\n\t\t\t} else {\n\t\t\t\tvalue.color = 0xffffff;\n\t\t\t}\n\t\t\tvalue.alpha = 1;\n\t\t} else if( newValue != null ) {\n\t\t\tif( hasColor( newValue ) ) {\n\t\t\t\tvalue.color = Number( newValue.color );\n\t\t\t} else {\n\t\t\t\tvalue.color = 0xffffff;\n\t\t\t}\n\t\t\tif( hasAlpha( newValue ) ) {\n\t\t\t\tvalue.alpha = Number( newValue.alpha );\n\t\t\t} else {\n\t\t\t\tvalue.alpha = 1;\n\t\t\t}\n\t\t} else {\n\t\t\tvalue.color = 0xffffff;\n\t\t\tvalue.alpha = 1;\n\t\t}\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellColor\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DImageBase, DImageBaseOptions, DThemeImageBase } from \"./d-image-base\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableBodyCellIndexOptions<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellIndex = DThemeTableBodyCellIndex\n> extends DImageBaseOptions<number, THEME>, DTableBodyCellOptions<ROW> {\n}\n\nexport interface DThemeTableBodyCellIndex extends DThemeImageBase {\n\tgetTextFormatter(): ( value: number, caller: DTableBodyCellIndex ) => string;\n\tgetTextValue( state: DBaseState ): number;\n\tnewTextValue(): number;\n}\n\nexport class DTableBodyCellIndex<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellIndex = DThemeTableBodyCellIndex,\n\tOPTIONS extends DTableBodyCellIndexOptions<ROW, THEME> = DTableBodyCellIndexOptions<ROW, THEME>\n> extends DImageBase<number, THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tset( value: unknown, rowIndex: number): void {\n\t\tthis.text = rowIndex;\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellIndex\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DInputInteger, DInputIntegerOptions, DThemeInputInteger } from \"./d-input-integer\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableBodyCellInputIntegerOptions<\n\tROW = unknown,\n\tTHEME extends DThemeInputInteger = DThemeInputInteger\n> extends DInputIntegerOptions<THEME>, DTableBodyCellOptions<ROW> {\n}\n\nexport interface DThemeTableBodyCellInputInteger extends DThemeInputInteger {\n\n}\n\nexport class DTableBodyCellInputInteger<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellInputInteger = DThemeTableBodyCellInputInteger,\n\tOPTIONS extends DTableBodyCellInputIntegerOptions<ROW, THEME> = DTableBodyCellInputIntegerOptions<ROW, THEME>\n> extends DInputInteger<THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\t\tthis.on( \"change\", ( newCellValue: unknown, oldCellValue: unknown ): void => {\n\t\t\tthis.emit( \"cellchange\", newCellValue, oldCellValue, this._columnIndex, this._columnData );\n\t\t});\n\t}\n\n\tset( value: unknown ): void {\n\t\tthis.text = Number( value );\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellInputInteger\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DInputReal, DInputRealOptions, DThemeInputReal } from \"./d-input-real\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableBodyCellInputRealOptions<\n\tROW = unknown,\n\tTHEME extends DThemeInputReal = DThemeInputReal\n> extends DInputRealOptions<THEME>, DTableBodyCellOptions<ROW> {\n}\n\nexport interface DThemeTableBodyCellInputReal extends DThemeInputReal {\n\n}\n\nexport class DTableBodyCellInputReal<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellInputReal = DThemeTableBodyCellInputReal,\n\tOPTIONS extends DTableBodyCellInputRealOptions<ROW, THEME> = DTableBodyCellInputRealOptions<ROW, THEME>\n> extends DInputReal<THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\t\tthis.on( \"change\", ( newCellValue: unknown, oldCellValue: unknown ): void => {\n\t\t\tthis.emit( \"cellchange\", newCellValue, oldCellValue, this._columnIndex, this._columnData );\n\t\t});\n\t}\n\n\tset( value: unknown ): void {\n\t\tthis.text = Number( value );\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellInputReal\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DInputText, DInputTextOptions, DThemeInputText } from \"./d-input-text\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableBodyCellInputTextOptions<\n\tROW = unknown,\n\tTHEME extends DThemeInputText = DThemeInputText\n> extends DInputTextOptions<THEME>, DTableBodyCellOptions<ROW> {\n}\n\nexport interface DThemeTableBodyCellInputText extends DThemeInputText {\n\n}\n\nexport class DTableBodyCellInputText<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellInputText = DThemeTableBodyCellInputText,\n\tOPTIONS extends DTableBodyCellInputTextOptions<ROW, THEME> = DTableBodyCellInputTextOptions<ROW, THEME>\n> extends DInputText<THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\t\tthis.on( \"change\", ( newCellValue: unknown, oldCellValue: unknown ): void => {\n\t\t\tthis.emit( \"cellchange\", newCellValue, oldCellValue, this._columnIndex, this._columnData );\n\t\t});\n\t}\n\n\tset( value: unknown ): void {\n\t\tthis.text = String( value );\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellInputText\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableBodyCellSelectDialogOptions<\n\tROW = unknown,\n\tVALUE = unknown,\n\tTHEME extends DThemeTableBodyCellSelectDialog = DThemeTableBodyCellSelectDialog\n> extends DButtonOptions<VALUE, THEME>, DTableBodyCellOptions<ROW> {\n\n}\n\nexport interface DThemeTableBodyCellSelectDialog extends DThemeButton {\n\n}\n\nexport class DTableBodyCellSelectDialog<\n\tROW = unknown,\n\tVALUE = unknown,\n\tTHEME extends DThemeTableBodyCellSelectDialog = DThemeTableBodyCellSelectDialog,\n\tOPTIONS extends DTableBodyCellSelectDialogOptions<ROW, VALUE, THEME> =\n\t\tDTableBodyCellSelectDialogOptions<ROW, VALUE, THEME>\n> extends DButton<VALUE, THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tconst column = options.column;\n\t\tthis._columnIndex = column.index;\n\t\tthis._columnData = column.data;\n\t\tconst selecting = column.data.selecting;\n\t\tconst dialog = selecting.dialog;\n\t\tif( dialog != null ) {\n\t\t\tconst getter = selecting.getter;\n\t\t\tconst onSelectBound = ( selected: VALUE | null ): void => {\n\t\t\t\tconst newValue = getter( selected );\n\t\t\t\tconst oldValue = this.text;\n\t\t\t\tif( newValue !== oldValue ) {\n\t\t\t\t\tthis.text = newValue as VALUE;\n\t\t\t\t\tthis.emit( \"cellchange\", newValue, oldValue, this._columnIndex, this._columnData );\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst onCloseBound = (): void => {\n\t\t\t\tdialog.off( \"select\", onSelectBound );\n\t\t\t\tdialog.off( \"close\", onCloseBound );\n\t\t\t};\n\t\t\tthis.on( \"active\", (): void => {\n\t\t\t\tdialog.on( \"select\", onSelectBound );\n\t\t\t\tdialog.on( \"close\", onCloseBound );\n\t\t\t\tdialog.open();\n\t\t\t});\n\t\t}\n\t}\n\n\tget value(): VALUE {\n\t\treturn this.text as VALUE;\n\t}\n\n\tset value( value: VALUE ) {\n\t\tthis.text = value;\n\t}\n\n\tset( value: unknown, rowIndex: number, columnIndex: number, forcibly?: boolean ): void {\n\t\tif( forcibly ) {\n\t\t\tthis._textValue = value as VALUE;\n\t\t\tthis._textValueComputed = value as VALUE;\n\t\t\tthis.onTextChange();\n\t\t\tthis.createOrUpdateText();\n\t\t} else {\n\t\t\tthis.text = value as VALUE;\n\t\t}\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellSelectDialog\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableBodyCellSelectFetcherOptions<\n\tROW = unknown,\n\tVALUE = unknown,\n\tTHEME extends DThemeTableBodyCellSelectFetcher = DThemeTableBodyCellSelectFetcher\n> extends DButtonOptions<VALUE, THEME>, DTableBodyCellOptions<ROW> {\n\n}\n\nexport interface DThemeTableBodyCellSelectFetcher extends DThemeButton {\n\n}\n\nexport class DTableBodyCellSelectFetcher<\n\tROW = unknown,\n\tVALUE = unknown,\n\tTHEME extends DThemeTableBodyCellSelectFetcher = DThemeTableBodyCellSelectFetcher,\n\tOPTIONS extends DTableBodyCellSelectFetcherOptions<ROW, VALUE, THEME> =\n\t\tDTableBodyCellSelectFetcherOptions<ROW, VALUE, THEME>\n> extends DButton<VALUE, THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tconst column = options.column;\n\t\tthis._columnIndex = column.index;\n\t\tthis._columnData = column.data;\n\t\tconst selecting = column.data.selecting;\n\t\tconst fetcher = selecting.fetcher;\n\t\tif( fetcher != null ) {\n\t\t\tconst getter = selecting.getter;\n\t\t\tconst onSelectBound = ( selected: unknown ): void => {\n\t\t\t\tconst newValue = getter( selected );\n\t\t\t\tconst oldValue = this.text;\n\t\t\t\tif( newValue !== oldValue ) {\n\t\t\t\t\tthis.text = newValue as VALUE;\n\t\t\t\t\tthis.emit( \"cellchange\", newValue, oldValue, this._columnIndex, this._columnData );\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.on( \"active\", (): void => {\n\t\t\t\tfetcher().then( onSelectBound );\n\t\t\t});\n\t\t}\n\t}\n\n\tget value(): VALUE {\n\t\treturn this._textValueComputed;\n\t}\n\n\tset value( value: VALUE ) {\n\t\tthis.text = value;\n\t}\n\n\tset( value: unknown, rowIndex: number, columnIndex: number, forcibly?: boolean ): void {\n\t\tif( forcibly ) {\n\t\t\tthis._textValue = value as VALUE;\n\t\t\tthis._textValueComputed = value as VALUE;\n\t\t\tthis.onTextChange();\n\t\t\tthis.createOrUpdateText();\n\t\t} else {\n\t\t\tthis.text = value as VALUE;\n\t\t}\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellSelectFetcher\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DSelect, DSelectOptions, DThemeSelect } from \"./d-select\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableBodyCellSelectMenuOptions<\n\tROW = unknown,\n\tVALUE = unknown,\n\tTHEME extends DThemeTableBodyCellSelectMenu = DThemeTableBodyCellSelectMenu\n> extends DSelectOptions<VALUE, THEME>, DTableBodyCellOptions<ROW> {\n\n}\n\nexport interface DThemeTableBodyCellSelectMenu extends DThemeSelect {\n\n}\n\nexport class DTableBodyCellSelectMenu<\n\tROW = unknown,\n\tVALUE = unknown,\n\tTHEME extends DThemeTableBodyCellSelectMenu = DThemeTableBodyCellSelectMenu,\n\tOPTIONS extends DTableBodyCellSelectMenuOptions<ROW, VALUE, THEME> = DTableBodyCellSelectMenuOptions<ROW, VALUE, THEME>\n> extends DSelect<VALUE, THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tconst column = options.column;\n\t\tthis._columnIndex = column.index;\n\t\tthis._columnData = column.data;\n\t\tconst selecting = column.data.selecting;\n\t\tconst getter = selecting.getter;\n\t\tthis.on( \"change\", ( newSelected: VALUE | null, oldSelected: VALUE | null ): void => {\n\t\t\tconst newValue = getter( newSelected );\n\t\t\tconst oldValue = getter( oldSelected );\n\t\t\tthis.emit( \"cellchange\", newValue, oldValue, this._columnIndex, this._columnData );\n\t\t});\n\t}\n\n\tset( value: unknown ): void {\n\t\tthis.value = value as VALUE;\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellSelectMenu\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DImageBase, DImageBaseOptions, DThemeImageBase } from \"./d-image-base\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableBodyCellTextOptions<ROW, THEME extends DThemeTableBodyCellText = DThemeTableBodyCellText>\n\textends DImageBaseOptions<unknown, THEME>, DTableBodyCellOptions<ROW> {\n}\n\nexport interface DThemeTableBodyCellText extends DThemeImageBase {\n\tgetTextValue( state: DBaseState ): unknown;\n\tnewTextValue(): unknown;\n}\n\nexport class DTableBodyCellText<\n\tROW,\n\tTHEME extends DThemeTableBodyCellText = DThemeTableBodyCellText,\n\tOPTIONS extends DTableBodyCellTextOptions<ROW, THEME> = DTableBodyCellTextOptions<ROW, THEME>\n> extends DImageBase<unknown, THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ): void {\n\t\tsuper.init( options );\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tset( value: unknown ): void {\n\t\tthis.text = value;\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellText\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utilIndexOf } from \"./util/util-index-of\";\nimport { utilIsFunction } from \"./util/util-is-function\";\n\nexport type DTableBodyFilterFunction<ROW> = ( row: ROW, index: number, rows: ROW[] ) => boolean;\nexport interface DTableBodyFilterObject<ROW> {\n\ttest( row: ROW, index: number, rows: ROW[] ): boolean;\n}\n\ninterface DTableBodyFilterParent<ROW> {\n\trows: ROW[];\n}\n\nexport interface DTableBodyFilter<ROW> {\n\treadonly indices: number[] | undefined;\n\n\tapply(): void;\n\tunapply(): void;\n\tisApplied(): boolean;\n\tget(): DTableBodyFilterFunction<ROW> | DTableBodyFilterObject<ROW> | undefined;\n\tset( filter: DTableBodyFilterFunction<ROW> | DTableBodyFilterObject<ROW> | undefined ): void;\n}\n\nconst FILTERED_COMPARATOR = ( a: number, b: number ): number => {\n\treturn a - b;\n};\n\nexport class DTableBodyFilterImpl<ROW> implements DTableBodyFilter<ROW> {\n\tprotected _parent: DTableBodyFilterParent<ROW>;\n\tprotected _filter?: DTableBodyFilterFunction<ROW> | DTableBodyFilterObject<ROW>;\n\tprotected _filtered?: number[];\n\tprotected _onChange: () => void;\n\n\tconstructor( parent: DTableBodyFilterParent<ROW>, onChange: () => void ) {\n\t\tthis._parent = parent;\n\t\tthis._onChange = onChange;\n\t}\n\n\tapply(): void {\n\t\tconst newFiltered = this.newFiltered();\n\t\tconst oldFiltered = this._filtered;\n\t\tif( newFiltered != null ) {\n\t\t\tif( oldFiltered != null ) {\n\t\t\t\tif( newFiltered.length !== oldFiltered.length ) {\n\t\t\t\t\tthis.setFiltered( newFiltered );\n\t\t\t\t} else {\n\t\t\t\t\tfor( let i = 0, imax = newFiltered.length; i < imax; ++i ) {\n\t\t\t\t\t\tif( newFiltered[ i ] !== oldFiltered[ i ] ) {\n\t\t\t\t\t\t\tthis.setFiltered( newFiltered );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.setFiltered( newFiltered );\n\t\t\t}\n\t\t} else if( oldFiltered != null ) {\n\t\t\tthis.setFiltered();\n\t\t}\n\t}\n\n\tprotected setFiltered( filtered?: number[] ): void {\n\t\tthis._filtered = filtered;\n\t\tthis._onChange();\n\t}\n\n\tunapply(): void {\n\t\tif( this._filtered != null ) {\n\t\t\tthis.setFiltered();\n\t\t}\n\t}\n\n\tisApplied(): boolean {\n\t\treturn this._filtered != null;\n\t}\n\n\tprotected newFiltered(): number[] | undefined {\n\t\tconst filter = this._filter;\n\t\tif( filter != null ) {\n\t\t\tconst rows = this._parent.rows;\n\t\t\tconst rowsLength = rows.length;\n\t\t\tconst filtered: number[] = [];\n\t\t\tif( utilIsFunction( filter ) ) {\n\t\t\t\tfor( let i = 0; i < rowsLength; ++i ) {\n\t\t\t\t\tconst row = rows[ i ];\n\t\t\t\t\tif( filter( row, i, rows ) ) {\n\t\t\t\t\t\tfiltered.push( i );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor( let i = 0; i < rowsLength; ++i ) {\n\t\t\t\t\tconst row = rows[ i ];\n\t\t\t\t\tif( filter.test( row, i, rows ) ) {\n\t\t\t\t\t\tfiltered.push( i );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn filtered;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\tget(): DTableBodyFilterFunction<ROW> | DTableBodyFilterObject<ROW> | undefined {\n\t\treturn this._filter;\n\t}\n\n\tset( filter: DTableBodyFilterFunction<ROW> | DTableBodyFilterObject<ROW> | undefined ): void {\n\t\tif( this._filter !== filter ) {\n\t\t\tthis._filter = filter;\n\t\t}\n\t}\n\n\tadd( rowIndex: number, count: number ): void {\n\t\tconst filtered = this._filtered;\n\t\tif( filtered != null ) {\n\t\t\tfor( let i = 0; i < count; ++i ) {\n\t\t\t\tfiltered.push( rowIndex + i );\n\t\t\t}\n\t\t\tfiltered.sort( FILTERED_COMPARATOR );\n\t\t\tthis._onChange();\n\t\t}\n\t}\n\n\tshift( rowIndex: number, amount: number, add: boolean ): void {\n\t\tconst filtered = this._filtered;\n\t\tif( filtered != null ) {\n\t\t\tfor( let i = filtered.length - 1; 0 <= i; --i ) {\n\t\t\t\tconst filteredRowIndex = filtered[ i ];\n\t\t\t\tif( rowIndex <= filteredRowIndex ) {\n\t\t\t\t\tfiltered[ i ] = filteredRowIndex + amount;\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( add ) {\n\t\t\t\tthis.add( rowIndex, amount );\n\t\t\t}\n\t\t\tthis._onChange();\n\t\t}\n\t}\n\n\tclear(): void {\n\t\tconst filtered = this._filtered;\n\t\tif( filtered != null && 0 < filtered.length ) {\n\t\t\tfiltered.length = 0;\n\t\t\tthis._onChange();\n\t\t}\n\t}\n\n\tremove( rowIndex: number ): boolean {\n\t\tconst filtered = this._filtered;\n\t\tif( filtered != null ) {\n\t\t\tconst index = utilIndexOf( filtered, rowIndex );\n\t\t\tif( 0 <= index ) {\n\t\t\t\tfiltered.splice( index, 1 );\n\t\t\t\tthis._onChange();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tget indices(): number[] | undefined {\n\t\treturn this._filtered;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DDialogDate, DDialogDateOptions } from \"./d-dialog-date\";\nimport { DDialogDates } from \"./d-dialog-dates\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\nimport { utilIsNumber } from \"./util/util-is-number\";\n\nexport interface DTableBodyCellDateOptions<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellDate = DThemeTableBodyCellDate\n> extends DButtonOptions<Date, THEME>, DTableBodyCellOptions<ROW> {\n\tdialog?: DDialogDateOptions;\n}\n\nexport interface DThemeTableBodyCellDate extends DThemeButton {\n\tgetTextFormatter(): ( value: Date, caller: DTableBodyCellDate ) => string;\n\tgetTextValue( state: DBaseState ): Date;\n\tnewTextValue(): Date;\n}\n\nexport class DTableBodyCellDate<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellDate = DThemeTableBodyCellDate,\n\tOPTIONS extends DTableBodyCellDateOptions<ROW, THEME> = DTableBodyCellDateOptions<ROW, THEME>\n> extends DButton<Date, THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _dialog?: DDialogDate;\n\tprotected _dialogOptions?: DDialogDateOptions;\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis._dialogOptions = options.dialog;\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tconst currentTime = this._textValueComputed.getTime();\n\t\t\tconst dialog = this.dialog;\n\t\t\tdialog.current = new Date( currentTime );\n\t\t\tdialog.new = new Date( currentTime );\n\t\t\tdialog.page = new Date( currentTime );\n\t\t\tdialog.open().then((): void => {\n\t\t\t\tconst dialogNew = dialog.new;\n\t\t\t\tconst dialogCurrent = dialog.current;\n\t\t\t\tthis.text = new Date( dialogNew.getTime() );\n\t\t\t\tthis.emit( \"cellchange\", dialogNew, dialogCurrent, this._columnIndex, this._columnData );\n\t\t\t});\n\t\t});\n\t}\n\n\tget dialog(): DDialogDate {\n\t\tlet dialog = this._dialog;\n\t\tif( dialog == null ) {\n\t\t\tconst dialogOptions = this._dialogOptions;\n\t\t\tif( dialogOptions != null ) {\n\t\t\t\tdialog = new DDialogDate( this._dialogOptions );\n\t\t\t} else {\n\t\t\t\tdialog = DDialogDates.getInstance();\n\t\t\t}\n\t\t\tthis._dialog = dialog;\n\t\t}\n\t\treturn dialog;\n\t}\n\n\tset( value: unknown, rowIndex: number, columnIndex: number, forcibly?: boolean ): void {\n\t\tif( value instanceof Date ) {\n\t\t\tif( forcibly ) {\n\t\t\t\tthis._textValue = value;\n\t\t\t\tthis._textValueComputed = value;\n\t\t\t\tthis.onTextChange();\n\t\t\t\tthis.createOrUpdateText();\n\t\t\t} else {\n\t\t\t\tthis.text = value;\n\t\t\t}\n\t\t} else if( utilIsNumber( value ) ) {\n\t\t\tconst textValueComputed = this._textValueComputed;\n\t\t\tif( textValueComputed.getTime() !== value ) {\n\t\t\t\ttextValueComputed.setTime( value );\n\t\t\t\tthis.onTextChange();\n\t\t\t\tthis.createOrUpdateText();\n\t\t\t}\n\t\t}\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellDate\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DDialogDatetime, DDialogDatetimeOptions } from \"./d-dialog-datetime\";\nimport { DDialogDatetimes } from \"./d-dialog-datetimes\";\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerDatetimes } from \"./d-picker-datetimes\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\nimport { utilIsNumber } from \"./util/util-is-number\";\n\nexport interface DTableBodyCellDatetimeOptions<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellDatetime = DThemeTableBodyCellDatetime\n> extends DButtonOptions<Date, THEME>, DTableBodyCellOptions<ROW> {\n\tdialog?: DDialogDatetimeOptions;\n}\n\nexport interface DThemeTableBodyCellDatetime extends DThemeButton {\n\tgetTextFormatter(): ( value: Date, caller: DTableBodyCellDatetime ) => string;\n\tgetTextValue( state: DBaseState ): Date;\n\tnewTextValue(): Date;\n}\n\nexport class DTableBodyCellDatetime<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellDatetime = DThemeTableBodyCellDatetime,\n\tOPTIONS extends DTableBodyCellDatetimeOptions<ROW, THEME> = DTableBodyCellDatetimeOptions<ROW, THEME>\n> extends DButton<Date, THEME, OPTIONS> implements DTableBodyCell {\n\tprotected static DIALOG?: DDialogDatetime;\n\tprotected _dialog?: DDialogDatetime;\n\tprotected _dialogOptions?: DDialogDatetimeOptions;\n\tprotected _datetimeMask!: DPickerDatetimeMask;\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tthis._dialogOptions = options.dialog;\n\t\tthis._datetimeMask = DPickerDatetimes.toMask( options && options.dialog && options.dialog.picker );\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\n\t\tsuper.init( options );\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tconst currentTime = this._textValueComputed.getTime();\n\t\t\tconst dialog = this.dialog;\n\t\t\tdialog.current = new Date( currentTime );\n\t\t\tdialog.new = new Date( currentTime );\n\t\t\tdialog.page = new Date( currentTime );\n\t\t\tdialog.open().then((): void => {\n\t\t\t\tconst dialogNew = dialog.new;\n\t\t\t\tconst dialogCurrent = dialog.current;\n\t\t\t\tthis.text = new Date( dialogNew.getTime() );\n\t\t\t\tthis.emit( \"cellchange\", dialogNew, dialogCurrent, this._columnIndex, this._columnData );\n\t\t\t});\n\t\t});\n\t}\n\n\tgetDatetimeMask(): DPickerDatetimeMask {\n\t\treturn this._datetimeMask;\n\t}\n\n\tget dialog(): DDialogDatetime {\n\t\tlet dialog = this._dialog;\n\t\tif( dialog == null ) {\n\t\t\tconst dialogOptions = this._dialogOptions;\n\t\t\tif( dialogOptions != null ) {\n\t\t\t\tdialog = new DDialogDatetime( this._dialogOptions );\n\t\t\t} else {\n\t\t\t\tdialog = DDialogDatetimes.getInstance();\n\t\t\t}\n\t\t\tthis._dialog = dialog;\n\t\t}\n\t\treturn dialog;\n\t}\n\n\tset( value: unknown, rowIndex: number, columnIndex: number, forcibly?: boolean ): void {\n\t\tif( value instanceof Date ) {\n\t\t\tif( forcibly ) {\n\t\t\t\tthis._textValue = value;\n\t\t\t\tthis._textValueComputed = value;\n\t\t\t\tthis.onTextChange();\n\t\t\t\tthis.createOrUpdateText();\n\t\t\t} else {\n\t\t\t\tthis.text = value;\n\t\t\t}\n\t\t} else if( utilIsNumber( value ) ) {\n\t\t\tconst textValueComputed = this._textValueComputed;\n\t\t\tif( textValueComputed.getTime() !== value ) {\n\t\t\t\ttextValueComputed.setTime( value );\n\t\t\t\tthis.onTextChange();\n\t\t\t\tthis.createOrUpdateText();\n\t\t\t}\n\t\t}\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellDatetime\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DDialogTime, DDialogTimeOptions } from \"./d-dialog-time\";\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerTimes } from \"./d-picker-times\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\nimport { utilIsNumber } from \"./util/util-is-number\";\n\nexport interface DTableBodyCellTimeOptions<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellTime = DThemeTableBodyCellTime\n> extends DButtonOptions<Date, THEME>, DTableBodyCellOptions<ROW> {\n\tdialog?: DDialogTimeOptions;\n}\n\nexport interface DThemeTableBodyCellTime extends DThemeButton {\n\tgetTextFormatter(): ( value: Date, caller: DTableBodyCellTime ) => string;\n\tgetTextValue( state: DBaseState ): Date;\n\tnewTextValue(): Date;\n}\n\nexport class DTableBodyCellTime<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellTime = DThemeTableBodyCellTime,\n\tOPTIONS extends DTableBodyCellTimeOptions<ROW, THEME> = DTableBodyCellTimeOptions<ROW, THEME>\n> extends DButton<Date, THEME, OPTIONS> implements DTableBodyCell {\n\tprotected static DIALOG?: DDialogTime;\n\tprotected _dialog?: DDialogTime;\n\tprotected _dialogOptions?: DDialogTimeOptions;\n\tprotected _datetimeMask!: DPickerDatetimeMask;\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tthis._dialogOptions = options.dialog;\n\t\tthis._datetimeMask = DPickerTimes.toMask( options.dialog && options.dialog.picker );\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\n\t\tsuper.init( options );\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tconst currentTime = this._textValueComputed.getTime();\n\t\t\tconst dialog = this.dialog;\n\t\t\tdialog.current = new Date( currentTime );\n\t\t\tdialog.new = new Date( currentTime );\n\t\t\tdialog.open().then((): void => {\n\t\t\t\tconst dialogNew = dialog.new;\n\t\t\t\tconst dialogCurrent = dialog.current;\n\t\t\t\tthis.text = new Date( dialogNew.getTime() );\n\t\t\t\tthis.emit( \"cellchange\", dialogNew, dialogCurrent, this._columnIndex, this._columnData );\n\t\t\t});\n\t\t});\n\t}\n\n\tgetDatetimeMask(): DPickerDatetimeMask {\n\t\treturn this._datetimeMask;\n\t}\n\n\tget dialog(): DDialogTime {\n\t\tlet dialog = this._dialog;\n\t\tif( dialog == null ) {\n\t\t\tconst dialogOptions = this._dialogOptions;\n\t\t\tif( dialogOptions != null ) {\n\t\t\t\tdialog = new DDialogTime( this._dialogOptions );\n\t\t\t} else {\n\t\t\t\tif( DTableBodyCellTime.DIALOG == null ) {\n\t\t\t\t\tDTableBodyCellTime.DIALOG = new DDialogTime();\n\t\t\t\t}\n\t\t\t\tdialog = DTableBodyCellTime.DIALOG;\n\t\t\t}\n\t\t\tthis._dialog = dialog;\n\t\t}\n\t\treturn dialog;\n\t}\n\n\tset( value: unknown, rowIndex: number, columnIndex: number, forcibly?: boolean ): void {\n\t\tif( value instanceof Date ) {\n\t\t\tif( forcibly ) {\n\t\t\t\tthis._textValue = value;\n\t\t\t\tthis._textValueComputed = value;\n\t\t\t\tthis.onTextChange();\n\t\t\t\tthis.createOrUpdateText();\n\t\t\t} else {\n\t\t\t\tthis.text = value;\n\t\t\t}\n\t\t} else if( utilIsNumber( value ) ) {\n\t\t\tconst textValueComputed = this._textValueComputed;\n\t\t\tif( textValueComputed.getTime() !== value ) {\n\t\t\t\ttextValueComputed.setTime( value );\n\t\t\t\tthis.onTextChange();\n\t\t\t\tthis.createOrUpdateText();\n\t\t\t}\n\t\t}\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellTime\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"./d-base\";\nimport { DLayoutHorizontal, DLayoutHorizontalOptions, DThemeLayoutHorizontal } from \"./d-layout-horizontal\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableRowOptions<ROW, THEME extends DThemeTableRow = DThemeTableRow>\n\textends DLayoutHorizontalOptions<THEME> {\n\tcolumns?: Array<DTableColumn<ROW>>;\n}\n\nexport interface DThemeTableRow extends DThemeLayoutHorizontal {\n\n}\n\nexport abstract class DTableRow<\n\tROW,\n\tTHEME extends DThemeTableRow = DThemeTableRow,\n\tOPTIONS extends DTableRowOptions<ROW, THEME> = DTableRowOptions<ROW, THEME>\n> extends DLayoutHorizontal<THEME, OPTIONS> {\n\tprotected _columns!: Array<DTableColumn<ROW>>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\t// Cells\n\t\tconst columns = this._columns = options.columns || [];\n\t\tfor( let i = 0, imax = columns.length; i < imax; ++i ) {\n\t\t\tthis.addChild( this.newCell( columns[ i ], i, columns, options ) );\n\t\t}\n\t}\n\n\tprotected abstract newCell(\n\t\tcolumn: DTableColumn<ROW>,\n\t\tcolumnIndex: number,\n\t\tcolumns: Array<DTableColumn<ROW>>,\n\t\toptions: OPTIONS\n\t): DBase;\n\n\tprotected getType(): string {\n\t\treturn \"DTableRow\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\n\nexport enum DTableSelectionType {\n\tNONE,\n\tSINGLE,\n\tMULTIPLE\n}\n\nconst COMPARATOR = ( a: [number, unknown], b: [number, unknown] ): number => {\n\treturn a[ 0 ] - b[ 0 ];\n};\n\nexport class DTableSelection<ROW> extends utils.EventEmitter {\n\tprotected _type: DTableSelectionType;\n\tprotected _indices: Set<number>;\n\tprotected _data: ROW[];\n\tprotected _onChange: () => void;\n\n\tconstructor( type: DTableSelectionType, data: ROW[], onChange: () => void ) {\n\t\tsuper();\n\n\t\tthis._type = type;\n\t\tthis._indices = new Set<number>();\n\t\tthis._data = data;\n\t\tthis._onChange = onChange;\n\t}\n\n\tget type(): DTableSelectionType {\n\t\treturn this._type;\n\t}\n\n\tprotected onChange(): void {\n\t\tthis._onChange();\n\t\tthis.emit( \"change\", this );\n\t}\n\n\ttoggle( rowIndex: number ): void {\n\t\tconst indices = this._indices;\n\t\tif( indices.has( rowIndex ) ) {\n\t\t\tindices.delete( rowIndex );\n\t\t} else {\n\t\t\tindices.add( rowIndex );\n\t\t}\n\t\tthis.onChange();\n\t}\n\n\tadd( rowIndex: number ): void {\n\t\tconst indices = this._indices;\n\t\tconst oldSize = indices.size;\n\t\tindices.add( rowIndex );\n\t\tconst newSize = indices.size;\n\t\tif( oldSize !== newSize ) {\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tprotected getFirstIndex(): number | null {\n\t\tconst indices = this._indices;\n\t\tif( 0 < indices.size ) {\n\t\t\tlet result: number = NaN;\n\t\t\tindices.forEach(( index: number ): void => {\n\t\t\t\tif( result !== result ) {\n\t\t\t\t\tresult = index;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected getLastIndex(): number | null {\n\t\tconst indices = this._indices;\n\t\tif( 0 < indices.size ) {\n\t\t\tlet result: number = 0;\n\t\t\tindices.forEach(( index: number ): void => {\n\t\t\t\tresult = index;\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\taddTo( rowIndex: number ): void {\n\t\tconst lastRowIndex = this.getLastIndex();\n\t\tif( lastRowIndex != null ) {\n\t\t\tthis.addRange( lastRowIndex, false, rowIndex, true );\n\t\t}\n\t}\n\n\taddRange( from: number, includeFrom: boolean, to: number, includeTo: boolean ): void {\n\t\tconst indices = this._indices;\n\t\tconst oldSize = indices.size;\n\t\tif( from < to ) {\n\t\t\tfor( let i = from + (includeFrom ? 0 : 1), imax = to + (includeTo ? 1 : 0); i < imax; ++i ) {\n\t\t\t\tindices.add( i );\n\t\t\t}\n\t\t} else {\n\t\t\tfor( let i = to + (includeTo ? 0 : 1), imax = from + (includeFrom ? 1 : 0); i < imax; ++i ) {\n\t\t\t\tindices.add( i );\n\t\t\t}\n\t\t}\n\t\tconst newSize = indices.size;\n\t\tif( oldSize !== newSize ) {\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\taddAll( rowIndices: number[] ): void {\n\t\tconst indices = this._indices;\n\t\tconst oldSize = indices.size;\n\t\tfor( let i = 0, imax = rowIndices.length; i < imax; ++i ) {\n\t\t\tindices.add( rowIndices[ i ] );\n\t\t}\n\t\tconst newSize = indices.size;\n\t\tif( oldSize !== newSize ) {\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tcontains( rowIndex: number ): boolean {\n\t\treturn this._indices.has( rowIndex );\n\t}\n\n\tremove( rowIndex: number ): void {\n\t\tif( this._indices.delete( rowIndex ) ) {\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tclear(): void {\n\t\tconst indices = this._indices;\n\t\tif( 0 < indices.size ) {\n\t\t\tindices.clear();\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tclearAndAdd( rowIndex: number ): void {\n\t\tconst indices = this._indices;\n\t\tif( ! indices.has( rowIndex ) || indices.size !== 1 ) {\n\t\t\tindices.clear();\n\t\t\tindices.add( rowIndex );\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tclearAndAddAll( rowIndices: number[] ): void {\n\t\tconst indices = this._indices;\n\t\tif( 0 < indices.size || 0 < rowIndices.length ) {\n\t\t\tindices.clear();\n\t\t\tfor( let i = 0, imax = rowIndices.length; i < imax; ++i ) {\n\t\t\t\tindices.add( rowIndices[ i ] );\n\t\t\t}\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tshift( rowIndex: number, amount: number ): void {\n\t\tconst shifted: number[] = [];\n\t\tconst indices = this._indices;\n\t\tindices.forEach(( index: number ): void => {\n\t\t\tif( rowIndex <= index ) {\n\t\t\t\tshifted.push( index );\n\t\t\t}\n\t\t});\n\t\tconst shiftedLength = shifted.length;\n\t\tif( 0 < shiftedLength ) {\n\t\t\tfor( let i = 0, imax = shifted.length; i < imax; ++i ) {\n\t\t\t\tindices.delete( shifted[ i ] );\n\t\t\t}\n\t\t\tfor( let i = 0, imax = shifted.length; i < imax; ++i ) {\n\t\t\t\tindices.add( shifted[ i ] + amount );\n\t\t\t}\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tsize(): number {\n\t\treturn this._indices.size;\n\t}\n\n\tisEmpty(): boolean {\n\t\treturn this._indices.size === 0;\n\t}\n\n\t/**\n\t * Returns a copy of an index array of selected rows.\n\t * The order of indices is an insertion order.\n\t */\n\tget indices(): number[] {\n\t\tconst result: number[] = [];\n\t\tthis._indices.forEach(( index: number ): void => {\n\t\t\tresult.push( index );\n\t\t});\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns a copy of an array of selected row value.\n\t * The order is an insertion order.\n\t */\n\tget rows(): unknown[] {\n\t\tconst result: unknown[] = [];\n\t\tconst data = this._data;\n\t\tthis._indices.forEach(( index: number ): void => {\n\t\t\tresult.push( data[ index ] );\n\t\t});\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns an array of the (index, row value) pairs of selected rows.\n\t * The order of pairs is an insertion order.\n\t */\n\ttoArray(): Array<[ number, unknown ]> {\n\t\tconst result: Array<[ number, unknown ]> = [];\n\t\tconst data = this._data;\n\t\tthis._indices.forEach(( index: number ): void => {\n\t\t\tresult.push([ index, data[ index ]]);\n\t\t});\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns an sorted array of the (index, row value) pairs of selected rows.\n\t */\n\ttoSortedArray(): Array<[ number, unknown ]> {\n\t\treturn this.toArray().sort( COMPARATOR );\n\t}\n\n\ttoObject(): {[index: number]: unknown} {\n\t\tconst result: {[index: number]: unknown} = {};\n\t\tconst data = this._data;\n\t\tthis._indices.forEach(( index: number ): void => {\n\t\t\tresult[ index ] = data[ index ];\n\t\t});\n\t\treturn result;\n\t}\n\n\ttoMap(): Map<number, unknown> {\n\t\tconst result: Map<number, unknown> = new Map<number, unknown>();\n\t\tconst data = this._data;\n\t\tthis._indices.forEach(( index: number ): void => {\n\t\t\tresult.set( index, data[ index ] );\n\t\t});\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"./d-base\";\nimport { DTableBodyCell } from \"./d-table-body-cell\";\nimport { DTableBodyCellCheck } from \"./d-table-body-cell-check\";\nimport { DTableBodyCellColor } from \"./d-table-body-cell-color\";\nimport { DTableBodyCellDate } from \"./d-table-body-cell-date\";\nimport { DTableBodyCellDatetime } from \"./d-table-body-cell-datetime\";\nimport { DTableBodyCellIndex } from \"./d-table-body-cell-index\";\nimport { DTableBodyCellInputInteger } from \"./d-table-body-cell-input-integer\";\nimport { DTableBodyCellInputReal } from \"./d-table-body-cell-input-real\";\nimport { DTableBodyCellInputText } from \"./d-table-body-cell-input-text\";\nimport { DTableBodyCellSelectDialog } from \"./d-table-body-cell-select-dialog\";\nimport { DTableBodyCellSelectFetcher } from \"./d-table-body-cell-select-fetcher\";\nimport { DTableBodyCellSelectMenu } from \"./d-table-body-cell-select-menu\";\nimport { DTableBodyCellText } from \"./d-table-body-cell-text\";\nimport { DTableBodyCellTime } from \"./d-table-body-cell-time\";\nimport {\n\tDTableBodyCellOptionsMerged, DTableBodyCellOptionsUnion,\n\tDTableColumn, DTableColumnType\n} from \"./d-table-column\";\nimport { DTableRow, DTableRowOptions, DThemeTableRow } from \"./d-table-row\";\n\nexport interface DTableBodyRowOptions<ROW, THEME extends DThemeTableBodyRow = DThemeTableBodyRow>\n\textends DTableRowOptions<ROW, THEME> {\n\theight?: number;\n\tcell?: DTableBodyCellOptionsUnion<ROW>;\n}\n\nexport interface DThemeTableBodyRow extends DThemeTableRow {\n\n}\n\nconst isBodyCell = ( target: any ): target is DTableBodyCell => {\n\treturn (target != null && \"set\" in target);\n};\n\ntype OnCellChange = (\n\tnewCellValue: unknown, oldCellValue: unknown,\n\tcolumnIndex: number, column: DTableColumn<unknown>\n) => void;\n\nexport class DTableBodyRow<\n\tROW,\n\tTHEME extends DThemeTableBodyRow = DThemeTableBodyRow,\n\tOPTIONS extends DTableBodyRowOptions<ROW, THEME> = DTableBodyRowOptions<ROW, THEME>\n> extends DTableRow<ROW, THEME, OPTIONS> {\n\tprotected _row: ROW | undefined = undefined;\n\tprotected _onCellChangeBound!: OnCellChange;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tthis._onCellChangeBound = (\n\t\t\tnewCellValue: unknown, oldCellValue: unknown,\n\t\t\tcolumnIndex: number, column: DTableColumn<unknown>\n\t\t): void => {\n\t\t\tconst row = this._row;\n\t\t\tif( row != null ) {\n\t\t\t\tcolumn.setter( row, columnIndex, newCellValue );\n\t\t\t\tthis.emit( \"change\", newCellValue, oldCellValue, columnIndex, this );\n\t\t\t}\n\t\t};\n\t\tsuper.init( options );\n\t}\n\n\tprotected newCell(\n\t\tcolumn: DTableColumn<ROW>,\n\t\tcolumnIndex: number,\n\t\tcolumns: Array<DTableColumn<ROW>>,\n\t\toptions: OPTIONS\n\t): DBase {\n\t\tconst cellOptions = this.toCellOptions( column, columnIndex, options ) as any;\n\t\tif( column.editable ) {\n\t\t\tconst cell = this.newCellEditable( column, columnIndex, cellOptions );\n\t\t\tcell.on( \"cellchange\", this._onCellChangeBound );\n\t\t\treturn cell;\n\t\t} else {\n\t\t\tconst cell = this.newCellUnediable( column, columnIndex, cellOptions );\n\t\t\tcell.setReadOnly( true );\n\t\t\treturn cell;\n\t\t}\n\t}\n\n\tprotected newCellEditable(\n\t\tcolumn: DTableColumn<ROW>,\n\t\tcolumnIndex: number,\n\t\toptions: any\n\t): DBase {\n\t\tswitch( column.type ) {\n\t\tcase DTableColumnType.INDEX:\n\t\t\treturn new DTableBodyCellIndex( options );\n\t\tcase DTableColumnType.TEXT:\n\t\t\treturn new DTableBodyCellInputText( options );\n\t\tcase DTableColumnType.INTEGER:\n\t\t\treturn new DTableBodyCellInputInteger( options );\n\t\tcase DTableColumnType.REAL:\n\t\t\treturn new DTableBodyCellInputReal( options );\n\t\tcase DTableColumnType.CHECK:\n\t\t\treturn new DTableBodyCellCheck( options );\n\t\tcase DTableColumnType.COLOR:\n\t\t\treturn new DTableBodyCellColor( options );\n\t\tcase DTableColumnType.BUTTON:\n\t\t\treturn new DTableBodyCellText( options );\n\t\tcase DTableColumnType.SELECT:\n\t\t\tconst selecting = column.selecting;\n\t\t\tif( selecting.menu != null ) {\n\t\t\t\treturn new DTableBodyCellSelectMenu( options );\n\t\t\t} else if( selecting.dialog != null ) {\n\t\t\t\treturn new DTableBodyCellSelectDialog( options );\n\t\t\t} else if( selecting.fetcher != null ) {\n\t\t\t\treturn new DTableBodyCellSelectFetcher( options );\n\t\t\t} else {\n\t\t\t\treturn new DTableBodyCellText( options );\n\t\t\t}\n\t\tcase DTableColumnType.DATE:\n\t\t\treturn new DTableBodyCellDate( options );\n\t\tcase DTableColumnType.DATETIME:\n\t\t\treturn new DTableBodyCellDatetime( options );\n\t\tcase DTableColumnType.TIME:\n\t\t\treturn new DTableBodyCellTime( options );\n\t\tdefault:\n\t\t\treturn new DTableBodyCellText( options );\n\t\t}\n\t}\n\tprotected newCellUnediable(\n\t\tcolumn: DTableColumn<ROW>,\n\t\tcolumnIndex: number,\n\t\toptions: any\n\t): DBase {\n\t\tswitch( column.type ) {\n\t\tcase DTableColumnType.INDEX:\n\t\t\treturn new DTableBodyCellIndex( options );\n\t\tcase DTableColumnType.TEXT:\n\t\t\treturn new DTableBodyCellText( options );\n\t\tcase DTableColumnType.INTEGER:\n\t\t\treturn new DTableBodyCellText( options );\n\t\tcase DTableColumnType.REAL:\n\t\t\treturn new DTableBodyCellText( options );\n\t\tcase DTableColumnType.CHECK:\n\t\t\treturn new DTableBodyCellCheck( options );\n\t\tcase DTableColumnType.COLOR:\n\t\t\treturn new DTableBodyCellColor( options );\n\t\tcase DTableColumnType.BUTTON:\n\t\t\treturn new DTableBodyCellText( options );\n\t\tcase DTableColumnType.SELECT:\n\t\t\tconst selecting = column.selecting;\n\t\t\tif( selecting.menu != null ) {\n\t\t\t\treturn new DTableBodyCellSelectMenu( options );\n\t\t\t} else if( selecting.dialog != null ) {\n\t\t\t\treturn new DTableBodyCellSelectDialog( options );\n\t\t\t} else if( selecting.fetcher != null ) {\n\t\t\t\treturn new DTableBodyCellSelectFetcher( options );\n\t\t\t} else {\n\t\t\t\treturn new DTableBodyCellText( options );\n\t\t\t}\n\t\tcase DTableColumnType.DATE:\n\t\t\treturn new DTableBodyCellDate( options );\n\t\tcase DTableColumnType.DATETIME:\n\t\t\treturn new DTableBodyCellDatetime( options );\n\t\tcase DTableColumnType.TIME:\n\t\t\treturn new DTableBodyCellTime( options );\n\t\tdefault:\n\t\t\treturn new DTableBodyCellText( options );\n\t\t}\n\t}\n\n\tprotected toCellOptions(\n\t\tcolumn: DTableColumn<ROW>,\n\t\tcolumnIndex: number,\n\t\toptions: OPTIONS\n\t): DTableBodyCellOptionsUnion<ROW> {\n\t\tlet result = (column.body || options.cell) as DTableBodyCellOptionsMerged<ROW> | undefined;\n\t\tif( result != null ) {\n\t\t\tresult.weight = column.weight;\n\t\t\tresult.width = column.width;\n\t\t\tconst text = result.text = result.text || {};\n\t\t\tconst align = text.align = text.align || {};\n\t\t\talign.horizontal = column.align;\n\t\t\ttext.formatter = column.formatter;\n\t\t\tresult.column = {\n\t\t\t\tindex: columnIndex,\n\t\t\t\tdata: column\n\t\t\t};\n\t\t\tif( column.selecting.menu ) {\n\t\t\t\tresult.menu = column.selecting.menu;\n\t\t\t}\n\t\t} else {\n\t\t\tresult = {\n\t\t\t\tweight: column.weight,\n\t\t\t\twidth: column.width,\n\t\t\t\ttext: {\n\t\t\t\t\tformatter: column.formatter,\n\t\t\t\t\talign: {\n\t\t\t\t\t\thorizontal: column.align\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcolumn: {\n\t\t\t\t\tindex: columnIndex,\n\t\t\t\t\tdata: column\n\t\t\t\t},\n\t\t\t\tmenu: column.selecting.menu\n\t\t\t};\n\t\t}\n\n\t\tif( column.editable ) {\n\t\t\tconst editing = result!.editing = result!.editing || {};\n\t\t\tediting.formatter = editing.formatter || column.editing.formatter;\n\t\t\tediting.unformatter = editing.unformatter || column.editing.unformatter as any;\n\t\t\tediting.validator = editing.validator || column.editing.validator as any;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyRow\";\n\t}\n\n\tset( row: ROW, rowIndex: number, forcibly?: boolean ): void {\n\t\tif( forcibly || this._row !== row ) {\n\t\t\tthis._row = row;\n\n\t\t\tconst cells = this.children;\n\t\t\tconst cellsLength = cells.length;\n\t\t\tconst columns = this._columns;\n\t\t\tconst columnsLength = columns.length;\n\t\t\tfor( let i = 0, imax = Math.min( columnsLength, cellsLength ); i < imax; ++i ) {\n\t\t\t\tconst cell = cells[ cellsLength - i - 1 ];\n\t\t\t\tconst columnIndex = columnsLength - i - 1;\n\t\t\t\tconst column = columns[ columnIndex ];\n\t\t\t\tif( isBodyCell( cell ) ) {\n\t\t\t\t\tcell.set( column.getter( row, columnIndex ), rowIndex, columnIndex, forcibly );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.emit( \"set\", row, rowIndex, this );\n\t\t}\n\t}\n\n\tunset(): void {\n\t\tif( this._row !== undefined ) {\n\t\t\tthis._row = undefined;\n\n\t\t\tconst cells = this.children;\n\t\t\tfor( let i = 0, imax = cells.length; i < imax; ++i ) {\n\t\t\t\tconst cell = cells[ i ];\n\t\t\t\tif( isBodyCell( cell ) ) {\n\t\t\t\t\tcell.unset();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.emit( \"unset\", this );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DTableBodyRow, DTableBodyRowOptions, DThemeTableBodyRow } from \"./d-table-body-row\";\n\nexport interface DTableBodyRowEvenOptions<ROW, THEME extends DThemeTableBodyRowEven = DThemeTableBodyRowEven>\n\textends DTableBodyRowOptions<ROW, THEME> {\n\n}\n\nexport interface DThemeTableBodyRowEven extends DThemeTableBodyRow {\n\n}\n\nexport class DTableBodyRowEven<\n\tROW,\n\tTHEME extends DThemeTableBodyRowEven = DThemeTableBodyRowEven,\n\tOPTIONS extends DTableBodyRowEvenOptions<ROW, THEME> = DTableBodyRowEvenOptions<ROW, THEME>\n> extends DTableBodyRow<ROW, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DTableBodyRowEven\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DTableBodyRow, DTableBodyRowOptions, DThemeTableBodyRow } from \"./d-table-body-row\";\n\nexport interface DTableBodyRowOddOptions<ROW, THEME extends DThemeTableBodyRowOdd = DThemeTableBodyRowOdd>\n\textends DTableBodyRowOptions<ROW, THEME> {\n\n}\n\nexport interface DThemeTableBodyRowOdd extends DThemeTableBodyRow {\n\n}\n\nexport class DTableBodyRowOdd<\n\tROW,\n\tTHEME extends DThemeTableBodyRowOdd = DThemeTableBodyRowOdd,\n\tOPTIONS extends DTableBodyRowOddOptions<ROW, THEME> = DTableBodyRowOddOptions<ROW, THEME>\n> extends DTableBodyRow<ROW, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DTableBodyRowOdd\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction, Point } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DBase, DBaseOptions } from \"./d-base\";\nimport { DButtonBase } from \"./d-button-base\";\nimport { DContentOptions } from \"./d-content\";\nimport { DPane, DPaneOptions, DThemePane } from \"./d-pane\";\nimport {\n\tDTableBodyFilter, DTableBodyFilterFunction, DTableBodyFilterImpl, DTableBodyFilterObject\n} from \"./d-table-body-filter\";\nimport { DTableBodyRow, DTableBodyRowOptions } from \"./d-table-body-row\";\nimport { DTableBodyRowEven } from \"./d-table-body-row-even\";\nimport { DTableBodyRowOdd } from \"./d-table-body-row-odd\";\nimport { DTableColumn } from \"./d-table-column\";\nimport { DTableSelection, DTableSelectionType } from \"./d-table-selection\";\nimport { utilIsString } from \"./util/util-is-string\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport interface DTableBodyOptions<\n\tROW,\n\tTHEME extends DThemeTableBody = DThemeTableBody,\n\tCONTENT_OPTIONS extends DBaseOptions = DContentOptions\n> extends DPaneOptions<THEME, CONTENT_OPTIONS> {\n\tcolumns?: Array<DTableColumn<ROW>>;\n\tdata?: ROW[];\n\tselection?: {\n\t\ttype?: (keyof typeof DTableSelectionType) | DTableSelectionType;\n\t};\n\trow?: DTableBodyRowOptions<ROW>;\n\tfilter?: DTableBodyFilterFunction<ROW> | DTableBodyFilterObject<ROW>;\n}\n\nexport interface DThemeTableBody extends DThemePane {\n\tgetRowHeight(): number;\n}\n\nconst toData = <ROW>( data: ROW[] | undefined ): ROW[] => {\n\tconst result: ROW[] = [];\n\tif( data != null ) {\n\t\tfor( let i = 0, imax = data.length; i < imax; ++i ) {\n\t\t\tresult.push( data[ i ] );\n\t\t}\n\t}\n\treturn result;\n};\n\nconst toSelectionType = ( options: DTableBodyOptions<any> ): DTableSelectionType => {\n\treturn ( options.selection && options.selection.type != null ?\n\t\t( utilIsString( options.selection.type ) ? DTableSelectionType[ options.selection.type ] : options.selection.type ) :\n\t\tDTableSelectionType.NONE\n\t);\n};\n\nconst toRowOptions = <ROW>(\n\ttheme: DThemeTableBody,\n\toptions: DTableBodyOptions<ROW>,\n\tselectionType: DTableSelectionType\n): DTableBodyRowOptions<ROW> => {\n\tconst columns = options.columns || [];\n\tlet result = options.row;\n\tif( result != null ) {\n\t\tif( result.height == null ) {\n\t\t\tresult.height = theme.getRowHeight();\n\t\t}\n\t\tif( result.columns === undefined ) {\n\t\t\tresult.columns = columns;\n\t\t}\n\t\tif( selectionType !== DTableSelectionType.NONE && result.interactive == null ) {\n\t\t\tresult.interactive = \"SELF\";\n\t\t}\n\t} else {\n\t\tresult = {\n\t\t\tcolumns,\n\t\t\theight: theme.getRowHeight(),\n\t\t\tinteractive: ( selectionType !== DTableSelectionType.NONE ? \"SELF\" : undefined )\n\t\t};\n\t}\n\treturn result as DTableBodyRowOptions<ROW>;\n};\n\nexport class DTableBody<\n\tROW,\n\tTHEME extends DThemeTableBody = DThemeTableBody,\n\tCONTENT_OPTIONS extends DBaseOptions = DContentOptions,\n\tOPTIONS extends DTableBodyOptions<ROW, THEME, CONTENT_OPTIONS> = DTableBodyOptions<ROW, THEME, CONTENT_OPTIONS>\n> extends DPane<THEME, CONTENT_OPTIONS, OPTIONS> {\n\tprotected static WORK_ON_CLICK = new Point();\n\tprotected _columns!: Array<DTableColumn<ROW>>;\n\tprotected _rowHeight!: number;\n\tprotected _rowIndexStart!: number;\n\tprotected _rowIndexEnd!: number;\n\tprotected _data!: ROW[];\n\tprotected _rowOptions!: DTableBodyRowOptions<ROW>;\n\tprotected _selection!: DTableSelection<ROW>;\n\tprotected _updateRowsCount!: number;\n\tprotected _isUpdateRowsCalled!: boolean;\n\tprotected _isUpdateRowsCalledForcibly!: boolean;\n\tprotected _filter!: DTableBodyFilterImpl<ROW>;\n\tprotected _workRows!: Array<DTableBodyRow<ROW>>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tconst theme = this.theme;\n\t\tconst selectionType = toSelectionType( options );\n\t\tconst rowOptions = toRowOptions( theme, options, selectionType );\n\t\tthis._rowOptions = rowOptions;\n\t\tthis._rowHeight = ( rowOptions.height != null ? rowOptions.height : theme.getRowHeight() );\n\t\tthis._columns = rowOptions.columns || [];\n\t\tthis._rowIndexStart = 0;\n\t\tthis._rowIndexEnd = 0;\n\t\tthis._data = toData( options.data );\n\t\tthis._updateRowsCount = 0;\n\t\tthis._isUpdateRowsCalled = false;\n\t\tthis._isUpdateRowsCalledForcibly = false;\n\t\tthis._workRows = [];\n\t\tconst selection = this._selection = new DTableSelection( selectionType, this._data, (): void => {\n\t\t\tthis.onSelectionChange();\n\t\t});\n\n\t\tthis._filter = new DTableBodyFilterImpl<ROW>( this, (): void => {\n\t\t\tthis.onFilterChange();\n\t\t});\n\t\tif( options && options.filter ) {\n\t\t\tthis._filter.set( options.filter );\n\t\t}\n\n\t\tconst content = this.content;\n\t\tcontent.on( \"move\", (): void => {\n\t\t\tthis.update();\n\t\t});\n\t\tcontent.on( \"resize\", (): void => {\n\t\t\tthis.update();\n\t\t});\n\t\tthis.update();\n\n\t\tif( selection.type !== DTableSelectionType.NONE ) {\n\t\t\tUtilPointerEvent.onClick( this, ( e: InteractionEvent ): void => {\n\t\t\t\tif( this.isActionable() ) {\n\t\t\t\t\tconst local = DTableBody.WORK_ON_CLICK;\n\t\t\t\t\tlocal.copyFrom( e.data.global );\n\t\t\t\t\tcontent.toLocal( local, undefined, local, false );\n\t\t\t\t\tconst rowIndex = Math.floor( local.y / this._rowHeight );\n\t\t\t\t\tconst indices = this._filter.indices;\n\t\t\t\t\tconst data = this._data;\n\t\t\t\t\tconst dataLength = ( indices != null ? indices.length : data.length );\n\t\t\t\t\tif( 0 <= rowIndex && rowIndex < dataLength ) {\n\t\t\t\t\t\tconst isSingle = ( selection.type === DTableSelectionType.SINGLE );\n\t\t\t\t\t\tconst isNotSingle = ! isSingle;\n\t\t\t\t\t\tconst originalEvent = e.data.originalEvent;\n\t\t\t\t\t\tconst ctrlKey = originalEvent.ctrlKey;\n\t\t\t\t\t\tconst shiftKey = originalEvent.shiftKey;\n\t\t\t\t\t\tconst realRowIndex = ( indices ? indices[ rowIndex ] : rowIndex );\n\t\t\t\t\t\tif( isSingle || selection.isEmpty() || ! ( isNotSingle && ( ctrlKey || shiftKey ) ) ) {\n\t\t\t\t\t\t\tselection.clearAndAdd( realRowIndex );\n\t\t\t\t\t\t} else if( ctrlKey ) {\n\t\t\t\t\t\t\tselection.toggle( realRowIndex );\n\t\t\t\t\t\t} else if( shiftKey ) {\n\t\t\t\t\t\t\tselection.addTo( realRowIndex );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tonResize( newWidth: number, newHeight: number, oldWidth: number, oldHeight: number ): void {\n\t\tsuper.onResize( newWidth, newHeight, oldWidth, oldHeight );\n\t\tthis.update();\n\t}\n\n\tget selection(): DTableSelection<ROW> {\n\t\treturn this._selection;\n\t}\n\n\tlock(): void {\n\t\tthis._updateRowsCount += 1;\n\t\tif( this._updateRowsCount === 1 ) {\n\t\t\tthis._isUpdateRowsCalled = false;\n\t\t\tthis._isUpdateRowsCalledForcibly = false;\n\t\t}\n\t}\n\n\tunlock( callIfNeeded: boolean ): void {\n\t\tthis._updateRowsCount -= 1;\n\t\tif( this._updateRowsCount === 0 ) {\n\t\t\tif( callIfNeeded && this._isUpdateRowsCalled ) {\n\t\t\t\tthis.update( this._isUpdateRowsCalledForcibly );\n\t\t\t}\n\t\t\tthis._isUpdateRowsCalled = false;\n\t\t\tthis._isUpdateRowsCalledForcibly = false;\n\t\t}\n\t}\n\n\tprotected onSelectionChange(): void {\n\t\tthis.update();\n\t}\n\n\tprotected onFilterChange(): void {\n\t\tthis.update();\n\t}\n\n\t/**\n\t * Updates rows. If the `forcibly` is true, some dirty checkings for\n\t * avoiding unnecessary state changes are skipped.\n\t *\n\t * @param forcibly true to update forcibly\n\t */\n\tupdate( forcibly?: boolean ): void {\n\t\tif( 0 < this._updateRowsCount ) {\n\t\t\tthis._isUpdateRowsCalled = true;\n\t\t\tif( forcibly ) {\n\t\t\t\tthis._isUpdateRowsCalledForcibly = true;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tconst content = this.content;\n\t\tconst rows = content.children as Array<DTableBodyRow<ROW>>;\n\t\tconst height = this.height;\n\t\tconst rowHeight = this._rowHeight;\n\n\t\tconst indices = this._filter.indices;\n\t\tconst data = this._data;\n\t\tconst dataLength = ( indices != null ? indices.length : data.length );\n\n\t\tconst oldRowIndexStart = this._rowIndexStart;\n\t\tlet oldRowIndexEnd = this._rowIndexEnd;\n\t\tlet oldRowCount = oldRowIndexEnd - oldRowIndexStart;\n\n\t\tconst newContentHeight = Math.max( height, dataLength * rowHeight );\n\t\tconst newContentY = Math.max( height - newContentHeight, content.position.y );\n\t\tcontent.position.y = newContentY;\n\t\tcontent.height = newContentHeight;\n\n\t\tconst newRowIndexLowerBound = Math.floor( (0 - newContentY) / rowHeight );\n\t\tconst newRowIndexUpperBound = Math.floor( (height - newContentY) / rowHeight );\n\t\tconst newRowIndexStart = newRowIndexLowerBound - ( newRowIndexLowerBound % 2 === 0 ? 2 : 1 );\n\t\tlet newRowIndexEnd = newRowIndexUpperBound + ((newRowIndexUpperBound - newRowIndexStart + 1) % 2 === 0 ? 3 : 2);\n\t\tlet newRowCount = newRowIndexEnd - newRowIndexStart;\n\t\tif( newRowCount < oldRowCount && oldRowCount - 2 <= newRowCount ) {\n\t\t\tnewRowCount = oldRowCount;\n\t\t\tnewRowIndexEnd = newRowIndexStart + newRowCount;\n\t\t}\n\n\t\tif( oldRowCount < newRowCount ) {\n\t\t\tfor( let i = oldRowCount; i < newRowCount; ++i ) {\n\t\t\t\tconst oldRowIndex = oldRowIndexStart + i;\n\t\t\t\tconst newRow = this.newRow( (oldRowIndex % 2) === 0 );\n\t\t\t\tcontent.addChild( newRow );\n\t\t\t}\n\t\t\toldRowCount = newRowCount;\n\t\t\toldRowIndexEnd = oldRowIndexStart + oldRowCount;\n\t\t} else if( newRowCount < oldRowCount ) {\n\t\t\tfor( let i = oldRowCount - 1; newRowCount <= i; --i ) {\n\t\t\t\tcontent.removeChild( rows[ i ] );\n\t\t\t}\n\t\t\toldRowCount = newRowCount;\n\t\t\toldRowIndexEnd = oldRowIndexStart + oldRowCount;\n\t\t}\n\n\t\tthis._rowIndexStart = newRowIndexStart;\n\t\tthis._rowIndexEnd = newRowIndexEnd;\n\n\t\tconst rowIndexStartDelta = newRowIndexStart - oldRowIndexStart;\n\t\tconst absRowIndexStartDelta = Math.abs(rowIndexStartDelta);\n\t\tconst rowsLength = rows.length;\n\t\tif( 0 < absRowIndexStartDelta && absRowIndexStartDelta < rowsLength ) {\n\t\t\tconst work = this._workRows;\n\t\t\tif( 0 < rowIndexStartDelta ) {\n\t\t\t\tfor( let i = 0; i < absRowIndexStartDelta; ++i ) {\n\t\t\t\t\twork.push( this.resetRow( rows[ i ] ) );\n\t\t\t\t}\n\t\t\t\tfor( let i = absRowIndexStartDelta; i < rowsLength; ++i ) {\n\t\t\t\t\trows[ i - absRowIndexStartDelta ] = rows[ i ];\n\t\t\t\t}\n\t\t\t\tfor( let i = 0; i < absRowIndexStartDelta; ++i ) {\n\t\t\t\t\trows[ rowsLength - absRowIndexStartDelta + i ] = work[ i ];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor( let i = 0; i < absRowIndexStartDelta; ++i ) {\n\t\t\t\t\twork.push( this.resetRow( rows[ rowsLength - absRowIndexStartDelta + i ] ) );\n\t\t\t\t}\n\t\t\t\tfor( let i = rowsLength - absRowIndexStartDelta - 1; 0 <= i; --i ) {\n\t\t\t\t\trows[ i + absRowIndexStartDelta ] = rows[ i ];\n\t\t\t\t}\n\t\t\t\tfor( let i = 0; i < absRowIndexStartDelta; ++i ) {\n\t\t\t\t\trows[ i ] = work[ i ];\n\t\t\t\t}\n\t\t\t}\n\t\t\twork.length = 0;\n\t\t}\n\n\t\tconst selection = this._selection;\n\t\tif( indices != null ) {\n\t\t\tfor( let i = 0; i < rowsLength; ++i ) {\n\t\t\t\tconst row = rows[ i ];\n\t\t\t\tconst rowIndex = newRowIndexStart + i;\n\t\t\t\tconst realRowIndex = indices[ rowIndex ];\n\t\t\t\trow.position.y = rowIndex * rowHeight;\n\t\t\t\trow.setDisabled( rowIndex < 0 || dataLength <= rowIndex );\n\t\t\t\trow.setActive( selection.contains( realRowIndex ) );\n\t\t\t\tif( 0 <= rowIndex && rowIndex < dataLength ) {\n\t\t\t\t\trow.set( data[ realRowIndex ], realRowIndex, forcibly );\n\t\t\t\t} else {\n\t\t\t\t\trow.unset();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor( let i = 0; i < rowsLength; ++i ) {\n\t\t\t\tconst row = rows[ i ];\n\t\t\t\tconst rowIndex = newRowIndexStart + i;\n\t\t\t\trow.position.y = rowIndex * rowHeight;\n\t\t\t\trow.setDisabled( rowIndex < 0 || dataLength <= rowIndex );\n\t\t\t\trow.setActive( selection.contains( rowIndex ) );\n\t\t\t\tif( 0 <= rowIndex && rowIndex < dataLength ) {\n\t\t\t\t\trow.set( data[ rowIndex ], rowIndex, forcibly );\n\t\t\t\t} else {\n\t\t\t\t\trow.unset();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected resetRow( row: DTableBodyRow<ROW> ): DTableBodyRow<ROW> {\n\t\trow.blur( true );\n\t\tconst cells = row.children;\n\t\tfor( let i = 0, imax = cells.length; i < imax; ++i ) {\n\t\t\tconst cell = cells[ i ];\n\t\t\tif( cell instanceof DBase ) {\n\t\t\t\tcell.setPressed( false );\n\t\t\t}\n\t\t}\n\t\treturn row;\n\t}\n\n\tprotected newRow( isEven: boolean ): DTableBodyRow<ROW> {\n\t\tconst options = this._rowOptions;\n\t\tconst result = ( isEven ?\n\t\t\tnew DTableBodyRowEven<ROW>( options ) : new DTableBodyRowOdd<ROW>( options )\n\t\t);\n\t\tresult.on( \"change\", ( newCellValue: unknown, oldCellValue: unknown, columnIndex: number ): void => {\n\t\t\tconst index = this.content.getChildIndex( result );\n\t\t\tif( 0 <= index ) {\n\t\t\t\tconst rowIndex = this._rowIndexStart + index;\n\t\t\t\tthis.emit( \"change\", newCellValue, oldCellValue, rowIndex, columnIndex, this );\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}\n\n\tonDblClick( e: MouseEvent | TouchEvent ): boolean {\n\t\tlet result = false;\n\t\tif( this.isActionable() && this._selection.type !== DTableSelectionType.NONE ) {\n\t\t\tconst local = UtilPointerEvent.toGlobal( e, DTableBody.WORK_ON_CLICK );\n\t\t\tconst content = this.content;\n\t\t\tcontent.toLocal( local, undefined, local, false );\n\t\t\tconst x = local.x;\n\t\t\tconst y = local.y;\n\t\t\tconst rowIndex = Math.floor( y / this._rowHeight );\n\t\t\tconst indices = this._filter.indices;\n\t\t\tconst data = this._data;\n\t\t\tconst dataLength = ( indices != null ? indices.length : data.length );\n\t\t\tif( 0 <= rowIndex && rowIndex < dataLength ) {\n\t\t\t\tconst index = rowIndex - this._rowIndexStart;\n\t\t\t\tconst rows = content.children as Array<DTableBodyRow<ROW>>;\n\t\t\t\tif( 0 <= index && index < rows.length ) {\n\t\t\t\t\tconst row = rows[ index ];\n\t\t\t\t\tconst cells = row.children as DBase[];\n\t\t\t\t\tconst cellsLength = cells.length;\n\t\t\t\t\tconst columns = this._columns;\n\t\t\t\t\tconst columnsLength = columns.length;\n\t\t\t\t\tfor( let i = 0, imax = Math.min( cellsLength, columnsLength ); i < imax; ++i ) {\n\t\t\t\t\t\tconst column = columns[ columnsLength - i - 1 ];\n\t\t\t\t\t\tif( column.editable ) {\n\t\t\t\t\t\t\tconst cell = cells[ cellsLength - i - 1 ];\n\t\t\t\t\t\t\tconst dx = x - cell.position.x;\n\t\t\t\t\t\t\tif( 0 <= dx && dx <= cell.width ) {\n\t\t\t\t\t\t\t\tcell.focus();\n\t\t\t\t\t\t\t\tif( cell instanceof DButtonBase ) {\n\t\t\t\t\t\t\t\t\tcell.onClick();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tresult = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tresult = super.onDblClick( e ) || result;\n\t\treturn result;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBody\";\n\t}\n\n\t/**\n\t * Returns an array of row data.\n\t * If you need to modify the returned array,\n\t * call the `#update(boolean)` to apply your changes.\n\t */\n\tget rows(): ROW[] {\n\t\treturn this._data;\n\t}\n\n\tset rows( rows: ROW[] ) {\n\t\tif( this._data !== rows ) {\n\t\t\tthis._data = rows;\n\t\t\tthis.lock();\n\t\t\tthis._selection.clear();\n\t\t\tthis._filter.clear();\n\t\t\tthis.unlock( false );\n\t\t\tthis.update();\n\t\t}\n\t}\n\n\tclear(): void {\n\t\tconst data = this._data;\n\t\tif( 0 < data.length ) {\n\t\t\tdata.length = 0;\n\t\t\tthis.lock();\n\t\t\tthis._selection.clear();\n\t\t\tthis._filter.clear();\n\t\t\tthis.unlock( false );\n\t\t\tthis.update();\n\t\t}\n\t}\n\n\tclearAndAdd( row: ROW ): void {\n\t\tconst data = this._data;\n\t\tdata.length = 0;\n\t\tdata.push( row );\n\t\tthis.lock();\n\t\tthis._selection.clear();\n\t\tthis._filter.clear();\n\t\tthis.unlock( false );\n\t\tthis.update();\n\t}\n\n\tclearAndAddAll( rows: ROW[] ): void {\n\t\tconst data = this._data;\n\t\tdata.length = 0;\n\t\tfor( let i = 0, imax = rows.length; i < imax; ++i ) {\n\t\t\tdata.push( rows[ i ] );\n\t\t}\n\t\tthis.lock();\n\t\tthis._selection.clear();\n\t\tthis._filter.clear();\n\t\tthis.unlock( false );\n\t\tthis.update();\n\t}\n\n\tadd( row: ROW, index?: number ): void {\n\t\tconst data = this._data;\n\t\tconst filter = this._filter;\n\t\tconst selection = this._selection;\n\t\tif( index == null ) {\n\t\t\tdata.push( row );\n\t\t\tthis.lock();\n\t\t\tfilter.add( data.length - 1, 1 );\n\t\t\tthis.unlock( false );\n\t\t\tthis.update();\n\t\t} else if( 0 <= index && index < data.length ) {\n\t\t\tdata.splice( index, 0, row );\n\t\t\tthis.lock();\n\t\t\tselection.shift( index, 1 );\n\t\t\tfilter.shift( index, 1, true );\n\t\t\tthis.unlock( false );\n\t\t\tthis.update();\n\t\t}\n\t}\n\n\taddAll( rows: ROW[], index?: number ): void {\n\t\tconst data = this._data;\n\t\tconst dataLength = data.length;\n\t\tconst filter = this._filter;\n\t\tconst selection = this._selection;\n\t\tif( index == null ) {\n\t\t\tconst rowsLength = rows.length;\n\t\t\tfor( let i = 0, imax = rowsLength; i < imax; ++i ) {\n\t\t\t\tdata.push( rows[ i ] );\n\t\t\t}\n\t\t\tthis.lock();\n\t\t\tfilter.add( dataLength - 1, rowsLength );\n\t\t\tthis.unlock( false );\n\t\t\tthis.update();\n\t\t} else if( 0 <= index && index < dataLength ) {\n\t\t\tconst rowsLength = rows.length;\n\t\t\tfor( let i = 0; i < rowsLength; ++i ) {\n\t\t\t\tdata.splice( index + i, 0, rows[ i ] );\n\t\t\t}\n\t\t\tthis.lock();\n\t\t\tselection.shift( index, rowsLength );\n\t\t\tfilter.shift( index, rowsLength, true );\n\t\t\tthis.unlock( false );\n\t\t\tthis.update();\n\t\t}\n\t}\n\n\tget( index: number ): ROW | null {\n\t\tconst data = this._data;\n\t\tif( 0 <= index && index < data.length ) {\n\t\t\treturn data[ index ];\n\t\t}\n\t\treturn null;\n\t}\n\n\tset( index: number, row: ROW ): ROW | null {\n\t\tconst data = this._data;\n\t\tif( 0 <= index && index < data.length ) {\n\t\t\tconst result = data[ index ];\n\t\t\tdata[ index ] = row;\n\t\t\tthis.update();\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tremove( index: number ): ROW | null {\n\t\tconst data = this._data;\n\t\tif( 0 <= index && index < data.length ) {\n\t\t\tconst result = data.splice( index, 1 )[ 0 ];\n\t\t\tthis.lock();\n\t\t\tthis._selection.remove( index );\n\t\t\tthis._filter.remove( index );\n\t\t\tthis.unlock( false );\n\t\t\tthis.update();\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tsize(): number {\n\t\treturn this._data.length;\n\t}\n\n\tget filter(): DTableBodyFilter<ROW> {\n\t\treturn this._filter;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\nimport { DThemeText } from \"./d-text\";\nimport { DTextBase, DTextBaseOptions, DThemeTextBase } from \"./d-text-base\";\n\nexport interface DTableHeaderCellOptions<THEME extends DThemeText = DThemeText>\n\textends DTextBaseOptions<string | null, THEME> {\n}\n\nexport interface DThemeTableHeaderCell extends DThemeTextBase {\n\tgetTextFormatter(): ( value: string | null, caller: DTableHeaderCell ) => string;\n\tgetTextValue( state: DBaseState ): string | null;\n\tnewTextValue(): DStateAwareOrValueMightBe<string | null>;\n}\n\nexport class DTableHeaderCell<\n\tTHEME extends DThemeTableHeaderCell = DThemeTableHeaderCell,\n\tOPTIONS extends DTableHeaderCellOptions<THEME> = DTableHeaderCellOptions<THEME>\n> extends DTextBase<string | null, THEME, OPTIONS> {\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableHeaderCell\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"./d-base\";\nimport { DTableColumn } from \"./d-table-column\";\nimport { DTableHeaderCell, DTableHeaderCellOptions } from \"./d-table-header-cell\";\nimport { DTableRow, DTableRowOptions, DThemeTableRow } from \"./d-table-row\";\n\nexport interface DTableHeaderOptions<ROW, THEME extends DThemeTableHeader = DThemeTableHeader>\n\textends DTableRowOptions<ROW, THEME> {\n\tcell?: DTableHeaderCellOptions;\n}\n\nexport interface DThemeTableHeader extends DThemeTableRow {\n\n}\n\nexport class DTableHeader<\n\tROW,\n\tTHEME extends DThemeTableHeader = DThemeTableHeader,\n\tOPTIONS extends DTableHeaderOptions<ROW, THEME> = DTableHeaderOptions<ROW, THEME>\n> extends DTableRow<ROW, THEME, OPTIONS> {\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t}\n\n\tprotected newCell(\n\t\tcolumn: DTableColumn<ROW>,\n\t\tcolumnIndex: number,\n\t\tcolumns: Array<DTableColumn<ROW>>,\n\t\toptions: OPTIONS\n\t): DBase {\n\t\treturn new DTableHeaderCell( this.toCellOptions( column, options ) );\n\t}\n\n\tprotected toCellOptions(\n\t\tcolumn: DTableColumn<ROW>,\n\t\toptions: OPTIONS\n\t): DTableHeaderCellOptions {\n\t\tconst header = column.header || options.cell;\n\t\tif( header != null ) {\n\t\t\theader.weight = column.weight;\n\t\t\theader.width = column.width;\n\t\t\tconst text = header.text = header.text || {};\n\t\t\ttext.value = text.value || column.label;\n\t\t\treturn header;\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tweight: column.weight,\n\t\t\t\twidth: column.width,\n\t\t\t\ttext: {\n\t\t\t\t\tvalue: column.label\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableHeader\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogSelectOptions } from \"../ui/d-dialog-select\";\nimport { DAlignHorizontal } from \"./d-align-horizontal\";\nimport { DDialogSelect } from \"./d-dialog-select\";\nimport { DLayoutVertical, DLayoutVerticalOptions, DThemeLayoutVertical } from \"./d-layout-vertical\";\nimport { DMenu, DMenuOptions } from \"./d-menu\";\nimport { DTableBody, DTableBodyOptions, DThemeTableBody } from \"./d-table-body\";\nimport {\n\tDTableColumn, DTableColumnEditing, DTableColumnEditingOptions, DTableColumnOptions,\n\tDTableColumnSelecting, DTableColumnSelectingOptions, DTableColumnType, DTableEditingUnformatter,\n\tDTableGetter, DTableSelectingGetter, DTableSetter\n} from \"./d-table-column\";\nimport { DTableHeader, DTableHeaderOptions, DThemeTableHeader } from \"./d-table-header\";\nimport { utilIsString } from \"./util/util-is-string\";\nimport { utilToString } from \"./util/util-to-string\";\n\nexport interface DTableOptions<ROW, THEME extends DThemeTable = DThemeTable> extends DLayoutVerticalOptions<THEME> {\n\tcolumns: Array<DTableColumnOptions<ROW>>;\n\theader?: DTableHeaderOptions<ROW>;\n\tbody?: DTableBodyOptions<ROW>;\n\tdata?: ROW[];\n}\n\nexport interface DThemeTable extends DThemeLayoutVertical {\n\n}\n\nconst defaultGetter: DTableGetter<any> = ( row: any, index: number ): unknown => {\n\treturn row[ index ];\n};\n\nconst defaultSetter: DTableSetter<any> = ( row: any, index: number, cell: unknown ): void => {\n\trow[ index ] = cell;\n};\n\nconst defaultEditingUnformatter: DTableEditingUnformatter = ( cell: string ): unknown => {\n\treturn cell;\n};\n\nconst toColumnAlign = <ROW>( options: DTableColumnOptions<ROW>, type: DTableColumnType ): DAlignHorizontal => {\n\tif( options.align != null ) {\n\t\tif( utilIsString( options.align ) ) {\n\t\t\treturn DAlignHorizontal[ options.align ];\n\t\t} else {\n\t\t\treturn options.align;\n\t\t}\n\t}\n\tswitch( type ) {\n\tcase DTableColumnType.TEXT:\n\t\treturn DAlignHorizontal.LEFT;\n\tcase DTableColumnType.REAL:\n\tcase DTableColumnType.INTEGER:\n\t\treturn DAlignHorizontal.RIGHT;\n\tcase DTableColumnType.INDEX:\n\tcase DTableColumnType.SELECT:\n\t\treturn DAlignHorizontal.CENTER;\n\tdefault:\n\t\treturn DAlignHorizontal.LEFT;\n\t}\n};\n\nconst toColumnEditing = ( options: DTableColumnEditingOptions | undefined ): DTableColumnEditing => {\n\tif( options ) {\n\t\treturn {\n\t\t\tformatter: options.formatter || utilToString,\n\t\t\tunformatter: options.unformatter || defaultEditingUnformatter,\n\t\t\tvalidator: options.validator\n\t\t};\n\t}\n\treturn {\n\t\tformatter: utilToString,\n\t\tunformatter: defaultEditingUnformatter\n\t};\n};\n\nconst toColumnMenu = ( options?: DMenuOptions<unknown> | DMenu<unknown> ): DMenu<unknown> | undefined => {\n\tif( options == null ) {\n\t\treturn undefined;\n\t} else if( options instanceof DMenu ) {\n\t\treturn options;\n\t} else {\n\t\treturn new DMenu( options );\n\t}\n};\n\nconst toColumnDialog = (\n\toptions?: DDialogSelectOptions<unknown> | DDialogSelect<unknown>\n): DDialogSelect<unknown> | undefined => {\n\tif( options == null ) {\n\t\treturn undefined;\n\t} else if( options instanceof DDialogSelect ) {\n\t\treturn options;\n\t} else {\n\t\treturn new DDialogSelect( options );\n\t}\n};\n\nconst defaultSelectingGetter: DTableSelectingGetter = ( selected: unknown ): unknown => {\n\treturn selected;\n};\n\nconst toColumnSelecting = ( options: DTableColumnSelectingOptions | undefined ): DTableColumnSelecting => {\n\tif( options ) {\n\t\treturn {\n\t\t\tgetter: options.getter || defaultSelectingGetter,\n\t\t\tmenu: toColumnMenu( options.menu ),\n\t\t\tdialog: toColumnDialog( options.dialog ),\n\t\t\tfetcher: options.fetcher\n\t\t};\n\t}\n\treturn {\n\t\tgetter: defaultSelectingGetter\n\t};\n};\n\nconst toColumn = <ROW>( options: DTableColumnOptions<ROW> ): DTableColumn<ROW> => {\n\tconst weight = ( options.weight != null ? options.weight :\n\t\t( options.width != null ? undefined : +1 )\n\t);\n\tconst width = ( weight != null ? undefined :\n\t\t( options.width != null ? options.width : 100 )\n\t);\n\tconst type = ( options.type != null ?\n\t\t( utilIsString( options.type ) ? DTableColumnType[ options.type ] : options.type ) :\n\t\tDTableColumnType.TEXT\n\t);\n\tconst align = toColumnAlign( options, type );\n\tconst editable = ( options.editable === true );\n\treturn {\n\t\tweight,\n\t\twidth,\n\t\ttype,\n\t\tlabel: options.label || \"\",\n\t\tgetter: options.getter || defaultGetter,\n\t\tsetter: options.setter || defaultSetter,\n\t\tformatter: options.formatter,\n\t\talign,\n\n\t\teditable,\n\t\tediting: toColumnEditing( options.editing ),\n\n\t\theader: options.header,\n\t\tbody: options.body,\n\n\t\tselecting: toColumnSelecting( options.selecting )\n\t};\n};\n\nconst toColumns = <ROW>( options: Array<DTableColumnOptions<ROW>> ): Array<DTableColumn<ROW>> => {\n\tconst result = [];\n\tfor( let i = 0, imax = options.length; i < imax; ++i ) {\n\t\tresult.push( toColumn( options[ i ] ) );\n\t}\n\treturn result;\n};\n\nconst toHeaderOptions = <ROW, THEME extends DThemeTableHeader>(\n\toptions: DTableHeaderOptions<ROW, THEME> | undefined,\n\tcolumns: Array<DTableColumn<ROW>>\n): DTableHeaderOptions<ROW, THEME> => {\n\tif( options != null ) {\n\t\tif( options.columns === undefined ) {\n\t\t\toptions.columns = columns;\n\t\t}\n\t\treturn options as DTableHeaderOptions<ROW, THEME>;\n\t}\n\treturn {\n\t\tcolumns\n\t};\n};\n\nconst toBodyOptions = <ROW, THEME extends DThemeTableBody>(\n\toptions: DTableBodyOptions<ROW, THEME> | undefined,\n\tcolumns: Array<DTableColumn<ROW>>,\n\tdata: ROW[] | undefined\n): DTableBodyOptions<ROW, THEME> => {\n\tif( options != null ) {\n\t\tif( options.data === undefined && data !== undefined ) {\n\t\t\toptions.data = data;\n\t\t}\n\t\tif( options.columns === undefined ) {\n\t\t\toptions.columns = columns;\n\t\t}\n\t\tif( options.height === undefined && options.weight === undefined ) {\n\t\t\toptions.weight = 1;\n\t\t}\n\t\treturn options as DTableBodyOptions<ROW, THEME>;\n\t}\n\treturn {\n\t\tcolumns,\n\t\tdata,\n\t\tweight: 1\n\t};\n};\n\nexport class DTable<\n\tROW,\n\tTHEME extends DThemeTable = DThemeTable,\n\tOPTIONS extends DTableOptions<ROW, THEME> = DTableOptions<ROW, THEME>\n> extends DLayoutVertical<THEME, OPTIONS> {\n\tprotected _header!: DTableHeader<ROW>;\n\tprotected _body!: DTableBody<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tconst columns = toColumns( options.columns );\n\n\t\tconst header = this.newHeader( options, columns );\n\t\tthis._header = header;\n\t\tthis.addChild( header );\n\n\t\tconst body = this.newBody( options, columns );\n\t\tthis._body = body;\n\t\tthis.addChild( body );\n\t}\n\n\tprotected newHeader( options: OPTIONS, columns: Array<DTableColumn<ROW>> ): DTableHeader<ROW> {\n\t\treturn new DTableHeader( toHeaderOptions( options.header, columns ) );\n\t}\n\n\tprotected newBody( options: OPTIONS, columns: Array<DTableColumn<ROW>> ): DTableBody<ROW> {\n\t\treturn new DTableBody( toBodyOptions( options.body, columns, options.data ) );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTable\";\n\t}\n\n\tget header(): DTableHeader<ROW> {\n\t\treturn this._header;\n\t}\n\n\tget body(): DTableBody<ROW> {\n\t\treturn this._body;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\n\nexport interface DTreeOptions<THEME extends DThemeTree> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemeTree extends DThemeBase {\n\n}\n\nexport class DTree<\n\tTHEME extends DThemeTree = DThemeTree,\n\tOPTIONS extends DTreeOptions<THEME> = DTreeOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Point } from \"pixi.js\";\n\nexport class ESnapperResultScale {\n\tdistance: number;\n\tscale: Point;\n\n\tconstructor() {\n\t\tthis.distance = NaN;\n\t\tthis.scale = new Point();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilCeilingIndex = <V>( array: V[], value: V ): number => {\n\tlet i0 = 0;\n\tlet i1 = array.length - 1;\n\n\twhile( i0 <= i1 ) {\n\t\tconst i2 = i0 + ((i1 - i0) >> 1);\n\t\tconst v2 = array[ i2 ];\n\t\tif( value < v2 ) {\n\t\t\ti1 = i2 - 1;\n\t\t} else if( v2 < value ) {\n\t\t\ti0 = i2 + 1;\n\t\t} else {\n\t\t\treturn i2;\n\t\t}\n\t}\n\n\treturn Math.max( i0, i1 );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { utilToSvgUrl } from \"./util-to-svg-url\";\n\nexport const utilToSvgTexture = ( svg: string, resolution: number ): Texture => {\n\treturn Texture.from( utilToSvgUrl( svg ), {\n\t\tresolution\n\t});\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as ui from \"./wcardinal/ui\";\n\nui.loadAll();\n\nconst global = window as any;\nglobal.wcardinal = global.wcardinal || {};\nglobal.wcardinal.ui = ui;\n"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","DBorderMask","DApplications","instance","result","INSTANCE","Error","getInstance","update","utilIsFunction","target","theme","options","callback","_theme","_callback","background","_color","color","_alpha","alpha","DBaseBackground","state","undefined","getBackgroundColor","onChange","getBackgroundAlpha","DCornerMask","utilIsString","toString","call","border","_width","width","_align","align","_mask","mask","DBaseBorder","getBorderColor","getBorderAlpha","getBorderWidth","getBorderAlign","getBorderMask","DBaseInteractive","utilIsNumber","corner","_radius","radius","DBaseCorner","getCornerRadius","getCornerMask","isChanged","DBaseState","outline","_offset","offset","DBaseOutline","getOutlineColor","getOutlineAlpha","getOutlineWidth","getOutlineOffset","getOutlineAlign","getOutlineMask","padding","_left","_top","_right","_bottom","left","top","right","bottom","DBasePadding","getPaddingLeft","getPaddingTop","getPaddingRight","getPaddingBottom","point","cb","scope","_point","DBasePoint","x","y","set","copyFrom","arguments","equals","texture","height","borderSize","cornerMask","_super","Float32Array","Uint16Array","_this","_height","_texture","_borderSize","_cornerMask","_isDirty","_textureId","NaN","_vertexBuffer","getBuffer","_vertices","data","_uvBuffer","_uvs","_indexBuffer","getIndex","_indices","DBaseBackgroundMeshGeometry","_updateID","iv","array","x0","x1","y0","y1","ii","indices","uvs","c","u0","u1","u2","u3","v0","v1","v2","v3","fillVertices","valid","textureId","getTextureId","vertices","Math","min","x2","max","x3","y2","y3","textureUvs","l","r","t","w","h","ctl","TOP_LEFT","ctr","TOP_RIGHT","cbl","BOTTOM_LEFT","cbr","BOTTOM_RIGHT","ia","fillUvsCorner","fillIndices","fillUvs","MeshGeometry","MeshMaterial","DBaseBackgroundMesh","shader","geometry","renderer","_render","Mesh","borderMask","_borderMask","DBaseBorderMeshGeometry","b1","b2","uz","vz","bt","TOP","bb","BOTTOM","bl","LEFT","br","RIGHT","DBaseBorderMesh","base","cornerRadius","getRadius","cornerHeight","getMask","backgroundPlane","_backgroundPlane","getBackgroundTexture","appendRenderable","borderWidth","getWidth","borderPlane","_borderPlane","getBorderTexture","outlineWidth","outlineMask","outlinePlane","_outlinePlane","DBaseOutlineMesh","_lastBackgroundCornerRadius","_lastBorderCornerRadius","_lastBorderWidth","_lastOutlineCornerRadius","_lastOutlineWidth","addReflowable","DBaseReflowable","backgroundColor","getColor","backgroundAlpha","getAlpha","tint","visible","borderColor","borderAlpha","borderAlign","getAlign","borderOffset","outlineColor","outlineAlpha","outlineOffset","getOffset","outlineAlign","outlineOffsetAccumulative","DCommandFlag","DBaseStates","is","HOVERED","DRAGGING","FOCUSED","FOCUSED_IN","ACTIVE","ACTIVE_IN","DISABLED","PRESSED","READ_ONLY","INVALID","SUCCEEDED","FAILED","destination","destinationState","source","when","setState","on","newSourceState","isNotActive","bind","NodeType","DCommandClear","UNSTORABLE","CLEAR","DCommandRedo","DCommandUndo","isCommandStorable","command","getFlag","_position","_done","_waiting","_executing","DControllerDefaultCommand","done","waiting","length","push","next","command_1","shift","current","emit","undo","onSuccess","onFail","then","redo","isClear","isStorable","size","remove","cleanup","execute","i","destroy","ifrom","imax","splice","isRedoable","isUndoable","utils","EventEmitter","isFocusable","isFocusableContainer","isSelectable","DControllerDefaultFocus","focusable","isFocused","select","previous","_focused","mightBeFocusable","parent","hasState","UNFOCUSABLE","FOCUS_ROOT","includesTarget","includesTargetChildren","direction","findFocusableNext","parent_1","index","children","indexOf","found","isFocusRoot","findFocusable","findFocusablePrevious","parent_2","UtilKeyboardEvent","e","key","which","ctrlKey","shiftKey","expressionOrShortcut","event_1","expression","arrowIndex","keyExpression","substring","trim","keys","toLowerCase","split","shortcut","toUpperCase","code","charCodeAt","setShortcutKeyAndWhich","alt","ctrl","event","parts","join","handler","toShortcut","document","body","addEventListener","altKey","isActionable","preventDefault","DControllerKeyboard","element","stage","focusController","focused","getFocused","hasOnKeyDown","onKeyDown","isFocusKey","getFocusDirection","setFocused","stopImmediatePropagation","hasOnKeyUp","onKeyUp","DControllers","FOCUS","KEYBOARD","COMMAND","DOCUMENT","AutoFlag","TOKEN_MAPPING_OPERATOR","+","-","*","/","(",")","TOKEN_MAPPING_LITERAL","%","s","nodes","toToken","toParensesis","toUnary","toArithmetic","node","_node","DScalarExpression","from","j","jmax","operand","type","toUnaryNode","operatorA","operatorB","toArithmeticNode","tokenRegEx","tokens","matched","exec","token","tokenTypeOperator","parsedToken","parseFloat","tokenTypeLiteral","self","evaluate","DScalarFunctions","coordinate","isPosition","POSITION","CENTER","PADDING","SIZE","MAXIMIZED","scalarExpression_1","calculate","scalar_1","DLayoutClearType","scalarSet","_base","_scalarSet","_autoFlags","DCoordinateSet","scalar","position","layout","isWidthAuto","toAutoWidth","toChildrenDirty","isHeightAuto","toAutoHeight","DAlignHorizontal","DAlignVertical","DAlignWith","DThemes","DEFAULT_THEME_CLASS","defaultThemeClass","getDefaultThemeClass","UtilName","mapping","_mapping","UtilPointerEvent","interactionManager","plugins","interaction","touches","changedTouches","touch","mapPositionToPoint","clientX","clientY","touchable","isDowned_1","downX_1","downY_1","cleanup_1","interactionManager_1","off","up_1","onUp_1","up","contains","global","dx","abs","dy","threshold","CLICK_DISTANCE_THRESHOLD","isValidDistance_1","down","global_1","once","onClick","onLongClick","isDowned_2","downX_2","downY_2","timeoutId_1","cleanupTimeout_1","clearTimeout","cleanup_2","interactionManager_2","up_2","onUp_2","move_1","onMove_1","isValidDistance_2","move","global_2","originalEvent","window","setTimeout","LONG_CLICK_THRESHOLD","isDowned_3","downX_3","downY_3","clickTime_1","timeStamp","DBLCLICK_INTERVAL_THRESHOLD","item","targetOrChild","toTheme","get","toShortcuts","shortcuts","transform","_transform","onMove","_scale","scale","onScale","_skew","skew","onSkew","_options","_coordinateSet","_hasDirty","_isChildrenDirty","_shadow","_name","name","getType","getThemeDefault","_befores","_afters","_reflowables","_clearType","clear","getClearType","_padding","toDirtyAndUpdate","toDirty","_background","_border","_outline","_corner","initReflowable","getX","getY","getHeight","_state","NONE","_stateLocal","interactive","getInteractive","SELF","interactiveChildren","CHILDREN","name_1","_title","title","getTitle","_weight","weight","getWeight","_onShadowUpdateBound","shadow","getShadow","over","setHovered","applyTitle","out","onDown","isDirty","hasDirty","toParentHasDirty","toParentChildrenDirty","updateState","blur","_shortcuts","onShortcutBound","onShortcut","init","states","addChild","child","DBase","renderable","phase","unshift","list","reflowable","reflowables","onChildrenChange","moveChildren","oldWidth","oldHeight","widthResized","heightResized","resized","onResize","getParentOfSize","getLeft","getTop","newWidth","newHeight","resizeChildren","parent_3","parent_4","isHovered","view","toHasDirty","onChildrenDirty","isActive","isPressed","isReadOnly","isDisabled","isDragging","isInvalid","isSucceeded","isFailed","getFocusController","recursively","isOn","oldStateLocal","newStateLocal","statesOn","statesOff","stateLocal","newState","mergeState","oldState","onStateChange","stateParent","onParentStateChange","onFocused","onBlured","onChildFocused","newStateParent","oldStateParent","setTheme","refit","onRefit","coordinateSet","hasRefitableWidth","hasRefitableHeight","resize","getRight","getBottom","isRefitable","onReflow","reflow","removeReflowable","removeRenderable","prependRenderable","onParentResize","parentWidth","parentHeight","parentPadding","paddingWidth","paddingHeight","newX","newY","onParentMove","deltas","onDownThis","parent_5","findFocusableParent","worldAlpha","renderBefore","render","renderAfter","befores","before","updateTransform","afters","after","worldTransform","bounds","_bounds","work","WORK_CONTAINS_POINT","apply","addPoint","_calculateBounds","containsGlobalPoint","containsLocalPoint","applyInverse","Point","Container","DDynamicTextGeometry","text","atlas","clippingWidth","vertexBuffer","uvBuffer","indexBuffer","measureText","requiredTextSize","ceil","requiredVertexSize","requiredIndexSize","ichar","k","a","writeCharacter","advance","writeCharacterEmpty","font","character","offsetX","origin","vo","WORK","Uint32Array","char","setResult","dots","iend","inext","hasDots","iresult","istart","newResult","_id","_idApproved","DDynamicTextStyle","FONT","_fontFamily","fontFamily","getFontFamilly","_fontSize","fontSize","getFontSize","_fontStyle","fontStyle","_fontVariant","fontVariant","_fontWeight","fontWeight","_fontIdId","_fontId","_fontIdApproved","_fill","fill","_fillApproved","_clipping","clipping","_onChange","newFontId","ASCII_CHARACTERS","reserved","ref","life","DynamicFontAtlasCharacterOrigin","fontId","id","hex2string","metrics","TextMetrics","measureFont","ascent","descent","fontColor","_canvas","createElement","_context","_font","DynamicFontAtlasFont","_characters","_length","_unrefCount","_revision","_revisionUpdated","Texture","mipmap","MIPMAP_MODES","OFF","resolution","settings","RESOLUTION","scaleMode","SCALE_MODES","NEAREST","add","add_","DynamicFontAtlas","characters","getAdvance","DynamicFontAtlasCharacter","targets","remove_","context","getContext","canvas","textAlign","textBaseline","lineWidth","lineCap","lineJoin","miterLimit","fillStyle","strokeStyle","cleanup_","fontHeight","toPowerOf2","sqrt","offsetY","round","baseTexture","realWidth","realHeight","save","clearRect","fillText","restore","setRealSize","updateAll","colorToAltas","forEach","destroyAll","_atlases","Map","DynamicFontAtlases","atlases","colorToAtlas","EMPTY","_style","_isGeometryDirty","_atlas","update_","_text","_textApproved","_atlasRevisionUpdated","_clippingWidthDelta","DDynamicText","style","textApproved","fontIdApproved","fillApproved","approve","geometryWidth","newScale","geometryHeight","getRevisionUpdate","revisionUpdate","_clippingWidth","newClippingWidth","getClippingWidth","DBaseOverflowMaskSimple","beginFill","drawRect","endFill","Graphics","DTextBase","_textValue","value","newTextValue","toTextValue","_textValueComputed","computeTextValue","_textColor","_textAlpha","_textStyle","getFontWeight","getFontStyle","getFontVariant","getTextStyleClipping","toTextStyle","_textAlign","vertical","getTextAlignVertical","horizontal","getTextAlignHorizontal","toTextAlign","_textFormatter","formatter","getTextFormatter","toTextFormatter","_textDynamic","dynamic","isTextDynamic","toTextDynamic","_isOverflowMaskEnabled","isOverflowMaskEnabled","_overflowMask","onTextChange","createOrUpdateText","updateTextValue","textValue","getTextValue","formatted","createText","updateTextPosition","getOrCreateOverflowMask","Text","toRounded","MIDDLE","getTextColor","getTextAlpha","newTextValueComputed","updateTextColor","updateText","overflowMask","DImageBase","_image","_imageAlign","image","with","getImageAlignWith","getImageAlignVertical","getImageAlignHorizontal","toImageAlign","_imageMargin","margin","getImageMarginVertial","getImageMarginHorizontal","toImageMargin","_imageTint","toImageTint","_imageBound","Rectangle","_imageBoundPoint","_imageSource","_imageSourceComputed","_onImageChangeBound","onImageChange","imageSource","getImageSource","updateImageTint","getLocalBounds","localTransform","getImageRect","imageWidth","imageHeight","imageAlign","marginHorizontal","imageWaMH","setClippingWidthDelta","marginVertical","imageHaMV","imageTint","getImageTintColor","getImageTintAlpha","isTintAware","newImageSourceComputed","computeImageSource","oldImageSourceComputed","oldImage","Sprite","removeChild","newImage","updateImageSource","TEXT","updateTextAndImagePosition","updateImagePositionPadding","BORDER","updateImagePositionBorder","updateImagePositionText","imageSourceComputed","DImage","DListItem","buttonMode","_value","toValue","selection","hasSelection","getSelection","isActivateKey","onSelect","DMenuItem","getCloseable","DMenuItemText","initOnClick","initOnOver","initShortcuts","_shortcutMargin","getShortcutTextMargin","shortcutTextValue","_shortcutText","shortcutText","updateShortcutText","closeable","DMenuItemCheck","check","setActive","DMenus","creator","CREATORS","CREATOR_DEFAULT","MENU_CREATOR","creators","creatorDefault","sticky","created","newItemOf","items","DisplayObject","newItem","JSON","stringify","newItemsOf","strokeWidth","frame","DynamicAtlasItem","resolutionInverse","updateUvs","DynamicAtlasItemEmpty","DynamicAtlasItemFontAtlas","drawImage","src","DynamicAtlasItemImage","DynamicAtlasItemText","DynamicAtlasItemWhite","fillRect","_baseTexture","BaseTexture","_idToDatum","_sortedData","_predefined","empty","white","DynamicAtlas","maxRowHeight","datum","minHeight","applyFrame","sort","ITEM_COMPARATOR","idToDatum","forcibly","canvasWidth","calcCanvasWidth","canvasHeight","updateFrames","renderFrames","applyFrames","predefined","_gl","_shaderProgram","_vertexPositionAttribute","_textureCoordAttribute","_samplerUniform","_sizeUniform","_vb","_uvb","_onLostBound","_onRestoreBound","_onUnloadBound","DynamicSDFFontGenerator","isContextLost","config","antialias","depth","stencil","premultipliedAlpha","gl","clearColor","makeVertexBuffer","makeUvBuffer","makeShaders","createShader","FRAGMENT_SHADER","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","console","error","getShaderInfoLog","vertexShader","getShader","fragmentShader","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","deleteShader","useProgram","getAttribLocation","getUniformLocation","getError","deleteProgram","textureCanvas","viewport","createTexture","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","deleteTexture","vb","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","deleteBuffer","uvb","COLOR_BUFFER_BIT","vertexPositionAttribute","enableVertexAttribArray","vertexAttribPointer","FLOAT","textureCoordAttribute","activeTexture","TEXTURE0","uniform1i","uniform2f","drawArrays","TRIANGLE_STRIP","copyCanvas","copyContext","destroyVertexBuffer","destroyUvBuffer","destroyShaders","removeEventListener","WebGLLoseContext","getExtension","loseContext","_generator","DynamicSDFFontAtlas","getGenerator","family","toFontFamily","italic","addChar","generator","characterSize","characterWidth","characterHeight","updateTexture","read","toJson","getAutoFontFamily","GENERATOR","FONT_FAMILY_AUTO","DynamicSDFFontAtlases","begin","addAscii","end","newAtlas","baseAtlas","getBaseTexture","atlasId","newInstance","Lazy","FormatNodeA","step","date","getHours","FormatNodea","FormatNodeD","String","getDate","FormatNoded","precision","FormatNodee","toExponential","FormatNodePrecision","FormatNodef","toFixed","FormatNodefsi","toAbs","format_","unitInverse","postfix","FormatNodeg","toPrecision","FormatNodeH","FormatNodeh","FormatNodeM","getMonth","FormatNodem","getMinutes","FormatNodemi","getMilliseconds","FormatNodeP","FormatNodep","utilPad","str","strLength","FormatNodePadding","format","FormatNodeParenthesis","FormatNodePlus","FormatNodeRP","FormatNoderp","Y","M","D","H","m","mi","FormatNodesdt","FormatNodeSpace","FormatNodessi","FormatNodeString","FormatNodeY","getFullYear","FormatNodey","FormatNodez","z","getTimezoneOffset","floor","FormatNoderd","FormatNodes","getSeconds","REGEXP","previousIndex","isDateRequired","lastIndex","all","modifier","toModifiedNodeDatetime2","toModifiedNodeDatetime3","toModifiedNodeNumber","Date","NumberFormatterImpl","setTime","NumberFormatters","UtilAlpha","alphaA","alphaB","Image","svg","resources","BaseImageResource","crossOrigin","crossorigin","autoLoad","load","SVGResource","_load","Promise","resolve","onerror","onError","run","onload","extension","utilToSvgUrl","btoa","INSTALLED","UtilAttachAlign","ratio","_ratio","_margin","_frames","_svg","_nextX","_nextY","UtilSvgAtlasBuilder","path","frames","build","built","_built","force","pow","log","LN2","url","scaling","frames_1","DMouseModifier","UtilAttach","clippingHeight","adjust","clippingSize","UtilClickOutside","toLocal","range","createRange","selectNodeContents","removeAllRanges","addRange","toClipboardData","clipboardData","stopPropagation","UtilClipboard","clipboard","navigator","writeText","ClipboardEvent","setData","copyUsingWindow","div","setAttribute","textContent","appendChild","getData","execCommand","copyUsingDiv","userAgent","span","innerText","attachShadow","mode","copyUsingSpan","ds","dt","UtilDragEasingHistory","DAnimationTimings","_target","_startTime","_duration","duration","_durationInverse","_reverse","_onTime","onTime","_onTimeBaseBound","onTimeBase","_onStart","onStart","_onEnd","onEnd","_timing","timing","ELASTIC","DAnimationBase","reverse","stop","now","time","toTime","isReverse","elapsedTime","_histories","_historiesSorted","_historyBegin","_historyEnd","_dx","_dy","_ds","_dt","_animation","onEase","LINEAR","_durationPosition","_durationScale","_onMove","UtilDragEasing","histories","HISTORY_CAPACITY","capacity","oldHistoryEnd","newHistoryEnd","oldHistoryBegin","unsorted","sorted","total","history_1","history_2","history_3","ldt","adt","updateHistoriesSorted","sortedLength","history_4","d0","d1","animation","start","UtilFileAs","DMouseModifiers","oe","CTRL","ALT","SHIFT","OR","toEasingOptions","toChecker","checker","defaultChecker","match","_modifier","_checker","_interactionManager","_center","_scalingCenter","_time","easing","_easing","onEasingMove","_onDownBound","_onMoveBound","_onEndBound","_down","_move","_up","UtilDrag","center","touchesLength","first","centerX","centerY","squareDistance","calcCenterAndScale","setDragging","oldScale","oldTime","newTime","EPSILON","scalingCenter","UtilExtractor","skipUpdateTransform","PIXI","RenderTexture","matrix","Matrix","renderTexture","pixels","Uint8Array","readPixels","ignorePremutipliedAlpha","canvasRenderTarget","CanvasRenderTarget","imageData","getImageData","extract","Extract","arrayPostDivide","putImageData","scaledWidth","scaledHeight","scaledImageData","quality","toDataURL","UtilFileDownloader","filename","href","display","click","open","location","contents","blob","Blob","msSaveBlob","downloadUrl","URL","createObjectURL","UtilExtract","toResolution","toSkipUpdateTransform","toTexture","toPixels","premultiplied","ignore","toIgnorePremultipliedAlpha","toScale","toCanvas","toBase64","base64","DMenuItemLinkMenuItemId","DMenuItemLinkTarget","as","facade","_input","_as","_facade","UtilFileOpener","input","getOrCreateInput","onCancel","input_1","onInputChange","files","file","fileReader","FileReader","onOpen","onabort","onAboart","readAsText","DATA_URL","readAsDataURL","BINARY_STRING","readAsBinaryString","ARRAY_BUTTER","readAsArrayBuffer","UtilHsv","g","v","utilIndexOf","i0","i1","i2","utilIsArray","isArray","utilIsNaN","UtilPromise","UtilRgb","trimmed","Number","colorA","colorB","ar","ag","ab","bg","w1","w0","amount","blend","UtilRgba","UtilTexturePlane","attr","realRadius","realSize","toCornerBr","tl","toCornerTl","toSvg","make","BACKGROUND_ATTRIBUTE","onUpdate","BORDER_ATTRIBUTE","cache","BACKGROUND_CACHE","newBackground","BORDER_CACHE","maskToTexture","newBorder","UtilTexture","onLoad","utilToString","_current","_lastUpdate","_updateId","UtilTransition","updateId","lastUpdate","remaining","hide","show","_names","documentMode","UtilWheelEvent","useCapture","names","name_2","_lineHeight","getLineHeight","_pageHeight","deltaX","deltaY","detail","wheelDelta","wheelDeltaY","wheelDeltaX","axis","HORIZONTAL_AXIS","delta","_timestamp","_lowest","shouldAdjust","lowest","deltaMode","getPageHeight","DLayoutDirection","_link","link","_menuOptions","menu","DMenuItemLink","NEW_WINDOW","EXTENSION_0","_menu","getMenuOptions","toMenu","onMenuSelect","newMenu","OPEN_LINK_IN_NEW_WINDOW","COPY_LINK_ADDRESS","copy","resolved","isHidden","inNewWindow","checked","a_1","rel","InteractionEvent","metaKey","button","DMenuAlign","DMenuItemMenu","toggle","initHover","close","DListItemSeparatorReflowable","middle","lineStyle","moveTo","lineTo","DListItemSeparator","DMenuItemSeparator","DLayoutSpace","DMenuItemSpace","loadMenuItem","addItemCreator","isCompatible","toSubMenuOptions","setItemCreatorDefault","EShapeType","isDBaseVisible","toMultiplicity","row","column","getMultiplicity","toMargin","themeMargin","getMargin","toDirection","getDirection","toCornerAdjust","getCornerAdjust","_direction","_cornerAdjust","_multiplicity","DLayout","multiplicity","clearType","BEFORE","AFTER","baseSize","VERTICAL","marginNext","paddingTop","paddingBottom","paddingLeft","paddingRight","weightTotal","getWeightTotal","cornerAdjustWork","requiredSize","CORNER_ADJUST_WORK","irow","weightTotalInverse","spaceLeft","getSpaceLeft","icolumn1","irow1","icolumn0","findRowIndexPrevious","hasClearTypeAfter","icolumn2","findRowIndexNext","hasClearTypeBefore","ncolumn","countColumn","toCornerMaskColumn","icolumn","irow0","findColumnIndexPrevious","irow2","findColumnIndexNext","nrow","countRow","toCornerMaskRow","hasClearType","n","ALL","DLayoutVertical","DMenuItemExpandableBody","DMenuItemExpandableHeader","DMenuItemExpandables","DMenuItemExpandable","header","toHeader","_header","toBody","_body","newItems","onActivated","onDeactivated","newHeader","newBody","DMenuItemExpandableItemCheck","DMenuItemExpandableItemLink","DMenuItemExpandableItemSeparator","DMenuItemExpandableItemSpace","DMenuItemExpandableItemText","loadMenuItemExpandable","DMenuSidedItemCheck","DMenuSidedItemLink","DMenuSidedItemMenu","DMenuSidedItemSeparator","DMenuSidedItemSpace","DMenuSidedItemText","DMenuSideds","loadMenuSidedItem","DMenuSidedItemExpandables","DMenuSidedItemExpandable","DMenuSidedItemExpandableItemCheck","DMenuSidedItemExpandableItemLink","DMenuItemExpandableItemMenu","DMenuSidedItemExpandableItemMenu","DMenuSidedItemExpandableItemSeparator","DMenuSidedItemExpandableItemSpace","DMenuSidedItemExpandableItemText","loadMenuSidedItemExpandable","loadMenuItemAll","EShapeDeserializers","EShapePointsStyle","EShapeUploadeds","EShapeBarPosition","EShapePointsStyleUploadeds","nonExpandingWidth","NON_EXPANDING_WIDTH","nonShrinkingWidth","NON_SHRINKING_WIDTH","nonScalingDotAndDash","NON_SCALING_DOT_AND_DASH","NON_SOLID_MASK","DOTTED","DOTTED_DENSELY","DOTTED_LOOSELY","DASHED","DASHED_DENSELY","DASHED_LOOSELY","EShapeCorner","EShapeStrokeSide","_parent","_values","_segments","_size","_updatedSize","_updatedParentSizeX","_updatedParentSizeY","_updatedPosition","EShapeBarPoints","sizeX","sizeY","parentSize","parentSizeX","parentSizeY","psxh","psyh","computedSize","getComputedSize","values","segments","newValues","newSegments","newStyle","newPosition","newSize","updateUploaded","manager","resourceId","resource","parsed","parse","EShapeCopyPart","EShapeRuntimeReset","EShapeRuntimeState","EShapeDefaults","devicePixelRatio","EShapeAction","sources","destinations","isEquals","indexA","indexB","tmp","serialize","EShapeTagValueOrder","EShapeTagValueRangeType","shape","rotation","actions","toObject","stroke","cursor","reset","written","effect","EShapeRuntime","disabled","CLICKED","CHANGED","hovered","DOWN","UP","onPointerDown","onPointerUp","onPointerClick","tag","isEffectTimeUp","disallowUploadedUpdate","allowUploadedUpdate","PERSISTENT","executeActions","resetUnwrittenProperties","POSITION_X","POSITION_Y","VISIBILITY","COLOR_FILL","COLOR_STROKE","COLOR_TEXT","COLOR_TEXT_OUTLINE","HEIGHT","WIDTH","ROTATION","CURSOR","internalTransform","EShapeTransformImpl","Transform","onTransformChange","updateSkew","_currentLocalID","_localID","_parentID","_worldID","parentTransform","oldLocalId","oldWorldId","newLocalId","newWorldId","copyTo","prepend","EShapeGradients","gradient","points","parseGradient","serialized","serializeGradient","stops","toCode","radian","PI","cos","sin","newTransform","_onTransformChangeLock","_isOnTransformChanged","action","_visible","_uploadedUpdateLock","_isUploadedUpdated","_isUploadedUpdatedRecursively","_boundsTransformId","_boundsInternalTransformId","_boundsLocalTransformId","selected","reference","EShapeBase","onTransformChange_","updateUploadedRecursively","onChildTransformChange","invokeOnTransformChange","uploaded","root","at","detach","IDENTITY","childrenSerialized","toGradientId","pivot","shortcutId","titleId","serializeImage","serializeChildren","unfocusable","sx","sy","containsAbs","containsText","containsChildren","textWorld","world","tx","ty","th","tv","childResult","shadowed","containsAbsBBox","ax","ay","skipUpdate","worldId","getWorldId","getBounds_","boundsInternal","_boundsInternal","currentLocalId","getLocalIdCurrent","boundsLocal","_boundsLocal","px","py","getBoundsSize","xmin","ymin","xmax","ymax","getState","runtime","unforcusable","onPointerDblClick","part","TRANSFORM","sourceTransform","STYLE","ACTION","addAll","POINTS","sourcePoints","clone","STATE","enable","_enable","EShapeFillImpl","stringified","fills","deserialized","side","_side","EShapeStrokeImpl","strokes","EShapeTextWeight","EShapeTextStyle","EShapeTextAlignHorizontal","EShapeTextAlignVertical","EShapeTextDirection","_type","_from","_to","EShapeTagValueRangeImpl","to","FROM","TO","FROM_TO","copy_","ranges","INDEX_COMPARATOR","initial","_capacity","_order","ASCENDING","EShapeTagValueImpl","newValue","order","count","normalize","times","_times","parent_6","newTimes","parent_7","parent_8","parent_9","parent_10","slice","parent_11","parent_12","idSerialized","initialSerialized","formatSerialized","rangeSerialized","tagValues","deserialize","EShapeTagImpl","inherited","RANGE_DUMMY","nvalue","EMPTY_ARRAY","tags","EShapeActionValueBlinkType","_horizontal","_vertical","EShapeTextAlignImpl","aligns","EShapeTextOffsetImpl","margins","EShapeTextOutlineImpl","textOutlines","_family","NORMAL","spacing","LEFT_TO_RIGHT","EShapeTextImpl","isChangedDirty","isChangedUploaded","alignSerialized","offsetSerialized","outlineSerialized","spacingSerialized","paddingSerialized","texts","newFill","newStroke","RADIUS","newText","EShapePrimitive","ObservablePoint","onSizeChange","SIZE_X","SIZE_Y","FILL_COLOR","FILL_ALPHA","STROKE_COLOR","STROKE_ALPHA","STROKE_WIDTH","STROKE_ALIGN","STROKE_SIDE","TEXT_VALUE","TEXT_FAMILY","TEXT_SIZE","imageSrc","EShapeLineBase","container","getPixelScale","getStrokeWidthScale","swh","getStrokeWidthScaled","pointCount","pointValues","pointSegments","p0x","p0y","p1x","p1y","calcHitPosition","CLOSED","squaredDistance","d0x","d0y","d1x","d1y","t0","BAR","EShapeBar","buffer","voffset","ioffset","vcount","icount","transformLocalId","vertexOffset","vertexCount","indexOffset","indexCount","colorFill","alphaFill","colorStroke","alphaStroke","worldSizeXHalf","worldSizeYHalf","worldSizeZHalf","worldSizeWHalf","worldSizeR","strokeAlign","strokeSide","textureTransformId","EShapeUploadedBase","getLocalId","WHITE","textureAny","colors","rgba","premultiplyTintToRgba","workColor","isEnabled","colorFillBuffer","fillColor","colorFills","colorStrokeBuffer","colorStrokes","updateColorFill","updateColorStroke","antialiasWeight","ANTIALIAS_WEIGHT","dpc0","pc0","pc1","swc","pc","swx","swy","px0","py0","px1","py1","steps","antialiases","clippings","cx","cy","dx01","dy01","builder","EShapeTextUploadeds","tvcount","ticount","textSize","textFamily","textTexture","textTextureTransformId","textColor","textAlpha","textWeight","textStyle","textAlignHorizontal","textAlignVertical","textOffsetHorizontal","textOffsetVertical","textOutlineWidth","textOutlineColor","textOutlineAlpha","textSpacingHorizontal","textSpacingVertical","textDirection","textPaddingHorizontal","textPaddingVertical","textClipping","textVertexCount","textIndexCount","EShapeTextUploaded","getTextCount","workCount","updateColorFillAndStroke","halign","valign","hoffset","hpadding","vpadding","hnx","hny","vnx","vny","OUTSIDE_TOP","OUTSIDE_BOTTOM","OUTSIDE_LEFT","OUTSIDE_RIGHT","defx","defy","li","textAtlas","toTextureTransformId","isCharChanged","isCharSizeChanged","isCharStyleChanged","isCharAlignChanged","isCharOffsetChanged","isCharSpacingChanged","isCharDirectionChanged","isClippingChanged","isTextureChanged","hl","calcLength","vl","heightChar","lineHeight","textAtlasCharacters","toAdvance","tx0","ty0","lineWidthMaximum","getTextBBox","TOP_TO_BOTTOM","rotateAlignVerticalRight","rotateAlignHorizontalRight","BOTTOM_TO_TOP","rotateAlignVerticalLeft","rotateAlignHorizontalLeft","dwidth","toTextureUvs","uvx0","uvx1","uvx3","uvy0","uvy1","uvy3","duvx01","duvy01","duvx03","duvy03","lhx","lhy","snx","sny","oyx","oyy","offsetItalic","bx0","by0","bx3","by3","cx0","cy0","cx3","cy3","lineCount","textValueLength","dotsAdvance","adjustTextAlignment","dataOffsetX","dataWidth","dx0","dy0","dx1","dy1","dux0","duy0","dux1","duy1","dvx0","dvy0","dvx1","dvy1","vertexIndex","textCount","nx","ny","moveText","moveTextHalf","moveTextFull","textOutline","stepBuffer","antialiasBuffer","updateTextVertex","updateTextColorFill","updateTextColorStroke","updateTextStep","clippingBuffer","buildUnit","textBaseTexture","pointsId","pointsStyle","EShapeBarUploaded","ic","initText","isSizeChanged","isStrokeWidthChanged","toTransformLocalId","isTransformChanged","isPointsIdChanged","isPointsStyleChanged","updateLineVertexStepAndColorFill","updateColor","updateBarUv","pointsSize","scaleInvariant","toScaleInvariant","p2x","p2y","p3x","p3y","toDash","dash0","dash1","iuv","EShapeBarUploadeds","tcount","vertexCapacity","indexCapacity","EShapeActionBases","EShapeActionRuntime","def","defLiteral","Function","parameter1","parameter2","application","conditionDefault","condition","toExpression","interval","EShapeActionRuntimeBlink","dinterval","elapsed","toOff","toOn","EShapeActionRuntimeConditional","COLOR","EShapeActionRuntimeBlinkBrighten","toBaseFill","brighten","toBaseStroke","toBaseText","toBaseTextOutline","EShapeActionRuntimeBlinkColorFill","EShapeActionRuntimeBlinkColorStroke","EShapeActionRuntimeBlinkDarken","darken","COLOR_FILL_AND_STROKE","EShapeActionRuntimeBlinkOpacity","EShapeActionRuntimeBlinkVisibility","EShapeActionValueType","EShapeActionValueBase","toLabel","subtype","EShapeActionValueSubtyped","EShapeActionValueChangeColorType","EShapeActionValueChangeColorTarget","EShapeActionValues","BLINK","EShapeActionValueBlink","BRIGHTEN","DARKEN","OPACITY","conditionId","toResource","EShapeActionValueChangeTextType","blendDefault","ALPHA","EShapeActionRuntimeChangeColor","baseFill","baseStroke","baseText","baseOutline","EShapeActionRuntimeChangeColorAll","setAll","EShapeActionRuntimeChangeColorFill","EShapeActionRuntimeChangeColorFillAndStroke","sets","EShapeActionRuntimeChangeColorStroke","EShapeActionRuntimeChangeColorText","EShapeActionRuntimeChangeColorTextOutline","CHANGE_COLOR","EShapeActionValueChangeColor","FILL","STROKE","FILL_AND_STROKE","TEXT_OUTLINE","blendId","brightnessDefault","brightness","EShapeActionRuntimeChangeColorBrightness","toColorAdjusted","EShapeActionRuntimeChangeColorBrightnessAll","EShapeActionRuntimeChangeColorBrightnessFill","EShapeActionRuntimeChangeColorBrightnessFillAndStroke","EShapeActionRuntimeChangeColorBrightnessStroke","EShapeActionRuntimeChangeColorBrightnessText","EShapeActionRuntimeChangeColorBrightnessTextOutline","EShapeActionValueChangeColorBrightness","BRIGHTNESS","brightnessId","colorDefault","alphaDefault","EShapeActionRuntimeChangeColorCode","EShapeActionRuntimeChangeColorCodeAll","EShapeActionRuntimeChangeColorCodeFill","EShapeActionRuntimeChangeColorCodeFillAndStroke","EShapeActionRuntimeChangeColorCodeStroke","EShapeActionRuntimeChangeColorCodeText","EShapeActionRuntimeChangeColorCodeTextOutline","EShapeActionValueChangeColorCode","CODE","colorId","alphaId","nameDefault","EShapeActionRuntimeChangeCursor","CHANGE_CURSOR","EShapeActionValueChangeCursor","nameId","numberDefault","number","EShapeActionRuntimeChangeTextNumber","textDefault","EShapeActionRuntimeChangeTextText","EShapeActionValueMiscType","CHANGE_TEXT","EShapeActionValueChangeText","NUMBER","valueId","EShapeActionRuntimeEmitEvent","EMIT_EVENT","EShapeActionValueEmitEvent","rect","_onInputKeyDownBound","onInputKeyDown","_onInputBlurBound","onInputBlur","_updateInputBound","updateInput","_onInputChangeBound","_onInputInputBound","onInputInput","_updateInputBoundRenderer","EShapeActionRuntimeMiscInputData","getRootElement","createInput","getInputType","getInputStyle","readonly","removeAttribute","paddingHorizontal","getInputStylePosition","getInputStyleMargin","getInputStyleText","getInputStyleBackground","getInputStyleBorder","getInputStylePadding","getInputStyleOutline","focus","isOkKey","HTMLInputElement","onInput","newShape","oldShape","app","getInput","initInput","updateInputBound","EShapeActionRuntimeMiscInput","data_1","isShown","_","EShapeActionValueOpenType","MISC","EShapeActionValueMisc","INPUT","targetDefault","EShapeActionRuntimeOpenFlow","opener","EShapeActionRuntimeOpen","EShapeActionRuntimeOpenPage","EShapeActionRuntimeOpenPageInplace","EShapeActionValueShowHideType","OPEN","EShapeActionValueOpen","FLOW","PAGE","PAGE_INPLACE","targetId","EShapeActionValueTransformMoveType","EShapeActionValueTransformType","visibility","SHOW","EShapeActionRuntimeShowHide","SHOW_HIDE","EShapeActionValueShowHide","amountDefault","EShapeActionRuntimeTransformMoveAbsoluteX","EShapeActionRuntimeTransformMove","EShapeActionRuntimeTransformMoveAbsoluteY","EShapeActionRuntimeTransformMoveForwardOrBackward","writtenPositionX","writtenPositionY","oldPositionX","oldPositionY","EShapeActionRuntimeTransformMoveLeftOrRight","EShapeActionRuntimeTransformMoveRelativeX","EShapeActionRuntimeTransformMoveRelativeY","opetype","EShapeActionValueOpetyped","EShapeActionValueTransformResizeType","MOVE","EShapeActionValueTransformMove","ABSOLUTE_X","ABSOLUTE_Y","FORWARD_OR_BACKWARD","LEFT_OR_RIGHT","RELATIVE_X","RELATIVE_Y","amountId","EShapeSizes","centerMode","isPerfect","hsize","toNormalized","EShapeActionValueTransformRotateType","sizeRelativeDefault","sizeAbsoluteDefault","RELATIVE_SIZE","ABSOLUTE_SIZE","RELATIVE_HEIGHT","ABSOLUTE_HEIGHT","RELATIVE_WIDTH","ABSOLUTE_WIDTH","EShapeActionRuntimeTransformResize","dsx","dsy","originX","originY","EShapeActionRuntimeTransformResizeHeightAbsolute","sizeAbsolute","oldSizeY","adjustPosition","EShapeActionRuntimeTransformResizeHeightRelative","sizeRelative","EShapeActionRuntimeTransformResizeSizeAbsolute","writtenWidth","writtenHeight","oldSizeX","EShapeActionRuntimeTransformResizeSizeRelative","EShapeActionRuntimeTransformResizeWidthAbsolute","EShapeActionRuntimeTransformResizeWidthRelative","RESIZE","EShapeActionValueTransformResize","EShapeActionRuntimeTransformRotate","oldRotation","newRotation","EShapeActionRuntimeTransformRotateAbsolute","EShapeActionRuntimeTransformRotateRelative","EShapeCapability","ROTATE","EShapeActionValueTransformRotate","ABSOLUTE","RELATIVE","EShapeActionValueDeserializer","toSerialized","COLOR_AND_ALPHA","EShapeImageElements","dataUrl","imageElements","cachedImageElement","HTMLImageElement","reject","imageElement","extensions","EShapeDeserializer","shapeDeserializer","childrenPromise","childrenOrPromises","childSerialized","childOrPromise","toShape","serializedActions","gradientId","deserializeGradient","imagePromise","imageId","toImageElement","serializeds","EShapeResourceManagerDeserialization","shapes","EShapeBars","loadShapeBar","EShapeCircleUploaded","updateType0Vertex","updateType0Step","updateType0Uv","isStrokeChanged","x4","y4","x7","y7","workStep","calcStep","updateStep","EShapeCircleUploadeds","CIRCLE","EShapeCircle","ay2","ax2","wx","wy","wx2","wy2","EShapeCircles","loadShapeCircle","EShapeGroupUploaded","EShapeGroupUploadeds","EShapeGroupFillEditor","EShapeGroupPoints","toPoints","internalTransformParentInverse","EShapeTransforms","editor","EShapeEditor","invert","identity","disallowOnTransformChange","allowOnTransformChange","keepSize","newLocalTransform","append","applyLocal","bx","by","rx","atan2","ry","shapeBase","EShapeGroupSizeLayout","baseX","baseY","pivotX","pivotY","childBase","WORK_TRANSFORM","translate","_layouts","EShapeGroupSizeEditor","ox","oy","calcRect","_workRectForFit","layouts","workPoint","_workPoint","workRect","_workRectForCalcRect","getBoundsLocal","enlarge","onChange_","newLayout","EShapeGroupSizeViewer","EShapeGroupStrokeEditor","EShapeGroupTextAlignEditor","EShapeGroupTextOffsetEditor","EShapeGroupTextOutlineEditor","EShapeGroupTextPaddingEditor","EShapeGroupTextSpacingEditor","EShapeGroupTextEditor","GROUP","newGroupSize","newGroupFill","newGroupStroke","newGroupText","newGroupPoints","EShapeGroup","IS_EDIT_MODE","result_1","fit","_points","EShapeGroups","loadShapeGroup","EShapeGroupSizeShadowed","GROUP_SHADOWED","EShapeGroupShadowed","EShapeGroupShadoweds","loadShapeGroupShadowed","RECTANGLE","EShapeRectangle","TOP_OR_LEFT","BOTTOM_OR_LEFT","TOP_OR_RIGHT","BOTTOM_OR_RIGHT","IMAGE","EShapeImage","EShapeImages","EShapeRectangleUploaded","x10","y10","swt","pt0","swr","pr0","swb","pb0","swl","pl0","pm0","x02","y02","EShapeRectangleUploadeds","loadShapeImage","EShapeLabelUploaded","updateLabelVertex","updateLabelUv","EShapeLabelUploadeds","LABEL","EShapeLabel","EShapeLabels","loadShapeLabel","pointsClosed","pointId","EShapeLineUploaded","io","isPointChanged","updateLineUv","closed","lprev","lnext","llop","llo","lmax","pprevx","pprevy","pnextx","pnexty","pseg","psegnext","icfprev","loffset","pfirstx","pfirsty","psegfirst","plastx","plasty","pseglast","psecondx","psecondy","psegsecond","nextIndex","pnextxn","pnextyn","loffsetprev","dx32","dy32","closed_1","icf","lengthInverse","EShapeLineUploadeds","minX","maxX","minY","maxY","pointsLength","_valuesBase","_valuesBaseLength","_sizeBase","EShapeLinePoints","ssx","ssy","sizeBase","hasSizeBaseX","hasSizeBaseY","scaleX","scaleY","valuesBase","fitToParentSize","isUpdated","valuesBaseLength","newValuesLength","iupdate","newSegmentsLength","oldStyle","lineOrPoints","LINE","EShapeLine","EShapeLines","loadShapeLine","EShapeNullUploaded","EShapeNullUploadeds","NULL","EShapeNull","EShapeNulls","loadShapeNull","EShapeCapabilities","mappings","PRIMITIVE","capability","EShapeRectangles","loadShapeRectangle","EShapeRectangleRoundedUploaded","updateType1Vertex","updateType1Clipping","updateType1Step","updateType1Uv","dxh","dyh","dxhr","dyhr","x11","y11","dxv","dyv","dxvr","dyvr","x5","y5","x6","y6","x9","y9","x8","y8","x12","y12","x20","y20","x15","y15","x13","y13","x14","y14","x17","y17","x16","y16","x18","y18","x19","y19","x22","y22","x21","y21","rxc","ryc","swtc","ptc0","swrc","prc0","swbc","pbc0","swlc","plc0","plr0","ptb0","ruvx","ruvy","EShapeRectangleRoundedUploadeds","RECTANGLE_ROUNDED","EShapeRectangleRounded","by1","bx1","containsAbs_","wr","hasLeftSide","hasTopSide","hasBottomSide","hasRightSide","EShapeRectangleRoundeds","loadShapeRectangleRounded","BORDER_RADIUS","EShapeTriangleUploaded","updateTriangleVertex","updateTriangleStep","updateTriangleUv","sw","xb","yb","EShapeTriangleUploadeds","TRIANGLE","EShapeTriangle","ay1","aw","EShapeTriangles","loadShapeTriangle","EShapeTriangleRoundedUploaded","updateTriangleRoundedVertex","updateTriangleRoundedClipping","updateTriangleRoundedStep","updateTriangleRoundedUv","isRadiusChanged","sz","rz","dx14","dy14","dx47r","dy47r","dx71","dy71","wsr","pr1","updateStepIf","EShapeTriangleRoundedUploadeds","TRIANGLE_ROUNDED","EShapeTriangleRounded","r12","r13","xl","yl","ni","nlx","nly","nrx","nry","det","deti","xc","yc","containsCorner_","az","c0","c1","c2","containsCorner","EShapeTriangleRoundeds","loadShapeTriangleRounded","loadShapeAll","DThemeWhiteAtlas","_instances","DThemeWhite","klass","_classes","themeClass","loadThemeWhite","setDefaultThemeClass","_offsetX","_offsetY","onTextureUpdate","DShadowImpl","leftWidth","topHeight","rightWidth","bottomHeight","NineSlicePlane","DThemeWhiteConstants","DThemeWhiteFont","newShadow","opacity","stdDeviation","DThemeWhiteBase","getBackground","HIGHLIGHT_COLOR","getBorder","shadow_weak","loadThemeWhiteBase","DThemeWhiteBoard","BACKGROUND_COLOR","BOTH","loadThemeWhiteBoard","DThemeWhiteTextBase","DThemeWhiteImageBase","DThemeWhiteButtonBase","COLOR_PRESSED","COLOR_HOVERED","loadThemeWhiteButton","DThemeWhiteButton","DThemeWhiteButtonAmbient","WEAK_HIGHLIGHT_COLOR","WEAK_HIGHLIGHT_ALPHA","loadThemeWhiteButtonAmbient","DThemeWhiteButtonCheck","IMAGE_TINT_COLOR_FOCUSED","button_check_mark_on","button_check_mark_off","loadThemeWhiteButtonCheck","DThemeWhiteButtonCheckRight","loadThemeWhiteButtonCheckRight","DDialogCloseOn","colorAndAlpha","DThemeWhiteButtonColor","button_color_sample","_shiftX","_shiftY","_onPrerenderBound","onPrerender","_onPostrenderBound","onPostrender","DAnimationFadeIn","_storedTime","_storedTarget","disallowUpdate","allowUpdate","storedTime","unsafe","_storedX","_storedY","_storedAlpha","DDialog","_focusable","_isOpened","onAnimationEnd","_closeOn","closeOn","CLICK_OUTSIDE","onCloseOn","firstFocusable","onClose","ESC","isCancelKey","DThemeWhiteDialog","DThemeWhiteDialogCommand","DThemeWhiteDialogColor","makeCheckerboard","iheight","DThemeWhitePickerColor","picker_color_main","picker_color_pointer","picker_color_base","picker_color_base_pointer","getMainPointerAlpha","getBaseHeight","getBaseMargin","picker_color_alpha","picker_color_alpha_checkerboard","getBasePointerTexture","getBasePointerColor","getRecentColorWidth","getRecentMargin","picker_color_recent_checkerboard","picker_color_recent_null","getSampleWidth","picker_color_sample_checkerboard","picker_color_sample_null","loadThemeWhitePickerColor","loadThemeWhiteDialogColor","loadThemeWhiteButtonColor","_selected","DPickerColorGradientPoint","POINT_SORTER","_onChangeBound","second","_workColor","DPickerColorGradientData","isSelectionChanged","rgb0","hex2rgb","r0","g0","b0","rgb1","r1","g1","rgb","rgb2hex","oldDirection","oldSelected","pointsCopy","pointLike","DPickerDatetimeMask","DThemeWhiteButtonColorGradient","button_color_gradient_sample","DThemeWhiteDialogColorGradient","DThemeWhitePickerColorGradient","picker_color_anchor","picker_color_anchor_outlined","picker_color_anchor_outline","picker_color_direction","loadThemeWhitePickerColorGradient","loadThemeWhiteDialogColorGradient","loadThemeWhiteButtonColorGradient","DThemeWhiteButtonDanger","loadThemeWhiteButtonDanger","DPickerDates","DThemeWhiteButtonDate","DThemeWhiteDialogDate","DThemeWhitePickerTime","HOURS","MINUTES","MONTH_LABELS","DAY_LABELS","defaultLabelFormatter","defaultDateDecorator","DThemeWhitePickerDatetime","DATE","DThemeWhitePickerDate","DThemeWhitePickerDatetimeButtonBack","picker_date_back","DThemeWhitePickerDatetimeButtonDate","DThemeWhitePickerDatetimeButtonNext","picker_date_next","DThemeWhiteText","DThemeWhitePickerDatetimeLabel","DThemeWhitePickerDatetimeLabelDate","DThemeWhitePickerDatetimeSpace","loadThemeWhitePickerTime","loadThemeWhitePickerDatetime","loadThemeWhitePickerDate","loadThemeWhiteDialogDate","loadThemeWhiteButtonDate","DPickerTimes","SECONDS","DPickerDatetimes","hms","caller","getDatetimeMask","DThemeWhiteButtonDatetime","DThemeWhiteDialogDatetime","loadThemeWhiteDialogDatetime","loadThemeWhiteButtonDatetime","loadThemeWhiteButtonFile","DThemeWhiteButtonFile","DThemeWhiteButtonPrimary","loadThemeWhiteButtonPrimary","DDragMode","DThemeWhiteButtonRadio","button_radio_mark_on","button_radio_mark_off","loadThemeWhiteButtonRadio","DThemeWhiteButtonRadioRight","loadThemeWhiteButtonRadioRight","loadThemeWhiteButtonSecondary","DThemeWhiteButtonSecondary","DThemeWhiteButtonTime","DThemeWhiteDialogTime","loadThemeWhiteDialogTime","loadThemeWhiteButtonTime","loadThemeWhiteButtonAll","DThemeWhiteCanvas","DChartAxisPosition","DChartAxisTickPosition","DThemeWhiteCanvasContainer","NOT_NONE","ON","loadThemeWhiteCanvasContainer","EShapeGroupFillViewer","EShapeGroupStrokeViewer","EShapeGroupTextAlignViewer","EShapeGroupTextOffsetViewer","EShapeGroupTextOutlineViewer","EShapeGroupTextPaddingViewer","EShapeGroupTextSpacingViewer","EShapeGroupTextViewer","units","EShapeBufferUnitBuilder","unit","EShapeBufferUnit","ntriangles","nindices","nvertices","Buffer","isIndicesShort","EShapeBufferCount","Geometry","addIndex","addAttribute","EShapeBuffer","unitCount","DRAW_MODES","TRIANGLES","unit0","unit1","ioffset0","ioffset1","uniforms","sampler","draw","vindex","iindex","getVertexOffset","getIndexOffset","iterator","getVertexCount","getIndexCount","creater","DUMMY_SHAPES","EShapeRendererIteratorDatum","_index","_datum","_data","EShapeRendererIterator","datumIndex","newDatum","_shader","Shader","_iterator","_bufferSize","_bufferSizeMax","getBufferSizeMax","EShapeRenderer","webGLVersion","uint32ElementIndex","fontAtlases","defaultTexture","textureItem","newTextureItem","updateAtlas","updateAtlases","fontAtlas","updateFontAtlas","updateFontAtlases","buffers","getDefaultTexture","repack","updateBuffers","pixelScale","translationMatrix","toArray","setBlendMode","correctBlendMode","BLEND_MODES","bufferSize","bufferSizeMax","ib","ibmax","increaseBufferSize","jb","getBufferSize","ObjectRenderer","_childrenId","_childrenIdRendered","_fontAtlases","_pixelScale","_pixelScaleId","_work","_buffers","EShapeContainer","childrenId","childrenIdRendered","shapeRenderer","SHAPE_RENDERER","batch","setObjectRenderer","render_","worldID","dpr","childLocal","containsBBox","EShapeSearch","toDepth","isParent","shapeParent","findChildById","findChildByType","matcher","findChild","findChildrenByType","findChildren","EShapeDeleter","generateListOfDetachedShapes","COMPARATOR_INDEX","resourceToIndex","EShapeResourceManagerSerialization","EShapeRuntimes","DThemeWhiteChartAxisBase","OUTSIDE","DThemeWhiteChartAxisY","DThemeWhiteChartCoordinateLinear","DThemeWhiteDiagramBase","DThemeWhiteDiagramCanvasBase","loadThemeWhiteDiagram","DThemeWhiteDiagram","DThemeWhiteDiagramCanvas","DThemeWhiteDiagramEditor","EThemeWhiteShapeActionValue","toOpetypedLabel","toSubtypedLabel","toTypedLabel","toTypeLabel","toConditionLabel","typeLabel","toShowHideTypeLabel","toBlinkTypeLabel","toChangeColorTypeLabel","toMiscTypeLabel","subtypeLabel","toTransformTypeLabel","toTransformRotateTypeLabel","toTransformMoveTypeLabel","toTransformResizeTypeLabel","HIDE","loadThemeWhiteShapeActionValue","loadThemeWhiteDiagramEditor","DThemeWhiteDiagramCanvasEditor","loadThemeWhiteDialog","loadThemeWhiteDialogCommand","DThemeWhiteDialogConfirm","DThemeWhiteDialogConfirmMessage","DThemeWhiteImage","loadThemeWhiteDialogConfirm","DThemeWhiteDialogConfirmDelete","loadThemeWhiteDialogConfirmDelete","DThemeWhiteDialogConfirmDiscard","loadThemeWhiteDialogConfirmDiscard","DThemeWhiteDialogInputText","loadThemeWhiteDialogInputText","DThemeWhiteDialogMessage","loadThemeWhiteDialogMessage","message","DThemeWhiteDialogProcessing","DThemeWhiteDialogProcessingMessage","loadThemeWhiteDialogProcessing","DThemeWhiteDialogSaveAs","loadThemeWhiteDialogSaveAs","DThemeWhiteDialogSelect","DThemeWhitePane","TOUCH","DThemeWhiteList","DThemeWhiteDialogSelectList","DThemeWhiteListItem","HIGHLIGHT_ALPHA","DThemeWhiteDialogSelectListItem","loadThemeWhiteDialogSelect","loadThemeWhiteDialogAll","DThemeWhiteDropdown","dropdown_mark","DThemeWhiteLayout","DThemeWhiteLayoutVertical","DThemeWhiteMenu","newShadowWeak","DThemeWhiteMenuItem","DThemeWhiteMenuItemText","DThemeWhiteMenuItemCheck","menu_item_mark_check_active","menu_item_mark_check_inactive","DThemeWhiteMenuItemExpandable","DThemeWhiteMenuItemExpandableBody","DThemeWhiteMenuItemExpandableHeader","isActiveIn","menu_item_expandable_header_opened","menu_item_expandable_header_closed","DThemeWhiteMenuItemExpandableItemCheck","DThemeWhiteMenuItemLink","menu_item_mark_link","getOpenLinkInNewWindow","getCopyLinkAddress","DThemeWhiteMenuItemExpandableItemLink","DThemeWhiteMenuItemMenu","menu_item_mark_next","DThemeWhiteMenuItemExpandableItemMenu","DThemeWhiteListItemSeparator","DThemeWhiteMenuItemExpandableItemSeparator","DThemeWhiteMenuItemSeparator","DThemeWhiteLayoutSpace","DThemeWhiteMenuItemExpandableItemSpace","DThemeWhiteMenuItemSpace","DThemeWhiteMenuItemExpandableItemText","loadThemeWhiteMenu","loadThemeWhiteDropdown","DThemeWhiteExpandable","ESnapperTargetValueType","DThemeWhiteExpandableHeader","loadThemeWhiteExpandable","loadThemeWhiteImage","DThemeWhiteLayoutHorizontal","HORIZONTAL","DThemeWhiteInputAndLabel","loadThemeWhiteInputAndLabel","editingValidator","editingUnformatter","DThemeWhiteInput","INVALID_COLOR","DThemeWhiteInputNumber","parseInt","DThemeWhiteInputInteger","loadThemeWhiteInputInteger","DThemeWhiteInputLabel","loadThemeWhiteInputLabel","DThemeWhiteInputReal","loadThemeWhiteInputReal","DThemeWhiteInputText","loadThemeWhiteInputText","loadThemeWhiteInputAll","loadThemeWhiteLayout","loadThemeWhiteList","DThemeWhiteMenuBar","DThemeWhiteMenuBarItem","loadThemeWhiteMenuBar","DThemeWhiteMenuSided","DThemeWhiteMenuSidedContent","loadThemeWhiteMenuSided","DThemeWhiteMenuSidedItemCheck","DThemeWhiteMenuSidedItemLink","DThemeWhiteMenuSidedItemMenu","DThemeWhiteMenuSidedItemSeparator","DThemeWhiteMenuSidedItemSpace","DThemeWhiteMenuSidedItemText","DThemeWhiteMenuSidedItemExpandable","DThemeWhiteMenuSidedItemExpandableItemCheck","DThemeWhiteMenuSidedItemExpandableItemLink","DThemeWhiteMenuSidedItemExpandableItemMenu","DThemeWhiteMenuSidedItemExpandableItemSeparator","DThemeWhiteMenuSidedItemExpandableItemSpace","DThemeWhiteMenuSidedItemExpandableItemText","DThemeWhiteNote","loadThemeWhiteNote","DThemeWhiteContent","DThemeWhiteScrollBar","DThemeWhiteScrollBarThumb","loadThemeWhiteScrollBar","loadThemeWhitePane","loadThemeWhiteSelect","DThemeWhiteSelect","DThemeWhiteTable","DThemeWhiteTableBody","DThemeWhiteTableBodyCells","TOP_BOTTOM","DThemeWhiteTableBodyCellCheck","DThemeWhiteTableBodyCellColor","DThemeWhiteTableBodyCellDate","DThemeWhiteTableBodyCellDatetime","DThemeWhiteTableBodyCellIndex","DThemeWhiteTableBodyCellInputInteger","DThemeWhiteTableBodyCellInputReal","DThemeWhiteTableBodyCellInputText","DThemeWhiteTableBodyCellSelectDialog","DThemeWhiteTableBodyCellSelectFetcher","DThemeWhiteTableBodyCellSelectMenu","DThemeWhiteTableBodyCellText","DThemeWhiteTableBodyCellTime","DThemeWhiteTableRow","DThemeWhiteTableBodyRow","DThemeWhiteTableBodyRowEven","HIGHLIGHT_BLENDED","WEAK_HIGHLIGHT_BLENDED","DThemeWhiteTableBodyRowOdd","DThemeWhiteTableHeader","DThemeWhiteTableHeaderCell","loadThemeWhiteTable","loadThemeWhiteText","loadThemeWhiteAll","DThemeWhiteChart","DThemeWhiteChartAxisX","loadAll","_isEnabled","ESnapperGrid","disable","distance","ESnapperResult","snapped","newDistance","oldDistance","ESnapperModifierAnchor","ESnapperTargetValue","_isVisible","ESnapperTarget","valueA","_normals","_lengths","_workScale","_workSnapResultX","_workSnapResultY","_workScaleResult","_workTranslate","_workSnapRectangle","_workSnap","grid","ESnapper","prepare","snap","workTranslate","newDx","newDy","baseRotation","deltaRotation","gridSize","getGridSizeRotation","newRotationDegree","toDegree","newRotationDegreeResidual","toRadian","p0","p1","anchor","normals","lengths","calcNormalizedVector","TOP_CENTER","MIDDLE_LEFT","MIDDLE_RIGHT","BOTTOM_CENTER","normal","mx","setScaleSnappedResult","my","calcScaleSnapped1D","detA","mdx","mdy","pointO","pointX","pointY","calcScaleSnapped2D","calcScaleSnappedX","calcScaleSnappedY","keepRatio","calcScaleSnappedXY","_isStarted","DAnimationEmpty","DApplicationPadding","bbox","_root","getBoundingClientRect","_pixi","autoStart","DApplicationOptions","updateWidthAndHeight","pixi","ROUND_PIXELS","Renderer","__plugins","accessibility","DChartCoordinateDirection","isDblClickable","onDblClick","isWheelable","onWheel","getPixiApplicationOptions","setInstace","_isUpdateAllowed","_refitLimit","_reflowLimit","_renderBound","_renderId","rootElement","insertBefore","overflow","hasFocus","onBlurBound","getKeyboardController","getPadding","wheelGlobal","wheelEventUtil","wheelEvent","toGlobal","hitTest","DApplication","requestAnimationFrame","oldRenderId","onRendering","newRenderId","screen","ilimit","limit","isChildrenDirty","Application","DBoard","DButtonBase","_isToggle","isToggle","_onActiveUpBound","setPressed","_onActiveUpBoundTarget","setActiveHandlers","group","onToggleStart","onToggleEnd","onActivateKeyDown","onActivateKeyUp","DButton","DButtonAmbient","DButtonCheck","DButtonCheckRight","DButtonPrimary","DLayoutHorizontal","DDialogCommand","getLayoutX","getLayoutY","getLayoutWidth","getLayoutHeight","onInit","ok","getOk","cancel","getCancel","buttonLayout","_buttonLayout","_buttonCancel","active","_buttonOk","onOk","_promise","_resolve","_reject","DInput","_editingValidationResult","_editingValidator","editing","validator","getEditingValidator","_isInputShown","_inputRect","_isInputSelected","_clipperRect","_description","description","_editingFormatter","getEditingFormatter","_editingUnformatter","unformatter","getEditingUnformatter","_onPreRenderBound","onPreRender","validate","setInvalid","editingValidationResult","start_","clipper","getClipper","inputRect","getInputRect","clipperRect","getClipperRect","scrollTop","scrollLeft","getClipperStyle","resetSelection","_clipper","containsPoint","mouse","setSelectionRange","createClipper","getClipperStylePosition","oldValue","onTextValueChange","worldVisible","DInputNumber","_step","getStep","toStep","_min","getMin","toMin","_max","getMax","toMax","updateInputStep","updateInputMin","updateInputMax","valueAsString","initInputStep","initInputMin","initInputMax","DInputReal","DText","DInputLabel","_label","label","space","DInputAndLabel","DInputRealAndLabel","DInputText","DInputTextAndLabel","onColorChange","onAlphaChange","_colorAndAlpha","_onColorChange","_onAlphaChange","DPickerColorAndAlpha","recents","_recents","DPickerColorRecent","recent","DPickerColor","_currentPicker","_newPicker","_recent","_new","setColorNew","setAlphaNew","setColorCurrent","setAlphaCurrent","_pointerPoint","mainWidth","getMainWidth","mainHeight","getMainHeight","mainBaseSprite","_mainBaseSprite","mainSprite","_mainSprite","getMainTexture","_onMainMoveBound","onMainMove","_onMainUpBound","onMainUp","onMainDown","baseSprite","_baseSprite","_onBaseMoveBound","onBaseMove","_onBaseUpBound","onBaseUp","onBaseDown","alphaCheckerboardSprite","_alphaCheckerboardSprite","getAlphaCheckerboardTexture","alphaSprite","getAlphaTexture","_onAlphaMoveBound","onAlphaMove","_onAlphaUpBound","onAlphaUp","onAlphaDown","mainPointerSprite","_mainPointerSprite","getMainPointerTexture","getMainPointerColor","alphaPointerSprite","_alphaPointerSprite","getAlphaPointerTexture","getAlphaPointerColor","getAlphaPointerAlpha","basePointerSprite","_basePointerSprite","getBasePointerAlpha","_recentColorSprites","recentColorSprites","recentColorCount","getRecentColorCount","recentColorWidth","recentColorHeight","getRecentColorHeight","recentColorWidthHalf","recentColorHeightHalf","recentColorMargin","getRecentColorMargin","recentColorY","getAlphaHeight","recentCheckerboardTexture","getRecentCheckerboardTexture","RECENT_COLORS","getRecents","onRecentChange","onRecentClick","checkerboardSprite","currentTarget","sprite","recentColorAndAlpha","inputMargin","getInputMargin","inputY","inputWidth","inputAndLabelColor","_inputAndLabelColor","getInputLabelWidth","fromCode","inputAndLabelAlpha","_inputAndLabelAlpha","sampleWidth","sampleHeight","getSampleHeight","sampleX","sampleY","sampleCurrentCheckerboardSprite","_sampleCurrentCheckerboardSprite","getSampleCheckerboardTexture","sampleCurrentSprite","_sampleCurrentSprite","sampleNewCheckerboardSprite","_sampleNewCheckerboardSprite","sampleNewSprite","_sampleNewSprite","onMainPick","hw","ux","uy","toMainHex","onColorNew","toMainColor","hsv","fromRgb","toRgb","ns","nv","onBasePick","toBaseHex","onColorBase","toBaseColor","onAlphaPick","onAlphaNew","sprites","nPointsPerData","_nPointsPerData","_colors","_lastHitIndex","_parts","uSampler","DPickerColorGradientDataView","setColors","setColorsHex","setColorsWhite","setVertices","setUvs","newIndices","setColorsPoint","pointSize","local","isEqual","ap","bp","apj","bpj","DPickerColorGradientRecent","DPickerColorGradient","gradientPointsWidth","getGradientPointsWidth","gradientPointsMargin","getGradientPointsMargin","picker","_picker","onAnchorColorChange","onAnchorAlphaChange","_view","setRectangle","getLastHitIndex","onViewDown","_onAnchorDownBound","onAnchorDown","_onAnchorMoveBound","onAnchorMove","_onAnchorUpBound","onAnchorUp","_anchors","inputLabelWidth","inputDirectionMargin","getGradientDirectionMargin","inputDirectionTexture","getGradientDirectionTexture","inputLeft","inputDirection","change","recentColumn","getGradientRecentColumn","recentWidth","getGradientRecentWidth","recentMargin","getGradientRecentMargin","recentWidthAndMargin","RECENT_COLOR_GRADIENT","getGradientRecents","getGradientRecentCount","getCapacity","onRecentUpdate","lastHitIndex","updateAnchors","onAnchorSelect","recentData","fromObject","addAt","toAnchorPosition","onAnchorDragStart","new","anchorTexture","getGradientAnchorTexture","anchorOutlinedTexture","getGradientAnchorOutlinedTexture","anchors","anchorSize","newAnchor","oldAnchor","isDeleteKey","DDialogColorGradient","DButtonColorGradient","_dialogOptions","dialog","getViewBaseTexture","_dialog","DIALOG","DDialogColor","DButtonColor","updateTextForcibly","dialogNew","dialogCurrent","DButtonDanger","DPickerDatetimeButtonBack","DPickerDatetimeButtonDate","DPickerDatetimeButtonNext","DPickerDatetimeLabel","DPickerDatetimeLabelDate","DPickerDatetimeSpace","DInputInteger","_date","_inclusive","inclusive","DPickerTimeBound","DPickerTimeBoundHours","lower","lowerDate","constant","hour","lowerDateHours","minute","upper","upperDate","upperDateHours","DPickerTimeBoundMinutes","lowerDateMinutes","upperDateMinutes","DPickerTimeBoundSeconds","newConstant","hours","minutes","seconds","DPickerTimeBounds","test","getTime","setSeconds","setMinutes","setHours","setDate","am","bm","ad","bd","ah","bh","compare","toBoundOptions","onNewChanged","DPickerTime","_dateCurrent","dateCurrentTime","_dateNew","_dateBounds","getLowerBound","isLowerBoundInclusive","getUpperBound","isUpperBoundInclusive","toBoundsOptions","newChildren","dateCurrent","dateNew","_inputHours","_inputMinutes","_inputSeconds","currentTime","onReset","dateBounds","inputHours","inputMinutes","inputSeconds","newInputHours","newInputMinutes","newInputSeconds","newTimeLayout","newTimeLayoutChildren","getTimeLayoutWidth","getTimeLayoutHeight","newMinuteSeparator","newSecondSeparator","getMinuteSeparator","getSecondSeparator","inputOptions","getHoursOptions","adjustInputOptions","onHoursChanged","getMinutesOptions","onMinutesChanged","getSecondsOptions","onSecondsChanged","DPickerDatetime","_datePage","_dateButtons","newDateButtons","_dateDecorator","decorator","getDateDecorator","newLabel","_labelFormatter","getLabelFormatter","newBackButton","newNextButton","newDateLabels","datePage","onPageChanged","setFullYear","buttons","spaceCount","getDay","getDayStart","dateDecorator","dateCount","dateNewDate","setDisabled","buttonOptions","back","getBackButtonOptions","getNextButtonOptions","dateLabels","getDayLabels","dayStart","newDateLabel","newSpace","newDateButton","onDateButtonClicked","setMonth","DPickerDate","DDialogDate","page","DDialogDates","DButtonDate","DDialogDatetime","DDialogDatetimes","DButtonDatetime","_datetimeMask","toMask","DButtonFileAs","DButtonFile","_opener","onOpening","_buttons","_active","_stateOn","_stateOff","_onActiveBound","onActive","DButtonGroup","DButtonRadio","DButtonRadioRight","commandController","getCommandController","DButtonSecondary","DDialogTime","DDialogTimes","DButtonTime","DBaseOverflowMask","tr","arcTo","stopper","_stopper","drag","getDragMode","getDragModifier","getDragDurationPosition","getDragDurationScale","_dragUtil","toNormalizedScale","scaleRatio","DCanvasContainerViewDrag","dragUtil","_newScale","_newX","_newY","_oldScale","_oldX","_oldY","DCanvasContainerViewTransform","zoom","_zoomPoint","_zoomMin","getZoomMin","_zoomMax","getZoomMax","wheelZoom","wheel","_isWheelZoomEnabled","isWheelZoomEnabled","_wheelZoomSpeed","speed","getWheelZoomSpeed","_wheelZoomModifier","getWheelZoomModifier","_wheelZoomChecker","dblClickZoom","dblclick","_isDblClickZoomEnabled","isDblClickZoomEnabled","_dblClickZoomSpeed","getDblClickZoomSpeed","_dblClickZoomModifier","getDblClickZoomModifier","_dblClickZoomChecker","_dblclickZoomDuration","getDblClickZoomDuration","wheelTranslation","translation","_isWheelTranslationEnabled","isWheelTranslationEnabled","_wheelTranslationSpeed","getWheelTranslationSpeed","_wheelTranslationModifier","getWheelTranslationModifier","_wheelTranslationChecker","_drag","DCanvasContainerView","newCanvasX","newCanvasY","canvasScaleX","canvasScaleY","newCanvasScale","oldCanvasScale","canvasScaleRatio","zoomAt","zoomAtGlobal","DCanvasContainer","updateContentSize","canvasX","canvasY","vresult","sresult","DCanvas","_coordinateIndex","toPosition","_tick","toTickContainer","DChartAxisBaseOptionParser","getPosition","tick","getTickEnable","major","toTickMajor","minor","toMinorTick","getMajorTickPosition","getMajorTickStyle","getMajorTickCount","getMajorTickSize","toTickPosition","toTickStroke","toMajorTickText","toMajorTickFormatter","tickPosition","getMinorTickPosition","getMinorTickStyle","getMinorTickCount","getMinorTickSize","optionsA","optionsB","getMajorTickTextFormat","toMajorTickTextAlign","toMajorTickTextOffset","toMajorTickTextOutline","toMajorTickTextSpacing","toTickMajorTextDirection","toMajorTickTextPadding","getMajorTickTextAlignHorizontal","getMajorTickTextAlignVertical","getMajorTickTextPaddingHorizontal","getMajorTickTextPaddingVertical","getMajorTickTextDirection","toLabelAlign","toLabelOffset","toLabelOutline","toLabelSpacing","toLabelDirection","toLabelPadding","getLabelAlignHorizontal","getLabelAlignVertical","getLabelPaddingHorizontal","getLabelPaddingVertical","getLabelDirection","parser","coordinateIndex","_majorTicks","Float64Array","_minorTicks","DChartAxisBase","_container","bar","_bar","plotAreaSize","plotArea","plotAreaSizeX","plotAreaSizeY","majorShapes","minorShapes","shapePositionY","majorCount","majorFormatter","minorCountPerMajor","minorCount","majorTicks","minorTicks","ticks","majorShape","imajorTick","majorTickPosition","majorTickProjectedPosition","majorTickStep","minorShape","iminorTick","minorTickPosition","minorTickProjectedPosition","shapePositionX","updateTicksX","updateTicksY","tickShapeContainer","barPosition","attach","tickMajor","tickMajorShapes","tickMajorCount","tickMajorSize","tickMajorPosition","tickMajorStyle","tickMajorShape","tickMinor","tickMinorShapes","tickMinorCount","tickMinorSize","tickMinorPosition","tickMinorStyle","tickMinorShape","updateBar","updateTicks","_plotArea","_list","DChartAxisContainerImpl","axes","axisOrPosition","indexOrUndefined","removed","unbind","DChartAxisX","DChartAxisY","DCHART_COLOR_SET_1","DCHART_COLOR_SET_2","DChartColorSet2","DChartPlotAreaFitTarget","DChartCoordinateContainerSubImpl","coordinateOrIndex","_x","X","_y","cxs","cys","DChartCoordinateContainerImpl","DChartRegionImplObservable","domainFrom","domain","domainTo","_domain","onRegionChange","rangeFrom","rangeTo","_range","DChartCoordinateLinear","series","pixelFrom","pixelTo","domainSpan","rangeSpan","isZero","_iratio","_ioffset","power","LN10","toStepScale","majorPosition","rangeMin","rangeMax","minorPosition","majorResult","minorResult","domainMin","domainMax","majorStep","calcStepMajor","map","imajorResult","iminorResult","getRangeMax","idomainStart","idomainEnd","minorStep","calcStepMinor","imajor","iminor","majorProjectedPosition","minorProjectedPosition","DChartRegionImpl","toScalar","DChartSeriesStrokeImpl","_stroke","listLength","DChartSeriesContainerImpl","seriesOrIndex","_coordinate","_series","_axis","DChartPlotAreaImpl","DListSelectionMode","_coordinateIndexX","_coordinateIndexY","_pointId","_pointIdUpdated","_coordinateIdUpdatedX","_coordinateIdUpdatedY","_regionPointId","DChartSeriesLine","containerStroke","line","_line","toStroke","coordinateX","coordinateY","coordinateIdX","coordinateIdY","isCoordinateXChanged","isCoordinateYChanged","updateLine","xcoordinate","ycoordinate","valuesLength","segmentsLength","ivalues","isegments","xraw","yraw","segment","updateRegion","DChart","_destroyed","DCommandCreate","DCommandDelete","getDocumentController","delete","DCommandSaveAs","saveAs","DCommandSave","DContent","DDiagramCanvasTileMappingPointImpl","lon","lat","mappingOrEnable","lon0","lat0","lon1","lat1","_cb","DDiagramCanvasTileMappingImpl","_factory","factory","onMappingChange","DDiagramCanvasTile","pyramid","_pyramid","DDiagramLayer","layer","DDiagramLayerContainer","activate","addChildAt","activateNext","_layer","_tile","tile","DDiagramCanvasBase","layers","snapperGraphics","_snapperGraphics","snapper","_snapper","DDiagramCanvasEditor","version","interactives","actionables","ids","_lastOverShape","DDiagramCanvas","initializeShapes","updateShapes","initializeFocus","shapeId","this_1","interactiveLocal","lastOverShape","onPointerMove","previousRuntime","onPointerOut","lastOverParent","parentRuntime","onPointerOver","clickable","clickableLocal","DDiagrams","simple","pflayers","pfresources","pfitems","shapePromises","deserializeAll","pfitem","canvasContainer","_serialized","_tileFactory","DDiagramBase","oldSerialized","onUnset","onSet","newCanvas","newLayer","initialize","applyBackground","_controller","controller","_isChanged","DDiagramEditor","newId","reason","isNew","onShapeMove","onShapeUp","onShapeClick","DDiagram","formatterMap","initialMap","actionMap","runtimeConstructor","tagFormat","tagInitial","toRuntime","onShapeDown","DDialogConfirmMessage","DDialogConfirm","toMessage","_message","newMessage","toMessageOptions","toMessageOptionsMerged","getMessage","DDialogConfirmDelete","DDialogConfirmDiscard","enter","getLabelWidth","getLabel","DDialogInputText","DDialogMessage","DDialogProcessingMessage","_isDone","_interval","getInterval","DDialogProcessing","timeoutId","_timeoutId","setStates","onDone","delay","onResolved","onRejected","DDialogSaveAs","getName","DDialogSelectListItem","content","_content","_mode","SINGLE","DListSelection","getChildIndex","MULTIPLE","targetIndex","DScrollBar","_start","_end","thumb","_thumb","createThumb","DScrollBarThumb","onDragMove","getMinimumSize","DScrollBarThumbReflowableHorizontal","DScrollBarThumbHorizontal","DScrollBarHorizontal","getLocalPosition","newStart","thumbMinimumSize","barStart","barSize","DScrollBarThumbReflowableVertical","DScrollBarThumbVertocal","DScrollBarVertical","DPane","toContent","initScrollBar","initDrag","dragMode","position_1","toContentX","toContentY","verticalBar","_verticalBar","toBarOptionsVertical","onRegionMoveY","horizontalBar","_horizontalBar","toBarOptionsHorizontal","onRegionMoveX","onContentChanged","updateScrollBar","newContent","getWheelContentX","getWheelContentY","getWheelSpeed","updateScrollBarRegions","updateScrollBarVisibilities","updateScrollBarPositions","verticalBarWidth","horizontalBarHeight","setRegion","isChangedHorizontal","updateScrollBarVisibility","isChangedVertical","isRegionVisible","WORK_ON_FOCUSED","contentX","contentY","contentWidth","contentHeight","DList","_selection","newSelection","findItem","updateChildPosition","updateChildVisibility","scrollLimit","itemY","DDialogSelectList","DNote","defaultConverter","toToLabel","converter","toNoteOptions","toNoteNoItemsOptions","note","noItems","getNoteNoItemsText","toNoteSearchingOptions","searching","getNoteSearchingText","noteNoItems","_noteNoItems","noteSearching","_noteSearching","search","searchResults","childrenLength","searchResultsLength","minLength","searchResult","removeChildAt","newChild","transition","isDone","getResult","DDialogSelect","owner","_owner","_closeables","DMenuContext","closeables","imin","DMenu","_fit","_sticky","_sub","onPrerenderBound","getBounds","getOffsetX","getOffsetY","isArrowUpKey","isArrowDownKey","setMenuCreator","DMenuSidedSelectionMode","DDropdown","toMenuOptions","DExpandableHeader","DExpandable","DInputIntegerAndLabel","tileSize","_tileSize","DMapCoordinateEPSG3857","lonlat","meters","C","CIRCUMFERENCE_HALF","tan","atan","exp","tz","R","Z","metersToTile","lonLatToMeters","metersToPixels","metersToLonLat","pixelsToMeters","toResolutionMeter","DMapCoordinates","_default","_sprite","DMapTile","onLoaded","_builder","_onLoaded","_isOnLoadedCalled","_isOnLoadedAllowed","_onLoadedBound","_tz","_lon0","_lat0","_lon1","_lat1","_tiles","_renderTileBound","renderTile","_txmin","_txmax","_tymin","_tymax","_deleteTileBound","tileCode","tiles","deleteTile","_destroyTileBound","destroyTile","_updateLoadingStateForEach","loaded","_isLoaded","_tileCount","toTileCount","_tileScaleRelative","_tileScale","getTileSize","DMapTilePlane","_renderer","oldLon0","oldLat0","oldLon1","oldLat1","lonLatToTile","tx1","ty1","tileCount","txmin","txmax","tymin","tymax","dtxmin","dtxmax","dtymin","dtymax","isTxMinChanged","isTxMaxChanged","isTyMinChanged","isTyMaxChanged","ctx","cty","ltx","lty","lt","toOffset","loadTile","it","txa","loadTilesY","txb","tya","loadTilesX","tyb","toTileCode","toTilePosition","newTile","tileScaleRelative","tileToPixels","updateLoadingState","tileScale","mappingLonLat","_mappingInternal","toMapping","_z","_minZ","plane","_maxZ","_planes","_fitBound","_fitBoundTimeout","_fitThrottle","throttle","fitThrottledBound","_fitThrottledBound","fitThrottled","DMapTilePyramidImpl","WORK_LONLAT","lonLatToPixels","oldMapping","newMapping","planes","planeTz","toZ","toTileZ","newPlane","pixelsToLonLat","destroyPlanesBefore","destroyPlanesAfter","DMapTileUrlBuilderOsmfj","DMapTilePyramids","MIN","MAX","THROTTLE","DEFAULT","toPlaneOptions","DMenuBarItem","DMenuBarBlocker","DMenuBar","itemOrItemOptions","_blocker","DMenuSidedContent","DTableColumnType","defaultFilter","_item","_filter","filter","getFilterDefault","DMenuSidedSelection","set_","hasMenu","oldItem","DMenuSided","DSelect","_onSelectedBound","onSelected","_onClosedBound","onClosed","findMenuItem","DTableBodyCellCheck","_columnIndex","_columnData","DTableBodyCellColor","hasColor","hasAlpha","DTableBodyCellIndex","rowIndex","DTableBodyCellInputInteger","newCellValue","oldCellValue","DTableBodyCellInputReal","DTableBodyCellInputText","DTableBodyCellSelectDialog","selecting","getter_1","getter","onSelectBound_1","onCloseBound_1","columnIndex","DTableBodyCellSelectFetcher","fetcher","DTableBodyCellSelectMenu","newSelected","DTableBodyCellText","FILTERED_COMPARATOR","DTableBodyFilterImpl","newFiltered","oldFiltered","_filtered","setFiltered","filtered","rows","rowsLength","filteredRowIndex","DTableBodyCellDate","textValueComputed","DTableBodyCellDatetime","DTableBodyCellTime","DTableSelectionType","DTableRow","columns","_columns","newCell","isBodyCell","DTableBodyRow","_onCellChangeBound","_row","setter","cell","cellOptions","toCellOptions","editable","newCellEditable","newCellUnediable","setReadOnly","INDEX","INTEGER","REAL","CHECK","BUTTON","SELECT","DATETIME","TIME","cells","cellsLength","columnsLength","unset","DTableBodyRowEven","DTableBodyRowOdd","COMPARATOR","Set","DTableSelection","has","oldSize","result_2","lastRowIndex","getLastIndex","includeFrom","includeTo","rowIndices","shifted","DTableBody","selectionType","toSelectionType","rowOptions","getRowHeight","toRowOptions","_rowOptions","_rowHeight","_rowIndexStart","_rowIndexEnd","toData","_updateRowsCount","_isUpdateRowsCalled","_isUpdateRowsCalledForcibly","_workRows","onSelectionChange","onFilterChange","WORK_ON_CLICK","dataLength","isSingle","isNotSingle","realRowIndex","isEmpty","clearAndAdd","addTo","callIfNeeded","rowHeight","oldRowIndexStart","oldRowIndexEnd","oldRowCount","newContentHeight","newContentY","newRowIndexLowerBound","newRowIndexUpperBound","newRowIndexStart","newRowIndexEnd","newRowCount","oldRowIndex","newRow","rowIndexStartDelta","absRowIndexStartDelta","resetRow","isEven","lock","unlock","DTableHeaderCell","DTableHeader","defaultGetter","defaultSetter","defaultEditingUnformatter","toColumnEditing","toColumnMenu","toColumnDialog","defaultSelectingGetter","toColumnSelecting","toColumn","toColumnAlign","DTable","toColumns","toHeaderOptions","toBodyOptions","wcardinal","ui"],"mappings":"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"}